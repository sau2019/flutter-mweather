(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[39],{"+gTl":function(e,t,r){var n,o;n=[r("UFvF"),r("YLtl"),r("ndZK"),r("Shoh"),r("U44B"),r("MGCh"),r("a8ov"),r("a65H"),r("RdGa"),r("9AdD")],void 0===(o=function(e,t,r,n,o,a,i,s,c,l){const u=a.channel("brandkit-utils"),d=i.default,g="headline-font",h="body-font",f={};function p(e){return e.getLogoWithUniqueRole("primary-logo").then(t=>f.brandKitLogoToCoreBrandLogo(e,t)).catch(e=>{const t=e?e.message:"";u.error("getPrimaryBrandLogo error: ".concat(t),e)})}function m(e){return e.getColors().then(e=>(function(e){return t.map(e,e=>f.brandKitColorToCoreBrandColor(e))})(e))}function v(t,r){return e.fcall(()=>t.getFontWithRole(r)||t.getFontWithUniqueRole(r)).then(f.fontThingToFontInfo)}function y(r){return r?e.all(t.map([g,h],e=>v(r,e).then(f.fontInfoToCoreBrandFont))):e.resolve()}function b(t){return v(t,g).then(t=>{for(let r=0;r<n.length;r++){const o=n[r].feel;for(let a=0;a<n[r].fontCards.length;a++)for(let i=0;i<n[r].fontCards[a].fonts.length;i++)if(t.lookupKey===n[r].fontCards[a].fonts[i].lookupKey&&n[r].fontCards[a].fonts[i].role===g)return e.resolve([o])}return e.resolve([])})}return f.fontThingToFontInfo=function(t){return t?"function"==typeof t.getMetrics?e.fcall(()=>t.getMetrics()||t.getMetricsAsync()).then(e=>({id:t.getId&&t.getId(),metrics:e,acRoles:e.acRoles||t.getRoles&&t.getRoles()||[],lookupKey:t.lookupKey(),fontFace:t})):"function"==typeof t.getInfo?t.getInfo().then(e=>r.getFont(e.lookupKey)).then(e=>({id:t.getId(),metrics:e.face.metrics,acRoles:e.face.metrics.acRoles||t.getRoles&&t.getRoles()||[],lookupKey:e.face.lookupKey,fontData:e})):e.reject("fontThingToFontInfo: font is not a recognized type"):e.reject("fontThingToFontInfo: no font to inspect")},f.fontInfoToCoreBrandFont=function(e){if(!e)return;const t=e.metrics||e;let r=t.postScriptName,n=o.fontProvider.descriptorForPostScriptName(r);return n&&n.postScriptName===r||(u.error("fontInfoToCoreBrandFont: did not find font with psname ".concat(r)),r="PTSans-Regular",n=o.fontProvider.descriptorForPostScriptName(r)),new c({id:e.id||e.sparkElementId,acRoles:e.acRoles||t.acRoles,descriptor:n,lookupKey:e.lookupKey})},f.brandKitLogoToCoreBrandLogo=function(t,r){const n=r.getHrefAsync(),o=r.getData(),a=t.composite.getDCXComposite().current.getComponentsOf(o)[0],i=d.encodeAuthoringContextUrl(t.getId(),a.id,a.etag.replace(/"/g,""),a.type);return n.then(t=>e.Promise(e=>{const n=new Image;n.onload=function(){e(new s({id:r.getId(),acRoles:r.getRoles(),acName:r.getName(),url:i,fullResUrl:t,pixelWidth:n.width,pixelHeight:n.height,mimeType:a.type}))},n.src=t}))},f.brandKitColorToCoreBrandColor=function(e){return new l({id:e.getId(),acRoles:e.getRoles(),rgb:e.rgb(),hex:e.hex(),isBaseColor:e.isBaseColor(),isDerived:e.isDerived()})},f.getCoreBrandFromAuthoringContextElements=function(e){const t={id:e.id,name:e.name,colors:e.colors,logos:e.logos||[],fonts:[]};return e.fonts&&(t.fonts=e.fonts.map(f.fontInfoToCoreBrandFont)),t},f.getCoreBrandForTemplateGeneration=function(t){return e.resolve().then(()=>e.all([m(t),y(t),p(t),b(t)])).spread((e,r,n,o)=>({id:t.getId(),name:t.getName(),logos:[n],colors:e,fonts:r,fontCategories:o})).catch(e=>{const t=e?e.message:"";u.error("getCoreBrandForTemplateGeneration error: ".concat(t),e)})},f.getLiteCoreBrand=function(r){return r&&r.primaryLogoPromise?r.primaryLogoPromise.then(()=>{const e=r.primaryLogoPromise.isFulfilled()&&r.primaryLogoPromise.valueOf(),n=t.cloneDeep(r);return n.logos=e?[e]:[],f.getCoreBrandFromAuthoringContextElements(n)}):e.resolve()},f}.apply(t,n))||(e.exports=o)},"2ofD":function(e,t,r){var n,o;n=[r("YLtl"),r("UFvF"),r("MOGj"),r("vw5A"),r("Uwho"),r("EQbI"),r("chD/"),r("Ctaw"),r("+Ltv"),r("JjOv")],void 0===(o=function(e,t,r,n,o,a,i,s,c,l){const u=new a({name:"Post"});return new(n.extend({getConfig:()=>({syncGroup:"adobe-theo",scope:"theo",newDocName:"theo-document",doctype:"application/vnd.adobe.theo.document+dcx"}),seedNewDoc(e){this.currentDoc.attributes.name=c.newPostNameCode},createDocFromConfig(e,t,o){switch(t.operation){case"new-from-template":this._createDocNew(e,t,o);break;case"edit-template":case"new-template-from-template":s.loadBrandKit(t.contextId).then(function(e){this.currentDoc=e.composite,r.setSyncMode(r.MODE_EDITOR,this.currentDoc),o.resolve(this.currentDoc)}.bind(this));break;case"remix":this._createDocNew(e,t,o);break;default:n.prototype.createDocFromConfig.apply(this,arguments)}},_remixCPAsset(e,n){const a=t.defer();n=n||o.cps;const s=new l({cpServiceDomain:n});return s.trackRepeatableActivity(e,"remix_count"),s.getAssetMetadata(e).done((function(e){const t=e._links.dcx_base.href,n=r.AdobeDCXUtil.generateUuid(),o="/assets/adobe-theo/"+n,s=new Date;r.dcx.compositeXfer.remixComposite(t,"",o,n,"Spark Post",r.dcxSession,(function(e,r){if(e)u.error("[Post] remixComposite failed",{error:e,cpCompositeHref:t}),a.reject("[Post] remixComposite failed "+e);else{const e=new Date-s;i.trackEvent("PostRemixApiCall",{duration:e,contextData:["remixableAssetId","contextString"]},"post:remix"),a.resolve(n)}}))})).catch((function(t){u.error("[Post] getAssetMetadata failed",{error:t,assetId:e}),a.reject("[Post] getAssetMetadata failed "+t)})),a.promise},doRemix(e,t,r){return this._remixCPAsset(t,r).then(function(t){return this.createDocument({assetType:e,assetId:t})}.bind(this))},getPreviewHref(e){const t=(e=e||this.currentDoc).getMyApp().getPreviewComponent(e);return t&&e.getComponentHref(t,!0)||""},community:window.marvel.settings.theoc,communityCategory:"theos",avatarComponentPath:"/avatar",getData(e,t,r){if(!(t=t||this.currentDoc))return void console.error("no doc for getData");const n=t.getDCXRoot().getValue("doc#data");return n?r?n[r]&&n[r][e]:n[e]:void 0},setData(e,t,r,n){if(!(r=r||this.currentDoc))return void console.error("no doc for setData");const o=r.getDCXRoot(),a=o.getValue("doc#data")||{};let i=a;if(n&&(i=a[n],i||(i={},a[n]=i)),"object"==typeof e)for(const t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);else i[e]=t;o.setValue("doc#data",a)}}))}.apply(t,n))||(e.exports=o)},"4dd5":function(e,t,r){var n;void 0===(n=function(){
/*!
 * Color Thief v2.0
 * by Lokesh Dhakar - http://www.lokeshdhakar.com
 *
 * License
 * -------
 * Creative Commons Attribution 2.5 License:
 * http://creativecommons.org/licenses/by/2.5/
 *
 * Thanks
 * ------
 * Nick Rabinowitz - For creating quantize.js.
 * John Schulz - For clean up and optimization. @JFSIII
 * Nathan Spady - For adding drag and drop support to the demo page.
 *
 */
var e=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=e.width,this.height=this.canvas.height=e.height,this.context.drawImage(e,0,0,this.width,this.height)};e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.update=function(e){this.context.putImageData(e,0,0)},e.prototype.getPixelCount=function(){return this.width*this.height},e.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},e.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var t=function(){};
/*!
 * quantize.js Copyright 2008 Nick Rabinowitz.
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
/*!
 * Block below copied from Protovis: http://mbostock.github.com/protovis/
 * Copyright 2010 Stanford Visualization Group
 * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php
 */if(t.prototype.getColor=function(e,t){return this.getPalette(e,5,t)[0]},t.prototype.getPalette=function(t,r,o){void 0===r&&(r=10),void 0===o&&(o=10);for(var a,i,s,c,l=new e(t),u=l.getImageData().data,d=l.getPixelCount(),g=[],h=0;d>h;h+=o)i=u[(a=4*h)+0],s=u[a+1],c=u[a+2],u[a+3]>=125&&(i>250&&s>250&&c>250||g.push([i,s,c]));var f=n.quantize(g,r).palette();return l.removeCanvas(),f},!r)var r={map:function(e,t){var r={};return t?e.map((function(e,n){return r.index=n,t.call(r,e)})):e.slice()},naturalOrder:function(e,t){return t>e?-1:e>t?1:0},sum:function(e,t){var r={};return e.reduce(t?function(e,n,o){return r.index=o,e+t.call(r,n)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?r.map(e,t):e)}};var n=function(){function e(e,t,r){return(e<<2*c)+(t<<c)+r}function t(e){function t(){r.sort(e),n=!0}var r=[],n=!1;return{push:function(e){r.push(e),n=!1},peek:function(e){return n||t(),void 0===e&&(e=r.length-1),r[e]},pop:function(){return n||t(),r.pop()},size:function(){return r.length},map:function(e){return r.map(e)},debug:function(){return n||t(),r}}}function n(e,t,r,n,o,a,i){var s=this;s.r1=e,s.r2=t,s.g1=r,s.g2=n,s.b1=o,s.b2=a,s.histo=i}function o(){this.vboxes=new t((function(e,t){return r.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())}))}function a(t){var r,n,o,a,i=new Array(1<<3*c);return t.forEach((function(t){n=t[0]>>l,o=t[1]>>l,a=t[2]>>l,r=e(n,o,a),i[r]=(i[r]||0)+1})),i}function i(e,t){var r,o,a,i=1e6,s=0,c=1e6,u=0,d=1e6,g=0;return e.forEach((function(e){r=e[0]>>l,o=e[1]>>l,a=e[2]>>l,i>r?i=r:r>s&&(s=r),c>o?c=o:o>u&&(u=o),d>a?d=a:a>g&&(g=a)})),new n(i,s,c,u,d,g,t)}function s(t,n){if(n.count()){var o=n.r2-n.r1+1,a=n.g2-n.g1+1,i=n.b2-n.b1+1,s=r.max([o,a,i]);if(1==n.count())return[n.copy()];var c,l,u,d,g=0,h=[],f=[];if(s==o)for(c=n.r1;c<=n.r2;c++){for(d=0,l=n.g1;l<=n.g2;l++)for(u=n.b1;u<=n.b2;u++)d+=t[e(c,l,u)]||0;g+=d,h[c]=g}else if(s==a)for(c=n.g1;c<=n.g2;c++){for(d=0,l=n.r1;l<=n.r2;l++)for(u=n.b1;u<=n.b2;u++)d+=t[e(l,c,u)]||0;g+=d,h[c]=g}else for(c=n.b1;c<=n.b2;c++){for(d=0,l=n.r1;l<=n.r2;l++)for(u=n.g1;u<=n.g2;u++)d+=t[e(l,u,c)]||0;g+=d,h[c]=g}return h.forEach((function(e,t){f[t]=g-e})),function(e){var t,r,o,a,i,s=e+"1",l=e+"2",u=0;for(c=n[s];c<=n[l];c++)if(h[c]>g/2){for(o=n.copy(),a=n.copy(),t=c-n[s],i=(r=n[l]-c)>=t?Math.min(n[l]-1,~~(c+r/2)):Math.max(n[s],~~(c-1-t/2));!h[i];)i++;for(u=f[i];!u&&h[i-1];)u=f[--i];return o[l]=i,a[s]=o[l]+1,[o,a]}}(s==o?"r":s==a?"g":"b")}}var c=5,l=8-c,u=1e3,d=.75;return n.prototype={volume:function(e){var t=this;return(!t._volume||e)&&(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){var r=this,n=r.histo;if(!r._count_set||t){var o,a,i,s=0;for(o=r.r1;o<=r.r2;o++)for(a=r.g1;a<=r.g2;a++)for(i=r.b1;i<=r.b2;i++)index=e(o,a,i),s+=n[index]||0;r._count=s,r._count_set=!0}return r._count},copy:function(){var e=this;return new n(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var r=this,n=r.histo;if(!r._avg||t){var o,a,i,s,l=0,u=1<<8-c,d=0,g=0,h=0;for(a=r.r1;a<=r.r2;a++)for(i=r.g1;i<=r.g2;i++)for(s=r.b1;s<=r.b2;s++)l+=o=n[e(a,i,s)]||0,d+=o*(a+.5)*u,g+=o*(i+.5)*u,h+=o*(s+.5)*u;r._avg=l?[~~(d/l),~~(g/l),~~(h/l)]:[~~(u*(r.r1+r.r2+1)/2),~~(u*(r.g1+r.g2+1)/2),~~(u*(r.b1+r.b2+1)/2)]}return r._avg},contains:function(e){var t=this,r=e[0]>>l;return gval=e[1]>>l,bval=e[2]>>l,r>=t.r1&&r<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},o.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,r=0;r<t.size();r++)if(t.peek(r).vbox.contains(e))return t.peek(r).color;return this.nearest(e)},nearest:function(e){for(var t,r,n,o=this.vboxes,a=0;a<o.size();a++)(t>(r=Math.sqrt(Math.pow(e[0]-o.peek(a).color[0],2)+Math.pow(e[1]-o.peek(a).color[1],2)+Math.pow(e[2]-o.peek(a).color[2],2)))||void 0===t)&&(t=r,n=o.peek(a).color);return n},forcebw:function(){var e=this.vboxes;e.sort((function(e,t){return r.naturalOrder(r.sum(e.color),r.sum(t.color))}));var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,o=e[n].color;o[0]>251&&o[1]>251&&o[2]>251&&(e[n].color=[255,255,255])}},{quantize:function(e,n){function c(e,t){for(var r,n=1,o=0;u>o;)if((r=e.pop()).count()){var a=s(l,r),i=a[0],c=a[1];if(!i)return;if(e.push(i),c&&(e.push(c),n++),n>=t)return;if(o++>u)return}else e.push(r),o++}if(!e.length||2>n||n>256)return!1;var l=a(e);l.forEach((function(){0}));var g=i(e,l),h=new t((function(e,t){return r.naturalOrder(e.count(),t.count())}));h.push(g),c(h,d*n);for(var f=new t((function(e,t){return r.naturalOrder(e.count()*e.volume(),t.count()*t.volume())}));h.size();)f.push(h.pop());c(f,n-f.size());for(var p=new o;f.size();)p.push(f.pop());return p}}}();return t}.apply(t,[]))||(e.exports=n)},"9AdD":function(e,t,r){var n;void 0===(n=function(){return function(e){var t={id:e.id,acRoles:e.acRoles,red:e.rgb.red||e.rgb.r,green:e.rgb.green||e.rgb.g,blue:e.rgb.blue||e.rgb.b,alpha:e.rgb.alpha||e.rgb.a||1,hex:e.hex,isBaseColor:e.isBaseColor,isDerived:e.isDerived,rgb:function(){return{red:t.red,green:t.green,blue:t.blue,alpha:t.alpha}},getRoles:function(){return t.acRoles},getId:function(){return t.id}};return t}}.apply(t,[]))||(e.exports=n)},"A+mC":function(e,t,r){"use strict";r.r(t),r.d(t,"HostPersistUtilsImpl",(function(){return s}));var n=r("UzQk"),o=r("k99a"),a=r.n(o);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"tmpFiles",{}),i(this,"postFeatureController",void 0),this.postFeatureController=new a.a}mimeTypeForFileAtPath(e){let t=this.tmpFiles[e];return t?t.mimeType:null}writeJsonContentToTempFile(e){let t="tmp/".concat(n.GUIDUtils.makeGUID());return this.tmpFiles[t]={path:t,content:e,mimeType:"application/json"},t}readJsonContentFromFile(e){let t=this.tmpFiles[e];return t?t.content:null}deleteTempFile(e){delete this.tmpFiles[e]}fileUrlForPath(e){return e}fileExists(e){return!!this.tmpFiles[e]}useJsonDocumentEncoding(){return!0}}},CTED:function(e,t,r){var n,o;n=[r("MGCh")],void 0===(o=function(e){return function(t){var r=e.channel("LFUCache"),n={},o=t,a={};return n.get=function(e){return e in a?(a[e].hits+=1,a[e].value):null},n.set=function(e,t){if(Object.keys(a).length>o){var r=Number.MAX_VALUE,n=null;for(var i in a)a[i].hits<r&&(r=a[i].hits,n=i);this.remove(n)}a[e]={value:t,hits:0}},n.remove=function(e){r.assert(e in a,"Failed to remove missing key from cache."),delete a[e]},n}}.apply(t,n))||(e.exports=o)},Ctaw:function(e,t,r){var n,o;n=[r("UFvF"),r("gBAB"),r("kNaX"),r("MGCh"),r("+gTl"),r("a65H"),r("RdGa"),r("9AdD"),r("O0ct")],void 0===(o=function(e,t,r,n,o,a,i,s,c){const l=n.channel("brandkit-wrapper"),u={};let d,g,h;function f(n,o,a){return n&&o?o instanceof Blob?function(e,n,o){const a=o?"primary-logo":"secondary-logo";return e.uploadImageAsset(r(),t.LOGOS_PARENT,n,a)}(n,o,a):function(e,n,o){const a=n.original||n.preview||n.thumbnail,i=o?"primary-logo":"secondary-logo";return e.updateImageAsset(r(),t.LOGOS_PARENT,a.link,n.type||"image/jpeg",function(e){let t=e.source.toLowerCase();return"creative cloud"===t&&(t="cc"),t}(n),i)}(n,o,a):e.resolve()}function p(){if(!d)return e.resolve();const t={id:d.getId(),name:d.getName()};return d.getColors().then(e=>(t.colors=e.map(e=>new s({id:e.getId(),acRoles:e.getRoles(),rgb:e.rgb(),hex:e.hex(),isBaseColor:e.isBaseColor(),isDerived:e.isDerived()})),t)).catch(t=>{const r=t?t.message:"";return l.error("getColorsInActiveBrand error: ".concat(r),t),e.resolve([])})}function m(t){const r={id:t.getId(),name:t.getName(),activated:t.activated(),belongsToUser:t.belongsToUser(),isDefault:t.isDefault()},n=p(),a=function(){if(!d)return e.resolve();const t={name:d.getName()};return d.getAuthoringContextLogos().then(e=>(t.logos=e,t))}();return e.all([n,a]).spread((t,n)=>{r.loadedPromise=e(),t&&(r.colors=t.colors);const a=n?n.logos:null;if(a&&a.length){const t=a.findIndex(e=>e.getRoles().includes("primary-logo")),n=a.splice(t,1)[0];r.primaryLogoPromise=o.brandKitLogoToCoreBrandLogo(d,n),r.secondaryLogoPromises=a.map(e=>o.brandKitLogoToCoreBrandLogo(d,e));const i=[r.primaryLogoPromise].concat(r.secondaryLogoPromises);r.fonts=[],c.getCachedFonts().forEach(e=>{const t=c.getFontData(e);t.isBKFont&&r.fonts.push(t)}),r.loadedPromise=r.loadedPromise.then(()=>e.allSettled(i).then(e=>{r.logos=e.filter(e=>"fulfilled"===e.state&&e.value).map(e=>e.value)}))}const i=e.defer();return r.coreBrandPromise=i.promise,r.loadedPromise.done(()=>{r.coreBrand=o.getCoreBrandFromAuthoringContextElements(r),i.resolve(r.coreBrand)}),r}).catch(t=>{const r=t?t.message:"";return l.error("extractBrandElementsForCache error: ".concat(r),t),e.resolve(null)})}function v(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return d=e,h=t,d}return u.addLogoToCurrentBrand=function(t,r){return t&&d?f(d,t,r).catch(t=>{const r=t?t.message:"";return l.error("addLogoToCurrentBrand error: ".concat(r),t),e.reject(t)}):e.resolve()},u.appendHexColorToBrand=function(t,r){return d?d.getColors().then(n=>{const o=[];for(let e=0;e<t.length;++e){let r=!1;for(let o=0;o<n.length;++o)if(n[o].hex.replace("#","")===t[e]){r=!0;break}r||o.push(t[e])}return e.all(o.map(e=>r.addColorHex(e)))}):e.resolve()},u.getBrandKitById=function(e){return t.getController().then(t=>t.getContextById(e))},u.loadDefaultBrandKit=function(){let r,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r=o?t.getOrCreateDefaultBrand:"function"==typeof t.getDefaultBrand?t.getDefaultBrand:t.acquireDefaultBrand,r().then(r=>!r&&o?t.getOrCreateDefaultBrand():e.resolve(r)).then(e=>v(e,n)).catch(t=>{const r=t?t.message:"";return l.error("loadDefaultBrandKitError: ".concat(r),t),e.reject(t)})},u.loadBrandKit=function(t,r){if((r=r||{}).skipReload&&d&&d.getId()===t)return e.resolve(d);const n=!!r.belongsToUser;return"string"!=typeof t||t.length<=0?u.loadDefaultBrandKit(n,r.isEntitledUser):u.getBrandKitById(t).then(e=>null!==e?v(e):u.loadDefaultBrandKit(n,r.isEntitledUser)).catch(e=>(l.error("loadBrandKit: Unable to find authoring context with id ".concat(t),e),u.loadDefaultBrandKit(n,r.isEntitledUser)))},u.refreshBrandColors=function(){return p().then(e=>{return u.currentBrandKit()&&e&&e.colors.length&&(g||(g={}),g.colors=e.colors),g})},u.refreshCachedCurrentBrandElements=function(){return d?m(d).then(e=>(e.showBrandInUI="boolean"!=typeof h||h,g=e,g&&!g.name&&(g.name="Brand"),g)).catch(e=>{const t=e?e.message:"";l.error("refreshCurrentBrandElementsCache error: ".concat(t),e)}):e.resolve()},u.switchCurrentAuthoringContext=function(t){if(!t)return e.resolve(g);const r="string"==typeof t?t:t.getId();return d&&d.getId()===r?e.resolve(g):u.loadBrandKit(r,!1).then(c.switchBrandContext).then(u.refreshCachedCurrentBrandElements)},u.currentBrandKit=function(){return d},u.currentBrandElements=function(){return g},u.resetBrandCaches=function(){g=null},u.checkForRestrictedFonts=function(){if(!g)return e.resolve([]);const r=g.coreBrand;if(!r)return e.resolve([]);const n=[];for(const e in r.fonts)e.acRoles&&e.acRoles.includes(e.acRoles,"custom")&&e.descriptor&&e.descriptor.postScriptName&&n.push({source:"user-uploaded",postScriptName:e.descriptor.postScriptName});return n.length?t.verifyFontsUsed(n,d):e.resolve([])},u}.apply(t,n))||(e.exports=o)},JjOv:function(e,t,r){var n,o;n=[r("xeH2"),r("UFvF"),r("Uwho"),r("tY4j"),r("MGCh")],void 0===(o=function(e,t,r,n,o){return function(a){const i=o.channel("util/cp.js");a.cpServiceDomain||(a.cpServiceDomain=r.cps);const s={trackRepeatableActivity:function(t,n){e.ajax({type:"POST",url:"https://"+a.cpServiceDomain+"/api/v2/"+r.theoc+"/assets/"+t+"/activities",data:'{ "verb": "'+n+'" }',headers:{"Content-Type":"application/json;charset=UTF-8","X-Api-Key":r.cpkey}})},getAssetMetadata:function(e){const n="https://".concat(a.cpServiceDomain,"/api/v2/").concat(r.theoc,"/assets/").concat(e),o={method:"GET",headers:{"X-Api-Key":r.cpkey}};return window.fetch(n,o).then(e=>{if(!e.ok)throw new Error("Error getting CP metadata: [".concat(e.status,"] ").concat(e.statusText));return e.json()}).catch(e=>{i.error("getAssetMetadata: ".concat(e.message," and cpkey is ").concat(r.cpkey),e);const o=new Error("getAssetMetadata: ".concat(e.message," for ").concat(n));return t.reject(o)})},getAssetMetadataWithRetry:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const r=n(s.getAssetMetadata,{maxAttempts:t});return r(e)}};return s}}.apply(t,n))||(e.exports=o)},O0ct:function(e,t,r){var n,o;n=[r("xeH2"),r("UFvF"),r("YLtl"),r("Uwho"),r("e46Y"),r("ApVh"),r("tY4j"),r("Fb2u"),r("ndZK"),r("omhI"),r("Idax"),r("MGCh"),r("UzQk"),r("DIoP")],void 0===(o=function(e,t,r,n,o,a,i,s,c,l,u,d,g,h){const f=d.channel("util/fonts.js"),p={},m={},v={},y=["Local Brewery","Voltage","Wanderlust","Bellfort Script"],b={};let x,C;const F={edge:0,standardTypekit:0,brandkitTypekit:0,uploaded:0},w="spark-provided",S="user-uploaded",T="faux-font",I="headline-font";p.typekitId="ujm6jju",p.edgeWebFonts={"source-sans-pro":["n9"],"amatic-sc":["n4"],"cabin-sketch":["n7"],"cantata-one":[],economica:["n4"],"germania-one":[],graduate:[],"jolly-lodger":[],"josefin-slab":["n3"],"kaushan-script":[],lora:["n4"],megrim:[],monoton:[],montserrat:[],pacifico:[],"permanent-marker":[],"playfair-display":["n4"],"pt-mono":[],quicksand:["n7"],"seaweed-script":[],"sirin-stencil":[],"stint-ultra-expanded":[],ultra:[],"vast-shadow":[],voltaire:[],yellowtail:[]},r.forEach(u.fonts,e=>{e.isPostFont=!0});const k=r.reduce(u.fonts,(e,t)=>{const r=t.postScriptName;return f.assert(!(r in e),"Did not expect to add the same key twice to STANDARD_FONT_FACES_DICT dictionary."),e[r]=t,e},{}),R=k["SourceSansPro-Black"],A={typekitSubgroupKitId:p.typekitId,faces:r.map(r.filter(u.fonts,e=>!(e.family.toLowerCase()in p.edgeWebFonts)),e=>({metrics:e}))};function P(e){const t=document.createElement("span");return t.innerHTML="giItT1WQy@!-/#",t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.style.fontSize="300px",t.style.fontFamily=e,document.body.appendChild(t),t}function N(t,n,a){const i=P("unknown-font-mci3jfoq2y"),s=i.offsetWidth,c=r.map(t,e=>P(e));let l,u=0;document.body.removeChild(i),l=setInterval((function(){u++;for(let e=c.length-1;e>=0;e--)c[e].offsetWidth!==s&&(document.body.removeChild(c[e]),c.splice(e,1));if(0===c.length||u>150){if(c.length>0&&(f.assert(!1,"Not all fonts were successfully loaded after 150 attempts."),o&&"function"==typeof o.addPageAction)){const r=c[0].style.fontFamily;let a="none";if(!n){const t=r.toLowerCase().replace(/-/g,"");a=e("html").attr("class").split(/\s+/).filter(e=>-1!=e.indexOf(t)).join(" ")}o.addPageAction("post_fonts_not_loaded",{type:n?"user uploaded":"edge web fonts",numRequested:t.length.toString(),numPending:c.length.toString(),familyName:r,classNames:a,compareWidth:s.toString()})}clearInterval(l),a()}}),50)}function E(e,t,r,n,o){e.source=g.FontSource.USER_UPLOAD,e.isBKFont=!0,e.family=t,e.acRoles=Array.isArray(r)&&[].concat(r)||[],e.sparkElementId=n,e.brandkitName=o,e.cssName=t}function D(e){if(!e)return t();const n=e===A||e.isEdgeFont;let o;return n||e.faces.forEach(e=>{const t=e.metrics||e.getMetrics();if(f.assert(t&&t.postScriptName,"Invalid metrics instance."),t.postScriptName in m){const e=m[t.postScriptName];e.acRoles&&t.acRoles?(e.isBKFont=!0,e.acRoles=t.acRoles):(e.isBKFont=!0,e.brandkitName=t.brandkitName,e.acRoles=t.acRoles,e.sparkElementId=t.sparkElementId,e.baseFont=t.baseFont,e.label=t.label)}else m[t.postScriptName]=t}),o=e.faces.length>0&&"function"==typeof e.faces[0].isCustomFont&&e.faces[0].isCustomFont()?function(e){const n=e.faces.map(e=>{return(e.metrics||e.getMetrics()).fullName});f.info('Start loading uploaded font(s): "'+n.join('", "')+'"');const o=Date.now(),a=t.defer();try{const t=e.cssName,n=e.cssFontFace,o=document.createElement("style");o.type="text/css",o.innerHTML=n,o.className=t;const i=document.head.querySelectorAll("style."+t);i&&r.each(i,e=>{e.parentNode.removeChild(e)}),document.getElementsByTagName("head")[0].appendChild(o),N([t],!0,()=>{a.resolve(!0)})}catch(e){f.error("Error loading uploaded font",e),a.resolve(!1)}return a.promise.finally(()=>{const e=Date.now()-o;f.info('Done loading uploaded font(s): "'+n.join('", "')+'" in '+e+"ms."),F.uploaded+=e}),a.promise}(e):e.isEdgeFont?p.loadEdgeFonts(e):p.loadTypekitFonts(e),e.faces&&e.faces.forEach(e=>{const t=e.metrics||e.getMetrics();b[t.postScriptName]=o.then(e=>{if(e)return!t.isPostFont||t.source&&t.source!==g.FontSource.UNKNOWN_SOURCE||(t.source=g.FontSource.EMBEDDED),g.Host.fontProvider.loadOneFont(t),t;n||delete m[t.postScriptName],delete b[t.postScriptName]})}),o}function M(e){return e.family.toLowerCase()in p.edgeWebFonts?D({isEdgeFont:!0,faces:[{metrics:e}]}):D(A)}function L(e){const t=e.getMetrics(),r=e.cssName();return E(t,r,e.getRoles(),e.getId(),e.name),D({cssName:r,cssFontFace:e.getCSSFontFace(),faces:[e]})}function U(r,n){return(a=n,(o=function(e){return function(e,t){if(e){const r={name:e.getName()},n=t&&t.length?e.getFontsWithRoles(t):e.getAllFonts();return n.length?(r.fontFaces=n,[r]):[]}return[]}(C,e)}(a),function(t){const r={};return r[w]={},r[w].subgroups=[],c.getFontRegistry().then(n=>(t.forEach(t=>{t.fontFaces.forEach(o=>{let a,i,s,c,l;const u=o.getValue().source;if(u===w){const u=e.extend(!0,{},n.facesByKey[o.lookupKey()].face);u.metrics.source=g.FontSource.SPARK_PROVIDED,a=n.facesByKey[o.lookupKey()].subgroup.name,i=e.extend(!0,{},n.facesByKey[o.lookupKey()].subgroup);for(var d=0;d<r[w].subgroups.length&&!c;d++)s=r[w].subgroups[d],s.name===a&&(c=s);c||(l={name:a,data:i},l.data.faces=[],r[w].subgroups.push(l),c=l),function(e,t,r,n,o,a){e.metrics.family=t,a&&(e.metrics.brandkitName=a),e.metrics.label=r+" "+e.name,e.metrics.baseFont=r,e.metrics.isPublic="true",e.metrics.isBKFont=!0,e.metrics.cssName=t,e.metrics.lookupKey=e.lookupKey,e.metrics.allCapsAllowed=!y.includes(r),e.metrics.acRoles=Array.isArray(n)&&[].concat(n)||[],e.metrics.sparkElementId=o,e.metrics.weight>900&&(e.metrics.weight=900)}(u,i.cssName,a,o.getRoles(),o.getId(),t.name),c.data.faces.push(u)}else if(u===S){const e=o.getMetrics(),n=o.cssName();a=e.familyName,E(e,n,o.getRoles(),o.getId(),t.name),i={name:void 0===e.preferredFamilyName?e.familyName:e.preferredFamilyName,cssName:n,typekitPreviewId:!1,paragraphRecommended:!1,serif:e.serif,calligraphic:e.calligraphic,cssFontFace:o.getCSSFontFace()};const u={gingerName:e.postScriptName,lookupKey:o.lookupKey(),metrics:e,name:o.subgroupName,path:"",typekitKey:"",getMetrics:()=>o.getMetrics(),getCSSFontFace:()=>o.getCSSFontFace(),getRoles:()=>o.getRoles(),getId:()=>o.getId(),cssName:()=>o.cssName(),isCustomFont:()=>o.isCustomFont()};for(d=0;d<r[w].subgroups.length&&!c;d++)if(s=r[w].subgroups[d],s.name===a){c=s;break}c||(l={name:a,data:i},l.data.faces=[],r[w].subgroups.push(l),c=l),c.data.faces.push(u)}else u===T||f.error("Skipping font from brandkit with invalid source: "+o.cssName())})}),r))}(o).then(e=>e[w].subgroups).catch(e=>{f.error("Error processing brand fonts",e)})).catch(e=>{f.error("Error getting spark fonts",e)})).then(e=>{const n={},o={};for(let t=0;t<e.length;t++){const r=e[t].data.faces;o[e[t].name]=e[t].data;for(let e=0;e<r.length;e++){n[r[e].metrics.postScriptName]=r[e]}}const a={},i=[];r=r||Object.keys(n);for(let e=0;e<r.length;e++){const s=r[e];if(s in b){if(n[s]&&n[s].metrics){const e=n[s].metrics;m[s]=e,b[s]=t.resolve(e)}else i.push(b[s].then(e=>{if(!m[e.postScriptName])return m[e.postScriptName]=e,e}));continue}const c=p.getSparkFontsSubgroupNameForPostScriptName(s);void 0!==c?(c in o||(o[c]=p.getSparkFontDataForSubgroup(c)),c in a||(a[c]=!0,i.push(D(o[c])),o[c].faces.forEach(e=>{const t=m[e.metrics.postScriptName];t&&(t.acRoles&&e.metrics.acRoles?(t.isBKFont=!0,e.metrics.acRoles.forEach(e=>{-1===t.acRoles.indexOf(e)&&t.acRoles.push(e)})):(t.isBKFont=!0,t.brandkitName=e.metrics.brandkitName,t.acRoles=e.metrics.acRoles,t.sparkElementId=e.metrics.sparkElementId,t.baseFont=e.metrics.baseFont,t.label=e.metrics.label))}))):s in n?i.push(L(n[s])):i.push(X(s))}return t.allSettled(i)});var o,a}function B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[I];return p.setAuthoringContext(e),U(null,t)}function O(){for(const e in m)m[e].isBKFont&&delete m[e];r.forEach(u.fonts,e=>{m[e.postScriptName]=r.clone(e)})}function _(e){const r=t.defer();return a.getAccessToken().then(t=>{const o=a.clientId,i=new XMLHttpRequest,s=n.adobeFontsApiEndpoint+"/v1/variations/"+e+"?include=full";i.open("GET",s,!0),i.onload=()=>{if(4===i.readyState)if(200===i.status){const e=JSON.parse(i.responseText),t=e.font.sync.required_action;t&&t.length>0?r.reject("No access to premium font"):r.resolve(e)}else f.error("getTKFontVariation request encountered an error",{status:i.status,statusText:i.statusText,typekitFontId:e}),r.reject(i.statusText)},i.onerror=()=>{f.error("getTKFontVariation request encountered an error",{status:i.status,statusText:i.statusText,typekitFontId:e}),r.reject(i.statusText)},i.setRequestHeader("X-Api-Key",o),i.setRequestHeader("Authorization","Bearer "+t),i.send(null)}),r.promise}function j(e){const r=t.defer();return a.getAccessToken().then(t=>{const o=a.clientId,i=new XMLHttpRequest,s=n.adobeFontsApiEndpoint+"/v1/selections",c='["'+e+'"]';i.open("POST",s,!0),i.onload=()=>{if(4===i.readyState)if(200===i.status){const e=JSON.parse(i.responseText);r.resolve(e)}else f.error("activateTypekitFont request encountered an error",{status:i.status,statusText:i.statusText,typekitFontId:e}),r.reject(i.statusText)},i.onerror=()=>{f.error("activateTypekitFont request encountered an error",{status:i.status,statusText:i.statusText,typekitFontId:e}),r.reject(i.statusText)},i.setRequestHeader("X-Api-Key",o),i.setRequestHeader("Authorization","Bearer "+t),i.setRequestHeader("Content-Type","application/json"),i.send(c)}),r.promise}function H(r){const o=t.defer(),a=n.adobeFontsMetricsService+"/"+r+".json";return e.ajax({url:a,type:"GET",dataType:"json",success:e=>{o.resolve(e)},error:()=>{o.reject("Error getting metrics from TypeKit service.")}}),o.promise}function K(e,r){if(!e)return t.reject("Attempted to get null variationId");const n=m[r]?m[r]:m[v[e]];return n?t(n):i(H,{maxAttempts:3,delay:200})(e).then(t=>(o.addPageAction("post_web_typekit_metrics",{status:"succeeded",postScriptName:r,typekitFontId:e}),v[e]||(v[e]=t.postScriptName),t),t=>{throw o.addPageAction("post_web_typekit_metrics",{status:"failed",postScriptName:r,typekitFontId:e}),t})}function X(e){const r=t.defer();let n;var o;return b[e]=r.promise,(o=e,o?i(_,{maxAttempts:3,delay:200})(o):t.reject("Attempted to get a null tkFontVariationIdOrPSName.")).then(e=>{return n=e,function(e){return e?i(j,{maxAttempts:3,delay:200})(e):t.reject("Error: attempted to activate a null tkSyncFontId")}(n.font.sync.font_id||"")}).then(()=>{return window.TypekitPreview?t():c.inject()}).then(()=>{return K(n.id,e)}).then(e=>{return p.registerTypekitFont(e),function(e){const r=t.defer();return TypekitPreview.load([e],{active:()=>{r.resolve()},inactive:()=>{r.reject("inactive font")}}),r.promise}({id:e.familyId,variations:[e.tkVariation],css_name:e.cssName})}).catch(t=>{f.error("Error loading missing typekit font with postScriptName "+e,t),delete b[e],delete m[e],r.reject(t)}).done(()=>{r.resolve(!0)}),r.promise}return p.loadEdgeFonts=function(n){const o=r.reduce(n.faces,(e,t)=>{const r=(t.metrics||t.getMetrics()).family.toLowerCase();return e[r]=p.edgeWebFonts[r],e},{});f.info("Start loading "+Object.keys(o).length+" edge fonts.");const a=Date.now(),i=t.defer(),s=function(e){let t="";for(const r in e){t+=r+":";const n=e[r];if(n.length)for(let e=0;e<n.length;e++)e>0&&(t+=","),t+=n[e];else t+="n4";t+=":all;"}return t.substr(0,t.length-1)}(o);return e.ajax({url:"https://use.edgefonts.net/"+s+".js",dataType:"script",cache:!0,success:(e,t)=>{N(Object.keys(o),!1,()=>{i.resolve(!0)})},error:(e,t,r)=>{f.error("getScript error loading edge web fonts",r),i.resolve(!1)}}),i.promise.finally(()=>{const e=Date.now()-a;f.info("Done loading "+Object.keys(o).length+" edge fonts in "+e+"ms."),F.edge+=e}),i.promise},p.loadTypekitFonts=function(r){const n=r.typekitSubgroupKitId;f.info("Start loading TypeKit fontID: "+n);const o=t.defer(),a=Date.now();return e.ajax({url:"https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js",dataType:"script",cache:!0,success:(e,t)=>{WebFont.load({typekit:{id:n},active:()=>{o.resolve(!0)},inactive:()=>{o.resolve(!0)}})},error:(e,t,r)=>{f.error("getScript error loading webfont typekit kit",r),o.resolve(!1)}}),o.promise.finally(()=>{const e=Date.now()-a;f.info("Done loading TypeKit fontID: "+n+" in "+e+"ms."),n===p.typekitId?F.standardTypekit+=e:F.brandkitTypekit+=e}),o.promise},p.getSparkFontsSubgroupNameForPostScriptName=function(e){for(const t in s.sparkfonts){const r=s.sparkfonts[t];for(let n=0;n<r.faces.length;n++)if(r.faces[n].metrics.postScriptName===e)return t}},p.getSparkFontDataForSubgroup=function(e){return s.sparkfonts[e]},p.loadNewUploadedFont=function(e){return L(e)},p.loadMissingFonts=function(e){const n=[];for(let t=0;t<e.length;t++){const r=e[t];r in b||(r in k?M(k[r]):n.push(r))}let o;return o=0===n.length?t.resolve():U(n,null),o.then(()=>{const n=r.map(e,e=>(f.assert(e in b,"Failed to find loading promise for font: "+e),b[e]));return t.allSettled(n)})},p.loadCurrentBrandFonts=function(){return U()},p.loadAllStandardFonts=function(){const e=r.map(u.fonts,e=>e.postScriptName);return this.loadMissingFonts(e)},p.getFontData=function(e){return m[e]},p.getDefaultFont=function(){return R},p.getCachedFonts=function(){return Object.keys(m)},p.fontLoaded=function(e){f.assert(e&&e.metrics,"Invalid fontInfo instance.");const r=e.metrics.postScriptName;let n;return n=r in b?t.resolve():p.loadMissingFonts([r]),n.then(()=>(f.assert(r in b,"Font loading mechanism should have added pending promises for every font face."),b[r]))},p.getCurrentLoadFontsPromise=function(){return x},p.resetLoadingTimes=function(){for(const e in F)F[e]=0},p.logLoadingTimes=function(){h.publish("post:fontsLoadEnd",{contextualData1:"edgeFontsElapsedMs:"+F.edge,contextualData2:"standardTypekitFontsElapsedMs:"+F.standardTypekit,contextualData3:"brandkitTypekitFontsElapsedMs:"+F.brandkitTypekit,contextualData4:"brandkitUploadedFontsElapsedMs:"+F.uploaded})},p.load=function(e){e=e||{},O(),r.forEach(Object.keys(b),e=>{delete b[e]});const n=g.Host.fontProvider.getIncludedFonts();for(;n.count>0;)n.remove(n.fontAt(0));const o=g.Host.fontProvider.getSuggestableFonts();for(;o.count>0;)o.remove(o.fontAt(0));x=t.defer();const a=[];return e.loadForEditor&&(a.push(M(R)),a.push(B(e.authoringContext))),t.allSettled(a).done(x.resolve),x.promise},p.setAuthoringContext=function(e){C=e},p.switchBrandContext=function(e){return O(),B(e,[I,"body-font"])},p.registerDownloadedTypekitFontByACFontFace=function(e){const r=e.tkVariationId()||"",n=e.friendlyName(),o=t.defer();return K(r,n).then(e=>{const t=p.registerTypekitFont(e);o.resolve(t)},e=>{o.reject("registerDownloadedTypekitFontByACFontFace: failed to get typekit font metrics",e)}),o.promise},p.registerTypekitFont=function(e){if(!e)return null;const t=e.postScriptName;return t?(e.source=e.syncAvailability.trial?g.FontSource.TYPEKIT_FREE:g.FontSource.TYPEKIT_PREMIUM,g.Host.fontProvider.loadOneFont(e),m[t]=e,g.Host.fontProvider.descriptorForPostScriptName(t)):null},p.getRegisteredTypekitFontPostScriptName=function(e){return v[e]},p}.apply(t,n))||(e.exports=o)},RdGa:function(e,t,r){var n;void 0===(n=function(){return function(e){var t={id:e.id,acRoles:e.acRoles,descriptor:e.descriptor,lookupKey:e.lookupKey,getRoles:function(){return t.acRoles},getId:function(){return t.id}};return t}}.apply(t,[]))||(e.exports=n)},T6kn:function(e,t,r){var n,o;n=[r("xeH2"),r("UFvF"),r("Uwho")],void 0===(o=function(e,t,r){var n={getBoundingBoxAndMask:function(n,o){var a=t.defer();return e.ajax({type:"POST",url:r.saliencyServiceEndpoint+"/imageAnalysis",contentType:"application/json",processData:!1,data:JSON.stringify({source:{bytes:n},saliency:{boundingBoxRectangles:!0,mask:!0}}),dataType:"json",headers:{Authorization:"Bearer "+window.adobeIMS.getAccessToken(),"X-Api-Key":r.cid,"X-Request-Id":o}}).fail((function(e,t){a.reject(t)})).done((function(e){a.resolve(e)})),a.promise}};return n}.apply(t,n))||(e.exports=o)},TdwW:function(e,t,r){var n,o;n=[r("UzQk")],void 0===(o=function(e){var t={},r=/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;function n(e){var t=(e=Math.round(e)).toString(16);return 1===t.length?"0"+t:t}t.hex2rgb=function(e){if(e){var t=r.exec(e);return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}},t.hex2rgba=function(e){var r=t.hex2rgb(e);return r.a=1,r},t.hex2hsv=function(e){return t.rgb2hsv(t.hex2rgb(e))},t.hex2SolidColor=function(r){var n=t.hex2rgba(r);return e.SolidColor.decodeJson({red:n.r/255,green:n.g/255,blue:n.b/255,alpha:n.a||1})},t.hsv2rgb=function(e){var t,r,n,o,a,i,s,c,l=e.h/360,u=e.s/100,d=e.v/100;switch(i=d*(1-u),s=d*(1-(a=6*l-(o=Math.floor(6*l)))*u),c=d*(1-(1-a)*u),o%6){case 0:t=d,r=c,n=i;break;case 1:t=s,r=d,n=i;break;case 2:t=i,r=d,n=c;break;case 3:t=i,r=s,n=d;break;case 4:t=c,r=i,n=d;break;case 5:t=d,r=i,n=s}return{r:Math.floor(255*t),g:Math.floor(255*r),b:Math.floor(255*n)}},t.hsv2hex=function(e){var r=t.hsv2rgb(e);return t.rgb2hex(r)},t.hsl2rgb=function(e){function t(e,t,r){return e>1?e-=1:e<0&&(e+=1),6*e<1?r+6*(t-r)*e:2*e<1?t:3*e<2?r+(t-r)*(2/3-e)*6:r}var r,n,o,a=e.h/360,i=e.s,s=e.l;if(0===i)r=n=o=255*s;else{var c,l,u=a,d=a-1/3;r=255*t(a+1/3,c=s<.5?s*(1+i):s+i-s*i,l=2*s-c),n=255*t(u,c,l),o=255*t(d,c,l)}return{r:r,g:n,b:o}},t.rgb2hex=function(e){return n(e.r)+n(e.g)+n(e.b)},t.rgb2hsl=function(e){var t,r,n=e.r/255,o=e.g/255,a=e.b/255,i=Math.min(n,o,a),s=Math.max(n,o,a),c=(i+s)/2;if(i===s)r=0,t=0;else{var l=s-i;r=c>.5?l/(2-s-i):l/(s+i),t=s===n?(o-a)/l:s===o?2+(a-n)/l:4+(n-o)/l,(t*=60)<0&&(t+=360)}return{h:t,s:r,l:c}},t.rgb2hsv=function(e){var t,r,n,o,a,i=e.r/255,s=e.g/255,c=e.b/255,l=Math.max(i,s,c),u=l-Math.min(i,s,c),d=function(e){return(l-e)/6/u+.5};return 0===u?o=a=0:(a=u/l,t=d(i),r=d(s),n=d(c),i===l?o=n-r:s===l?o=1/3+t-n:c===l&&(o=2/3+r-t),o<0?o+=1:o>1&&(o-=1)),{h:Math.round(360*o),s:Math.round(100*a),v:Math.round(100*l)}},t.rgb2SolidColor=function(t){return e.SolidColor.decodeJson({red:t.red/255,green:t.green/255,blue:t.blue/255,alpha:t.alpha||1})},t.solidColor2Rgba=function(e){return e?{r:Math.floor(255*e.red),g:Math.floor(255*e.green),b:Math.floor(255*e.blue),a:e.alpha}:e},t.solidColor2TheoColor=function(t,r,n){return e.TheoColor.init_5344(t,r,n)},t.rgb2ValidCSSValues=function(e){return{red:Math.round(e.red),green:Math.round(e.green),blue:Math.round(e.blue),alpha:e.alpha||1}},t.toCSS=function(e){if(!e)return"#000000";if(void 0!==e.red||void 0!==e.r){var r=void 0!==e.red?e.red:e.r,n=void 0!==e.green?e.green:e.g,o=void 0!==e.blue?e.blue:e.b,a=void 0!==e.alpha?e.alpha:e.a,i=t.rgb2ValidCSSValues({red:r,green:n,blue:o,alpha:a});return"rgba("+i.red+","+i.green+","+i.blue+","+(void 0===a?1:a)+")"}return"string"==typeof e&&6===e.length?"#"+e:"#000000"},t.darken=function(e,t){var r=t/100;return e.r=e.r-e.r*r,e.g=e.g-e.g*r,e.b=e.b-e.b*r,e},t.lighten=function(e,t){var r=t/100;return e.r=e.r+(255-e.r)*r,e.g=e.g+(255-e.g)*r,e.b=e.b+(255-e.b)*r,e},t.mixRgb=function(e,t,r){r=0===r?0:r||50,e.a=e.a||1,t.a=t.a||1;var n,o=r/100,a=2*o-1,i=t.a-e.a,s=1-(n=((n=a*i==-1?a:(a+i)/(1+a*i))+1)/2);return{r:Math.floor(t.r*n+e.r*s),g:Math.floor(t.g*n+e.g*s),b:Math.floor(t.b*n+e.b*s),a:t.a*o+e.a*(1-o)}};var o=function(e,t){return 255-(255-e)*(255-t)/255};return t.blendRgb=function(e,t){return{r:o(e.r,t.r),g:o(e.g,t.g),b:o(e.b,t.b)}},t}.apply(t,n))||(e.exports=o)},U44B:function(e,t,r){var n,o;n=[r("YLtl"),r("UFvF"),r("UzQk"),r("oWUw"),r("O0ct"),r("4dd5"),r("TdwW"),r("vOKO"),r("DIoP"),r("4tSb"),r("T6kn"),r("MGCh"),r("a8ov"),r("N16J"),r("o03S"),r("bnn1"),r("7z7j"),r("Oll2"),r("BmlF"),r("ZVDg"),r("h4Rv"),r("A+mC"),r("pqGD"),r("UNXS"),r("e733"),r("3xm6")],void 0===(o=function(e,t,n,o,a,i,s,c,l,u,d,g,h,f,p,m,v,y,b,x,C,F,w,S,T,I){var k,R,A,P,N=h.default,E=n.Host,D=new i,M=g.channel("host"),L=g.channel("core");n.$C.setLog(L);var U,B=0,O=(new Date).getTime();function _(){try{throw new Error}catch(e){return e.stack}}E.setCoreWrapper=function(e){return R=e},E.setFeatureController=function(e){return k=e},E.setPosterView=function(e){return A=e},E.setAuthoringContext=function(e){return P=e},E.logging={info:L.info.bind(L),error:L.error.bind(L),warning:L.warn.bind(L),assertFailure:function(e){B<500&&("not expecting NaN as a coordinate value"===e?this.error("ASSERT FAILED: "+e,{stack:_()}):this.error("ASSERT FAILED: "+e),B++)},timeStamp:function(){return(new Date).toISOString()},getCurrentTime:function(){return Date.now()/1e3},platformID:function(){return"web"},additionalPlatformInfo:function(){return o.name+" "+o.fullVersion},getObjectClassNameForSingletonTracking:function(e){return e&&e.constructor&&e.constructor.name?e.constructor.name:"??"},logToAnalytics:function(e,t){l.publish(e,t)}},E.persistUtils=new F.HostPersistUtilsImpl,E.resourceUtils=new w.HostResourceUtilsImpl,E.network=new S.HostNetworkImpl,E.featureFlags={isPremiumThemesUnlocked:function(){return!0}};var j,H,K,X,G,W,V,Y,q=[];function z(e,t){this.corePromise=e,this.timeout=t,this.message="ASYNC_TEST_CASE"}return E.pathUtils={cacheArtworkForURL:function(e,t){return q.length>10&&q.pop(),q.splice(0,0,{url:e,artwork:t}),t},artworkFromURL:function(e,t){var r=q.find(t=>t.url===e);if(r)return q.splice(q.indexOf(r),1),q.splice(0,0,r),r.artwork;var o=new XMLHttpRequest;o.open("GET",e,!1),o.send();try{var a=n.SVGParserUtils.theoArtworkFromSVGData(o.responseText,t);return a?(this.cacheArtworkForURL(e,a),a):(n.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData returned null for ".concat(e)),null)}catch(t){return n.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData threw. Url - ".concat(e)),null}},parseSVGXMLData:function(e,t){var r=new DOMParser,n=r.parseFromString(e,"text/xml");n.rootElement||(n=r.parseFromString(e,"image/svg+xml")),function e(r){for(var n=r.localName.toLowerCase(),o={},a=0;a<r.attributes.length;++a){var i=r.attributes[a];i.specified&&(o[i.name]=i.value)}t.beginElement(n,o);var s=r.textContent;s&&t.handleStringValue(s);for(var c=0;c<r.childNodes.length;c++)r.childNodes[c].nodeType===Node.ELEMENT_NODE&&e(r.childNodes[c]);t.endElement(n)}(n.rootElement)},parseStringToDouble:function(e){const t=parseFloat(e);return isNaN(t)&&n.CoreAssert.fail("parsing string ".concat(e," resulted in NaN")),t},matchesForRegexInString:function(e,t){var r=new RegExp(e,"g");return t.match(r)||[]},firstMatchForRegexInString:function(e,t){var r=new RegExp(e,"g").exec(t);return r?r[0]:""},absolutePathFromURL:function(e){return e},lastPathComponentFromURL:function(e){const t=e.split("/");return t[t.length-1]}},E.learning={statics:{cache:{}},loadLayoutSuggestionModel:function(){var e=u,t=new n.TheoMatrix([e.featureScalingMean]),r=new n.TheoMatrix([e.featureScalingStd]),o=e.labels,a=[];for(var i in e.layoutModels)if(e.layoutModels.hasOwnProperty(i)){var s=e.layoutModels[i],c=s.range,l=new n.TheoMatrix(s.coef),d=new n.TheoMatrix([s.intercept]);a.push(new n.RangedLayoutLinearModel(c[0],c[1],l,d))}return new n.LayoutSuggestionsLinearModel(t,r,o,a)},loadNNJSON:function(e){var t;return"Font"===e?t=f:"Shape"===e?t=p:"TextRole"===e?t=m:"ShapeRole"===e?t=v:"VisualGrouping"===e&&(t=y),t},loadFontSuggestionLinearModel:function(){},updateFontSuggestionLinearModel:function(e){},updateFontSuggestionNNModel:function(e){},loadSuggestionNNModel:function(){return null}},E.fontProvider=(j=new n.FontDescriptor(a.getDefaultFont()),H=new n.OrderedFontSet,K=new n.OrderedFontSet,{loadOneFont:function(e){M.assert(!!e,"Invalid fontData."),H.find((function(t){return t.postScriptName===e.postScriptName}))&&M.info("Font is already loaded.",{font:e.postScriptName});var t=new n.FontDescriptor(e);t.availability=n.FontAvailability.LOADED,H.append(t),(!0===e.isPublic||k.featureEnabled("post-new-fonts"))&&K.append(t)},descriptorForPostScriptName:function(e,t){var r=H.find((function(t){return t.postScriptName===e}));return r||(e===j.postScriptName?j:E.textModelUtils.defaultFont())},getIncludedFonts:function(e){return H},getSuggestableFonts:function(e){return K},loadFont:function(e,t,r){},refreshBrandkitFonts:()=>{},registerBrandFonts:()=>{}}),E.textModelUtils=(X=E.fontProvider,G=document.createElement("canvas").getContext("2d"),{defaultColor:function(){return n.SolidColor.BLACK},defaultFont:function(){return X.descriptorForPostScriptName("SourceSansPro-Black")},defaultFontSize:function(){return 12},measureInkBounds:function(e,t,r){if("\n"===e)return n.TheoRect.Zero;var o=a.getFontData(t.postScriptName)||this.defaultFont();G.font=(o.style||"")+" "+(o.weight||"normal")+" "+r+"px "+(o.cssName||o.family);var i=G.measureText(e).width,s=r*o.capRatio;return new n.TheoRect(0,0,i,s)},measureInkBoundsWithTracking:function(e,t,r,o){if("\n"===e)return n.TheoRect.Zero;var i=a.getFontData(t.postScriptName)||this.defaultFont();G.font=(i.style||"")+" "+(i.weight||"normal")+" "+r+"px "+(i.cssName||i.family);var s=G.measureText(e).width;s+=(e.length-1)*o*r;var c=r*i.capRatio;return new n.TheoRect(0,0,s,c)},getGlyphPositions:function(e,t,r){var n=a.getFontData(t.postScriptName)||this.defaultFont();G.font=(n.style||"")+" "+(n.weight||"normal")+" "+r+"px "+(n.cssName||n.family);for(var o=G.measureText(e).width,i=e,s=[0],c=0;c<e.length;c++){i=i.substr(1);var l=o-G.measureText(i).width;s.push(l)}return s},fontHasClockwiseOutlines:function(e){return!0},textOutlines:function(){return null},rewindPath:function(e){return null},useOutlinesForKnockouts:function(e){return!1},measureBaselineBounds:function(e,t,r,n){return this.measureInkBoundsWithTracking(e,t,r,n)},isTextRightToLeft:function(e){return!1},splitOnWhiteSpace:function(e){for(var t=e.split(" "),r=[],n=0,o=0;o<t.length;o++){var a=t[o];if(0!==a.length){for(var i,s=e.indexOf(a),c=/\r|\n/g,l=-1,u=-1;null!=(i=c.exec(a));)l>-1?i.index!==u&&(r.push({start:s+n+l,length:u-l}),r.push({start:s+n+u,length:i.index-u}),l=i.index):(l=i.index)>0&&r.push({start:s+n,length:l}),u=c.lastIndex;l>-1?(r.push({start:s+l+n,length:u-l}),u<a.length&&r.push({start:s+u+n,length:a.length-u})):r.push({start:s+n,length:a.length}),n+=s+a.length,e=e.substr(s+a.length)}}return r},getWordClassRanges:function(){return[]}}),E.imageAnalysis=(W={},V=!1,(Y=function(e,t,r){this.url=e,this.origUrl=r,this.isLoaded=!1,this.containsAlpha=t,this.uploadImgWidth=176,this.uploadImgHeight=176,this.image_scale_x_ratio=0,this.image_scale_y_ratio=0,this.saliencyImage=null,this.saliencyIntegral=[],this.saliencyLoaded=!1,this.imageIntegral=null,e&&(this.imageLoadedPromise=new Promise((function(t,r){c.load(e).catch(r).done(t)})).then(function(e){this.img=e,this.image_scale_x_ratio=e.width/this.uploadImgWidth,this.image_scale_y_ratio=e.height/this.uploadImgHeight,e instanceof HTMLImageElement&&(this.imageIntegral=this.getRGBAIntegralImage(e,this.uploadImgWidth,this.uploadImgHeight)),this.focus=null,this.isLoaded=!0}.bind(this)))}).prototype.computeSaliency=function(){if(V){const e={saliency:{boundingBoxRectangles:[]}};t.all([this.setFocusRegion(e.saliency.boundingBoxRectangles),this.setSaliencyImage(e.saliency.mask)]).finally(function(){this.saliencyLoaded=!0}.bind(this))}else void 0===this.saliencyLoadedPromise&&void 0!==this.imageLoadedPromise&&(this.saliencyLoadedPromise=this.imageLoadedPromise.then(function(){var e=document.createElement("canvas"),r=e.getContext("2d");e.width=this.uploadImgWidth,e.height=this.uploadImgHeight,r.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,this.uploadImgWidth,this.uploadImgHeight);var n=e.toDataURL("image/png").replace("data:image/png;base64,",""),o=E.resourceUtils.makeGUID();return d.getBoundingBoxAndMask(n,o).timeout(5e3,"SALIENCY_TIMEOUT").catch((function(e){return"SALIENCY_TIMEOUT"===e.message?M.error("Saliency.getBoundingBoxAndMask Timed out in 5000ms",{requestId:o}):M.error("Saliency.getBoundingBoxAndMask error:",{err:e,requestId:o}),{saliency:{boundingBoxRectangles:[]}}})).then(function(e){return t.all([this.setFocusRegion(e.saliency.boundingBoxRectangles),this.setSaliencyImage(e.saliency.mask)])}.bind(this)).finally(function(){this.saliencyLoaded=!0}.bind(this))}.bind(this)))},Y.prototype.getBoxAverage=function(e,t){Number.isInteger(e.minX)&&Number.isInteger(e.minY)&&Number.isInteger(e.maxX)&&Number.isInteger(e.maxY)||(e.minX=Math.round(e.minX),e.minY=Math.round(e.minY),e.maxX=Math.round(e.maxX),e.maxY=Math.round(e.maxY));var r=this.saliencyIntegral[0].length,n=this.saliencyIntegral.length;if(e.minX>r-2||e.minY>n-2)return 0;e.maxX>=r&&(e.maxX=r-1),e.maxY>=n&&(e.maxY=n-1);var o=(e.maxX-e.minX)*(e.maxY-e.minY),a=this.saliencyIntegral[e.minY][e.minX],i=this.saliencyIntegral[e.minY][e.maxX],s=this.saliencyIntegral[e.maxY][e.minX],c=[this.saliencyIntegral[e.maxY][e.maxX]-s-i+a];return t?c[0]/o:c[0]/255/o},Y.prototype.getIntegralImage=function(e,t,r){var n=document.createElement("canvas"),o=n.getContext("2d");n.width=t,n.height=r,o.drawImage(e,0,0,e.width,e.height,0,0,t,r);var a=[];function i(e,t,r,n,o){var a=r*t+n,i=e[a-t]||0,s=e[a-1]||0,c=e[a-t-1]||0;a%t==0&&(s=0,c=0);var l=i+s+o-c;e[a]=l}!function(e,t,r,n){if(arguments.length<4)throw new Error("You should specify one output array: sum");for(var o=0;o<r;o++)for(var a=0;a<t;a++){var s=e[o*t*4+4*a];n&&i(n,t,o,a,s)}}(o.getImageData(0,0,t,r).data,t,r,a);for(var s=[],c=0;c<r;c++){s[c]=[];for(var l=0;l<t;l++){var u=c*t+l;s[c][l]=a[u]}}return s},Y.prototype.getRGBAIntegralImage=function(e,t,r){var n=document.createElement("canvas"),o=n.getContext("2d");n.width=t,n.height=r,o.drawImage(e,0,0,e.width,e.height,0,0,t,r);for(var a=o.getImageData(0,0,t,r).data,i=[],s=0;s<t;s++)for(var c=0;c<r;c++)for(var l=0;l<4;l++){var u=s>0&&c>0?i[(c-1)*t*4+4*(s-1)+l]:0,d=c>0?i[(c-1)*t*4+4*s+l]:0,g=s>0?i[c*t*4+4*(s-1)+l]:0,h=a[c*t*4+4*s+l];i[c*t*4+4*s+l]=h+d+g-u}return i},Y.prototype.convertBase64ToImageElement=function(e,r){for(var n=t.defer(),o=atob(e),a=o.length,i=Math.ceil(a/1024),s=[],c=0;c<i;++c){for(var l=1024*c,u=Math.min(l+1024,a),d=[],g=l;g<u;++g)d.push(o[g].charCodeAt(0));s.push(new Uint8Array(d))}var h=new Blob(s,{type:r||""}),f=(window.URL||window.webkitURL).createObjectURL(h),p=new Image;return p.src=f,p.onload=function(){n.resolve(p)},p.onerror=function(e){n.reject(e)},n.promise},Y.prototype.setFocusRegion=function(e){if(e&&e.length>0){var t=e[0];this.focus=n.TheoRect.fromXYWH(t.x/this.uploadImgWidth,t.y/this.uploadImgHeight,t.width/this.uploadImgWidth,t.height/this.uploadImgHeight)}else{M.warn("Did not find a salient region. Using fallback focus.");var r=this.uploadImgWidth*this.image_scale_x_ratio,o=this.uploadImgHeight*this.image_scale_y_ratio;this.focus=r>o?n.TheoRect.fromXYWH((r-o)/2/r,0,o/r,1):n.TheoRect.fromXYWH(0,(o-r)/2/o,1,r/o)}},Y.prototype.setSaliencyImage=function(e){return e&&""!==e?this.convertBase64ToImageElement(e,"image/png").then(function(e){this.saliencyImage=e,this.saliencyIntegral=this.getIntegralImage(e,e.width,e.height)}.bind(this)):t.resolve()},Y.prototype.loaded=function(e){return this.isLoaded},Y.prototype.whenLoaded=function(e){this.isLoaded?e():this.imageLoadedPromise&&this.imageLoadedPromise.then(function(){!1===this.isLoaded&&M.error("ERROR: imageLoadedPromise resolved but image hasn't finished loading."),e()}.bind(this))},Y.prototype.whenAsyncFeaturesLoaded=function(e){this.saliencyLoaded?e():void 0===this.saliencyLoadedPromise?this.computeSaliency():this.saliencyLoadedPromise.then(function(){!1===this.saliencyLoaded&&M.error("ERROR: saliencyLoadedPromise resolved but image hasn't finished loading."),e()}.bind(this))},Y.prototype.getFocus=function(){return this.focus},Y.prototype.getWidth=function(){return void 0!==this.img?this.img.width:0},Y.prototype.getHeight=function(){return void 0!==this.img?this.img.height:0},Y.prototype.getUrl=function(){return this.url},Y.prototype.getImageLoadedPromise=function(){return this.imageLoadedPromise},Y.prototype.getSaliencyLoadedPromise=function(){return this.saliencyLoadedPromise},Y.prototype.getSaliencyData=function(e,t){if(null!=this.saliencyImage){var r=document.createElement("canvas"),n=r.getContext("2d");r.width=e,r.height=t,n.drawImage(this.saliencyImage,0,0,this.saliencyImage.width,this.saliencyImage.height,0,0,e,t);for(var o=n.getImageData(0,0,e,t).data,a=[],i=0;i<o.length;i+=4)a.push(o[i]);return a}return[]},Y.prototype.getEdgeData=function(e,t){return[]},Y.prototype.hasAlpha=function(){return this.containsAlpha},Y.prototype.getImageColorData=function(e){return[]},Y.prototype.getImageColors=function(e){if(!this.img||!this.img.src)return[n.SolidColor.BLACK,n.SolidColor.WHITE];var t;try{t=D.getPalette(this.img,e)}catch(e){return M.error("Failed to get image colors using ColorThief: ".concat(e)),[n.SolidColor.BLACK,n.SolidColor.WHITE]}return t.map((function(e){return s.hex2SolidColor(s.rgb2hex({r:e[0],g:e[1],b:e[2]}))}))},Y.prototype.getAverageEdge=function(e){if(e.maxX-e.minX<=0||e.maxY-e.minY<=0)return 0;var t=e.multiplyXY(1/this.image_scale_x_ratio,1/this.image_scale_y_ratio);return this.saliencyIntegral.length>0?this.getBoxAverage(t,!1):0},Y.prototype.getFilterColor=function(e,t){return n.SolidColor.BLACK},Y.prototype.getAverageColorBackup=function(e,t){if(!A)return n.SolidColor.BLACK;if(R){var r=R.getImageFormaForURL(this.origUrl);if(r){for(var o=r.totalPlacement,a=e.transform(o),i=[a.evalXY(.1,.1),a.evalXY(.1,.9),a.evalXY(.3,.3),a.evalXY(.3,.7),a.evalXY(.5,.5),a.evalXY(.7,.3),a.evalXY(.7,.7),a.evalXY(.9,.9),a.evalXY(.9,.1)],s=0,c=0,l=0,u=0,d=0,g=i.length-1;g>=0;g--){var h=i[g],f=A.getImageColorAtPoint(h);f&&f.a>0&&(s++,c+=f.r/255,l+=f.g/255,u+=f.b/255,d+=f.a)}return s<=0?n.SolidColor.BLACK:new n.SolidColor(c/s,l/s,u/s,d/s)}}},Y.prototype.getAverageColor=function(e,t){if(this.imageIntegral){var r=e.multiplyXY(1/this.image_scale_x_ratio,1/this.image_scale_y_ratio);const f=this.uploadImgWidth,p=this.uploadImgHeight;var o=Math.round(Math.min(Math.max(r.minY,0),p-1)),a=Math.round(Math.max(Math.min(r.maxY,p-1),0)),i=Math.round(Math.min(Math.max(r.minX,0),f-1)),s=Math.round(Math.max(Math.min(r.maxX,f-1),0));if(o===a&&(a+1<=p?a+=1:o-1>=0&&(o-=1)),i===s&&(s+1<=f?s+=1:i-1>=0&&(i-=1)),i>=s||o>=a||o<0||i<0||s>=f||a>=p)return this.getAverageColorBackup(e,t);for(var c=[],l=0;l<4;l++){const e=this.imageIntegral[o*f*4+4*i+l],t=this.imageIntegral[o*f*4+4*s+l],r=this.imageIntegral[a*f*4+4*i+l],n=this.imageIntegral[a*f*4+4*s+l];c[l]=n+e-t-r}var u=Math.min(Math.max(c[0]/c[3],0),1),d=Math.min(Math.max(c[1]/c[3],0),1),g=Math.min(Math.max(c[2]/c[3],0),1),h=1;return 0===c[3]&&(h=0,u=0,d=0,g=0),new n.SolidColor(u,d,g,h)}return this.getAverageColorBackup(e,t)},Y.prototype.getFaceIntersections=function(e){return[]},{updateHostImageCacheKey:function(e,t){void 0!==W[e]&&(W[t]=W[e],delete W[e])},createHostImage:function(e,t,r){var n=N.decodeUrl(e);if(void 0!==W[n])return W[n];var o=new Y(n,t,e);return W[n]=o,r&&o.computeSaliency(),o},setShapeFormaTransparencyMask:function(e,t){if("Shape"!==e.kind)return null;var r=document.createElement("canvas"),o=r.getContext("2d"),a=e.page.document.beginTransaction("calculateTransparencyMask");e.style.colors.setColor(n.ColorRole.FieldPrimary,n.SolidColor.WHITE);var i=t/(e.bounds.aspectRatio>1?e.bounds.width:e.bounds.height);e.parent.placement=n.Matrix2D.Identity,e.placement=n.Matrix2D.scalingXY(i,i),e.move(n.Matrix2D.translationXY(-e.finalFrame.origin.x,-e.finalFrame.origin.y));var s=Math.round(e.frame.width),c=Math.round(e.frame.height);r.width=s,r.height=c,new b({documentSize:{width:s,height:c},renderScale:1,data:{forma:e,formaID:e.formaID,isImageBackgroundShape:!1,type:"shape"}}).renderInto(o,1,1,null);for(var l=o.getImageData(0,0,s,c).data,u=[],d=3;d<l.length;d+=4)u.push(l[d]/255);a.rollback(),e.maskImage=n.TheoMatrix.createMatrixFromList(u,s,c)},setRunningActionTests:function(e){V=e}}),E.brandkitManager={brandkitForDocument:()=>P,brandkitForElement:function(){return this.fakeBrandkitForElementsForTesting?this.fakeBrandkitForElementsForTesting:P},authoringContextManager:{authoringContext:()=>P},isBrandkitEnabled:!0,activateBrand:e=>{R&&R.handleCurrentBrandChanged(e)},getFilePathForEncodedURL:()=>{},sendDefaultBrandChangedNotification:()=>{},sendActiveBrandChangedNotification:()=>{}},E.async={startTimer:function(e,t){setTimeout(t,1e3*e)},postOnMainThread:function(e,t){setTimeout(t,1e3*e)},getSystemUptimeInSeconds:function(){return((new Date).getTime()-O)/1e3}},E.factories={constructDocumentStateManager:function(e){return e.database}},E.platform={isWeb:!0,isIOS:!1,isAndroid:!1,isDesktop:!0,isMobile:!1,isService:!1},E.testing={urlForTestAsset:function(e){return e},throwAsyncTestCase:function(e,t){throw new z(e,t)}},E.actionTesting=function(){function e(e){return"https://s3.amazonaws.com/post-renderer-prototype/ActionTestMediaAssets/"+function(e){return e.substring(e.lastIndexOf("/")+1)}(e)}return{urlForAsset:function(t){return e(t)},imageDataForAsset:function(t){var r=t.substring(t.lastIndexOf(".")),o=e(t);return".jpg"===r||".jpeg"===r||".png"===r?c.load(o).then(t=>new n.ActionTestImageData(e(t.src),t.width,t.height)).catch(()=>null):null},templateForDocument:function(e){var r=t.defer(),n={aspectRatio:R.getPageAspectRatio(),wordCount:R.getLockupWordCount(),iconCount:R.getIconCount(),imageCount:R.getPotentialBackgroundImageCount()};return $.get("/api/post/v1/designthemes?aspectRatio="+n.aspectRatio+"&wordCount="+n.wordCount.join(",")+"&iconCount="+n.iconCount+"&imageCount="+n.imageCount).done((function(e){var t=e.items[0];$.get(t.manifestUrl,(function(e){R.getTemporaryDocumentWithFontsLoaded(e).then((function(e){r.resolve(e)}))}))})),r.promise}}}(),E.crypto=new T.HostCryptoImpl,E.schema=function(){var e=/^\.\/schemata\/([0-9]*)\/(.*)\.json/,t={},o={},a={},i={},s=[];function c(e){for(var t=s.length-1;t>=0;t--)if(s[t]<=e)return s[t];return s[0]}function l(e){const n=c(e).toString();var o={};for(var a in t[n])if(t[n].hasOwnProperty(a)){var i=a+".json";o[i]=r("cyUI")("./"+n+"/"+i)}return o}n.$Resources.schema.forEach((function(r){var n=r.path.match(e);if(n&&3===n.length){var o=r.path.replace("./","./js/"),a=n[1],i=n[2];t[a]||(t[a]={},s.push(parseInt(a))),t[a][i]=o}})),s.sort((function(e,t){return e-t}));var u=s[s.length-1];for(var d in o[u]=l(u),o[u])if(o[u].hasOwnProperty(d))for(var g in o[u][d].definitions)o[u][d].definitions.hasOwnProperty(g)&&(a[g]=d,i[g]=o[u][d].definitions[g]);return{rootFile:"Root.json",getRoot(e){var t=c(e);return o[t.toString()]||(o[t]=l(t)),o[t.toString()]["Root.json"]},getFiles(e){var t=c(e);return o[t.toString()]||(o[t]=l(t)),o[t.toString()]},matches:(e,t)=>new RegExp(t).test(e)}}(),E.locale={getDecimalSeparator:function(){if(!U||""===U){const t=I.sparkSelectedLocale;var e=1.1.toLocaleString(t).replace(/[0-9]+/g,"");e&&""!==e||(e="."),U=e}return U},formatNumber:function(e,t){var r=n.$C.toString("%."+t+"f",e);const o=this.getDecimalSeparator();return(r=r.replace(".",o)).includes(o)&&(r=r.replace(/0+$/,"")),r.endsWith(o)&&(r=r.substr(0,r.length-1)),r},convertStringToNumber:function(e){const t=this.getDecimalSeparator();var r=e.replace(t,".");return parseFloat(r)}},E}.apply(t,n))||(e.exports=o)},UNXS:function(e,t,r){"use strict";r.r(t);var n=r("UzQk"),o=r("YLtl"),a=r.n(o),i=r("UFvF"),s=r.n(i),c=r("vY69");class l{static _implements(e){return"HostDataProtocol"===e}constructor(e){var t,r,n;n=void 0,(r="_data")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this._data=e}get data(){return this._data}getLength(){return this.data.size}asUTF8String(){return new n.CorePromise((e,t)=>{const r=new FileReader;r.addEventListener("loadend",()=>{e(String(r.result))}),r.addEventListener("error",()=>{t("Failed returning data as UTF-8 string.")}),r.readAsText(this._data,"utf-8")})}asJSON(){return this.asUTF8String().then(e=>{try{return JSON.parse(e)}catch(e){return n.CorePromise.reject("Failed parsing contents as JSON.")}})}}r.d(t,"HostNetworkImpl",(function(){return u}));class u{constructor(){var e,t,r;r=void 0,(t="_authController")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,this._authController=new c.a}request(e){var t=s.a.defer(),r=new Map([[n.HostNetworkRequestMethod.post,"POST"],[n.HostNetworkRequestMethod.get,"GET"]]),o=new XMLHttpRequest;if(n.CoreAssert.isTrue(r.has(e.method),"Sorry, HostNetwork only supports GET and POST for now"),o.open(r.get(e.method)||"GET",e.url,!0),a.a.forEach(e.headers,(e,t)=>o.setRequestHeader(t,e)),o.responseType="blob",o.onload=function(){if(this.status>=400)return void t.reject("Network error: ".concat(this.statusText));const e=new l(this.response),r=this.getResponseHeader("Content-Type")||"text/html; charset=utf-8",[o,a]=r.split(/;\s*/g),i=a?a.replace("charset=",""):null;t.resolve(new n.HostNetworkResponse(this.status,o,i,e))},o.onerror=function(e){t.reject("Failed to complete the network request.")},e.method===n.HostNetworkRequestMethod.post&&a.a.isObject(e.formData)){const t=new FormData;a.a.forEach(e.formData,(e,r)=>t.append(r,e.data.data)),o.send(t)}else o.send();return new n.CorePromise((e,r)=>{t.promise.then(t=>e(t)).catch(e=>r(e))})}getAuthToken(){return new n.CorePromise((e,t)=>{this._authController.getAccessToken().then(t=>e(t)).catch(e=>t(e))})}}},a65H:function(e,t,r){var n;void 0===(n=function(){return function(e){var t={id:e.id,acRoles:e.acRoles,acName:e.acName,url:e.url,fullResUrl:e.fullResUrl,pixelWidth:e.pixelWidth,pixelHeight:e.pixelHeight,mimeType:e.mimeType,getRoles:function(){return t.acRoles},getId:function(){return t.id}};return t}}.apply(t,[]))||(e.exports=n)},a8ov:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r("UzQk");var o=r("+Ltv");const a={COMPONENT:"component:",CP:"cp:",AUTHORING_CONTEXT:"ac:"};class i{static getCCUrl(e,t,r,n,a){var i="/image_assets/".concat(e,"/").concat(t,"/?asset_id=").concat(r,"&size=").concat(o.maxImageSizeFromStorage);return n&&(i+="&img_etag=".concat(n)),a&&(i+="&mime=".concat(a)),i}static getImageUrl(e,t,r){return i.getCCUrl("adobe-theo",e,t,null,r)}static getAuthoringContextUrl(e,t,r,n){return i.getCCUrl("adobe-spark-authoring-contexts",e,t,r,n)}static isEncodedComponentUrl(e){return!!e&&0===e.indexOf(a.COMPONENT)}static encodeComponentUrl(e,t,r){const n=r?"/"+r.replace("/","+"):"";return"".concat(a.COMPONENT).concat(e,"/").concat(t).concat(n)}static encodeDesignFilterComponentUrl(){return"do-not-load"}static decodeComponentUrlParameters(e){var t,r=e.substring(a.COMPONENT.length).split("/");"logo"===r[2]&&(t=!0,r.splice(2,1));var n=r.length>=3?r[2].replace("+","/"):null;return{docId:r[0],componentId:r[1],mimeType:!n&&t?"image/png":n}}static isEncodedCPUrl(e){return!!e&&0===e.indexOf(a.CP)}static encodeCPUrl(e,t){if(n.CoreAssert.isTrue(!t||0===t.indexOf("/"),"URLBuilder.encodeCPUrl: absolute path to component must begin with a slash"),0===t.indexOf("/")){let e=t.split("/");"original"!==e[1]&&(e.splice(1,0,"original"),t=e.join("/"))}return"".concat(a.CP).concat(e).concat(t)}static decodeCPUrlParameters(e){const t=e.substring(a.CP.length),r=t.split("/");return{assetID:r[0],subPath:r.slice(1).join("/"),dcxSubPath:r.slice("original"===r[1]?2:1).join("/"),path:t,parentPath:r[r.length-2]}}static encodeAuthoringContextUrl(e,t,r,n){const o=r?"/"+r:"",i=n?"/"+n.replace("/","+"):"";return"".concat(a.AUTHORING_CONTEXT).concat(e,"/").concat(t).concat(o).concat(i)}static isEncodedAuthoringContextUrl(e){return!!e&&0===e.indexOf(a.AUTHORING_CONTEXT)}static decodeAuthoringContextUrlParameters(e){var t,r=e.substring(a.AUTHORING_CONTEXT.length).split("/");"logo"===r[2]&&(t=!0,r.splice(2,1));var n,o=r.length>=3?r[2]:null;return n=o?r.length>=4?r[3].replace("+","/"):null:r.length>=3?r[2].replace("+","/"):null,{assetId:r[0],componentId:r[1],etag:o,mimeType:!n&&t?"image/png":n}}static decodeUrl(e){if(!e)return null;if(i.isEncodedComponentUrl(e)){var t=i.decodeComponentUrlParameters(e);return i.getImageUrl(t.docId,t.componentId,t.mimeType)}if(i.isEncodedCPUrl(e)){var r=i.decodeCPUrlParameters(e),n=i.cpServiceDomain?"host/".concat(i.cpServiceDomain,"/"):"";return"/api/post/v1/cp/".concat(n,"dcx/").concat(r.assetID,"/").concat(r.dcxSubPath)}if(i.isEncodedAuthoringContextUrl(e)){var o=i.decodeAuthoringContextUrlParameters(e);return i.getAuthoringContextUrl(o.assetId,o.componentId,o.etag,o.mimeType)}return e}static setCPServiceDomain(e){i.cpServiceDomain=e}}var s,c,l;l=void 0,(c="cpServiceDomain")in(s=i)?Object.defineProperty(s,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[c]=l},e733:function(e,t,r){"use strict";r.r(t),r.d(t,"HostCryptoImpl",(function(){return a}));var n=r("ZVDg"),o=r.n(n);class a{md5(e){return o.a.hash(e,!1)}}},guFN:function(e,t,r){var n,o;n=[r("TdwW"),r("UzQk")],void 0===(o=function(e,t){function r(e,t){this.ctx=e,this.colorTable=t,this.filled=!1,this.ctx.beginPath()}return r.prototype.beginGroup=function(){},r.prototype.endGroup=function(){},r.prototype.beginClipGroup=function(e){},r.prototype.endClipGroup=function(){},r.prototype.fill=function(r,n){n=n||this.colorTable.color(r),this.ctx.fillStyle=e.toCSS(e.solidColor2Rgba(n)),this.ctx.fill(this.fillRule===t.TheoPath.PATHFILL_EVENODD?"evenodd":"nonzero"),this.filled=!0},r.prototype.stroke=function(r,n,o){this.ctx.lineWidth=o,n=n||this.colorTable.color(r),this.ctx.strokeStyle=e.toCSS(e.solidColor2Rgba(n)),this.ctx.miterLimit=this.miterLimit,this.ctx.lineCap="butt",this.endCap===t.TheoPath.PATHEND_ROUND?this.ctx.lineCap="round":this.endCap===t.TheoPath.PATHEND_SQUARE&&(this.ctx.lineCap="square"),this.ctx.lineJoin="miter",this.join===t.TheoPath.PATHJOIN_ROUND?this.ctx.lineJoin="round":this.join===t.TheoPath.PATHJOIN_BEVEL&&(this.ctx.lineJoin="bevel"),this.ctx.stroke()},r.prototype.rectangle=function(e,t,r,n){this.ctx.rect(e,t,r-e,n-t)},r.prototype.ellipse=function(e,t,r,n){var o=r-e,a=n-t,i=o/2*.5522848,s=a/2*.5522848,c=e+o/2,l=t+a/2;this.ctx.moveTo(e,l),this.ctx.bezierCurveTo(e,l-s,c-i,t,c,t),this.ctx.bezierCurveTo(c+i,t,r,l-s,r,l),this.ctx.bezierCurveTo(r,l+s,c+i,n,c,n),this.ctx.bezierCurveTo(c-i,n,e,l+s,e,l),this.ctx.closePath()},r.prototype.newPath=function(e,t,r,n,o){this.ctx.beginPath(),this.fillRule=e,this.endCap=t,this.join=r,this.strokeWt=n,this.miterLimit=o},r.prototype.moveTo=function(e,t){this.ctx.moveTo(e,t)},r.prototype.lineTo=function(e,t){this.ctx.lineTo(e,t)},r.prototype.cubicBezier=function(e,t,r,n,o,a){this.ctx.bezierCurveTo(e,t,r,n,o,a)},r.prototype.quadraticBezier=function(e,t,r,n){this.ctx.quadraticCurveTo(e,t,r,n)},r.prototype.closePath=function(){this.ctx.closePath()},r.prototype.done=function(){if(this.filled||this.fillRule==t.TheoPath.PATHFILL_NONE){if(this.fillRule==t.TheoPath.PATHFILL_NONE){var e=this.colorTable.color(t.ColorRole.FieldPrimary);this.stroke(t.ColorRole.FieldPrimary,e,this.strokeWt)}}else this.fill(t.ColorRole.FieldPrimary,null)},r}.apply(t,n))||(e.exports=o)},h4Rv:function(e,t,r){"use strict";r.r(t),r.d(t,"HostPathUtilsImpl",(function(){return a}));var n=r("UzQk");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){o(this,"_urlArtworkCache",[])}cacheArtworkForURL(e,t){return this._urlArtworkCache.length>a.URL_ARTWORK_CACHE_SIZE&&this._urlArtworkCache.pop(),this._urlArtworkCache.splice(0,0,{url:e,artwork:t}),t}artworkFromURL(e,t){var r=this._urlArtworkCache.find(t=>t.url===e);if(r)return this._urlArtworkCache.splice(this._urlArtworkCache.indexOf(r),1),this._urlArtworkCache.splice(0,0,r),r.artwork;var o=new XMLHttpRequest;o.open("GET",e,!1),o.send();try{var a=n.SVGParserUtils.theoArtworkFromSVGData(o.responseText,t);return a?(this.cacheArtworkForURL(e,a),a):(n.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData returned null for ".concat(e)),null)}catch(t){return n.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData threw. Url - ".concat(e)),null}}parseSVGXMLData(e,t){var r=new DOMParser,n=r.parseFromString(e,"text/xml");n.rootElement||(n=r.parseFromString(e,"image/svg+xml")),function e(r){for(var n=r.localName.toLowerCase(),o={},a=0;a<r.attributes.length;++a){var i=r.attributes[a];i.specified&&(o[i.name]=i.value)}t.beginElement(n,o);var s=r.textContent;s&&t.handleStringValue(s);for(var c=0;c<r.childNodes.length;c++)r.childNodes[c].nodeType===Node.ELEMENT_NODE&&e(r.childNodes[c]);t.endElement(n)}(n.rootElement)}parseStringToDouble(e){const t=parseFloat(e);return isNaN(t)&&n.CoreAssert.fail("parsing string ".concat(e," resulted in NaN")),t}matchesForRegexInString(e,t){var r=new RegExp(e,"g");return t.match(r)||[]}firstMatchForRegexInString(e,t){var r=new RegExp(e,"g").exec(t);return r?r[0]:""}absolutePathFromURL(e){return e}lastPathComponentFromURL(e){let t=e.split("/");return t[t.length-1]}}o(a,"URL_ARTWORK_CACHE_SIZE",10)},k99a:function(e,t,r){var n,o;n=[r("UFvF"),r("7mGH")],void 0===(o=function(e,t){var r=null;return function(){var n={},o={"post-logo-enabled":["enable-brand-kit"]};return n.hasExperimentFeature=function(e,r,n,o){return t.hasExperimentFeature(e,r,n,o)},n.loadFeatures=function(n){return r?r.promise:(r=e.defer(),!!(n=n||{}).skipLoadingAuthenticatedFeatures?r.resolve(!0):t.featuresLoaded().then((function(){r.resolve()})),r.promise)},n.featureEnabled=function(e){if(!r||!r.promise.isFulfilled())throw new Error("Feature-controller flags not yet loaded. Call loadFeatures() first.");return t?t.hasFeature(e)||function(e){var r=o[e];if(r)for(var n=0;n<r.length;n++)if(t.hasFeature(r[n]))return!0;return!1}(e):"post-pgm-poster"===e},n}}.apply(t,n))||(e.exports=o)},oWUw:function(e,t,r){var n;void 0===(n=function(){navigator.appVersion;var e,t,r,n=navigator.userAgent,o=navigator.appName,a=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10);return-1!=(t=n.indexOf("Opera"))?(o="Opera",a=n.substring(t+6),-1!=(t=n.indexOf("Version"))&&(a=n.substring(t+8))):-1!=(t=n.indexOf("MSIE"))?(o="Microsoft Internet Explorer",a=n.substring(t+5)):-1!=(t=n.indexOf("Chrome"))?(o="Chrome",a=n.substring(t+7)):-1!=(t=n.indexOf("Safari"))?(o="Safari",a=n.substring(t+7),-1!=(t=n.indexOf("Version"))&&(a=n.substring(t+8))):-1!=(t=n.indexOf("Firefox"))?(o="Firefox",a=n.substring(t+8)):(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(o=n.substring(e,t),a=n.substring(t+1),o.toLowerCase()==o.toUpperCase()&&(o=navigator.appName)),-1!=(r=a.indexOf(";"))&&(a=a.substring(0,r)),-1!=(r=a.indexOf(" "))&&(a=a.substring(0,r)),i=parseInt(""+a,10),isNaN(i)&&(a=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10)),{name:o,fullVersion:a,majorVersion:i}}.apply(t,[]))||(e.exports=n)},pqGD:function(e,t,r){"use strict";r.r(t),r.d(t,"HostResourceUtilsImpl",(function(){return o}));var n=r("UzQk");class o{getPGMResourceProviderForURL(e,t){return t.startsWith("component:")?new n.PGMCCStorageProvider(t):t.startsWith("data:")?new n.PGMDataURLProvider(t):new n.PGMLocalFileProvider(t)}makeGUID(){const e=[];for(let t=0;t<36;t+=1)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}urlForResource(e,t){const r=window.THEO_BUNDLE_PATH;return"".concat(r,"/images/images/shapes/svg/").concat(t,".svg")}}},vOKO:function(t,r,n){var o,a;o=[n("UFvF"),n("tY4j"),n("MGCh"),n("CTED"),n("DIoP")],void 0===(a=function(t,r,n,o,a){var i=n.channel("load-image"),s=new o(30),c={_loadImageViaHTMLElement:function(e){var r=t.defer(),n=document.createElement("img");n.addEventListener("load",(function(){r.resolve(n)})),n.addEventListener("error",(function(){i.debug("html onerror failure");var t=new Error("img load error");t.imgSrc=e,r.reject(t)}));try{new URL(e,n.baseURI).origin!==window.location.origin&&(n.crossOrigin="anonymous")}catch(e){}return n.src=e,r.promise},_tryLoadingImageViaHTTPRequest:function(e){var r=t.defer(),n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="blob",n.onload=function(){if(n.status>=400){var t=new FileReader;return t.onload=function(){var o=new Error("Attempt to load image via AJAX returned an HTTP error.");o.httpStatus=n.status,o.httpResponse=t.result,o.imgSrc=e,r.reject(o)},void t.readAsText(n.response)}i.debug("Successfully loaded image via AJAX.",{src:e});var o=c.loadImageFromBlob(n.response);r.resolve(o)},n.onerror=function(){var t=new Error("Failed to load image via AJAX.");t.imgSrc=e,i.debug("ajax onerror"),r.reject(t)},n.send(),r.promise},load:function(e){if(!e){var n=new Error("[Post:load-image] Attempted to load null image.");return i.error(n),t.reject(n)}if("do-not-load"===e){var o=document.createElement("img");return o.src=e,o.width=1,o.height=1,t.resolve(o)}var l=s.get(e);if(l)return i.debug("loaded image from cache"),l;var u=!1,d=1,g=r(this._loadImageViaHTMLElement,{maxAttempts:3,delay:200,logger:{info:function(){d++}}})(e).catch((function(t){return i.error(t),d++,c._tryLoadingImageViaHTTPRequest(e).catch((function(e){throw i.error(e),t}))})).then((function(e){return u=!0,e})).catch((function(t){throw s.remove(e),t})).finally((function(){var t=/^\s*data:/i.test(e)?"data-url":e;a.publish("post:imageLoadAttempt",{contextualData1:"numberOfLoadAttempts:"+d,contextualData2:"src:"+t,contextualData3:"success:"+u})}));return s.set(e,g),g},loadImageFromBlob:function(r){var n=t.defer();if(r instanceof Blob){var o=window.URL||window.webkitURL,a=new Image,s=o.createObjectURL(r);a.onload=function(){n.resolve(a),o.revokeObjectURL&&o.revokeObjectURL(s)},a.onerror=function(e){i.error("there was an error loading the image",{event:e,src:this&&this.src}),n.reject({message:"error loading image file",src:this&&this.src,event:e}),o.revokeObjectURL&&o.revokeObjectURL(s)},a.src=s}else i.error("image data was not an image file",e),n.reject();return n.promise}};return c}.apply(r,o))||(t.exports=a)}}]);
//# sourceMappingURL=theo-app-storage_5a11b65b-958a6093.js.map