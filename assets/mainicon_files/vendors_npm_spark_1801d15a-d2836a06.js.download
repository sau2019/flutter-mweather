(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[11],{"+5yP":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("IHB5"),r=i("UzQk"),n=i("3r1R"),a=i("YLtl"),o=i("lzL7"),h=[1,0,0,1,0,0],l=4;var c;!function(t){t[t.SUBTREE_CHANGED=0]="SUBTREE_CHANGED",t[t.NOT_VISIBLE=1]="NOT_VISIBLE",t[t.SUBTREE_CHANGED_AND_NOT_VISIBLE=2]="SUBTREE_CHANGED_AND_NOT_VISIBLE"}(c||(c={}));const u="data:image/png;base64,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",d=380,p=80;e.default=class{constructor(t,e=1,i,s=!1,r=!1){this.hostAPI=t,this.canvasLpxWidth=0,this.canvasLpxHeight=0,this.canvasAspect=1,this.renderWidth=0,this.renderHeight=0,this.renderScale=1,this.currentGraph=null,this.pendingImageLoadCount=0,this.currentAnimationProgress=0,this.documentWidth=0,this.documentHeight=0,this.showWatermark=!1,this.bufferCanvas=document.createElement("canvas"),this.bufferCanvasContext=this.bufferCanvas.getContext("2d"),this.viewLookup={},this.renderQ=function(t=50){return new Promise((e,i)=>{a.delay(e,t)})}(),this.pixiApp=this.hostAPI.createPixiApp({width:32,height:32,antialias:!0,transparent:!0,preserveDrawingBuffer:s,resolution:e},i),this.ticker=new PIXI.ticker.Ticker,this.ticker.autoStart=!1,this.ticker.add(this.handleAnimationTick,this),this.ticker.stop(),this.stageDO=new n.default(this,this.pixiApp.stage),this.pixiApp.stage.on("image-loaded",this.handleImageLoaded,this),this.pixiApp.stage.on("image-loading",this.handleImageLoading,this),this.totalAnimationDuration=5e3,this.currentAnimationProgress=0}playAnimation(){this.ticker.started?this.pauseAnimation():(this.animationStartTime=Date.now(),this.ticker.start())}pauseAnimation(){this.ticker.stop()}setAnimationTime(t){this.currentAnimationProgress=t}getPixelData(t,e,i,s){const r=this.pixiApp.renderer.rootRenderTarget,n=new Uint8Array(l*i*s),a=this.pixiApp.renderer.gl;return this.pixiApp.renderer.bindRenderTarget(r),a.readPixels(t,e,i,s,a.RGBA,a.UNSIGNED_BYTE,n),function(t){for(let e=0;e<t.length;e+=4){const i=t[e+3];i&&(t[e]=Math.round(Math.min(255*t[e]/i,255)),t[e+1]=Math.round(Math.min(255*t[e+1]/i,255)),t[e+2]=Math.round(Math.min(255*t[e+2]/i,255)))}}(n),function(t,e){const i=4*e;for(let e=0;2*e<t.length;e+=i){let s=e,r=t.length-e-i,n=0;for(let e=0;e<i;e++)n=t[s],t[s]=t[r],t[r]=n,s++,r++}}(n,i),n}getColorAtPoint(t){const e=t.x/this.documentWidth,i=1-t.y/this.documentHeight,s=this.pixiApp.renderer.rootRenderTarget,r=s.resolution,n=s.size.width*r,a=s.size.height*r,o=Math.round(n*e),h=Math.round(a*i),l=this.getPixelData(o,h,1,1);return{r:l[0],g:l[1],b:l[2],a:l[3]/255}}dataURLtoBlob(t){const e=t.split(","),i=e[0],s=e[1],r=i.split(":")[1].split(";")[0],n=i.indexOf("base64")>=0?atob(s):unescape(s),a=n.length,o=new Uint8Array(a);for(let t=0;t<a;t++)o[t]=n.charCodeAt(t);return new Blob([o],{type:r})}getRenditionBlob(t="image/jpeg",e=.75){return this.getRenditionDataUrl(t,e).then(t=>this.dataURLtoBlob(t))}getRenditionDataUrl(t="image/jpeg",e=.75){return this.getExportCanvas().then(i=>i.toDataURL(t,e))}getExportCanvas(){const t=this.pixiApp.renderer.rootRenderTarget,e=t.resolution,i=t.size.width*e,s=t.size.height*e,r=this.getPixelData(0,0,i,s);this.bufferCanvas.width=i,this.bufferCanvas.height=s,this.bufferCanvasContext.clearRect(0,0,i,s);const n=this.bufferCanvasContext.getImageData(0,0,i,s);return n.data.set(r),this.bufferCanvasContext.putImageData(n,0,0),Promise.resolve(this.bufferCanvas)}renderFPS(){const t=this.fpsTimes||[],e=t.length,i=this.debugGraphic;let s=100,r=30,n=Math.round(PIXI.ticker.shared.FPS);e>100&&(n=Math.round((n+t[e-1]+t[e-2])/3)),e>120&&t.shift(),this.fpsTimes.push(n),this.fpsDisplayTime=(29*this.fpsDisplayTime+n)/30,this.debugText.text=` FPS ${Math.round(this.fpsDisplayTime)}`,i.clear(),i.beginFill(16777215),i.drawRect(0,0,344,34),i.beginFill(16711680),i.drawRect(100,0,240,30),i.beginFill(0),i.lineStyle(1,16777215),i.moveTo(s,0);for(var a=t.length-1;a>=2;a--){r=30-(t[a]+t[a-1]+t[a-2])/3/2,i.lineTo(s,r),s+=2}i.lineTo(s,0)}handleAnimationTick(t){const e=(Date.now()-this.animationStartTime)%this.totalAnimationDuration/this.totalAnimationDuration;this.currentAnimationProgress=e,this.currentGraph&&this.render(this.currentGraph,this.currentAnimationProgress)}handleImageLoaded(){this.pendingImageLoadCount--,0===this.pendingImageLoadCount&&this.pixiApp.stage.emit("loading-images-end")}handleImageLoading(){this.pendingImageLoadCount++,1===this.pendingImageLoadCount&&this.pixiApp.stage.emit("loading-images-begin")}isBoundsInDocument(t,e){const i=this.documentWidth,s=this.documentHeight,r=o.default.transformPoint(t.minX,t.minY,e),n=o.default.transformPoint(t.maxX,t.minY,e),a=o.default.transformPoint(t.maxX,t.maxY,e),h=o.default.transformPoint(t.minX,t.maxY,e),l=Math.min(r.x,n.x,a.x,h.x),c=Math.max(r.x,n.x,a.x,h.x),u=Math.min(r.y,n.y,a.y,h.y),d=Math.max(r.y,n.y,a.y,h.y);return!(c<0||d<0||l>i||u>s)}viewStateOfPGMNode(t,e,i,n,l,c=0){const u=s.viewModelDataForPgmNode(t,this.pixiApp.assetLoader),d=s.viewTypeForPgmNode(t),p=e?e.compositing:null,f=JSON.stringify(a.mapValues(u,t=>void 0===t?"":t&&t.encodeJson?t.encodeJson():t));let m=p?p.placement.asArray:h;const g=p?p.opacity:1,x=p?p.blendMode:r.PGMBlendModeEnum.Normal,y=o.default.multiply([],n,m),b=t.bounds,v="text"!==d||this.isBoundsInDocument(b,y),C=t.animations,P=!(!C||C.isEmpty);return{type:d,parentPath:l,path:`${l}:${t.entity}-${d}`,isVisible:v,hasAnimation:P,animations:C,index:c,placement:m,globalPlacement:y,opacity:g,blendMode:x,bounds:b,placementCacheKey:m.join(":"),placementCacheKeySupplement:"",cacheKey:f,cacheKeySupplement:"",data:u}}displayGraphPostorderTraversal(t,e,i,s,n,a,o){const h=this.viewStateOfPGMNode(t,e,i,n,s,o),l=h.isVisible;let c=!1;if(l&&t instanceof r.PGMComposite){let e=0;t.children.forEach((t,s)=>{const r=s-e,n=t.child,o=this.displayGraphPostorderTraversal(n,t,i,h.path,h.globalPlacement,a,r);o.didSubtreeChange&&(c=!0),o.isVisible||e++})}if(h.isDirtySubtree=c,l&&a(h,t),!c){const t=this.viewLookup[h.path];t&&(c=t.isDirty)}return{didSubtreeChange:c,isVisible:l}}removeViewById(t){const e=this.viewLookup[t];e&&(e.destroy(),delete this.viewLookup[t])}setWatermark(t){this.showWatermark=t,this.showWatermark&&!this.watermarkSprite?this.watermarkSprite=new PIXI.Sprite.from(u):!this.showWatermark&&this.watermarkSprite&&this.pixiApp.stage.removeChild(this.watermarkSprite),this.showWatermark&&(this.pixiApp.stage.addChild(this.watermarkSprite),this.watermarkSprite.setTransform(this.documentWidth-d/2,this.documentHeight-p/2,.5,.5,0,0,0,0,0))}setMaxRenderSize(t=1600,e=1600){this.maxRenderWidth=Math.round(t),this.maxRenderHeight=Math.round(e)}setBackgroundColor(t){this.pixiApp.renderer.backgroundColor=t.rgbAsInt}asyncRender(t,e,i){return this.renderQ=this.renderQ.then(()=>(this.setMaxRenderSize(e,i),this.render(t).then(()=>this.canvas)))}render(t,e=0){return new Promise((i,s)=>{this.fulfillRenderPromise(t,e,i,s)}).catch(()=>{})}renderToBuffer(t){return this.render(t).then(()=>this.pixiApp.renderToImage()).then(t=>t.buffer)}fulfillRenderPromise(t,e=0,i,r){if(this.currentGraph=t||this.currentGraph,null===this.currentGraph)return void r();this.documentWidth=this.currentGraph.bounds.width,this.documentHeight=this.currentGraph.bounds.height;const n=this,o=this.viewLookup,l=(this.pixiApp,Object.keys(o)),c=[],u=[],d=[],p=[],f=[],m=this.documentWidth/this.documentHeight,g=function(t,e,i){const s={width:t,height:e};return t/e>i?s.width=Math.round(s.height*i):s.height=Math.round(s.width/i),s}(this.maxRenderWidth,this.maxRenderHeight,m),x=g.width/this.documentWidth;this.currentDocumentAspect===m&&this.currentRenderScale===x||(this.currentRenderScale=x,this.currentDocumentAspect=m,this.pixiApp.renderer.resize(g.width,g.height),this.pixiApp.stage.scale.set(x),this.setWatermark(this.showWatermark)),this.displayGraphPostorderTraversal(this.currentGraph.root,null,e,"root",h,(t,e)=>{const i=t.path,r=l.indexOf(i);r>-1&&l.splice(r,1);let a=o[i];a||(a=s.viewInstanceForPgmNode(e,n),o[i]=a,c.push(a)),a.setState(t),a.isDirtyOrder&&d.push(a),("image"===a.type||a.isDirtyPlacement)&&p.push(a),a.isDirtyFilter&&f.push(a),a.isDirtyRender&&u.push(a)},null),l.forEach(this.removeViewById,this),c.forEach(t=>{const e=o[t.state.parentPath]||this.stageDO;t.setParent(e)},this),d.forEach(t=>{t.order()}),p.forEach(t=>{t.place()}),f.forEach(t=>{t.filter()});const y=u.length;if(0===y)window.requestAnimationFrame(i);else{const t=a.after(y,()=>{window.requestAnimationFrame(i)});u.forEach(e=>{e.render(t)})}}get canvas(){return this.pixiApp.view}get areaOfDocumentBounds(){return this.documentWidth*this.documentHeight}destroy(){this.ticker.remove(this.handleAnimationTick,this),Object.keys(this.viewLookup).forEach(this.removeViewById,this),this.pixiApp.destroyAll()}}},"/Amf":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("YLtl"),r=i("lzL7");let n=0;class a{constructor(t,e=new PIXI.Container){this.id=`viewid:${n++}`,this.isDirtyOrder=!1,this.isDirtyPlacement=!1,this.isDirtyRender=!1,this.isDirtyFilter=!1,this.isDestroyed=!1,this.children=[],this.filters=[],this._cacheKey="",this._placementCacheKey="",this.pixiApp=t.pixiApp,this.postRenderer=t,this.state={cacheKey:"",placementCacheKey:"",cacheKeySupplement:"",placementCacheKeySupplement:""},this.pixiDisplayObject=e,this.type=Object.getPrototypeOf(this).constructor.TYPE}static modelDataForPgmNode(t,e){return{}}static areaOfBoundsAtDocumentScale(t){if(!t.globalPlacement||!t.bounds)return 0;const e=r.default.decomposeScale(t.globalPlacement),i=t.bounds,s=i.maxX-i.minX,n=i.maxY-i.minY;return s*e.x*(n*e.y)}get globalScale(){return this.state.globalPlacement?r.default.decomposeScale(this.state.globalPlacement):{x:1,y:1}}get localScale(){return this.state.placement?r.default.decomposeScale(this.state.placement):{x:1,y:1}}get isDirty(){return this.isDirtyRender||this.isDirtyPlacement||this.isDirtyOrder}setState(t){const e=t.cacheKey+t.cacheKeySupplement,i=t.placementCacheKey+t.placementCacheKeySupplement;this.isDirtyRender=this._cacheKey!==e,this.isDirtyPlacement=this._placementCacheKey!==i,this.isDirtyOrder=this.state.index!==t.index,this.isDirtyFilter=this.state.opacity!==t.opacity||"filter"===this.type&&this.isDirtyRender,this._placementCacheKey=i,this._cacheKey=e,this.state=t}order(){this.pixiDisplayObject.parent.setChildIndex(this.pixiDisplayObject,this.state.index),this.isDirtyOrder=!1}place(){this.pixiDisplayObject.transform.setFromMatrix(new PIXI.Matrix(...this.state.placement)),this.isDirtyPlacement=!1}render(t){this.isDirtyRender=!1,t&&t()}filter(){if(1!==this.state.opacity){const t=new PIXI.filters.AlphaFilter;t.resolution=this.pixiApp.renderer.resolution,t.alpha=this.state.opacity,this.filters.push(t)}this.pixiDisplayObject.filters=this.filters,this.filters=[],this.isDirtyFilter=!1}bubble(t,e){this.pixiDisplayObject.emit(t,e),this.parent&&this.parent.bubble&&this.parent.bubble(t,e)}removeFromParent(){if(!this.parent)return;const t=this.id;s.remove(this.parent.children,e=>e.id===t),this.parent.pixiDisplayObject.removeChild(this.pixiDisplayObject),this.parent=void 0}setParent(t){!this.parent&&t||this.removeFromParent(),t&&(this.parent=t,t.children.push(this),t.pixiDisplayObject.addChild(this.pixiDisplayObject))}destroy(){this.removeFromParent(),this.isDestroyed=!0,this.pixiDisplayObject.filters&&(this.pixiDisplayObject.filters=null),this.pixiDisplayObject.destroy(),this.filters=[],this.state=null}}a.TYPE="post-display-object",e.default=a},"0gjg":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{static parseHexFromInt(t){var e=t.toString(16);return 1===e.length?"0"+e:e}static rgb2hex(t){return this.parseHexFromInt(Math.round(255*t.red))+this.parseHexFromInt(Math.round(255*t.green))+this.parseHexFromInt(Math.round(255*t.blue))}static rgba2css({red:t,green:e,blue:i,alpha:s=1}){return`rgba(${Math.round(255*t)},${Math.round(255*e)},${Math.round(255*i)},${s})`}static rgb2ValidCSSValues(t){return{red:Math.round(t.red),green:Math.round(t.green),blue:Math.round(t.blue),alpha:t.alpha||1}}static toCSS(t){if(!t)return"#000000";if(void 0!==t.red||void 0!==t.r){var e=void 0!==t.red?t.red:t.r,i=void 0!==t.green?t.green:t.g,r=void 0!==t.blue?t.blue:t.b,n=void 0!==t.alpha?t.alpha:t.a,a=this.rgb2ValidCSSValues({red:e,green:i,blue:r,alpha:n});return"rgba("+a.red+","+a.green+","+a.blue+","+(void 0===n?1:n)+")"}return"string"==typeof t&&6===t.length?"#"+t:"string"==typeof t&&t.match(new RegExp("^#[0-9a-fA-F]{6}$"))?t:"number"==typeof t?"#"+s.parseHexFromInt(t):"#000000"}static solidColor2Rgba(t){return t?{red:Math.floor(255*t.red),green:Math.floor(255*t.green),blue:Math.floor(255*t.blue),alpha:t.alpha}:null}}e.default=s},"213o":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("/Amf"),r=i("hxFN"),n=i("fziT"),a=i("5m7E"),o=i("pMCj"),h=i("JuUW"),l=i("LBjK"),c=i("3HR0"),u=i("au89");class d extends s.default{constructor(t){super(t),this.imageIsLoaded=!1,this.pixiDisplayObject.on("image-not-loaded",this.handleSubtreeImageLoading,this),this.pixiDisplayObject.on("image-loaded",this.handleSubtreeImageLoaded,this)}static modelDataForPgmNode(t){return{spec:t.spec}}handleSubtreeImageLoading(){this.imageIsLoaded=!1}handleSubtreeImageLoaded(){this.imageIsLoaded=!0,this.place(),this.filter()}place(){this.imageIsLoaded&&super.place()}filter(){const t=this.state.data.spec,e=this.pixiApp.renderer.resolution;if(void 0===t)return;const i=Object.getPrototypeOf(t).constructor.TYPE;switch(i){case"PGMDuotoneFilterSpec":this.filters.push(new n.default(t.intensity,[t.darkColor.red,t.darkColor.green,t.darkColor.blue],[t.lightColor.red,t.lightColor.green,t.lightColor.blue],e));break;case"PGMFillFilterSpec":this.filters.push(new a.default([t.filterColor.red,t.filterColor.green,t.filterColor.blue,t.filterColor.alpha],e));break;case"PGMScreenFilterSpec":this.filters.push(new o.default([t.filterColor.red,t.filterColor.green,t.filterColor.blue],e));break;case"PGMOverlayFilterSpec":this.filters.push(new h.default([t.filterColor.red,t.filterColor.green,t.filterColor.blue],e));break;case"PGMColorTransformFilterSpec":this.filters.push(new r.default([t.rdot.red,t.rdot.green,t.rdot.blue,t.rdot.alpha,t.gdot.red,t.gdot.green,t.gdot.blue,t.gdot.alpha,t.bdot.red,t.bdot.green,t.bdot.blue,t.bdot.alpha,t.adot.red,t.adot.green,t.adot.blue,t.adot.alpha],[t.bias.red,t.bias.green,t.bias.blue,t.bias.alpha],e));break;case"PGMColorAdjustmentFilterSpec":this.filters.push(new l.default(t,e));break;case"PGMBlurFilterSpec":const s=this.pixiApp.stage.scale.x,d=6*t.scaledBlur*s,p=t.edgeClamp;if(d>=1){const t=Math.max(4,Math.min(15,Math.floor(d/2))),i=d/5,s=new u.KawaseBlurFilter(i,t,p);s.padding=p?0:Math.ceil(6*i),i<2.5&&(s.resolution=e),this.filters.push(s)}break;case"PGMBlendFilterSpec":if(2!==t.weights.length)console.error("Unsupported multiple blend filter");else if(this.children.length!==t.weights.length)console.error("Weights and children are of different length");else{const i=this.children[0].imageSprite;i&&this.filters.push(new c.default(i,t.weights[0],t.weights[1],e))}break;default:console.error("apply unknown filter",i)}super.filter()}setState(t){t.cacheKeySupplement=`scale:${this.pixiApp.stage.scale.x}`,super.setState(t)}}d.TYPE="filter",e.default=d},"3HR0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\n// Params for the first texture.\nuniform float weight0;\nuniform sampler2D texture0;\nuniform mat3 filterMatrix0;\n\n// Params for the second texture -- provided by Pixi and the name is fixed.\n// Furthermore the uvCoords are built for this one, so no matrix needed.\nuniform float weight1;\nuniform sampler2D inputImageTexture;\n\nvoid main()\n{\n    vec2 texCoord0 = (filterMatrix0 * vec3(vTextureCoord, 1)).xy;\n    lowp vec4 c0 = texture2D(texture0, texCoord0);\n    lowp vec4 c1 = texture2D(inputImageTexture, vTextureCoord);\n    lowp vec4 c2 = weight0 * c0 + weight1 * c1;\n    lowp vec4 c3 = vec4(\n                    c2.r * c2.a * c1.a * c0.a,\n                    c2.g * c2.a * c1.a * c0.a,\n                    c2.b * c2.a * c1.a * c0.a,\n                    c2.a * c1.a * c0.a\n                    );\n    gl_FragColor = c3;\n}\n\n";class r extends PIXI.Filter{constructor(t,e,i,r=1){super(null,s,{weight0:{type:"float",value:e},weight1:{type:"float",value:i},texture0:{type:"sampler2d",value:t.texture},filterMatrix0:{type:"mat3",value:null}}),this.sprite0=t,this.resolution=r}apply(t,e,i,s){const r=new PIXI.Matrix;this.uniforms.filterMatrix0=t.calculateSpriteMatrix(r,this.sprite0),super.apply(t,e,i,s)}}e.default=r},"3hRk":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t){this.type=t}}e.FrameEvent=s;class r extends s{constructor(t,e,i,s,n){super(r.TYPE),this.frameIndex=t,this.time=e,this.buffer=i,this.width=s,this.height=n}}r.TYPE="frame",e.FrameDataEvent=r;class n extends s{constructor(){super(n.TYPE)}}n.TYPE="complete",e.FrameProductionCompleteEvent=n;class a extends s{constructor(){super(a.TYPE)}}a.TYPE="canceled",e.FrameProductionCanceledEvent=a},"3r1R":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("/Amf");class r extends s.default{}r.TYPE="page",e.default=r},"5m7E":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec4 filterColor;\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = vec4(\n                    filterColor.r * textureColor.a,\n                    filterColor.g * textureColor.a,\n                    filterColor.b * textureColor.a,\n                    textureColor.a\n                    );\n\n}\n";class r extends PIXI.Filter{constructor(t,e=1){super(null,s,{filterColor:{type:"vec4",value:new Float32Array(t)}}),this.resolution=e}}e.default=r},"6ygk":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("zrCk"),r=i("hhcO"),n=i("z8uW");e.PixiRenderer=class{constructor(t){this.imageService=new s.PixiImageService(this),this.liveViewService=new r.PixiLiveViewService(this),this.frameProductionService=new n.PixiFrameProductionService(this),this.host=t}}},"7Lnb":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{static registerPNGEncoder(t){s._pngEncoder=t}static registerJPEGEncoder(t){s._jpegEncoder=t}static getRegisteredPNGEncoder(){return s._pngEncoder}static getRegisteredJPEGEncoder(){return s._jpegEncoder}}s._pngEncoder=null,s._jpegEncoder=null,e.ImageEncoderRegistry=s},"7frk":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("CkXF"),r=i("wYSo");class n extends s.default{constructor(t){super(t),this.maskContainer=new PIXI.Container,this.maskContentTransform=new PIXI.Container,this.maskingSprite=new PIXI.Sprite,this.maskBacking=new PIXI.Graphics,this.maskTextureBounds=new PIXI.Rectangle(0,0,1,1),this.isInitialized=!1,this.isInRenderQ=!1,this.currentRenderWidth=0,this.currentRenderHeight=0}onFirstRenderInit(){this.maskContainer.addChild(this.maskBacking,this.maskContentTransform),this.pixiApp.stage.addChild(this.maskingSprite),this.artwork=this.pixiDisplayObject.children[0],this.mask=this.pixiDisplayObject.children[1],this.maskContentTransform.addChild(this.mask),this.artwork.mask=this.maskingSprite,this.mask.on("image-loaded",()=>this.updateMaskTexture())}deferredRender(){this.isDestroyed||this.updateMaskTexture(),this.isInRenderQ=!1,this.notifyLoaded()}renderMask(t,e){if(t===this.currentRenderWidth&&e===this.currentRenderHeight)return;const i=this.pixiApp.stage.scale.x;this.currentRenderWidth=t,this.currentRenderHeight=e,this.maskContainer.scale.set(i),this.maskBacking.clear(),this.maskBacking.beginFill(16777215),this.maskBacking.drawRect(0,0,t/i,e/i),this.maskBacking.endFill(),this.maskTextureBounds.width=t,this.maskTextureBounds.height=e}render(t){this.isInitialized||(this.onFirstRenderInit(),this.isInitialized=!0),this.updateMaskTexture(),!this.isInRenderQ&&r.default.instance.hasItemsInQueue()?(this.addLoadHandler(t),this.isInRenderQ=!0,r.default.instance.addLowPriority(this.deferredRender.bind(this)),super.render()):super.render(t)}updateMaskTexture(){this.renderMask(this.pixiApp.renderer.width,this.pixiApp.renderer.height),this.maskingSprite.texture&&this.maskingSprite.texture.destroy(!0);const t=new PIXI.Matrix(...this.state.globalPlacement);this.maskContentTransform.transform.setFromMatrix(t),this.maskingSprite.scale.set(1/this.pixiApp.stage.scale.x),this.maskingSprite.texture=this.pixiApp.renderer.generateTexture(this.maskContainer,PIXI.settings.SCALE_MODE,this.pixiApp.renderer.resolution,this.maskTextureBounds)}destroy(){this.maskingSprite.destroy(),this.maskBacking.destroy(),this.maskContainer.destroy(),this.maskContentTransform.destroy(),this.artwork=null,this.mask=null,super.destroy()}setState(t){t.cacheKeySupplement=`scale:${this.pixiApp.stage.scale.x},placement:${t.globalPlacement.join(",")}`,t.isDirtySubtree&&(t.cacheKeySupplement+=`,dirtySubtree:${Date.now()}`),super.setState(t)}}n.TYPE="luminosity-mask",e.default=n},CkXF:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("/Amf");class r extends s.default{constructor(t){super(t),this.onLoadHandlers=null}addLoadHandler(t){t&&(this.onLoadHandlers?this.onLoadHandlers.push(t):this.onLoadHandlers=[t])}notifyLoaded(){this.onLoadHandlers&&(this.onLoadHandlers.forEach(t=>t()),this.onLoadHandlers=null)}}e.default=r},"DAf/":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.UnintelligentAssetLoader=class{getURLforContentID(t){return t}};e.NoOpPixiLoaderPlugin=class{pre(t,e){e()}use(t,e){e()}}},IHB5:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("hUdH"),r=i("7frk"),n=i("eoxN"),a=i("S6GI"),o=i("vKWb"),h=i("3r1R"),l=i("vDtG"),c=i("kQtw"),u=i("213o"),d=i("UzQk"),p=c.default.TYPE,f={[s.default.TYPE]:s.default,[r.default.TYPE]:r.default,[n.default.TYPE]:n.default,[a.default.TYPE]:a.default,[o.default.TYPE]:o.default,[h.default.TYPE]:h.default,[l.default.TYPE]:l.default,[c.default.TYPE]:c.default,[u.default.TYPE]:u.default};function m(t){return f[g(t)]||f[p]}function g(t){let e=t.type.replace("pgm-","");return t instanceof d.PGMFilter&&"PGMMaskFilterSpec"===Object.getPrototypeOf(t.spec).constructor.TYPE&&(e="luminosity-mask"),e}e.viewTypeForPgmNode=g,e.viewInstanceForPgmNode=function(t,e){return new(m(t))(e)},e.viewModelDataForPgmNode=function(t,e){return m(t).modelDataForPgmNode(t,e)}},JuUW:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec3 filterColor;\n\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n\n    //lowp vec4 inputColor = (textureColor + 0.5) * 0.5;\n    lowp vec4 inputColor = textureColor;\n\n\n    gl_FragColor = vec4(\n                    (inputColor.r < 0.5 ? (2.0 * inputColor.r * filterColor.r) : (1.0 - 2.0 * (1.0 - inputColor.r) * (1.0 - filterColor.r))) * textureColor.a,\n                    (inputColor.g < 0.5 ? (2.0 * inputColor.g * filterColor.g) : (1.0 - 2.0 * (1.0 - inputColor.g) * (1.0 - filterColor.g))) * textureColor.a,\n                    (inputColor.b < 0.5 ? (2.0 * inputColor.b * filterColor.b) : (1.0 - 2.0 * (1.0 - inputColor.b) * (1.0 - filterColor.b))) * textureColor.a,\n                    textureColor.a\n                    );\n}\n";class r extends PIXI.Filter{constructor(t,e=1){super(null,s,{filterColor:{type:"vec3",value:new Float32Array(t)}}),this.resolution=e}}e.default=r},LBjK:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("UzQk"),r=i("p17C"),n="\nprecision highp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\n\nuniform sampler2D u_colorShadowsHighlightsSampler;\nuniform sampler2D u_threeChannelColorMapSampler;\nuniform mat4 u_colorMatrix;\n\nvoid main(void) {\n    vec4 color = texture2D(inputImageTexture, vTextureCoord);\n\n    color.r = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.r)).r;\n    color.g = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.g)).r;\n    color.b = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.b)).r;\n\n    float intensity = 0.3 * color.r + 0.59 * color.g + 0.11 * color.b;\n\n    float shDiff = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, intensity)).g - intensity;\n\n    color.rgb += shDiff;\n\n    color.rgb = clamp(color.rgb, 0.0, 1.0);\n\n    vec4 colorMatrixRGB = vec4(color.rgb, 1.0);\n\n    colorMatrixRGB = colorMatrixRGB * u_colorMatrix;\n\n    colorMatrixRGB = clamp(colorMatrixRGB, 0.0, 1.0);\n\n    colorMatrixRGB.r = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.r)).r;\n    colorMatrixRGB.g = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.g)).g;\n    colorMatrixRGB.b = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.b)).b;\n\n    gl_FragColor = vec4(\n        colorMatrixRGB.r * color.a,\n        colorMatrixRGB.g * color.a,\n        colorMatrixRGB.b * color.a,\n        color.a\n    );\n}\n";class a extends PIXI.Filter{constructor(t,e=1){var i=s.MoaAdjustments.computeColorMaps(t),a=new Uint8ClampedArray(1024);for(let t=0;t<256;t++){const e=4*t;a[e]=i.colorMap[t]+.5|0,a[e+1]=i.sMap[t]+i.hMap[t]-t+.5|0,a[e+2]=0,a[e+3]=255}for(let t=0;t<4;t++)i.cm.push(0);var o=new Uint8ClampedArray(1024);for(let t=0;t<256;t++){const e=4*t;o[e]=i.threeChannelColorMap[0][t],o[e+1]=i.threeChannelColorMap[1][t],o[e+2]=i.threeChannelColorMap[2][t],o[e+3]=255}const h=new PIXI.Container,l=r.default.getRGBADataAsSprite(1,256,a,h),c=r.default.getRGBADataAsSprite(1,256,o,h),u=i.cm;super(null,n,{u_colorShadowsHighlightsSampler:{type:"sampler2D",value:l.texture},u_threeChannelColorMapSampler:{type:"sampler2D",value:c.texture},u_colorMatrix:{type:"mat4",value:new Float32Array(u)}}),this.resolution=e,this.container=h,this.shadowHighlightSprite=l,this.threeChannelSprite=c}destroy(){this.shadowHighlightSprite.destroy(),this.threeChannelSprite.destroy(),this.container.destroy(),this.shadowHighlightSprite=null,this.threeChannelSprite=null,this.container=null}}e.default=a},Lkow:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i("kSzJ");const s=i("6ygk"),r=i("Xw6L");e.WebAssetLoader=class{constructor(t){this.urlBuilder=t}getURLforContentID(t){return this.urlBuilder.decodeUrl(t)}};class n extends s.PixiRenderer{constructor(){super(new r.PixiWebHost)}}e.PixiJSRenderer=n;const a=i("xGui");e.PixiJSApp=a},RyLA:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("0gjg"),r=.5522848;e.default=class{constructor(t,e){this.ctx=t,this.colorTable=e,this.filled=!1,this.ctx.beginPath()}beginGroup(){}endGroup(){}beginClipGroup(t){}endClipGroup(){}fill(t,e){}stroke(t,e,i){this.ctx.lineWidth=i,e=e||this.colorTable.color(t),this.ctx.strokeStyle=s.default.toCSS(s.default.solidColor2Rgba(e)),this.ctx.stroke()}rectangle(t,e,i,s){this.ctx.rect(t,e,i-t,s-e)}ellipse(t,e,i,s){var n=i-t,a=s-e,o=n/2*r,h=a/2*r,l=t+n/2,c=e+a/2;this.ctx.moveTo(t,c),this.ctx.bezierCurveTo(t,c-h,l-o,e,l,e),this.ctx.bezierCurveTo(l+o,e,i,c-h,i,c),this.ctx.bezierCurveTo(i,c+h,l+o,s,l,s),this.ctx.bezierCurveTo(l-o,s,t,c+h,t,c),this.ctx.closePath()}newPath(t,e,i,s,r){this.ctx.beginPath(),this.fillRule=t,this.endCap=e,this.join=i,this.strokeWt=s,this.miterLimit=r}moveTo(t,e){this.ctx.moveTo(t,e)}lineTo(t,e){this.ctx.lineTo(t,e)}cubicBezier(t,e,i,s,r,n){this.ctx.bezierCurveTo(t,e,i,s,r,n)}quadraticBezier(t,e,i,s){this.ctx.quadraticCurveTo(t,e,i,s)}closePath(){this.ctx.closePath()}done(){}}},S6GI:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("/Amf");class r extends s.default{constructor(t){super(t,new PIXI.Graphics)}render(t){const e=this.pixiDisplayObject,i=this.state.data;e.clear(),e.rotation=i.rotation,e.beginFill(i.color),e.drawRect(0,0,i.width,i.height),e.endFill(),e.position.set(i.x,i.y),super.render(t)}}r.TYPE="rectangle",e.default=r},Xw6L:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("jsS/");e.PixiWebHost=class{constructor(){}createPixiApp(t,e){return new s.PixiWebApplication(t,e)}}},bNrw:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=[1,0,0,1,0,0],r=1024;function n(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}class a{constructor(){this.width=1,this.height=1,this.tracking=0,this.fontSize=0,this.strokeWidth=0,this.fillColor="rgba(0, 0, 0, 1)",this.strokeColor="rgba(0, 0, 0, 0)",this.text="",this.font="",this.transform=s,this.isPowerOfTwo=!0,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=10,this.canvas.height=10,this.context.textAlign="left",this.context.textBaseline="alphabetic"}begin(){return this.context.save(),this}end(){return this.context.restore(),this}setSize(t,e){return this.width=Math.ceil(t),this.height=Math.ceil(e),this}setTransform(t){return this.transform=t,this}setText(t){return this.text=t,this}setTracking(t){return this.tracking=t||0,this}setFontSize(t){return this.fontSize=t,this}setFont(t){return this.font=t,this}setFillColor(t){return this.fillColor=t,this}setStrokeColor(t){return this.strokeColor=t,this}setStrokeWidth(t){return this.strokeWidth=t,this}getCanvas(){return this.canvas}disable(){return this.canvas.width=1,this.canvas.height=1,this}destroy(){return this.canvas=null,this.context=null,this}render(){const t=this.width>r,e=this.height>r;this.isPowerOfTwo=!t&&!e,this.canvas.width=t?this.width:n(this.width),this.canvas.height=e?this.height:n(this.height),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.transform.apply(this.context,this.transform),this.context.font=this.font,this.fillColor&&(this.context.fillStyle=this.fillColor),this.strokeColor&&(this.context.strokeStyle=this.strokeColor),this.strokeWidth&&(this.context.lineWidth=this.strokeWidth,this.strokeWidth/this.fontSize>.06&&(this.context.lineJoin="round"),this.strokeWidth/this.fontSize>.02?this.context.miterLimit=2:this.strokeWidth>.01&&(this.context.miterLimit=5));let i=0,s=0;const a=this.context.lineWidth/2;if(0===this.tracking)this.strokeWidth?(i+=a,s-=a,this.fillColor?(this.context.strokeText(this.text,i,s),this.context.fillText(this.text,i,s)):(this.context.strokeText(this.text,i,s),this.context.globalAlpha=1,this.context.globalCompositeOperation="destination-out",this.context.fillText(this.text,i,s),this.context.globalCompositeOperation="source-over")):this.context.fillText(this.text,i,s);else{const t=this.text.length;for(var o=0;o<t;o++){const t=this.text.charAt(o);if(this.strokeWidth){const e=i+a,r=s-a;this.fillColor?(this.context.strokeText(t,e,r),this.context.fillText(t,e,r)):(this.context.strokeText(t,e,r),this.context.globalAlpha=1,this.context.globalCompositeOperation="destination-out",this.context.fillText(t,e,r),this.context.globalCompositeOperation="source-over")}else this.context.fillText(t,i,s);i+=this.context.measureText(t).width,i+=this.tracking*this.fontSize}}return this}}a.instance=new a,e.default=a},eoxN:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("/Amf"),r=i("xtw7"),n=i("0gjg"),a=i("lzL7");class o extends s.default{constructor(t){super(t),this.sprite=new PIXI.Sprite,this.textureSource=new r.default,this.transform=new PIXI.Transform,this.textureSharpness=1,this.shouldClipRenderToDocumentBounds=!1,this.sprite.texture=PIXI.Texture.fromCanvas(this.textureSource.getCanvas()),this.pixiDisplayObject.addChild(this.sprite)}static modelDataForPgmNode(t){const e=t.bounds,i=t.paths.reduce((t,e)=>("none"===e.pathFillType&&e.pathStrokeWeight>0&&(t=Math.max(t,e.pathStrokeWeight/2)),t),0);return{color:t.color?n.default.rgba2css(t.color):"#0099ff",paths:t.paths,x:e.minX,y:e.minY,width:e.width,height:e.height,paddingX:i,paddingY:i}}place(){const t=a.default.decompose(this.state.placement),e=t.position,i=t.rotation,s=t.scale,r=t.skew;this.shouldClipRenderToDocumentBounds?this.pixiDisplayObject.setTransform(e.x,e.y,s.x,s.y,i,r.x,r.y,0,0):this.pixiDisplayObject.setTransform(e.x,e.y,1,1,i,r.x,r.y,0,0),this.isDirtyPlacement=!1}renderShapeAtOwnBounds(){const t=this.state.data,e=this.pixiApp.stage.scale.x,i=this.globalScale,s=this.localScale,r=i.x,n=i.y,a=s.x,o=s.y,h=e*this.textureSharpness*this.pixiApp.renderer.resolution,l=h*r,c=h*n,u=(t.x-t.paddingX)*a,d=(t.y-t.paddingY)*o,p=a*(1/l),f=o*(1/c),m=t.width*l+t.paddingX*l*2,g=t.height*c+t.paddingY*c*2,x=[l,0,0,c,l*(t.paddingX-t.x),c*(t.paddingY-t.y)];this.textureSource.begin().setSize(m,g).setTransform(x).setColor(t.color).setPaths(t.paths).render().end(),this.sprite.texture.update(),this.sprite.setTransform(u,d,p,f,0,0,0,0,0)}renderShapeClippedToDocumentBounds(){const t=this.state.data,e=this.postRenderer.documentWidth,i=this.postRenderer.documentHeight,s=this.pixiApp.stage.scale.x*this.textureSharpness*this.pixiApp.renderer.resolution,r=e*s,n=i*s,o=a.default.getScalingTransform(s,s),h=a.default.multiply([],o,this.state.globalPlacement),l=a.default.invert([],h);this.textureSource.begin().setSize(r,n).setTransform(h).setColor(t.color).setPaths(t.paths).render().end(),this.sprite.texture.update();const c=a.default.decompose(l),u=c.position,d=c.rotation,p=c.scale,f=c.skew;this.sprite.setTransform(u.x,u.y,p.x,p.y,d,f.x,f.y,0,0)}render(t){this.shouldClipRenderToDocumentBounds?this.renderShapeClippedToDocumentBounds():this.renderShapeAtOwnBounds(),super.render(t)}setState(t){if(!t.bounds)return;this.shouldClipRenderToDocumentBounds=this.postRenderer.areaOfDocumentBounds<s.default.areaOfBoundsAtDocumentScale(t);const e=a.default.decomposeScale(t.globalPlacement);t.cacheKeySupplement=":"+this.pixiApp.stage.scale.x+":"+Math.round(100*e.x)/100+":"+Math.round(100*e.y)/100,this.shouldClipRenderToDocumentBounds&&(t.cacheKeySupplement+=":"+t.globalPlacement.join(",")),super.setState(t)}destroy(){this.sprite.destroy(),this.textureSource.destroy(),super.destroy()}}o.TYPE="shape",e.default=o},fziT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform float intensity;\nuniform vec3 firstColor;\nuniform vec3 secondColor;\n\nconst mediump vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvec4 duotone(vec4 colorIn) {\n    float luminance = dot(colorIn.rgb, luminanceWeighting);\n    lowp vec4 outputColor = vec4( mix(firstColor.rgb, secondColor.rgb, luminance), colorIn.a);\n    outputColor.r = outputColor.r * colorIn.a;\n    outputColor.g = outputColor.g * colorIn.a;\n    outputColor.b = outputColor.b * colorIn.a;\n    return vec4( mix(colorIn.rgb, outputColor.rgb, intensity), colorIn.a);\n}\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = duotone(textureColor);\n}\n";class r extends PIXI.Filter{constructor(t,e,i,r=1){super(null,s,{intensity:{type:"float",value:t},firstColor:{type:"vec3",value:new Float32Array(e)},secondColor:{type:"vec3",value:new Float32Array(i)}}),this.resolution=r}}e.default=r},hUdH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("CkXF"),r=i("sodY");var n;!function(t){t.NOT_LOADED="not_loaded",t.LOADING="loading",t.LOADED="loaded"}(n||(n={}));const a=r.default.instance;class o extends s.default{constructor(t){super(t),this.imageSprite=null,this.status=n.NOT_LOADED,this.currentUrl=null}static modelDataForPgmNode(t,e){return{url:e.getURLforContentID(t.contentID),top:t.bounds.minY,left:t.bounds.minX,width:t.bounds.width,height:t.bounds.height}}handleTextureLoaded(t){this.isDestroyed||(this.status=n.LOADED,this.imageSprite?this.imageSprite.texture=t:(this.imageSprite=new PIXI.Sprite(t),this.pixiDisplayObject.addChild(this.imageSprite)),this.place(),this.bubble("image-loaded"),this.notifyLoaded())}load(){this.bubble("image-loading"),this.status=n.LOADING,a.load(this.state.data.url,this.handleTextureLoaded.bind(this),this.pixiApp.assetLoader)}place(){if(this.status!==n.LOADED)return;const t=this.globalScale,e=this.pixiApp.stage.scale.x,i=this.pixiApp.stage.scale.x,s=e*t.x,r=i*t.y,a=this.state.globalPlacement[4],o=this.state.globalPlacement[5],h=this.imageSprite.texture.width,l=this.imageSprite.texture.height,c=this.state.data.width/h,u=this.state.data.height/l,d=e*a,p=i*o,f=(Math.floor(d)-d)/s,m=(Math.floor(p)-p)/r,g=h*s,x=l*r,y=Math.ceil(g)/g,b=Math.ceil(x)/x;this.imageSprite.scale.x=y*c,this.imageSprite.scale.y=b*u,this.imageSprite.position.x=f,this.imageSprite.position.y=m,super.place()}render(t){!t||this.status!==n.NOT_LOADED&&this.status!==n.LOADING||this.addLoadHandler(t),this.isDirtyRender&&this.status===n.NOT_LOADED?this.load():this.status===n.LOADED&&t&&t(),super.render()}setState(t){t.data&&this.currentUrl!==t.data.url&&(this.currentUrl=t.data.url,this.status=n.NOT_LOADED,this.bubble("image-not-loaded")),t.placementCacheKeySupplement=`${t.globalPlacement.join(",")}:${this.pixiApp.stage.scale.x}`,super.setState(t)}destroy(){this.imageSprite&&this.imageSprite.destroy(),super.destroy()}}o.TYPE="image",e.default=o},hhcO:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("+5yP");class r{constructor(t,e,i,r=!1,n=!1){this.api=t,this.headless=new s.default(t.host,e,i,r,n)}destroy(){this.headless.destroy()}getCanvas(){return this.headless.canvas}setDimensions(t,e){this.headless.setMaxRenderSize(t,e),this.headless.render(this.headless.currentGraph)}render(t){return this.headless.render(t)}asyncRender(t,e,i){return this.headless.asyncRender(t,e,i)}setWatermark(t){return this.headless.setWatermark(t)}getColorAtPoint(t){return this.headless.getColorAtPoint(t)}getRenditionBlob(t="image/jpeg",e=.75){return this.headless.getRenditionBlob(t,e)}getRenditionDataUrl(t="image/jpeg",e=.75){return this.headless.getRenditionDataUrl(t,e)}}e.PixiLiveViewService=class{constructor(t){this.api=t}createView(t=1,e=!1,i=!1){return new r(this.api,t,this.api.assetLoader,e,i)}}},hxFN:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform mat4 colorMatrix;\nuniform vec4 colorBias;\n\nvec4 colorTransform(vec4 colorIn) {\n    return colorMatrix * colorIn + colorBias;\n}\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = colorTransform(textureColor);\n}\n";class r extends PIXI.Filter{constructor(t,e,i=1){super(null,s,{colorMatrix:{type:"mat4",value:new Float32Array(t)},colorBias:{type:"vec4",value:new Float32Array(e)}}),this.resolution=i}}e.default=r},"jsS/":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});class i extends PIXI.Application{constructor(t,e){super(t),this.assetLoader=e}setSize(t,e){this.view.width=t,this.view.height=e}render(){return new Promise((t,e)=>{this.renderer.once("postrender",()=>{t()}),this.renderer.render(this.stage)})}renderToImage(){return new Promise((e,i)=>{this.renderer.once("postrender",()=>{const i=this.view.width,s=this.view.height;let r;if(this.renderer instanceof PIXI.WebGLRenderer){const e=this.renderer.gl;r=t.alloc(i*s*4),e.readPixels(0,0,i,s,e.RGBA,e.UNSIGNED_BYTE,r),function(t,e,i){for(var s=0;s<i/2;s++){let n=s*e*4,a=(i-1-s)*e*4;for(var r=4*e;r>0;r--,n++,a++){let e=t[n];t[n]=t[a],t[a]=e}}}(r,i,s)}else{const e=this.renderer.rootContext.getImageData(0,0,i,s).data;r=t.from(e.buffer)}e({buffer:r,width:i,height:s})}),this.renderer.render(this.stage)})}destroyAll(){this.destroy(!0,{children:!0,texture:!0,baseTexture:!0})}}e.PixiWebApplication=i}).call(this,i("HDXh").Buffer)},kQtw:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("/Amf");class r extends s.default{}r.TYPE="group",e.default=r},lzL7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{static get defaultMatrix(){return[1,0,0,1,0,0]}static getScalingTransform(t,e){return[t,0,0,e,0,0]}static scale(t,e,i){const s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],h=e[5],l=i[0],c=i[1];return t[0]=s*l,t[1]=r*l,t[2]=n*c,t[3]=a*c,t[4]=o,t[5]=h,t}static multiply(t,e,i){const s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],h=e[5],l=i[0],c=i[1],u=i[2],d=i[3],p=i[4],f=i[5];return t[0]=s*l+n*c,t[1]=r*l+a*c,t[2]=s*u+n*d,t[3]=r*u+a*d,t[4]=s*p+n*f+o,t[5]=r*p+a*f+h,t}static transformPoint(t,e,i){return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}static translate(t,e,i){const s=e[0],r=e[1],n=e[2],a=e[3],o=e[4],h=e[5],l=i[0],c=i[1];return t[0]=s,t[1]=r,t[2]=n,t[3]=a,t[4]=s*l+n*c+o,t[5]=r*l+a*c+h,t}static invert(t,e){const i=e[0],s=e[1],r=e[2],n=e[3],a=e[4],o=e[5];let h=i*n-s*r;return h?(h=1/h,t[0]=n*h,t[1]=-s*h,t[2]=-r*h,t[3]=i*h,t[4]=(r*o-n*a)*h,t[5]=(s*a-i*o)*h,t):null}static decompose(t){const e=t[0],i=t[1],s=t[2],r=t[3],n=t[4],a=t[5],o=-Math.atan2(-s,r),h=Math.atan2(i,e),l=Math.abs(o+h),c=l<1e-5||Math.abs(2*Math.PI-l)<1e-5;return{skew:{x:c?0:o,y:c?0:h},scale:{x:Math.sqrt(e*e+i*i),y:Math.sqrt(s*s+r*r)},position:{x:n,y:a},rotation:c?h:0}}static decomposeScale(t){const e=t[0],i=t[1],s=t[2],r=t[3];return{x:Math.sqrt(e*e+i*i),y:Math.sqrt(s*s+r*r)}}}},p17C:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{}e.default=class{static getRGBADataAsSprite(t,e,i,r){const n=document.createElement("canvas");n.width=t,n.height=e;const a=n.getContext("2d"),o=a.getImageData(0,0,t,e);if(i.length!==o.data.length)throw new s;o.data.set(i),a.putImageData(o,0,0);const h=PIXI.Sprite.from(n);return r.addChild(h),h}}},pMCj:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s="\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec3 filterColor;\n\nconst highp vec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n\tlowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n\t//float luminance = dot(textureColor.rgb, W);\n\n  gl_FragColor = vec4(\n\t\t(1.0 - ((1.0 - textureColor.r) * (1.0 - filterColor.r))) * textureColor.a,\n\t\t(1.0 - ((1.0 - textureColor.g) * (1.0 - filterColor.g))) * textureColor.a,\n\t\t(1.0 - ((1.0 - textureColor.b) * (1.0 - filterColor.b))) * textureColor.a,\n\t\ttextureColor.a);\n}\n";class r extends PIXI.Filter{constructor(t,e=1){super(null,s,{filterColor:{type:"vec3",value:new Float32Array(t)}}),this.resolution=e}}e.default=r},sodY:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.textureCache={},this.deferredCallbacks={}}load(t,e,i){if(this.textureCache[t])return void e(this.textureCache[t]);if(this.deferredCallbacks[t])return void this.deferredCallbacks[t].push(e);this.deferredCallbacks[t]=[e];const s=new PIXI.loaders.Loader;i.loaderPlugins&&i.loaderPlugins.forEach(t=>{t.pre&&s.pre(t.pre.bind(t)),t.use&&s.use(t.use.bind(t))}),s.add({url:t,xhrType:"blob"}).load(()=>{const e=s.resources[t].texture;this.textureCache[t]=e,this.deferredCallbacks[t].forEach(t=>{t(e)}),delete this.deferredCallbacks[t],s.reset()})}reset(){this.textureCache={},this.deferredCallbacks={}}}s.instance=new s,e.default=s},vDtG:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("/Amf"),r=i("lzL7"),n=i("xtw7");class a extends s.default{constructor(t){super(t),this.maskSprite=null,this.maskSpriteTexture=null,this.maskGraphics=null,this.stageScale=1,this.maskTransform=new PIXI.Transform}static modelDataForPgmNode(t){const e=t.clipPaths,i=t.clipBounds;let s;return s=!e||0===e.length||1===e.length&&"rect"===e[0].type?"rect":1===e.length&&"ellipse"===e[0].type?"ellipse":"arbitrary",{clipPaths:e,height:i.height,type:s,width:i.width,x:i.minX,y:i.minY}}place(){super.place(),this.pixiDisplayObject.position.x=this.maskTransform.position.x*this.stageScale,this.pixiDisplayObject.position.y=this.maskTransform.position.y*this.stageScale,this.pixiDisplayObject.rotation=this.maskTransform.rotation,this.pixiDisplayObject.scale.x=this.maskTransform.scale.x*this.stageScale,this.pixiDisplayObject.scale.y=this.maskTransform.scale.y*this.stageScale}render(t){const e=this.state.data,i=e.clipPaths;if("ellipse"===e.type){const t=this.installMaskGraphics();t.clear(),t.beginFill(0),t.drawEllipse(e.x,e.y,e.width,e.height)}else{this.installMaskSprite();const t=this.postRenderer.documentWidth,e=this.postRenderer.documentHeight,s=this.pixiApp.stage.scale.x*this.pixiApp.renderer.resolution,n=t*s,a=e*s,o=r.default.getScalingTransform(s,s),h=r.default.multiply([],o,this.state.globalPlacement),l=r.default.invert([],h);this.maskSpriteTexture.begin().setSize(n,a).setTransform(h).setColor("white").setPaths(i).render().end(),this.maskSprite.texture.update();const c=r.default.decompose(l),u=c.position,d=c.rotation,p=c.scale,f=c.skew;this.maskSprite.setTransform(u.x,u.y,p.x,p.y,d,f.x,f.y,0,0)}super.render(t)}destroy(){this.teardownMaskGraphics(),this.teardownMaskSprite(),super.destroy()}setState(t){this.maskTransform=new PIXI.Matrix(...t.placement).decompose(this.maskTransform),t.placementCacheKeySupplement=`scale:${this.pixiApp.stage.scale.x}`,t.cacheKeySupplement+=":"+t.globalPlacement.join(","),super.setState(t)}installMaskSprite(){this.teardownMaskGraphics(),this.maskSprite||(this.maskSprite=new PIXI.Sprite,this.maskSpriteTexture=new n.default,this.maskSprite.texture=PIXI.Texture.fromCanvas(this.maskSpriteTexture.getCanvas()),this.pixiDisplayObject.mask=this.maskSprite,this.pixiDisplayObject.addChild(this.maskSprite))}teardownMaskSprite(){this.maskSprite&&(this.pixiDisplayObject.removeChild(this.maskSprite),this.pixiDisplayObject.mask=null,this.maskSprite.destroy(),this.maskSprite=null),this.maskSpriteTexture&&(this.maskSpriteTexture.destroy(),this.maskSpriteTexture=null)}installMaskGraphics(){return this.teardownMaskSprite(),this.maskGraphics||(this.maskGraphics=new PIXI.Graphics,this.pixiDisplayObject.mask=this.maskGraphics,this.pixiDisplayObject.addChild(this.maskGraphics)),this.maskGraphics}teardownMaskGraphics(){this.maskGraphics&&(this.pixiDisplayObject.removeChild(this.maskGraphics),this.pixiDisplayObject.mask=null,this.maskGraphics.destroy(),this.maskGraphics=null)}}a.TYPE="clip",e.default=a},vKWb:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("CkXF"),r=i("0gjg"),n=i("bNrw"),a=i("wYSo"),o=i("lzL7"),h=n.default.instance;var l;!function(t){t[t.VIEWPORT_BOUNDED_TEXTURE=0]="VIEWPORT_BOUNDED_TEXTURE",t[t.NODE_BOUNDED_TEXTURE=1]="NODE_BOUNDED_TEXTURE",t[t.UNUSABLE_TEXTURE=2]="UNUSABLE_TEXTURE",t[t.NO_TEXTURE=3]="NO_TEXTURE"}(l||(l={}));class c extends s.default{constructor(t){super(t),this.isRendered=!1,this.isInRenderQueue=!1,this.textureOffset={x:0,y:0},this.textureFontSize=void 0,this.renderedFontSize=void 0,this.textureSharpness=1,this.textureCacheKey=void 0,this.priorPlacedTracking=void 0,this.textureState=l.NO_TEXTURE,this.pendingTextureState=l.NO_TEXTURE,this.renderedTextureGlobalPlacement=o.default.defaultMatrix,this.baseTexture=new PIXI.BaseTexture(h.getCanvas()),this.baseTexture.mipmap=!1,this.texture=new PIXI.Texture(this.baseTexture),this.sprite=new PIXI.Sprite(this.texture),this.pixiDisplayObject.addChild(this.sprite)}static modelDataForPgmNode(t){const e=t.style,i=e.font,s=t.bounds;return{color:e.fillColor?`#${r.default.rgb2hex(e.fillColor)}`:null,cssName:i.cssName||i.family,fontSize:e.size,fontStyle:i.style||"",fontWeight:i.weight||"normal",height:s.height,left:s.minX,strokeColor:e.strokeColor?`#${r.default.rgb2hex(e.strokeColor)}`:null,strokeWidth:e.strokeWidth,text:t.text,top:s.minY,tracking:e.tracking,width:s.width}}destroy(){this.sprite.destroy({children:!0,texture:!0,baseTexture:!0}),super.destroy()}place(){super.place(),this.updateSpritePlacement()}render(t){this.addLoadHandler(t),this.textureState===l.NO_TEXTURE||this.textureState===l.UNUSABLE_TEXTURE?this.updateTexture():this.isInRenderQueue||(this.isInRenderQueue=!0,a.default.instance.addNormalPriority(this.updateTexture.bind(this))),super.render()}updateTextureWithinDocumentBounds(){this.textureSharpness=1;const t=this.state.data,e=this.postRenderer.documentWidth,i=this.postRenderer.documentHeight,s=this.pixiApp.stage.scale.x*this.textureSharpness*this.pixiApp.renderer.resolution,r=e*s,n=i*s,a=o.default.getScalingTransform(s,s),l=t.height-t.strokeWidth/2,c=[1,0,0,1,-t.strokeWidth/2,l],u=o.default.multiply([],a,this.state.globalPlacement),d=o.default.multiply([],u,c);this.textureFontSize=t.fontSize,this.textureOffset.x=0,this.textureOffset.y=0,this.renderedTextureGlobalPlacement=this.state.globalPlacement,h.setSize(r,n).setTransform(d).setFontSize(t.fontSize).setFont(`${t.fontStyle} ${t.fontWeight} ${t.fontSize}px ${t.cssName}`).setStrokeWidth(t.strokeWidth)}updateTextureWithinNodeBounds(){this.textureSharpness=this.state.data.fontSize<100?1.333:1;const t=this.state.data,e=this.textureSharpness*this.pixiApp.renderer.resolution,i=this.pixiApp.stage.scale.x*e,s=t.fontSize*i,r=t.strokeWidth*i,n=s<16?Math.ceil(s):Math.ceil(2*s)/2,a=t.strokeWidth?Math.max(.1*e,Math.round(r*(n/s)*2)/2):0,o=n/t.fontSize,l=t.width*o,c=t.height*o,u=l+2*c,d=2.5*c,p=[1,0,0,1,c,1.5*c];this.textureFontSize=n,this.textureOffset.x=-c,this.textureOffset.y=.5*-c,h.setSize(u,d).setTransform(p).setFontSize(n).setFont(`${t.fontStyle} ${t.fontWeight} ${n}px ${t.cssName}`).setStrokeWidth(a)}updateTexture(){if(this.isInRenderQueue=!1,this.isDestroyed)return;const t=this.state.data,e=this.baseTexture,i=this.texture;h.begin().setText(t.text).setFillColor(t.color).setStrokeColor(t.strokeColor).setTracking(t.tracking),this.pendingTextureState===l.VIEWPORT_BOUNDED_TEXTURE?this.updateTextureWithinDocumentBounds():this.updateTextureWithinNodeBounds(),h.render().end(),e.realWidth=e.source.width,e.realHeight=e.source.height,e.width=e.realWidth/e.resolution,e.height=e.realHeight/e.resolution,e.isPowerOfTwo=h.isPowerOfTwo,i._updateID++,i._frame.width=e.width,i._frame.height=e.height,this.pixiApp.renderer.textureManager.updateTexture(e),this.textureState=this.pendingTextureState,this.updateSpritePlacement(),this.notifyLoaded()}updateSpritePlacement(){const t=this.state.data,e=t.fontSize,i=e/this.textureFontSize;if(this.textureState===l.NODE_BOUNDED_TEXTURE){const e=t.left+this.textureOffset.x*i,s=t.top+this.textureOffset.y*i;this.sprite.setTransform(e,s,i,i,0,0,0,0,0)}else if(this.textureState===l.VIEWPORT_BOUNDED_TEXTURE){const t=this.pixiApp.stage.scale.x*this.textureSharpness*this.pixiApp.renderer.resolution,i=o.default.getScalingTransform(t,t),s=o.default.multiply([],i,this.renderedTextureGlobalPlacement),r=o.default.invert([],s),n=e/this.textureFontSize;let a=r;if(1!==n){const t=o.default.getScalingTransform(n,n);a=o.default.multiply([],r,t),a[4]*=n,a[5]*=n}const h=o.default.decompose(a),l=h.position,c=(h.rotation,h.scale),u=h.skew;this.sprite.setTransform(l.x,l.y,c.x,c.y,h.rotation,u.x,u.y,0,0)}}setState(t){if(!t||!t.bounds)return;const e=this.state.data,i=!e||e.tracking!==t.data.tracking,r=!e||e.text!==t.data.text,n=(!e||(e.fontSize,t.data.fontSize),this.postRenderer.areaOfDocumentBounds),a=o.default.decomposeScale(t.globalPlacement),h=n<4*s.default.areaOfBoundsAtDocumentScale(t),c=r||i;this.pendingTextureState=h?l.VIEWPORT_BOUNDED_TEXTURE:l.NODE_BOUNDED_TEXTURE,c&&(this.textureState=l.UNUSABLE_TEXTURE),t.placementCacheKeySupplement=`globalPlacementScale:${a.x},fontSize:${t.data.fontSize}`,t.cacheKeySupplement=`stageScale:${this.pixiApp.stage.scale.x}`,h&&(t.cacheKeySupplement+=`placement:${t.globalPlacement.join(",")}`),super.setState(t)}}c.TYPE="text",e.default=c},wYSo:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.tailQ=[],this.primaryQ=[],this.MAX_WORK_TIME_MS=4,this.MAX_BATCH_SIZE=6,this.isRunning=!1}processTailQ(){this.primaryQ.length>0?this.processQ():this.tailQ.length>0?(this.tailQ.shift()(),setTimeout(this.processTailQ.bind(this),0)):this.isRunning=!1}processQ(){const t=Date.now();let e,i=0,s=this.primaryQ.length;for(;s>0&&(i++,!(i%this.MAX_BATCH_SIZE==0&&Date.now()-t>=this.MAX_WORK_TIME_MS))&&(e=this.primaryQ.shift());)e(),s--;s>0?setTimeout(this.processQ.bind(this),0):this.processTailQ()}run(){this.isRunning||(this.isRunning=!0,setTimeout(this.processQ.bind(this),0))}addNormalPriority(t){this.primaryQ.push(t),this.run()}addHighPriority(t){this.primaryQ.unshift(t),this.run()}addLowPriority(t){this.tailQ.push(t),this.run()}hasItemsInQueue(){return this.primaryQ.length>0}}s.instance=new s,e.default=s},xGui:function(t,e,i){"use strict";function s(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),s(i("DAf/")),s(i("3hRk")),s(i("6ygk")),s(i("7Lnb"))},xtw7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("RyLA");e.default=class{constructor(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.scaleX=1,this.scaleY=1,this.offsetX=0,this.offsetY=0,this.width=10,this.height=10,this.paddingX=0,this.paddingY=0,this.color="#FFFFFF",this.paths=[],this.renderer=new s.default(this.context,null),this.canvas.style.pointerEvents="none"}begin(){return this.context.save(),this}end(){return this.context.restore(),this}setTransform(t){return this.transform=t,this}setSize(t,e){return this.width=Math.ceil(t),this.height=Math.ceil(e),this}setPath(t){return this.setPaths([t])}setPaths(t){return this.paths=t,this}setColor(t){return this.color=t,this}render(){this.canvas.width=Math.ceil(this.width),this.canvas.height=Math.ceil(this.height),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.transform.apply(this.context,this.transform);for(var t=0,e=this.paths.length;t<e;++t){var i=this.paths[t];this.context.lineWidth=i.pathStrokeWeight,this.context.miterLimit=i.pathMiterLimit,this.context.lineJoin=i.pathJoinType,this.context.lineCap=i.pathEndcapType,i.render(this.renderer),"none"!==i.pathFillType?(this.context.fillStyle=this.color,this.context.strokeStyle=null,this.context.fill(i.pathFillType)):(this.context.strokeStyle=this.color,this.context.fillStyle=null,this.context.stroke())}return this}getCanvas(){return this.canvas}destroy(){return this.canvas=null,this.context=null,this}}},z8uW:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("3hRk"),r=i("UzQk");class n{constructor(t,e,i,s){this.api=t,this.assetLoader=i,this.graph=e,this.frameRate=s,this.observers={}}on(t,e){let i=this.observers[t];i?i.push(e):(i=[e],this.observers[t]=i)}publish(t){let e=this.observers[t.type];e&&e.forEach(e=>{try{e(t)}catch(t){console.log("throw during event processing",t)}})}begin(){this.queue=this.api.imageService.createQueue(this.assetLoader),this.evaluator=new r.PGMGraphEvaluator(this.graph),this.frameIndex=-1,this.doNextFrame()}doNextFrame(){if(this.canceled)this.publish(new s.FrameProductionCanceledEvent);else{this.frameIndex++;let t=this.frameIndex/this.frameRate;if(t>this.graph.duration)this.publish(new s.FrameProductionCompleteEvent);else{let e=this.evaluator.evaluateAtTime(t);this.queue.renderAsRawBuffer(e,1).then(e=>{this.canceled||(this.publish(new s.FrameDataEvent(this.frameIndex,t,e.buffer,e.width,e.height)),this.doNextFrame())})}}}cancel(){this.canceled=!0}destroy(){this.queue.destroy()}}e.PixiFrameProductionService=class{constructor(t){this.api=t}createProducer(t,e,i){return new n(this.api,t,e,i)}}},zrCk:function(t,e,i){"use strict";var s=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(r,n){function a(t){try{h(s.next(t))}catch(t){n(t)}}function o(t){try{h(s.throw(t))}catch(t){n(t)}}function h(t){t.done?r(t.value):new i((function(e){e(t.value)})).then(a,o)}h((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const r=i("+5yP"),n=i("7Lnb");e.PixiImageService=class{constructor(t){this.api=t}createQueue(t){return new o(this.api,t)}};class a{constructor(t,e,i,s=!1){this.headless=t,this.headless.setWatermark(s),this.graph=e,this.resolution=i,this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}start(t){const e=Math.round(this.graph.bounds.width*this.resolution),i=Math.round(this.graph.bounds.height*this.resolution);this.headless.setMaxRenderSize(e,i),this.headless.renderToBuffer(this.graph).then(s=>{this.resolve({buffer:s,width:e,height:i}),t()}).catch(e=>{this.reject(e),t()})}}class o{constructor(t,e){this.queue=[],this.api=t,this.headless=new r.default(this.api.host,1,e)}checkQueue(){!this.activeEntry&&this.queue.length>0&&(this.activeEntry=this.queue.shift(),this.activeEntry.start(()=>{this.activeEntry=null,this.checkQueue()}))}renderAsRawBuffer(t,e,i=!1){let s=new a(this.headless,t,e,i);return this.queue.push(s),this.checkQueue(),s.promise}renderAsPNGBuffer(t,e,i=!1){return s(this,void 0,void 0,(function*(){const s=n.ImageEncoderRegistry.getRegisteredPNGEncoder();return s?s.encodeToBuffer(yield this.renderAsRawBuffer(t,e,i)):Promise.reject(new Error("No PNG image encoder has been registered. You may want the pgm-image-encoders package."))}))}renderAsPNGDataURL(t,e){return s(this,void 0,void 0,(function*(){const i=n.ImageEncoderRegistry.getRegisteredPNGEncoder();return i?i.encodeToDataURL(yield this.renderAsRawBuffer(t,e)):Promise.reject(new Error("No PNG image encoder has been registered. You may want the pgm-image-encoders package."))}))}renderAsJPEGBuffer(t,e,i,r=!1){return s(this,void 0,void 0,(function*(){const s=n.ImageEncoderRegistry.getRegisteredJPEGEncoder();return s?s.encodeToBuffer(yield this.renderAsRawBuffer(t,e,r),i):Promise.reject(new Error("No JPEG image encoder has been registered. You may want the pgm-image-encoders package."))}))}renderAsJPEGDataURL(t,e,i){return s(this,void 0,void 0,(function*(){const s=n.ImageEncoderRegistry.getRegisteredJPEGEncoder();return s?s.encodeToDataURL(yield this.renderAsRawBuffer(t,e),i):Promise.reject(new Error("No JPEG image encoder has been registered. You may want the pgm-image-encoders package."))}))}destroy(){this.headless.destroy()}}e.PixiImageQueue=o}}]);
//# sourceMappingURL=vendors_npm_spark_1801d15a-d2836a06.js.map