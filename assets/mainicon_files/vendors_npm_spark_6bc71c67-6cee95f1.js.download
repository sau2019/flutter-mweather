(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[19],{"3HaQ":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),u=n("6ZWm"),l=n("7Pku"),c=n("w/+j"),p=n("tGKA"),f=n("5D0C"),h=n("jLWG"),d=n("jfma"),m=n("hauK"),P=n("yjxF"),M=n("Aj79"),T=n("Ucb9"),g=n("g6aL"),A=n("djAF"),F=n("byfQ"),y=n("hgLm"),G=n("oKlP");i.ShapeFormaToPGMMapper=(r=function t(){l.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"ShapeFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=A.ShapeForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance},DUMMY_REF:{get:function(){return void 0===o.DUMMY_REF&&(o.DUMMY_REF=new M.PGMReference(new m.PGMNullNode("dummy","dummy"))),o.DUMMY_REF}},makePGMRefForArtwork:function(t,e,n,o){var i,u,l,c,p=f.PGMAnimationList.EMPTY;if(u=e.bounds)if(l=a.as(e,F.TheoArtworkShape))i=new M.PGMReference(new T.PGMShape(t,new P.PGMNodeMetadata(t,"shape"),p,u,a.clone(l.paths),o),n);else if(c=a.as(e,F.TheoArtworkGroup)){var m,A=[],y=1;c.forEachChild((function(e){var n;(n=r.makePGMRefForArtwork(t+"-"+y,e,d.PGMCompositingParams.DEFAULT,o))&&A.push(n),y+=1})),i=(m=a.as(c,F.TheoArtworkClipGroup))?new M.PGMReference(new h.PGMClip(t,new P.PGMNodeMetadata(t,"clip"),f.PGMAnimationList.EMPTY,a.clone(A),[m.path]),n):1==A.length?A[0].withCompositing(n):new M.PGMReference(new g.PGMSimpleGroup(t,new P.PGMNodeMetadata(t,"group"),f.PGMAnimationList.EMPTY,a.clone(A)),n)}else s.CoreAssert.fail("unable to create PGM for artwork: not a shape or a group","ShapeFormaToPGMMapper.makePGMRefForArtwork","ShapeFormaToPGMMapper.swift",115),i=null;else s.CoreAssert.fail("unable to create PGM for artwork: no bounds","ShapeFormaToPGMMapper.makePGMRefForArtwork","ShapeFormaToPGMMapper.swift",119),i=null;return i},makePGMRefForShape:function(t,e,n){var o,i,a,l=r.DUMMY_REF;if(o=e.style.colors.fieldPrimary)if(null==e.sliceBox)if((i=e.canonicalArtwork.bounds)&&(a=e.bounds)){var f,h=p.Matrix2D.calculateResizeTransform(i,a,G.TheoPoint.ZERO,u.FitType.Stretch).concat(e.placement);(f=r.makePGMRefForArtwork(n,e.canonicalArtwork,new d.PGMCompositingParams(h,e.style.opacity),o))?l=f:(s.CoreAssert.fail("unexpected artwork configuration","ShapeFormaToPGMMapper.makePGMRefForShape","ShapeFormaToPGMMapper.swift",154),l=new M.PGMReference(new m.PGMNullNode(n,"shape")))}else s.CoreAssert.fail("couldn't get artwork or forma bounds for shape","ShapeFormaToPGMMapper.makePGMRefForShape","ShapeFormaToPGMMapper.swift",158),l=new M.PGMReference(new m.PGMNullNode(n,"shape"));else(f=r.makePGMRefForArtwork(n,e.sizedArtwork,new d.PGMCompositingParams(e.placement,e.style.opacity),o))?l=f:(s.CoreAssert.fail("unexpected artwork configuration","ShapeFormaToPGMMapper.makePGMRefForShape","ShapeFormaToPGMMapper.swift",171),l=new M.PGMReference(new m.PGMNullNode(n,"shape")));else s.CoreAssert.fail("shape has no color","ShapeFormaToPGMMapper.makePGMRefForShape","ShapeFormaToPGMMapper.swift",176),l=new M.PGMReference(new m.PGMNullNode(n,"shape"));return c.FormaToPGMUtils.applyAnimations(t,e,l)},applyPathAsClip:function(t,e,n,o,i){var l,c,T,A,R=r.DUMMY_REF,_=f.PGMAnimationList.EMPTY,v=a.clone(o);if(null==e.sliceBox)(l=e.canonicalArtwork.bounds)&&(A=n.bounds)?((E=(N=p.Matrix2D.calculateResizeTransform(l,A,G.TheoPoint.ZERO,u.FitType.Stretch).concat(e.placement)).inverse)&&(v=[new M.PGMReference(new g.PGMSimpleGroup(i,new P.PGMNodeMetadata(i,"clipped-node-wrapper"),_,a.clone(v)),new d.PGMCompositingParams(E))]),(T=a.as(e.canonicalArtwork,F.TheoArtworkShape))?R=new M.PGMReference(new h.PGMClip(i+"-clip",new P.PGMNodeMetadata(i,"shape-clip"),_,a.clone(v),a.clone(T.paths)),new d.PGMCompositingParams(N)):(c=a.as(e.canonicalArtwork,F.TheoArtworkClipGroup))&&(T=a.as(c.childAt(0),F.TheoArtworkShape))?R=new M.PGMReference(new h.PGMClip(i+"-clip",new P.PGMNodeMetadata(i,"outer-shape-clip"),f.PGMAnimationList.EMPTY,[new M.PGMReference(new h.PGMClip(i+"-inner-clip",new P.PGMNodeMetadata(i,"inner-shape-clip"),_,a.clone(v),a.clone(T.paths)))],[c.path]),new d.PGMCompositingParams(N)):(s.CoreAssert.fail("unexpected artwork configuration","ShapeFormaToPGMMapper.applyPathAsClip","ShapeFormaToPGMMapper.swift",255),R=new M.PGMReference(new m.PGMNullNode(i,"shape")))):(s.CoreAssert.fail("no shape and/or primary color?","ShapeFormaToPGMMapper.applyPathAsClip","ShapeFormaToPGMMapper.swift",259),R=new M.PGMReference(new m.PGMNullNode(i,"shape")));else if((T=a.as(e.sizedArtwork,F.TheoArtworkShape))&&(A=n.bounds)){for(var x=(w=a.clone(T.paths))[0].bounds,C=a.iter(a.range(1,w.length,!1));!C.done;C.next()){var b=C.value;x=x.unionWith(w[b].bounds)}(E=(N=p.Matrix2D.calculateResizeTransform(x,A,G.TheoPoint.ZERO,u.FitType.Stretch).concat(e.placement)).inverse)&&(R=new M.PGMReference(new h.PGMClip(i,new P.PGMNodeMetadata(i,"shape"),_,[new M.PGMReference(new g.PGMSimpleGroup(i+"-clip-wrapper",new P.PGMNodeMetadata(i,"clipped-node-wrapper"),_,a.clone(v)),new d.PGMCompositingParams(E))],a.clone(w)),new d.PGMCompositingParams(N)))}else if((c=a.as(e.sizedArtwork,F.TheoArtworkClipGroup))&&(T=a.as(c.childAt(0),F.TheoArtworkShape))&&(A=n.bounds)){x=(w=a.clone(T.paths))[0].bounds;for(var w,S=a.iter(a.range(1,w.length,!1));!S.done;S.next())b=S.value,x=x.unionWith(w[b].bounds);var N,E;if(E=(N=p.Matrix2D.calculateResizeTransform(x,A,G.TheoPoint.ZERO,u.FitType.Stretch).concat(e.placement)).inverse){var D,O=!0;c.path instanceof y.TheoEmptyPath?O=!1:(D=a.as(c.path,y.TheoRectanglePath))&&(O=D.rect.contains(x));var k=new M.PGMReference(new h.PGMClip(i,new P.PGMNodeMetadata(i,"shape"),_,[new M.PGMReference(new g.PGMSimpleGroup(i+"-clip-wrapper",new P.PGMNodeMetadata(i,"clipped-node-wrapper"),_,a.clone(v)),new d.PGMCompositingParams(E))],a.clone(w)),new d.PGMCompositingParams(O?p.Matrix2D.Identity:N));R=O?new M.PGMReference(new h.PGMClip(i+"-clip",new P.PGMNodeMetadata(i,"clip"),f.PGMAnimationList.EMPTY,[k],[c.path]),new d.PGMCompositingParams(N)):k}}else s.CoreAssert.fail("unexpected artwork configuration","ShapeFormaToPGMMapper.applyPathAsClip","ShapeFormaToPGMMapper.swift",369),R=new M.PGMReference(new m.PGMNullNode(i,"shape"));return R}},props:{makePGMRef:function(t,e,n){var o;return(o=a.as(t,A.ShapeForma))?c.FormaToPGMUtils.applyAnimations(e,t,r.makePGMRefForShape(e,o,o.formaID)):(s.CoreAssert.fail("ShapeFormaToPGMMapper: not a shape forma","ShapeFormaToPGMMapper.makePGMRef","ShapeFormaToPGMMapper.swift",39),null)}}}),r)},"44Iz":function(t,e,n){var r,o,i,a=e,s=n("oAGj");a.PGMExportSettings=(r=function(t){this.asDynamic=t},o={},s.defineClass({name:"PGMExportSettings",ctor:r,superName:"CoreObject",statics:{STATIC:{get:function(){return void 0===o.STATIC&&(o.STATIC=new r(!1)),o.STATIC}},DYNAMIC:{get:function(){return void 0===o.DYNAMIC&&(o.DYNAMIC=new r(!0)),o.DYNAMIC}}},props:{asString:{get:function(){return this.asDynamic}}}}),r),a.PGMSource=(i=function(){},s.defineClass({name:"PGMSource",ctor:i,props:{getGraph:function(t){return null},getGraphForForma:function(t,e){return null}}}),i)},"5ex8":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),u=n("6ZWm"),l=n("cmoc"),c=n("7Pku"),p=n("w/+j"),f=n("fdtz"),h=n("lmwz"),d=n("tGKA"),m=n("5D0C"),P=n("jLWG"),M=n("jfma"),T=n("dmHI"),g=n("vTQu"),A=n("yjxF"),F=n("Aj79"),y=n("g6aL"),G=n("djAF"),R=n("3HaQ"),_=n("hgLm"),v=n("oKlP");i.FrameFormaToPGMMapper=(r=function t(){c.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"FrameFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=l.FrameForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance}},props:{makePGMRef:function(t,e,n){var r,o;if((r=a.as(t,l.FrameForma))&&(o=n.childReferences(r))){var i,c,x=r.formaID,C=new A.PGMNodeMetadata(r.formaID,"frame"),b=m.PGMAnimationList.EMPTY;if(c=h.ImageFacade.getMaskFormaForForma(r)){var w,S;if(w=a.as(c,G.ShapeForma))i=new y.PGMSimpleGroup(x,C,b,[R.ShapeFormaToPGMMapper.applyPathAsClip(e,w,t,a.clone(o),w.formaID)]);else{if(!(S=a.as(c,f.ImageForma)))return s.CoreAssert.fail("child reference generation failed for frame: unknown mask type","FrameFormaToPGMMapper.makePGMRef","FrameFormaToPGMMapper.swift",92),null;var N,E;if(!(N=n.referenceForForma(S)))return s.CoreAssert.fail("child reference generation failed for frame: no image?","FrameFormaToPGMMapper.makePGMRef","FrameFormaToPGMMapper.swift",87),null;E=1==o.length?o[0]:new F.PGMReference(new y.PGMSimpleGroup(x+"-children-group",C,b,a.clone(o)));var D=d.Matrix2D.calculateResizeTransform(S.bounds,r.bounds,v.TheoPoint.ZERO,u.FitType.Stretch),O=N.cloneWithPlacement(D);i=new T.PGMFilter(x,C,b,[E,O],new g.PGMMaskFilterSpec)}}else{var k,I=!1,L=new _.TheoRectanglePath(r.bounds);(k=a.as(r.controller,u.FrameController))&&(I=k.clip),i=I?new P.PGMClip(x,C,b,a.clone(o),[L]):new y.PGMSimpleGroup(x,C,b,a.clone(o))}return p.FormaToPGMUtils.applyAnimations(e,t,new F.PGMReference(i,new M.PGMCompositingParams(r.placement,r.style.opacity)))}return s.CoreAssert.fail("frame forma child reference generation failed","FrameFormaToPGMMapper.makePGMRef","FrameFormaToPGMMapper.swift",127),null}}}),r)},"7Pku":function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV");o.FormaToPGMFactory=i.defineProtocol("FormaToPGMFactory",{childReferences:"(GroupForma) -> Array<PGMReference>",referenceForForma:"(Forma) -> PGMReference"}),o.FormaToPGMMapper=(r=function(t){this.formaKind=t},i.defineClass({name:"FormaToPGMMapper",ctor:r,props:{makePGMRef:function(t,e,n){return a.CoreAssert.fail("PGMMapperForForma for "+this.formaKind+" isn't overriding makePGMRef","FormaToPGMMapper.makePGMRef","FormaToPGMMapper.swift",38),null}}}),r)},"8Quq":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),u=n("7Pku"),l=n("w/+j"),c=n("c+uM"),p=n("5D0C"),f=n("jfma"),h=n("djwB"),d=n("hauK"),m=n("yjxF"),P=n("Aj79"),M=n("bAjp"),T=n("bJhu"),g=n("a9ow"),A=n("enh0");i.TextFormaToPGMMapper=(r=function t(){u.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"TextFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=A.TextForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance},getPGMNodeForTextForma:function(t,e,n,r){var o,i,s;void 0===r&&(r=null);var u,l,f,P,A,F,y,G,R=e.textModel,_=p.PGMAnimationList.EMPTY;if((l=R.attributeAtIndex(g.FontColorAttribute.NAME,0))&&(f=a.as(l.attr,g.FontColorAttribute))&&(P=R.attributeAtIndex(g.FontSizeAttribute.NAME,0))&&(A=a.as(P.attr,g.FontSizeAttribute))&&(F=R.attributeAtIndex(g.FontDescriptorAttribute.NAME,0))&&(y=a.as(F.attr,g.FontDescriptorAttribute))&&null!=(G=c.LockupTextLook.toCaseValue((o=a.opt(a.as(a.opt(R.attributeAtIndex(g.TextLookAttribute.NAME,0),(function(t){return t.attr})),g.TextLookAttribute),(function(t){return t.value})))||null!=o?o:0))){var v=a.opt(a.as(a.opt(R.attributeAtIndex(g.FontStrokeColorAttribute.NAME,0),(function(t){return t.attr})),g.FontStrokeColorAttribute),(function(t){return t.value})),x=(i=a.opt(a.as(a.opt(R.attributeAtIndex(g.FontStrokeWidthAttribute.NAME,0),(function(t){return t.attr})),g.FontStrokeWidthAttribute),(function(t){return t.value})))||null!=i?i:0,C=(s=a.opt(a.as(a.opt(R.attributeAtIndex(g.TrackingAttribute.NAME,0),(function(t){return t.attr})),g.TrackingAttribute),(function(t){return t.value})))||null!=s?s:0,b=r||f.value;null==r&&x>0&&(G==c.LockupTextLook.KnockoutAndOutline||G==c.LockupTextLook.OutlineOnly||G==c.LockupTextLook.KnockoutAndShadow)&&(b=null),u=new M.PGMText(n,new m.PGMNodeMetadata(e.formaID,"text"),_,e.bounds,R.text,new T.PGMTextStyle(new h.PGMFont(y.value.cssName,y.value.postScriptName,y.value.style,y.value.weight,y.value.family,y.value.capRatio),A.value,b,v,x,C))}else u=new d.PGMNullNode(n,"text-missing-attribute");return u}},props:{makePGMRef:function(t,e,n){var o;return(o=a.as(t,A.TextForma))?l.FormaToPGMUtils.applyAnimations(e,o,new P.PGMReference(r.getPGMNodeForTextForma(e,o,o.formaID,null),new f.PGMCompositingParams(o.placement,o.style.opacity))):(s.CoreAssert.fail("TextFormaToPGMMapper: not a text forma","TextFormaToPGMMapper.makePGMRef","TextFormaToPGMMapper.swift",46),null)}}}),r)},Bcdx:function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("5ex8"),u=n("Bqrn"),l=n("dX/e"),c=n("pR+7"),p=n("3HaQ"),f=n("8Quq"),h=n("zW/s"),d=n("s3ad");i.FormaToPGMMapperFactory=(r=function(){},o={},a.defineClass({name:"FormaToPGMMapperFactory",ctor:r,statics:{instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},FORMA_KIND_TO_FN:{get:function(){return void 0===o.FORMA_KIND_TO_FN&&(o.FORMA_KIND_TO_FN={Root:function(t){return c.RootFormaToPGMMapper.createMapper(t)},Frame:function(t){return s.FrameFormaToPGMMapper.createMapper(t)},Text:function(t){return f.TextFormaToPGMMapper.createMapper(t)},Shape:function(t){return p.ShapeFormaToPGMMapper.createMapper(t)},Image:function(t){return l.ImageFormaToPGMMapper.createMapper(t)},Video:function(t){return d.VideoFormaToPGMMapper.createMapper(t)},Vector:function(t){return h.VectorFormaToPGMMapper.createMapper(t)},group:function(t){return u.GroupFormaToPGMMapper.createMapper(t)},"smart-group":function(t){return u.GroupFormaToPGMMapper.createMapper(t)}}),o.FORMA_KIND_TO_FN}}},props:{getMapper:function(t){return a.opt(r.FORMA_KIND_TO_FN[t.kind],(function(e){return e(t)}))}}}),r)},BgH2:function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),u=n("oKlP"),l=n("sIWg");i.TextPathSegment=(r=function(t,e,n,r){this._cachedTolerance=0,this._p0=t,this._p1=e,this._p2=n,this._p3=r},a.defineClass({name:"TextPathSegment",ctor:r,superName:"CoreObject",statics:{decodeFromJson:function(t){var e;if(e=t){var n=r.decodePoint(e[r.PROPERTY_P0]),o=r.decodePoint(e[r.PROPERTY_P1]),i=r.decodePoint(e[r.PROPERTY_P2]),a=r.decodePoint(e[r.PROPERTY_P3]);if(null!=n&&null!=o&&null!=i&&null!=a)return new r(n,o,i,a)}return null},encodePoint:function(t){return[t.x,t.y]},decodePoint:function(t){return u.TheoPoint.decodeJson(a.as(t,"AnyObject"))},PROPERTY_P0:"p0",PROPERTY_P1:"p1",PROPERTY_P2:"p2",PROPERTY_P3:"p3"},props:{p0:{get:function(){return this._p0}},p1:{get:function(){return this._p1}},p2:{get:function(){return this._p2}},p3:{get:function(){return this._p3}},clone:function(){return new r(this.p0,this.p1,this.p2,this.p3)},pointAt:function(t){if(!this.checkT(t))return u.TheoPoint.INVALID;var e=1-t,n=e*e*e*this.p0.x+3*t*e*e*this.p1.x+3*t*t*e*this.p2.x+t*t*t*this.p3.x,r=e*e*e*this.p0.y+3*t*e*e*this.p1.y+3*t*t*e*this.p2.y+t*t*t*this.p3.y;return new u.TheoPoint(n,r)},tangentUnitVectorAt:function(t){if(!this.checkT(t))return u.TheoPoint.INVALID;var e=t;e<.01?e=.01:e>.99&&(e=.99);var n=a.clone(this.calculateMidpoints(e)),r=u._minus_TheoPoint_TheoPoint(n[4],n[3]);return r.divide(r.length())},getBounds:function(){var t=this.getBoundsOneDim(this.p0.x,this.p1.x,this.p2.x,this.p3.x,(function(t){return t.x})),e=t.min,n=t.max,r=this.getBoundsOneDim(this.p0.y,this.p1.y,this.p2.y,this.p3.y,(function(t){return t.y})),o=r.min,i=r.max,a=new l.TheoRect(e,o,n,i),u=l.TheoRect.boundsOfPoints([this.p0,this.p1,this.p2,this.p3]);return u.equal(a)||u.contains(a)||s.CoreAssert.fail("Text path segment bounds incorrect","TextPathSegment.getBounds","TextPath.swift",99),a},getBoundsOneDim:function(t,e,n,r,o){var i,a,s=3*r-9*n+9*e-3*t,u=6*t-12*e+6*n,l=3*(-t+e);if(Math.abs(s)<1e-6)a=i=-l/u;else{var c=Math.sqrt(u*u-4*s*l);i=(-u+c)/(2*s),a=(-u-c)/(2*s)}var p=this.checkT(i)?o(this.pointAt(i)):t,f=this.checkT(a)?o(this.pointAt(a)):r;return{min:Math.min(p,f,t,r),max:Math.max(p,f,t,r)}},multiply:function(t){return new r(this._p0.multiplyPoint(t),this._p1.multiplyPoint(t),this._p2.multiplyPoint(t),this._p3.multiplyPoint(t))},offset:function(t){return new r(u._plus_TheoPoint_TheoPoint(this._p0,t),u._plus_TheoPoint_TheoPoint(this._p1,t),u._plus_TheoPoint_TheoPoint(this._p2,t),u._plus_TheoPoint_TheoPoint(this._p3,t))},truncate:function(t){var e=a.clone(this.calculateMidpoints(t)),n=e[3].interpolate(e[4],t);return{prefix:new r(this.p0,e[0],e[3],n),suffix:new r(n,e[4],e[2],this._p3)}},getLength:function(t){if(null!=this._cachedLen&&this._cachedTolerance<=t)return this._cachedLen;for(var e=0,n=0,r=t,o=this.clone();!(o.getPolylineLength()-(e=o.getChordLength())<=t);){r/=2;var i=o.truncate(.5),a=i.prefix,s=i.suffix;n+=a.getLength(r),o=s}return this._cachedLen=n+e,this._cachedTolerance=r,this._cachedLen},getCorrectedLength:function(t,e,n){var r=this.getLength(n),o=u._minus_TheoPoint_TheoPoint(this.p3,this.p2),i=Math.atan2(o.y,o.x);return o=u._minus_TheoPoint_TheoPoint(this.p1,this.p0),(i-=Math.atan2(o.y,o.x))<-Math.PI&&(i+=2*Math.PI),i>Math.PI&&(i-=2*Math.PI),r+(i*=i>0?t:e)},findTValueByCorrectedPrefixLength:function(t,e,n,r){for(var o=r/2,i=0,a=1,u=0,l=0;l<1e3;){u=(i+a)/2;var c=this.truncate(u).prefix.getCorrectedLength(t,e,o);if(Math.abs(n-c)<=o)return u;n<c?a=u:i=u,l+=1}return s.CoreAssert.warning("findTValueByCorrectedPrefixLength did not converge"),u},encodeJson:function(){var t={};return t[r.PROPERTY_P0]=r.encodePoint(this.p0),t[r.PROPERTY_P1]=r.encodePoint(this.p1),t[r.PROPERTY_P2]=r.encodePoint(this.p2),t[r.PROPERTY_P3]=r.encodePoint(this.p3),t},isEqual:function(t){var e;return!!(e=a.as(t,r))&&this.p0==e.p0&&this.p1==e.p1&&this.p2==e.p2&&this.p3==e.p3},getPolylineLength:function(){return this.p0.distanceTo(this.p1)+this.p1.distanceTo(this.p2)+this.p2.distanceTo(this.p3)},getChordLength:function(){return this.p0.distanceTo(this.p3)},calculateMidpoints:function(t){var e=this.p0.interpolate(this.p1,t),n=this.p1.interpolate(this.p2,t),r=this.p2.interpolate(this.p3,t),o=e.interpolate(n,t),i=n.interpolate(r,t);return[e,n,r,o,i]},checkT:function(t){return t>=0&&t<=1}}}),r),i.TextPath=(o=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=1),this._segments=a.clone(t),this._flex=e},a.defineClass({name:"TextPath",ctor:o,superName:"CoreObject",statics:{decodeFromJson:function(t){var e,n;if(n=t){var r,s=(e=a.as(n[o.PROPERTY_FLEX],"Double"))||null!=e?e:1,u=[];if(r=a.as(n[o.PROPERTY_SEGMENTS],["Array","Any"]))for(var l=a.iter(r);!l.done;l.next()){var c=l.value,p=i.TextPathSegment.decodeFromJson(a.as(c,["Dictionary","String","Any"]));if(null==p)return null;u.push(p)}return new o(a.clone(u),s)}return null},areSegmentsContiguous:function(t){for(var e=a.iter(a.toSequence(t));!e.done;e.next()){var n=e.value,r=n.offset,o=n.element;if(r<t.length-1){var i=t[r+1];if(o.p3!=i.p0)return!1}}return!0},PROPERTY_FLEX:"flex",PROPERTY_SEGMENTS:"segment"},props:{segments:{get:function(){return this._segments}},numSegments:{get:function(){return this._segments.length}},flex:{get:function(){return this._flex}},isClosed:function(){return!(this.numSegments<2)&&o.areSegmentsContiguous(a.clone(this._segments))&&a.first(this._segments).p0==a.last(this._segments).p3},clone:function(){var t=this._segments.map((function(t){return t.clone()}),this);return new o(a.clone(t),this._flex)},pointAt:function(t){var e;return null!=(e=this.getSegementIndex(t))?this._segments[e].pointAt(t-a.toDouble(e)):u.TheoPoint.INVALID},tangentUnitVectorAt:function(t){var e;return null!=(e=this.getSegementIndex(t))?this._segments[e].tangentUnitVectorAt(t-a.toDouble(e)):u.TheoPoint.INVALID},getBounds:function(){for(var t,e=a.iter(this._segments);!e.done;e.next()){var n=e.value.getBounds();t=null==t?n:t.unionWith(n)}return t||l.TheoRect.Zero},multiply:function(t){var e=this._segments.map((function(e){return e.multiply(new u.TheoPoint(t.width,t.height))}),this);return new o(a.clone(e),this._flex)},offset:function(t){var e=this._segments.map((function(e){return e.offset(t)}),this);return new o(a.clone(e),this._flex)},truncate:function(t){if(t>=0&&t<a.toDouble(this.numSegments)){var e=a.toInt(Math.floor(t)),n=a.clone(this._segments),r=a.clone(n.splice(0,e)),i=t-a.toDouble(e);if(i>0){var s=n[0].truncate(i),u=s.prefix,l=s.suffix,c=u;n[0]=l,r.push(c)}return{prefix:new o(a.clone(r)),suffix:new o(a.clone(n),this._flex)}}return{prefix:new o,suffix:this.clone()}},getLength:function(t){if(0==this.numSegments)return 0;for(var e=t/a.toDouble(this.numSegments),n=0,r=a.iter(this._segments);!r.done;r.next())n+=r.value.getLength(e);return n},getCorrectedLength:function(t,e,n){for(var r=n/a.toDouble(this.numSegments),o=0,i=a.iter(this._segments);!i.done;i.next())o+=i.value.getCorrectedLength(t,e,r);return o},findTValueByCorrectedPrefixLength:function(t,e,n,r){for(var o=r/a.toDouble(this.numSegments),i=n,s=0;s<this.numSegments&&i>0;){var u=this._segments[s].getCorrectedLength(t,e,o);if(i<=u-o){var l=this._segments[s].findTValueByCorrectedPrefixLength(t,e,i,o);return a.toDouble(s)+l}i-=u,s+=1}return a.toDouble(s)},encodeJson:function(){var t={};t[o.PROPERTY_FLEX]=this.flex;for(var e=[],n=a.iter(this.segments);!n.done;n.next()){var r=n.value;e.push(r.encodeJson())}return t[o.PROPERTY_SEGMENTS]=e,t},isEqual:function(t){var e;if(e=a.as(t,o)){if(this.numSegments!=e.numSegments||this.flex!=e.flex)return!1;for(var n=a.iter(a.toSequence(this.segments));!n.done;n.next()){var r=n.value,i=r.offset;if(r.element!=e.segments[i])return!1}return!0}return!1},getSegementIndex:function(t){return t<0||t>a.toDouble(this.numSegments)?null:Math.min(a.toInt(Math.floor(t)),this.numSegments-1)}}}),o)},Bqrn:function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),u=n("7Pku"),l=n("w/+j"),c=n("9Lk3"),p=n("pnSN"),f=n("RBTN"),h=n("5D0C"),d=n("jfma"),m=n("yjxF"),P=n("Aj79"),M=n("g6aL"),T=n("8t9B"),g=n("QgdZ");a.gvar(i,"_groupSingleton",(function(){return new i.GroupFormaToPGMMapper})),a.gvar(i,"_typeLockupSingleton",(function(){return new g.TypeLockupToPGMMapper})),a.gvar(i,"_gridSingleton",(function(){return new f.GridToPGMMapper})),i.GroupFormaToPGMMapper=(r=function t(){u.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"GroupFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=p.GroupForma.KIND),o.FORMA_KIND}},createMapper:function(t){var e;if(e=t.controller){if(e instanceof T.TypeLockupController)return i._typeLockupSingleton;if(e instanceof c.GridController)return i._gridSingleton}return i._groupSingleton}},props:{makePGMRef:function(t,e,n){var r,o;return(r=a.as(t,p.GroupForma))&&(o=n.childReferences(r))?l.FormaToPGMUtils.applyAnimations(e,t,new P.PGMReference(new M.PGMSimpleGroup(r.formaID,new m.PGMNodeMetadata(r.formaID,"group"),h.PGMAnimationList.EMPTY,a.clone(o)),new d.PGMCompositingParams(r.placement,r.style.opacity))):(s.CoreAssert.fail("group forma child reference generation failed","GroupFormaToPGMMapper.makePGMRef","GroupFormaToPGMMapper.swift",59),null)}}}),r)},ML5t:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("hndY");o.FormaPagePGMSource=(r=function(t){this.caches_={},this.page=t},i.defineClass({name:"FormaPagePGMSource",ctor:r,superName:"PGMSource",props:{getCache:function(t){var e,n,r=t.asString;if(e=this.caches_[r])return e;if(n=this.page){var o=new s.FormaPGMCache(n,t);return this.caches_[r]=o,o}return a.CoreAssert.fail("FormaPagePGMSource.getGraph: page is out of scope","FormaPagePGMSource.getCache","FormaPagePGMSource.swift",40),null},getGraph:function(t){var e;return(e=this.getCache(t))?e.getGraph():null},getGraphForForma:function(t,e){var n;return(n=this.getCache(e))?n.getGraphForForma(t):null}}}),r)},QgZx:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("gXiO"),u=n("iCxV"),l=n("9YN4");o.FontOrigin=i.defineEnum("FontOrigin",{UNKNOWN_ORIGIN:0,USER_CHOSEN:1,STARTUP:2,ACTIVATE_MISSING:3}),o.describeFontOrigin=function(t){switch(t){case 0:return"unknown";case 1:return"user-chosen";case 2:return"startup";case 3:return"activate-missing"}},o.FontSource=i.defineEnum("FontSource",{UNKNOWN_SOURCE:0,WEB_FONT:1,EMBEDDED:2,SPARK_PROVIDED:3,USER_UPLOAD:4,TYPEKIT_FREE:5,TYPEKIT_PREMIUM:6}),o.describeFontSource=function(t){switch(t){case 0:return"unknown";case 1:return"web";case 2:return"embedded";case 3:return"spark";case 4:return"user-upload";case 5:return"typekit-free";case 6:return"typekit-premium"}},o.FontAvailability=i.defineEnum("FontAvailability",{UNKNOWN:0,LOADABLE:1,LOADED:2,NOT_LOADABLE:3}),i.gvar(o,"fontDescriptorStrings",(function(){return{familyName:function(t,e){t.familyName=e},displaySample:function(t,e){t.displaySample=e},label:function(t,e){t.label=e},postScriptName:function(t,e){t.postScriptName=e},macPostScriptName:function(t,e){t.macPostScriptName=e},filename:function(t,e){t.filename=e},family:function(t,e){t.family=e},faceName:function(t,e){t.faceName=e},category:function(t,e){t.category=e},subfamilyName:function(t,e){t.subfamilyName=e},preferredFamilyName:function(t,e){t.preferredFamilyName=e},preferredSubfamilyName:function(t,e){t.preferredSubfamilyName=e},cssName:function(t,e){t.cssName=e},tkSyncId:function(t,e){t.tkSyncId=e},tkWebId:function(t,e){t.tkWebId=e},style:function(t,e){t.style=e}}})),i.gvar(o,"fontDescriptorDoubles",(function(){return{capAccentRatio:function(t,e){t.capAccentRatio=e},capRatio:function(t,e){t.capRatio=e},meanAccentRatio:function(t,e){t.meanAccentRatio=e},meanRatio:function(t,e){t.meanRatio=e},ascentRatio:function(t,e){t.ascentRatio=e},baselineOffsetRatio:function(t,e){t.baselineOffsetRatio=e},tailRatio:function(t,e){t.tailRatio=e},descentRatio:function(t,e){t.descentRatio=e},italicAngle:function(t,e){t.italicAngle=e},popularity:function(t,e){t.popularity=e}}})),i.gvar(o,"fontDescriptorInts",(function(){return{weight:function(t,e){t.weight=e},source:function(t,e){var n;t.source=(n=o.FontSource.toCaseValue(e))||null!=n?n:o.FontSource.UNKNOWN_SOURCE},formality:function(t,e){t.formality=e},blackness:function(t,e){t.blackness=e},drama:function(t,e){t.drama=e},width:function(t,e){t.width=e},usWidthClass:function(t,e){t.usWidthClass=e},usWeightClass:function(t,e){t.usWeightClass=e}}})),i.gvar(o,"fontDescriptorBools",(function(){return{allCapsAllowed:function(t,e){t.allCapsAllowed=e},displayAllowed:function(t,e){t.displayAllowed=e},bodyAllowed:function(t,e){t.bodyAllowed=e},serif:function(t,e){t.serif=e},slab:function(t,e){t.slab=e},handdrawn:function(t,e){t.handdrawn=e},calligraphic:function(t,e){t.calligraphic=e},decorative:function(t,e){t.decorative=e},square:function(t,e){t.square=e},geometric:function(t,e){t.geometric=e},italic:function(t,e){t.italic=e}}})),o.FontDescriptor=(r=function(t){this.displayFamilyName_="",this.displayFaceName_="",this._source=o.FontSource.UNKNOWN_SOURCE,this.availability=o.FontAvailability.LOADABLE,this._spaceWidthRatio=0,this.capAccentRatio=0,this.capRatio=0,this.meanAccentRatio=0,this.meanRatio=0,this.ascentRatio=0,this.baselineOffsetRatio=0,this.tailRatio=0,this.descentRatio=0,this.italicAngle=0,this.displaySample="",this.upperCaseCharsArray=[],this.lowerCaseCharsArray=[],this.capAccentCharsArray=[],this.capCharsArray=[],this.ascentCharsArray=[],this.meanAccentCharsArray=[],this.meanCharsArray=[],this.baseCharsArray=[],this.tailCharsArray=[],this.descentCharsArray=[],this.characterFeatures={},this.label="",this.postScriptName="",this.macPostScriptName="",this.filename="",this.family="",this.category="",this.familyName="",this.subfamilyName="",this.preferredFamilyName="",this.preferredSubfamilyName="",this.faceName="",this.cssName="",this.tkSyncId="",this.tkWebId="",this.style="",this.popularity=0,this.weight=0,this.formality=0,this.blackness=0,this.drama=0,this.width=0,this.usWidthClass=0,this.usWeightClass=0,this.allCapsAllowed=!1,this.displayAllowed=!1,this.bodyAllowed=!1,this.serif=!1,this.slab=!1,this.handdrawn=!1,this.calligraphic=!1,this.decorative=!1,this.square=!1,this.geometric=!1,this.italic=!1,s.CoreObject.call(this);for(var e=i.iter(o.fontDescriptorStrings);!e.done;e.next()){var n=e.key,r=e.value;null!=(h=t[n])&&r(this,h)}for(var a=i.iter(o.fontDescriptorDoubles);!a.done;a.next())n=a.key,r=a.value,null!=(h=t[n])&&r(this,h);for(var u=i.iter(o.fontDescriptorInts);!u.done;u.next())if(n=u.key,r=u.value,null!=(h=t[n]))if("weight"==n&&null!=i.as(h,"String")){var l=h,c=i.isEmpty(l)?0:i.toInt(l);r(this,c>0?c:400)}else if("source"==n){var p=h;this.source=null!=o.FontSource.toCaseValue(p)?o.FontSource.toCaseValue(p):o.FontSource.UNKNOWN_SOURCE}else r(this,h);for(var f=i.iter(o.fontDescriptorBools);!f.done;f.next()){var h;n=f.key,r=f.value,null!=(h=t[n])&&r(this,h)}for(var d=t.uppercaseChars,m=t.lowercaseChars,P=t.capAccentChars,M=t.capChars,T=t.ascentChars,g=t.meanAccentChars,A=t.meanChars,F=t.baseChars,y=t.tailChars,G=t.descentChars,R=i.clone(i.as(t.characterFeatures,["Dictionary","String","Double"])),_=i.iter(i.chars(d));!_.done;_.next()){var v=_.value;this.upperCaseCharsArray.push(v)}for(var x=i.iter(i.chars(m));!x.done;x.next()){var C=x.value;this.lowerCaseCharsArray.push(C)}for(var b=i.iter(i.chars(P));!b.done;b.next()){var w=b.value;this.capAccentCharsArray.push(w)}for(var S=i.iter(i.chars(M));!S.done;S.next()){var N=S.value;this.capCharsArray.push(N)}for(var E=i.iter(i.chars(T));!E.done;E.next()){var D=E.value;this.ascentCharsArray.push(D)}for(var O=i.iter(i.chars(g));!O.done;O.next()){var k=O.value;this.meanAccentCharsArray.push(k)}for(var I=i.iter(i.chars(A));!I.done;I.next()){var L=I.value;this.meanCharsArray.push(L)}for(var Y=i.iter(i.chars(F));!Y.done;Y.next()){var B=Y.value;this.baseCharsArray.push(B)}for(var U=i.iter(i.chars(y));!U.done;U.next()){var K=U.value;this.tailCharsArray.push(K)}for(var V=i.iter(i.chars(G));!V.done;V.next()){var j=V.value;this.descentCharsArray.push(j)}if(null!=R)for(var W=i.iter(i.keys(R));!W.done;W.next()){var H=W.value;this.characterFeatures[H]=R[H]}},i.defineClass({name:"FontDescriptor",ctor:r,superName:"CoreObject",statics:{PROPERTY_POSTSCRIPT_NAME:"postscript-name",PROPERTY_SOURCE:"source",decodeJson:function(t,e){var n=i.as(t,["Dictionary","String","Any"]);if(null==n)return a.CoreAssert.fail("FontDescriptorAttribute: Data is missing or not a dictionary","FontDescriptor.decodeJson","FontDescriptor.swift",418),null;var s=n[r.PROPERTY_POSTSCRIPT_NAME],c=u.Host.fontProvider.descriptorForPostScriptName(s,i.as(e,l.TheoDocument));return c.postScriptName==s&&c.availability==o.FontAvailability.LOADED||e.recordMissingFont(s),c}},props:{displayFamilyName:{get:function(){return""==this.displayFamilyName_&&(this.displayFamilyName_=this.preferredFamilyName),""==this.displayFamilyName_&&(this.displayFamilyName_=this.familyName),""==this.displayFamilyName_&&(this.displayFamilyName_=this.family),""==this.displayFamilyName_&&(this.displayFamilyName_=this.postScriptName),this.displayFamilyName_},set:function(t){this.displayFamilyName_=t}},displayFaceName:{get:function(){return""==this.displayFaceName_&&(this.displayFaceName_=this.preferredSubfamilyName),""==this.displayFaceName_&&(this.displayFaceName_=this.subfamilyName),""==this.displayFaceName_&&(this.displayFaceName_=this.faceName),""==this.displayFaceName_&&(this.displayFaceName_=this.label),""==this.displayFaceName_&&(this.displayFaceName_=this.postScriptName),this.displayFaceName_},set:function(t){this.displayFaceName_=t}},source:{get:function(){return this._source},set:function(t){this._source==o.FontSource.EMBEDDED?t!=o.FontSource.EMBEDDED&&i.info("Font "+this.postScriptName+" is already marked as EMBEDDED. Ignoring new font source"):this._source=t}},privateSetFontSource:function(t){this._source=t},spaceWidthRatio:{get:function(){if(0==this._spaceWidthRatio){var t=u.Host.textModelUtils.measureInkBounds(" ",this,100);this._spaceWidthRatio=t.width/100}return this._spaceWidthRatio}},isEqual:function(t){var e=i.as(t,r);return null!=e&&this.postScriptName==e.postScriptName},encodeJson:function(){var t={};return t[r.PROPERTY_POSTSCRIPT_NAME]=this.postScriptName,t[r.PROPERTY_SOURCE]=o.describeFontSource(this.source),t}}}),r),o._equality_FontDescriptor_FontDescriptor=function(t,e){return t.isEqual(e)}},QgdZ:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("w/+j"),s=n("pnSN"),u=n("Bqrn"),l=n("c+uM"),c=n("5D0C"),p=n("jfma"),f=n("dmHI"),h=n("vTQu"),d=n("yjxF"),m=n("Aj79"),P=n("g6aL"),M=n("Zifs"),T=n("djAF"),g=n("3HaQ"),A=n("a9ow"),F=n("enh0"),y=n("8Quq");o.TypeLockupToPGMMapper=(r=function(){u.GroupFormaToPGMMapper.call(this)},i.defineClass({name:"TypeLockupToPGMMapper",ctor:r,superName:"GroupFormaToPGMMapper",statics:{getPGMForTypeLockup:function(t,e,n){var r,o,u,G=0,R=0,_=function e(f){var h,_,v,x=null,C=null,b=null,w=null;if(h=i.as(f,s.GroupForma)){var S=null,N=null,E=null,D=null;h.childrenAsArray.forEach((function(t){var n=e(t),r=n.shapeRef,o=n.bottomTextRef,i=n.textRef,a=n.knockoutRef;null!=r&&(null==S&&(S=[]),S.push(r)),null!=o&&(null==N&&(N=[]),N.push(o)),null!=i&&(null==E&&(E=[]),E.push(i)),null!=a&&(null==D&&(D=[]),D.push(a))}));var O=p.PGMCompositingParams.smartInit(h.placement,h.style.opacity);null!=S&&(x=a.FormaToPGMUtils.applyAnimations(t,h,new m.PGMReference(new P.PGMSimpleGroup(h.formaID+"-shapes",new d.PGMNodeMetadata(h.formaID,"group"),c.PGMAnimationList.EMPTY,i.clone(S)),O))),null!=N&&(C=a.FormaToPGMUtils.applyAnimations(t,h,new m.PGMReference(new P.PGMSimpleGroup(h.formaID+"-bottomTexts",new d.PGMNodeMetadata(h.formaID,"group"),c.PGMAnimationList.EMPTY,i.clone(N)),O))),null!=E&&(b=a.FormaToPGMUtils.applyAnimations(t,h,new m.PGMReference(new P.PGMSimpleGroup(h.formaID+"-texts",new d.PGMNodeMetadata(h.formaID,"group"),c.PGMAnimationList.EMPTY,i.clone(E)),O))),null!=D&&(w=a.FormaToPGMUtils.applyAnimations(t,h,new m.PGMReference(new P.PGMSimpleGroup(h.formaID+"-knockouts",new d.PGMNodeMetadata(h.formaID,"group"),c.PGMAnimationList.EMPTY,i.clone(D)),O)))}else if(_=i.as(f,F.TextForma)){G+=1;var k=(r=l.LockupTextLook.toCaseValue((o=i.opt(i.as(i.opt(_.textModel.attributeAtIndex(A.TextLookAttribute.NAME,0),(function(t){return t.attr})),A.TextLookAttribute),(function(t){return t.value})))||null!=o?o:0))||null!=r?r:l.LockupTextLook.Fill,I=(u=i.opt(i.as(_.textModel.attributeAtIndex(A.FontStrokeWidthAttribute.NAME,0).attr,A.FontStrokeWidthAttribute),(function(t){return t.value})))||null!=u?u:0;switch(O=new p.PGMCompositingParams(_.placement,_.style.opacity),k){case l.LockupTextLook.Fill:var L=y.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt#"+G);b=new m.PGMReference(L,O,a.FormaToPGMUtils.createAnimations(L,_));break;case l.LockupTextLook.KnockoutOnly:w=a.FormaToPGMUtils.applyAnimations(t,_,new m.PGMReference(y.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt#"+G,M.SolidColor.BLACK),O));break;case l.LockupTextLook.KnockoutAndOutline:case l.LockupTextLook.KnockoutAndFill:w=a.FormaToPGMUtils.applyAnimations(t,_,new m.PGMReference(y.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt-ko#"+G,M.SolidColor.BLACK),O)),b=a.FormaToPGMUtils.applyAnimations(t,_,new m.PGMReference(y.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt-fg#"+G),O));break;case l.LockupTextLook.KnockoutAndShadow:I>0?C=a.FormaToPGMUtils.applyAnimations(t,_,new m.PGMReference(y.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt-bg#"+G),O)):w=a.FormaToPGMUtils.applyAnimations(t,_,new m.PGMReference(y.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt-ko#"+G,M.SolidColor.BLACK),O));break;default:b=a.FormaToPGMUtils.applyAnimations(t,_,new m.PGMReference(y.TextFormaToPGMMapper.getPGMNodeForTextForma(t,_,n+"-txt#"+G),O))}}else(v=i.as(f,T.ShapeForma))&&(R+=1,x=a.FormaToPGMUtils.applyAnimations(t,v,g.ShapeFormaToPGMMapper.makePGMRefForShape(t,v,n+"-shp#"+R)));return{shapeRef:x,bottomTextRef:C,textRef:b,knockoutRef:w}}(e),v=_.shapeRef,x=_.bottomTextRef,C=_.textRef,b=_.knockoutRef,w=i.clone(i.opt(i.as(i.opt(v,(function(t){return t.child})),P.PGMSimpleGroup),(function(t){return t.children}))),S=i.clone(i.opt(i.as(i.opt(x,(function(t){return t.child})),P.PGMSimpleGroup),(function(t){return t.children}))),N=i.clone(i.opt(i.as(i.opt(C,(function(t){return t.child})),P.PGMSimpleGroup),(function(t){return t.children}))),E=i.clone(i.opt(i.as(i.opt(b,(function(t){return t.child})),P.PGMSimpleGroup),(function(t){return t.children})));if(null!=E&&null!=w){var D=new P.PGMSimpleGroup(n+"-mask",new d.PGMNodeMetadata(e.formaID,"mask"),c.PGMAnimationList.EMPTY,i.clone(E)),O=new P.PGMSimpleGroup(n+"-art",new d.PGMNodeMetadata(e.formaID,"art"),c.PGMAnimationList.EMPTY,i.clone(w));if(null!=N||null!=S){var k=[];return null!=S&&k.push(new m.PGMReference(new P.PGMSimpleGroup(n+"-bg",new d.PGMNodeMetadata(e.formaID,"text-on-bottom-of-knockout"),c.PGMAnimationList.EMPTY,i.clone(S)))),k.push(new m.PGMReference(new f.PGMFilter(n+"-ko",new d.PGMNodeMetadata(e.formaID,"shape-knocked-out-by-text"),c.PGMAnimationList.EMPTY,[new m.PGMReference(O),new m.PGMReference(D)],new h.PGMMaskFilterSpec(M.SolidColor.WHITE)))),null!=N&&k.push(new m.PGMReference(new P.PGMSimpleGroup(n+"-fg",new d.PGMNodeMetadata(e.formaID,"text-on-top-of-knockout"),c.PGMAnimationList.EMPTY,i.clone(N)))),new P.PGMSimpleGroup(n,new d.PGMNodeMetadata(e.formaID,"lockup-sandwich"),c.PGMAnimationList.EMPTY,i.clone(k))}return new f.PGMFilter(n,new d.PGMNodeMetadata(e.formaID,"simple-text-knockout"),c.PGMAnimationList.EMPTY,[new m.PGMReference(O),new m.PGMReference(D)],new h.PGMMaskFilterSpec(M.SolidColor.WHITE))}var I=[];return null!=w&&(I=I.concat(w)),null!=N&&(I=I.concat(N)),new P.PGMSimpleGroup(n,new d.PGMNodeMetadata(e.formaID,"simple-lockup"),c.PGMAnimationList.EMPTY,i.clone(I))}},props:{makePGMRef:function(t,e,n){return a.FormaToPGMUtils.applyAnimations(e,t,new m.PGMReference(r.getPGMForTypeLockup(e,t,t.formaID),new p.PGMCompositingParams(t.placement,t.style.opacity)))}}}),r)},RBTN:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("Bqrn");o.GridToPGMMapper=(r=function(){a.GroupFormaToPGMMapper.call(this)},i.defineClass({name:"GridToPGMMapper",ctor:r,superName:"GroupFormaToPGMMapper",props:{makePGMRef:function(t,e,n){return a.GroupFormaToPGMMapper.prototype.makePGMRef.call(this,t,e,n)}}}),r)},VJ9E:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("QgZx"),u=n("iCxV"),l=n("3lr5");o.TheoFont=(r=function(){this.roleOrder=["headline-font","body-font","body-font-italic","body-font-bold","body-font-bold-italic","secondary-font"]},i.defineClass({name:"TheoFont",ctor:r,superName:"CoreObject",statics:{SPARK_FONT_ROLE_HEADLINE:"headline-font",SPARK_FONT_ROLE_BODY:"body-font",SPARK_FONT_ROLE_BODY_ITALIC:"body-font-italic",SPARK_FONT_ROLE_BODY_BOLD:"body-font-bold",SPARK_FONT_ROLE_BODY_BOLD_ITALIC:"body-font-bold-italic",SPARK_FONT_ROLE_SECONDARY:"secondary-font",SPARK_FONT_ROLE_CUSTOM:"custom",decodeJson:function(t,e){if(null==t)return null;var n=i.as(t,["Dictionary","String","Any"]);if(null==n)return a.CoreAssert.fail("TheoFont.decodeJson: object passed isn't a dictionary","TheoFont.decodeJson","TheoFont.swift",106),null;var o,u=i.as(n[s.FontDescriptor.PROPERTY_POSTSCRIPT_NAME],"String");if(o=s.FontDescriptor.decodeJson(t,e)){if(u==o.postScriptName){var l=i.as(n.sparkElementID,"String"),c=i.clone(i.as(n.sparkRoles,["Array","String"]));return r.init_9e5c(o,l,i.clone(c))}return r.init_9e5c(o)}return null}},props:{init_9e5c:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.fontData=t,this.sparkElementID=e,this.sparkRoles=i.clone(n)},init_a314:function(t){this.sparkElementID=t.id,this.sparkRoles=i.clone(t.acRoles);var e,n,r=u.Host.fontProvider.getIncludedFonts(l.ANY_DOCUMENT);(e=t.descriptor)?null!=(n=r.indexOf(e))?this.fontData=r.fontAt(n):(a.CoreAssert.warning("Failed to find brandkit font "+e.postScriptName+" in list of available fonts, using 0th"),this.fontData=r.fontAt(0)):"faux-font"==t.sourceType?(a.CoreAssert.warning("TheoFont: Failed to find synthesized brandkit font in list of available fonts, using 0th font"),this.fontData=r.fontAt(0)):(a.CoreAssert.warning("TheoFont: Failed to find brandkit font in list of available fonts, using 0th font"),this.fontData=r.fontAt(0))},isSparkFont:function(){return null!=this.sparkRoles||null!=this.sparkElementID},getSparkFontRole:function(){if(null==this.sparkRoles)return null;for(var t=i.iter(this.roleOrder);!t.done;t.next()){var e=t.value;if(this.sparkRoles.includes(e))return e}return null},hasSparkFontRole:function(t){return null!=this.sparkRoles&&this.sparkRoles.includes(t)},encodeJson:function(){var t=this.fontData.encodeJson();return null!=this.sparkElementID&&(t.sparkElementID=this.sparkElementID),null!=this.sparkRoles&&(t.sparkRoles=i.clone(this.sparkRoles)),t},isEqual:function(t){var e;return!!(e=i.as(t,r))&&e.fontData.isEqual(this.fontData)&&e.sparkElementID==this.sparkElementID&&e.getSparkFontRole()==this.getSparkFontRole()}}}),r),o._equality_TheoFont_TheoFont=function(t,e){return t.isEqual(e)}},a9ow:function(t,e,n){var r,o,i,a,s,u,l,c,p,f=e,h=n("oAGj"),d=n("qsM9"),m=n("SpAV"),P=n("dJuF"),M=n("QgZx"),T=n("iCxV"),g=n("Zifs");f.TextAttribute=(r=function(t,e,n){this.start=t,this.length=e,this.value_=n},h.defineClass({name:"TextAttribute",ctor:r,superName:"CoreObject",statics:{PROPERTY_VALUE:"value",PROPERTY_START:"start",PROPERTY_LENGTH:"length"},props:{isEqual:function(t){var e;return!!(e=h.as(t,r))&&e.start==this.start&&e.length==this.length},hash:{get:function(){return h.hashValue(this.start)^h.hashValue(this.length)}},stamp:{get:function(){return m.CoreAssert.fail("unimplemented override of stamp","TextAttribute","TextAttribute.swift",36),""}},description:{get:function(){return m.CoreAssert.fail("missing override of description","TextAttribute","TextAttribute.swift",41),"TextAttribute"}},cloneToNewLength:function(t){return new r(this.start,t,this.value_)}}}),r),f.UTF16Attribute=(o=function(){},h.defineClass({name:"UTF16Attribute",ctor:o,superName:"TextAttribute",statics:{NAME:{get:function(){return"text"}},codec:{get:function(){var t,e="UTF16Attribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var i,a=P.DBProperty.deleted(t);return(i=h.as(n,o))&&(a=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),i.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),i.length),value:P.DBProperty.stringProperty(t.append(f.TextAttribute.PROPERTY_VALUE),i.value)},e)),a}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),i=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),a=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(t){return t.stringValue}));if(null!=r&&null!=i&&null!=a)return o.init_b49c(r,i,a)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,t.length,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,o))&&e.value==this.value&&f.TextAttribute.prototype.isEqual.call(this,t)},hash:{get:function(){return h.hashValue(this.value)}},stamp:{get:function(){return this.value}},description:{get:function(){return this.value}},cloneToNewLength:function(t){return o.init_b49c(this.start,t,this.value)}}}),o),f.FontDescriptorAttribute=(i=function(){},h.defineClass({name:"FontDescriptorAttribute",ctor:i,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-name"}},codec:{get:function(){var t,e="FontDescriptorAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,a=P.DBProperty.deleted(t);return(o=h.as(n,i))&&(a=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:d.Codecs.fontDescriptorCodec.encode(t.append(f.TextAttribute.PROPERTY_VALUE),o.value_,r)},e)),a}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),a=h.as(d.Codecs.fontDescriptorCodec.decode(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),n),M.FontDescriptor);if(null!=r&&null!=o&&null!=a)return i.init_b49c(r,o,a)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},postscriptName:{get:function(){return this.value.postScriptName}},value:{get:function(){var t;return(t=h.as(this.value_,M.FontDescriptor))||null!=t?t:T.Host.textModelUtils.defaultFont()}},isEqual:function(t){var e;return!!(e=h.as(t,i))&&(e.value===this.value||h.eq(M._equality_FontDescriptor_FontDescriptor,e.value,this.value))},hash:{get:function(){return this.value.hash}},stamp:{get:function(){return this.value.postScriptName}},description:{get:function(){return this.value.postScriptName}},cloneToNewLength:function(t){return i.init_b49c(this.start,t,this.value)}}}),i),f.FontSizeAttribute=(a=function(){},h.defineClass({name:"FontSizeAttribute",ctor:a,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-size"}},codec:{get:function(){var t,e="FontSizeAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,a))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:P.DBProperty.doubleProperty(t.append(f.TextAttribute.PROPERTY_VALUE),o.value)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(t){return t.doubleValue}));if(null!=r&&null!=o&&null!=i)return a.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,a))&&e.value==this.value},hash:{get:function(){return h.hashValue(this.value)}},stamp:{get:function(){return this.value}},description:{get:function(){return this.value}},cloneToNewLength:function(t){return a.init_b49c(this.start,t,this.value)}}}),a),f.FontColorAttribute=(s=function(){},h.defineClass({name:"FontColorAttribute",ctor:s,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-color"}},codec:{get:function(){var t,e="FontColorAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,s))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:d.Codecs.solidColorCodec.encode(t.append(f.TextAttribute.PROPERTY_VALUE),o.value_,r)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.as(d.Codecs.solidColorCodec.decode(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),n),g.SolidColor);if(null!=r&&null!=o&&null!=i)return s.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,s))&&h.eq(g._equality_SolidColor_SolidColor,e.value,this.value)},hash:{get:function(){return this.value.hash}},stamp:{get:function(){return h.toString(this.value.hash)}},description:{get:function(){return this.value.asString}},cloneToNewLength:function(t){return s.init_b49c(this.start,t,this.value)}}}),s),f.FontStrokeColorAttribute=(u=function(){},h.defineClass({name:"FontStrokeColorAttribute",ctor:u,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-strokecolor"}},codec:{get:function(){var t,e="FontStrokeColorAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,u))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:d.Codecs.solidColorCodec.encode(t.append(f.TextAttribute.PROPERTY_VALUE),o.value_,r)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.as(d.Codecs.solidColorCodec.decode(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),n),g.SolidColor);if(null!=r&&null!=o&&null!=i)return u.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,u))&&h.eq(g._equality_SolidColor_SolidColor,e.value,this.value)},hash:{get:function(){return this.value.hash}},stamp:{get:function(){return h.toString(this.value.hash)}},description:{get:function(){return this.value.asString}},cloneToNewLength:function(t){return u.init_b49c(this.start,t,this.value)}}}),u),f.FontStrokeWidthAttribute=(l=function(){},h.defineClass({name:"FontStrokeWidthAttribute",ctor:l,superName:"TextAttribute",statics:{NAME:{get:function(){return"font-strokewidth"}},codec:{get:function(){var t,e="FontStrokeWidthAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,l))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:P.DBProperty.doubleProperty(t.append(f.TextAttribute.PROPERTY_VALUE),o.value)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(t){return t.doubleValue}));if(null!=r&&null!=o&&null!=i)return l.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,l))&&e.value==this.value},hash:{get:function(){return h.hashValue(this.value)}},stamp:{get:function(){return this.value}},description:{get:function(){return this.value}},cloneToNewLength:function(t){return l.init_b49c(this.start,t,this.value)}}}),l),f.TextLookAttribute=(c=function(){},h.defineClass({name:"TextLookAttribute",ctor:c,superName:"TextAttribute",statics:{NAME:{get:function(){return"text-look"}},codec:{get:function(){var t,e="TextLookAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,c))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_VALUE),o.value)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(t){return t.intValue}));if(null!=r&&null!=o&&null!=i)return c.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,c))&&e.value==this.value},hash:{get:function(){return h.hashValue(this.value)}},stamp:{get:function(){return this.value}},description:{get:function(){return this.value}},cloneToNewLength:function(t){return c.init_b49c(this.start,t,this.value)}}}),c),f.TrackingAttribute=(p=function(){},h.defineClass({name:"TrackingAttribute",ctor:p,superName:"TextAttribute",statics:{NAME:{get:function(){return"tracking"}},codec:{get:function(){var t,e="TrackingAttribute";return P.DBPropertyCodec.typeCodec(e)||P.DBPropertyCodec.registerCodec(e,P.DBPropertyCodec.codec((function(t,n,r){var o,i=P.DBProperty.deleted(t);return(o=h.as(n,p))&&(i=P.DBProperty.dictEncoded(t,{start:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_START),o.start),length:P.DBProperty.intProperty(t.append(f.TextAttribute.PROPERTY_LENGTH),o.length),value:P.DBProperty.doubleProperty(t.append(f.TextAttribute.PROPERTY_VALUE),o.value)},e)),i}),(function(e,n){if(((t=h.opt(e,(function(t){return t.isDictionary})))||null!=t)&&t){var r=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_START),(function(t){return t.intValue})),o=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_LENGTH),(function(t){return t.intValue})),i=h.opt(e.getDictionaryProperty(f.TextAttribute.PROPERTY_VALUE),(function(t){return t.doubleValue}));if(null!=r&&null!=o&&null!=i)return p.init_b49c(r,o,i)}return null}),e))}}},props:{init_2063:function(t){f.TextAttribute.call(this,0,0,t)},init_b49c:function(t,e,n){f.TextAttribute.call(this,t,e,n)},value:{get:function(){return this.value_}},isEqual:function(t){var e;return!!(e=h.as(t,p))&&e.value==this.value},hash:{get:function(){return h.hashValue(this.value)}},stamp:{get:function(){return this.value}},description:{get:function(){return this.value}},cloneToNewLength:function(t){return p.init_b49c(this.start,t,this.value)}}}),p)},"dX/e":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),u=n("7Pku"),l=n("w/+j"),c=n("Qlvz"),p=n("NkBu"),f=n("fdtz"),h=n("SDdr"),d=n("uWOl"),m=n("5D0C"),P=n("WjWV"),M=n("Iv44"),T=n("GDe9"),g=n("jfma"),A=n("ZTPx"),F=n("+ASD"),y=n("dmHI"),G=n("jfiy"),R=n("bauG"),_=n("yjxF"),v=n("dz2e"),x=n("Aj79"),C=n("JQ9Y"),b=n("g6aL"),w=n("Zifs");i.ImageFormaToPGMMapper=(r=function t(){u.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"ImageFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=f.ImageForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance}},props:{makePGMRef:function(t,e,n){var r;if(r=a.as(t,f.ImageForma)){var o=new R.PGMImage(r.formaID,new _.PGMNodeMetadata(r.formaID,"image"),m.PGMAnimationList.EMPTY,r.bounds,r.contentNode.url),i=this.applyFilters(r.style,o,r.controller);return l.FormaToPGMUtils.applyAnimations(e,t,new x.PGMReference(i,new g.PGMCompositingParams(r.placement,r.style.opacity)))}return s.CoreAssert.fail("ImageFormaToPGMMapper called for something that's not an ImageForma","ImageFormaToPGMMapper.makePGMRef","ImageFormaToPGMMapper.swift",56),null},applyFilters:function(t,e,n){var r,o,i,s,u=e,l=!0;if((r=a.as(n,p.ImageController))&&(o=a.as(r.forma,f.ImageForma))&&(l=!(r.floating||o.hasAlpha())),i=a.as(t,d.ImageStyle))if(s=i.adjustments){var h=c.ImageAdjustments.createDefault(),m=s.blur!=h.blur;s.sharpness!=h.sharpness&&(u=this.applySharpen(s,u,e,l)),u=this.applyColorAdjustments(s,u),u=this.applyStyleEffects(i,u),m&&(u=this.applyBlur(s,u,e,l))}else u=this.applyStyleEffects(i,u);return u},applySharpen:function(t,e,n,r){var o=e,i=t.scaledSharpness/4,a=o;return o=this.wrapInFilter([a],"Blur",new M.PGMBlurFilterSpec(r,i,n.entity)),o=this.wrapInFilter([a,o],"Sharpen_mixback",new P.PGMBlendFilterSpec([1.5,-.5]))},applyBlur:function(t,e,n,r){var o=e,i=t.scaledBlur;return o=this.wrapInFilter([o],"Blur",new M.PGMBlurFilterSpec(r,i,n.entity))},applyColorAdjustments:function(t,e){var n=e,r=c.ImageAdjustments.createDefault(),o=t.copyWithNewValues(r.blur,r.sharpness);return o.equals(r)||(n=this.wrapInFilter([n],"ColorAdjustment",new T.PGMColorAdjustmentFilterSpec(o.shadows,o.highlights,o.saturation,o.brightness,o.exposure,o.contrast,o.warmth,o.tint,o.fade,o.vibrance))),n},applyStyleEffects:function(t,e){var n,r=e;if(n=a.as(t.filter,h.CompositeFilter)){var o,i,u,l=w.SolidColor.BLACK,c=w.SolidColor.BLACK;switch((o=n.colors)&&((i=o.fieldPrimary)&&(l=i),(u=o.fieldSecondary)&&(c=u)),t.name){case"DuoTone":case"Greyscale":case"Darken":r=this.wrapInFilter([r],n.name,new F.PGMDuotoneFilterSpec(l,c,1));break;case"Overlay":r=this.wrapInFilter([r],n.name+"_contrast",A.PGMColorTransformFilterSpec.CreateContrastTransform(n.contrast)),r=this.wrapInFilter([r],n.name+"_overlay",new v.PGMOverlayFilterSpec(l));break;case"Blend":var p=new w.SolidColor(l.red,l.green,l.blue,1);r=this.wrapInFilter([r],n.name,new G.PGMFillFilterSpec(p));break;case"Multiply":r=this.wrapInFilter([r],n.name,A.PGMColorTransformFilterSpec.CreateColorizeTransform(l));break;case"Screen":r=this.wrapInFilter([r],n.name,new C.PGMScreenFilterSpec(l));break;default:s.CoreAssert.fail("Unknown image filter type: "+n.name,"ImageFormaToPGMMapper.applyStyleEffects","ImageFormaToPGMMapper.swift",270)}if(1!=n.mix){var f=new b.PGMSimpleGroup(r.entity+"-mix-filtered",new _.PGMNodeMetadata(r.meta.id,"filter-"+n.name+"-mix-opacity"),m.PGMAnimationList.EMPTY,[new x.PGMReference(r)]),d=new x.PGMReference(f,g.PGMCompositingParams.DEFAULT.withOpacity(n.mix),m.PGMAnimationList.EMPTY);r=new b.PGMSimpleGroup(r.entity+"-mix",new _.PGMNodeMetadata(r.meta.id,"filter-"+n.name+"-mix"),m.PGMAnimationList.EMPTY,[new x.PGMReference(e),d])}}return r},wrapInFilter:function(t,e,n){for(var r=t[0].entity+"-"+e,o=new _.PGMNodeMetadata(t[0].meta.id,"filter-"+e),i=m.PGMAnimationList.EMPTY,s=[],u=a.iter(t);!u.done;u.next()){var l=u.value;s.push(new x.PGMReference(l))}return new y.PGMFilter(r,o,i,a.clone(s),n)}}}),r)},hndY:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("OdB2"),u=n("Bcdx"),l=n("iCxV"),c=n("K17h"),p=n("sq5L"),f=n("bauG"),h=n("/ZoO"),d=n("ZA1K"),m=n("mj5y"),P=n("s3Tu"),M=n("T6jX"),T=n("sIWg");o.FormaPGMCache=(r=function(t,e){this.graph_=null,this.formaCache_={},this.mappers=u.FormaToPGMMapperFactory.instance,this.page=t,this.settings=e,t.subscribe(this,s.FormaEndUpdateMessage.TYPE)},i.defineClass({name:"FormaPGMCache",ctor:r,statics:{_implements:function(t){return"TheoMessageSubscriber"==t||"FormaToPGMFactory"==t}},props:{onMessage:function(t){var e;if(e=i.as(t,s.FormaEndUpdateMessage)){for(var n=e.event.forma;null!=n;)i.removeKey(this.formaCache_,n.formaID),n=n.parent;this.graph_=null}},getPGMReferenceForForma:function(t){var e,n,r;return(e=this.formaCache_[t.formaID])?e:(n=this.mappers.getMapper(t))?(r=n.makePGMRef(t,this.settings,this))?(this.formaCache_[t.formaID]=r,r):(a.CoreAssert.fail("Mapper at path "+M.TheoDocumentUtils.debugFormaPath(t)+" did not produce a reference.","FormaPGMCache.getPGMReferenceForForma","FormaPGMCache.swift",58),null):(a.CoreAssert.fail("No pgm mapper available at path "+M.TheoDocumentUtils.debugFormaPath(t)+" ","FormaPGMCache.getPGMReferenceForForma","FormaPGMCache.swift",62),null)},childReferences:function(t){for(var e=[],n=i.iter(t.childrenAsArray);!n.done;n.next()){var r,o=n.value;(r=this.getPGMReferenceForForma(o))&&e.push(r)}return e},referenceForForma:function(t){return this.getPGMReferenceForForma(t)},getGraph:function(){return this.validate(),this.graph_},resourcesForGraph:function(t){var e=this,n={};return t.visit((function(t){var r,o,a,s,u=null;(r=i.as(t,f.PGMImage))?u=r.contentID:(o=i.as(t,P.PGMVideo))?u=o.contentID:(a=i.as(t,d.PGMSVG))&&(u=a.contentID),null!=u&&null==n[u]&&(s=i.opt(l.Host.resourceUtils,(function(t){return t.getPGMResourceProviderForURL(i.opt(e.page,(function(t){return t.document})),u)})))&&(n[u]=s)})),new h.PGMResourceProviderList(i.clone(n))},getGraphForForma:function(t){var e;return(e=this.getPGMReferenceForForma(t))?new p.PGMGraph(e.child,t.bounds,this.settings.asDynamic?m.PGMUtils.calculateDuration(e):0,this.resourcesForGraph(e.child)):(a.CoreAssert.fail("getGraphForForma: couldn't get a reference from which to build a graph.","FormaPGMCache.getGraphForForma","FormaPGMCache.swift",122),null)},validate:function(){var t,e;if(null==this.graph_&&(t=this.page))if(e=this.getPGMReferenceForForma(t.root)){var n=0;if(this.settings.asDynamic){var r,o=!1;(r=t.animationController.animationStyle)&&(o=!r.isNoStyle()),n=o?c.MotionUtils.determineTotalDuration(t).seconds:m.PGMUtils.calculateDuration(e)}var i=t.pageSize;this.graph_=new p.PGMGraph(e.child,T.TheoRect.fromSize(i),n,this.resourcesForGraph(e.child))}else a.CoreAssert.fail("failed to generate a reference for root","FormaPGMCache.validate","FormaPGMCache.swift",155)}}}),r)},mGL3:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("gXiO"),u=n("QgZx"),l=n("ZhwN");o.OrderedFontSet=(r=function(){this.descriptors_=[],this.familyKeys_=[],this.familyFaces_=[],this.clock_=0,this.fontSetID=l.GUIDUtils.makeGUID(),s.CoreObject.call(this)},i.defineClass({name:"OrderedFontSet",ctor:r,superName:"CoreObject",statics:{fromList:function(t){for(var e=new r,n=i.iter(t);!n.done;n.next()){var o=n.value;e.append(o)}return e}},props:{descriptors:{get:function(){return this.descriptors_.concat()}},count:{get:function(){return this.descriptors_.length}},familyCount:{get:function(){return this.familyKeys_.length}},familyAt:function(t){return i.as(this.familyKeys_[t],"String")},facesInFamily:function(t){var e=i.indexOf(this.familyKeys_,t);return null==e?(a.CoreAssert.warning("Invalid family ("+t+") in facesInFamily()"),null):i.sort(this.familyFaces_[e],(function(t,e){var n=t.source==u.FontSource.TYPEKIT_PREMIUM||t.source==u.FontSource.TYPEKIT_FREE,r=e.source==u.FontSource.TYPEKIT_PREMIUM||e.source==u.FontSource.TYPEKIT_FREE;return!(!n||r)||!(!n&&r)&&(0==t.usWeightClass||0==e.usWeightClass?t.weight==e.weight?(t.italic||0!=t.italicAngle)==(e.italic||0!=e.italicAngle)?t.label.length<e.label.length:!t.italic&&0==t.italicAngle:t.weight<e.weight:t.usWeightClass==e.usWeightClass?t.usWidthClass==e.usWidthClass?t.weight==e.weight?(t.italic||0!=t.italicAngle)==(e.italic||0!=e.italicAngle)?t.label.length<e.label.length:!t.italic&&0==t.italicAngle:t.weight<e.weight:t.usWidthClass<e.usWidthClass:t.usWeightClass<e.usWeightClass)}))},defaultFaceInFamily:function(t){var e=i.clone(this.facesInFamily(t));function n(t){for(var n=i.iter(e);!n.done;n.next()){var r=n.value;if(r.displayFaceName.includes(t))return r}return null}a.CoreAssert.isTrue(null!=e,"facesInFamily returns nil for "+t,"OrderedFontSet.defaultFaceInFamily","OrderedFontSet.swift",109);for(var r=i.iter(["Regular","Normal","Plain","Book","Display"]);!r.done;r.next())if(o=n(r.value))return o;for(var o,s,u=1e5,l=1e5,c=i.iter(e);!c.done;c.next()){var p=c.value,f=p.usWeightClass;f=0==f?p.weight:f,!p.italic&&Math.abs(f-400)<u?(u=Math.abs(f-400),o=p):p.italic&&Math.abs(f-400)<l&&(l=Math.abs(f-400),s=p)}return null!=o?o:null!=s?s:i.opt(e,(function(t){return t[0]}))},fontAt:function(t){return t<0||t>=this.descriptors_.length?(a.CoreAssert.fail("Invalid index ("+t+") in fontAt()","OrderedFontSet.fontAt","OrderedFontSet.swift",163),null):this.descriptors_[t]},forEach:function(t){this.descriptors_.forEach(t)},indexOf:function(t){return i.indexOfEq(this.descriptors_,t,u._equality_FontDescriptor_FontDescriptor)},getIndexOfPostScriptName:function(t){for(var e=0,n=i.iter(this.descriptors_);!n.done;n.next()){if(n.value.postScriptName==t)return e;e+=1}return null},filter:function(t){return this.descriptors_.filter(t,this)},find:function(t){return this.descriptors_.find(t,this)},append:function(t){if(!this.contains(t)){this.clock_+=1,this.descriptors_.push(t);var e=t.displayFamilyName,n=i.indexOf(this.familyKeys_,e);null==n&&(this.familyKeys_.push(e),this.familyFaces_.push([])),n=i.indexOf(this.familyKeys_,e),this.familyFaces_[n].push(t)}},contains:function(t){return i.containsEq(this.descriptors_,t,u._equality_FontDescriptor_FontDescriptor)},remove:function(t){this.clock_+=1,i.remove(this.descriptors_,t);var e=t.displayFamilyName,n=i.indexOf(this.familyKeys_,e);if(null!=n){var r=this.familyFaces_[n];i.remove(r,t),0==r.length&&(i.remove(this.familyKeys_,e),this.familyFaces_.splice(n,1))}},clone:function(){var t=new r;return this.descriptors_.forEach((function(e){return t.append(e)})),t},sort:function(){var t=i.sort(this.descriptors_,(function(t,e){return t.postScriptName>e.postScriptName}));this.descriptors_=[];for(var e=i.iter(t);!e.done;e.next()){var n=e.value;this.descriptors_.push(n)}},revisionNumber:{get:function(){return this.clock_}}}}),r)},"pR+7":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),u=n("7Pku"),l=n("w/+j"),c=n("5D0C"),p=n("jLWG"),f=n("jfma"),h=n("yjxF"),d=n("Aj79"),m=n("Ucb9"),P=n("K0Rh"),M=n("Zifs"),T=n("hgLm");i.RootFormaToPGMMapper=(r=function t(){u.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"RootFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=P.RootForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance}},props:{makePGMRef:function(t,e,n){var r,o,i;if((r=a.as(t,P.RootForma))&&(o=n.childReferences(r))&&(i=r.bounds)){var u=r.style.colors.fieldPrimary||M.SolidColor.WHITE,g=new T.TheoRectanglePath(i),A=new d.PGMReference(new m.PGMShape(r.formaID+"-background",new h.PGMNodeMetadata(r.formaID,"background"),c.PGMAnimationList.EMPTY,i,[g],u)),F=a.clone([A].concat(a.clone(o)));return l.FormaToPGMUtils.applyAnimations(e,t,new d.PGMReference(new p.PGMClip(r.formaID,new h.PGMNodeMetadata(r.formaID,"clip"),c.PGMAnimationList.EMPTY,a.clone(F),[g]),new f.PGMCompositingParams(r.placement,r.style.opacity)))}return s.CoreAssert.fail("root forma child reference generation failed","RootFormaToPGMMapper.makePGMRef","RootFormaToPGMMapper.swift",72),null}}}),r)},s3ad:function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),u=n("7Pku"),l=n("w/+j"),c=n("5D0C"),p=n("jfma"),f=n("bauG"),h=n("wH/i"),d=n("yjxF"),m=n("Aj79"),P=n("sJQG"),M=n("sWrh"),T=n("s3Tu"),g=n("zjod");i.VideoFormaToPGMMapper=(r=function t(){u.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"VideoFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=g.VideoForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance}},props:{makePGMRef:function(t,e,n){var r,o,i;return(r=a.as(t,g.VideoForma))?e.asDynamic?(o=(i=a.opt(r.videoContentNode,(function(t){return t.duration})))?new c.PGMAnimationList([new h.PGMMediaPlayAnimation(new M.PGMUnaryFunction(new P.PGMRange(0,i.seconds),P.PGMRange.UNIT))]):c.PGMAnimationList.EMPTY,l.FormaToPGMUtils.applyAnimations(e,t,new m.PGMReference(new T.PGMVideo(r.formaID,new d.PGMNodeMetadata(r.formaID,"video"),o,r.bounds,r.videoContentNode.url),new p.PGMCompositingParams(r.placement,r.style.opacity)))):l.FormaToPGMUtils.applyAnimations(e,t,new m.PGMReference(new f.PGMImage(r.formaID,new d.PGMNodeMetadata(r.formaID,"poster"),c.PGMAnimationList.EMPTY,r.bounds,r.contentNode.url),new p.PGMCompositingParams(r.placement,r.style.opacity))):(s.CoreAssert.fail("why calling VideoFormaToPGMMapper for a not-video-forma?","VideoFormaToPGMMapper.makePGMRef","VideoFormaToPGMMapper.swift",82),null)}}}),r)},uUew:function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("gXiO");o.TextRange=(r=function(t,e){this.start=t,this.end=e,a.CoreAssert.isTrue(e>=t&&t>=0,"TextRange is invalid. start - "+t+" end - "+e,"TextRange.init","TextRange.swift",19),s.CoreObject.call(this)},i.defineClass({name:"TextRange",ctor:r,superName:"CoreObject",props:{length:{get:function(){return this.end-this.start}}}}),r)},"w/+j":function(t,e,n){var r,o=e,i=n("oAGj"),a=n("SpAV"),s=n("c+uM"),u=n("tGKA"),l=n("5D0C"),c=n("WUDy"),p=n("sJQG"),f=n("Ucb9"),h=n("9K9k"),d=n("/eOI"),m=n("bAjp"),P=n("f/aw"),M=n("zW52"),T=n("bJhu"),g=n("mj5y"),A=n("sWrh"),F=n("sIWg"),y=n("xm77");o.FormaToPGMUtils=(r=function(){},i.defineClass({name:"FormaToPGMUtils",ctor:r,statics:{createTimeFunc:function(t,e){var n,r=new p.PGMRange(t.time.seconds,e.time.seconds);switch(t.timingFunction){case"Linear":n=new A.PGMUnaryFunction(r,p.PGMRange.UNIT);break;case"Step":case"Step0":case"Step1":n=new A.PGMUnaryFunction(r,new p.PGMRange(0,0));break;case"EaseIn":case"EaseOut":case"EaseInOut":var o=t.timingFunction==y.TimingFunctionType.EaseIn?d.PGMEasingType.EaseIn:t.timingFunction==y.TimingFunctionType.EaseOut?d.PGMEasingType.EaseOut:d.PGMEasingType.EaseInAndOut;n=new d.PGMSineEasingFunction(o,r,p.PGMRange.UNIT);break;default:a.CoreAssert.warning("Timing-func not yet converyed to PGM: "+t.timingFunction),n=new A.PGMUnaryFunction(r,p.PGMRange.UNIT)}return n},determineOpacity:function(t){var e;return(e=i.as(t.style,s.LockupStyle))?e.textOpacity:i.opt(t.style,(function(t){return t.opacity}))},createTransformAnimation:function(t,e,n,o){var i,a=n.placement,s=o.placement;return a.isIdentity&&s.isIdentity||(i=new M.PGMTransformAnimation(r.createTimeFunc(n,o),new M.PGMTransformedBounds(a.concat(e),g.PGMUtils.calcBounds(t,u.Matrix2D.Identity)||F.TheoRect.Zero),new M.PGMTransformedBounds(s.concat(e),g.PGMUtils.calcBounds(t,u.Matrix2D.Identity)||F.TheoRect.Zero))),i},createOpacityAnimation:function(t,e){var n,o=r.determineOpacity(t);if(null==o)return n;var i=r.determineOpacity(e);return null==i?n:n=new c.PGMOpacityAnimation(r.createTimeFunc(t,e),o,i)},createTextAnimation:function(t,e,n){var o,a=i.as(t,m.PGMText);if(null==a)return o;var s=i.opt(e.style,(function(t){return t.colors.fieldPrimary}));if(null==s)return o;var u=i.opt(n.style,(function(t){return t.colors.fieldPrimary}));if(null==u)return o;var l=new T.PGMTextStyle(a.style.font,a.style.size,s,a.style.strokeColor,a.style.strokeWidth,a.style.tracking),c=new T.PGMTextStyle(a.style.font,a.style.size,u,a.style.strokeColor,a.style.strokeWidth,a.style.tracking);return o=new P.PGMTextAnimation(r.createTimeFunc(e,n),e.bounds||a.bounds,l,n.bounds||a.bounds,c)},createShapeAnimation:function(t,e,n){var o,a=i.as(t,f.PGMShape);if(null==a)return o;var s=i.opt(e.style,(function(t){return t.colors.fieldPrimary}));if(null==s)return o;var u=i.opt(n.style,(function(t){return t.colors.fieldPrimary}));return null==u?o:o=new h.PGMShapeAnimation(r.createTimeFunc(e,n),s,e.bounds||a.bounds,u,n.bounds||a.bounds)},createContentAnimation:function(t,e,n){var o;return t instanceof m.PGMText?o=r.createTextAnimation(t,e,n):t instanceof f.PGMShape&&(o=r.createShapeAnimation(t,e,n)),o},convertAnimation:function(t,e,n,o){void 0===o&&(o=!0);var a=[];if(!(n.keyFrames.length>1))return a;for(var s=n.keyFrames.length-2,u=i.iter(i.range(0,s,!0));!u.done;u.next()){var l,c,p,f=u.value,h=n.keyFrames[f],d=n.keyFrames[f+1];o&&((l=r.createTransformAnimation(t,e,h,d))&&a.push(l),(c=r.createOpacityAnimation(h,d))&&a.push(c)),(p=r.createContentAnimation(t,h,d))&&a.push(p)}return a},createAnimations:function(t,e){var n,o=[];if(n=e.animation){var a=i.clone(r.convertAnimation(t,e.placement,n));i.append(o,a)}for(var s=e.parent;null!=s;){var u;(u=i.opt(s,(function(t){return t.animation})))&&(a=i.clone(r.convertAnimation(t,e.placement,u,!1)),i.append(o,a)),s=i.opt(s,(function(t){return t.parent}))}return l.PGMAnimationList.fromArray(o)},applyAnimations:function(t,e,n){if(!t.asDynamic)return n;var o=r.createAnimations(n.child,e),i=n.animations.merge(o);return n.withAnimations(i)}}}),r)},x4Gy:function(t,e,n){var r,o,i,a,s,u,l,c,p,f,h,d,m,P,M=e,T=n("oAGj"),g=n("SpAV"),A=n("gXiO"),F=n("dJuF"),y=n("ZhwN"),G=n("iCxV"),R=n("c+uM"),_=n("Quhx"),v=n("Zifs"),x=n("a9ow"),C=n("90dd"),b=n("uUew");M.TextRun=(r=function(t,e){this.attr=t,this.length=e},T.defineClass({name:"TextRun",ctor:r}),r),M.AttributeInfo=(o=function(t,e){this.attr=t,this.range=e,A.CoreObject.call(this)},T.defineClass({name:"AttributeInfo",ctor:o,superName:"CoreObject"}),o),M.SolidColorRun=(i=function(t,e){this.attr=t,this.range=e},T.defineClass({name:"SolidColorRun",ctor:i}),i),M.SolidColorRuns=(a=function(){this.runArrays_=[],A.CoreObject.call(this)},T.defineClass({name:"SolidColorRuns",ctor:a,superName:"CoreObject",props:{apply:function(t,e){0!=e.length&&this.runArrays_.push(new M.SolidColorRun(t,e))},clear:function(){this.runArrays_.splice(0)},applyNewAlpha:function(t,e){for(var n=T.iter(t.runArrays);!n.done;n.next()){var r=n.value,o=(1-e)*r.attr.alpha+1*e,i=new v.SolidColor(r.attr.red,r.attr.green,r.attr.blue,o);this.apply(i,r.range)}},runArrays:{get:function(){return this.runArrays_}},clone:function(){for(var t=new a,e=T.iter(this.runArrays_);!e.done;e.next()){var n=e.value;t.apply(n.attr,n.range)}return t}}}),a),M.RenderRuns=(s=function(){this.fillColors=new M.SolidColorRuns,this.strokeColors=new M.SolidColorRuns,A.CoreObject.call(this)},T.defineClass({name:"RenderRuns",ctor:s,superName:"CoreObject",props:{applyColors:function(t,e,n){0!=n.length&&(this.fillColors.apply(t,n),this.strokeColors.apply(e,n))},copyColorAlpha:function(t,e){for(var n=t.fontColor.value,r=t.fontStrokeColor.value,o=T.iter(e.fillColors.runArrays);!o.done;o.next()){var i=o.value,a=new v.SolidColor(n.red,n.green,n.blue,i.attr.alpha);this.fillColors.apply(a,i.range)}for(var s=T.iter(e.strokeColors.runArrays);!s.done;s.next()){var u=s.value,l=new v.SolidColor(r.red,r.green,r.blue,u.attr.alpha);this.strokeColors.apply(l,u.range)}},setAlphaFromAnimation:function(t,e,n){this.clear(),this.fillColors.applyNewAlpha(t.fillColors,n),this.strokeColors.applyNewAlpha(t.strokeColors,n)},clear:function(){this.fillColors.clear(),this.strokeColors.clear()},clone:function(){var t=new s;return t.fillColors=this.fillColors.clone(),t.strokeColors=this.strokeColors.clone(),t}}}),s),M.ContentTextModel=(u=function(){},T.defineClass({name:"ContentTextModel",ctor:u,superName:"TextModel",statics:{SCHEMA_CLASS_NAME:{get:function(){return"ContentTextModel"}},codec:{get:function(){return F.DBPropertyCodec.registerCodec(u.SCHEMA_CLASS_NAME,F.DBPropertyCodec.directObjectCodec(u.SCHEMA_CLASS_NAME))}},factory:{get:function(){return function(t,e,n,r){return u.init_866e(n,t)}}},_implements:function(t){return"IDBObject"==t||"TheoMessagePublisher"==t}},props:{init_d41d:function(){var t={text:[x.UTF16Attribute.init_2063("")]};T.super_init(this,M.TextModel,M.TextModel.prototype.init_dd5d,{},T.clone(t))},init_5aae:function(t){var e={},n={};if(null!=t)e=T.clone(t.state.allProperties);else{var r=[x.UTF16Attribute.init_2063("")];n[M.TextModel.PROPERTY_UTF16_NAME]=T.clone(r)}T.super_init(this,M.TextModel,M.TextModel.prototype.init_dd5d,T.clone(e),T.clone(n))},init_866e:function(t,e){T.super_init(this,M.TextModel,M.TextModel.prototype.init_866e,t,e);for(var n=T.iter(M.TextModel.allAttributeNames_);!n.done;n.next()){var r=n.value;r!=M.TextModel.PROPERTY_UTF16_NAME&&T.opt(this.getProperty(r),(function(t){return t.shouldWrite=!1}))}},className:{get:function(){return u.SCHEMA_CLASS_NAME}},apply:function(t,e){g.CoreAssert.fail("Content Node only wants text!","ContentTextModel.apply","TextModel.swift",180)},attributeAtIndex:function(t,e){return g.CoreAssert.fail("Content Node only has text! Call text instead","ContentTextModel.attributeAtIndex","TextModel.swift",183),null},clone:function(){return u.init_5aae(this)},match:function(t){this.clear(),this.set(M.TextModel.PROPERTY_UTF16_NAME,t.get(M.TextModel.PROPERTY_UTF16_NAME)),this.publish(new M.TextModelDidInsertMessage(this,0,this.text))},runArraysByAttrName:{get:function(){var t={},e=T.clone(T.as(this.get(M.TextModel.PROPERTY_UTF16_NAME),["Array",x.TextAttribute]));if(null!=e)t[M.TextModel.PROPERTY_UTF16_NAME]=T.clone(e);else{var n=[M.TextModel.defaultText];t[M.TextModel.PROPERTY_UTF16_NAME]=T.clone(n)}return t}},getRunArray:function(t){return t==M.TextModel.PROPERTY_UTF16_NAME?M.TextModel.prototype.getRunArray.call(this,t):null}}}),u),M.TextModel=(l=function(){},c={},T.defineClass({name:"TextModel",ctor:l,superName:"PostPublishingObject",statics:{PROPERTY_UTF16_NAME:"text",PROPERTY_FONT_NAME:"font-name",PROPERTY_FONT_SIZE:"font-size",PROPERTY_FONT_COLOR:"font-color",PROPERTY_FONT_STROKE_COLOR:"font-strokecolor",PROPERTY_FONT_STROKE_WIDTH:"font-strokewidth",PROPERTY_TEXT_LOOK:"text-look",PROPERTY_TRACKING:"tracking",SCHEMA_CLASS_NAME:{get:function(){return"TextModel"}},codec:{get:function(){return F.DBPropertyCodec.registerCodec(l.SCHEMA_CLASS_NAME,F.DBPropertyCodec.directObjectCodec(l.SCHEMA_CLASS_NAME))}},factory:{get:function(){return function(t,e,n,r){return l.init_866e(n,t)}}},defaultText:{get:function(){return null==l.defaultText_&&(l.defaultText_=x.UTF16Attribute.init_2063("")),l.defaultText_}},defaultFontColor:{get:function(){return null==l.defaultFontColor_&&(l.defaultFontColor_=x.FontColorAttribute.init_2063(G.Host.textModelUtils.defaultColor())),l.defaultFontColor_}},defaultFontName:{get:function(){return null==l.defaultFontName_&&(l.defaultFontName_=x.FontDescriptorAttribute.init_2063(G.Host.textModelUtils.defaultFont())),l.defaultFontName_}},defaultFontSize:{get:function(){return null==l.defaultFontSize_&&(l.defaultFontSize_=x.FontSizeAttribute.init_2063(G.Host.textModelUtils.defaultFontSize())),l.defaultFontSize_}},defaultFontStrokeColor:{get:function(){return null==l.defaultFontStrokeColor_&&(l.defaultFontStrokeColor_=x.FontStrokeColorAttribute.init_2063(G.Host.textModelUtils.defaultColor())),l.defaultFontStrokeColor_}},defaultFontStrokeWidth:{get:function(){return null==l.defaultFontStrokeWidth_&&(l.defaultFontStrokeWidth_=x.FontStrokeWidthAttribute.init_2063(0)),l.defaultFontStrokeWidth_}},defaultTextLook:{get:function(){return null==l.defaultTextLook_&&(l.defaultTextLook_=x.TextLookAttribute.init_2063(R.LockupTextLook.Fill)),l.defaultTextLook_}},defaultTracking:{get:function(){return null==l.defaultTracking_&&(l.defaultTracking_=x.TrackingAttribute.init_2063(0)),l.defaultTracking_}},allAttributeNames_:{get:function(){return void 0===c.allAttributeNames_&&(c.allAttributeNames_=[l.PROPERTY_UTF16_NAME,l.PROPERTY_FONT_COLOR,l.PROPERTY_FONT_NAME,l.PROPERTY_FONT_SIZE,l.PROPERTY_FONT_STROKE_COLOR,l.PROPERTY_FONT_STROKE_WIDTH,l.PROPERTY_TEXT_LOOK,l.PROPERTY_TRACKING]),c.allAttributeNames_}},defaultAttribute:function(t){switch(t){case"text":return l.defaultText;case"font-color":return l.defaultFontColor;case"font-name":return l.defaultFontName;case"font-size":return l.defaultFontSize;case"font-strokecolor":return l.defaultFontStrokeColor;case"font-strokewidth":return l.defaultFontStrokeWidth;case"text-look":return l.defaultTextLook;case"tracking":return l.defaultTracking;default:return null}return null},_implements:function(t){return"IDBObject"==t||"TheoMessagePublisher"==t}},props:{init_d41d:function(){for(var t={},e=T.iter(l.allAttributeNames_);!e.done;e.next()){var n=e.value;t[n]=[l.defaultAttribute(n)]}T.super_init(this,_.PostPublishingObject,_.PostPublishingObject.prototype.init_dd5d,{},T.clone(t))},init_dd5d:function(t,e){for(var n=T.clone(e),r=[],o=T.iter(l.allAttributeNames_);!o.done;o.next()){var i=o.value;null==t[i]&&null==e[i]&&(n[i]=[l.defaultAttribute(i)],r.push(i))}T.super_init(this,_.PostPublishingObject,_.PostPublishingObject.prototype.init_dd5d,T.clone(t),T.clone(n));for(var a=T.iter(r);!a.done;a.next()){var s=a.value;T.opt(this.getProperty(s),(function(t){return t.shouldWrite=!1}))}},init_36cd:function(t){T.super_init(this,_.PostPublishingObject,_.PostPublishingObject.prototype.init_dd5d,T.clone(T.opt(t,(function(t){return t.state.allProperties}))||{}),{})},init_866e:function(t,e){T.super_init(this,_.PostPublishingObject,_.PostPublishingObject.prototype.init_866e,t,e)},className:{get:function(){return l.SCHEMA_CLASS_NAME}},textAttr:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(l.PROPERTY_UTF16_NAME),["Array",x.TextAttribute]),(function(t){return t[0]})),x.UTF16Attribute))||null!=t?t:l.defaultText},set:function(t){this.set(l.PROPERTY_UTF16_NAME,[t])}},fontColor:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(l.PROPERTY_FONT_COLOR),["Array",x.TextAttribute]),(function(t){return t[0]})),x.FontColorAttribute))||null!=t?t:l.defaultFontColor},set:function(t){this.set(l.PROPERTY_FONT_COLOR,[t])}},fontName:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(l.PROPERTY_FONT_NAME),["Array",x.TextAttribute]),(function(t){return t[0]})),x.FontDescriptorAttribute))||null!=t?t:l.defaultFontName},set:function(t){this.set(l.PROPERTY_FONT_NAME,[t])}},fontSize:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(l.PROPERTY_FONT_SIZE),["Array",x.TextAttribute]),(function(t){return t[0]})),x.FontSizeAttribute))||null!=t?t:l.defaultFontSize},set:function(t){this.set(l.PROPERTY_FONT_SIZE,[t])}},fontStrokeColor:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(l.PROPERTY_FONT_STROKE_COLOR),["Array",x.TextAttribute]),(function(t){return t[0]})),x.FontStrokeColorAttribute))||null!=t?t:l.defaultFontStrokeColor},set:function(t){this.set(l.PROPERTY_FONT_STROKE_COLOR,[t])}},fontStrokeWidth:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(l.PROPERTY_FONT_STROKE_WIDTH),["Array",x.TextAttribute]),(function(t){return t[0]})),x.FontStrokeWidthAttribute))||null!=t?t:l.defaultFontStrokeWidth},set:function(t){this.set(l.PROPERTY_FONT_STROKE_WIDTH,[t])}},textLook:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(l.PROPERTY_TEXT_LOOK),["Array",x.TextAttribute]),(function(t){return t[0]})),x.TextLookAttribute))||null!=t?t:l.defaultTextLook},set:function(t){this.set(l.PROPERTY_TEXT_LOOK,[t])}},tracking:{get:function(){var t;return(t=T.as(T.opt(T.as(this.get(l.PROPERTY_TRACKING),["Array",x.TextAttribute]),(function(t){return t[0]})),x.TrackingAttribute))||null!=t?t:l.defaultTracking},set:function(t){this.set(l.PROPERTY_TRACKING,[t])}},description:{get:function(){for(var t,e="TextModel: ",n=T.iter(l.allAttributeNames_);!n.done;n.next()){var r=n.value;e+=r+": "+((t=T.opt(T.first(T.as(this.get(r),["Array",x.TextAttribute])),(function(t){return t.description})))||null!=t?t:"<unset>")+" | "}return e}},runArraysByAttrName:{get:function(){for(var t={},e=T.iter(l.allAttributeNames_);!e.done;e.next()){var n=e.value,r=T.clone(T.as(this.get(n),["Array",x.TextAttribute]));if(null!=r)t[n]=T.clone(r);else{var o=l.defaultAttribute(n);null!=o&&(t[n]=[o])}}return t}},getRunArray:function(t){var e;if(e=T.as(this.get(t),["Array",x.TextAttribute]))return e;var n=l.defaultAttribute(t);return null!=n?[n]:null},stamp:{get:function(){if(null==this.stamp_){this.stamp_="";for(var t=T.iter(this.runArraysByAttrName);!t.done;t.next()){var e=t.value;this.stamp_=this.stamp_+"|"+e[0].stamp}}return this.stamp_}},text:{get:function(){return this.textAttr.value},set:function(t){t!=this.textAttr.value&&(this.textAttr=x.UTF16Attribute.init_2063(t),this.stamp_=null,this.updateAttributeRunLengths(t.length))}},isEqual:function(t){var e;if(e=T.as(t,l)){var n=T.clone(this.runArraysByAttrName),r=T.clone(e.runArraysByAttrName);if(T.count(r)!=T.count(n))return!1;for(var o=T.iter(n);!o.done;o.next()){var i,a=o.key,s=o.value;if(!(i=r[a]))return!1;if(i[0]!=s[0])return!1}return!0}return!1},hash:{get:function(){return T.hashValue(this.text)}},apply:function(t,e){this.ensureValidStringRange(this.text,e),g.CoreAssert.isTrue(0==e.start&&e.length==this.text.length,void 0,"TextModel.apply","TextModel.swift",506);var n,r,o,i,a,s,u,l=!1;t instanceof x.UTF16Attribute?g.CoreAssert.fail("Attempted to set text through apply!","TextModel.apply","TextModel.swift",512):(n=T.as(t,x.FontColorAttribute))?n!=this.fontColor&&(this.publish(new M.TextModelWillApplyMessage(this,e,n)),this.fontColor=n.cloneToNewLength(e.length),l=!0):(r=T.as(t,x.FontDescriptorAttribute))?r!=this.fontName&&(this.publish(new M.TextModelWillApplyMessage(this,e,r)),this.fontName=r.cloneToNewLength(e.length),l=!0):(o=T.as(t,x.FontSizeAttribute))?o!=this.fontSize&&(this.publish(new M.TextModelWillApplyMessage(this,e,o)),this.fontSize=o.cloneToNewLength(e.length),l=!0):(i=T.as(t,x.FontStrokeColorAttribute))?i!=this.fontStrokeColor&&(this.publish(new M.TextModelWillApplyMessage(this,e,i)),this.fontStrokeColor=i.cloneToNewLength(e.length),l=!0):(a=T.as(t,x.FontStrokeWidthAttribute))?a!=this.fontStrokeWidth&&(this.publish(new M.TextModelWillApplyMessage(this,e,a)),this.fontStrokeWidth=a.cloneToNewLength(e.length),l=!0):(s=T.as(t,x.TextLookAttribute))?s!=this.textLook&&(this.publish(new M.TextModelWillApplyMessage(this,e,s)),this.textLook=s.cloneToNewLength(e.length),l=!0):(u=T.as(t,x.TrackingAttribute))?u!=this.tracking&&(this.publish(new M.TextModelWillApplyMessage(this,e,u)),this.tracking=u.cloneToNewLength(e.length),l=!0):g.CoreAssert.fail("Unknown attribute "+t,"TextModel.apply","TextModel.swift",557),l&&(this.stamp_=null,this.publish(new M.TextModelDidApplyMessage(this,e,t)))},appliedAttributeNames:{get:function(){var t=[];return T.each(this.runArraysByAttrName,(function(e,n){return t.push(e)})),t}},appliedAttributeNamesAtIndex:function(t){return this.appliedAttributeNames},attributeAtIndex:function(t,e){var n,r;return(n=this.getRunArray(t))?(g.CoreAssert.isTrue(1==n.length,void 0,"TextModel.attributeAtIndex","TextModel.swift",590),new M.AttributeInfo(n[0],new b.TextRange(0,n[0].length))):(r=l.defaultAttribute(t))?new M.AttributeInfo(r,this.rangeAll):null},attributesInRange:function(t,e){var n,r,o=[];return(n=this.getRunArray(t))?(g.CoreAssert.isTrue(1==n.length,void 0,"TextModel.attributesInRange","TextModel.swift",607),o.push(new M.AttributeInfo(n[0],this.constrain(new b.TextRange(0,n[0].length),e.start,e.end)))):(r=l.defaultAttribute(t))&&o.push(new M.AttributeInfo(r,new b.TextRange(e.start,e.end))),o},rangeAll:{get:function(){return new b.TextRange(0,this.text.length)}},match:function(t){this.clear();for(var e=T.iter(l.allAttributeNames_);!e.done;e.next()){var n=e.value;this.set(n,t.get(n))}this.publish(new M.TextModelDidInsertMessage(this,0,this.text))},clone:function(){return this.fork(y.GUIDUtils.makeGUID())},insert:function(t,e){var n=this.text;this.ensureValidStringIndex(n,e);var r=n.substr(0,e)+t+n.substr(e);this.publish(new M.TextModelWillInsertMessage(this,e,t)),this.text=r,this.publish(new M.TextModelDidInsertMessage(this,e,t))},remove:function(t){var e=this.text;this.ensureValidStringRange(e,t);var n=e.substr(0,t.start)+e.substr(t.end),r=e.substr(t.start,t.length);this.publish(new M.TextModelWillRemoveMessage(this,t.start,r)),this.text=n,this.publish(new M.TextModelDidRemoveMessage(this,t.start,r))},clear:function(){this.remove(this.rangeAll)},forEachAttributeValueInRange:function(t,e,n){var r;(r=this.getRunArray(t))&&(g.CoreAssert.isTrue(1==r.length,void 0,"TextModel.forEachAttributeValueInRange","TextModel.swift",687),n(e,r[0]))},shift:function(t,e){return new b.TextRange(t.start+e,t.end+e)},constrain:function(t,e,n){return new b.TextRange(Math.max(t.start,e),Math.min(t.end,n))},updateAttributeRunLengths:function(t){var e=this;g.CoreAssert.isTrue(t>=0,void 0,"TextModel.updateAttributeRunLengths","TextModel.swift",706),T.each(this.runArraysByAttrName,(function(n,r){g.CoreAssert.isTrue(1==r.length,void 0,"TextModel.updateAttributeRunLengths","TextModel.swift",709),e.set(n,[r[0].cloneToNewLength(t)])}))},ensureValidStringIndex:function(t,e){g.CoreAssert.isTrue(e>=0&&e<=t.length,void 0,"TextModel.ensureValidStringIndex","TextModel.swift",715)},ensureValidStringRange:function(t,e){this.ensureValidStringIndex(t,e.start),this.ensureValidStringIndex(t,e.end>0?e.end-1:e.end)}}}),l),M.TextModelWillApplyMessage=(p=function t(e,n,r){this.model=e,this.range=n,this.attribute=r,C.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelWillApplyMessage",ctor:p,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelWillApplyMessage"}}}}),p),M.TextModelDidApplyMessage=(f=function t(e,n,r){this.model=e,this.range=n,this.attribute=r,C.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelDidApplyMessage",ctor:f,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelDidApplyMessage"}}}}),f),M.TextModelWillInsertMessage=(h=function t(e,n,r){this.model=e,this.index=n,this.text=r,C.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelWillInsertMessage",ctor:h,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelWillInsertMessage"}}}}),h),M.TextModelDidInsertMessage=(d=function t(e,n,r){this.model=e,this.index=n,this.text=r,C.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelDidInsertMessage",ctor:d,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelDidInsertMessage"}}}}),d),M.TextModelWillRemoveMessage=(m=function t(e,n,r){this.model=e,this.index=n,this.text=r,C.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelWillRemoveMessage",ctor:m,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelWillRemoveMessage"}}}}),m),M.TextModelDidRemoveMessage=(P=function t(e,n,r){this.model=e,this.index=n,this.text=r,C.TheoMessage.call(this,t.TYPE,e)},T.defineClass({name:"TextModelDidRemoveMessage",ctor:P,superName:"TheoMessage",statics:{TYPE:{get:function(){return"TextModelDidRemoveMessage"}}}}),P)},"zW/s":function(t,e,n){var r,o,i=e,a=n("oAGj"),s=n("SpAV"),u=n("7Pku"),l=n("w/+j"),c=n("5D0C"),p=n("jfma"),f=n("yjxF"),h=n("Aj79"),d=n("ZA1K"),m=n("WWR6");i.VectorFormaToPGMMapper=(r=function t(){u.FormaToPGMMapper.call(this,t.FORMA_KIND)},o={},a.defineClass({name:"VectorFormaToPGMMapper",ctor:r,superName:"FormaToPGMMapper",statics:{FORMA_KIND:{get:function(){return void 0===o.FORMA_KIND&&(o.FORMA_KIND=m.VectorForma.KIND),o.FORMA_KIND}},instance:{get:function(){return void 0===o.instance&&(o.instance=new r),o.instance}},createMapper:function(t){return r.instance}},props:{makePGMRef:function(t,e,n){var r;return(r=a.as(t,m.VectorForma))?l.FormaToPGMUtils.applyAnimations(e,t,new h.PGMReference(new d.PGMSVG(r.formaID,new f.PGMNodeMetadata(r.formaID,"VectorForma"),c.PGMAnimationList.EMPTY,r.bounds,r.contentNode.url),new p.PGMCompositingParams(r.placement,r.style.opacity))):(s.CoreAssert.fail("VectorFormaToPGMMapper called for something that's not a VectorForma","VectorFormaToPGMMapper.makePGMRef","VectorFormaToPGMMapper.swift",44),null)}}}),r)}}]);
//# sourceMappingURL=vendors_npm_spark_6bc71c67-6cee95f1.js.map