!function(e){function t(t){for(var i,r,s=t[0],l=t[1],c=t[2],d=0,h=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&h.push(o[r][0]),o[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(u&&u(t);h.length;)h.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},r={"m-web":0,0:0,1:0,"vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor":0,"brand-kit-chooser-view~brand-kit-editor~slate-web~user-profile-view":0,"brand-kit-chooser-view~brand-kit-context-views":0,"m-storage~spark-core-wraper":0,"npw-visual-browse-view~search-controller":0,"vendors~gic-voice-publishUtils":0},o={"m-web":0,0:0,1:0,"vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor":0,"brand-kit-chooser-view~brand-kit-editor~slate-web~user-profile-view":0,"brand-kit-chooser-view~brand-kit-context-views":0,"m-storage~spark-core-wraper":0,"npw-visual-browse-view~search-controller":0,"vendors~gic-voice-publishUtils":0},a=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[];r[e]?t.push(r[e]):0!==r[e]&&{"m-react-spectrum":1}[e]&&t.push(r[e]=new Promise((function(t,n){for(var i=e+"-"+{0:"8846b8cf",1:"d75d5eae",2:"1c25c0a4",3:"d64aaff0",4:"b2fd7b75",5:"fd1b9b03",6:"8b0ce0e9",7:"ff5f86a6",8:"1d477887",9:"b2418614",10:"bfaabbaa",11:"fcbf4e83","brand-kit-chooser-view~brand-kit-context-views":"ea9da69f","brand-kit-context-views":"9e191837","brand-kit-chooser-view~brand-kit-editor~slate-web~user-profile-view":"c1f1ad9f","brand-kit-chooser-view":"c7ed596f","vendors~brandswitcher~ccx-share-sheet~missingfontsmodal~non-editor-search-react~react-personalizer":"fac27782",missingfontsmodal:"a4771453","vendors~gic-voice-publishUtils":"fdf58f5e","gic-voice-publishUtils":"594be29a","vendors~gs-app-ac-theme-editor~voice-web":"1d5ec575","gs-app-ac-theme-editor":"05c17f2e","vendors~voice-web":"a925a969","voice-web":"693345ae",appboy:"a5188a69","ar-templates-controller":"faa25f59","authoring-context":"315900d0","user-profile-view":"8a04f4c0","brand-kit-conflict-resolver":"e027f0cd","custom-workspace-guide-me":"80fddd48","m-react-spectrum":"4ddff2c3","vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor":"d3f5ff79",react:"700c4569",brandswitcher:"ee4cda38","non-editor-search-react":"35ebbf6a","react-personalizer":"6b34e080","mui-cppublisher":"ba9eb30c","mui-cputils":"f37439e8","mui-pubcontroller":"4098a4e0","npw-visual-browse-view~search-controller~share-view":"5ffb4837","npw-visual-browse-view~search-controller":"7de0eba6","npw-visual-browse-view":"6453d552","share-view":"8e871a1f",pixi:"4e24ac94","project-filters-controller":"26dbda3f","sparkfonts-registry":"a61bad96","brand-kit-editor":"626bb7b3","brand-kit-controller":"bff152bb","search-controller":"d680672a","vendors~m-storage":"1ccec485","m-storage~spark-core-wraper":"5dba078d","m-storage":"916d1868","vendors~slate-app-ac-theme-editor~slate-web":"bc8882b0","slate-app-ac-theme-editor":"4595ed71","slate-web":"93f62d59","vendors~spark-core-wraper":"43df677a","spark-core-wraper":"07ef445a","ccx-share-sheet":"0106ea90","npw-search":"53865f3d"}[e]+".css",o=s.p+i,a=document.getElementsByTagName("link"),l=0;l<a.length;l++){var c=(u=a[l]).getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===i||c===o))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){var u;if((c=(u=d[l]).getAttribute("data-href"))===i||c===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var i=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=i,delete r[e],h.parentNode.removeChild(h),n(a)},h.href=o,document.getElementsByTagName("head")[0].appendChild(h)})).then((function(){r[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=o[e]=[t,i]}));t.push(n[2]=i);var a,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=function(e){return s.p+""+({"brand-kit-chooser-view~brand-kit-context-views":"brand-kit-chooser-view~brand-kit-context-views","brand-kit-context-views":"brand-kit-context-views","brand-kit-chooser-view~brand-kit-editor~slate-web~user-profile-view":"brand-kit-chooser-view~brand-kit-editor~slate-web~user-profile-view","brand-kit-chooser-view":"brand-kit-chooser-view","vendors~brandswitcher~ccx-share-sheet~missingfontsmodal~non-editor-search-react~react-personalizer":"vendors~brandswitcher~ccx-share-sheet~missingfontsmodal~non-editor-search-react~react-personalizer",missingfontsmodal:"missingfontsmodal","vendors~gic-voice-publishUtils":"vendors~gic-voice-publishUtils","gic-voice-publishUtils":"gic-voice-publishUtils","vendors~gs-app-ac-theme-editor~voice-web":"vendors~gs-app-ac-theme-editor~voice-web","gs-app-ac-theme-editor":"gs-app-ac-theme-editor","vendors~voice-web":"vendors~voice-web","voice-web":"voice-web",appboy:"appboy","ar-templates-controller":"ar-templates-controller","authoring-context":"authoring-context","user-profile-view":"user-profile-view","brand-kit-conflict-resolver":"brand-kit-conflict-resolver","custom-workspace-guide-me":"custom-workspace-guide-me","m-react-spectrum":"m-react-spectrum","vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor":"vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor",react:"react",brandswitcher:"brandswitcher","non-editor-search-react":"non-editor-search-react","react-personalizer":"react-personalizer","mui-cppublisher":"mui-cppublisher","mui-cputils":"mui-cputils","mui-pubcontroller":"mui-pubcontroller","npw-visual-browse-view~search-controller~share-view":"npw-visual-browse-view~search-controller~share-view","npw-visual-browse-view~search-controller":"npw-visual-browse-view~search-controller","npw-visual-browse-view":"npw-visual-browse-view","share-view":"share-view",pixi:"pixi","project-filters-controller":"project-filters-controller","sparkfonts-registry":"sparkfonts-registry","brand-kit-editor":"brand-kit-editor","brand-kit-controller":"brand-kit-controller","search-controller":"search-controller","vendors~m-storage":"vendors~m-storage","m-storage~spark-core-wraper":"m-storage~spark-core-wraper","m-storage":"m-storage","vendors~slate-app-ac-theme-editor~slate-web":"vendors~slate-app-ac-theme-editor~slate-web","slate-app-ac-theme-editor":"slate-app-ac-theme-editor","slate-web":"slate-web","vendors~spark-core-wraper":"vendors~spark-core-wraper","spark-core-wraper":"spark-core-wraper","ccx-share-sheet":"ccx-share-sheet","npw-search":"npw-search"}[e]||e)+"-"+{0:"8846b8cf",1:"d75d5eae",2:"1c25c0a4",3:"d64aaff0",4:"b2fd7b75",5:"fd1b9b03",6:"8b0ce0e9",7:"ff5f86a6",8:"1d477887",9:"b2418614",10:"bfaabbaa",11:"fcbf4e83","brand-kit-chooser-view~brand-kit-context-views":"ea9da69f","brand-kit-context-views":"9e191837","brand-kit-chooser-view~brand-kit-editor~slate-web~user-profile-view":"c1f1ad9f","brand-kit-chooser-view":"c7ed596f","vendors~brandswitcher~ccx-share-sheet~missingfontsmodal~non-editor-search-react~react-personalizer":"fac27782",missingfontsmodal:"a4771453","vendors~gic-voice-publishUtils":"fdf58f5e","gic-voice-publishUtils":"594be29a","vendors~gs-app-ac-theme-editor~voice-web":"1d5ec575","gs-app-ac-theme-editor":"05c17f2e","vendors~voice-web":"a925a969","voice-web":"693345ae",appboy:"a5188a69","ar-templates-controller":"faa25f59","authoring-context":"315900d0","user-profile-view":"8a04f4c0","brand-kit-conflict-resolver":"e027f0cd","custom-workspace-guide-me":"80fddd48","m-react-spectrum":"4ddff2c3","vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor":"d3f5ff79",react:"700c4569",brandswitcher:"ee4cda38","non-editor-search-react":"35ebbf6a","react-personalizer":"6b34e080","mui-cppublisher":"ba9eb30c","mui-cputils":"f37439e8","mui-pubcontroller":"4098a4e0","npw-visual-browse-view~search-controller~share-view":"5ffb4837","npw-visual-browse-view~search-controller":"7de0eba6","npw-visual-browse-view":"6453d552","share-view":"8e871a1f",pixi:"4e24ac94","project-filters-controller":"26dbda3f","sparkfonts-registry":"a61bad96","brand-kit-editor":"626bb7b3","brand-kit-controller":"bff152bb","search-controller":"d680672a","vendors~m-storage":"1ccec485","m-storage~spark-core-wraper":"5dba078d","m-storage":"916d1868","vendors~slate-app-ac-theme-editor~slate-web":"bc8882b0","slate-app-ac-theme-editor":"4595ed71","slate-web":"93f62d59","vendors~spark-core-wraper":"43df677a","spark-core-wraper":"07ef445a","ccx-share-sheet":"0106ea90","npw-search":"53865f3d"}[e]+".js"}(e);var c=new Error;a=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",c.name="ChunkLoadError",c.type=i,c.request=r,n[1](c)}o[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/static/",s.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;a.push([590,"m-base"]),n()}([function(e,t){e.exports=_},function(e,t){e.exports=jQuery},function(e,t){e.exports=Backbone},function(e,t){e.exports=Q},,,,,,function(e,t,n){var i=n(28),r=n(60),o=n(103),a=n(95),s=n(202),l=function(e,t,n){var c,d,u,h,p=e&l.F,f=e&l.G,g=e&l.S,m=e&l.P,v=e&l.B,b=f?i:g?i[t]||(i[t]={}):(i[t]||{}).prototype,y=f?r:r[t]||(r[t]={}),w=y.prototype||(y.prototype={});for(c in f&&(n=t),n)u=((d=!p&&b&&void 0!==b[c])?b:n)[c],h=v&&d?s(u,i):m&&"function"==typeof u?s(Function.call,u):u,b&&a(b,c,u,e&l.U),y[c]!=u&&o(y,c,h),m&&w[c]!=u&&(w[c]=u)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(8),n(5),n(25),n(158),n(160),n(22),n(161)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d){"use strict";var u,h;return u=a.extend({cachename:"confirmview",el:".confirm-overlay",mode:"confirm",clickTimeSafetyZone:250,events:{"click .confirm-view-bg":"handleBackgroundClick","click .cancel-btn":"handleCloseBtn","click .sp-cta-button-secondary":"handleCloseBtn","click .ok-btn":"handleConfirmBtn","click .confirm-view-prompt-field":"handlePromptFieldClick"},initialize:function(){t.bindAll(this,t.functionsIn(this)),this._initDefaultStrings()},_initDefaultStrings:function(){this.defaultOkText=r.getString("confirm-view-default-verb-ok"),this.defaultCancelText=r.getString("confirm-view-default-verb-cancel"),this.defaultWaiterTitle=r.getString("confirm-view-default-waiter-title")},setText:function(e,t){e=e||"",t=t||this.text$,e.jquery?(t.html(""),t.append(e)):t.text(e)},render:function(){var n;if(this.$el.length||(this.$el=e(document.body).find(".confirm-overlay")),window.marvel.events.trigger("spark-dialog-shown"),this.$el.addClass("v2"),this.$el.html(r.mustacheRender(l)),this.cancelBtn$=this.$el.find(".sp-cta-button-secondary"),this.isBeta&&this.$el.find(".confirm-view-dialog-title").addClass("beta"),this.$el[0].focus(),this._options.transparentOverlay&&this.$el.find(".confirm-view-bg").addClass("transparent-overlay"),this._options.className&&this.$el.addClass(this._options.className),Array.isArray(this.okText)){var i="";this.defaultConfirmIndex=this.okText.length-1,t.each(this.okText,function(e,t){var n=".confirm-btn-"+t;e.isDefault&&(this.defaultConfirmIndex=t),e.button$=this.$el.find(n),this.setText(e.text,e.button$),e.button$.data("id",e.id),i+=(t?", ":"")+n}.bind(this)),this.confirmBtn$=this.$el.find(i)}else this.defaultConfirmIndex=0,this.confirmBtn$=this.$el.find(".confirm-btn-0"),this.okText&&this.okText.id?(this.setText(this.okText.text||this.defaultOkText,this.confirmBtn$),this.confirmBtn$.data("id",this.okText.id)):(this.setText(this.okText||this.defaultOkText,this.confirmBtn$),this.confirmBtn$.removeData("id"));n=this.confirmBtn$.length,this.closeBtn$=this.$el.find(".confirm-view-close-btn"),this._options.hideCloseButton?this.closeBtn$.addClass("hide"):(this.closeBtn$.removeClass("hide"),this.closeBtn$.on("click",this.handleCloseBtn.bind(this))),this.confirmBtn$.on("click",this.handleConfirmBtn.bind(this)),this.confirmBtn$.removeClass("disabled").removeClass("hide"),this.cvShell$=this.$el.find(".confirm-view-shell"),this.cvShell$.addClass(this.mode),this.title$=this.$el.find(".confirm-view-dialog-title"),this.title$.text(this.question),this.text$=this.$el.find(".confirm-view-dialog-text"),this.setText(this.detail),this.waiter$=this.$el.find(".wait-spinner"),this._closeDefer&&this.cvShell$.addClass("can-wait"),this._addedKeyup||(this._addedKeyup=!0,e(document).on("keyup.dialog",this.handleKeyup)),"waiter"===this.mode?(this.setWaiterVis(!0),this._hideSpinner&&this.waiter$.addClass("hide")):"alert"!==this.mode?(this._options.hideCancelButton?this.cancelBtn$.addClass("hide"):(this.cancelBtn$.removeClass("disabled").removeClass("hide"),this.cancelBtn$.text(this.cancelText||this.defaultCancelText),this.cancelText&&this.cancelBtn$.text(this.cancelText)),"prompt"===this.mode&&(this.$el.find(".confirm-view-prompt-field-area").removeClass("hide"),this.promptField$=this.$el.find(".confirm-view-prompt-field"),this.promptField$.attr("placeholder",this.placeholderText),this.maxLen&&this.promptField$.attr("maxlength",this.maxLen),this.promptField$.val(this.defaultText),this.promptExtraStyles&&this.promptField$.css(this.promptExtraStyles))):this.cancelBtn$.addClass("hide"),this.cancelBtn$.hasClass("hide")||n++,this.cvShell$.addClass("num-buttons-"+n),this._options.additionalUI$&&this.$el.find(".confirm-view-content-shell").append(this._options.additionalUI$),this.$el.removeClass("hide"),this.setDialogDimensions();var o=!0;"prompt"===this.mode&&this.autoSelectPromptText&&(this.promptField$.select(),o=!1),o&&this.confirmBtn$[this.defaultConfirmIndex].focus(),this._ignoreNextKeyup=!1,this._options.afterRenderCallback&&"function"==typeof this._options.afterRenderCallback&&this._options.afterRenderCallback(this.$el)},onConfirm:function(e,t,n){this._confirmCallback=e,this.title=t,this.text=n},handleConfirmBtn:function(t){var n=!0;n=e(t.target).data("id")||n,this.handleBtn(n,t)},setDialogDimensions:function(){var e=this._options.minHeight||0;e&&this.cvShell$.css("min-height",e)},setWaiterVis:function(e){if(e){if("waiter"!==this.mode){var t=this._getBounds();this.cvShell$.css("height",t.height+"px")}else this.cvShell$.css("height","");this.title$.text(this.waiterTitle||this.defaultWaiterTitle),this.setText(this.waiterText||""),this.waiterText?this.cvShell$.addClass("waiter-has-text"):this.cvShell$.removeClass("waiter-has-text"),this.waiterProgressBar?(this._progressBarView||(this._progressBarView=new s),this.waiterProgressBar.el$=this.$el.find(".confirm-progress-bar"),this.waiterProgressBar.text$=this.waiterProgressBar.eventNames.updateText&&this.text$,this._progressBarView.setupProgress(this.waiterProgressBar),this._progressBarView.render(),this.cvShell$.addClass("showing-progress")):this.waitSuccess?this.cvShell$.addClass("showing-waiter-success"):this.cvShell$.addClass("showing-waiter"),this._canCancelWaiter?(this.cvShell$.addClass("can-cancel-waiter"),this._options.okOnly?this.cancelBtn$.addClass("hide"):this.cancelBtn$.text(this.waiterCancelText)):this.cvShell$.removeClass("can-cancel-waiter")}else this.cvShell$.removeClass("can-cancel-waiter"),this.waiterProgressBar?(this.cvShell$.removeClass("showing-progress"),this._progressBarView.hide()):this.cvShell$.removeClass("showing-waiter"),this.title$.text(this.question),this.setText(this.detail),this.cancelBtn$.text(this.cancelText)},handleBtn:function(e,n){if(n.stopPropagation(),e){if("prompt"===this.mode&&!this.validPromptTextCheck("confirm"))return void this.promptField$.select();if(this.confirmBtn$.hasClass("disabled"))return}if(!(this._closingEventTime&&n.timeStamp-this._closingEventTime<this.clickTimeSafetyZone)&&(this._closingEventTime=n.timeStamp,this._confirmDefer)){var i;if("prompt"!==this.mode)i=e;else if(e){if(i=this.promptField$.val(),this._options.trimText&&(i=i.trim()),this.confirmBtn$.length>1){var r=e;i={text:i,buttonData:!0===r?this.okText[this.defaultConfirmIndex]:t.find(this.okText,(function(e){return e.id===r}))}}}else i=null;this._closeDefer?(this._confirmDefer.resolve(i),this._confirmDefer=null,e?this.setWaiterVis(!0):this.hide(!0),this._closeDefer.promise.then(function(){this._closeDefer=null,e&&(this.hide(!0),this.setWaiterVis(!1))}.bind(this))):(this.hide(!0),this._confirmDefer.resolve(i),this._confirmDefer=null),e&&this._options.okHandler&&this._options.okHandler()}},handleBackgroundClick:function(e){this._options.ignoreBackgroundClick||this.handleCloseBtn(e)},handleCloseBtn:function(e){"alert"!==this.mode?this.handleBtn(!1,e):this.handleBtn(!0,e)},handlePromptFieldClick:function(e){this.selectAllOnFieldClick&&e.target.select()},isShowing:function(){return!this.$el.hasClass("hide")},isWaiting:function(){return this.cvShell$.hasClass("showing-waiter")},_showAsWaiter:function(e,n,i,r,o){this._options=o,this.mode="waiter",this.waiterText=n,this.question="",this.detail="",this.waiterTitle=e,this._confirmDefer=i,this._canCancelWaiter=!!this._confirmDefer,this.waiterCancelText=r,this.okText=o.okText,this.waiterProgressBar=t.clone(o.progressBar),this._hideSpinner=o.hideSpinner,this.waitSuccess=o.waitSuccess,this.render()},_showAsConfirm:function(e,t,n,i){this._options=i,this._confirmDefer=n,this.mode="confirm",this.question=e,this.detail=t,this.okText=i.okText,this.cancelText=i.cancelText,this._closeDefer=i.closeDefer,this.waiterTitle=i.closeDeferWaitTitle,this.waiterText=i.closeDeferWaitText,this.render()},_showAsAlert:function(e,t,n,i){this._options=i,this._confirmDefer=n,this.mode="alert",this.question=e,this.detail=t,this.okText=i.okText,this.render()},_showAsPrompt:function(e,n,i,r){this._options=r,this._confirmDefer=i,this.mode="prompt",this.question=e,this.detail=n,this.defaultText=r.defaultText||"",this.placeholderText=r.placeholderText||"",this.promptExtraStyles=r.promptExtraStyles||null,this.maxLen=r.maxLen||0,this.selectAllOnFieldClick=r.selectAllOnFieldClick,this.okText=r.okText,this.cancelText=r.cancelText,this._closeDefer=r.closeDefer,this.waiterTitle=r.closeDeferWaitTitle,this.waiterText=r.closeDeferWaitText,this.autoSelectPromptText=!!t.isUndefined(r.select)||r.select,this.isBeta=r.isBeta||!1,this.render(),this.validPromptTextCheck("setup",this.defaultText)},validPromptTextCheck:function(e,n){var i=t.isUndefined(n)?this.promptField$.val():n;return this._options.trimText&&(i=i.trim()),this._options.cantBeEmpty&&""===i?("setup"!==e&&("confirm"===e||this._options.showErrorDuringEntry)&&this.promptField$.addClass("error"),this._options.dontDimConfirmIfError||this.confirmBtn$.addClass("disabled"),!1):(this.promptField$.removeClass("error"),this.confirmBtn$.removeClass("disabled"),!0)},showCancelableWaitView:function(e,t,i){var r=n.defer();return i=i||{},this._showAsWaiter(e,t,r,i.cancelText||this.defaultCancelText,i),r.promise},showWaitView:function(e,t,n){this._showAsWaiter(e,t,null,null,n||{})},showWaitSuccessView:function(e,t,n){(n=n||{}).waitSuccess=!0,this._showAsWaiter(e,t,null,null,n),setTimeout(function(){this.hide(!0)}.bind(this),n.duration||1e3)},showAlert:function(e,t,i){var r=(i=i||{}).defer||n.defer();return this._showAsAlert(e,t,r,i),r.promise},showConfirm:function(e,t,i,r){(i=i||{}).afterRenderCallback=i.afterRenderCallback||r;var o=i.defer||n.defer();return this._showAsConfirm(e,t,o,i),o.promise},showPrompt:function(e,t,i){var r=(i=i||{}).defer||n.defer();return this._showAsPrompt(e,t,r,i),r.promise},handleKeyup:function(e){if(this._ignoreNextKeyup)this._ignoreNextKeyup=!1;else{if(e&&e.isPropagationStopped())return;this._ignoreCloseActions||this.isWaiting()&&!this._canCancelWaiter?(e.stopPropagation(),e.preventDefault()):e.keyCode===c.DOM_VK_ESCAPE?(e.stopPropagation(),e.preventDefault(),this._options.hideCloseButton&&this._options.hideCancelButton||this.handleCloseBtn(e)):e.keyCode===c.DOM_VK_RETURN||e.keyCode===c.DOM_VK_ENTER?(e.stopPropagation(),e.preventDefault(),this.handleConfirmBtn(e)):"prompt"===this.mode&&this.validPromptTextCheck("keyUp")}},ignoreNextKeyup:function(){return!!this.isShowing()&&(this._ignoreNextKeyup=!0,!0)},_getBounds:function(){return this.cvShell$[0].getBoundingClientRect()},hide:function(t){window.marvel.events.trigger("spark-dialog-closed"),!t&&this._confirmDefer&&(this._confirmDefer.resolve(!1),this._confirmDefer=null),this.$el.addClass("hide"),this.cvShell$.removeClass(this.mode),this.$el.find(".confirm-view-bg").removeClass("transparent-overlay"),this._addedKeyup&&(e(document).off("keyup.dialog",this.handleKeyup),this._addedKeyup=!1)},getMessageViewAdaptor:function(){return{name:"confirmview",pattern:"confirmview",show:function(e){h[e.mode].apply(h,e.arguments).then(e.success||function(){},e.error||function(){})}}}}),h=new u}.apply(t,i))||(e.exports=r)},,function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){var i=n(93),r=n(94),o=r;o.v1=i,o.v4=r,e.exports=o},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=n(136),r=n(137),o=n(66);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return c(this,e,t,n)}function c(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(t,n),r=(e=s(e,i)).write(t,n);r!==i&&(e=e.slice(0,r));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?s(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(d(t),e=s(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(i)return j(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function v(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,r);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,r){var o,a=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){var d=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===l)return d*a}else-1!==d&&(o-=o-d),d=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var u=!0,h=0;h<l;h++)if(c(e,o+h)!==c(t,h)){u=!1;break}if(u)return o}return-1}function y(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function w(e,t,n,i){return H(j(t,e.length-n),e,n,i)}function k(e,t,n,i){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function x(e,t,n,i){return k(e,t,n,i)}function _(e,t,n,i){return H($(t),e,n,i)}function S(e,t,n,i){return H(function(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function C(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o,a,s,l,c=e[r],d=null,u=c>239?4:c>223?3:c>191?2:1;if(r+u<=n)switch(u){case 1:c<128&&(d=c);break;case 2:128==(192&(o=e[r+1]))&&(l=(31&c)<<6|63&o)>127&&(d=l);break;case 3:o=e[r+1],a=e[r+2],128==(192&o)&&128==(192&a)&&(l=(15&c)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:o=e[r+1],a=e[r+2],s=e[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(d=l)}null===d?(d=65533,u=1):d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d),r+=u}return function(e){var t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=M));return n}(i)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,i){return d(t),t<=0?s(e,t):void 0!==n?"string"==typeof i?s(e,t).fill(n,i):s(e,t).fill(n):s(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return u(null,e)},l.allocUnsafeSlow=function(e){return u(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,i,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(i,r),d=e.slice(t,n),u=0;u<s;++u)if(c[u]!==d[u]){o=c[u],a=d[u];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function I(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function D(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function P(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=U(e[o]);return r}function A(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function E(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,i,r,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function N(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);r<o;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function F(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);r<o;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function R(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(e,t,n,i,o){return o||R(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function B(e,t,n,i,o){return o||R(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var r=t-e;n=new l(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUInt8=function(e,t){return t||E(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||E(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||E(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||E(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||E(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||E(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||E(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||E(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||E(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,o=i-n;if(this===e&&n<t&&t<i)for(r=o-1;r>=0;--r)e[r+t]=this[r+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=l.isBuffer(e)?e:j(new l(e,i).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var n;t=t||1/0;for(var i=e.length,r=null,o=[],a=0;a<i;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}).call(this,n(10))},,function(e,t,n){"use strict";(function(e){var i=t;function r(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;++r)void 0!==e[i[r]]&&n||(e[i[r]]=t[i[r]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}i.asPromise=n(179),i.base64=n(180),i.EventEmitter=n(181),i.float=n(182),i.inquire=n(183),i.utf8=n(184),i.pool=n(185),i.LongBits=n(186),i.global="undefined"!=typeof window&&window||void 0!==e&&e||"undefined"!=typeof self&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isNode=Boolean(i.global.process&&i.global.process.versions&&i.global.process.versions.node),i.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"==typeof e||e instanceof String},i.isObject=function(e){return e&&"object"==typeof e},i.isset=i.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"==typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var n=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},i.merge=r,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=o,i.ProtocolError=o("ProtocolError"),i.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},i.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;e?(i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}}).call(this,n(10))},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(5),n(54),n(13),n(36)],void 0===(r=function(e,t,i,r,o,a,s){"use strict";var l,c,d;function u(){return l||(l=i.defer(),Promise.all([n.e("vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor"),n.e(0),n.e(1),n.e("brand-kit-controller")]).then(function(e){var t=n(304);n(311);t._acquireDefaultBrand=h,l.resolve(t)}.bind(null,n)).catch(n.oe)),l.promise}function h(){return window.marvel.logger.warn("DEPRECATED: BrandKit.acquireDefaultBrand has been deprecated. Please use BrandKit.getDefaultBrand instead and take note that, with BrandKit.getDefaultBrand, it is possible that the returned promise resolves to null (if the user has not set up any brands)."),u().then((function(e){return e.getDefaultContext("brand-kit").then((function(n){return n||function(e){return c||(c=i.defer(),e.getContextsByType("brand-kit",!0).then((function(n){if(t.isEmpty(n))return e.createContext("","brand-kit").then((function(t){return e.setGlobalActiveContext(t.getId()),e.setDefaultContext(t).then((function(){c.resolve(t),c=null}))}));var i=null;return t.each(n,(function(e){i?r.hasFeature("enable-multi-brand")||console.warn("BrandKitWrapper found multiple brand kits and it uses only one"):i=e})),e.setGlobalActiveContext(i.getId()),e.setDefaultContext(i).then((function(){c.resolve(i),c=null}))}),(function(e){c.reject(e),c=null})).done()),c.promise}(e)}))}))}function p(e,t){e.on("authoring-context-theme-assigned",(function(n){t.app.setAuthoringContextThemeId(e,n)}))}function f(e,n){var r=[],o={};return n&&n.belongsToUser()?i.resolve([]):(t.each(e,(function(e){var i=n.getCustomFonts(!0),a=t.find(i,(function(t){var n=t.getMetrics();if(n){if(e.postScriptName&&n.postScriptName&&e.postScriptName.toLowerCase()===n.postScriptName.toLowerCase())return!0;if(e.lookupKey&&e.lookupKey===t.lookupKey())return!0}else window.marvel.logger.traceflow("brand-kit","verifyFonts no metrics found",t.friendlyName());return!1}));a&&!a.isInstallable()&&(o[a.getTOUAName()]=a,r.push(a.getTOUAName()))})),r.length>0?s.checkProvidedFonts(r).then((function(e){var n=[];return t.each(r,(function(t){e&&e[t]||(window.marvel.logger.traceflow("brand-kit",'verifyFonts found missing font: "'+t+'"'),n.push(o[t]))})),i.resolve(n)})):i.resolve([]))}return{IMAGES_PARENT:"images",LOGOS_PARENT:"logos",FONTS_PARENT:"fonts",COLORS_PARENT:"colors",F_SPLASH:"splash",MAX_LOGO_SIZE:1024,getSyncGroup:function(){return a.syncGroups["adobe-spark-authoring-contexts"]},getChooserView:function(){var e=i.defer();return Promise.all([n.e(0),n.e("brand-kit-chooser-view~brand-kit-editor~slate-web~user-profile-view"),n.e("brand-kit-chooser-view~brand-kit-context-views"),n.e("brand-kit-chooser-view")]).then(function(t){var i=n(313);e.resolve(i)}.bind(null,n)).catch(n.oe),e.promise},loadEditorView:function(){var e=i.defer();return Promise.all([n.e("vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor"),n.e(0),n.e(1),n.e("brand-kit-chooser-view~brand-kit-editor~slate-web~user-profile-view"),n.e("brand-kit-editor")]).then(function(t){var i=n(312);e.resolve(i)}.bind(null,n)).catch(n.oe),e.promise},getController:u,acquireDefaultBrand:h,getDefaultBrand:function(){return u().then((function(e){return e.getDefaultContext("brand-kit")}))},getOrCreateDefaultBrand:function(){return u().then((function(e){return e.getDefaultContext("brand-kit").then((function(n){return n||e.getContextsByType("brand-kit",!0).then((function(n){if(t.isEmpty(n))return e.createContext("","brand-kit").then((function(t){return e.setDefaultContext(t).then((function(){return t}))}));var i=n[0];return e.setDefaultContext(i).then((function(){return i}))}))}))}))},setDefaultBrandIfNecessary:function(e){return u().then((function(t){return t.getDefaultContext("brand-kit").then((function(n){if(!n)return t.setDefaultContext(e)}))}))},getBrandById:function(e){return u().then((function(t){return t.getContextById(e)}))},setAssociatedBrand:function(e,t){return u().then((function(n){return n.setActiveContext(e,t)}))},getAssociatedBrand:function(e){return u().then((function(t){return t.getActiveContext(e)}))},getAllActivatedVisibleBrands:function(){return u().then((function(e){return e.getContextsByType("brand-kit",!0,!0).then((function(e){return t.filter(e,(function(e){return e.activated()}))}))}))},getAllActivatedBrands:function(){return u().then((function(e){return e.getContextsByType("brand-kit",!1,!0).then((function(e){return t.filter(e,(function(e){return e.activated()}))}))}))},getAllVisibleBrands:function(){return u().then((function(e){return e.getContextsByType("brand-kit",!0,!1)}))},getAllBrands:function(){return u().then((function(e){return e.getContextsByType("brand-kit",!1,!1)}))},loadContextualViews:function(){var e=i.defer();return Promise.all([n.e(0),n.e("brand-kit-chooser-view~brand-kit-context-views"),n.e("brand-kit-context-views")]).then(function(t){var i={ChromePreview:n(315),ChromeEditorView:n(316),OutroEditorView:n(317),OutroPreviewView:n(306),StampEditorView:n(318),StampPreviewView:n(307)};e.resolve(i)}.bind(null,n)).catch(n.oe),e.promise},guideMe:function(t){if(window.sessionStorage)try{var i=window.sessionStorage.getItem("guide-me");i&&(window.sessionStorage.removeItem("guide-me"),e(t).addClass(i),d?(d.setElement(t),d.showOverlay()):n.e("custom-workspace-guide-me").then(function(e){var i=n(314);(d=new i).onHide=function(){},d.setElement(t),d.showOverlay()}.bind(null,n)).catch(n.oe))}catch(e){}},augmentSharePublishConfig:function(e,t){r.hasFeature("entitle-brand-kit")?t.supportsBrandedChrome?t.mrvlDoc.getMyApp().getAuthoringContextId(t.mrvlDoc)?(e.customBranding=!0,e.removeBranding=!1):(e.customBranding=!1,e.removeBranding=!0):e.removeBranding=!0:(e.removeBranding=!1,t.supportsBrandedChrome&&(e.customBranding=!1))},augmentAppConfig:function(e){return e.assetId||e.contextId?i.resolve(e):u().then((function(t){return t.getGlobalActiveContext().then((function(t){return t&&(e.contextId=t.getId()),e}))}))},augmentNewDoc:function(e,t){return r.hasFeature("entitle-brand-kit")&&(p(e,t),t.contextId&&t.app.setAuthoringContextId(e,t.contextId,!0)),i.resolve(e)},augmentLoadDoc:function(e,t){r.hasFeature("entitle-brand-kit")&&p(e,t)},getExportAnalytics:function(e,t,n){var i=e.getMyApp(),r=function(e){var t="unknown";"slate-web"===e?t="page":"theo-web"===e?t="post":"ginger-snap"===e&&(t="video");return t}(i.registeredName);return u().then((function(o){return o.getActiveContext(e).then((function(o){if(o){var a,s=i.getAuthoringContextThemeId(e),l="exportedWithThemeName",c=o.getThemeletById(s);return c&&(a=c.getValue("theme#data")),"theo-web"===i.registeredName&&(l="exportedWithTemplateName"),i.isBranded(e).then((function(e){var i={workflow:t,contextData:["projectId","invokedShareFrom"],exportMethod:n,sparkFormat:r,exportedWithBranding:e,themeletId:s},o="unknown";return a?o=a.name:c&&(o=c.getValue("name")),i[l]=o,i}))}return{workflow:t,contextData:["projectId","invokedShareFrom"],exportedWithBranding:!1,exportMethod:n,sparkFormat:r}}))}))},getCreatedAnalytics:function(e){var t=e.getMyApp();return u().then((function(n){return n.getActiveContext(e).then((function(n){if(n){var i=t.getAuthoringContextThemeId(e),r="createdWithThemeName",o=n.getThemeletById(i),a=o.getValue("theme#data");return"theo-web"===t.registeredName&&(r="exportedWithTemplateName"),t.isBranded(e).then((function(e){var t,n={contextData:["projectId"],createdWithBranding:e,themeletId:i};return t=a?a.name:o.getValue("name"),n[r]=t,n.themeName=t,n}))}return{contextData:["projectId"],createdWithBranding:!1}}))}))},verifyBrandAccess:function(e,t,n){return t?(n||u()).then((function(t){var n=e.getMyApp(),r=n.getAuthoringContextId(e);return t.getContextById(r).then((function(a){var s=r&&a||!r&&!a,l="INCOMING"!==e.getCollaboration();return(s||l?i.resolve(a):function(e,t,n,r){return o.acceptBrandInvite(e,t,n).then((function(){return window.marvel.logger.info("BrandKitWrapper accepted pending invite",{doc:t.id,ctxId:n}),r.getContextById(n)})).catch((function(e){return window.marvel.logger.warn("BrandKitWrapper pending invite NOT found",{doc:t.id,ctxId:n,err:e}),i.resolve(null)}))}(n,e,r,t)).then((function(o){return(s=r&&o||!r&&!o)?i.resolve({accessOk:!0,brand:o}):l?t.getGlobalActiveContext().then((function(t){return t?n.rebrandProject(e,t,!0).then((function(){return i.resolve({accessOk:!0,brand:t})})):i.resolve({accessOk:!0,brand:null})})):i.resolve({accessOk:!1,brand:null})}))}))})):i.resolve({accessOk:!0,brand:null})},verifyFontAccess:function(e,n){if(!n||n.belongsToUser())return window.marvel.logger.traceflow("brand-kit","verifyFonts resolve because brand is owned"),i.resolve([]);if(!e.getMyApp().getFontsUsed)return window.marvel.logger.traceflow("brand-kit","verifyFonts resolve because getFontsUsed is not implemented by "+e.getMyApp().typeName),i.resolve([]);window.marvel.logger.traceflow("brand-kit","verifyFonts calling getFontsUsed");try{var r=e.getMyApp(),o=i.defer();return r.lazyLoad(o),o.promise.then((function(){return e.getMyApp().getFontsUsed(e).then((function(e){return window.marvel.logger.traceflow("brand-kit","verifyFonts getFontsUsed returned",e),f(t.uniqBy(e||[],(function(e){return e.postScriptName||e.lookupKey})),n)}))}))}catch(t){return window.marvel.logger.error("App failed in getFontsUsed",{doc:e,stack:t.stack,error:t}),i.resolve([])}},verifyFontsUsed:f}}.apply(t,i))||(e.exports=r)},function(e,t){e.exports=mustache},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,c=[],d=!1,u=-1;function h(){d&&l&&(d=!1,l.length?c=l.concat(c):u=-1,c.length&&p())}function p(){if(!d){var e=s(h);d=!0;for(var t=c.length;t;){for(l=c,c=[];++u<t;)l&&l[u].run();u=-1,t=c.length}l=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||d||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){var i;void 0===(i=function(){return{DOM_VK_BACK_SPACE:8,DOM_VK_TAB:9,DOM_VK_RETURN:13,DOM_VK_ENTER:14,DOM_VK_ESCAPE:27,DOM_VK_SPACE:32,DOM_VK_LEFT:37,DOM_VK_UP:38,DOM_VK_RIGHT:39,DOM_VK_DOWN:40}}.apply(t,[]))||(e.exports=i)},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(16).Buffer)},function(e,t,n){"use strict";var i=n(32).nextTick,r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var o=n(23);o.inherits=n(14);var a=n(80),s=n(83);o.inherits(u,a);for(var l=r(s.prototype),c=0;c<l.length;c++){var d=l[c];u.prototype[d]||(u.prototype[d]=s.prototype[d])}function u(e){if(!(this instanceof u))return new u(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||i(p,this)}function p(e){e.end()}Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),u.prototype._destroy=function(e,t){this.push(null),this.end(),i(t,e)}},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(22)],void 0===(r=function(e,t,n,i){"use strict";return n.View.extend({initialize:function(){t.bindAll(this,t.functionsIn(this))},_workflowId:void 0,setWorkflowId:function(e){this._workflowId=e},ignoreNextKeyup:function(){this._ignoreNextKeyup=!0},onEscapePressed:function(){this.hideOverlay()},handleKeyup:function(e){this._ignoreNextKeyup?this._ignoreNextKeyup=!1:e.keyCode!==i.DOM_VK_ESCAPE||this._ignoreCloseActions||this.onEscapePressed()},scrollCapture:function(t){e(window).scrollTop(this._oldScrollPos),t.preventDefault()},handleShellHideTransitionEnd:function(){this.$el.addClass("hide"),this.$el.removeClass("transitioned-out")},_showEl:function(){this.transitionObjectSelector&&(this.$el.find(this.transitionObjectSelector).addClass("no-transition"),this.$el.addClass("transitioned-out"),t.delay(function(){this.$el.find(this.transitionObjectSelector).removeClass("no-transition"),this.$el.removeClass("transitioned-out")}.bind(this),1)),this.$el.removeClass("hide")},_hideEl:function(){this.transitionObjectSelector?(this.$el.find(this.transitionObjectSelector).one("transitionend",this.handleShellHideTransitionEnd.bind(this)),this.$el.addClass("transitioned-out")):this.$el.addClass("hide")},showOverlay:function(){window.marvel.events.dialogShown(this._dialogName),marvel._dialogShowing=!0,this.render(),e(document).on("keyup.dialog",this.handleKeyup),this._ignoreNextKeyup=!1,this._showEl(),this._oldScrollPos=e(window).scrollTop();var t=this._oldScrollPos;e(window).on("scroll.scrolldisabler",(function(n){e(window).scrollTop(t),n.preventDefault()}))},hideOverlay:function(){return(!this.interceptHide||!this.interceptHide())&&(marvel._dialogShowing=!1,e(document).off("keyup.dialog",this.handleKeyup),e(window).off("scroll.scrolldisabler"),this._hideEl(),this.onHide&&this.onHide(),this._workflowId&&marvel.events.trigger(this._workflowId+"-closed",this),window.marvel.events.dialogClosed(),!0)},handleCloseBtn:function(){this._ignoreCloseActions||this.hideOverlay()}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3)],void 0===(r=function(e,t,i,r){"use strict";var o=n(115).default;return new(i.Model.extend({initialize:function(){this.apps={},this.appsByType={},this.appsByDocType={},this.appsBySGName={}},getAppForDoc:function(e){return this.getAppBySyncGroupName(e.get("syncGroupName"))},getAppByType:function(e){return this.appsByType[e]},getAppByDocType:function(e){var t={"application/vnd.adobe.luca.project+dcx":"application/vnd.adobe.luca.document+dcx","application/vnd.adobe.ginger.document+dcx":"application/vnd.adobe.ginger.project+dcx"}[e]||e;return this.appsByDocType[t]},getAppByName:function(e){return this.apps[e]},getAppBySyncGroupName:function(e){return this.appsBySGName[e]},registerApp:function(e,t){t.registeredName=e,this.apps[e]=t,this.appsByType[t.typeName]=t,this.appsByDocType[t.getSetting("doctype")]=t,this.appsBySGName[t.getSetting("syncGroup")]=t,window.performance.mark(o.loggableEntryName("registerAppComplete:"+e))}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(4),n(5),n(7),n(19),n(8),n(100),n(12)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d){"use strict";return n.Model.extend({defaultCfg:{syncGroup:"",scope:"",newDocName:"Untitled",community:"",doctype:"",legacyName:"",displayName:""},registeredName:null,deferredLoading:null,initialize:function(){},typeName:null,getConfig:function(){},getAppTypeID:function(){return this.getSetting("scope")},isaProjectFormat:function(){return!0},getDisplayName:function(e){var t=this.getSetting("displayName");return e?l.getString("product-name")+" "+t:t},isEnabled:function(){var e=this.getSetting("enabledFlagName");return!e||o.hasFeature(e)},supportsCollaboration:function(){return!0},requiresDocumentLocking:function(e){return this.supportsCollaboration()},supportsDownload:function(){return!0},appSupportsEditorSearch:function(){return!1},supportsDirectDownload:function(){return"post"===this.typeName},supportsAsyncPublish:function(){return!1},getSetting:function(e){var t=this.getConfig()[e];return void 0===t&&(t=this.defaultCfg[e]),t},getCPCommunity:function(){return this.getConfig().community},isDocPublished:function(e){return!!this.getCPAlias(e)},generateCPProjectId:function(e){return e.get("id")},setCPProjectId:function(e,t){e.saveChanges(function(e){e.setValue("cp#projectId",t)}.bind(this))},getCPProjectId:function(e){return e.getDCXRoot().getValue("cp#projectId")},getCPAlias:function(e){return e.getDCXRoot().getValue("cp#shortId")},setCPAlias:function(e,t){return e.saveChanges((function(e){e.setValue("cp#shortId",t)}))},getCPAssetId:function(e){return e.getDCXRoot().getValue("cp#assetId")},setCPAssetId:function(e,t){return e.saveChanges((function(e){e.setValue("cp#assetId",t)}))},getDocContentETag:function(e){return console.error("ERROR: Apps must implement getDocContentETag in appImpl"),""},getPublishedContentETag:function(e){return e.getDCXRoot().getValue("cp#publishedEtag")},setPublishedContentETag:function(e,t){return e.saveChanges(function(n){n.setValue("cp#publishedEtag",t||this.getDocContentETag(e))}.bind(this))},usesContentModifiedEtags:function(){return!0},isBrowserSupported:function(){return!0},getUnsupportedBrowserMessage:function(){return""},hasContentBeenUpdatedSincePublish:function(e,t){i.defer();var n=this.getDocContentETag(e);if(n){var r=this.getPublishedContentETag(e);return!r||n!==r}return e.getContentModifiedDate({preferCpContentModified:!0})-new Date(t)>6e4},setProjectName:function(e,t){console.error("ERROR: Apps must implement setProjectName in appImpl")},getProjectName:function(e,t){return this!==e.getMyPrimaryApp()?e.getMyPrimaryApp().getProjectName(e,t):(console.error("ERROR: Apps must implement getProjectName in appImpl"),"")},checkDocCompatibility:function(e,t){return i.resolve()},getLicensableResources:function(e,n){return n=n||{},this.getImageComponentsInfoForDoc(e).then(function(e){return t.isUndefined(n.licensed)?t.filter(e,this.licensingRelevant.bind(this)):n.licensed?t.filter(e,this._isInfoComponentLicensed.bind(this)):t.filter(e,function(e){return this.licensingRelevant(e)&&this._isInfoComponentUnlicensed(e)}.bind(this))}.bind(this))},batchCheckLicenses:function(e){var t=o.hasFeature("user-flag-image-source-stock");return this.getImageComponentsInfoForDoc(e).then(function(e){var n=e.reduce(function(e,n){var i=n.data.licenseType||n.data.license&&n.data.license.type;if(i&&i.match(/^royalty_free/)){if(!t)throw new Error("User blocked from stock");if(i.match(/^royalty_free_(standard|extended)$/)){var r=n.data.assetID||n.data.license.asset_id||n.data.license.image_id;r&&e.push(r)}}return e}.bind(this),[]);return n.length>0?c.batchGetItemsInfo(n,{params:["is_licensed","id"]}):i.resolve([])}.bind(this)).then((function(e){return window.marvel.logger.traceflow("stock-license-check","batchCheckLicenses:"+JSON.stringify(e)),!e.find((function(e){return""===e.is_licensed}))})).catch((function(e){return window.marvel.logger.warn("batchCheckLicenses - caught exception:",{message:e&&e.message,stack:e&&e.stack}),!1}))},getImageMetadataForAnalytics:function(e){if("post"==this.typeName)return{};var n={google:0,dropbox:0,dooplo:0,facebook:0,stock:0,creativeCloud:0,lightroom:0,uploaded:0};return this.getImageComponentsInfoForDoc(e).then(function(e){var i=!1,r=!1;return t.each(e,function(e){var t,o;e&&e.data&&e.data.srcName&&(t=e.data.srcName,o=n[t],n[t]=o+1),this.licensingRelevant(e)&&(this._isInfoComponentLicensed(e)?r=!0:i=!0)}.bind(this)),{contextualData13:"hasLicensedImages:"+r,contextualData14:"hasUnlicensedImages:"+i,contextualData15:"hasGoogleImages:"+!!n.google,contextualData16:"hasDropboxImages:"+!!n.dropbox,contextualData17:"hasDooploImages:"+!!n.dooplo,contextualData18:"hasFacebookImages:"+!!n.facebook,contextualData19:"hasStockImages:"+!!n.stock,contextualData20:"hasCCImages:"+!!n.creativeCloud,contextualData21:"hasLightroomImages:"+!!n.lightroom,contextualData22:"hasUploadedImages:"+!!n.uploaded}}.bind(this))},licensingRelevant:function(e){return!t.isEmpty(e.data.license)&&"Adobe Stock"===e.data.license.source_name||"Adobe Stock"===e.data.srcName||"stock"===e.data.srcName},_isInfoComponentLicensed:function(e){return!(!e.data||t.isEmpty(e.data.license))&&"royalty_free"!==(t.isObject(e.data.license)?e.data.license.type:e.data.license)},_isInfoComponentUnlicensed:function(e){return!this._isInfoComponentLicensed(e)},getImageComponentsInfoForDoc:function(e){return e.getImageComponents()},lazyLoad:function(e){},load:function(){return this.deferredLoading||(this.deferredLoading=i.defer(),this.lazyLoad(this.deferredLoading)),this.deferredLoading.promise},loadForShare:function(e,t){},loadDesignView:function(e,n){this.load().then(function(){var i,r=this.getStorageImpl();n.showPreview?(i=new this.viewCls,e.renderSubView(i,r,n)):r.createDocument(n).then(function(t){i=new this.viewCls,e.renderSubView(i,r,n)}.bind(this),function(i){if(console.warn("Failed to create the document, can't init design view: ",i),"NO_COMPOSITE"!==i.code&&"NOT_COMPATIBLE"!==i.code&&"USER_CANCELED"!==i.code)e.errorState(),t.delay(function(){this.loadDesignView(e,n)}.bind(this),5e3);else{var r=l.getString("organizer-error-not-found");i.msg=i.usermsg||r,window.marvel.events.trigger("mrvl-must-reload",i)}}.bind(this))}.bind(this))},cancelEditingSession:function(e){return i.resolve()},userIsActive:function(){this._onUserActive?this._onUserActive():window.marvel.logger.traceflow("baton-timeout","appImpl.userIsActive is a no op. Project is not shared.")},beginLongUserActivity:function(){this._onBeginLongUserActivity?this._onBeginLongUserActivity():window.marvel.logger.traceflow("baton-timeout","applImpl.beginLongUserActivity is a no op. Project is not shared.")},endLongUserActivity:function(e){this._onEndLongUserActivty?this._onEndLongUserActivty(e):window.marvel.logger.traceflow("baton-timeout","appImpl.endLongUserActivity is a no op. Project is not shared.")},wrapLongUserActivity:function(e,t){window.marvel.logger.traceflow("baton-timeout","wrapLongUserActivity start for "+e),this.beginLongUserActivity(),t.finally(function(){window.marvel.logger.traceflow("baton-timeout","wrapLongUserActivity end for "+e),this.endLongUserActivity()}.bind(this))},isCollaborationEnabled:function(){return!!this._isCollaborationEnabled},onEditorActive:function(e,n,i){this._isCollaborationEnabled=!0,this._onUserActive=t.throttle(e,1e3,{leading:!0,trailing:!1}),this._onBeginLongUserActivity=n,this._onEndLongUserActivty=i,window.addEventListener("touchstart",this._onUserActive,!0),window.addEventListener("mousedown",this._onUserActive,!0),window.addEventListener("pointerdown",this._onUserActive,!0),window.addEventListener("keydown",this._onUserActive,!0),window.addEventListener("scroll",this._onUserActive,!0),window.addEventListener("resize",this._onUserActive,!0)},offEditorActive:function(e){this._onBeginLongUserActivity=null,this._onEndLongUserActivty=null,window.removeEventListener("touchstart",this._onUserActive,!0),window.removeEventListener("mousedown",this._onUserActive,!0),window.removeEventListener("pointerdown",this._onUserActive,!0),window.removeEventListener("keydown",this._onUserActive,!0),window.removeEventListener("scroll",this._onUserActive,!0),window.removeEventListener("resize",this._onUserActive,!0),this._onUserActive=null},setAppViewImplCls:function(e){this.viewCls=e},setPublishImpl:function(e){this.publishImpl=e},getPublishImpl:function(){return this.publishImpl},setStorageImpl:function(e){this.storageImpl=e,e.getSetting=this.getSetting.bind(this),e.initSyncGroup()},getStorageImpl:function(){return this.storageImpl},resetDocPublishData:function(e,n){var r=e.getMyApp(),o=[r.setCPAlias(e,null),r.setCPAssetId(e,null)];i.allSettled(o).then((function(e){var i=[];t.each(e,(function(e){"fulfilled"!==e.state&&i.push(e.reason)})),0===i.length?n.resolve():n.reject(i)}))},clearDataForDocCreatedByDupe:function(e){e.clearRootDataWithPrefix("cp#")},handleBrowserUnsupported:function(t,n){var r=i.defer(),o=e('<div data-auto="browser-unsupported-message"/>').html(this.getUnsupportedBrowserMessage()),s=navigator.userAgent||"N/A";return a.trackEvent("unsupportedBrowserMsgShown",{contextString:t,userAgent:s,projectType:this.getAppTypeID()},n),d.showAlert("Darn, you need to switch browsers",o,{closeDefer:r,okText:"Ok, got it"}).then(function(){r.resolve()}.bind(this)),r.promise},requestAppCreateNew:function(e,t,n){var r=i.defer();return this.isEnabled()?this.isBrowserSupported()?((n=n||{}).contextString=e,n.projectType=this.getAppTypeID(),window.marvel._isInApp?(a.trackEvent("projectCreationBegin",n,t),marvel.events.trigger("show-interstitial",{typeName:this.typeName,afterShowingDefer:r}),r.promise.then(function(){marvel.navigate("design/"+this.typeName+"/new",{trigger:!0})}.bind(this)).done()):a.trackLink("projectCreationBegin",n,t,function(){window.location.href=l.getLocalizedSparkPath("/sp/design/"+this.typeName+"/new")}.bind(this)),!0):(this.handleBrowserUnsupported(),!1):(alert(this.getDisplayName()+" is coming soon."),!1)},hasLicensedResources:function(e){return this.getImageComponentsInfoForDoc(e).then(function(e){return!!t.find(e,function(e){return this._isInfoComponentLicensed(e)}.bind(this))}.bind(this))},updateLicensedResources:function(e,t){return console.warn("TBD: update images in mrvlDoc."),i.resolve()},appSupportsUpdateLicensedResources:function(e){return!1},unlicenseResources:function(e){return console.warn("TBD: unlicese images in mrvlDoc"),i.resolve()},getAuthoringContextId:function(e){return e.getDCXRoot().getValue("authctx#ctxid")},setAuthoringContextId:function(e,t,n){return e.belongsToUser()?n?(e.getDCXRoot().setValue("authctx#ctxid",t),i.resolve()):e.saveChanges(function(e){e.setValue("authctx#ctxid",t)}.bind(this)):(marvel.logger.warn("AuthoringContext.setAuthoringContextId error: attempted to set authctx#ctxid for a project that is an incoming collaboration"),i.resolve())},getAuthoringContextUrn:function(e){return e.getDCXRoot().getValue("authctx#ctxurn")},setAuthoringContextUrn:function(e,t,n){return e.belongsToUser()?n?(e.getDCXRoot().setValue("authctx#ctxurn",t),i.resolve()):e.pull().then(function(){return e.saveChanges(function(e){e.setValue("authctx#ctxurn",t)}.bind(this))}.bind(this)):(marvel.logger.warn("AuthoringContext.setAuthoringContextUrn error: attempted to set authctx#ctxurn for a project that is an incoming collaboration"),i.resolve())},isBranded:function(e){var t=!!e.getDCXRoot().getValue("authctx#uses-branded-elements");return i.resolve(t)},hasPremiumIngredients:function(e){if("post"===this.typeName){var n=e.getDCXRoot().getValue("theo#font-sources");return n&&n.length&&t.includes(n,"typekit-premium")?i.resolve(!0):i.resolve(!1)}return i.resolve(!1)},premiumIsRequired:function(e){return i.all(this.isBranded(e),this.hasPremiumIngredients(e)).spread((function(e,t){return e||t}))},getAuthoringContextThemeId:function(e){return e.getDCXRoot().getValue("authctx#themeid")},setAuthoringContextThemeId:function(e,t,n){return n?(e.getDCXRoot().setValue("authctx#themeid",t),i.resolve()):e.saveChanges(function(e){e.setValue("authctx#themeid",t)}.bind(this))},stripBranding:function(e,t){return(o.hasFeature("enable-multi-brand")?i.resolve():this.setAuthoringContextId(e,null,!0)).then(function(){return this.setAuthoringContextThemeId(e,null,!0).then(function(){return t?(e.getDCXRoot().setValue("authctx#uses-branded-elements",!1),i.resolve()):e.saveChanges(function(e){e.setValue("authctx#uses-branded-elements",!1)}.bind(this))}.bind(this))}.bind(this))},rebrandProject:function(e,t,n){return this.stripBranding(e,n).then(function(){var i=null;return t&&(i=t.getId()),this.setAuthoringContextId(e,i,n)}.bind(this))},beforeCollaboration:function(e){return i.resolve()},hasUploadedFonts:function(e){return this._hasFontSource(e,"user-uploaded")},_hasFontSource:function(e,n){return this.getFontsUsed?this.getFontsUsed(e).then((function(e){return!!t.find(e||[],(function(e){return e&&e.source===n}))})):this.includesUploadedFonts&&"user-uploaded"===n?i.resolve(this.includesUploadedFonts(e)):i.resolve(!1)},getLastPublishedAuthoringContextId:function(e){return e.getDCXRoot().getValue("authctx#lastPublishedAuthctxid")},setLastPublishedAuthoringContextId:function(e,t){return e.saveChanges(function(e){e.setValue("authctx#lastPublishedAuthctxid",t)}.bind(this))},isaThemeEditor:function(){return this.isaProjectFormat()},getThemeController:function(e){return i.resolve({initTheme:function(e,t){},renderCover:function(e,t){},areAssetsUsed:function(e,t){},updateLinkedAssets:function(e,t){},relinkAsset:function(e,t){},getNumberOfGeneratedThemes:function(){return i.resolve(-1)},getGeneratedThemes:function(){return i.resolve([])},generateThemeRendition:function(e,t,n){t.fillStyle="#000000",t.fillRect(0,0,t.canvas.width,t.canvas.height)},canResolveConflict:function(e,t,n,r){return i.resolve(!1)},resolveAuthoringContextConflict:function(e,t,n,r,o){return i.resolve()}})},getThemeEditorView:function(){return i.resolve((function(){return this.render=function(){},this.setElement=function(){},this}))},getGeneratedThemes:function(e){return i.resolve([])},generateThemeRendition:function(e,t,n){t.fillStyle="#000000",t.fillRect(0,0,t.canvas.width,t.canvas.height)}})}.apply(t,i))||(e.exports=r)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(31);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,i,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,i)}));case 4:return t.nextTick((function(){e.call(null,n,i,r)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,n(21))},,function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var r=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(o).concat([r]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var i,r,o={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),s=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=s.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),c=null,d=0,u=[],h=n(165);function p(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=o[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(y(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(y(i.parts[a],t));o[i.id]={id:i.id,refs:1,parts:s}}}}function f(e,t){for(var n=[],i={},r=0;r<e.length;r++){var o=e[r],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function g(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function v(e){var t=document.createElement("style");return e.attrs.type="text/css",b(t,e.attrs),g(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function y(e,t){var n,i,r,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=d++;n=c||(c=v(t)),i=x.bind(null,n,a,!1),r=x.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",b(t,e.attrs),g(e,t),t}(t),i=S.bind(null,n,t),r=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),i=_.bind(null,n),r=function(){m(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return p(n,t),function(e){for(var i=[],r=0;r<n.length;r++){var a=n[r];(s=o[a.id]).refs--,i.push(s)}e&&p(f(e,t),t);for(r=0;r<i.length;r++){var s;if(0===(s=i[r]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var w,k=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function x(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=k(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function _(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function S(e,t,n){var i=n.css,r=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||o)&&(i=h(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(15),n(4),n(6),n(99)],void 0===(r=function(e,t,i,r,o,a,s){"use strict";var l,c,d,u,h={},p=!1;function f(){window.TypekitPreview?(window.TypekitPreview.setup({auth_id:"slte",auth_token:"Hik3Pm6JnhEwLxQ0zehfgHbPDnVkFnfVeM5Dl15HLM9Nvtt1z6Zcx%2FCrp%2Ba6IPG%2F4rar1RfQpMk18PnaqVj5UR3JusyvaDexkb4zuYwE6edbEtYVoeY8I0RGujcBA982%2FgXgDjNyLWrd6f8i%2FsbDs1mQLbIorXyId0bC0yU2kZo%3D"}),l.resolve(window.TypekitPreview)):t.delay(f,1e3)}function g(){return d||(d=i.defer(),n.e("sparkfonts-registry").then(function(e){var i=n(223),r=n(319);i.cards=r,t.each(t.filter(i.sparkfonts,(function(e){return!!e.typekitPreviewId})),(function(e){e.typekitVariations=t.map(e.faces,(function(e){return e.typekitKey}))})),i.facesByKey||(i.facesByKey={},t.each(i.sparkfonts,(function(e,n){t.each(e.faces,(function(r){i.facesByKey[r.lookupKey]={subgroup:t.extend({},e,{name:n}),face:r}}))}))),i.bodyFonts=[{subgroupName:"Acumin Pro Semi Condensed",cssName:i.sparkfonts["Acumin Pro Semi Condensed"].cssName,faces:[{secondaryRole:"is-body-font",role:"body-font",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d"},{secondaryRole:"is-body-font-italic",role:"body-font-italic",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b"},{secondaryRole:"is-body-font-bold",role:"body-font-bold",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c"},{secondaryRole:"is-body-font-bold-italic",role:"body-font-bold-italic",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2"}]},{subgroupName:"Adobe Caslon Pro",cssName:i.sparkfonts["Adobe Caslon Pro"].cssName,faces:[{secondaryRole:"is-body-font",role:"body-font",lookupKey:"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76"},{secondaryRole:"is-body-font-italic",role:"body-font-italic",lookupKey:"258adb9224315b712345eb03b2d30e94fe6690b5dceede"},{secondaryRole:"is-body-font-bold",role:"body-font-bold",lookupKey:"258adb9224315b712345eb03b2d30e94fe6d8bb8d4"},{secondaryRole:"is-body-font-bold-italic",role:"body-font-bold-italic",lookupKey:"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75"}]},{subgroupName:"Calluna",cssName:i.sparkfonts.Calluna.cssName,faces:[{secondaryRole:"is-body-font",role:"body-font",lookupKey:"278fd89c347f793d024ce318fee20e"},{secondaryRole:"is-body-font-italic",role:"body-font-italic",lookupKey:"278fd89c347f793d195de501fbe0"},{secondaryRole:"is-body-font-bold",role:"body-font-bold",lookupKey:"278fd89c347f793d1246e809"},{secondaryRole:"is-body-font-bold-italic",role:"body-font-bold-italic",lookupKey:"278fd89c347f793d1246e809b2ca089abf4687"}]},{subgroupName:"Lato",cssName:i.sparkfonts.Lato.cssName,faces:[{secondaryRole:"is-body-font",role:"body-font",lookupKey:"288fc09f6c437d772545e51f"},{secondaryRole:"is-body-font-italic",role:"body-font-italic",lookupKey:"288fc09f6c586c713c40e7"},{secondaryRole:"is-body-font-bold",role:"body-font-bold",lookupKey:"288fc09f6c53777c34"},{secondaryRole:"is-body-font-bold-italic",role:"body-font-bold-italic",lookupKey:"288fc09f6c5374713342a424e6e21092b0"}]},{subgroupName:"Museo Slab",cssName:i.sparkfonts["Museo Slab"].cssName,faces:[{secondaryRole:"is-body-font",role:"body-font",lookupKey:"299bc7952e314b7c314ba95ea2b3"},{secondaryRole:"is-body-font-italic",role:"body-font-italic",lookupKey:"299bc7952e314b7c314ba95ea2b35cb2a74e88bdd3"},{secondaryRole:"is-body-font-bold",role:"body-font-bold",lookupKey:"299bc7952e314b7c314ba95aa2b3"},{secondaryRole:"is-body-font-bold-italic",role:"body-font-bold-italic",lookupKey:"299bc7952e314b7c314ba95aa2b35cb2a74e88bdd3"}]},{subgroupName:"PT Sans",cssName:i.sparkfonts["PT Sans"].cssName,faces:[{secondaryRole:"is-body-font",role:"body-font",lookupKey:"34ba94a3207f6b3d024ce318fee20e"},{secondaryRole:"is-body-font-italic",role:"body-font-italic",lookupKey:"34ba94a3207f6b3d195de501fbe0"},{secondaryRole:"is-body-font-bold",role:"body-font-bold",lookupKey:"34ba94a3207f6b3d1246e809"},{secondaryRole:"is-body-font-bold-italic",role:"body-font-bold-italic",lookupKey:"34ba94a3207f6b3d1246e809b2ca089abf4687"}]},{subgroupName:"PT Serif",cssName:i.sparkfonts["PT Serif"].cssName,faces:[{secondaryRole:"is-body-font",role:"body-font",lookupKey:"34ba94a3246371767d7be10ae7ef1d89"},{secondaryRole:"is-body-font-italic",role:"body-font-italic",lookupKey:"34ba94a3246371767d60f00cfeea1f"},{secondaryRole:"is-body-font-bold",role:"body-font-bold",lookupKey:"34ba94a3246371767d6beb01f6"},{secondaryRole:"is-body-font-bold-italic",role:"body-font-bold-italic",lookupKey:"34ba94a3246371767d6beb01f6a3358fb2438db7"}]},{subgroupName:"Proxima Nova",cssName:i.sparkfonts["Proxima Nova"].cssName,faces:[{secondaryRole:"is-body-font",role:"body-font",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a6"},{secondaryRole:"is-body-font-italic",role:"body-font-italic",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056"},{secondaryRole:"is-body-font-bold",role:"body-font-bold",lookupKey:"349cdb88287c79301e46f20cbfc11397b7"},{secondaryRole:"is-body-font-bold-italic",role:"body-font-bold-italic",lookupKey:"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467"}]}],d.resolve(i)}.bind(null,n)).catch(n.oe)),d.promise}function m(e){return{subgroup:{name:e.preferredFamilyName||e.familyName,cssName:e.family,typekitPreviewId:!1,paragraphRecommended:!1,serif:e.serif,calligraphic:e.calligraphic},face:{name:e.preferredSubfamilyName||e.subfamilyName,path:e.filename,metrics:e,lookupKey:e.postScriptName}}}function v(t){return h[t]||(h[t]=i.defer(),e.getScript("https://use.typekit.net/"+t+".js",(function(e,n,i){try{window.Typekit.load({async:!0})}catch(e){}h[t].resolve()}))),h[t].promise}return{ENABLE_UPLOADED_FONTS_RENDITIONS:!1,USE_SPARKFONTS_PREVIEW_API:p,inject:function(){return e("html").addClass("font-picker-wf-loading"),(l||(l=i.defer(),c=v(p?"eww8idl":"zqr1kjd"),window.TypekitPreview?l.resolve(window.TypekitPreview):(e.getScript("https://use.typekit.net/previewkits/pk-v1.js"),f())),i.allSettled([l.promise,c])).then((function(){return e("html").removeClass("font-picker-wf-loading"),window.TypekitPreview}))},getFontRegistry:g,loadFonts:function(e){g().then((function(n){var i=[];t.each(e,(function(e){var t=n.sparkfonts[e];if(t){if(t.typekitPreviewId){var r={id:t.typekitPreviewId,variations:t.typekitVariations,css_name:t.cssName,name:e};i.push(r)}}else console.warn("loadFont font not found: "+e)})),p&&window.TypekitPreview.load(i,{active:function(){},inactive:function(e,t){console.warn("font error "+e+" and "+t)},fontinactive:function(e,t){console.warn("font error2 "+e+" and "+t)}})}))},getFont:function(e){var n=e,i=e;return g().then((function(e){return e.sparkfonts[n]?{subgroup:e.sparkfonts[n]}:(u||(u={},t.each(e.sparkfonts,(function(e,n){t.each(e.faces,(function(i){u[i.lookupKey]={subgroup:t.extend({},e,{name:n}),face:i}}))}))),u[i])}))},fontArrayByFace:function(e){var n={};return t.each(e,(function(e){n[e.postScriptName]=m(e)})),n},injectKit:v,convertPostFaceToJSON:m,convertPostFaceToAC:function(e){var t=new s;return t.setFontDataFromSparkFontDefn(m(e),!0,!0),t},getFontNormalized:function(e,t){var n=0;if(t){var i=600/t.capHeight*(.85/t.ascentDescentRatio)/t.capRatio;if(n=10*t.descentRatio,t.nameHeight){var r=t.nameHeight/180;i<1&&r<1?i=Math.max(r,i):(i>3||i<.5&&r>1)&&(i=r)}e=Math.round(100*i*e)/100}return{size:e,vshift:n}},cssName:function(e){return e?(0===(e=e.replace(/ /g,"-")).charAt(0).search(/[0-9]/)&&(e="css-name-"+e),e=e.replace(/[^A-z\-\_0-9]/g,"").toLowerCase()):e=r.v4(),e},checkProvidedFonts:function(e){var t="/fonts/toua-check/"+window.encodeURIComponent(e.join(",")),n=i.defer();return a.ajax({type:"GET",url:t,headers:{"x-api-key":o.key}}).then((function(e){n.resolve(e)}),(function(e){n.reject(e)})),n.promise},providedFont:function(e){var t="/fonts/toua/"+window.encodeURIComponent(e),n=i.defer();return a.ajax({type:"GET",url:t,headers:{"x-api-key":o.key}}).then((function(e){n.resolve(e)}),(function(e){n.reject(e)})),n.promise}}}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";var i=n(140),r=n(141);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){r.isString(e)&&(e=y(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(c),u=["%","/","?",";","#"].concat(d),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(142);function y(e,t,n){if(e&&r.isObject(e)&&e instanceof o)return e;var i=new o;return i.parse(e,t,n),i}o.prototype.parse=function(e,t,n){if(!r.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(s);c[0]=c[0].replace(/\\/g,"/");var y=e=c.join(s);if(y=y.trim(),!n&&1===e.split("#").length){var w=l.exec(y);if(w)return this.path=y,this.href=y,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var k=a.exec(y);if(k){var x=(k=k[0]).toLowerCase();this.protocol=x,y=y.substr(k.length)}if(n||k||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var _="//"===y.substr(0,2);!_||k&&m[k]||(y=y.substr(2),this.slashes=!0)}if(!m[k]&&(_||k&&!v[k])){for(var S,C,T=-1,M=0;M<h.length;M++){-1!==(I=y.indexOf(h[M]))&&(-1===T||I<T)&&(T=I)}-1!==(C=-1===T?y.lastIndexOf("@"):y.lastIndexOf("@",T))&&(S=y.slice(0,C),y=y.slice(C+1),this.auth=decodeURIComponent(S)),T=-1;for(M=0;M<u.length;M++){var I;-1!==(I=y.indexOf(u[M]))&&(-1===T||I<T)&&(T=I)}-1===T&&(T=y.length),this.host=y.slice(0,T),y=y.slice(T),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var P=this.hostname.split(/\./),A=(M=0,P.length);M<A;M++){var E=P[M];if(E&&!E.match(p)){for(var L="",N=0,F=E.length;N<F;N++)E.charCodeAt(N)>127?L+="x":L+=E[N];if(!L.match(p)){var R=P.slice(0,M),O=P.slice(M+1),B=E.match(f);B&&(R.push(B[1]),O.unshift(B[2])),O.length&&(y="/"+O.join(".")+y),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=i.toASCII(this.hostname));var z=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+z,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!g[x])for(M=0,A=d.length;M<A;M++){var j=d[M];if(-1!==y.indexOf(j)){var $=encodeURIComponent(j);$===j&&($=escape(j)),y=y.split(j).join($)}}var H=y.indexOf("#");-1!==H&&(this.hash=y.substr(H),y=y.slice(0,H));var V=y.indexOf("?");if(-1!==V?(this.search=y.substr(V),this.query=y.substr(V+1),t&&(this.query=b.parse(this.query)),y=y.slice(0,V)):t&&(this.search="",this.query={}),y&&(this.pathname=y),v[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var G=this.search||"";this.path=z+G}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+i},o.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(r.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,i=Object.keys(this),a=0;a<i.length;a++){var s=i[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),c=0;c<l.length;c++){var d=l[c];"protocol"!==d&&(n[d]=e[d])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!v[e.protocol]){for(var u=Object.keys(e),h=0;h<u.length;h++){var p=u[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",b=n.search||"";n.path=g+b}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),k=w||y||n.host&&e.pathname,x=k,_=n.pathname&&n.pathname.split("/")||[],S=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),k=k&&(""===f[0]||""===_[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,_=f;else if(f.length)_||(_=[]),_.pop(),_=_.concat(f),n.search=e.search,n.query=e.query;else if(!r.isNullOrUndefined(e.search)){if(S)n.hostname=n.host=_.shift(),(D=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=D.shift(),n.host=n.hostname=D.shift());return n.search=e.search,n.query=e.query,r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=_.slice(-1)[0],T=(n.host||e.host||_.length>1)&&("."===C||".."===C)||""===C,M=0,I=_.length;I>=0;I--)"."===(C=_[I])?_.splice(I,1):".."===C?(_.splice(I,1),M++):M&&(_.splice(I,1),M--);if(!k&&!x)for(;M--;M)_.unshift("..");!k||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),T&&"/"!==_.join("/").substr(-1)&&_.push("");var D,P=""===_[0]||_[0]&&"/"===_[0].charAt(0);S&&(n.hostname=n.host=P?"":_.length?_.shift():"",(D=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=D.shift(),n.host=n.hostname=D.shift()));return(k=k||n.host&&_.length)&&!P&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){e.exports=cookie},function(e,t,n){var i=n(16),r=i.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(o(i,t),t.Buffer=a),o(r,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,n){var i=n(327)("wks"),r=n(245),o=n(28).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},function(e,t,n){"use strict";var i=n(217),r=n(470),o=n(339),a=n(760),s=n(285);function l(e){return e}function c(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}t.newBlob=function(e,n){t.checkSupport("blob");try{return new Blob([e],{type:n})}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(e,t,n){var i=[],r=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;r<o;)"array"===t||"nodebuffer"===t?i.push(String.fromCharCode.apply(null,e.slice(r,Math.min(r+n,o)))):i.push(String.fromCharCode.apply(null,e.subarray(r,Math.min(r+n,o)))),r+=n;return i.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var n=65536,i=t.getTypeOf(e),r=!0;if("uint8array"===i?r=d.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=d.applyCanBeUsed.nodebuffer),r)for(;n>1;)try{return d.stringifyByChunk(e,i,n)}catch(e){n=Math.floor(n/2)}return d.stringifyByChar(e)}function h(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}t.applyFromCharCode=u;var p={};p.string={string:l,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,o.allocBuffer(e.length))}},p.array={string:u,array:l,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},p.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:l,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:l,nodebuffer:function(e){return o.newBufferFrom(e)}},p.nodebuffer={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:l},t.transformTo=function(e,n){if(n||(n=""),!e)return n;t.checkSupport(e);var i=t.getTypeOf(n);return p[i][e](n)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":i.nodebuffer&&o.isBuffer(e)?"nodebuffer":i.uint8array&&e instanceof Uint8Array?"uint8array":i.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!i[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,n,i="";for(n=0;n<(e||"").length;n++)i+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return i},t.delay=function(e,t,n){a((function(){e.apply(n||null,t||[])}))},t.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},t.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},t.prepareContent=function(e,n,o,a,l){return s.Promise.resolve(n).then((function(e){return i.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,n){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=function(e){n(e.target.error)},i.readAsArrayBuffer(e)})):e})).then((function(n){var d,u=t.getTypeOf(n);return u?("arraybuffer"===u?n=t.transformTo("uint8array",n):"string"===u&&(l?n=r.decode(n):o&&!0!==a&&(n=c(d=n,i.uint8array?new Uint8Array(d.length):new Array(d.length)))),n):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(5),n(7),n(166),n(43)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return new(n.Model.extend({LOGGER_NAME:"[experiment-engine]",_specialVariantKey:"__variant__",_loadDefer:null,_authenticatedUserAttributeKey:"avn",_unauthenticatedUserAttributeKey:"uavn",_experimentDataLoaded:!1,_browserStorage:null,_validControlGroups:{control:!0,controlA:!0,controlUnauth:!0,controlUnauthA:!0},_specialNames:{controlLocked:!0},configurationTemplate:{autoTrack:!0,defaultVariant:"control",enableWildcardTracking:!0},experiments:{},init:function(){t.bindAll(this,t.functionsIn(this)),this._browserStorage=new s(window.sessionStorage),window.marvel.events.on("experience-loaded",this._loadExperience.bind(this)),this._loadUserAttributes()},_loadUserAttributes:function(){var e=function(){var e=window.location.href.split("?");if(e&&e.length>1){var t=e[1],n={};if(t)for(var i=t.split("&"),r=0;r<i.length;r++){var o=i[r].split("="),a=decodeURIComponent(o[0]);if(a&&a.length&&o&&o.length>=2){var s=o[1].split("#");n[a]=decodeURIComponent(s[0])}}return n}return!1}();if(e&&e.r&&0===e.r.indexOf("experience")){var n=this._browserStorage.get("eeUserAttributes");t.isArray(n)||(n=[]),-1===n.indexOf(e.r)&&(n.push(e.r),this._browserStorage.set("eeUserAttributes",n))}},_loadExperience:function(e){var t=e.experimentData;this._canAssignUserToExperiment(t)&&this._assign(t)},_loadExperimentData:function(){var e=[];return this._loadDefer=i.defer(),r.loadAllFeatures().spread(function(n,i){var r;n&&"fulfilled"===n.state?t.isObject(n.value)&&t.isObject(n.value.experimentData)?(r=n.value.experimentData,this._canAssignUserToExperiment(r)&&this._assign(r)):e.push("Invalid authenticated experiment data object"):n&&"rejected"===n.state&&e.push(n.reason),i&&"fulfilled"===i.state?t.isObject(i.value)&&t.isObject(i.value.experimentData)?(r=i.value.experimentData,this._canAssignUserToExperiment(r)&&this._assign(r)):e.push("Invalid unauthenticated experiment data object"):i&&"rejected"===i.state&&e.push(i.reason),2===e.length?(this._experimentDataLoaded=!1,this._loadDefer.reject(e)):(this._experimentDataLoaded=!e.length,this._loadDefer.resolve())}.bind(this)).done(),this._loadDefer.promise},load:function(){return this._experimentDataLoaded||(this._experimentDataLoaded=!0,this._loadExperimentData()),this._loadDefer.promise},reset:function(){this.experiments={}},setUserExperimentData:function(e){if(!this._canAssignUserToExperiment(e))return null;var t=new a(e),n=t._getStandardTypeName(),i=t._getAuthenticatedTypeName();return this.experiments[n]||(this.experiments[n]={}),this.experiments[n][i]=e,t},getExperiments:function(){return this.experiments},_assign:function(e){var t=this.setUserExperimentData(e);t&&(o.setExperiment(e,t._getStandardTypeName(),t._getAuthenticatedTypeName()),t.track("assigned"))},_shouldTrack:function(e,t){return!e.isInSecondLockup()&&(t&&!1!==t.autoTrack)},_isControlGroup:function(e){return!0===this._validControlGroups[e]},_hasSpecialName:function(e){return!0===this._specialNames[e]},_canAssignUserToExperiment:function(e){return!!t.isObject(e)&&!(t.isEmpty(e.experimentName)||t.isEmpty(e.variantName)||this._isControlGroup(e.experimentName)||this._hasSpecialName(e.experimentName))},_defaultVariant:function(e){return e.defaultVariant},_hasVariantCallback:function(e,n){return e&&t.isObject(e)&&e.hasOwnProperty(n)&&t.isFunction(e[n])},_extendConfiguration:function(e){return t.isObject(e)||(e={}),t.extend({},this.configurationTemplate,e)},_shouldEnableWildcardTracking:function(e,t){return!(!t||!t.enableWildcardTracking)||e&&e.indexOf("*")>=0},_getExperiment:function(e,t){return this.experiments&&this.experiments[e]&&this.experiments[e][t]?this.experiments[e][t]:null},_findMatchingExperiment:function(e,n){if(t.isEmpty(this.experiments))return null;for(var i in this.experiments)if(this.experiments.hasOwnProperty(i))for(var r in this.experiments[i])if(this.experiments[i].hasOwnProperty(r)){var o=this.experiments[i][r];if(n&&0===o.experimentName.indexOf(e))return o;if(o.experimentName===e)return o}return null},_runForExperiment:function(e,t,n){var i=e.getVariantName();this._hasVariantCallback(t,i)?t[i](e):this._hasVariantCallback(t,this._specialVariantKey)&&t[this._specialVariantKey](e),this._shouldTrack(e,n)&&e.track()},_getRawExperimentName:function(e){return e.replace("*","")},track:function(e,t,n){return this.load().then(function(){var i=this._shouldEnableWildcardTracking(e),r=this._getRawExperimentName(e),o=this._findMatchingExperiment(r,i);if(o){var s=new a(o);if(s.getVariantName()===t)return s.track(n),s}return null}.bind(this)).done()},_getVariants:function(e){var n=e.features;return t.isObject(n)?t.isArray(n)&&n.length?n:[n]:[]},loadExperimentsBasedOnAttrib:function(e){return this.getStandardAuthenticatedExperiment()||this._hasAuthenticatedUserAttribute(e)?r.featuresLoaded():(this.registerAuthenticatedUserAttributes([e]),r.refreshFeatures())},run:function(e,t,n){var r=this._extendConfiguration(n),o=this._getRawExperimentName(e),s=i.defer();return this.load().then(function(){var n=null,i=this._shouldEnableWildcardTracking(e,r),l=this._findMatchingExperiment(o,i);l&&(n=new a(l),this._runForExperiment(n,t,r));var c=this._defaultVariant(r);!n&&this._hasVariantCallback(t,c)&&t[c](n),s.resolve(n)}.bind(this)).catch((function(e){window.marvel.logger.error("[ExperimentEngine] run_load_failure",{error:e}),s.reject(e)})).done(),s.promise},runSilent:function(e,t,n){var i=this._extendConfiguration(n);return i.autoTrack=!1,this.run(e,t,i)},removeAuthenticatedUserAttributes:function(e){var t={},n=this.getStandardAuthenticatedExperiment();n&&(t=n.metadata);var i=r.getAuthenticatedUserAttributes();i&&i.length&&t&&t.operation===e&&this._browserStorage.remove(this._authenticatedUserAttributeKey)},_hasAuthenticatedUserAttribute:function(e){var n=r.getAuthenticatedUserAttributes();return!!t.find(n,(function(t){return t===e}))},registerAuthenticatedUserAttributes:function(e){return this._registerUserAttributes(this._authenticatedUserAttributeKey,r.getAuthenticatedUserAttributes(),e)},registerUnauthenticatedUserAttributes:function(e){return this._registerUserAttributes(this._unauthenticatedUserAttributeKey,r.getUnauthenticatedUserAttributes(),e)},_registerUserAttributes:function(e,n,i){if(!t.isArray(i))return!1;var r=t.union(n,i);return this._browserStorage.set(e,r),r},getStandardUnauthenticatedExperiment:function(){return this.experiments&&this.experiments.standard&&this.experiments.standard.unauthenticated?this.experiments.standard.unauthenticated:null},getStandardAuthenticatedExperiment:function(){return this.experiments&&this.experiments.standard&&this.experiments.standard.authenticated?this.experiments.standard.authenticated:null},shouldRedirectUserForExperiment:function(){var e=r.getAuthenticatedUserAttributes();if(e&&e.length){var t=this.getStandardAuthenticatedExperiment();if(t&&t.metadata&&t.metadata.hasOwnProperty("first-time-user-redirection-link"))return!0}return!1},handleExperimentRedirect:function(){return this.load().then(function(){if(this.shouldRedirectUserForExperiment()){var e=this.getStandardAuthenticatedExperiment();e&&e.metadata&&e.metadata["first-time-user-redirection-link"]&&window.marvel.navigate(e.metadata["first-time-user-redirection-link"],{trigger:!0,replace:!0})}}.bind(this)).catch((function(e){window.marvel.logger.error("[ExperimentEngine] handleExperimentRedirect_load_failure",{error:e})}))}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(11)],void 0===(r=function(e,t,n,i){var r=new i({color:"coral",name:"BrowserStorage"});return n.Model.extend({_shortStorage:null,_global:window,_persistentStorage:null,initialize:function(e,t){this.setStorage(e,t)},setStorage:function(e,n){this._shortStorage=null,this._persistentStorage=null;try{t.isUndefined(e)?this._shortStorage=null:this._isBrowserStorage(e)?this._shortStorage=this._global[e]:this._isValidStorage(e)?this._shortStorage=e:this._shortStorage=null,t.isUndefined(n)?this._persistentStorage=null:this._isBrowserStorage(n)?this._persistentStorage=this._global[n]:this._isValidStorage(n)?this._persistentStorage=n:this._persistentStorage=null}catch(e){this._shortStorage=null,this._persistentStorage=null}},_isValidStorage:function(e){try{return!t.isEmpty(e)&&t.isObject(e)&&t.isFunction(e.getItem)&&t.isFunction(e.removeItem)&&t.isFunction(e.setItem)}catch(e){r.error("could not check valid storage"+e)}return!1},_isBrowserStorage:function(e){try{return t.isString(e)&&!t.isEmpty(e)&&this._global.hasOwnProperty(e)&&this._global[e]&&this._isValidStorage(this._global[e])}catch(e){r.error("could not check storage"+e)}return!1},getStorage:function(e,t){try{if(this._isBrowserStorage(e))return this._global[e];if(this._isValidStorage(e))return e;if(this._shortStorage)return this._shortStorage;if(this._isBrowserStorage(t))return this._global[t];if(this._isValidStorage(t))return t;if(this._persistentStorage)return this._persistentStorage}catch(e){r.error("could not get storage"+e)}return null},get:function(e,n,i,r){var o,a=this.getStorage(i,r),s=null;try{if(n=n||JSON.parse,a)return s=a.getItem(e),n&&t.isFunction(n)&&(o=n(s),t.isObject(o))?o:s}catch(e){return s}return null},set:function(e,n,i,o,a){try{i=i||JSON.stringify;var s=this.getStorage(o,a);if(s)return i&&t.isFunction(i)&&t.isObject(n)&&(n=i(n)),s.setItem(e,n)}catch(t){r.error("could not set item "+e+" with value "+n+" "+t)}return null},remove:function(e,t,n){var i=this.getStorage(t,n);return i?i.removeItem(e):null},processValue:function(e,t,n){var i=this.getStorage(t,n),r=this.get(e,null,t,n);return i&&r&&r.indexOf("processed")<0?i.setItem(e,r+"_processed"):null},hasSetValue:function(e,t,n){var i=this.get(e,null,t,n);return i&&i.indexOf("processed")>=0},getRawUnprocessedValue:function(e,t,n){var i=this.getStorage(t,n),r=this.get(e,null,t,n);return i&&r&&r.length?r.replace("_processed",""):null}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3)],void 0===(r=function(e,t,n,i){"use strict";return new(n.Model.extend({initialize:function(){this.deferredObject=void 0,this.reTries=0,this.MAX_ATTEMPTS=10},isLoadedAndConsented:function(){return this.deferredObject||(this.deferredObject=i.defer(),this.checkForConsent()),this.deferredObject.promise},checkForConsent:function(){window.sprk_evidon_consented?this.deferredObject.resolve(!0):this.MAX_ATTEMPTS>this.reTries?(this.reTries++,t.delay(this.checkForConsent.bind(this),500)):this.deferredObject.resolve(!1)}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(13),n(7),n(19),n(4),n(11),n(6),n(113)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d){"use strict";var u=new l({color:"firebrick",name:"App Storage"});return n.Model.extend({seedNewDoc:function(e){},initialize:function(){this.initPromise=r.storageReady()},initSyncGroup:function(){this.initPromise=r.storageReady().then(function(){return r.ensureSyncGroup(this.getSetting("syncGroup"))}.bind(this))},setSaveThumbOnLoad:function(){this._saveThumbOnLoad=!0},saveThumbOnLoad:function(){var e=this._saveThumbOnLoad;return this._saveThumbOnLoad=!1,e},_startingCreateDoc:function(){},releaseBatonLock:function(){return d.releaseBatonAndCloseSession(this.currentDoc)},_createDoc:function(e){this.currentDoc=null,this._startingCreateDoc(),this.initPromise.then(function(t){this.createDocFromConfig(t,e,this.creationDefer),e.assetId&&(this.rootObjectId=e.assetId)}.bind(this),function(e){this.initSyncGroup(),this.creationDefer.reject(e)}.bind(this)).catch(function(e){this.initSyncGroup(),this.creationDefer.reject(e)}.bind(this)).done()},createDocFromConfig:function(e,t,n){t.assetId?this._createDocLoad(e,t,n):this._createDocNew(e,t,n)},_createDocLoad:function(e,t,n){r.syncEnter(),e.getComposite(t.assetId,void 0,!0).then(function(e){return e.getMyApp().checkDocCompatibility(e,"opening").then(function(){return this.currentDoc=e,i.resolve()}.bind(this))}.bind(this)).then(function(){o.setCurrentProjectId(t.assetId);var e=o.getProductName()||this.currentDoc.get("syncGroupName");o.trackEvent("editor:loadedProject",{contextData:["projectId"]},e+":editor"),r.setSyncMode(r.MODE_EDITOR,this.currentDoc),r.logger.debug("Composite loaded.  asset-id["+t.assetId+"]"),r.syncLeave(),marvel.events.trigger("loaded-composite-doc",this.currentDoc),a.augmentLoadDoc(this.currentDoc,t),n.resolve(this.currentDoc)}.bind(this)).catch(function(e){this.currentDoc=null,n.reject(e)}.bind(this))},_createDocNew:function(e,t,n){return this.currentDoc=e.newComposite(this.getSetting("newDocName"),this.getSetting("doctype")),r.setSyncMode(r.MODE_EDITOR,this.currentDoc),this._setProjectContexts(this.currentDoc,t),a.augmentLoadDoc(this.currentDoc,t),a.augmentNewDoc(this.currentDoc,t).then(function(){return this.seedNewDoc(this.currentDoc),n.resolve(this.currentDoc),!0}.bind(this))},_setProjectContexts:function(e,n){if(n&&n.hasOwnProperty("projectContext")&&t.isObject(n.projectContext)){var i=e.getDCXRoot();t.each(n.projectContext,function(e,t){i.setValue("projectContext#"+t,e),"useCaseId"===t&&this._saveLastUsedUseCaseSession(e)}.bind(this))}},getProjectContexts:function(e,n){if(!(e=e||this.currentDoc))return{};var i,r=e.getDCXRoot();return n?i=t.reduce(n,(function(e,n){var i=r.getValue("projectContext#"+n);return t.isUndefined(i)||(e[n]=i),e}),{}):(i={},t.each(r._data,(function(e,t){0===t.indexOf("projectContext#")&&(i[t.split("projectContext#")[1]]=e)}))),t.each(i,(function(e,t){if("string"==typeof e&&0===e.indexOf("object:"))try{e=JSON.parse(e.substring(7)),i[t]=e}catch(e){u.warn("could not parse projectContext subobject:"+t,e)}})),i},_saveLaunchConfigSession:function(e){if(window.sessionStorage)try{sessionStorage.setItem("launch_config_tmp",JSON.stringify(e))}catch(e){u.error("error while saving launch config",e)}},_getAndClearLaunchConfigFromSession:function(){var e;try{if(!window.sessionStorage)return null;var t=sessionStorage.getItem("launch_config_tmp")||void 0;t&&(e=JSON.parse(t),sessionStorage.removeItem("launch_config_tmp"))}catch(e){u.error("error while getting launch config",e)}return e},_saveLastUsedUseCaseSession:function(e){if(window.sessionStorage)try{sessionStorage.setItem("last_used_usecase",JSON.stringify(e))}catch(e){u.error("error while saving launch config",e)}},createDocument:function(e){return this.creationDefer=i.defer(),r.setSyncMode(r.MODE_DISABLED),this.currentDoc?r.waitForQuiet(this.currentDoc).then(function(){this._createDoc(e)}.bind(this)):this._createDoc(e),this.creationDefer.promise},waitForQuiet:function(e){return(e=e||this.currentDoc)?r.waitForQuiet(e):i.resolve()},loadDocument:function(){return this.creationDefer.promise},storageManager:function(){return r},editorUnloadFinished:function(){this.currentDoc=null},getImage:function(t,n,r,o){if(!(o=o||this.currentDoc))return console.error("no doc for getImage",{pathOrComponent:t,query:n,buster:r}),i.reject(new Error("no doc for getImage:"+t));var a,s=o.getDCXComposite();if(!(a="string"==typeof t?s.current.getComponentWithAbsolutePath(t):t))return i.resolve(null);var l=new i.defer;return o.getImageComponentHref(a,n.size).then(function(t){var n=0;!function i(){var r=document.createElement("img"),o=function(e,t,r){n<2?i():a(r,t,"Image not accepting URL")},a=function(e,t,n){var i=n,r=1;"Image not accepting URL"!==n&&(r=e.status),l.reject({message:i,status:r})};r.onload=function(){l.resolve({path:t.replace(new RegExp("^.*image_assets/[^/]*/"+s.id+"/"),""),size:{width:r.width,height:r.height},img:this})},r.onerror=function(){e.get(t).success(o).error(a)},n++,r.src=t}()}.bind(this)).catch(function(e){window.marvel.logger.error("app-storage-base caught error loading an image",e),l.reject(e)}.bind(this)).done(),l.promise},getPreviewHref:function(e){var t=(e=e||this.currentDoc).getMyApp().getPreviewComponent(e);return e.getImageComponentHref(t)}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},function(e,t,n){var i=n(118),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(45),n(13),n(7)],void 0===(r=function(e,t,n,i,r,o){"use strict";return new(i.extend({_createDoc:function(e){var t=this;t.currentDoc=null,t.launchConfig=e,t._docReadyDefer=Q.defer(),t.initPromise.then((function(n){o.setCurrentProjectId(e.assetId),e.projectContext&&t._saveLaunchConfigSession(e.projectContext),marvel.events.trigger("verify-email");var i=e.assetId?null:{};t.creationDefer.resolve(i)})).catch(function(e){this.initSyncGroup(),t.creationDefer.reject(e),dbg.error("app-storage::_createDoc",e)}.bind(this)).done()},setRealDoc:function(e){r.setSyncMode(r.MODE_EDITOR,e),this.currentDoc=e,this._docReadyDefer.resolve(e),t.isFunction(this._setProjectContexts)&&this._setProjectContexts(e,{projectContext:this._getAndClearLaunchConfigFromSession()})},ensureDoc:function(){return this._docReadyDefer.promise}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i=n(30),r=n(439),o=n(215),a=Object.defineProperty;t.f=n(59)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(135);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}},,function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(4),n(26),n(101)],void 0===(r=function(e,t,i,r,o,a,s){"use strict";var l,c,d={};function u(){return d["mui-cc-storage"]||(d["mui-cc-storage"]=i.defer(),Promise.resolve().then(function(e){d["mui-cc-storage"].resolve(n(13))}.bind(null,n)).catch(n.oe)),d["mui-cc-storage"].promise}function h(){return d["marvel-brand-kit"]||(d["marvel-brand-kit"]=i.defer(),Promise.resolve().then(function(e){d["marvel-brand-kit"].resolve(n(19))}.bind(null,n)).catch(n.oe)),d["marvel-brand-kit"].promise}function p(){return d["marvel-auth-controller"]||(d["marvel-auth-controller"]=i.defer(),Promise.resolve().then(function(e){d["marvel-auth-controller"].resolve(n(6))}.bind(null,n)).catch(n.oe)),d["marvel-auth-controller"].promise}function f(){return d["collab-ui"]||(d["collab-ui"]=i.defer(),n.e(11).then(function(e){d["collab-ui"].resolve(n(310))}.bind(null,n)).catch(n.oe)),d["collab-ui"].promise}return l=r.Model.extend({initialize:function(){p().then(this._lazyInitialize.bind(this))},_lazyInitialize:function(){window.marvel.events.on("spark-invite-collaborators-to-current-doc",this._handleInviteCollaborators.bind(this))},_handleInviteCollaborators:function(e,t){if(!this._inviteDialogOpen){this._inviteDialogOpen=!0;var r,o=t.composite;return(d["mrvl-analytics"]||(d["mrvl-analytics"]=i.defer(),Promise.resolve().then(function(e){d["mrvl-analytics"].resolve(n(7))}.bind(null,n)).catch(n.oe)),d["mrvl-analytics"].promise).then((function(e){var n=a.getAppForDoc(o),i={contextualData10:"inviteLocation:"+t.source,contextualData12:"inviteType:project",sparkFormat:n.getDisplayName().toLowerCase(),namespace:"organizer"};!t.source||"project"!==t.source&&"projectHeader"!==t.source||(i.namespace=n.getCPCommunity()),e.trackEvent("collab:invitePressed",i,t.page),window.marvel.logger.info("track analytics",i)})).then(f).then(function(e){var t=new e.default;return r=function(){window.marvel.events.off("left-editing-session",r),window.marvel.logger.info("Editor closed with invite dialog up - closing"),t.abortDialog()},window.marvel.events.on("left-editing-session",r),t.handleCollabUI(o)}.bind(this)).then(function(t){if(Array.isArray(t)&&(this.getCollaboration(o).then((function(e){var t=o.getCollaboration();t&&0==e.collaborators.length?(o.setCollaboration(void 0),o.set("collaboration",void 0)):!t&&e.collaborators.length+e.invitations.length>0&&o.setCollaboration("OUTGOING"),window.marvel.events.trigger("document-collaboration-changed",{composite:o,collab:e})})).catch((function(e){})),t&&t.length)){window.marvel.logger.traceflow("collaboration:invitations","_handleCollaborateClick sent invitations:",JSON.stringify(t));var n=i.resolve(o);return o.getCompositeDoc&&(n=o.getCompositeDoc),n.then((function(e){return e.getMyPrimaryApp().beforeCollaboration(e)})).then(function(){return this.silentlyInviteCollaboratorsToBrand(o,t)}.bind(this)).then((function(){e.area&&"editor"===e.area&&window.marvel.events.trigger("upgrade-editing-session",o)}))}}.bind(this)).finally(function(){this._inviteDialogOpen=!1,r&&window.marvel.events.off("left-editing-session",r)}.bind(this)).catch((function(e){window.marvel.logger.warn("[Collab] Error attempting to invite collaborators",e),i.all([(d["spark-g11n"]||(d["spark-g11n"]=i.defer(),Promise.resolve().then(function(e){d["spark-g11n"].resolve(n(8))}.bind(null,n)).catch(n.oe)),d["spark-g11n"].promise),(d["confirm-view"]||(d["confirm-view"]=i.defer(),Promise.resolve().then(function(e){d["confirm-view"].resolve(n(12))}.bind(null,n)).catch(n.oe)),d["confirm-view"].promise)]).spread((function(e,t){t.showAlert(e.getString("organizer-collaboration-error-title"),e.getString("organizer-collaboration-error-description"),{confirmText:e.getString("organizer-collaboration-error-confirm-text")})}))})).done()}},getPendingInvitations:function(e,t,n){var r=["application/vnd.adobe.theo.sptemplate+dcx","application/vnd.adobe.luca.sptemplate+dcx","application/vnd.adobe.ginger.sptemplate+dcx"],a=["application/vnd.adobe.theo.document+dcx","application/vnd.adobe.luca.project+dcx","application/vnd.adobe.luca.document+dcx","application/vnd.adobe.ginger.project+dcx","application/vnd.adobe.ginger.document+dcx"],s=i.defer(),l=!1!==e,c=!0===t,d=!0===n;return p().then((function(e){e.ajax({type:"GET",url:"https://"+o.collab+"/invitations?ts="+Date.now(),headers:{"x-api-key":o.key},contentType:"application/json; charset=utf-8"}).then((function(e){var t=e.reduce((function(e,t){return l&&a.includes(t.resourceType)?(e.push(t),e):c&&"application/vnd.adobe.authoringcontext.document+dcx"===t.resourceType?(e.push(t),e):(d&&r.includes(t.resourceType)&&e.push(t),e)}),[]);s.resolve(t)})).fail((function(e){s.reject(e)}))})),s.promise},getCompositeDoc:function(e){return"function"==typeof e.getCompositeDoc?e.getCompositeDoc():i.resolve(e)},getUsersWhoWillNeedBrand:function(e,n){var i=t.extend([],n);return this.getCompositeDoc(e).then(function(e){return h().then(function(t){return t.getController().then(function(t){return t.getActiveContext(e)}.bind(this))}.bind(this)).then(function(e){return e?this.getCollaboration(e.composite).then((function(e){return e&&e.collaborators&&e.collaborators.length?t.reduce(i,(function(n,i){return t.find(e.collaborators,(function(e){return e.email==i}))||n.push(i),n}),[]):i})):[]}.bind(this))}.bind(this))},silentlyInviteCollaboratorsToBrand:function(e,t){return t&&0!=t.length?this.getCompositeDoc(e).then(function(n){var r=n.getMyApp();return h().then(function(o){return o.getController().then(function(a){var s=!!r.getAuthoringContextId(n);return o.verifyBrandAccess(n,s,i.resolve(a)).then(function(i){if(s&&i&&i.accessOk){var r=i.brand;if(r)return r.composite.getURN().then(function(e){return n.getMyApp().setAuthoringContextUrn(n,e)}.bind(this)).then(function(){if(r&&r.composite)return this.getUsersWhoWillNeedBrand(e,t).then(function(e){if(e&&e.length)return this._doSilentBrandInvite(r,e)}.bind(this))}.bind(this))}}.bind(this))}.bind(this))}.bind(this))}.bind(this)).catch(function(e){throw e}.bind(this)):i.resolve()},_doSilentBrandInvite:function(t,n){var r=t.composite;return"function"!=typeof t.upgradeVersionForCollaboration&&(console.log("\n\n\n"),console.log(JSON.stringify(t,void 0,4)),console.log("\n\n\n")),t.upgradeVersionForCollaboration().then(function(){return r.getURN().then(function(t){var a=r.getStorageURL(),s=r.get("name"),l={acceptanceRequired:!0,captcha:{},recipients:n,resourceUrl:a,resourceName:s,role:"viewer",useMounts:!0},c=i.defer();return p().then((function(t){var n=t.ajax({type:"POST",url:"https://"+o.collab+"/invitations",headers:{"x-api-key":o.key},contentType:"application/json; charset=utf-8",data:JSON.stringify(l),dataType:"json"});e.ajax(n).then((function(e,t,n){c.resolve(e)}))})),c.promise}.bind(this))}.bind(this))},revokeInvite:function(e){var t=i.defer();return p().then((function(t){return t.ajax({type:"DELETE",url:"https://"+o.collab+"/invitations/"+e,headers:{"x-api-key":o.key}})})).then((function(e){t.resolve(!0)})).fail(function(e){t.reject(e)}.bind(this)),t.promise},getCollaborationForPath:function(e){var t=i.defer(),n=Date.now();return p().then((function(t){return t.requiresAuth().then((function(){return t.ajax({type:"GET",url:"https://"+o.collab+"/collaboration/"+window.encodeURIComponent(e),headers:{"x-api-key":o.key}})}))})).then((function(e){window.marvel.logger.info("getCollaborationForPath success",{elapsed:Date.now()-n}),t.resolve(e)})).fail(function(e){window.marvel.logger.error("getCollaborationForPath failed",{err:e,elapsed:Date.now()-n}),t.reject(e)}.bind(this)),t.promise},getCollaboration:function(e){return this.getCollaborationForPath(e.getStoragePath())},inviteeAcceptInvite:function(e){return this._doAccept(e).then((function(e){var t=e.mount.split("/"),n=t.length-1;return e.projectId=t[n],e.syncGroup=t[n-1],c.inviteeAcceptBrandIfNecessary(e.projectId,e.syncGroup).then((function(){return e}))}))},_doAccept:function(e){var t=i.defer();return p().then((function(t){return t.ajax({type:"POST",url:"https://"+o.collab+"/invitations/id/"+e,headers:{"x-api-key":o.key},contentType:"application/json; charset=utf-8"})})).then((function(n){window.marvel.events.trigger("spark-collab-accepted-invite",e),t.resolve(n)})).fail(function(e){t.reject(e)}.bind(this)),window.marvel.events.trigger("spark-collab-accepting-invite",e),t.promise},_getRetryParameters:function(){return{maxAttempts:6,delay:500}},inviteeAcceptBrandIfNecessary:function(e,t){var n=this._getRetryParameters();return s(this._inviteeAcceptBrandIfNecessary.bind(this),{delay:n.delay,maxAttempts:n.maxAttempts,loggerFn:window.marvel.logger.info.bind(window.marvel.logger),logMessagePrefix:"[CollabController:inviteeAcceptBrandIfNecessary] acceptBrandWithRetry:",shouldRetry:function(e){return"brand-not-found-invite-not-found"===e.code}})(e,t)},acceptBrandInvite:function(e,n,i){var r=function(e,t){var n=new Error("Brand "+t+" missing for newly-accepted shared-with-me project "+e.get("id")+". Could not find the brand via AuthoringContextController or via pending invite.");throw n.code="brand-not-found-invite-not-found",n.doc=e,n},o=e.getAuthoringContextUrn(n);if(o)return this.getPendingInvitations(!1,!0).then(function(e){var a=t.find(e,(function(e){return e.resourceURN==o}));if(a)return this._doAccept(a.invitationId);r(n,i)}.bind(this));r(n)},_inviteeAcceptBrandIfNecessary:function(e,t){return u().then((function(n){return n.ensureSyncGroup(t).then((function(t){return s(t.getComposite.bind(t),{maxAttempts:8,loggerFn:window.marvel.logger.info.bind(window.marvel.logger),logMessagePrefix:"[CollabController:_inviteeAcceptBrandIfNecessary] getCompositeWithRetry:"})(e)}))})).then(function(e){var t=e.getMyApp(),n=t.getAuthoringContextId(e);if(n)return h().then((function(e){return e.getController().then((function(e){return e.getContextById(n)}))})).then(function(i){if(!i)return this.acceptBrandInvite(t,e,n)}.bind(this))}.bind(this))},inviteeRemoveSharedComposite:function(e){var t=i.defer(),n=e.getStoragePath();return p().then((function(e){return e.ajax({type:"DELETE",url:"https://"+o.collab+"/collaborators/"+window.encodeURIComponent(n),headers:{"x-api-key":o.key}})})).then((function(){window.marvel.logger.info("inviteeRemoveSharedComposite success",{doc:n}),t.resolve(!0)})).fail(function(e){window.marvel.logger.error("inviteeRemoveSharedComposite failed",{err:e,doc:n}),t.reject(e)}.bind(this)),t.promise},inviteeResolveInviteURN:function(e){var n=i.defer();if(e)this.getPendingInvitations().then(function(i){var r=t.find(i,(function(t){return t&&t.resourceURN===e}));if(r)n.resolve(r.invitationId);else{var o=new Error("inviteeResolveInviteURN - no pending invitations for specified resource, wrong user?");o.code="invite-for-urn-not-found",n.reject(o)}}.bind(this)).fail(function(e){n.reject(e)}.bind(this));else{var r=new Error("inviteeResolveInviteURN requires a URN");r.code="missing-urn",n.reject(r)}return n.promise},handleInviteNotificationAccept:function(e){var t=i.defer(),n="";return p().then(function(i){var r=JSON.stringify({locale:"en_US",limit:1,criteria:{field:"notification-id",value:e,operator:"EQ"}});i.ajax({type:"POST",url:o.ansSearchEndpoint,headers:{Accept:"application/json","x-api-key":o.key,"x-adobe-app-id":o.ansAppId,"Content-Type":"application/json"},data:r}).then(function(e){var i,r,o=JSON.parse(e.notifications[0].payload);return n=o.rawPayload.folder.urn,u().then((function(e){return e.urnToCCStoragePath(n)})).then(function(e){var t=e.split("/");return i=t[t.length-1],r=t[t.length-2],this.inviteeAcceptBrandIfNecessary(i,r)}.bind(this)).then((function(){t.resolve({syncGroup:r,id:i})}))}.bind(this)).fail((function(e){t.reject(e)}))}.bind(this)),t.promise}}),c=new l}.apply(t,i))||(e.exports=r)},,function(e,t,n){var i;"undefined"!=typeof self&&self,i=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCountryLanguages=t.createLocaleFromIMS=t.getAppNameFromURL=t.isUmbrellaRegionApp=t.getUmbrellaRegions=t.getAllLocales=t.langScript=t.normalize=t.priuse=t.region=t.script=t.extlang=t.lang=t.findKey=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),r=s(n(45)),o=n(3),a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}var l=/^([a-zA-Z]{2})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?(?:-x-([a-zA-Z0-9]{1,8})(?=$))?$/,c=function(e){return e.match(l)||[]},d=function(e,t){return Object.keys(e).filter((function(n){return t(e[n])}))[0]},u=function(e){return c(e)[1]||""},h=function(e){return c(e)[4]||""},p=function(e){var t="",n=c(e);if(n.length>0)if(void 0!==n[3])t=n[1]+"-"+n[3];else if("zh"===n[1].toLowerCase()&&void 0!==n[4]){var i=n[4].toLowerCase();t=["tw","hk"].includes(i)?"zh-Hant":"zh-Hans"}else t=n[1];return t},f={};Object.keys(i).forEach((function(e){var t=i[e];Object.keys(t).forEach((function(e){var n=t[e],i=n.toLowerCase();f[e]=n,void 0===f[n]&&(f[n]=n),void 0===f[i]&&(f[i]=n)}))}));var g=function(){return f},m=function(e){return d(o.umbrellaRegions,(function(t){return t.includes(e.toLowerCase())}))},v=function(e){return o.umbrellaRegionApp.includes(e)},b=function(e){return e.replace(/^(https?:\/\/)/,"").replace(/^(www\.)/,"")};t.findKey=d,t.lang=u,t.extlang=function(e){return c(e)[2]||""},t.script=function(e){return c(e)[3]||""},t.region=h,t.priuse=function(e){return c(e)[5]||""},t.normalize=function(e,t){var n=t&&i[t]&&i[t][e]?i[t][e]:g()[e];if(void 0===n&&t&&v(t)){var r=m(h(e));r&&(n=u(e).toLowerCase()+"-x-"+r.toUpperCase())}return n},t.langScript=p,t.getAllLocales=g,t.getUmbrellaRegions=m,t.isUmbrellaRegionApp=v,t.getAppNameFromURL=function(e){var t=void 0;if("string"==typeof e&&e.length){var n=b(e.trim().toLowerCase());t=d(a.default,(function(e){return 0===n.indexOf(b(e.production))||0===n.indexOf(b(e.stage))}))}return t},t.createLocaleFromIMS=function(e,t){var n=!1,i="en-US";if("string"==typeof e&&"string"==typeof t&&2===t.length){var o=p(e),a=t.toUpperCase(),s=r.default[a];void 0!==s&&(s.includes(o)?n=!0:o=s[0]||"en",i=o+"-"+a)}return{match:n,locale:i}},t.getCountryLanguages=function(e){var t=["en"],n="string"==typeof e?r.default[e.toUpperCase()]||[]:t;return n.length?n:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),r=n(0);t.default=function(e,t,n){if(void 0===i[e])return"";var o=void 0,a=void 0,s=(0,r.getAllLocales)();if(t&&(""!==(0,r.lang)(t)||void 0!==s[t]))if(void 0!==i[e][t])o=t;else if("string"==typeof(a=s[t])?o=(0,r.findKey)(i[e],(function(e){return e===a})):a=t,void 0===o&&""!==(0,r.lang)(a)){if(""!==(0,r.script)(a)){var l=a.substr(0,7).toLowerCase();o=(0,r.findKey)(i[e],(function(e){return e.substr(0,7).toLowerCase()===l}))}if(void 0===o&&(0,r.isUmbrellaRegionApp)(e)){var c=(0,r.getUmbrellaRegions)((0,r.region)(t));if(c){var d=(0,r.lang)(t)+"-x-"+c.toUpperCase();void 0===(o=(0,r.findKey)(i[e],(function(e){return e===d})))&&void 0!==i[e][c]&&(o=c)}}if(void 0===o){var u=a.substr(0,2).toLowerCase();o=(0,r.findKey)(i[e],(function(e){return e.substr(0,2).toLowerCase()===u}))}}return void 0===o&&void 0!==n&&(o=(0,r.findKey)(i[e],(function(e){return e===n||e===s[n]}))),"stock"===e&&"us"===o&&(o=""),o||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7);Object.defineProperty(t,"academic_verification",{enumerable:!0,get:function(){return j(i).default}});var r=n(8);Object.defineProperty(t,"accountmanagement",{enumerable:!0,get:function(){return j(r).default}});var o=n(9);Object.defineProperty(t,"adminconsole",{enumerable:!0,get:function(){return j(o).default}});var a=n(10);Object.defineProperty(t,"adobeaccount",{enumerable:!0,get:function(){return j(a).default}});var s=n(11);Object.defineProperty(t,"assets",{enumerable:!0,get:function(){return j(s).default}});var l=n(12);Object.defineProperty(t,"assets_v1",{enumerable:!0,get:function(){return j(l).default}});var c=n(13);Object.defineProperty(t,"behance",{enumerable:!0,get:function(){return j(c).default}});var d=n(14);Object.defineProperty(t,"cchome",{enumerable:!0,get:function(){return j(d).default}});var u=n(15);Object.defineProperty(t,"ccsearch",{enumerable:!0,get:function(){return j(u).default}}),Object.defineProperty(t,"comments",{enumerable:!0,get:function(){return j(s).default}});var h=n(16);Object.defineProperty(t,"color",{enumerable:!0,get:function(){return j(h).default}});var p=n(17);Object.defineProperty(t,"community",{enumerable:!0,get:function(){return j(p).default}});var f=n(18);Object.defineProperty(t,"creativecloudapp",{enumerable:!0,get:function(){return j(f).default}});var g=n(19);Object.defineProperty(t,"dc",{enumerable:!0,get:function(){return j(g).default}});var m=n(20);Object.defineProperty(t,"dcweb",{enumerable:!0,get:function(){return j(m).default}});var v=n(21);Object.defineProperty(t,"editbilling",{enumerable:!0,get:function(){return j(v).default}});var b=n(22);Object.defineProperty(t,"experiencecloud",{enumerable:!0,get:function(){return j(b).default}});var y=n(23);Object.defineProperty(t,"helpx",{enumerable:!0,get:function(){return j(y).default}});var w=n(24);Object.defineProperty(t,"ims",{enumerable:!0,get:function(){return j(w).default}});var k=n(25);Object.defineProperty(t,"lightroom",{enumerable:!0,get:function(){return j(k).default}});var x=n(26);Object.defineProperty(t,"jarvis",{enumerable:!0,get:function(){return j(x).default}});var _=n(27);Object.defineProperty(t,"mcs",{enumerable:!0,get:function(){return j(_).default}});var S=n(28);Object.defineProperty(t,"mt",{enumerable:!0,get:function(){return j(S).default}});var C=n(29);Object.defineProperty(t,"ngl",{enumerable:!0,get:function(){return j(C).default}});var T=n(30);Object.defineProperty(t,"acrobat_plan",{enumerable:!0,get:function(){return j(T).default}});var M=n(31);Object.defineProperty(t,"panel_licensing",{enumerable:!0,get:function(){return j(M).default}});var I=n(32);Object.defineProperty(t,"portfolio",{enumerable:!0,get:function(){return j(I).default}});var D=n(33);Object.defineProperty(t,"publiclinks",{enumerable:!0,get:function(){return j(D).default}});var P=n(34);Object.defineProperty(t,"redemption_ui",{enumerable:!0,get:function(){return j(P).default}}),Object.defineProperty(t,"sharesheet",{enumerable:!0,get:function(){return j(s).default}});var A=n(35);Object.defineProperty(t,"spark",{enumerable:!0,get:function(){return j(A).default}});var E=n(36);Object.defineProperty(t,"stock",{enumerable:!0,get:function(){return j(E).default}});var L=n(37);Object.defineProperty(t,"typekit",{enumerable:!0,get:function(){return j(L).default}}),Object.defineProperty(t,"fonts",{enumerable:!0,get:function(){return j(L).default}}),Object.defineProperty(t,"unifiedcheckout",{enumerable:!0,get:function(){return j(i).default}});var N=n(38);Object.defineProperty(t,"unifiedcheckout_v1",{enumerable:!0,get:function(){return j(N).default}});var F=n(39);Object.defineProperty(t,"uss",{enumerable:!0,get:function(){return j(F).default}});var R=n(40);Object.defineProperty(t,"utilitynav",{enumerable:!0,get:function(){return j(R).default}});var O=n(41);Object.defineProperty(t,"xd",{enumerable:!0,get:function(){return j(O).default}});var B=n(42);Object.defineProperty(t,"mini_plans",{enumerable:!0,get:function(){return j(B).default}});var z=n(43);Object.defineProperty(t,"adobedotcom",{enumerable:!0,get:function(){return j(z).default}}),Object.defineProperty(t,"globalnav",{enumerable:!0,get:function(){return j(z).default}});var U=n(44);function j(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"_supplement",{enumerable:!0,get:function(){return j(U).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.urlApp=["adobedotcom","helpx","stock","accountmanagement","creativecloudapp","acrobat_plan","ngl","color","mini_plans"],t.langParamApp=["adobeaccount","redemption_ui","unifiedcheckout","academic_verification","community"],t.umbrellaRegionApp=["adobedotcom","helpx","globalnav","ims","acrobat_plan","ngl","jarvis","mini_plans"],t.umbrellaRegions={africa:["africa","ao","bf","bi","bj","bw","cd","cf","cg","ci","cm","cv","dj","er","et","ga","gh","gm","gn","gq","gw","ke","km","lr","ls","mg","ml","mu","mw","mz","na","ne","ng","rw","sc","sd","sl","sn","so","st","sz","td","tg","tz","ug","za","zm","zw"],cis:["cis","am","az","by","ge","kg","kz","md","tj","tm","uz"],la:["la","ar","bl","bo","br","bz","cl","co","cr","cu","do","ec","fk","gf","gt","gy","hn","ht","mf","mq","ni","pa","pe","pr","py","sr","sv","uy","ve"],mena:["mena","ae","bh","dz","eg","jo","kw","lb","ma","om","qa","sa","tn","ye","iq","ly","mr"],sea:["sea","id","my","ph","sg","th","vn"]},t.default={academic_verification:{stage:"https://commerce-stg.adobe.com/academic-verification",production:"https://commerce.adobe.com/academic-verification"},acrobat_plan:{stage:"https://stage.acrobat.adobe.com",production:"https://acrobat.adobe.com"},adobeaccount:{stage:"https://stage.account.adobe.com",production:"https://account.adobe.com"},adminconsole:{stage:"https://stage.adminconsole.adobe.com",production:"https://adminconsole.adobe.com"},accountmanagement:{stage:"https://prestage.accounts.adobe.com",production:"https://accounts.adobe.com"},assets:{stage:"https://assets-stage.adobecc.com",production:"https://assets.adobe.com"},assets_v1:{stage:"https://assets2-stage.adobecc.com",production:"https://assets2.adobe.com"},behance:{stage:"https://net.s2stagehance.com",production:"https://www.behance.net"},cchome:{stage:"https://stage.creativecloud.adobe.com",production:"https://creativecloud.adobe.com"},color:{stage:"https://colorweb-stage.adobeku.com",production:"https://color.adobe.com"},community:{stage:"https://community-stg.adobe.com",production:"https://community.adobe.com"},creativecloudapp:{stage:"https://stage.ccmui.adobe.com",production:"https://creative.adobe.com"},dc:{stage:"https://cloud.stage.acrobat.com",production:"https://cloud.acrobat.com"},dcweb:{stage:"https://dc-stage.documentcloudtest.com",production:"https://documentcloud.adobe.com"},experiencecloud:{stage:"https://experiencecloud-stage.adobe.com",production:"https://experiencecloud.adobe.com"},fonts:{stage:"https://fonts-relstage.adobe.com",production:"https://fonts.adobe.com"},helpx:{stage:"https://helpx.stage.adobe.com",production:"https://helpx.adobe.com"},ims:{stage:"https://ims-na1-stg1.adobelogin.com",production:"https://adobeid-na1.services.adobe.com"},lightroom:{stage:"https://stage.adobelr.com",production:"https://lightroom.adobe.com"},mini_plans:{stage:"https://www.stage.adobe.com/mini-plans",production:"https://www.adobe.com/mini-plans"},ngl:{stage:"https://workflow-stage.licenses.adobe.com",production:"https://workflow.licenses.adobe.com"},portfolio:{stage:"https://portfolio.ccpsx.com",production:"https://portfolio.adobe.com"},redemption_ui:{stage:"https://redeem-stg.adobe.com",production:"https://redeem.adobe.com"},stock:{stage:"https://primary.stock.stage.adobe.com",production:"https://stock.adobe.com"},spark:{stage:"https://stage.adobeprojectm.com",production:"https://spark.adobe.com"},typekit:{stage:"https://relstage.typekit.com",production:"https://typekit.com"},unifiedcheckout:{stage:"https://commerce-stg.adobe.com",production:"https://commerce.adobe.com"},xd:{stage:"https://stage.xd.adobe.com",production:"https://xd.adobe.com"},adobedotcom:{stage:"https://www.stage.adobe.com",production:"https://www.adobe.com"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(1),o=(i=r)&&i.__esModule?i:{default:i},a=n(0);t.default=function(e,t,n){var i=(0,a.createLocaleFromIMS)(t,n),r=i.locale,s=i.match,l=(0,o.default)(e,r);return"mini_plans"===e&&(s=s&&r===(0,a.normalize)(l,e)),{match:s,locale:l}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(3),o=n(0),a=n(1),s=(i=a)&&i.__esModule?i:{default:i};t.default=function(t,n){try{if("string"!=typeof t||"string"!=typeof n)throw Error('expect "url" and "locale" to be string.');var i=t,a=(0,o.getAppNameFromURL)(t);if(void 0===a)throw Error('this app is not supported yet: "'+t+'"');var l=(0,s.default)(a,n);if(l){var c=(0,o.getAllLocales)();if(r.urlApp.includes(a)){"en"!==l&&"us"!==l||(l="");var d=/adobe(?:stock){0,1}\.com\/(.*?)(?=\/|$)/;"acrobat_plan"===a&&(d=/adobe\.com\/(.{5,10}?)(?=\/|$)/);var u=(t.match(d)||[])[1];void 0!==u&&void 0!==c[u]?i=t.replace(".com/"+u,""===l?".com":".com/"+l):""!==l&&(i=t.replace(".com",".com/"+l))}else{var h=r.langParamApp.includes(a)?"community"===a?"profile.language":"lang":"locale",p=new RegExp("("+h+"=)(.*?)(?=&|$)");i=void 0!==(t.match(p)||[])[2]?t.replace(p,"$1"+l):t+(t.includes("?")?"&":"?")+h+"="+l}}return i}catch(t){"development"===e.env.NODE_ENV&&console.error("[getLocalizedURL] Error: "+t.message)}return t}}).call(t,n(47))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);Object.defineProperty(t,"getAppLocale",{enumerable:!0,get:function(){return d(i).default}});var r=n(46);Object.defineProperty(t,"getAppLocales",{enumerable:!0,get:function(){return d(r).default}});var o=n(4);Object.defineProperty(t,"getAppLocaleFromIMS",{enumerable:!0,get:function(){return d(o).default}});var a=n(5);Object.defineProperty(t,"getLocalizedURL",{enumerable:!0,get:function(){return d(a).default}});var s=n(48);Object.defineProperty(t,"getLocalizedURLFromIMS",{enumerable:!0,get:function(){return d(s).default}});var l=n(49);Object.defineProperty(t,"parseLocaleParam",{enumerable:!0,get:function(){return d(l).default}});var c=n(0);function d(e){return e&&e.__esModule?e:{default:e}}Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-hant":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ar:"ar-AE",bg:"bg-BG",cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",et:"et-EE",fi:"fi-FI",fr:"fr-FR",he:"he-IL",hr:"hr-HR",hu:"hu-HU",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",tr:"tr-TR",uk:"uk-UA",zh_cn:"zh-Hans-CN",zh_tw:"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-cn":"zh-Hans-CN","zh-tw":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ar:"ar-AE",bg:"bg-BG",cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",et:"et-EE",fi:"fi-FI",fr:"fr-FR",he:"he-IL",hu:"hu-HU",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sv:"sv-SE",tr:"tr-TR",uk:"uk-UA","zh-Hans":"zh-Hans-CN","zh-Hant":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-Hans":"zh-Hans-CN","zh-Hant":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-tw":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"cs-CZ":"cs-CZ","da-DK":"da-DK","de-DE":"de-DE","en-US":"en-US","es-ES":"es-ES","fi-FI":"fi-FI","fr-FR":"fr-FR","it-IT":"it-IT","ja-JP":"ja-JP","ko-KR":"ko-KR","nb-NO":"nb-NO","nl-NL":"nl-NL","pl-PL":"pl-PL","pt-BR":"pt-BR","ru-RU":"ru-RU","sv-SE":"sv-SE","tr-TR":"tr-TR","zh-CN":"zh-Hans-CN","zh-TW":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-Hans":"zh-Hans-CN","zh-Hant":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",hu:"hu-HU",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR",uk:"uk-UA","zh-Hans":"zh-Hans-CN","zh-Hant":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR",zh:"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={de:"de-DE",en:"en-US",es:"es-ES",fr:"fr-FR",ja:"ja-JP",pt:"pt-BR"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-cn":"zh-Hans-CN","zh-tw":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"da-DK":"da-DK","de-DE":"de-DE","en-US":"en-US","en-GB":"en-GB","es-ES":"es-ES","fi-FI":"fi-FI","fr-FR":"fr-FR","it-IT":"it-IT","ja-JP":"ja-JP","nb-NO":"nb-NO","nl-NL":"nl-NL","pt-BR":"pt-BR","sv-SE":"sv-SE"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"cs-CZ":"cs-CZ","da-DK":"da-DK","de-DE":"de-DE","en-US":"en-US","en-GB":"en-GB","es-ES":"es-ES","fi-FI":"fi-FI","fr-FR":"fr-FR","it-IT":"it-IT","ja-JP":"ja-JP","ko-KR":"ko-KR","nb-NO":"nb-NO","nl-NL":"nl-NL","pl-PL":"pl-PL","pt-BR":"pt-BR","ru-RU":"ru-RU","sv-SE":"sv-SE","tr-TR":"tr-TR","zh-CN":"zh-Hans-CN","zh-TW":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ar:"ar-AE",bg:"bg-BG",cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",et:"et-EE",fi:"fi-FI",fr:"fr-FR",he:"he-IL",hu:"hu-HU",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sv:"sv-SE",tr:"tr-TR",uk:"uk-UA","zh-hans":"zh-Hans-CN","zh-hant":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={de:"de-DE",en:"en-US",es:"es-ES",fr:"fr-FR",it:"it-IT",ja:"ja-JP","ko-kr":"ko-KR","pt-br":"pt-BR","zh-cn":"zh-Hans-CN","zh-tw":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mena_ar:"ar-x-MENA",bg:"bg-BG",cz:"cs-CZ",dk:"da-DK",de:"de-DE",at:"de-AT",ch_de:"de-CH",lu_de:"de-LU",en:"en-US",au:"en-AU",be_en:"en-BE",ca:"en-CA",cy_en:"en-CY",uk:"en-GB",gr_en:"en-GR",hk_en:"en-HK",ie:"en-IE",il_en:"en-IL",in:"en-IN",lu_en:"en-LU",mt:"en-MT",nz:"en-NZ",africa:"en-x-AFRICA",eeurope:"en-x-EEUROPE",mena_en:"en-x-MENA",sea:"en-x-SEA",es:"es-ES",mx:"es-MX",la:"es-x-LA",ee:"et-EE",fi:"fi-FI",fr:"fr-FR",be_fr:"fr-BE",ca_fr:"fr-CA",ch_fr:"fr-CH",lu_fr:"fr-LU",il_he:"he-IL",hu:"hu-HU",it:"it-IT",ch_it:"it-CH",jp:"ja-JP",kr:"ko-KR",lt:"lt-LT",lv:"lv-LV",no:"nb-NO",nl:"nl-NL",be_nl:"nl-BE",pl:"pl-PL",pt:"pt-PT",br:"pt-BR",ro:"ro-RO",ru:"ru-RU",cis:"ru-x-CIS",sk:"sk-SK",si:"sl-SI",se:"sv-SE",tr:"tr-TR",ua:"uk-UA",cn:"zh-Hans-CN",tw:"zh-Hant-TW",hk_zh:"zh-Hant-HK"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={bg_BG:"bg-BG",cs_CZ:"cs-CZ",da_DK:"da-DK",de_DE:"de-DE",en_US:"en-US",en_AE:"en-AE",en_GB:"en-GB",en_IL:"en-IL",en_XM:"en-x-MENA",es_ES:"es-ES",es_LA:"es-x-LA",es_MX:"es-MX",es_NA:"es-x-NA",et_EE:"et-EE",fi_FI:"fi-FI",fr_FR:"fr-FR",fr_CA:"fr-CA",fr_MA:"fr-MA",fr_XM:"fr-x-MENA",hr_HR:"hr-HR",hu_HU:"hu-HU",it_IT:"it-IT",ja_JP:"ja-JP",ko_KR:"ko-KR",lt_LT:"lt-LT",lv_LV:"lv-LV",nb_NO:"nb-NO",nl_NL:"nl-NL",pl_PL:"pl-PL",pt_BR:"pt-BR",ro_RO:"ro-RO",ru_RU:"ru-RU",sk_SK:"sk-SK",sl_SI:"sl-SI",sr_RS:"sr-RS",sr_SP:"sr-RS",sv_SE:"sv-SE",tr_TR:"tr-TR",uk_UA:"uk-UA",zh_HANS:"zh-Hans-CN",zh_CN:"zh-Hans-CN",zh_HANT:"zh-Hant-TW",zh_TW:"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"de-DE":"de-DE","en-US":"en-US","en-GB":"en-GB","es-ES":"es-ES","es-MX":"es-MX","fr-FR":"fr-FR","fr-CA":"fr-CA","hu-HU":"hu-HU","it-IT":"it-IT","ja-JP":"ja-JP","ko-KR":"ko-KR","nl-NL":"nl-NL","pt-BR":"pt-BR","ru-RU":"ru-RU","sv-SE":"sv-SE","th-TH":"th-TH","uk-UA":"uk-UA","zh-CN":"zh-Hans-CN","zh-TW":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ar_MENA:"ar-x-MENA",bg_BG:"bg-BG",cs_CZ:"cs-CZ",da_DK:"da-DK",de_DE:"de-DE",de_AT:"de-AT",de_CH:"de-CH",de_LU:"de-LU",en_US:"en-US",en_AU:"en-AU",en_BE:"en-BE",en_CA:"en-CA",en_CY:"en-CY",en_GB:"en-GB",en_GR:"en-GR",en_HK:"en-HK",en_IE:"en-IE",en_IL:"en-IL",en_IN:"en-IN",en_LU:"en-LU",en_MENA:"en-x-MENA",en_MT:"en-MT",en_NZ:"en-NZ",en_SEA:"en-x-SEA",en_ZA:"en-x-AFRICA",es_ES:"es-ES",es_LA:"es-x-LA",es_MX:"es-MX",et_EE:"et-EE",fi_FI:"fi-FI",fr_FR:"fr-FR",fr_BE:"fr-BE",fr_CA:"fr-CA",fr_CH:"fr-CH",fr_LU:"fr-LU",he_IL:"he-IL",hu_HU:"hu-HU",it_CH:"it-CH",it_IT:"it-IT",ja_JP:"ja-JP",ko_KR:"ko-KR",lt_LT:"lt-LT",lv_LV:"lv-LV",nb_NO:"nb-NO",nl_BE:"nl-BE",nl_NL:"nl-NL",pl_PL:"pl-PL",pt_BR:"pt-BR",pt_PT:"pt-PT",ro_RO:"ro-RO",ru_RU:"ru-RU",sk_SK:"sk-SK",sl_SI:"sl-SL",sv_SE:"sv-SE",tr_TR:"tr-TR",uk_UA:"uk-UA",zh_CN:"zh-Hans-CN",zh_TW:"zh-Hant-TW",zh_HK:"zh-Hant-HK"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ar_AE:"ar-AE",bg_BG:"bg-BG",cs_CZ:"cs-CZ",da_DK:"da-DK",de_DE:"de-DE",en_US:"en-US",en_GB:"en-GB",en_HK:"en-HK",en_IL:"en-IL",es_ES:"es-ES",es_MX:"es-MX",et_EE:"et-EE",fi_FI:"fi-FI",fr_FR:"fr-FR",fr_CA:"fr-CA",he_IL:"he-IL",hr_HR:"hr-HR",hu_HU:"hu-HU",it_IT:"it-IT",ja_JP:"ja-JP",ko_KR:"ko-KR",lt_LT:"lt-LT",lv_LV:"lv-LV",nb_NO:"nb-NO",nl_NL:"nl-NL",pl_PL:"pl-PL",pt_BR:"pt-BR",ro_RO:"ro-RO",ru_RU:"ru-RU",sk_SK:"sk-SK",sl_SI:"sl-SI",sr_RS:"sr-RS",sv_SE:"sv-SE",tr_TR:"tr-TR",uk_UA:"uk-UA",zh_CN:"zh-Hans-CN",zh_HK:"zh-Hant-HK",zh_TW:"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ar_AE:"ar-AE",bg_BG:"bg-BG",ca_ES:"ca-ES",cs_CZ:"cs-CZ",da_DK:"da-DK",de_DE:"de-DE",el_GR:"el-GR",en_US:"en-US",es_ES:"es-ES",et_EE:"et-EE",fa_IR:"fa-IR",fi_FI:"fi-FI",fr_FR:"fr-FR",he_IL:"he-IL",hi_IN:"hi-IN",ht_HT:"ht-HT",hu_HU:"hu-HU",id_ID:"id-ID",it_IT:"it-IT",ja_JP:"ja-JP",ko_KR:"ko-KR",lt_LT:"lt-LT",lv_LV:"lv-LV",ms_MY:"ms-MY",nl_NL:"nl-NL",no_NO:"nb-NO",pl_PL:"pl-PL",pt_BR:"pt-BR",ro_RO:"ro-RO",ru_RU:"ru-RU",sk_SK:"sk-SK",sl_SI:"sl-SI",sv_SE:"sv-SE",th_TH:"th-TH",tr_TR:"tr-TR",uk_UA:"uk-UA",ur_PK:"ur-PK",vi_VN:"vi-VN",zh_CN:"zh-Hans-CN",zh_TW:"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs_CZ:"cs-CZ",da_DK:"da-DK",de_DE:"de-DE",en_US:"en-US",en_GB:"en-GB",en_IL:"en-IL",en_AE:"en-AE",en_XM:"en-x-MENA",es_ES:"es-ES",es_MX:"es-MX",es_LA:"es-x-LA",es_NA:"es-x-NA",fi_FI:"fi-FI",fr_FR:"fr-FR",fr_CA:"fr-CA",fr_MA:"fr-MA",fr_XM:"fr-x-MENA",it_IT:"it-IT",ja_JP:"ja-JP",ko_KR:"ko-KR",nb_NO:"nb-NO",nl_NL:"nl-NL",pl_PL:"pl-PL",pt_BR:"pt-BR",ru_RU:"ru-RU",sv_SE:"sv-SE",tr_TR:"tr-TR",hu_HU:"hu-HU",sk_SK:"sk-SK",sl_SI:"sl-SI",uk_UA:"uk-UA",zh_CN:"zh-Hans-CN",zh_TW:"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"at/de":"de-AT","au/en":"en-AU","be/en":"en-BE","be/fr":"fr-BE","be/nl":"nl-BE","bg/en":"en-BG","br/pt":"pt-BR","ca/en":"en-CA","ca/fr":"fr-CA","ch/de":"de-CH","ch/fr":"fr-CH","ch/it":"it-CH","cn/zh-Hans":"zh-Hans-CN","cy/en":"en-CY","cz/cs":"cs-CZ","de/de":"de-DE","dk/da":"da-DK","ee/en":"en-EE","es/es":"es-ES","fi/fi":"fi-FI","fr/fr":"fr-FR","gr/en":"en-GR","hk/en":"en-HK","hk/zh-Hant":"zh-Hant-HK","hu/hu":"hu-HU","ie/en":"en-IE","il/en":"en-IL","in/en":"en-IN","it/it":"it-IT","jp/ja":"ja-JP","kr/ko":"ko-KR","la/es":"es-x-LA","lt/en":"en-LT","lu/de":"de-LU","lu/en":"en-LU","lu/fr":"fr-LU","lv/en":"en-LV","mena/en":"en-x-MENA","mt/en":"en-MT","mx/es":"es-MX","nl/nl":"nl-NL","no/no":"nb-NO","nz/en":"en-NZ","pl/pl":"pl-PL","pt/pt":"pt-PT","ro/en":"en-RO","ru/ru":"ru-RU","se/sv":"sv-SE","sea/en":"en-x-SEA","si/en":"en-SI","sk/en":"en-SK","tr/tr":"tr-TR","tw/zh-Hant":"zh-Hant-TW","ua/en":"en-UA","uk/en":"en-GB","us/en":"en-US","za/en":"en-x-AFRICA"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"cs-CZ":"cs-CZ","da-DK":"da-DK","de-DE":"de-DE","en-US":"en-US","es-ES":"es-ES","fi-FI":"fi-FI","fr-FR":"fr-FR","hu-HU":"hu-HU","it-IT":"it-IT","ja-JP":"ja-JP","ko-KR":"ko-KR","nb-NO":"nb-NO","nl-NL":"nl-NL","pl-PL":"pl-PL","pt-BR":"pt-BR","pt-PT":"pt-PT","ru-RU":"ru-RU","sv-SE":"sv-SE","th-TH":"th-TH","tr-TR":"tr-TR","uk-UA":"uk-UA","zh-CN":"zh-Hans-CN","zh-HK":"zh-Hant-HK","zh-TW":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en_us:"en-US",en_au:"en-AU",en_be:"en-BE",en_br:"en-BR",en_ca:"en-CA",en_cis:"en-x-CIS",en_cy:"en-CY",en_gb:"en-GB",en_gr:"en-GR",en_il:"en-IL",en_ie:"en-IE",en_in:"en-IN",en_hk:"en-HK",en_lu:"en-LU",en_mena:"en-x-MENA",en_mt:"en-MT",en_nz:"en-NZ",en_sea:"en-x-SEA",en_za:"en-ZA",cs_cz:"cs-CZ",da_dk:"da-DK",de_de:"de-DE",de_ch:"de-CH",de_lu:"de-LU",es_es:"es-ES",es_419:"es-x-LA",es_mx:"es-MX",fr_fr:"fr-FR",fi_fi:"fi-FI",fr_ca:"fr-CA",fr_ch:"fr-CH",fr_be:"fr-BE",fr_mena:"fr-x-MENA",fr_lu:"fr-LU",it_it:"it-IT",it_ch:"it-CH",ja_jp:"ja-JP",ko_kr:"ko-KR",nb_no:"nb-NO",nl_nl:"nl-NL",pl_pl:"pl-PL",pt_pt:"pt-PT",pt_br:"pt-BR",ru_ru:"ru-RU",sv_se:"sv-SE",tr_tr:"tr-TR",zh_cn:"zh-Hans-CN",zh_tw:"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-tw":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-hans":"zh-Hans-CN","zh-hant":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"en-US":"en-US","de-DE":"de-DE","fr-FR":"fr-FR","es-ES":"es-ES","it-IT":"it-IT","pt-BR":"pt-BR","ja-JP":"ja-JP","ko-KR":"ko-KR","nb-NO":"nb-NO","da-DK":"da-DK","nl-NL":"nl-NL","sv-SE":"sv-SE","fi-FI":"fi-FI","zh-Hans-CN":"zh-Hans-CN","zh-Hant-TW":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={bg:"bg-BG",cz:"cs-CZ",dk:"da-DK",de:"de-DE",at:"de-AT",ch_de:"de-CH",lu_de:"de-LU",us:"en-US",be_en:"en-BE",ca:"en-CA",cy_en:"en-CY",au:"en-AU",uk:"en-GB",gr_en:"en-GR",ie:"en-IE",lu_en:"en-LU",mt:"en-MT",nz:"en-NZ",es:"es-ES",mx:"es-MX",ee:"et-EE",fi:"fi-FI",fr:"fr-FR",be_fr:"fr-BE",ca_fr:"fr-CA",ch_fr:"fr-CH",lu_fr:"fr-LU",hu:"hu-HU",it:"it-IT",ch_it:"it-CH",jp:"ja-JP",kr:"ko-KR",lt:"lt-LT",lv:"lv-LV",no:"nb-NO",nl:"nl-NL",be_nl:"nl-BE",pl:"pl-PL",pt:"pt-PT",br:"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",si:"sl-SI",se:"sv-SE",th:"th-TH",ua:"uk-UA",hk:"zh-Hant-HK"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"de-DE":"de-DE","en-US":"en-US","fr-FR":"fr-FR","ja-JP":"ja-JP"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs:"cs-CZ",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",no:"nb-NO",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-tw":"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs_CZ:"cs-CZ",da_DK:"da-DK",de_DE:"de-DE",de_LU:"de-LU",el_GR:"el-GR",en_US:"en-US",en_GB:"en-GB",es_ES:"es-ES",et_EE:"et-EE",fr_FR:"fr-FR",fr_CA:"fr-CA",it_IT:"it-IT",ja_JP:"ja-JP",ko_KR:"ko-KR",nb_NO:"nb-NO",nl_NL:"nl-NL",pl_PL:"pl-PL",pt_BR:"pt-BR",pt_PT:"pt-PT",ro_RO:"ro-RO",ru_RU:"ru-RU",sv_SE:"sv-SE",tr_TR:"tr-TR",uk_UA:"uk-UA",zh_CN:"zh-Hans-CN",zh_TW:"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cs_CZ:"cs-CZ",da_DK:"da-DK",de_DE:"de-DE",en_US:"en-US",es_ES:"es-ES",fi_FI:"fi-FI",fr_FR:"fr-FR",it_IT:"it-IT",ja_JP:"ja-JP",ko_KR:"ko-KR",nb_NO:"nb-NO",nl_NL:"nl-NL",pl_PL:"pl-PL",pt_PT:"pt-PT",pt_BR:"pt-BR",ru_RU:"ru-RU",sv_SE:"sv-SE",tr_TR:"tr-TR",uk_UA:"uk-UA",zh_CN:"zh-Hans-CN",zh_TW:"zh-Hant-TW"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"de-DE":"de-DE","en-US":"en-US","es-ES":"es-ES","fr-FR":"fr-FR","ja-JP":"ja-JP","ko-KR":"ko-KR","pt-BR":"pt-BR"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={bg:"bg-BG",cz:"cs-CZ",dk:"da-DK",de:"de-DE",at:"de-AT",ch_de:"de-CH",lu_de:"de-LU",us:"en-US",au:"en-AU",be_en:"en-BE",ca:"en-CA",cy_en:"en-CY",uk:"en-GB",gr_en:"en-GR",hk_en:"en-HK",ie:"en-IE",lu_en:"en-LU",mt:"en-MT",nz:"en-NZ",africa:"en-x-AFRICA",es:"es-ES",mx:"es-MX",ee:"et-EE",fi:"fi-FI",fr:"fr-FR",be_fr:"fr-BE",ca_fr:"fr-CA",ch_fr:"fr-CH",lu_fr:"fr-LU",hu:"hu-HU",it:"it-IT",ch_it:"it-CH",jp:"ja-JP",kr:"ko-KR",lt:"lt-LT",lv:"lv-LV",no:"nb-NO",nl:"nl-NL",be_nl:"nl-BE",pl:"pl-PL",pt:"pt-PT",br:"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",si:"sl-SI",se:"sv-SE",hk_zh:"zh-Hant-HK"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mena_ar:"ar-x-MENA",bg:"bg-BG",cz:"cs-CZ",dk:"da-DK",de:"de-DE",at:"de-AT",ch_de:"de-CH",lu_de:"de-LU",us:"en-US",au:"en-AU",be_en:"en-BE",ca:"en-CA",cy_en:"en-CY",uk:"en-GB",gr_en:"en-GR",hk_en:"en-HK",ie:"en-IE",il_en:"en-IL",in:"en-IN",lu_en:"en-LU",mt:"en-MT",nz:"en-NZ",africa:"en-x-AFRICA",cis_en:"en-x-CIS",mena_en:"en-x-MENA",sea:"en-x-SEA",sg:"en-x-SEA",es:"es-ES",mx:"es-MX",la:"es-x-LA",ee:"et-EE",fi:"fi-FI",fr:"fr-FR",be_fr:"fr-BE",ca_fr:"fr-CA",ch_fr:"fr-CH",lu_fr:"fr-LU",il_he:"he-IL",hu:"hu-HU",it:"it-IT",ch_it:"it-CH",jp:"ja-JP",kr:"ko-KR",lt:"lt-LT",lv:"lv-LV",no:"nb-NO",nl:"nl-NL",be_nl:"nl-BE",pl:"pl-PL",pt:"pt-PT",br:"pt-BR",ro:"ro-RO",ru:"ru-RU",cis_ru:"ru-x-CIS",sk:"sk-SK",si:"sl-SI",se:"sv-SE",tr:"tr-TR",ua:"uk-UA",cn:"zh-Hans-CN",tw:"zh-Hant-TW",hk_zh:"zh-Hant-HK"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={uk:"uk-UA",pt:"pt-BR",th:"th-TH",zh:"zh-Hans-CN","zh-tw":"zh-Hant-TW",zh_TW:"zh-Hant-TW","zh-hk":"zh-Hant-HK","zh-HK":"zh-Hant-HK",zh_HK:"zh-Hant-HK",zh_Hans:"zh-Hans-CN",zh_hans:"zh-Hans-CN",zh_Hant:"zh-Hant-TW",zh_hant:"zh-Hant-TW","zh-hans-CN":"zh-Hans-CN","zh-hant-TW":"zh-Hant-TW","zh-hant-HK":"zh-Hant-HK"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={AF:[],AX:[],AL:[],DZ:["ar","fr","en"],AS:[],AD:["es","fr","pt"],AO:["pt"],AI:[],AQ:["en"],AG:["en"],AR:["es"],AM:["en","ru"],AW:[],AU:["en"],AT:["de"],AZ:["en","ru"],BS:["en"],BH:["ar","en"],BD:[],BB:["en"],BY:["ru"],BE:["nl","en","fr"],BZ:[],BJ:[],BM:["en"],BT:[],BO:["es"],BA:["en"],BW:["en"],BV:[],BR:["pt"],IO:[],BN:["en"],BG:["bg"],BF:[],BI:["en","fr"],KH:[],CM:["en","fr"],CA:["en","fr"],CV:[],KY:["en"],CF:[],TD:[],CL:["es"],CN:["zh-Hans","zh-hans"],CX:[],CC:["en"],CO:["es"],KM:[],CG:["en","fr"],CD:["en","fr"],CK:[],CR:["es"],CI:["en","fr"],HR:["hr"],CU:[],CY:["en"],CZ:["cs"],DK:["da"],DJ:[],DM:["en"],DO:["es"],EC:["es"],EG:["ar","en"],SV:["es"],GQ:[],ER:[],EE:["et"],ET:[],FK:[],FO:["da"],FJ:[],FI:["fi"],FR:["fr"],GF:["fr"],PF:[],TF:[],GA:[],GM:[],GE:["en","ru"],DE:["de"],GH:["en"],GI:[],GR:["en"],GL:[],GD:[],GP:["en","fr"],GU:[],GT:["es"],GG:[],GN:[],GW:[],GY:["en"],HT:["en","fr"],HM:[],VA:[],HN:["es"],HK:["en","zh-Hant","zh-hant"],HU:["hu"],IS:[],IN:["en"],ID:["en"],IR:[],IQ:["ar"],IE:["en"],IM:[],IL:["he","en"],IT:["it"],JM:["en"],JP:["ja"],JE:[],JO:["ar","en"],KZ:["ru"],KE:["en"],KI:[],KR:["ko"],KV:[],KW:["ar","en"],KG:["ru","en"],LA:[],LV:["lv"],LB:["ar","en"],LS:["en"],LR:["en"],LY:["ar"],LI:[],LT:["lt"],LU:["en","de","fr"],MO:[],MK:[],MG:["en","fr"],MW:[],MY:["en"],MV:[],ML:["en","fr"],MT:["en"],MH:[],MQ:["en","fr"],MR:["en","fr"],MU:["en","fr"],YT:["en","fr"],MX:["es"],FM:["en"],MD:["en","ru"],MC:[],MN:[],ME:[],MS:[],MA:["ar","fr","en"],MZ:["pt"],MM:[],NA:["en"],NR:[],NP:[],NL:["nl"],AN:["nl","en"],NC:[],NZ:["en"],NI:["es"],NE:["en","fr"],NG:["en"],NU:[],NF:[],MP:["en"],NO:["nb"],OM:["ar","en"],PK:["en"],PW:[],PS:[],PA:["es"],PG:[],PY:["es"],PE:["es"],PH:["en"],PN:[],PL:["pl"],PT:["pt"],PR:["es"],QA:["ar","en"],RE:[],RO:["ro"],RU:["ru"],RW:[],BL:[],SH:[],KN:["en"],LC:["en"],MF:[],PM:[],VC:["pt"],WS:[],SM:[],ST:[],SA:["ar","en"],SN:["en","fr"],RS:["rs"],SC:[],SL:[],SG:["en"],SK:["sk"],SI:["sl"],SB:[],SO:[],ZA:["en"],GS:[],ES:["es"],LK:[],SD:[],SR:["nl"],SJ:[],SZ:[],SE:["sv"],CH:["de","fr","it"],SY:[],TW:["zh-Hant","zh-hant"],TJ:["ru","en"],TZ:["en"],TH:["en"],TL:[],TG:[],TK:[],TO:[],TT:["en"],TN:["ar","fr","en"],TR:["tr"],TM:["ru","en"],TC:["en"],TV:[],UG:["en"],UA:["uk"],AE:["en","ar"],GB:["en"],US:["en"],UM:[],UY:["es"],UZ:["ru","en"],VU:[],VE:["es"],VN:["en"],VG:["en"],VI:[],WF:[],EH:[],YE:["ar","en"],ZM:["en"],ZW:["en"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2));t.default=function(e){return i[e]&&Object.keys(i[e])}},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,c=[],d=!1,u=-1;function h(){d&&l&&(d=!1,l.length?c=l.concat(c):u=-1,c.length&&p())}function p(){if(!d){var e=s(h);d=!0;for(var t=c.length;t;){for(l=c,c=[];++u<t;)l&&l[u].run();u=-1,t=c.length}l=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||d||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(5)),r=a(n(4)),o=n(0);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){var a=(0,o.getAppNameFromURL)(e),s=(0,r.default)(a,t,n),l=s.locale;return{match:s.match,url:(0,i.default)(e,l)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(1),o=(i=r)&&i.__esModule?i:{default:i},a=n(0),s=n(3);t.default=function(e){var t=void 0;if("string"==typeof e){var n=(0,a.getAppNameFromURL)(e);if(n){var i=s.langParamApp.includes(n)?"lang":"locale",r=new RegExp("("+i+"=)(.*?)(?=&|$)");t=(e.match(r)||[])[2],t=(0,o.default)(n,t,"en-US")}}return t}}])},e.exports=i()},function(e,t,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var r,o,a,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(r=c(e))>0&&a.length>r&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function u(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}function h(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=u.bind(i);return r.listener=n,i.wrapFn=r,r}function p(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):g(r,r.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var c=l.length,d=g(l,c);for(n=0;n<c;++n)o(d[n],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,i,r,o,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjIxMTAgLTE0MjggMjAgMjAiPjxkZWZzPjxzdHlsZT4uYXtmaWxsOiNmZmY7fS5ie2ZpbGw6IzM1NDE0Yzt9PC9zdHlsZT48L2RlZnM+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQyNSAtMTg3MSkiPjxjaXJjbGUgY2xhc3M9ImEiIGN4PSIxMCIgY3k9IjEwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjg1IDQ0MykiLz48cGF0aCBjbGFzcz0iYiIgZD0iTTU4MC42LDE0Ny4xbC0yLjctMi43LDIuNy0yLjdhLjc3OC43NzgsMCwxLDAtMS4xLTEuMWgwbC0yLjcsMi43LTIuNy0yLjdhLjc3OC43NzgsMCwxLDAtMS4xLDEuMWgwbDIuNywyLjctMi43LDIuN2EuNzc4Ljc3OCwwLDAsMCwxLjEsMS4xaDBsMi43LTIuNywyLjcsMi43YS43NzguNzc4LDAsMCwwLDEuMS0xLjFaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTguMjI1IDMwOC42MjUpIi8+PC9nPjwvc3ZnPg=="},function(e,t,n){e.exports=!n(29)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(8),n(7),n(5),n(11),n(4),n(53),n(6),n(37),n(12),n(226),n(219),n(42),n(108)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u,h,p,f,g,m){"use strict";var v=new s({color:"green",name:"UpgradeController"}),b={postLogoButton:{primaryTxt:r.getString("merch-touchpoint-post-logo-primary-txt"),secondaryTxt:"",primaryBtnTitle:r.getString("merch-touchpoint-secondary-btn-default"),secondaryBtnTitle:"",dialogClass:"merch-post merch-post-logo",logo:"/images/merch-post-logo.svg",analyticsTrigger:"logo"},postWatermark:{primaryTxt:r.getString("merch-touchpoint-post-watermark-primary-txt"),secondaryTxt:"",primaryBtnTitle:r.getString("merch-touchpoint-secondary-btn-default"),secondaryBtnTitle:r.getString("merch-touchpoint-post-watermark-secondary-btn-title"),dialogClass:"merch-post merch-post-watermark",logo:"/images/merch-post-watermark-logo.png",analyticsTrigger:"watermark"},postWatermarkUpgradeOnly:{primaryTxt:r.getString("merch-touchpoint-post-watermark-primary-txt"),secondaryTxt:"",primaryBtnTitle:r.getString("merch-touchpoint-secondary-btn-default"),secondaryBtnTitle:r.getString("merch-touchpoint-post-watermark-secondary-btn-title"),dialogClass:"merch-post merch-post-watermark",logo:"/images/merch-post-watermark-logo.png",analyticsTrigger:"watermark"},postBrandifyButton:{primaryTxt:r.getString("merch-touchpoint-post-brandify-primary-txt"),secondaryTxt:"",primaryBtnTitle:r.getString("merch-touchpoint-secondary-btn-default"),secondaryBtnTitle:"",dialogClass:"merch-post merch-post-brandify",logo:"/images/merch-touchpoint-post-brandify.gif",analyticsTrigger:"brandify"},postResizeButton:{primaryTxt:r.getString("merch-touchpoint-post-resize-primary-txt"),secondaryTxt:"",primaryBtnTitle:r.getString("merch-touchpoint-secondary-btn-default"),secondaryBtnTitle:"",dialogClass:"merch-post merch-post-resize",logo:"/images/merch-touchpoint-post-resize.gif",analyticsTrigger:"resize"},postCustomFontsButton:{primaryTxt:r.getString("merch-touchpoint-custom-fonts-primary-txt"),secondaryTxt:"",primaryBtnTitle:r.getString("merch-touchpoint-secondary-btn-default"),secondaryBtnTitle:"",dialogClass:"merch-post merch-post-custom-fonts",logo:"/images/merch-touchpoint-post-custom-fonts.svg",analyticsTrigger:"fontPicker"},"page:settings:headerfooter":{primaryTxt:r.getString("merch-touchpoint-page-settings-headerfooter-primary-txt"),secondaryTxt:r.getString("merch-touchpoint-page-settings-headerfooter-secondary-txt"),hideOnResize:!0},"page:settings:gacookiebanner":{primaryTxt:"",secondaryTxt:r.getString("merch-touchpoint-page-settings-gacookiebanner-secondary-txt"),hideOnResize:!0},"page:themepicker":{primaryTxt:r.getString("merch-touchpoint-page-themepicker-primary-txt"),secondaryTxt:r.getString("merch-touchpoint-page-themepicker-secondary-txt"),logo:"/images/page_po_themepicker.png"},"page:texttoolbar":{primaryTxt:r.getString("merch-touchpoint-page-texttoolbar-primary-txt"),secondaryTxt:r.getString("merch-touchpoint-page-texttoolbar-secondary-txt"),logo:"/images/page_po_toolbar.png"},videoStamp:{primaryTxt:r.getString("merch-touchpoint-video-stamp-primary-txt"),secondaryTxt:r.getString("merch-touchpoint-video-stamp-secondary-txt"),logo:"/images/video_po_replace_logo.png"},videoOutroSlide:{primaryTxt:r.getString("merch-touchpoint-video-outro-primary-txt"),secondaryTxt:r.getString("merch-touchpoint-video-outro-secondary-txt"),logo:"/images/video_po_outro.png"}};return new(i.Model.extend({_userAnalytics:{entitled:"unknown"},initialize:function(){c.on("is-paid-user",function(e){e?this._userAnalytics.entitled="true":(this.preloadData(),this._userAnalytics.entitled="false")}.bind(this))},getTouchpoints:function(){return JSON.parse(JSON.stringify(b))},getUserAnalytics:function(){return this._userAnalytics},getExistingDataIfGood:function(e){return this._lastDataFromServer?!e.hidePlans&&this._lastDataFromServer.data.requestedHidePlans?null:new Date-this._lastDataFromServer.timestamp<72e5?this._lastDataFromServer.data:void 0:null},preloadData:function(e){return this._preloadDataPromise||(this._preloadDataPromise=this.getPricingData(e)),this._preloadDataPromise},modPlansDataForUnauthenticatedFeatures:function(e){return e.requestedHidePlans||!e.experimentPlansVariants?n(e):a.unauthenticatedFeaturesLoaded().then(function(){var n=t.find(e.experimentPlansVariants,(function(e,t){return a.hasUnauthenticatedFeature(t)}));return n&&t.each(e.orderedPlans,(function(e){var i=n.plans[e.id];i&&t.assign(e,i)})),e}.bind(this),(function(t){return n(e)}))},getPricingData:function(e){e=e||{};var i,r=this.getExistingDataIfGood(e);if(r)return n.resolve(r);i=t.isUndefined(e.hidePlans)?a.featuresLoaded().then(function(){e.hidePlans=a.hasFeature("entitle-brand-kit")}.bind(this),(function(t){e.hidePlans=!1})):n.resolve();var o=n.defer();return i.then(function(){var t=d.getUserCountryInfo(),n="/pricingdata";t&&(n+="?country="+t.country),d.ajax({type:"GET",url:n,data:e,headers:{Accept:"*/*","Content-Type":"application/json"},success:function(e,t,n){this._initPlansData(e).then(function(e){this._lastDataFromServer={data:e,timestamp:new Date},o.resolve(e)}.bind(this)).done()}.bind(this),error:function(e){v.error("getPricingData failed",e),o.reject(e)}.bind(this)},null,!0)}.bind(this)).done(),o.promise},_getUpgradeView:function(){return this._upgradeView||(this._upgradeView=new p({controller:this})),this._upgradeView},upgradeViewClosed:function(){window.marvel.events.trigger("upgrade-view-closed")},handleUserClicksToPurchasePlan:function(e){if(e.isSparkFree){var t=!window.marvel._isInApp;e.view&&e.view.handleCloseUpgradeView(),t&&(0===u.parse(window.location.href).pathname.indexOf("/"+r.localePathPrefix+"sp/")?window.marvel.navigate("/",{trigger:!0}):window.location.href=r.getLocalizedSparkPath("/sp/"))}else{var n=e.ucReturnUrl;n||(n="https://"+window.location.host+r.getLocalizedSparkPath("/sp/onboarding/planspagepurchase?srcUrl="+encodeURI(window.location.pathname)+"&productId="+e.productId+"&orderId={{orderId}}"));var i,o,a=e.workflow,s=l.upgradeUcClientId;n+="&touchpointName="+encodeURI(a),this._currentOptions&&this._currentOptions.destinationUrl&&(n+="&destinationUrl="+encodeURI(this._currentOptions.destinationUrl)),i=[{offerId:e.offerId,quantity:e.quantity||1}];var c=r.getLocale()||e.languageCode;c.length>=3&&(c=c.substr(0,2)),o={clientId:s,countryCode:e.countryCode,languageCode:c,returnUrl:n,items:i},this._redirectToCheckout(o).done()}},_redirectToCheckout:function(e){var n=l.upgradeCommercePath,i={cli:e.clientId,co:e.countryCode,lang:e.languageCode,rUrl:e.returnUrl},r="";return t.each(e.items,(function(e,n){t.each(e,(function(e,t){var i="";switch(t){case"offerId":i="id";break;case"quantity":i="q"}i&&(r+="&items["+n+"]["+i+"]="+e)}))})),this._getTransitoryAuthorizationCode().then((function(e){i.code=e;var t=u.format({pathname:n,query:i})+r;window.location.href=t}))},_getTransitoryAuthorizationCode:function(){if(this._getTransitoryAuthorizationCodeDefer){if(!this._currentAuthCodeInfo.nextLoadTime||this._currentAuthCodeInfo.nextLoadTime>=Date.now())return this._getTransitoryAuthorizationCodeDefer.promise;this._getTransitoryAuthorizationCodeDefer=n.defer()}else this._getTransitoryAuthorizationCodeDefer=n.defer(),this._currentAuthCodeInfo={nextLoadTime:0};return d.getTransitoryAuthorizationCode({targetClientId:"unified_checkout_client",targetScope:"AdobeID,openid,sao.stock,additional_info.roles,additional_info.vat_id,additional_info.dob,update_profile.countryCode"}).then(function(e){this._currentAuthCodeInfo.code=e.authCode||"",this._currentAuthCodeInfo.nextLoadTime=Date.now()+l.upgradeCommerceAuthCodeRefreshDuration,this._getTransitoryAuthorizationCodeDefer.resolve(this._currentAuthCodeInfo.code)}.bind(this),function(e){this._currentAuthCodeInfo.code="",this._currentAuthCodeInfo.nextLoadTime=Date.now()+l.upgradeCommerceAuthCodeRefreshDuration,this._getTransitoryAuthorizationCodeDefer.resolve(this._currentAuthCodeInfo.code)}.bind(this)).done(),this._getTransitoryAuthorizationCodeDefer.promise},loadCommerceForView:function(){return this._loadCommerce()},loadTrackingBeaconForView:function(){return this._loadTrackingBeacon()},_loadTrackingBeacon:function(){return this._trackingBeaconLoad||(this._trackingBeaconLoad=n.defer(),t.defer(function(){try{if(t=window,n=document,i="script",r="https://connect.facebook.net/en_US/fbevents.js",t.fbq||(o=t.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},t._fbq||(t._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],(a=n.createElement(i)).async=!0,a.src=r,(s=n.getElementsByTagName(i)[0]).parentNode.insertBefore(a,s)),void 0!==window.fbq){window.fbq("init","{1772359959706965}"),window.fbq("track","PageView");var e=document.createElement("img");e.style="display:none;",e.src="https://www.facebook.com/tr?id=1772359959706965&ev=PageView&noscript=1",document.body.appendChild(e)}}catch(e){v.warn("error inserting iFrame for tracking beacon",e)}var t,n,i,r,o,a,s;this._trackingBeaconLoad.resolve()}.bind(this))),this._trackingBeaconLoad.promise},_loadCommerce:function(){return this._commerceLoadingDefer||(this._commerceLoadingDefer=n.defer(),this._getTransitoryAuthorizationCode().done(),t.defer(function(){try{var e=document.createElement("iframe");e.style.display="none",e.src=l.upgradeCommercePreloadIframeSrc,document.body.appendChild(e)}catch(e){v.warn("error inserting iFrame in _loadCommerce",e)}this._commerceLoadingDefer.resolve()}.bind(this))),this._commerceLoadingDefer.promise},handleShowUpgradeLearnMore:function(e){"string"==typeof e?e={workflow:e}:(e=e||{}).workflow||(e.workflow="unknown-workflow"),e.jumpToLearnMore=!0,this._handleShowUpgrade(!1,e)},handleShowUpgrade:function(e){e="string"==typeof e?{workflow:e}:e||{},this._handleShowUpgrade(!0,e)},isOnUpgradeRoute:function(){var e=window.location.pathname.match(/[^\/]+/g);return e&&-1!==e.indexOf("pricing")},_handleShowUpgrade:function(e,t){this._currentOptions=t;var n=this.isOnUpgradeRoute();!l.allowUpgradePage&&n?(v.warn("trying to view upgrade page on bad env",window.location.pathname),window.location.href="/"):this.getPricingData(t).then(function(i){n?this._getUpgradeView().renderInLanding({workflow:t.workflow,plansData:i,parent$:this._landingParent$,jumpToPlans:e,jumpToLearnMore:t.jumpToLearnMore,marketingTouchpointCTA:t.marketingTouchpointCTA,hidePlans:t.hidePlans}):this._showUpgradeViewWithData(i,e,t)}.bind(this),function(e){v.error("could not get upgrade data in handleShowUpgrade",e)}.bind(this)).done(),v.debug("show-upgrade:"+t.workflow)},_showMerchNotificationHandler:function(e,n,i,r){try{t.isFunction(e)&&e(n),t.isFunction(i)&&i()}catch(e){v.error(r)}},showMerchPopover:function(e){var n=b[e.touchpointName],i=e.name||n&&n.analyticsTrigger,o={direction:e.position||"auto",primaryClickHandler:function(){this._showMerchNotificationHandler(e.notify,"primary",null,"Error while calling the primary popover notify fn"),this.handleShowUpgrade({workflow:i,marketingTouchpointCTA:"upgrade"})}.bind(this),secondaryClickHandler:function(){var t=null;"postWatermark"!==e.name&&(t=this.handleShowUpgradeLearnMore.bind(this,{workflow:i,marketingTouchpointCTA:"learn-more"})),this._showMerchNotificationHandler(e.notify,"secondary",t,"Error while calling the secondary popover notify fn")}.bind(this),hideHandler:function(t){this._showMerchNotificationHandler(e.notify,t,null,"Error while calling the hide popover notify fn")}.bind(this),name:e.touchpointName||"untitled:merchPopover",target:e.$element||e.element,logo:"/images/video_po_replace_logo.png",primaryTxt:r.getString("merch-touchpoint-primary-txt-default"),secondaryTxt:r.getString("merch-touchpoint-secondary-txt-default"),primaryBtnTitle:r.getString("merch-touchpoint-primary-btn-default"),secondaryBtnTitle:r.getString("merch-touchpoint-secondary-btn-default"),hideEvent:"hide-picker",analyticsEvent:"viewedMerchandising",primaryCTAAnalytic:"clickedMerchandisingCTA",secondaryCTAAnalytic:"clickedMerchandisingMaybeLater"};e.anchorLocation&&(o.refWidth=e.anchorLocation.width,o.refHeight=e.anchorLocation.height,o.top=e.anchorLocation.top,o.left=e.anchorLocation.left);var a=t.assign({},o,n,e);return new f(a).show(a.direction)},_getBusinessSegmentPlan:function(e,n){return t.find(n.orderedPlans,(function(t){return t.id.split(".")[1]===e}))},showMerchMessagingModal:function(e){var n,i=!1,r=t.clone(e);"premiumTemplate"==e.workflow&&(i=a.hasFeature("upgrade-premium-template-show-pricing"),n="create-from-premium-template-attempted"),"remixPremiumTemplate"===e.workflow&&(i=a.hasFeature("upgrade-premium-template-show-pricing"),n="remix-from-premium-template-attempted"),"remixPremiumTemplateFromEditorTemplateSearch"===e.workflow&&(i=a.hasFeature("upgrade-premium-template-show-pricing"),n="remix-from-premium-template-attempted-in-editor-search"),i?this.getPricingData().then(function(i){var o=this._getBusinessSegmentPlan(e.segment||"INDIVIDUAL",i);if(o){var a=t.find(o.offers,(function(e){return e.offerId===o.defaultOfferId}));a&&(r.partials=p.getPricePartials(),r.additionalFieldsForModel={priceDisplay:t.assign({},a.priceDisplay,{selected:!0})})}window.marvel.events.trigger(n,"tbd:whatmerchstring",r)}.bind(this)):window.marvel.events.trigger(n,"tbd:whatmerchstring",r)},_showUpgradeViewWithData:function(t,n,i){var r=e(document.body).find(".upgrade-overlay-holder");r.length||(r=e("<div class='upgrade-overlay-holder needs-showing hide'></div>"),e(document.body).append(r)),this._getUpgradeView().renderInApp({workflow:this._currentOptions.workflow,parent$:r,plansData:t,jumpToLearnMore:i.jumpToLearnMore,jumpToPlans:n,marketingTouchpointCTA:i.marketingTouchpointCTA,hidePlans:i.hidePlans})},showPlansInLanding:function(e){if(!e.workflow){var t=u.parse(window.location.href,!0);e.workflow=t.query.workflow||"landing"}if(!e.jumpToPlans&&window.location.hash&&window.location.hash.length>1){var n=window.location.hash.substring(1);"plans"===n?e.jumpToPlans=!0:e.jumpToAnchor=n}this._initPlansData(e.plansData).then(function(t){this._lastDataFromServer={data:t,timestamp:new Date},this._landingParent$=e.parent$,this._getUpgradeView().renderInLanding(e)}.bind(this)).done()},isConfettiArmed:function(){return this._confettiArmed},disarmConfetti:function(){this._confettiArmed=!1},userReturnedViaPurchasedRoute:function(e){this._confettiArmed=!0;marvel._firstLaunchSession;var t,n=a.hasFeature("entitle-brand-kit"),i=e.query.touchpointName||"unknown",r=e.query.productId,s=e.query.orderId,l=-1!==e.pathname.indexOf("/cancel"),c=-1!==e.pathname.indexOf("/default"),d=l?"cancel":"success";return t=l?"cancel":c?"default":"custom",n||l||v.warn("non-entitled user in non-cancel purchase return",s),o.trackEvent("endPurchaseFlow",{trigger:i,productId:r,orderId:s,pathtype:t,reason:d},"onboarding:planspagepurchase"),!l},requestTypeKitSyncUserEntitlement:function(){var e=n.defer(),t=l.adobeFontsApiEndpoint+"/v1/refresh_user",i=l.cid,r=d.getProfile().userId;return d.ajax({type:"PUT",url:t,dataType:"text",headers:{HTTP_X_GW_IMS_USER_ID:r,"X-Api-Key":i},success:function(t,n,i){m.addPageAction&&m.addPageAction("spark_web_typekit_refresh_user",{status:"succeeded",statusCode:i.status}),e.resolve(n)},error:function(t,n,i){m.addPageAction&&m.addPageAction("spark_web_typekit_refresh_user",{status:"failed",statusCode:t.status}),v.error("requestTypeKitSyncUserEntitlement failed with ["+t.status+"]: "+i,t),e.resolve(t)}}),e.promise},_initPlansData:function(e){return this.modPlansDataForUnauthenticatedFeatures(e).then(function(e){return e.noPlans?e:(e.plansById={},this._termInfoMap=this._getExpandedTermMap(e.termsInfo.map,e.termsInfo.termsToTermId),this._perLicenseString=e.termsInfo.perLicenseString||"",e.termMap=this._termInfoMap,e.commitmentAndTermMap=e.termsInfo.commitmentAndTermMap,this.countryInfo=e.countryInfo,t.each(e.orderedPlans,function(n){e.plansById[n.id]=n,n.offersById={},n.offers?t.each(n.offers,function(e){e.priceDisplay=this._getPriceForDisplay(e),e.priceDisplay.oldPrice&&(n.hasSpecialOffers=!0),n.offersById[e.offerId]=e}.bind(this)):n.apps&&(t.each(n.apps,function(e){t.each(e.offers,function(t){t.priceDisplay=this._getPriceForDisplay(t),t.priceDisplay.oldPrice&&(e.hasSpecialOffers=!0),n.offersById[t.offerId]=t}.bind(this))}.bind(this)),n.defaultPriceOfferId&&(n.defaultPrice=n.offersById[n.defaultPriceOfferId]))}.bind(this)),e)}.bind(this))},_formats:{},_getExpandedTermMap:function(e,n){var i={};return t.each(n,(function(t,n){i[n]=e[t]})),i},_getCurrencyFormat:function(e){var t=e.formatString,n=this._formats[t];if(!n){n={originalString:t,delimiter:e.delimiter},this._formats[t]=n;var i=t.indexOf("'"),r=0!==i,o=t.indexOf("'",i+1),a=t.substring(i+1,o),s=(r?t.substring(0,i):t.substring(o+1)).trim();if(r){var l=t.lastIndexOf("0",i);n.space=t.substring(l+1,i),t=t.substring(0,l+1)}else{var c=t.indexOf("#");n.space=t.substring(o+1,c),t=t.substring(c,t.lastIndexOf("0")+1)}if(n.symbolAtEnd=r,n.symbol=a,e.delimiter){var d=s.indexOf(e.delimiter);n.numPlaces=s.length-d-1,n.wholeNumberFormatString=s.substring(0,d)}else n.numPlaces=0,n.wholeNumberFormatString=s}return n},_getRepeatedString:function(e,t){if(e.repeat)return e.repeat(t);if(t){for(var n=e,i=1;i<t;i++)n+=e;return n}return""},_getFormattedWholeNumber:function(e,t){var n=e+"";if(5===t.length){if(n.length>3){var i="$1"+t[1];n=String(n).replace(/(.)(?=(\d{3})+$)/g,i)}}else v.debug("unsupported wholeNumberFormatString:"+t);return n},_getFormattedCurrencyNumber:function(e,n){var i,r,o=this._getCurrencyFormat(n),a={symbol:o.symbol,symbolAtEnd:o.symbolAtEnd,fractionDelimiter:o.delimiter};if(e)if(o.numPlaces){var s,l=Math.floor(e),c=t.round(e-l,o.numPlaces);i=this._getFormattedWholeNumber(l,o.wholeNumberFormatString),0===c?(s=this._getRepeatedString("0",o.numPlaces),r=i):((s=(c+"").substring(2)).length<o.numPlaces&&(s+=this._getRepeatedString("0",o.numPlaces-s.length)),r=i+o.delimiter+s),a.fraction=s}else r=i=i=this._getFormattedWholeNumber(e,o.wholeNumberFormatString);else i="0",r="0";return o.symbolAtEnd?a.combinedString=i+o.space+a.symbol:a.combinedString=a.symbol+o.space+i,a.numberString=i,a.shortNumberString=r,a},_getPriceForDisplay:function(e){var t=e.pricing,n=t.price.displayPrice,i=t.currency.symbol.trim(),o=this._termInfoMap[e.term],a=this._getFormattedCurrencyNumber(n,t.currency),s=e.perLicense&&this._perLicenseString,l={price:n,numberString:a.numberString,symbolAtEnd:a.symbolAtEnd,currencySymbol:i,time:r.getString(o.abbr),timeAppend:r.getString(s),combinedString:a.combinedString,fraction:a.fraction,fractionDelimiter:a.fractionDelimiter,shortNumberString:a.shortNumberString};if(!n&&t.currency.isDefault&&(l.currencySymbol="",l.numberString="0"),t.price.oldPrice){var c=this._getFormattedCurrencyNumber(t.price.oldPrice,t.currency);l.oldPrice={price:t.price.oldPrice,numberString:c.numberString,shortNumberString:c.shortNumberString,combinedString:c.combinedString}}return l}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";var i=n(139).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=d,this.end=u,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=a(t[i]);if(r>=0)return r>0&&(e.lastNeed=r-1),r;if(--i<n||-2===r)return 0;if((r=a(t[i]))>=0)return r>0&&(e.lastNeed=r-2),r;if(--i<n||-2===r)return 0;if((r=a(t[i]))>=0)return r>0&&(2===r?r=0:e.lastNeed=r-3),r;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(221),n(5),n(11),n(70)],void 0===(r=function(e,t,i,r,o,a,s,l){"use strict";var c=new s({color:"rebeccapurple",name:"userProfileController"});return new(r.Model.extend({initUserProfile:function(){return this._currentUserProfile?i.resolve():(this._currentUserProfile=new o,this._currentUserProfile.initProfile({useFeaureFlags:!0,featureController:a,dataObj:{},profileId:"spark",type:"spark",logger:c}))},getChangedSettingsToSubmit:function(e){var n={};return t.each(e,function(e,i){"_"!==i.charAt(0)&&("object"!=typeof e||t.isArray(e)?n[i]=e:n[i]="featureFlipperChanges"!==i?this.getChangedSettingsToSubmit(e):e)}.bind(this)),n},setUserSettings:function(e){var n=i.defer();return t.each(e,function(e,t){"enableMarketing"===t&&console.log("try to save "+JSON.stringify(e))}.bind(this)),e=this.getChangedSettingsToSubmit(e),this._currentUserProfile.saveUpdatedProfileSettings(e).then((function(e){n.resolve(e)}),(function(e){n.reject(e)})),n.promise},refreshUserProfile:function(){if(this.userProfileDeferred){if(!this.userProfileDeferred.isFulfilled())return this.userProfileDeferred.promise;delete this.userProfileDeferred}return this.userProfileLoaded()},userProfileLoaded:function(){return this.userProfileDeferred||(this.userProfileDeferred=i.defer(),a.featuresLoaded().then(function(){this.initUserProfile().then(function(){this.userProfileDeferred.resolve(this._currentUserProfile)}.bind(this),function(e){window.marvel.logger.error("Failed to load user profile "+e.status,e),this.userProfileDeferred.reject(e.status)}.bind(this))}.bind(this)).done()),this.userProfileDeferred.promise},getGetNoticedSettings:function(){return this._currentUserProfile.getGetNoticedSettings()},getIsEDUAccount:function(){return this.userProfileLoaded().then(function(){return this._currentUserProfile.isEDUAccount()}.bind(this))},getProfileHomeSettings:function(){return this._getProfileHomeSettingsDefer||(this._getProfileHomeSettingsDefer=i.defer(),this.userProfileLoaded().then(function(){this._getProfileHomeSettingsDefer.resolve(this._currentUserProfile.getProfileHomeSettings())}.bind(this)).done()),this._getProfileHomeSettingsDefer.promise},getProfile:function(){return this._currentUserProfile},editSettings:function(e){var n={mode:"edit"};return e&&t.assign(n,e),this._displaySettingsForEdit(n)},_getUserProfileView:function(){return this._getUserProfileViewDefer||(this._getUserProfileViewDefer=i.defer(),Promise.all([n.e("brand-kit-chooser-view~brand-kit-editor~slate-web~user-profile-view"),n.e("user-profile-view")]).then(function(e){var t=n(350);this._getUserProfileViewDefer.resolve(t)}.bind(this).bind(null,n)).catch(n.oe)),this._getUserProfileViewDefer.promise},_displaySettingsForEdit:function(e){return this._getUserProfileView().then(function(n){e.fieldIds||(e.fieldIds=["share-default-to-unlisted"],a.hasFeature("user-settings-allow-show-account-info")&&e.fieldIds.push("displayName","avatar","email","entitlement","usertype"));var r=i.defer();e=t.clone(e),this._mode=e.mode;var o=!1;return e.hideLoadingSpinner||n.showLoadingSpinner().then(function(e){o="canceled"===e}.bind(this)),this.userProfileLoaded().then(function(){return e.isFeatureFlipperRequest?void 0:this._currentUserProfile.emailListSettingsLoaded()}.bind(this)).then(function(s){if(!e.hideLoadingSpinner){if(o)return r.resolve();n.hideLoadingSpinner()}a.hasFeature("show-user-flag-image-source-stock")&&e.fieldIds.push("user-flag-image-source-stock"),t.each(l.imageServices.dooplo,function(t){a.hasFeature(l.imageServices.showFlagPrefixDooplo+t)&&e.fieldIds.push(l.imageServices.flagPrefixDooplo+t)}.bind(this));var d=e.fieldIds.indexOf("share-default-to-unlisted");-1!==d&&(this.getGetNoticedSettings().supported||e.fieldIds.splice(d,1));if(e.ignoreIfExisting&&this._currentUserProfile.lastModified)return r.resolve();var u=i.defer();e.userProfile=this._currentUserProfile,e.canEditNonBooleans=!1,e.closeDefer=u,"success"===s?e.fieldIds.push("spark-newsletter","tips-and-tricks"):"unableToLoadEmailSettingsForQualifiedUser"===s&&(e.unableToLoadEmailSettingsForQualifiedUser=!0),n.editProfile(e).then(function(e){e?this.setUserSettings(e).then(function(e){u.resolve(!0),r.resolve(e)}.bind(this),function(e){r.reject(e)}.bind(this)):(u.resolve(!0),r.resolve())}.bind(this),(function(e){c.error("editProfile had error",e),r.reject(e)})).done()}.bind(this),(function(e){r.reject(e)})).done(),r.promise}.bind(this))}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(26),n(20),n(8)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s={defaultAltText:"Click to download Spark {{productName}} in the iTunes App Store",defaultGooglePlayAltText:"Click to download Spark {{productName}} on Google Play",appStoreUrl:"https://c00.adobe.com/v3/{{id}}/start?a_i_id={{aiId}}&a_dd=i&ctxa.referrer.campaign.name=Spark+Home+{{productName}}&ctxa.referrer.campaign.trackingcode={{trackingCode}}&ctxa.referrer.campaign.source=Spark+Home+{{productName}}&ctxa.referrer.campaign.medium=Banner",apps:[{id:"post",appStore:{id:"9c5f8efbfd205eb5ababce6d862135839de6e5ed55a3d0034475b7bee0ff552c",aiId:"1051937863",trackingCode:"votknbon",productName:"Spark Post"},googlePlay:{id:"fb91a0f30baf6ec5d01a35404158c976fb5e9ac375dbc0c53be9f75ffd28bea0",aiId:"1051937863",trackingCode:"votknbon",productName:"Spark Post",googlePlayUrl:{upgradeView:"https://play.google.com/store/apps/details?id=com.adobe.spark.post&referrer=utm_source%3DPricing%2520Page"}},productName:"Spark Post",downloadForTag:a.getString("platform-utils-post-app-desc")},{id:"page",appStore:{id:"2c18a4dd7ed9e6bff783299fe0861806c9f14220edc8b0d08d613ccb7b9cae6c",aiId:"968433730",trackingCode:"kpv6s5k2",productName:"Spark Page"},productName:"Spark Page",downloadForTag:a.getString("platform-utils-page-app-desc")},{id:"video",appStore:{id:"0b7e67fa41f6b592f2d606c22f107ce856db905f9d8ff39637f4a156e11890bf",aiId:"852555131",trackingCode:"j0qyxypf",productName:"Spark Video"},productName:"Spark Video",downloadForTag:a.getString("platform-utils-video-app-desc")}]};return new(n.Model.extend({initialize:function(){t.bindAll(this,t.functionsIn(this)),this._platformInfo=this.getPlatformInfo();var n=e(document.body);n.one("touchstart.platformutils",this._touchDetect.bind(this)),n.one("wheel.platformutils",this._wheelDetect.bind(this))},_wheelDetect:function(t){!this._platformInfo.supportsTrackScrollH&&t.originalEvent.deltaX&&(this._platformInfo.userHasTrackpad=!0,this._platformInfo.supportsTrackScrollH=!0,this._platformInfo.cssString+=" supports-track-scroll-h",marvel.events.trigger("platformUtils:detected-support-track-scroll-h",this._platformInfo)),!this._platformInfo.supportsTrackScrollV&&t.originalEvent.deltaY&&(this._platformInfo.userHasTrackpad=!0,this._platformInfo.supportsTrackScrollV=!0,this._platformInfo.cssString+=" supports-track-scroll-v",marvel.events.trigger("platformUtils:detected-support-track-scroll-v",this._platformInfo)),this._platformInfo.supportsTrackScrollH&&this._platformInfo.supportsTrackScrollV||e(document.body).one("wheel.platformutils",this._wheelDetect.bind(this))},_touchDetect:function(t){this._platformInfo.userHasTouchedOnDesktop=!0,this._platformInfo.supportsTouch=!0,this._platformInfo.cssString+=" supports-touch",e(document.body).off("touchstart.platformutils",this._touchDetect.bind(this)),marvel.events.trigger("platformUtils:detected-support-touch",this._platformInfo)},isMobile:function(){return!this._platformInfo.desktop},_platformInfo:{},getPlatformInfo:function(e){return e=e||window.navigator.userAgent,this._platformInfo.userAgent===e?this._platformInfo:this._platformFromUserAgent(e)},_platformFromUserAgent:function(e){var t=e,n={iOS:!1,iPhone:!1,iPad:!1,android:!1,nonIosOrAndroidMobile:!1,androidOrIos:!1,desktop:!1,tablet:!1,phone:!1,userAgent:e};return/like Mac OS X/.test(t)?(n.iOS=/CPU( iPhone)? OS ([0-9\._]+) like Mac OS X/.exec(t)[2].replace(/_/g,"."),n.iPhone=/iPhone/.test(t),n.iPad=/iPad/.test(t),n.tablet=n.iPad,n.phone=n.iPhone):/Android/.test(t)?(n.android=!0,/Mobi/.test(t)?n.phone=!0:n.tablet=!0):/Mobi/.test(t)?(n.nonIosOrAndroidMobile=!0,n.phone=!0):n.desktop=!0,n.desktop?n.cssString="desktop":(n.iOS?n.iPhone?n.cssString="ios iphone":n.cssString="ios ipad":n.android?n.cssString="non-ios-mobile android":n.nonIosOrAndroidMobile&&(n.cssString="non-ios-mobile"),n.tablet?n.cssString+=" tablet":n.cssString+=" phone"),n.desktop||(n.androidOrIos=n.android||n.iOS,n.supportsTouch=!0,n.cssString+=" supports-touch",n.supportsTrackScrollH=!0,n.cssString+=" supports-track-scroll-h supports-track-scroll-v"),n.apps=this.getAppsData(n),n},getAppsData:function(e){var n=t.cloneDeep(s.apps),i={};return t.each(n,function(t){i[t.id]=t,t[t.id]=!0,t.appStoreUrl=o.to_html(s.appStoreUrl,t.appStore),t.downloadAlt=o.to_html(s.defaultAltText,t.appStore),t.downloadFormatForReason=this._getDownloadFormatForReason(t,e),t.googlePlay&&(t.googlePlayUrl=t.googlePlay.googlePlayUrl,t.googlePlayDownloadAlt=o.to_html(s.defaultGooglePlayAltText,t.googlePlay))}.bind(this)),i.inOrder=n,i},_getDownloadFormatForReason:function(e,t){var n="unknownOperatingSystem";t.iOS?n="ios":t.android?n="android":window.marvel&&window.marvel.logger&&window.marvel.logger.error("[PlatformUtils] Mobile operating system not recognized.");var i="unknownKeyName";return e&&"page"===e.id?i="download-spark-page-for-web-pages":e&&"post"===e.id?i="download-spark-post-for-social-graphics":e&&"video"===e.id?i="download-spark-video-for-animated-videos":window.marvel&&window.marvel.logger&&window.marvel.logger.error("[PlatformUtils] No app.id recognized."),a.formatMessage(i,{operatingSystem:n,localePathPrefix:a.getLocale()})},checkAppBrowserSupport:function(e){return"string"==typeof e&&(e=r.getAppByType(e)),e.isBrowserSupported()?i(!0):e.handleBrowserUnsupported().then((function(){return i(!1)}))}}))}.apply(t,i))||(e.exports=r)},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},,function(e,t,n){var i;void 0===(i=function(e){"use strict";return{}}.call(t,n,t,e))||(e.exports=i)},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(92),n(11)],void 0===(r=function(e,t,n,i,r,o){"use strict";new o({color:"periwinkle",name:"imageUtils"});return new(n.Model.extend({imageServices:{nonDooplo:["stock"],dooplo:["flickr","unsplash","pixabay","the-noun-project","bing"],flagPrefixDooplo:"user-flag-image-source-dooplo-",showFlagPrefixDooplo:"show-user-flag-image-source-dooplo-"},_convertUrlToBlob:function(e,t,n){var o=i.defer(),a=new Image;return n&&a.setAttribute("crossOrigin","anonymous"),a.onload=function(e){var n=document.createElement("canvas"),i=n.getContext("2d");n.width=this.width,n.height=this.height,i.drawImage(this,0,0,this.width,this.height);try{o.resolve(r(n.toDataURL(t||"image/png")))}catch(e){o.reject(e)}},a.onerror=function(e){o.reject(e)},a.src=e,o.promise},convertUrlToBlob:function(e,t){return this._convertUrlToBlob(e,t,!1).then((function(e){return e}),function(n){return this._convertUrlToBlob(e,t,!0).then((function(e){return e}),(function(e){return i.reject(e)}))}.bind(this))},convertRenditionUrlToBlob:function(e,t,n){n=n||"jpg";var i=t;return e=e.replace("{format}",n).replace("{dimension}","width").replace("{size}",i),this.convertUrlToBlob(e).then(function(e){return e}.bind(this),function(e){return null}.bind(this))},getDataUrl:function(e){var t=i.defer(),n=new Image;return n.setAttribute("crossOrigin","anonymous"),n.onload=function(){var e=document.createElement("canvas");e.width=this.naturalWidth,e.height=this.naturalHeight,e.getContext("2d").drawImage(this,0,0);try{t.resolve(e.toDataURL("image/png"))}catch(e){t.reject(e)}},n.onerror=function(e){t.reject(e)},n.src=e,t.promise}}))}.apply(t,i))||(e.exports=r)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var i=n(73),r=n(145),o=n(146),a="[object Null]",s="[object Undefined]",l=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:l&&l in Object(e)?r(e):o(e)}},function(e,t,n){var i=n(123).Symbol;e.exports=i},function(e,t,n){var i=n(72),r=n(126),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";e.exports=function(e){if(!r(e))return!1;var t=i(e);return t==a||t==s||t==o||t==l}},function(e,t,n){var i,r;i=[n(0),n(3),n(36)],void 0===(r=function(e,t,n){"use strict";function i(e){if(!e)throw new Error("Parameter fontRegistry is required for new SlateFonts instances.");this.fontRegistry=e,this.fonts={},this._fontsByCss=null,this._setsByCss=null}return e.extend(i.prototype,{loadFontsByRole:function(n,i){i?e.isArray(i)||(i=[i]):i=[];var r=e.map(i,(function(e){return n.getFontWithUniqueRole(e)}));return t.all(r).then(function(t){t=e.mapKeys(t,(function(e,t){return i[t]})),e.extend(this.fonts,t)}.bind(this))},getFontData:function(t,n){var r={},o=n?" "+n+" ":" ";if(!t)return console.warn("Undefined font"+o+"when retrieving font data."),r;if(r.assetId=t.getId(),n&&(r.role=n),marvel.features.hasFeature("enable-custom-fonts"))return e.extend(r,{fontFamily:t.cssName(),fontWeight:t.fontWeight(),fontStyle:t.fontStyle()});var a=this.fontRegistry.facesByKey[t.getLookupKey()];if(a){a.subgroup&&(r.fontFamily=a.subgroup.cssName);var s=a.face&&a.face.typekitKey;s&&e.extend(r,i.getModifiersFromKey(s))}else console.warn("Font"+o+"not found in registry when retrieving font data.");return r},getFontDataByRole:function(e){return this.getFontData(this.fonts[e],e)},getCssNameLookup:function(){return this._fontsByCss?this._fontsByCss:this._fontsByCss=e.reduce(this.fontRegistry,(function(e,t){return e[t.cssName]=t,e}),{})},getBodySetByCssNameLookup:function(){return this._setsByCss?this._setsByCss:this._setsByCss=e.reduce(this.fontRegistry.bodyFonts,(function(e,t){return e[t.cssName]=t,e}),{})},getFontFromThemeNode:function(t){var n=t.fontFamily,r=this.getCssNameLookup()[n];if(r){var o=i.getKeyFromModifiers(t);return e.find(r.faces,(function(e){return e.typekitKey===o}))}return null}}),i.get=function(e,t){return n.getFontRegistry().then((function(n){var r=new i(n);return r.loadFontsByRole(e,t).then((function(){return r}))}))},i.getModifiersFromKey=function(e,t){var n,i;return e?{fontStyle:"i"===e.charAt(0)?"italic":"normal",fontWeight:100*parseInt(e.charAt(1),10)}:(t.fontWeight&&"function"==typeof t.fontWeight&&(n=t.fontWeight()),t.fontStyle&&"function"==typeof t.fontStyle&&(i=t.fontStyle()),{fontStyle:i||"normal",fontWeight:n||"normal"})},i.getKeyFromModifiers=function(e){var t={normal:"n",italic:"i"},n={normal:"4",bold:"7"};if(!e)return t.normal+n.normal;var i=t[e.fontStyle]||t.normal,r=n[e.fontWeight]||(parseInt(e.fontWeight,10)/100).toFixed(0);return"NaN"===r&&(r=n.normal),i+r},i.SparkFonts=n,i.componentsThatUseBodyFonts={paragraph:!0,unorderedList:!0,orderedList:!0,inlineImage:!0,button:!0,inlineLink:!0,fullWidthImage:!0,photoGrid:!0},i}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";t.extend=function(e){var t,n,r,o,a=Array.prototype.slice.call(arguments,1);for(t=0,n=a.length;t<n;t+=1)if(r=a[t])for(o in r)i.call(r,o)&&(e[o]=r[o]);return e};var i=Object.prototype.hasOwnProperty;t.hop=i},function(e,t,n){(function(e){t.fetch=s(e.fetch)&&s(e.ReadableStream),t.writableStream=s(e.WritableStream),t.abortController=s(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var n;function i(){if(void 0!==n)return n;if(e.XMLHttpRequest){n=new e.XMLHttpRequest;try{n.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){n=null}}else n=null;return n}function r(e){var t=i();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}var o=void 0!==e.ArrayBuffer,a=o&&s(e.ArrayBuffer.prototype.slice);function s(e){return"function"==typeof e}t.arraybuffer=t.fetch||o&&r("arraybuffer"),t.msstream=!t.fetch&&a&&r("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&o&&r("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!i()&&s(i().overrideMimeType),t.vbArray=s(e.VBArray),n=null}).call(this,n(10))},function(e,t,n){(function(e,i,r){var o=n(77),a=n(14),s=n(79),l=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=t.IncomingMessage=function(t,n,r){var a=this;if(s.Readable.call(a),a._mode=r,a.headers={},a.rawHeaders=[],a.trailers={},a.rawTrailers=[],a.on("end",(function(){e.nextTick((function(){a.emit("close")}))})),"fetch"===r){if(a._fetchResponse=n,a.url=n.url,a.statusCode=n.status,a.statusMessage=n.statusText,n.headers.forEach((function(e,t){a.headers[t.toLowerCase()]=e,a.rawHeaders.push(t,e)})),o.writableStream){var l=new WritableStream({write:function(e){return new Promise((function(t,n){a._destroyed||(a.push(new i(e))?t():a._resumeFetch=t)}))},close:function(){a._destroyed||a.push(null)},abort:function(e){a._destroyed||a.emit("error",e)}});try{return void n.body.pipeTo(l)}catch(e){}}var c=n.body.getReader();!function e(){c.read().then((function(t){a._destroyed||(t.done?a.push(null):(a.push(new i(t.value)),e()))})).catch((function(e){a._destroyed||a.emit("error",e)}))}()}else{if(a._xhr=t,a._pos=0,a.url=t.responseURL,a.statusCode=t.status,a.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===a.headers[n]&&(a.headers[n]=[]),a.headers[n].push(t[2])):void 0!==a.headers[n]?a.headers[n]+=", "+t[2]:a.headers[n]=t[2],a.rawHeaders.push(t[1],t[2])}})),a._charset="x-user-defined",!o.overrideMimeType){var d=a.rawHeaders["mime-type"];if(d){var u=d.match(/;\s*charset=([^;])(;|$)/);u&&(a._charset=u[1].toLowerCase())}a._charset||(a._charset="utf-8")}}};a(c,s.Readable),c.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==l.DONE)break;try{n=new r.VBArray(t.responseBody).toArray()}catch(e){}if(null!==n){e.push(new i(n));break}case"text":try{n=t.responseText}catch(t){e._mode="text:vbarray";break}if(n.length>e._pos){var o=n.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new i(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);e.push(a)}else e.push(o,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==l.DONE||!t.response)break;n=t.response,e.push(new i(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==l.LOADING||!n)break;e.push(new i(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==l.LOADING)break;var c=new r.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new i(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(n)}e._xhr.readyState===l.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,n(21),n(16).Buffer,n(10))},function(e,t,n){(t=e.exports=n(80)).Stream=t,t.Readable=t,t.Writable=n(83),t.Duplex=n(24),t.Transform=n(84),t.PassThrough=n(174)},function(e,t,n){"use strict";(function(t,i){var r=n(32).nextTick;e.exports=y;var o,a=n(66);y.ReadableState=b;n(57).EventEmitter;var s=function(e,t){return e.listeners(t).length},l=n(81),c=n(39).Buffer,d=t.Uint8Array||function(){};var u=n(23);u.inherits=n(14);var h=n(171),p=void 0;p=h&&h.debuglog?h.debuglog("stream"):function(){};var f,g=n(172),m=n(82);u.inherits(y,l);var v=["error","close","destroy","pause","resume"];function b(e,t){e=e||{};var i=t instanceof(o=o||n(24));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,a=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=n(63).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function y(e){if(o=o||n(24),!(this instanceof y))return new y(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function w(e,t,n,i,r){var o,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,S(e)}(e,a)):(r||(o=function(e,t){var n;i=t,c.isBuffer(i)||i instanceof d||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var i;return n}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):k(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?k(e,a,t,!1):T(e,a)):k(e,a,t,!1))):i||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function k(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&S(e)),T(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=c.from(e,t),t=""),n=!0),w(this,e,t,!1,n)},y.prototype.unshift=function(e){return w(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return f||(f=n(63).StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};var x=8388608;function _(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r(C,e):C(e))}function C(e){p("emit readable"),e.emit("readable"),P(e)}function T(e,t){t.readingMore||(t.readingMore=!0,r(M,e,t))}function M(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function I(e){p("readable nexttick read 0"),e.read(0)}function D(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),P(e),t.flowing&&!t.reading&&e.read(0)}function P(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function A(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,i=1,r=n.data;e-=r.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?r+=o:r+=o.slice(0,e),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}(e,t):function(e,t){var n=c.allocUnsafe(e),i=t.head,r=1;i.data.copy(n),e-=i.data.length;for(;i=i.next;){var o=i.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0===(e-=a)){a===o.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=o.slice(a));break}++r}return t.length-=r,n}(e,t);return i}(e,t.buffer,t.decoder),n);var n}function E(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r(L,t,e))}function L(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function N(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?E(this):S(this),null;if(0===(e=_(e,t))&&t.ended)return 0===t.length&&E(this),null;var i,r=t.needReadable;return p("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",r=!0),t.ended||t.reading?p("reading or ended",r=!1):r&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=_(n,t))),null===(i=e>0?A(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&E(this)),null!==i&&this.emit("data",i),i},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,t);var l=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?d:y;function c(t,i){p("onunpipe"),t===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,p("cleanup"),e.removeListener("close",v),e.removeListener("finish",b),e.removeListener("drain",u),e.removeListener("error",m),e.removeListener("unpipe",c),n.removeListener("end",d),n.removeListener("end",y),n.removeListener("data",g),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function d(){p("onend"),e.end()}o.endEmitted?r(l):n.once("end",l),e.on("unpipe",c);var u=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,P(e))}}(n);e.on("drain",u);var h=!1;var f=!1;function g(t){p("ondata"),f=!1,!1!==e.write(t)||f||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==N(o.pipes,e))&&!h&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function m(t){p("onerror",t),y(),e.removeListener("error",m),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",b),y()}function b(){p("onfinish"),e.removeListener("close",v),y()}function y(){p("unpipe"),n.unpipe(e)}return n.on("data",g),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",v),e.once("finish",b),e.emit("pipe",n),o.flowing||(p("pipe resume"),n.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,n);return this}var a=N(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},y.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&S(this):r(I,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r(D,e,t))}(this,e)),this},y.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(p("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){(p("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r)||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<v.length;o++)e.on(v[o],this.emit.bind(this,v[o]));return this._read=function(t){p("wrapped _read",t),i&&(i=!1,e.resume())},this},y._fromList=A}).call(this,n(10),n(21))},function(e,t,n){e.exports=n(57).EventEmitter},function(e,t,n){"use strict";var i=n(32).nextTick;function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i(r,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";(function(t,i,r){var o=n(32).nextTick;function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;e.entry=null;for(;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=b;var s,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:o;b.WritableState=v;var c=n(23);c.inherits=n(14);var d={deprecate:n(117)},u=n(81),h=n(39).Buffer,p=r.Uint8Array||function(){};var f,g=n(82);function m(){}function v(e,t){s=s||n(24),e=e||{};var i=t instanceof s;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,c=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(c||0===c)?c:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,r){--t.pendingcb,n?(o(r,i),o(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(r(i),e._writableState.errorEmitted=!0,e.emit("error",i),S(e,t))}(e,n,i,t,r);else{var a=x(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||k(e,n),i?l(w,e,n,a,r):w(e,n,a,r)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function b(e){if(s=s||n(24),!(f.call(b,this)||this instanceof s))return new b(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function y(e,t,n,i,r,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function w(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),S(e,t)}function k(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var s=0,l=!0;n;)r[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;r.allBuffers=l,y(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,d=n.encoding,u=n.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,d,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var n=x(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(b,u),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===b&&(e&&e._writableState instanceof v)}})):f=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,n){var i,r=this._writableState,a=!1,s=!r.objectMode&&(i=e,h.isBuffer(i)||i instanceof p);return s&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=m),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),o(t,n)}(this,n):(s||function(e,t,n,i){var r=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),o(i,a),r=!1),r}(this,r,e,n))&&(r.pendingcb++,a=function(e,t,n,i,r,o){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n));return t}(t,i,r);i!==a&&(n=!0,r="buffer",i=a)}var s=t.objectMode?1:i.length;t.length+=s;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,s,i,r,o);return l}(this,r,s,e,t,n)),a},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||k(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},b.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?o(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(21),n(116).setImmediate,n(10))},function(e,t,n){"use strict";e.exports=a;var i=n(24),r=n(23);function o(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);i.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){l(e,t,n)})):l(this,null,null)}function l(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}r.inherits=n(14),r.inherits(a,i),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){(function(e,i){var r;/*! https://mths.be/punycode v1.4.0 by @mathias */!function(o){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof i&&i;a.global!==a&&a.window!==a&&a.self;var s,l=2147483647,c=36,d=1,u=26,h=38,p=700,f=72,g=128,m="-",v=/^xn--/,b=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=c-d,x=Math.floor,_=String.fromCharCode;function S(e){throw new RangeError(w[e])}function C(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function T(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+C((e=e.replace(y,".")).split("."),t).join(".")}function M(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function I(e){return C(e,(function(e){var t="";return e>65535&&(t+=_((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=_(e)})).join("")}function D(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function P(e,t,n){var i=0;for(e=n?x(e/p):e>>1,e+=x(e/t);e>k*u>>1;i+=c)e=x(e/k);return x(i+(k+1)*e/(e+h))}function A(e){var t,n,i,r,o,a,s,h,p,v,b,y=[],w=e.length,k=0,_=g,C=f;for((n=e.lastIndexOf(m))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&S("not-basic"),y.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<w;){for(o=k,a=1,s=c;r>=w&&S("invalid-input"),((h=(b=e.charCodeAt(r++))-48<10?b-22:b-65<26?b-65:b-97<26?b-97:c)>=c||h>x((l-k)/a))&&S("overflow"),k+=h*a,!(h<(p=s<=C?d:s>=C+u?u:s-C));s+=c)a>x(l/(v=c-p))&&S("overflow"),a*=v;C=P(k-o,t=y.length+1,0==o),x(k/t)>l-_&&S("overflow"),_+=x(k/t),k%=t,y.splice(k++,0,_)}return I(y)}function E(e){var t,n,i,r,o,a,s,h,p,v,b,y,w,k,C,T=[];for(y=(e=M(e)).length,t=g,n=0,o=f,a=0;a<y;++a)(b=e[a])<128&&T.push(_(b));for(i=r=T.length,r&&T.push(m);i<y;){for(s=l,a=0;a<y;++a)(b=e[a])>=t&&b<s&&(s=b);for(s-t>x((l-n)/(w=i+1))&&S("overflow"),n+=(s-t)*w,t=s,a=0;a<y;++a)if((b=e[a])<t&&++n>l&&S("overflow"),b==t){for(h=n,p=c;!(h<(v=p<=o?d:p>=o+u?u:p-o));p+=c)C=h-v,k=c-v,T.push(_(D(v+C%k,0))),h=x(C/k);T.push(_(D(h,0))),o=P(n,w,i==r),n=0,++i}++n,++t}return T.join("")}s={version:"1.3.2",ucs2:{decode:M,encode:I},decode:A,encode:E,toASCII:function(e){return T(e,(function(e){return b.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return T(e,(function(e){return v.test(e)?A(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()}).call(this,n(71)(e),n(10))},function(e,t,n){var i,r;
/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */!function(o,a){"use strict";e.exports?e.exports=a():void 0===(r="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=r)}(0,(function(e){"use strict";var t=e&&e.IPv6;return{best:function(e){var t,n,i=e.toLowerCase().split(":"),r=i.length,o=8;for(""===i[0]&&""===i[1]&&""===i[2]?(i.shift(),i.shift()):""===i[0]&&""===i[1]?i.shift():""===i[r-1]&&""===i[r-2]&&i.pop(),-1!==i[(r=i.length)-1].indexOf(".")&&(o=7),t=0;t<r&&""!==i[t];t++);if(t<o)for(i.splice(t,1,"0000");i.length<o;)i.splice(t,0,"0000");for(var a=0;a<o;a++){n=i[a].split("");for(var s=0;s<3&&("0"===n[0]&&n.length>1);s++)n.splice(0,1);i[a]=n.join("")}var l=-1,c=0,d=0,u=-1,h=!1;for(a=0;a<o;a++)h?"0"===i[a]?d+=1:(h=!1,d>c&&(l=u,c=d)):"0"===i[a]&&(h=!0,u=a,d=1);d>c&&(l=u,c=d),c>1&&i.splice(l,c,""),r=i.length;var p="";for(""===i[0]&&(p=":"),a=0;a<r&&(p+=i[a],a!==r-1);a++)p+=":";return""===i[r-1]&&(p+=":"),p},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}}))},function(e,t,n){var i,r;
/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */!function(o,a){"use strict";e.exports?e.exports=a():void 0===(r="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=r)}(0,(function(e){"use strict";var t=e&&e.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var i=e.lastIndexOf(".",t-1);if(i<=0||i>=t-1)return!1;var r=n.list[e.slice(t+1)];return!!r&&r.indexOf(" "+e.slice(i+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(e.lastIndexOf(".",t-1)>=0)return!1;var i=n.list[e.slice(t+1)];return!!i&&i.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var i=e.lastIndexOf(".",t-1);if(i<=0||i>=t-1)return null;var r=n.list[e.slice(t+1)];return r?r.indexOf(" "+e.slice(i+1,t)+" ")<0?null:e.slice(i+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return n}))},function(e,t,n){"use strict";e.exports=u;var i,r=n(18),o=r.LongBits,a=r.base64,s=r.utf8;function l(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function c(){}function d(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}function h(e,t,n){t[n]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function f(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=r.Buffer?function(){return(u.create=function(){return new i})()}:function(){return new u},u.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(u.alloc=r.pool(u.alloc,r.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new l(e,t,n),this.len+=t,this},p.prototype=Object.create(l.prototype),p.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(f,10,o.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=o.from(e);return this._push(f,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(f,t.length(),t)},u.prototype.bool=function(e){return this._push(h,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=o.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var m=r.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(r.isString(e)){var n=u.alloc(t=a.length(e));a.decode(e,n,0),e=n}return this.uint32(t)._push(m,t,e)},u.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(h,1,0)},u.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new l(c,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(e){i=e}},function(e,t,n){"use strict";e.exports=l;var i,r=n(18),o=r.LongBits,a=r.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,d="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")};function u(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw s(this,8);return new o(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}l.create=r.Buffer?function(e){return(l.create=function(e){return r.Buffer.isBuffer(e)?new i(e):d(e)})(e)}:d,l.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return h(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|h(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},l.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){i=e;var t=r.Long?"toLong":"toNumber";r.merge(l.prototype,{int64:function(){return u.call(this)[t](!1)},uint64:function(){return u.call(this)[t](!0)},sint64:function(){return u.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},function(e,t,n){"use strict";t.extend=function(e){var t,n,r,o,a=Array.prototype.slice.call(arguments,1);for(t=0,n=a.length;t<n;t+=1)if(r=a[t])for(o in r)i.call(r,o)&&(e[o]=r[o]);return e};var i=Object.prototype.hasOwnProperty;t.hop=i},function(e,t,n){var i=n(72),r=n(147),o=n(125),a="[object Object]",s=Function.prototype,l=Object.prototype,c=s.toString,d=l.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!o(e)||i(e)!=a)return!1;var t=r(e);if(null===t)return!0;var n=d.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==u}},function(e,t){e.exports=canvasToBlob},function(e,t,n){var i,r,o=n(47),a=n(48),s=0,l=0;e.exports=function(e,t,n){var c=t&&n||0,d=t||[],u=(e=e||{}).node||i,h=void 0!==e.clockseq?e.clockseq:r;if(null==u||null==h){var p=o();null==u&&(u=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=r=16383&(p[6]<<8|p[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:l+1,m=f-s+(g-l)/1e4;if(m<0&&void 0===e.clockseq&&(h=h+1&16383),(m<0||f>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,l=g,r=h;var v=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;d[c++]=v>>>24&255,d[c++]=v>>>16&255,d[c++]=v>>>8&255,d[c++]=255&v;var b=f/4294967296*1e4&268435455;d[c++]=b>>>8&255,d[c++]=255&b,d[c++]=b>>>24&15|16,d[c++]=b>>>16&255,d[c++]=h>>>8|128,d[c++]=255&h;for(var y=0;y<6;++y)d[c+y]=u[y];return t||a(d)}},function(e,t,n){var i=n(47),r=n(48);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||r(a)}},function(e,t,n){var i=n(28),r=n(103),o=n(102),a=n(245)("src"),s=n(594),l=(""+s).split("toString");n(60).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||r(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||r(n,a,e[t]?""+e[t]:l.join(String(t)))),e===i?e[t]=n:s?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t,n){var i=n(205);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(9),r=n(29),o=n(205),a=/"/g,s=function(e,t,n,i){var r=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(i).replace(a,"&quot;")+'"'),s+">"+r+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),i(i.P+i.F*r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3)],void 0===(r=function(e,t,n,i){"use strict";function r(e){if(!e)throw new Error("Argument Error: Required data parameter must be non-null");this._init()}function o(e){r.prototype._init.call(this,e)}return t.extend(r.prototype,{_init:function(e){this.data=e,this.links={},this.links.preview={},this.links.original={},this.links.thumb={},this.isDir=!1,this._parseData()},_parseData:function(){},getOriginalURL:function(){return this._sanitizeURL(this.links.original.href)},getPreviewURL:function(){return this._sanitizeURL(this.links.preview.href)},getThumbURL:function(){return this._sanitizeURL(this.links.thumb.href)},getFolderName:function(){if(this.links.folder)return this._sanitizeURL(this.links.folder.filename)},getFolderPath:function(){if(this.links.folder)return this._sanitizeURL(this.links.folder.path)},isDirectory:function(){return this.isDir},_sanitizeURL:function(e){return e},hasCover:function(){return!1},getFolderLabel:function(){return this.getFolderName()},getCover:function(){var e=i.defer();return e.reject("no cover available"),e.promise},getThumbHoverLabel:function(){return""}}),r.createFolderItem=function(e,t){return new o({path:t})},t.extend(o.prototype,r.prototype,{_parseData:function(){this.isDir=!0,this.links.folder={},this.links.folder.filename=this.data.path,this.links.folder.path=this.data.path}}),r}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(36)],void 0===(r=function(e,t,n,i,r){"use strict";return i.Model.extend({setFontDataFromSparkFontDefn:function(e,t,n){this._fontData=this._fontData||{},this._fontData.source="spark-provided",e.subgroup||console.warn("unexpected fontDefn structure",e),this._fontData.lookupKey=e.face.lookupKey,this._fontData.faceName=e.face.name,this._fontData.subgroupName=e.subgroup.name,this._fontData.tkPreviewId=e.subgroup.typekitPreviewId,this._fontData.tkVariation=e.face.typekitKey,this._fontData.tkSubgroupKitId=e.subgroup.typekitSubgroupKitId,this._fontData.cssName=e.subgroup.cssName,this._fontData.weight=e.face.metrics.weight,this._fontData.style=e.face.metrics.style,this._fontData.noRendition=!!n,t&&(this._fontData.metrics=e.face.metrics),this._name=e.subgroup.name+" "+e.face.name},setFontDataFromTypekitSyncInfo:function(e){this._fontData=this._fontData||{},this._fontData.source="tk-synced",this._fontData.lookupKey="tk-"+e.id,this._fontData.subgroupName=e.family.name,this._fontData.tkPreviewId=e.family.web_id,this._fontData.tkVariation=[e.font.web.fvd],this._fontData.tkVariationId=e.id;var t=e.family.css_font_stack.split(",")[0].replace(/['"]/g,"").replace(/^\s*/,"").replace(/\s*$/,"");this._fontData.cssName=t,this._fontData.weight=e.font.web.weight,this._fontData.style=e.style,this._name=e.name},isDefn:function(){return!0},source:function(){return this.getValueProp("source")},isCustomFont:function(){return"user-uploaded"==this.source()},isSparkFont:function(){return"spark-provided"==this.source()},getValueProp:function(e,t){return this._fontData&&this._fontData[e]?this._fontData[e]:t||""},friendlyName:function(e){var t=this._name||"Undefined";return e?-1!=t.search(/^clarendon/i)||-1!=t.search(/^raleway/i)?t.split(" ")[0]:-1!=t.search(/local brewery four/i)?t.split(" ").slice(0,3).join(" "):t.split(" ").slice(0,2).join(" "):t},subgroupName:function(){return this.getValueProp("subgroupName")},faceName:function(){return this.getValueProp("faceName")},lookupKey:function(){return this.getValueProp("lookupKey")},uiKey:function(){return this.lookupKey()},getMetricsAsync:function(){return this.isCustomFont()?n.resolve(this.getMetrics()):this.getMetricsFromRegistry()},getMetrics:function(){return this.getValueProp("metrics")},getMetricsFromRegistry:function(){return r.getFontRegistry().then(function(e){return e.facesByKey[this.lookupKey()].face.metrics}.bind(this))},tkPreviewId:function(){return this.getValueProp("tkPreviewId")},tkVariation:function(){return this.getValueProp("tkVariation")},tkVariationId:function(){return this.getValueProp("tkVariationId")},tkSubgroupKitId:function(){return this.getValueProp("tkSubgroupKitId")},cssName:function(){return this.getValueProp("cssName")},cssNameForPreview:function(){return this.cssName()},fontStyle:function(){return this.getValueProp("style","normal")},fontWeight:function(){return this.getValueProp("weight","400")},fontStyleFromTkVariation:function(){return{n:"normal",i:"italic"}[this.tkVariation().split("")[0]]},fontWeightFromTkVariation:function(){var e=this.tkVariation().split(""),t=parseInt(e[1]);return t<1&&(t=1),t>9&&(t=9),100*t},$cssRendition:function(e,i,o,a){var s;if(this.isSparkFont()?this.getValueProp("noRendition")||(s=o?n.resolve("/spark-fonts/renditions/families/"+this.lookupKey()+".png"):a?n.resolve("/spark-fonts/renditions/"+this.lookupKey()+".png"):n.resolve("/spark-fonts/renditions/face/"+this.lookupKey()+".png")):this.isCustomFont()&&r.ENABLE_UPLOADED_FONTS_RENDITIONS&&(s=this.getRenditionHrefAsync(null,o,a)),s){var l=!1,c=!1,d=new Image;t.delay((function(){c||e.addClass("font-loading")}),50),s.then(function(n){d.onload=function(){l||(c=!0,e.css({"background-image":"url('"+n+"')"}),e.removeClass("font-loading"))},d.onerror=function(){l=!0,i(),e.removeClass("font-loading")}.bind(this),t.delay(function(){c||(l=!0,i(),e.removeClass("font-loading"))}.bind(this),2e3),d.src=n}.bind(this)).done()}else i()},$css:function(e){e.css({"font-family":this.cssNameForPreview(),"font-style":this.fontStyle(),"font-weight":this.fontWeight()})}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(8),n(112),n(6),n(5),n(4)],void 0===(r=function(e,t,n,i,r,o,a,s,l){"use strict";var c=o.LibraryImageLinksModel,d="result_columns%5B%5D=title&result_columns%5B%5D=is_licensed&result_columns%5B%5D=content_type&result_columns%5B%5D=thumbnail_160_url&result_columns%5B%5D=thumbnail_160_width&result_columns%5B%5D=thumbnail_160_height&result_columns%5B%5D=comps&result_columns%5B%5D=details_url&result_columns%5B%5D=creator_name&result_columns%5B%5D=id&result_columns%5B%5D=premium_level_id",u={Standard:"royalty_free_standard",Extended:"royalty_free_extended"};function h(e){this.result=null,this._reachedEnd=!1,this.collection=new n.Collection,this.collection.model=c,this._searchAPI=e||h.searchPath,this._lastOpts=null}function p(e,t){if(!e)throw new Error("Argument Error: Required data parameter must be non-null");this.data=e,this._items=[],this._modelAttrs=[],this.filter=t,this._parseData()}function f(e){if(!e)throw new Error("Argument Error: Required data parameter must be non-null");this.data=e,this.links={},this._parseData()}function g(e){return!!(e.comps&&e.comps.Standard&&e.comps.Standard.url||1===e.media_type_id||2===e.media_type_id)}return h.apiHost=l.stockApiHost,h.searchPath="/Rest/Media/1/Search/Files",h.infoPath="/api/v1/assets/",h.profilePath="/Rest/Libraries/1/Member/Profile",h.itemLicensePath="/Rest/Libraries/1/Content/License",h.licenseHistoryPath="/Rest/Libraries/1/Member/LicenseHistory",h.bulkMetadataPath="/Rest/Media/1/Files",h.licenseHistorySearchQuery="<<<[[[***LICENSE HISTORY***]]]>>>",t.extend(h.prototype,{search:function(e){this.result=null;var n={page:1,size:30,asset_type:"image",image_filter:[],source:[]};this._searchAPI===h.searchPath&&(n.query="landscape");var i=this._getParams(n,e),r=e.success,o=e.error;function s(t){return!(e.blockUnlicensedPremium&&!t.is_licensed&&t.data.premium_level_id>1)&&(!e.image_filter||!e.image_filter.length||e.image_filter.indexOf(t.links.original.type)>=0)}var l=h.apiHost+this._searchAPI;this._lastOpts=t.extend({},i,e);i.page>1&&i.page;var c,u={"search_parameters[offset]":(i.page-1)*i.size,"search_parameters[limit]":i.size};return this._searchAPI===h.licenseHistoryPath?c="result_columns%5B%5D=thumbnail_160_url&result_columns%5B%5D=thumbnail_160_width&result_columns%5B%5D=thumbnail_160_height":(u["search_parameters[words]"]=i.query,c=d),a.ajax({url:l+"?"+c,data:u,beforeSend:function(e){return e.setRequestHeader("X-api-key",a.apiKey),e.setRequestHeader("X-Product",a.apiKey),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done(function(e,n,a){var l=null;if(!e||t.isEmpty(e))l=new Error("No data received");else if(e.error_code)l=new Error(e.message);else try{this.result=new p(e,"image"===i.asset_type?s.bind(this):null),this.result.getLength()?(this.offset+=e.files.length,this.collection.reset(this.result._modelAttrs)):this._reachedEnd=!0}catch(e){l=e}l?o&&o(a,"error",l):r&&r(this.result,n,a)}.bind(this)).fail(o)},searchNextSet:function(e){return this._lastOpts.page++,e=t.extend({add:!0},this._lastOpts,e),this.search(e)},reachedEnd:function(){return this._reachedEnd},_getParams:function(e,n){if(e=t.extend({},e),n){var i=[];for(var r in e)i.push(r);i.unshift(n);var o=t.pick.apply(t,i);e=t.extend(e,o)}return e},getLength:function(){return this.collection.length},at:function(e){return this.collection.at(e)}}),t.extend(p.prototype,{_parseData:function(){for(var e=this.data.files,t=0,n=e.length;t<n;t++){var i=e[t];if(g(i)){var r=new f(i);if(!this.filter||this.filter(r)){var o=r.getThumbURL(),a=r.getPreviewURL(),s=r.getOriginalURL();this._items.push(r),this._modelAttrs.push({source_id:i.id,title:i.title,mimeType:r.getMimeType(),image_url:s||a||o,preview_url:a||s||o,thumb_url:o||a||s})}}}},getLength:function(){return this._items.length},at:function(e){return this._items[e]}}),t.extend(f.prototype,{_parseData:function(){this.links.original=this.links.original||{},this.links.preview=this.links.preview||{},this.links.thumb=this.links.thumb||{},this.data.comps&&(this.links.original.href=this.data.comps.Standard.url,this.links.preview.href=this.data.comps.Standard.url,this.links.original.height=this.data.comps.Standard.height,this.links.original.width=this.data.comps.Standard.width,this.links.preview.height=this.data.comps.Standard.height,this.links.preview.width=this.data.comps.Standard.width),this.links.thumb.href=this.data.thumbnail_160_url,this.links.thumb.height=this.data.thumbnail_160_height,this.links.thumb.width=this.data.thumbnail_160_width,this.is_licensed=this.data.is_licensed||this.data.license,this.links.thumb.type=this.links.preview.type=this.links.original.type=this.data.content_type},setOriginalLinkFields:function(e){this.links.licensed?(e.link=this._sanitizeURL(this.links.licensed.url),e.height=this.links.licensed.height,e.width=this.links.licensed.width):(e.link=this._sanitizeURL(this.links.original.href),e.height=this.links.original.height,e.width=this.links.original.width)},getOriginalURL:function(){var e=this.links.licensed&&this.links.licensed.url||this.links.original.href;return this._sanitizeURL(e)},getPreviewURL:function(){return this._sanitizeURL(this.links.preview.href)},getThumbURL:function(){return this._sanitizeURL(this.links.thumb.href)},getMimeType:function(){return this.links.original.type},_sanitizeURL:function(e){return e},getAspect:function(){return{width:this.links.thumb.width,height:this.links.thumb.height}},getThumbHoverLabel:function(){return this.is_licensed&&r.getString("imagepicker-stock-licensed-image-hover-label")||""}}),h.addLocaleToParams=function(e){var t=a.getUserCountryInfo();t&&(e.locale=t.locale)},h.getLicensesAvailable=function(){var e=i.defer(),t=h.apiHost+h.profilePath,n={};return h.addLocaleToParams(n),a.ajax({url:t,data:n,beforeSend:function(e){return e.setRequestHeader("X-api-key",a.apiKey),e.setRequestHeader("X-Product",a.apiKey),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done((function(t,n,i){var r=t.available_entitlement?t.available_entitlement.quota:0,o=!!t.purchase_options&&t.purchase_options.requires_checkout,a=t.purchase_options&&"not_possible"===t.purchase_options.state,s=t.purchase_options&&t.purchase_options.url||!1,l=t.purchase_options&&t.purchase_options.message;marvel.logger.debug("Stock profile: ",t),e.resolve({numLicenses:r,requiresCheckout:o,notAllowedToPurchase:a,purchaseUrl:s,purchaseMessage:l})})).fail((function(t){marvel.logger.error("error retrieving available licenses",t),e.reject(t)})),e.promise},h.licenseItem=function(e){var t=i.defer(),n=h.apiHost+h.itemLicensePath,r={content_id:e};return h.addLocaleToParams(r),a.ajax({url:n,data:r,beforeSend:function(e){return e.setRequestHeader("X-api-key",a.apiKey),e.setRequestHeader("X-Product",a.apiKey),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done((function(n){var i=n.contents[e],r={url:i.purchase_details.url,licenseType:u[i.purchase_details.license],width:i.purchase_details.width,height:i.purchase_details.height,mimeType:i.purchase_details.content_type,thumb:i.thumbnail};t.resolve(r)})).fail((function(e){marvel.logger.error("stock request failed to license:"+e.status,{response:e.responseJSON||e.responseText,data:r}),t.reject(e)})),t.promise},h.getStockAssetDetailsUrl=function(e){return h.getItemInfo(e,{params:["details_url"]}).then((function(e){return e.details_url}),(function(e){return console.error("could not get url for stock page",e),i.reject(e)}))},h.getItemInfo=function(e,t){t=t||{};var n=i.defer(),r=h.apiHost+h.searchPath,o={"search_parameters[media_id]":e,"search_parameters[offset]":0,"search_parameters[limit]":1},s="";return s=t.params?"result_columns%5B%5D="+t.params.join("&result_columns%5B%5D="):d,h.addLocaleToParams(o),marvel.logger.info("AdobeStockRequest.getItemInfo",{id:e}),a.ajax({url:r+"?"+s,data:o,beforeSend:function(e){return e.setRequestHeader("X-api-key",a.apiKey),e.setRequestHeader("X-Product",a.apiKey),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done((function(e,t,i){if(!e||!e.files||!e.files[0]){var r=i&&i.getResponseHeader("x-request-id"),o=i&&i.responseText,a=i&&i.status;marvel.logger.error("AdobeStockRequest.getItemInfo returned an empty response?",{status:a,"x-request-id":r,response:o,resultData:JSON.stringify(e)})}var s=e.files[0];n.resolve(s)})).fail((function(e){var t=e&&e.getResponseHeader("x-request-id");marvel.logger.error("AdobeStockRequest.getItemInfo failed",{status:e.status,"x-request-id":t,response:e.responseText}),n.reject(new Error("AdobeStockRequest::getItemInfo"))})),n.promise},h.batchGetItemsInfo=function(e,t){t=t||{};var n,r=function(e){var t=100,n=e.length,i=[],r=0;for(s.hasFeature("small-stock-batch")&&(t=5),r=0;r<n;r+=t)i.push(e.slice(r,r+t).join(","));return i}(e),o="";o=t.params?"result_columns%5B%5D="+t.params.join("&result_columns%5B%5D="):d;var l=a.getUserCountryInfo();return l&&(o+="&locale="+l.locale),n=r.map((function(e){return t=o,n=e,r=i.defer(),s=h.apiHost+h.bulkMetadataPath,marvel.logger.info("AdobeStockRequest.batchMetadataRequest",{idList:n}),a.ajax({url:s+"?"+t+"&ids="+n,beforeSend:function(e){return e.setRequestHeader("X-api-key",a.apiKey),e.setRequestHeader("X-Product",a.apiKey),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done((function(e,t,n){var i=n&&n.getResponseHeader("x-request-id"),o=n&&n.responseText,a=n&&n.status;e&&e.files?marvel.logger.info("AdobeStockRequest.batchMetadataRequest success",{status:a,"x-request-id":i,response:o}):marvel.logger.error("AdobeStockRequest.batchMetadataRequest returned an empty response?",{status:a,"x-request-id":i,response:o,resultData:JSON.stringify(e)}),r.resolve(e.files)})).fail((function(e){var t=e&&e.getResponseHeader("x-request-id");marvel.logger.error("AdobeStockRequest.batchMetadataRequest failed",{status:e.status,"x-request-id":t,response:e.responseText}),r.reject(new Error("AdobeStockRequest::batchMetadataRequest"))})),r.promise;var t,n,r,s})),i.all(n).then((function(t){var n=t.reduce((function(e,t){return e.concat(t)}),[]),i=e.length,r=n.length;return i!=r?marvel.logger.error("AdobeStockRequest.batchGetItemsInfo",{requested:i,requestedIds:e,returned:r,returnedIds:JSON.stringify(n)}):marvel.logger.info("AdobeStockRequest.batchGetItemsInfo",{requested:i,returned:r}),n}))},h.getRequestType=function(e){return e?e._searchAPI===h.licenseHistoryPath?"history":"search":void 0},h}.apply(t,i))||(e.exports=r)},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=0)}([function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({},{maxAttempts:5,delay:100},t);n.loggerFn&&(n.logger={info:function(e,t){n.loggerFn(t,e)}});var r=0,o=0;return function t(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e.apply(void 0,a).then((function(t){if(n.logger&&r>0){var i=n.logMessagePrefix||e.name;n.logger.info({failedAttempts:r,totalDelay:o},"".concat(i," succeeded after retries"))}return t})).catch((function(i){if(r++,n.hasOwnProperty("counter_cb")&&"function"==typeof n.counter_cb&&n.counter_cb(r),r===n.maxAttempts)return Promise.reject(i);if("function"==typeof n.shouldRetry&&!n.shouldRetry.apply(n,[i].concat(a)))throw i;var s,l=Math.floor(Math.pow(2,r-1)*n.delay*(Math.random()+1));if(o+=l,n.logger){var c=n.logMessagePrefix||e.name,d="".concat(c," failed ").concat(r," times, will try again in ").concat(l,"ms");n.logger.info(i,d)}return(s=l,new Promise((function(e){setTimeout(e,s)}))).then((function(){return t.apply(void 0,a)}))}))}}}])},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(51),r=n(244);e.exports=n(59)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(281),r=n(205);e.exports=function(e){return i(r(e))}},function(e,t,n){"use strict";function i(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},e.exports=i},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(7),n(22),n(12),n(20),n(222)],void 0===(r=function(e,t,n,i,r,o,a,s,l){"use strict";return i.View.extend({events:{"click .ddv-dropdown-button":"handleDropdownButtonClick","click .ddv-dropdown-line":"handleDropdownLineClick","mousedown .ddv-dropdown-overlay":"handleDropdownOverlayClick","mousemove .ddv-dropdown-line":"handleLineMouseMove","mouseover .ddv-dropdown-line":"handleLineMouseOver","mouseout .ddv-dropdown-line":"handleLineMouseOut"},initialize:function(e,n,i){this.containerElement$=e,this.options=n||{},this._parentView=i,this._debouncer=t.debounce(this.scrollCapture,100).bind(this),t.bindAll(this,t.functionsIn(this)),l.indexOf('buttontext="" data-button-text={{.}} buttontext=""')>-1&&(l=l.replace('buttontext="" data-button-text={{.}} buttontext=""','{{#buttonText}} data-button-text="{{.}}"{{/buttonText}}')),this.options.analytics&&(this._trackData={dropdownName:n.analytics.dropdownName||"genericDropDown",pageName:n.analytics.pageName||"unknown"})},swallowEvent:function(e,t){e.stopPropagation(),e.preventDefault(),t&&(this._swallowNextKeyup=!0)},handleKeyUp:function(e){this._swallowNextKeyup&&(this.swallowEvent(e),this._swallowNextKeyup=!1)},handleKeyDown:function(e){var t;if(this.isShowing()){switch(e.keyCode){case o.DOM_VK_RETURN:case o.DOM_VK_ENTER:case o.DOM_VK_ESCAPE:this.swallowEvent(e,!0),e.keyCode!==o.DOM_VK_ESCAPE?(this._itemUnderMouse&&!this._arrowMove&&this._itemUnderMouse!==this.selectedItem&&this.setValueItem(this._itemUnderMouse),this.closeAndApply()):this.closeAndCancel(e.keyCode),a.ignoreNextKeyup()||this._parentView&&"function"==typeof this._parentView.ignoreNextKeyup&&this._parentView.ignoreNextKeyup();break;case o.DOM_VK_TAB:this.options.alwaysReset?this.closeAndCancel(e.keyCode):this.closeAndApply();break;case o.DOM_VK_UP:t=-1;break;case o.DOM_VK_DOWN:t=1;break;default:1===e.key.length&&this.setCharacterItem(e.key)&&this.swallowEvent(e)}if(t){this.swallowEvent(e);var n,i=-1;!this._arrowMove&&this._itemUnderMouse?i=this._itemUnderMouse.index:this.selectedItem&&(i=this.selectedItem.index),1===t?-1!==i?(n=i+1)===this.items.length&&(n=this.options.wrapArrows?0:this.items.length-1):n=0:-1!==i?-1===(n=i-1)&&(n=this.options.wrapArrows?this.items.length-1:0):n=this.items.length-1,this._arrowMove=!0,this.items$.addClass("arrow-nav"),this.setValueItem(this.items[n])}}else if(!a.isShowing()||this._parentView===a)switch(e.keyCode){case o.DOM_VK_UP:case o.DOM_VK_DOWN:this.swallowEvent(e),this.setDropdownShowing(!0)}},_setElemDisplay:function(e,t){(t=t||"").jquery?(e.html(""),e.append(t)):e.text(t)},setupItems:function(n,i,r){var o=-1;this.items=[],this.items$=i,this.charItemSets={},t.each(n,function(n){o++,this.items.push(n),t.isUndefined(n.value)&&(n.value=n.id),n.item$=e(i[o]),n.item$[0].item=n,n.index=o;var r=n.item$.text().charAt(0).toLowerCase(),a=this.charItemSets[r];a||(a=this.charItemSets[r]=[]),a.push(n)}.bind(this)),this.options.multiple?this._setupMultipleForDisplay():(this.setValueItem(r),this.multipleSettings=null)},getValue:function(){return this.selectedItem?this.selectedItem.value:null},setCharacterItem:function(e){e=e.toLowerCase();var t=this.charItemSets[e];if(t){var n=0;return t.length>1&&this.selectedItem&&((n=t.indexOf(this.selectedItem))>-1?++n===t.length&&(n=0):n=0),this.setValueItem(t[n]),!0}return!1},setValueItem:function(e){this.selectedItem&&this.selectedItem.item$.removeClass("selected"),this.selectedItem=e,this.selectedItem&&this.selectedItem.item$.addClass("selected"),this.options.alwaysReset||this.options.buttonDisplayControlledByCaller||this.setButtonDisplay()},setButtonDisplay:function(e){if(t.isUndefined(e))if(this.multipleSettings)e=this._getMultiButtonString();else if(this.selectedItem){e=this.selectedItem.item$.data("button-text")||this.selectedItem.buttonDisplay||this.selectedItem.name}else e=this.options.placeholderText||"";this._setElemDisplay(this.dropdownButtonText$,e)},setValue:function(e){var n=t.find(this.items,(function(t){return t.value===e}));this.setValueItem(n)},setValues:function(e){t.each(this.options.items,(function(t){t.isSelected=-1!==e.indexOf(t.id)})),this.options.alwaysReset||this.options.buttonDisplayControlledByCaller||this.setButtonDisplay()},doClamps:function(t){this.dropdownBackground$.css("margin-top",0),this.dropdownBackground$.css("margin-left",0),this.dropdownBackground$.css("max-height","inherit"),this.dropdownBackground$.removeClass("center-vertical");var n=0,i=0,r=this.dropdownBackground$.css("height"),o=1*r.substring(0,r.length-2),a=e(window).height(),s=e(window).width(),l=Math.round(.01*s),c=Math.round(.01*a),d=a-2*c,u=this.dropdownBackground$[0].getBoundingClientRect(),h=this.alignTarget$[0].getBoundingClientRect(),p=h.bottom,f=h.left;u.top!==p&&(i=p-u.top,this.dropdownBackground$.css("margin-top",i)),u.left!==f&&(n=f-u.left,this.dropdownBackground$.css("margin-left",n)),(u=this.dropdownBackground$[0].getBoundingClientRect()).left<l?this.dropdownBackground$.css("margin-left",-(n+u.left)+l):u.right>s-l&&this.dropdownBackground$.css("margin-left",s-l-(-n+u.right)),o>d?(this.dropdownBackground$.addClass("center-vertical"),this.dropdownBackground$.css("max-height",d+"px"),u=this.dropdownBackground$[0].getBoundingClientRect(),this.dropdownBackground$.css("margin-top",i-(u.top-c))):(u=this.dropdownBackground$[0].getBoundingClientRect()).top<c?(this.dropdownBackground$.css("max-height",d+"px"),this.dropdownBackground$.css("margin-top",0)):u.bottom>a-c&&(this.dropdownBackground$.css("max-height",d+"px"),this.dropdownBackground$.css("margin-top",a-c-(-i+u.bottom)))},scrollCapture:function(t){this.isShowing()?this.doClamps(t):(this._debouncerEventsSet=!1,this._scrollParent$.off("scroll.positionmenu",this._debouncer),e(window).off("resize.positionmenu",this._debouncer))},_getComboDisplayStringFromStrings:function(e){var t="";if(e.length&&(t=e[0],e.length>1))if(2===e.length)t+=" & "+e[1];else{for(var n=1;n<e.length-1;n++)t+=", "+e[n];t+=", & "+e[e.length-1]}return t},_getMultiButtonString:function(){var e="";if(this.multipleSettings.allItem&&this.multipleSettings.allItem.isSelected)e=this.multipleSettings.allItem.buttonDisplay||this.multipleSettings.allItem.name;else{var n=[];if(t.each(this.options.items,(function(e){e.isSelected&&n.push(e)})),n.length)if(1===n.length)e=n[0].buttonDisplay||n[0].name;else{var i=[];t.each(n,(function(e){i.push(e.buttonDisplayMulti||e.buttonDisplay||e.name)})),e=this._getComboDisplayStringFromStrings(i)}}return e},_setupMultipleForDisplay:function(){var e=0;if(this.multipleSettings={initialItems:[]},t.each(this.items,function(t){t.isAllItem?this.multipleSettings.allItem=t:t.isSelected&&e++}.bind(this)),this.multipleSettings.allItem){var n=this.multipleSettings.allItem.isSelected||e===this.items.length-1;this.multipleSettings.allItem.isSelected=n,t.each(this.items,function(e){n&&!e.isAllItem&&(e.isSelected=!1),e.isSelected?(this.multipleSettings.initialItems[e.index]=e,e.item$.addClass("selected")):(this.multipleSettings.initialItems[e.index]=null,e.item$.removeClass("selected"))}.bind(this))}else t.each(this.items,function(e){e.isSelected?(this.multipleSettings.initialItems[e.index]=e,e.item$.addClass("selected")):(this.multipleSettings.initialItems[e.index]=null,e.item$.removeClass("selected"))}.bind(this));this.options.alwaysReset||this.options.buttonDisplayControlledByCaller||this.setButtonDisplay()},setDropdownShowing:function(t){window.marvel.currentDropdownShowing&&window.marvel.currentDropdownShowing!==this&&t&&window.marvel.currentDropdownShowing.closeAndCancel(),this._itemUnderMouse=null,t?(this.options.multiple&&this._setupMultipleForDisplay(),this.dropdownMain$.addClass("open"),this.dropdownBackground$.removeClass("hide"),this.dropdownOverlay$.removeClass("hide"),this.initialItem=this.selectedItem,this._arrowMove=!0,this.items$.addClass("arrow-nav"),this._waitingForFirstMouseMove=!0,this.doClamps(),this._debouncerEventsSet||(this._debouncerEventsSet=!0,this._scrollParent$.on("scroll.positionmenu",this._debouncer),e(window).on("resize.positionmenu",this._debouncer)),this.dropdownButton$.focus(),window.marvel.currentDropdownShowing=this,this.options.noKeyNav||(this._boundKeyEvents||(this._boundKeyEvents=!0,this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this)),e(document).on("keydown.ddv",this.handleKeyDown),e(document).on("keyup.ddv",this.handleKeyUp))):(this.dropdownBackground$.addClass("hide"),this.dropdownOverlay$.addClass("hide"),this.dropdownMain$.removeClass("open"),this.options.alwaysReset&&!this.options.multiple&&this.setValueItem(),this._debouncerEventsSet&&(this._debouncerEventsSet=!1,this._scrollParent$.off("scroll.positionmenu",this._debouncer),e(window).off("resize.positionmenu",this._debouncer)),window.marvel.currentDropdownShowing=null,this.options.noKeyNav||(e(document).off("keydown.ddv",this.handleKeyDown),e(document).off("keyup.ddv",this.handleKeyUp))),this.options.dropdownShowingCallback&&this.options.dropdownShowingCallback(t)},handleDropdownButtonClick:function(e){this.setDropdownShowing(!0),this._trackDropdownClick()},_trackDropdownClick:function(){if(this._trackData){var e=this._trackData.dropdownName+"DropdownClicked",t=this._trackData.pageName;r.trackEvent(e,{},t)}},_trackDropdownItemClick:function(e){if(this._trackData){var t=this._trackData.dropdownName+"DropdownItemClicked",n=this._trackData.pageName;r.trackEvent(t,{context:e},n)}},_trackDropdownListItemsSelected:function(e){if(this._trackData){var t=this._trackData.dropdownName+"DropdownItemsSelected",n=this._trackData.pageName;r.trackEvent(t,{context:e.join(",")},n)}},handleDropdownOverlayClick:function(e){this.closeAndCancel("overlayClick")},handleLineMouseMove:function(e){this._arrowMove?this._waitingForFirstMouseMove?this._waitingForFirstMouseMove=!1:(this._arrowMove=!1,this.items$.removeClass("arrow-nav"),this.options.alwaysReset&&this.setValueItem()):this._waitingForFirstMouseMove&&(this._waitingForFirstMouseMove=!1)},handleLineMouseOver:function(e){this._itemUnderMouse=e.target.item,this._arrowMove&&(this._arrowMove=!1,this.items$.removeClass("arrow-nav"),this.options.alwaysReset&&this.setValueItem())},handleLineMouseOut:function(e){this._itemUnderMouse=null,this._arrowMove&&(this._arrowMove=!1,this.items$.removeClass("arrow-nav"),this.setValueItem())},handleDropdownLineClick:function(e){var n=e.currentTarget.item;if(this.multipleSettings){if(n.isAllItem)n.isSelected=!0,n.item$.addClass("selected"),t.each(this.options.items,(function(e){e!==n&&(e.isSelected=!1,e.item$.removeClass("selected"))}));else if(n.isSelected=!n.isSelected,n.isSelected?n.item$.addClass("selected"):n.item$.removeClass("selected"),this.multipleSettings.allItem){var i=n.isSelected;i||(i=t.find(this.options.items,(function(e){return e.isSelected}))),i?(this.multipleSettings.allItem.item$.removeClass("selected"),this.multipleSettings.allItem.isSelected=!1):(this.multipleSettings.allItem.item$.addClass("selected"),this.multipleSettings.allItem.isSelected=!0)}}else this.setValueItem(n),this.closeAndApply()},closeAndApply:function(){if(this.multipleSettings){var e,n=[];this.multipleSettings.allItem&&this.multipleSettings.allItem.isSelected?(n.push(this.multipleSettings.allItem.value),e=!this.multipleSettings.initialItems[this.multipleSettings.allItem.index]):(t.each(this.options.items,function(t){t.isSelected?(n.push(t.value),this.multipleSettings.initialItems[t.index]||(e=!0)):this.multipleSettings.initialItems[t.index]&&(e=!0)}.bind(this)),this.multipleSettings.allItem&&n.length===this.options.items.length-1&&(this.multipleSettings.allItem.isSelected=!0,this.multipleSettings.allItem.item$.addClass("selected"),t.each(this.options.items,function(e){e!==this.multipleSettings.allItem&&(e.isSelected=!1,e.item$.removeClass("selected"))}.bind(this)),n=[this.multipleSettings.allItem.value],e=!this.multipleSettings.initialItems[this.multipleSettings.allItem.index])),this._trackDropdownListItemsSelected(n),e&&this.options.onchangeCallback(this,n),this.options.alwaysReset||this.options.buttonDisplayControlledByCaller||this.setButtonDisplay()}else this.selectedItem!==this.initialItem&&(this.initialItem=this.selectedItem,this.options.onchangeCallback(this,this.selectedItem&&this.selectedItem.value),this._trackDropdownItemClick(this.selectedItem.value));this.setDropdownShowing(!1)},closeAndCancel:function(e){this.multipleSettings&&e?this.closeAndApply():(this.selectedItem!==this.initialItem&&this.setValueItem(this.initialItem),this.setDropdownShowing(!1))},isShowing:function(){return!this.dropdownBackground$.hasClass("hide")},renderItems:function(e,t){this.options.items=e,this.options.defaultValue=t,this.render()},renderItemsMultiple:function(e){this.options.items=e,this.render()},render:function(){var n="";this.options.checkmarkStyle?n=this.options.checkmarkStyle:this.options.alwaysReset||(n="use-checkmark");var i,r={itemDataPrefix:"ddv-",itemClass:"ddv-dropdown-line",items:this.options.items,checkmarkStyle:n,buttonDataAuto:this.options.buttonDataAuto||"ddv-dropdown-button",buttonIcon:this.options.buttonHasBackgroundItem,buttonLabel:this.options.buttonLabel||""};this.options.buttonDisplayControlledByCaller?null!==this.options.defaultValue&&(i=t.find(r.items,function(e){return e.id===this.options.defaultValue}.bind(this))):this.options.alwaysReset?r.buttonDisplay=this.options.placeholderText||"":this.options.items&&null!==this.options.defaultValue&&(i=t.find(r.items,function(e){return e.id===this.options.defaultValue}.bind(this)))&&(r.buttonDisplay=i.buttonText||i.buttonDisplay||i.name);var o=s.to_html(l,r);this.$el.html(o),this.$el.addClass("dropdown-view-element"),this.containerElement$[0].appendChild(this.$el[0]),this._scrollParent$=this.options.scrollParent||e(window),this.dropdownMain$=this.$el.find(".ddv-dropdown"),this.dropdownBackground$=this.$el.find(".ddv-dropdown-bg"),this.dropdownButton$=this.$el.find(".ddv-dropdown-button"),this.options.buttonHasBackgroundItem?this.dropdownButtonText$=this.dropdownButton$.find(".ddv-dropdown-button-text-div"):this.dropdownButtonText$=this.dropdownButton$,this.options.multiple?this.dropdownButton$.addClass("has-multiple"):this.dropdownButton$.removeClass("has-multiple"),this.alignTarget$=this.options.alignTarget$||this.dropdownButton$,this.dropdownOverlay$=this.$el.find(".ddv-dropdown-overlay"),this.options.items&&this.setupItems(this.options.items,this.$el.find("."+r.itemClass),i),this.options.widthSetByStyle||setTimeout(function(){var e=this.containerElement$.width();this.dropdownBackground$.css("width",e)}.bind(this),0),this.options.elemHeightSetByStyle||setTimeout(function(){var e=this.containerElement$.height();e>0&&this.$el.css("height",e)}.bind(this),0)}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(6),n(11),n(43)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s,l,c=new o({color:"rebeccapurple",name:"marketingController"}),d=["spark-newsletter","tips-and-tricks","spark-newsletter-holdout","book-report-2018"];return l=n.Model.extend({_emailListForReferCode:{segment_landing_page_book_ad_1:"book-report-2018"},emailListSettings:{},_getBrowserStorage:function(){return this.browserStorage||(this.browserStorage=new a(window.sessionStorage)),this.browserStorage},showedNewsletterPitch:function(){this._showedNewsletterPitch=!0},setNewsletterOptedIn:function(){try{window.sessionStorage.setItem("dismissed-spark-newsletter-pitch","true"),window.localStorage.setItem("spark-newsletter-pitches","4")}catch(e){}},getEmailListForReferCode:function(){var e=this._getBrowserStorage().get("referCode");return e&&this._emailListForReferCode.hasOwnProperty(e)?this._emailListForReferCode[e]:null},newsletterOptedOut:function(){try{window.sessionStorage.setItem("dismissed-spark-newsletter-pitch","true");var e=parseInt(window.localStorage.getItem("spark-newsletter-pitches")||"1");e++,window.localStorage.setItem("spark-newsletter-pitches",String(e))}catch(e){}},resetNewsletterOptOut:function(){try{window.localStorage.setItem("spark-newsletter-pitches","1"),window.sessionStorage.setItem("dismissed-spark-newsletter-pitch","true")}catch(e){}},getModelForOptinViewIfUserCanReceiveEmail:function(e,i){if(!this.userQualifiesToReceiveEmail())return null;var o=t.assign({mode:e},i||{});return t.isUndefined(o.showGlobalMarketingChoice)&&(o.showGlobalMarketingChoice=!r.getMarketingChoiceForUser()),new n.Model(o)},userQualifiesToReceiveMarketing:function(){var e=!1,n=r.getUserEmail();if(!t.isEmpty(n)&&!r.isEnterprise()&&!r.isAutomatedTestUser()){var i=n.split("@");if(2===i.length){var o=i[1];e=!/(k12)|(usd)|(\.edu)|(\.ac)/.test(o.toLowerCase())}}return e},userQualifiesToReceiveEmail:function(){return"US"===r.getUserCountry()&&this.userQualifiesToReceiveMarketing()},shouldSeeNewsletterPitch:function(){var e;if(!this._showedNewsletterPitch)try{if(!("true"===window.sessionStorage.getItem("dismissed-spark-newsletter-pitch"))){try{e=parseInt(window.localStorage.getItem("spark-newsletter-pitches")||"1",10)}catch(t){e=1}if(e<=3&&this.userQualifiesToReceiveEmail())return this.getEmailListOptInStatus("sparknewsletter").then(function(t){return t&&"subscribed"===t.status?i.reject(new Error("MarketingControllerCls::shouldSeeNewsletterPitch")):e}.bind(this))}}catch(e){}return i.reject(new Error("MarketingControllerCls::shouldSeeNewsletterPitch"))},getSettingIfEmailList:function(e){return this.emailListSettings.hasOwnProperty(e)?{value:this.emailListSettings[e]}:null},emailListSettingsLoaded:function(){return this.statusesDeferred||(this.statusesDeferred=i.defer(),this.userQualifiesToReceiveEmail()?this._getAllEmailListSubscriptionStatuses().then(this._initEmailListSubscriptionStatuses.bind(this)).done():this.statusesDeferred.resolve("unqualifiedToReceiveEmail")),this.statusesDeferred.promise},_initEmailListSubscriptionStatuses:function(e){var n=[];t.each(e,function(e){var i,r,o;"fulfilled"===e.state?(r="subscribed"===(i=e.value).status,o=t.find(d,(function(e){return e.replace(/-/g,"")===i.listId})),this.emailListSettings[o]=r):"rejected"===e.state&&(c.error("email list subscription status failed to be initialized",e.reason),n.push(e.reason))}.bind(this)),t.isEmpty(n)?this.statusesDeferred.resolve("success"):this.statusesDeferred.resolve("unableToLoadEmailSettingsForQualifiedUser")},_getAllEmailListSubscriptionStatuses:function(){var e,n=[];return t.each(d,function(t){var r=t.replace(/-/g,"");e=s.getEmailListOptInStatus(r).then((function(e){return e.listId=r,e}),(function(e){return c.error("unable to get opt-in status for email list "+r,e),i.reject(e)})),n.push(e)}.bind(this)),i.allSettled(n)},getFilteredChanges:function(e){var n={},i={};return t.each(e,function(e,t){this.emailListSettings.hasOwnProperty(t)&&(n[t]={value:e,changed:this.emailListSettings[t]!==e},n[t].changed&&(i[t]=e,c.debug("MarketingController.getFilteredChanges differences has "+t+" with value "+e)))}.bind(this)),t.isEmpty(i)?{settings:n}:{settings:n,differences:i}},saveAndUpdateSettings:function(e){var n,r=[];return t.each(e,(function(e,t){if(d.indexOf(t)>-1){var o=t.replace(/-/g,"");n=s.updateEmailListOptInForUser(e,o).then((function(n){var i=e?"subscribed":"unsubscribed";return c.info("Updated Status of Email List: "+o+" to: "+i),{settingId:t,status:e}}),(function(e){return c.error("unable to update opt-in status for email list "+o,e),i.reject(e)})),r.push(n)}})),i.allSettled(r).then(function(e){var n=[];if(t.each(e,function(e){"fulfilled"===e.state?this.emailListSettings[e.value.settingId]=e.value.status:"rejected"===e.state&&(c.error("failed to save updated opt-in status for email list",e.reason),n.push(e.reason))}.bind(this)),n.length>0)return i.reject(n)}.bind(this))},_fetchEmailListOptinStatus:function(e){var t=i.defer();return r.isValid().then(function(){r.ajax({type:"GET",url:"/list/subscription-status/"+e,success:function(e,n,i){t.resolve(e)},error:function(e,n,i){t.reject(i)}})}.bind(this),(function(e){t.reject(e)})).done(),t.promise},getEmailListOptInStatus:function(e){return this._getBrowserStorage().get("spark-mrkt-subscription-"+e+"-status")?i.resolve({status:this._getBrowserStorage().get("spark-mrkt-subscription-"+e+"-status")}):this._fetchEmailListOptinStatus(e)},_saveOptInValue:function(e,t){var n="subscribe"===t?"subscribed":"unsubscribed";this._getBrowserStorage().set("spark-mrkt-subscription-"+e+"-status",n)},updateEmailListOptInForUser:function(e,t){var n=i.defer(),o=e?"subscribe":"unsubscribe";return r.isValid().then(function(){r.ajax({type:"GET",url:"/list/"+o+"/"+t,success:function(e,i,r){this._saveOptInValue(t,o),n.resolve(e)}.bind(this),error:function(e,t,i){n.reject(i)}.bind(this)})}.bind(this),function(e){n.reject(e)}.bind(this)),n.promise}}),s=new l}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(4)],void 0===(r=function(e){return!0===e.nr.disabled?{addPageAction:function(){},addRelease:function(){},addToTrace:function(){},finished:function(){},info:{},interaction:function(){var e={actionText:function(){return e},createTracer:function(){return e},end:function(){return e},getContext:function(){return e},ignore:function(){return e},onEnd:function(){return e},save:function(){return e},setAttribute:function(){return e},setName:function(){return e}};return e},noticeError:function(){},setCurrentRouteName:function(){},setCustomAttribute:function(){},setErrorHandler:function(){},setPageViewName:function(){}}:(window.newrelic&&window.newrelic.setCustomAttribute&&window.newrelic.setCustomAttribute("application.version",e.buildVersion),window.newrelic)}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";var i=n(29);e.exports=function(e,t){return!!e&&i((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(27),n(50),n(6),n(8)],void 0===(r=function(e,t,i,r,o,a,s,l){"use strict";return new(o.extend({typeName:"video",themeId:null,_projectById:{},_projectDeferById:{},getConfig:function(){return{syncGroup:"adobe-voice",scope:"voice",community:window.marvel.settings.voicec,newDocName:"My Video",doctype:"application/vnd.adobe.ginger.project+dcx",enabledFlagName:"enable-voice",legacyName:"Voice",displayName:"Video",templateSyncGroup:"adobe-voice-template",templateDCXType:"application/vnd.adobe.ginger.sptemplate+dcx"}},isBrowserSupported:function(){return!navigator.userAgent.match(/Trident\/(\d+[.]\d+)/)||!marvel.features.hasFeature("disable-video-for-unsupported-browsers")},getUnsupportedBrowserMessage:function(){var e=navigator.userAgent.toLowerCase(),t=/windows nt 6.1/.test(e),n=/windows nt 6.2/.test(e),i=/windows nt 6.3/.test(e);return t||n||i?"Spark Video uses some of the latest web magic that Internet Explorer does not support. Please switch to another modern browser like <a href='https://google.com/chrome' target='_blank'  class='confirm-dialog-link'>Chrome</a> or <a href='https://mozilla.org/firefox' target='_blank' class='confirm-dialog-link'>Firefox</a>.":"Spark Video uses some of the latest web magic that Internet Explorer does not support. Please switch to <strong>Microsoft Edge</strong> or another modern browser like <a href='https://google.com/chrome' target='_blank'  class='confirm-dialog-link'>Chrome</a> or <a href='https://mozilla.org/firefox' target='_blank' class='confirm-dialog-link'>Firefox</a>."},supportsAsyncPublish:function(){return marvel.features.hasFeature("share-video-async")},setProject:function(e){var t=e.get("uuid");this._projectById[t]=e,this.ensureProject(t),this._projectDeferById[t].resolve(e)},getProject:function(e){return this._projectById[e]},ensureProject:function(e){return this._projectDeferById[e]||(this._projectDeferById[e]=r.defer()),this._projectDeferById[e].promise},loadForShare:function(e,t){var n=r.defer(),i=r.defer();return this.lazyLoad(i),i.promise.then(function(){return this._loadProjectForPublish(e,t).then((function(){n.resolve()}),(function(e){n.reject(e)}))}.bind(this)),n.promise},setSnapiEndpoint:function(e){this._snapiEndpoint=e},getSnapiEndpoint:function(){if(this._snapiEndpoint)return this._snapiEndpoint;var e;try{e=localStorage.getItem("voice-debug-snapi")}catch(e){}return e&&t.startsWith(e,"http")?this._snapiEndpoint=e:this.needsPreviewSnapi()?this._snapiEndpoint=this.getSnapiBranch("preview"):this.needsSneakSnapi()?this._snapiEndpoint=this.getSnapiBranch("sneak"):this._snapiEndpoint="https://"+window.marvel.settings.snapi,this._snapiEndpoint},beforeCollaboration:function(t){var n=this.getSnapiEndpoint();if(this.getMetadata(t,!0).version>=12)return r();var i,o=n+"/project/"+t.id+"?minVer=12",a=n+"/project/"+t.id+"?xVer=1";return r.Promise(function(t,n){s.getAccessToken().then(function(r){i={authorization:"Bearer "+r,"x-api-key":"ginger_snap1","x-gw-ims-user-id":s.getProfile().userId},e.ajax({type:"GET",url:o,headers:i}).done(t).fail(n)}.bind(this))}.bind(this)).then((function(t){return r.Promise((function(n,r){i["Content-Type"]="application/json",i["x-user-region"]="us",e.ajax({type:"PUT",url:a,headers:i,data:JSON.stringify(t)}).done(n).fail(r)}))}))},needsPreviewSnapi:function(){return marvel.features.hasFeature("share-video-async")&&marvel.features.hasFeature("use-preview-snapi")},needsSneakSnapi:function(){return!1},getSnapiBranch:function(e){var n=window.marvel.settings.snapi;return t.includes(n,"snapi-dev")?"https://projectm-snapi-"+e+"-dev.adobe.io":t.includes(n,"snapi-stage")?"https://projectm-snapi-"+e+"-stage.adobe.io":"https://projectm-snapi-"+e+".adobe.io"},_loadProjectForPublish:function(e,t){var i=r.defer();return Promise.all([n.e(4),n.e("vendors~gs-app-ac-theme-editor~voice-web"),n.e("vendors~voice-web"),n.e(0),n.e("voice-web")]).then(function(r){var o=n(291),a=n(308),s=n(294),l=e.getEtag();this.getSnapiEndpoint(),o.isPublishOnly=!0,o.isPaidUser=marvel.features.hasFeature("entitle-brand-kit"),o.currentProjectETag=l;var c=new a({uuid:e.get("id"),name:e.get("name"),etag:l});c.registerWithApp(!0),s.getAuthToken().then((function(){t?i.resolve(c.loadAndUpdate()):i.resolve()}),(function(e){i.reject(e)}))}.bind(this).bind(null,n)).catch(n.oe),i.promise},_fetchStringsFromFile:function(t,n,i){var o="/ginger-snap/assets/locales/"+t+"/"+n[t][i];return r.Promise(function(r,a){e.getJSON(o,(function(e){r(e)})).promise().fail(function(e){console.error("Failed to load strings for: "+t+"/"+o),"en-US"!==o?this._fetchStringsFromFile("en-US",n,i).then(r):a(e)}.bind(this))}.bind(this))},_fetchLocaleStrings:function(e,t){return r.Promise(function(n,i){return r.all([this._fetchStringsFromFile(e,t,"strings"),this._fetchStringsFromFile(e,t,"storyArcs")]).spread(function(e,t){e.storyArcs=t,this._setStrings(e,t),n()}.bind(this))}.bind(this))},_getLocale:function(){var e=l.getLocale()||"en-US";try{var t=localStorage.getItem("voice-debug-locale");t&&(e=t)}catch(e){}return e},_fetchLocaleData:function(){var e=this._getLocale(),t=n(132);return this._fetchLocaleStrings(e,t).then((function(){n(122).setLocale(e)}))},cancelEditingSession:function(e){return this.ensureProject(e.id).then(function(e){return e.cancelLoad()}.bind(this))},_loadPixi:function(){return r.Promise((function(e){n.e("pixi").then(function(t){n(320),e()}.bind(this).bind(null,n)).catch(n.oe)}))},lazyLoad:function(e){Promise.all([n.e(4),n.e("vendors~gs-app-ac-theme-editor~voice-web"),n.e("vendors~voice-web"),n.e(0),n.e("voice-web")]).then(function(t){r.all([this._fetchLocaleData(),this._loadPixi()]).then(function(){var t=n(134),i=n(129),r=n(50);t.prototype.snapiServer=window.marvel.settings.snapi,this.setStorageImpl(r),this.setPublishImpl(i),this.setAppViewImplCls(t),e.resolve()}.bind(this))}.bind(this).bind(null,n)).catch(n.oe)},_setStrings:function(e){var i=n(68);t.extend(i,e)},usesContentModifiedEtags:function(){return!1},rebrandProject:function(){return r()},hasContentBeenUpdatedSincePublish:function(e,t){var i=this.getMetadata(e),r=!n(133).isPublishCurrent(i);return window.dbg&&dbg.log("hasContentBeenUpdatedSincePublish ret "+r),r},hasContentBeenUpdatedSinceDownload:function(e,t){var n=this.getMetadata(e);return!!(n.userModDate&&n.userModDate>t)},_getProjectInfo:function(e){return e.getDCXComposite().current.getChildWithAbsolutePath("/Project Info")},getMetadata:function(e,t){var n,i=this.getProject(e);i&&i.pageSequence&&!t?n=i.get("metadata"):n=this._getProjectInfo(e).getValue("ginger#data");return n},getThemeController:function(e){var t=r.defer();return Promise.all([n.e(4),n.e(0),n.e(1),n.e(7)]).then(function(e){this._fetchLocaleData().then((function(){t.resolve(n(300))}))}.bind(this).bind(null,n)).catch(n.oe),t.promise},isDocPublished:function(e){var t=!1;try{t=!!this.getMetadata(e).publishedVideoURL}catch(e){t=!1}return t},getCPAlias:function(e){return this.getMetadata(e).publishedVideoID},setCPAlias:function(e,t){return console.log("why call setCPAlias?"),r(!1)},getCPAssetId:function(e){return this.getCPAlias(e)},setCPAssetId:function(e,t){return console.log("why call setCPAssetId?"),r(!1)},resetPublishState:function(e){e.publishedVideoID="",e.publishedVideoURL="",e.publishedDate="0",e.publishedDuration="0",e.publishCount="0",e.videoContentChanged="1",e.isExported="0"},resetDocPublishData:function(e,t){e.saveChanges(function(n){var i=this._getProjectInfo(e),r=i.getValue("ginger#data");this.resetPublishState(r),i.setValue("ginger#data",r),t&&t.resolve()}.bind(this))},updateIsExported:function(e){return e.pull().then(function(){e.saveChanges(function(t){var n=this.getMetadata(e),i=this._getProjectInfo(e);n.isExported="1",i.setValue("ginger#data",n)}.bind(this))}.bind(this))},WIPresetDocPublishData:function(e,t){Promise.all([n.e(4),n.e("vendors~gs-app-ac-theme-editor~voice-web"),n.e("vendors~voice-web"),n.e(0),n.e("voice-web")]).then(function(i){var r=n(134),o=n(129),a=n(50);r.prototype.snapiServer=window.marvel.settings.snapi,r.prototype.mainCSS=window.marvel.settings.gsmaincss,this.setStorageImpl(a),this.setPublishImpl(o),this.setAppViewImplCls(r);var s=this._getProjectInfo(e),l=s.getValue("ginger#data");this.resetPublishState(l),s.setValue("ginger#data",l);var c=Globals.SNAPI_ENDPOINT+"/project/"+e.getValue("id"),d={method:"PUT",url:c+="?xVer="+Globals.XVER,useApiKey:!0,params:null,body:{metadata:l},requestHeaders:{"Content-Type":"application/json"},projectETagInOut:!0};XhrUtils.xhr(d).then(function(e){project.setSavedPageSequenceJson(pageSequenceJson),t&&t.resolve()}.bind(this),function(e){throw debug.log("put failed with",e.xhrData),e}.bind(this))}.bind(this).bind(null,n)).catch(n.oe)},postDuplicate:function(e){var t=r.defer();return this.resetDocPublishData(e,t),t.promise},setProjectName:function(e,t){e.set("name",t),e.saveChanges((function(e){e.setValue("name",t)}))},getProjectName:function(e,t){var n=e.get("name");if(n||(n=this.getConfig().newDocName),"social"===t){var i=this.getMetadata(e).publishedVideoTitle;i&&(n=i)}return n},checkLastPublishFailure:function(e){var t=this.getMetadata(e);return"share-failed"===t.lastPublishStatus?"share":"download-failed"===t.lastPublishStatus?"download":null},_handlePublishStatus:function(e,n){var i=e.jobStatus||e.runningJobs;t.each(i,function(e){var i=e.projectid,o=t.find(n,{id:i});o?(o.resolve?o.resolve():r(o)).then((function(t){t.set("publishProgress",e)})):console.log("Did not find project ref: "+i)}.bind(this)),t.each(e.downloadUrls,function(e){var i=e.projectId,o=t.find(n,{id:i});o?(o.resolve?o.resolve():r(o)).then(function(t){this.getMetadata(t);t.set("downloadData",{url:e.href,userModDate:e.userModDate})}.bind(this)):console.log("Did not find project ref: "+i)}.bind(this))},getDocPublishStates:function(){var t=this.getSnapiEndpoint();return r.Promise(function(n,i){s.getAccessToken().then(function(r){e.ajax({type:"GET",url:t+"/project/status",headers:{authorization:"Bearer "+r,"x-api-key":"ginger_snap1","x-gw-ims-user-id":s.getProfile().userId},success:function(e){n(e)}.bind(this),error:function(e){i(e)}})}.bind(this))}.bind(this))},updateDocPublishStates:function(e){return this.getDocPublishStates().then(function(t){return this._handlePublishStatus(t,e)}.bind(this))},getAuthoringContextThemeId:function(e){return this.themeId},setAuthoringContextThemeId:function(e,t){this.themeId=t||null},getFontsUsed:function(e){return this.ensureProject(e.id).then(function(e){return e.getFontsUsed()}.bind(this))},setUploadedFontsFlag:function(e){this._hasUploadedFonts=e},includesUploadedFonts:function(){return this._hasUploadedFonts},setAspectRatio:function(e){this.aspectRatio=e},getAspectRatio:function(){return this.aspectRatio},getThemeEditorView:function(){var e=r.defer();return Promise.all([n.e(4),n.e("vendors~gs-app-ac-theme-editor~voice-web"),n.e(0),n.e(1),n.e("gs-app-ac-theme-editor")]).then(function(t){r.all([this._fetchLocaleData(),this._loadPixi()]).then(function(){var t=n(321);e.resolve(t)}.bind(this))}.bind(this).bind(null,n)).catch(n.oe),e.promise},stripBranding:function(e){return this.setAuthoringContextId(e,"",!1)}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(3),n(127)],void 0===(r=function(e,t){"use strict";var i;return{load:function(){return i||(i=e.defer(),Promise.all([n.e("vendors~spark-core-wraper"),n.e("m-storage~spark-core-wraper"),n.e("spark-core-wraper")]).then(function(){var e=n(322);i.resolve(e.default)}.bind(null,n)).catch(n.oe)),i.promise}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(2)],void 0===(r=function(e,t){"use strict";return{LibraryImageModel:t.Model.extend({getImage:function(){if(this.collection){var e=this.collection.images;if(e)return e.get(this.get("image_id"))}return null},getImageURL:function(){var e=this.getImage();return e?e.get("image_url"):this.get("image_url")||""},getPreviewURL:function(){return this.getImageURL()},getThumbURL:function(){return this.getImageURL()}}),LibraryImageLinksModel:t.Model.extend({getImageURL:function(){return this.get("image_url")||""},getPreviewURL:function(){return this.get("preview_url")||""},getThumbURL:function(){return this.get("thumb_url")||""},getImageSize:function(){return this.get("image_size")||void 0},getPreviewSize:function(){return this.get("preview_size")||void 0},getThumbSize:function(){return this.get("thumb_size")||void 0}})}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(3),n(2),n(6),n(7),n(5),n(168),n(19)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";var l,c;return l=n.Model.extend({initialize:function(){this._sessionsById={}},_getBatonController:function(){return new a},_getBrandKit:function(){return s},_checkEntitlement:function(e,n){var i=o.hasFeature("entitle-brand-kit"),r=e.getMyApp();return t.all([r.isBranded(e),r.hasPremiumIngredients(e)]).spread(function(o,a){return n.known.docIsBranded=o,n.known.docHasPremiumIngredients=a,"video"==r.typeName&&o&&!r.getAuthoringContextId(e)||!o&&!a||i||(n.known.unentitled=!0),t.resolve(!n.known.unentitled)}.bind(this))},_createEditingSession:function(e,n){return{batonEnabled:e,collabEnabled:n,deferInterstitial:t.defer(),batonController:this._getBatonController(),known:{},activity:{}}},mockDocEditingSession:function(n,i){var r=this._createEditingSession(i.batonEnabled,i.collabEnabled);r.known.userEntitled=i.entitled,i.missingBrand?r.known.missingBrand=!0:i.missingFonts&&(r.known.missingFonts=!0,s.getController().then((function(t){var i=n.getMyApp().getAuthoringContextId(n);return t.getContextById(i).then((function(t){r.known.missingFontList=t?e.filter(t.getAllFonts(!0),(function(e){return e.isCustomFont()})):[]}))})).done()),i.batonFailedClean?(r.known.hasBaton=!1,r.known.lockHeldByUserName="Mock User"):i.batonFailedDirty?(r.known.hasBaton=!1,r.known.batonServiceFailed=!0,r.known.batonServiceError=new Error("some error from baton service")):i.hasBaton&&(r.known.hasBaton=!0),i.serviceFailed&&(r.known.serviceBorked=!0),this._sessionsById[n.id]=r,r.entitlementPromise=t.resolve(i.entitled),r.entitlementPromise.then(function(){this._updateUX(r)}.bind(this))},_doVerifyBrand:function(e,n){return this._getBrandKit().verifyBrandAccess(e,n.known.docIsBranded).then(function(i){return i&&i.accessOk?this._getBrandKit().verifyFontAccess(e,i.brand).then(function(e){return e.length>0?(n.known.missingFonts=!0,n.known.missingFontList=e,this._updateUX(n),t.resolve(!1)):(n.known.brandAndFontsOk=!0,t.resolve(!0))}.bind(this)):(n.known.missingBrand=!0,this._updateUX(n),t.resolve(!1))}.bind(this)).catch(function(e){return n.known.serviceBorked=!0,n.known.serviceBorkedMsg="Failed while validating project",n.known.serviceBorkedError=e,this._updateUX(n),t.reject(e)}.bind(this))},_doAcquireBaton:function(e,n){var i=e.getMyApp().getSetting("syncGroup"),r=e.id,o=e.getProjectName();return n.fnOnLeftEditor=function(t){this._sessionsById[r]&&this.releaseBatonAndCloseSession(e)}.bind(this),window.marvel.events.on("left-editing-session",n.fnOnLeftEditor),n.fnOnUnload=function(e){if(n.batonEnabled&&n.batonRequestPromise)return n.batonController.releaseLockOnWindowUnload()},window.addEventListener("unload",n.fnOnUnload),n.batonController.acquireBatonLock(i,r,o).then(function(t){return t&&t.virtualBaton&&(n.known.virtualBaton=!0,n.fnUpgradeSession=function(t){var i=this._sessionsById[r];i&&i.known.virtualBaton&&(i.known.userKnows=!1,i.known.virtualBaton=!1,i.batonController.releaseBatonLockAndConnection().then(function(){i.batonRequestPromise=this._doAcquireBaton(e,n),this._updateUX(i),window.marvel.logger.info("Upgrading from virtual baton",{rootObjectId:r})}.bind(this)))}.bind(this),window.marvel.events.on("upgrade-editing-session",n.fnUpgradeSession)),n.known.hasBaton=!0,this._updateUX(n),t}.bind(this),function(e){return n.known.hasBaton=!1,e.lockHeldByUser?n.known.lockHeldByUserName=n.batonController.lockHeldByDisplayNameFromErr(e):(n.known.batonServiceFailed=!0,n.known.batonServiceError=e),this._updateUX(n),t.reject(e)}.bind(this))},_awaitEditingSessionDone:function(n){return n.entitlementPromise.then(function(){var i=[n.verifyBrandPromise];return n.batonRequestPromise&&i.push(n.batonRequestPromise),t.allSettled(i).then(function(i){return e.each(i,function(e){"fulfilled"!==e.state&&(e.reason.toString().indexOf("BATON_LOCK_FAILED")>=0?n.known.lockHeldByUserName||(n.known.batonServiceFailed=!0,n.known.batonServiceError=e.reason,this._updateUX(n)):window.marvel.logger.debug("EditingSessionDone assuming error is already handled",e.reason))}.bind(this)),window.marvel.events.trigger("editing-session-preflight-complete",n),t.resolve(n)}.bind(this))}.bind(this))},getDocEditingSession:function(e){var n=e.id,i=e.getMyApp().supportsCollaboration(),r=e.getMyApp().requiresDocumentLocking(e),a=this._sessionsById[n];if(!a){if(o.hasFeature("enable-mock-editing-session"))try{var s=window.sessionStorage.getItem("marvel_mock_editing_session");if(s)return s=JSON.parse(s),window.marvel.logger.warn("[using editing session] ->",s),c.mockDocEditingSession(e,s),this._sessionsById[n]}catch(e){window.marvel.logger.warn("caught error in mock editing session",e)}a=this._createEditingSession(r,i),this._sessionsById[n]=a,a.entitlementPromise=this._checkEntitlement(e,a).then(function(n){return a.known.userEntitled=n,a.known.userEntitled?(a.verifyBrandPromise=this._doVerifyBrand(e,a),i&&r?a.batonRequestPromise=this._doAcquireBaton(e,a):(a.known.hasBaton=!0,a.known.virtualBaton=!0,a.batonRequestPromise=t.resolve(),this._updateUX(a))):this._updateUX(a),n}.bind(this),function(e){window.marvel.logger.error("editing-session: failed while checking entitlement",e),a.known.serviceBorked=!0,a.known.serviceBorkedMsg="Failed to check entitlements",a.known.serviceBorkedError=e,this._updateUX(a)}.bind(this)).catch(function(e){window.marvel.logger.error("editing-session: error caught while checking entitlement",e),a.known.serviceBorked=!0,a.known.serviceBorkedMsg="Failed while validating project",a.known.serviceBorkedError=e,this._updateUX(a)}.bind(this)),a.donePromise=this._awaitEditingSessionDone(a)}return a},_leaveInterstitial:function(e,t){e.deferInterstitial.resolve(),t&&(window.history.length>2?window.history.back():window.marvel.navigate("/",{trigger:!0}))},_updateUX:function(e){if(e&&e._ux){var t=e.activity,n=e.known,i=e._ux;window.marvel.logger.traceflow("editingsession","[EditingSession:updateUX]",{known:e.known}),t.inactivityTimeout?i.inactiveTimeout&&i.inactiveTimeout(e):n.userKnows||(n.serviceBorked?(n.userKnows=!0,i.serviceBorked(n.serviceBorkedError)):!1===n.userEntitled?n.interstitialReadyToHide&&(n.userKnows=!0,i.unentitled(),e.deferInterstitial.resolve()):!1!==n.hasBaton||n.ignoreBatonServiceError?(!0===n.hasBaton||n.ignoreBatonServiceError)&&(n.missingBrand?(n.userKnows=!0,i.missingBrand().then(function(){this._leaveInterstitial(e,!0)}.bind(this)).done()):n.missingFonts&&n.interstitialReadyToHide?(n.userKnows=!0,e.deferInterstitial.resolve(),i.missingFonts(n.missingFontList).then((function(t){t||(window.history.length>2?window.history.back():window.marvel.navigate("/",{trigger:!0})),i.editing&&i.editing(e)}))):n.brandAndFontsOk&&n.interstitialReadyToHide&&(n.userKnows=!0,e.deferInterstitialResolved||(e.deferInterstitial.resolve(),e.deferInterstitialResolved=!0),i.editing&&i.editing(e))):n.batonServiceFailed?n.interstitialReadyToHide&&(n.userKnows=!0,i.batonServiceFailed(n.batonServiceError).then(function(t){t?(n.ignoreBatonServiceError=!0,n.userKnows=!1,this._updateUX(e)):this._leaveInterstitial(e,!0)}.bind(this))):(n.userKnows=!0,i.batonNotAcquired(n.lockHeldByUserName).then(function(){this._leaveInterstitial(e,!0)}.bind(this)).done()))}},setUXHandler:function(e,t){var n=this.getDocEditingSession(e);n?(n._ux=t,this._updateUX(n)):window.marvel.logger.warn("failed to acquire EditingSession for doc",e)},inactivityTimeout:function(e){var t=this._sessionsById[e.id];t&&(navigator.onLine?(t.activity.inactivityTimeout=!0,t.activity.lockReleaseDelayTimer=window.setTimeout(function(){t.activity.lockReleaseDelayTimer=0,this.stopInactivityMonitoring(e,t),t.batonController.justReleaseBatonLock()}.bind(this),t.activity.LOCK_RELEASE_TIMEOUT),this._updateUX(t)):this.stopInactivityMonitoring(e,t))},_establishTimeouts:function(e){e.activity.INACTIVE_TIMEOUT=6e5,e.activity.LOCK_RELEASE_TIMEOUT=18e4,o.hasFeature("inactivity-timeout-15-seconds")&&(e.activity.INACTIVE_TIMEOUT=15e3,e.activity.LOCK_RELEASE_TIMEOUT=15e3)},beginSession:function(e,t){if(t.known.virtualBaton)window.marvel.events.trigger("collaboration-state",{enabled:!1});else{var n=t.activity;n.inactiveTimer?window.marvel.logger.warn("User inactiveTimer already exists!?"):(this._establishTimeouts(t),n.inLongUserActivity=0,n._fnTimeout=function(){window.marvel.logger.traceflow("baton-timeout","User inactive, timeout."),n.inactiveTimer=null,c.inactivityTimeout(e)},n.fnUserIsActive=function(e){n.inactiveTimer&&(window.clearTimeout(n.inactiveTimer),n.inactiveTimer=null),0===n.inLongUserActivity?(window.marvel.logger.traceflow("baton-timeout","userIsActive - starting or restarting timer"),n.inactiveTimer=window.setTimeout(n._fnTimeout,n.INACTIVE_TIMEOUT)):window.marvel.logger.traceflow("baton-timeout","userIsActive - ignored within long user activity begin/end pair")},n.fnBeginLongUserActivity=function(){n.inactiveTimer&&(window.clearTimeout(n.inactiveTimer),n.inactiveTimer=null),n.inLongUserActivity+=1,1===n.inLongUserActivity&&window.marvel.logger.traceflow("long-user-activity","Long user activity - STARTED"),window.marvel.logger.traceflow("baton-timeout","beginLongUserActivity - inLongUserActivity = "+n.inLongUserActivity)},n.fnEndLongUserActivity=function(t){n.inLongUserActivity-=1,window.marvel.logger.traceflow("baton-timeout",'endLongUserActivity - reason "'+t+'" inLongUserActivity reduced to '+n.inLongUserActivity),n.inLongUserActivity<0?window.marvel.logger.error('endLongUserActivity - reason "'+t+'" inLongUserActivity reduced to '+n.inLongUserActivity):0===n.inLongUserActivity&&window.marvel.logger.traceflow("long-user-activity","Long user activity - COMPLETE"),"release-lock"===t?(r.trackEvent("coediting:releasedLockAfterLongUserAction",{sparkFormat:e.getMyApp().typeName},"coediting"),c.releaseBatonAndCloseSession(e)):n.fnUserIsActive()},this.startInactivityMonitoring(e,t),window.marvel.events.trigger("collaboration-state",{enabled:!0,timeoutDuration:n.INACTIVE_TIMEOUT}))}},startInactivityMonitoring:function(e,t){var n=t.activity;n.inactiveTimer=window.setTimeout(n._fnTimeout,n.INACTIVE_TIMEOUT),e.getMyApp().onEditorActive(n.fnUserIsActive,n.fnBeginLongUserActivity,n.fnEndLongUserActivity)},stopInactivityMonitoring:function(e,t){var n=t.activity;n.fnUserIsActive&&e.getMyApp().offEditorActive(n.fnUserIsActive),n.inactiveTimer&&(window.clearTimeout(n.inactiveTimer),n.inactiveTimer=null)},endSession:function(e,t){this.stopInactivityMonitoring(e,t)},reviveSession:function(e,n){if(n.activity.lockReleaseDelayTimer)return r.trackEvent("coediting:stillWorkingPressedQuickly",{sparkFormat:e.getMyApp().typeName},"coediting"),window.clearTimeout(n.activity.lockReleaseDelayTimer),n.activity.lockReleaseDelayTimer=0,t.resolve(!0);r.trackEvent("coediting:stillWorkingPressedEventually",{sparkFormat:e.getMyApp().typeName},"coediting");var i=t.defer(),o=e.getMyApp().getSetting("syncGroup"),a=e.id,s=e.getProjectName();return n.batonController.acquireBatonLock(o,a,s).then(function(){e.hasCloudDocChanged().then(function(t){t?i.resolve(!1):(this.startInactivityMonitoring(e,n),i.resolve(!0))}.bind(this)).catch((function(e){window.marvel.logger.error("hasCloudDocChanged returned error",e),i.resolve(!1)}))}.bind(this)).catch((function(e){window.marvel.logger.error("acquireBatonLock returned error",e),i.resolve(!1)})),i.promise},editingPreflightComplete:function(e){if(!e)return t.resolve();var n=this._sessionsById[e.id];return n?n.donePromise:t.reject(new Error("editingPreflightComplete called without an active editing session"))},interstitialReadyToHide:function(e){if(!e)return t.resolve();var n=this._sessionsById[e.id];return n?(n.known.interstitialReadyToHide=!0,this._updateUX(n),n.deferInterstitial.promise):t.reject("No editing session")},releaseBatonAndCloseSession:function(e){if(!e)return t.resolve();var n=this._sessionsById[e.id];return n&&this.removeDocEditingSession(e),n&&n.batonEnabled&&n.batonRequestPromise?n.batonController.releaseBatonLockAndConnection():t.resolve()},removeDocEditingSession:function(e){if(e){var t=this._sessionsById[e.id];t&&(t.fnOnLeftEditor&&(window.marvel.events.off("left-editing-session",t.fnOnLeftEditor),t.fnOnLeftEditor=null),t.fnOnUnload&&(window.removeEventListener("unload",t.fnOnUnload),t.fnOnUnload=null),t.fnUpgradeSession&&(window.marvel.events.off("upgrade-editing-session",t.fnUpgradeSession),t.fnUpgradeSession=null),t._ux&&t._ux.cleanup&&t._ux.cleanup(t),delete this._sessionsById[e.id])}}}),c=new l}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";var i=n(148).default;n(155),(t=e.exports=i).default=t},function(e,t,n){"use strict";n.r(t);var i=n(52),r=n(15),o=n(11),a={beginTrackingFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("beginTrackingFlow's flowName must be defined.");var o=r.v4(),a=performance.timing.navigationStart+performance.now(),s=i({},t,{flowId:o,flowBegan:a,flowName:e});this._logger.info("beginTrackingFlow: ".concat(e),s),performance.mark(this.loggableEntryName("beginTrackingFlow:".concat(e)));var l=this._getPerformanceData()||{},c=l.synchronousFlows,d=l.asynchronousFlows;if(c&&d){if(n.isAsynchronous){var u=this._getAsynchronousFlowKey(e,o);d[u]=s}else this._warnIfOverwritingIncompleteSynchronousFlow(c[e]),c[e]=s;this._savePerformanceData(l)}else this._logger.warn("Unable to begin tracking new flow because unable to access performance data.");return n.isAsynchronous?o:null},_getPerformanceData:function(){var e=null;if(window.sessionStorage)try{var t=window.sessionStorage.getItem("_performanceTracker");e=t?JSON.parse(t):{synchronousFlows:{},asynchronousFlows:{}}}catch(e){this._logger.warn("Unable to get performance data because of thrown exception",e)}else this._logger.warn("Unable to get performance data because sessionStorage is undefined.");return e},_getAsynchronousFlowKey:function(e,t){return"".concat(e,":").concat(t)},_warnIfOverwritingIncompleteSynchronousFlow:function(e){e&&this._logger.warn("Unexpectedly overwriting incomplete synchronous flow { name: ".concat(e.flowName,", id: ").concat(e.flowId,"}"))},_savePerformanceData:function(e){try{var t=JSON.stringify(e);window.sessionStorage.setItem("_performanceTracker",t)}catch(e){this._logger.warn("Unable to save flows because of thrown exception",e)}},endTrackingFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("endTrackingFlow's flowName must be defined.");var n=this._getPerformanceData()||{},r=n.synchronousFlows,o=n.asynchronousFlows;if(r&&o){var a,s;t.asynchronousFlowId?(a=o,s=this._getAsynchronousFlowKey(e,t.asynchronousFlowId)):(a=r,s=e);var l=a[s];if(!l)return void this._logger.info("Unable to find tracking flow object when ending flow. (This is sometimes expected behavior because endTrackingFlow may fire legitimately when beginTrackingFlow was never called, such as manually refreshing the browser when in the editor.)",{flowName:e,flowKey:s});var c=performance.timing.navigationStart+performance.now(),d=c-l.flowBegan,u=i({},l,{flowDuration:d});this._logger.info("endTrackingFlow: ".concat(e),u);var h=this.loggableEntryName("beginTrackingFlow:".concat(e));performance.getEntriesByName(h,"mark").length>0&&performance.measure(this.loggableEntryName("endTrackingFlow:".concat(e)),h),delete a[s],this._savePerformanceData(n)}else this._logger.warn("Unable to end flow because unable to access performance data.")},loggableEntryName:function(e){return"".concat(this._PERFORMANCE_ENTRY_PREFIX).concat(e)},_PERFORMANCE_ENTRY_PREFIX:"spP:",_observerLogger:function(e){var t=e.entryType,n=e.name,i=e.startTime,r=e.duration;if(n.startsWith(this._PERFORMANCE_ENTRY_PREFIX)){var o={entryType:t,name:n,startTime:i};r&&(o.duration=r),this._logger.info("performanceObserver:".concat(t,":").concat(n),o)}},_logger:new o({name:"PerformanceTracker",color:"DeepPink"})};if(window.PerformanceObserver){var s=a._observerLogger.bind(a);new window.PerformanceObserver((function(e){e.getEntries().forEach(s)})).observe({entryTypes:["mark","measure"]})}o._performanceTracker=a,t.default=a},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(138),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(10))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,n(10))},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(282),r=n(244),o=n(104),a=n(215),s=n(102),l=n(439),c=Object.getOwnPropertyDescriptor;t.f=n(59)?c:function(e,t){if(e=o(e),t=a(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){var i=n(9),r=n(60),o=n(29);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){var i=n(202),r=n(281),o=n(96),a=n(49),s=n(684);e.exports=function(e,t){var n=1==e,l=2==e,c=3==e,d=4==e,u=6==e,h=5==e||u,p=t||s;return function(t,s,f){for(var g,m,v=o(t),b=r(v),y=i(s,f,3),w=a(b.length),k=0,x=n?p(t,w):l?p(t,0):void 0;w>k;k++)if((h||k in b)&&(m=y(g=b[k],k,v),e))if(n)x[k]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return k;case 2:x.push(g)}else if(d)return!1;return u?-1:c||d?d:x}}},function(e,t,n){var i;void 0===(i=function(e){"use strict";var t=n(68),i=(n(110),n(8)),r=n(192),o=function(){};return _.extend(o.prototype,{DEFAULT_LOCALE:"en-US",locale:"",setLocale:function(e){this.locale=e},getSupportedLocales:function(){return["en-US","de-DE","es-ES","fr-FR","it-IT","pt-BR"]},localeIsDefault:function(){return this.locale===this.DEFAULT_LOCALE},getStringsForSnapi:function(){return{credits_from_tnp:this.format("CREDITS_FROM_TNP",{creditsDetails:"%@"}),credits_including_tnp:this.format("CREDITS_INCLUDING_TNP",{creditsDetails:"%@"}),outro_spark_message:t.OUTRO_UNPAID_TAGLINE,credits_artist_title:t.AUTO_CREDITS_TITLE_PLACEHOLDER}},formatZendesk:function(e){var t=i.getString("zendesk-locale");return e.replace("{{zendesk-locale}}",t)},format:function(e,n){var i=t[e];return n?new r(i,this.locale).format(n):i}}),new o}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){var i=n(130),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(20),n(114),n(207),n(209),n(210)],void 0===(r=function(e,t,n,i,r,o,a,s){function l(){}return e.extend(l.prototype,{init:function(e){return this._cachedPromise||(e&&!this.locale&&this._setLocale(e),this._cachedPromise=this._loadLocaleStrings()),this._cachedPromise},_loadLocaleStrings:function(){var t,i=n.defer();function r(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=(window.marvel?window:window.parent).location.search,i=t.exec(n);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}try{t=window.localStorage.getItem("slate-lang")}catch(e){console.warn("[slate] Unable to get locale from localStorage: "+e,e)}var s=t||r("locale")||r("lang"),l=this;if(s&&s!==this.locale&&(this._setLocale(s),this.locStrings=null),this.locStrings)i.resolve();else{if(this.flatLocaleStrings=void 0,l.locStringsDefault=a,"en-US"===l.locale)l.locStrings=l.locStringsDefault,i.resolve();else if("USE_KEYS"===l.locale)l.locStrings=function(e){var t=o(e),n={};for(var i in t)n[i]=i;return o.unflatten(n)}(l.locStringsDefault),i.resolve();else{var c={url:l.getLocaleStringsPath(l.locale),method:"GET",dataType:"json",headers:{"Accept-Language":l.locale,Accept:"text/html; charset=utf-8"}};e.ajax(c).then((function(t,n,r){l._reportMissingStrings(t,l.locale),l.locStrings=e.extend(!0,{},l.locStringsDefault,t),i.resolve()})).fail((function(t,n,r){l.locStrings=e.extend(!0,{},l.locStringsDefault),alert("Loading of localized strings failed. This is probably due to network issues. Reload Spark Page to try again."),i.resolve()}))}}return i.promise},_setLocale:function(e){this.locale=e},getLocale:function(){return this.locale},getLocaleStringsPath:function(e,t){return(s[t||"slate-web"]||{})[e||self.locale]||"/slate-web/locales/"+self.locale+".json"},getMarvel:function(){var e=null;return window.marvel?e=window.marvel:window.parent.marvel&&(e=window.parent.marvel),e},_reportMissingStrings:function(e,t){var n=this.getMarvel();if(n&&n.features.hasFeature("enable-debug-log")){var i=o(this.locStringsDefault),r=o(e);for(var a in i)i.hasOwnProperty(a)&&(r[a]||console.warn("Missing string in locale "+t+': "'+a+'"'))}},getString:function(e){var t=this.getFlatStrings()[e];return void 0===t&&(t="LOCALIZED STRING NOT FOUND!",console.warn("Localized string not found in locale "+this.locale+', id "'+e+'"')),t},getFlatStrings:function(){return this._ensureInit(),this.flatLocaleStrings},getStrings:function(){return this.locStrings},_ensureInit:function(){this.flatLocaleStrings||(this.flatLocaleStrings=o(this.getStrings(),"."))},renderMustache:function(t,n){var r=e.extend({},n,{locString:this.getStrings()});return i.render(t,r)},format:function(e,t){var n=this.getString(e);return new r(n,this.locale).format(t)}}),new l}.apply(t,i))||(e.exports=r)},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){n(167),e.exports=self.fetch.bind(self)},function(e,t,n){var i,r;i=[n(1),n(0),n(75)],void 0===(r=function(e,t,n){"use strict";function i(e){return"fontFamily"in e}function r(e,t){var r=[],o=t.components,a={},s=function(e){a[e.getId()]||(r.push(e),a[e.getId()]=!0)},l=function(t,i){var r,o=e.getFontById(t);if((r=o)&&r.getData()&&o.isCustomFont())if(n.componentsThatUseBodyFonts[i]){var a=o.subgroupName(),l=e.getCustomBodyFontSet(a);if(l)for(var c=0,d=l.models.length;c<d;c++)s(l.at(c));else s(o)}else s(o)},c=function(e,t){for(var n in e){var r=e[n];"object"==typeof r&&(i(o=r)&&o.assetId&&o.assetId&&l(r.assetId,t),c(r,n))}var o};return c(o,null),r}return{getCustomFontData:function(e,n,i,o,a){i=i||"";var s=r(e,n),l=[],c=function(e){for(var t="",n=0;n<e.length;n++)e[n]&&(t+="url("+e[n]+")",n<e.length-1&&(t+=", "));return t};return t.each(s,(function(n){n.getId();var r={},s=[];t.each(["otf","ttf","woff"],(function(t){var a=n.getHref(t,!!i);if(a){a=i+a;var l=e.getComponentForCustomFont(n,t);l&&o&&(a=a.replace(/^(.*)\/([^\?\#]*)(.*)$/,"$1/"+l.id+"$3")),r[t]=a,s.push(a)}}));var d=[];a&&(d=t.map(a,(function(t){var r=n.getHref(t,!!i);if(r){r=i+r;var a=e.getComponentForCustomFont(n,t);return a&&o&&(r=r.replace(/^(.*)\/([^\?\#]*)(.*)$/,"$1/"+a.id+"$3")),{value:c([r])}}}))),l.push({cssName:n.cssName(),fontWeight:n.fontWeight(),fontStyle:n.fontStyle(),srcStrings:d,src:c(s)})})),l},getCustomFontsInTheme:r,getThemeTextNodes:function(e){if(!e||!e.components)return null;var t=[];return function e(t,n,r){for(var o in t){var a=t[o];if("object"==typeof a)if(i(a))r.push({node:a,component:n});else e(a,n?n+"."+o:o,r)}}(e.components,null,t),t}}}.apply(t,i))||(e.exports=r)},,function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(10))},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e){e.exports=JSON.parse('{"da-DK":{"storyArcs":"storyArcs-fc5e8004.json","strings":"strings-b2deaad4.json"},"de-DE":{"storyArcs":"storyArcs-e2913683.json","strings":"strings-8ef8e5f8.json"},"en-US":{"storyArcs":"storyArcs-12c2fb5e.json","strings":"strings-0fff2f49.json"},"es-ES":{"storyArcs":"storyArcs-ea9d848c.json","strings":"strings-61af4a38.json"},"fi-FI":{"storyArcs":"storyArcs-76c9a3d2.json","strings":"strings-6f89f959.json"},"fr-FR":{"storyArcs":"storyArcs-93cc9840.json","strings":"strings-e411d441.json"},"it-IT":{"storyArcs":"storyArcs-5e49f8ad.json","strings":"strings-2e5ce2ed.json"},"ja-JP":{"storyArcs":"storyArcs-6bb67e82.json","strings":"strings-4efeb5a9.json"},"ko-KR":{"storyArcs":"storyArcs-e3b8b9fa.json","strings":"strings-b0216edc.json"},"nb-NO":{"storyArcs":"storyArcs-1b11aac4.json","strings":"strings-77995c80.json"},"nl-NL":{"storyArcs":"storyArcs-d9899759.json","strings":"strings-9576586b.json"},"pt-BR":{"storyArcs":"storyArcs-30524193.json","strings":"strings-33e70041.json"},"sv-SE":{"storyArcs":"storyArcs-91a28176.json","strings":"strings-cefdef4d.json"},"zh-Hans-CN":{"storyArcs":"storyArcs-65b022a3.json","strings":"strings-c987836c.json"},"zh-Hant-TW":{"storyArcs":"storyArcs-57aba495.json","strings":"strings-50177619.json"},"zz-ZZ":{"strings":"strings-333d27b0.json"}}')},function(e,t,n){var i;void 0===(i=function(e){"use strict";return new function(){this.isPublishCurrent=function(e){return e.publishDate&&(e.publishedDate=e.publishDate),!(!e.publishedDate||e.publishedDate.length<1)&&(!(!e.userModDate||e.userModDate.length<1)&&parseFloat(e.publishedDate)>=parseFloat(e.userModDate))}}}.call(t,n,t,e))||(e.exports=i)},,function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";t.byteLength=function(e){return 3*e.length/4-c(e)},t.toByteArray=function(e){var t,n,i,a,s,l=e.length;a=c(e),s=new o(3*l/4-a),n=a>0?l-4:l;var d=0;for(t=0;t<n;t+=4)i=r[e.charCodeAt(t)]<<18|r[e.charCodeAt(t+1)]<<12|r[e.charCodeAt(t+2)]<<6|r[e.charCodeAt(t+3)],s[d++]=i>>16&255,s[d++]=i>>8&255,s[d++]=255&i;2===a?(i=r[e.charCodeAt(t)]<<2|r[e.charCodeAt(t+1)]>>4,s[d++]=255&i):1===a&&(i=r[e.charCodeAt(t)]<<10|r[e.charCodeAt(t+1)]<<4|r[e.charCodeAt(t+2)]>>2,s[d++]=i>>8&255,s[d++]=255&i);return s},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,o="",a=[],s=0,l=n-r;s<l;s+=16383)a.push(d(e,s,s+16383>l?l:s+16383));1===r?(t=e[n-1],o+=i[t>>2],o+=i[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=i[t>>10],o+=i[t>>4&63],o+=i[t<<2&63],o+="=");return a.push(o),a.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function d(e,t,n){for(var r,o,a=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,d=-7,u=n?r-1:0,h=n?-1:1,p=e[t+u];for(u+=h,o=p&(1<<-d)-1,p>>=-d,d+=s;d>0;o=256*o+e[t+u],u+=h,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=i;d>0;a=256*a+e[t+u],u+=h,d-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=c}return(p?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var a,s,l,c=8*o-r-1,d=(1<<c)-1,u=d>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+u>=1?h/l:h*Math.pow(2,1-u))*l>=2&&(a++,l/=2),a+u>=d?(s=0,a=d):a+u>=1?(s=(t*l-1)*Math.pow(2,r),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,r),a=0));r>=8;e[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;e[n+p]=255&a,p+=f,a/=256,c-=8);e[n+p-f]|=128*g}},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,r,o,a,s,l=1,c={},d=!1,u=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){f(e.data)},i=function(e){o.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,i=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):i=function(e){setTimeout(f,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&f(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),i=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[l]=r,i(l),l++},h.clearImmediate=p}function p(e){delete c[e]}function f(e){if(d)setTimeout(f,0,e);else{var t=c[e];if(t){d=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{p(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(10),n(21))},function(e,t,n){var i=n(16),r=i.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(o(i,t),t.Buffer=a),a.prototype=Object.create(r.prototype),o(r,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,n){(function(e,i){var r;/*! https://mths.be/punycode v1.3.2 by @mathias */!function(o){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof i&&i;a.global!==a&&a.window!==a&&a.self;var s,l=2147483647,c=36,d=1,u=26,h=38,p=700,f=72,g=128,m="-",v=/^xn--/,b=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=c-d,x=Math.floor,_=String.fromCharCode;function S(e){throw RangeError(w[e])}function C(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function T(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+C((e=e.replace(y,".")).split("."),t).join(".")}function M(e){for(var t,n,i=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function I(e){return C(e,(function(e){var t="";return e>65535&&(t+=_((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=_(e)})).join("")}function D(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function P(e,t,n){var i=0;for(e=n?x(e/p):e>>1,e+=x(e/t);e>k*u>>1;i+=c)e=x(e/k);return x(i+(k+1)*e/(e+h))}function A(e){var t,n,i,r,o,a,s,h,p,v,b,y=[],w=e.length,k=0,_=g,C=f;for((n=e.lastIndexOf(m))<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&S("not-basic"),y.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<w;){for(o=k,a=1,s=c;r>=w&&S("invalid-input"),((h=(b=e.charCodeAt(r++))-48<10?b-22:b-65<26?b-65:b-97<26?b-97:c)>=c||h>x((l-k)/a))&&S("overflow"),k+=h*a,!(h<(p=s<=C?d:s>=C+u?u:s-C));s+=c)a>x(l/(v=c-p))&&S("overflow"),a*=v;C=P(k-o,t=y.length+1,0==o),x(k/t)>l-_&&S("overflow"),_+=x(k/t),k%=t,y.splice(k++,0,_)}return I(y)}function E(e){var t,n,i,r,o,a,s,h,p,v,b,y,w,k,C,T=[];for(y=(e=M(e)).length,t=g,n=0,o=f,a=0;a<y;++a)(b=e[a])<128&&T.push(_(b));for(i=r=T.length,r&&T.push(m);i<y;){for(s=l,a=0;a<y;++a)(b=e[a])>=t&&b<s&&(s=b);for(s-t>x((l-n)/(w=i+1))&&S("overflow"),n+=(s-t)*w,t=s,a=0;a<y;++a)if((b=e[a])<t&&++n>l&&S("overflow"),b==t){for(h=n,p=c;!(h<(v=p<=o?d:p>=o+u?u:p-o));p+=c)C=h-v,k=c-v,T.push(_(D(v+C%k,0))),h=x(C/k);T.push(_(D(h,0))),o=P(n,w,i==r),n=0,++i}++n,++t}return T.join("")}s={version:"1.3.2",ucs2:{decode:M,encode:I},decode:A,encode:E,toASCII:function(e){return T(e,(function(e){return b.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return T(e,(function(e){return v.test(e)?A(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()}).call(this,n(71)(e),n(10))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(143),t.encode=t.stringify=n(144)},function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var d=0;d<c;++d){var u,h,p,f,g=e[d].replace(s,"%20"),m=g.indexOf(n);m>=0?(u=g.substr(0,m),h=g.substr(m+1)):(u=g,h=""),p=decodeURIComponent(u),f=decodeURIComponent(h),i(a,p)?r(a[p])?a[p].push(f):a[p]=[a[p],f]:a[p]=f}return a};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(i(a))+n;return r(e[a])?o(e[a],(function(e){return s+encodeURIComponent(i(e))})).join(t):s+encodeURIComponent(i(e[a]))})).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){var i=n(73),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=i?i.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var i=!0}catch(e){}var r=a.call(e);return i&&(t?e[s]=n:delete e[s]),r}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var i=n(131)(Object.getPrototypeOf,Object);e.exports=i},function(e,t,n){"use strict";var i=n(149),r=n(154);i.default.__addLocaleData(r.default),i.default.defaultLocale="en",t.default=i.default},function(e,t,n){"use strict";var i=n(76),r=n(150),o=n(151),a=n(152);function s(e,t,n){var i="string"==typeof e?s.__parse(e):e;if(!i||"messageFormatPattern"!==i.type)throw new TypeError("A message must be provided as a String or AST.");n=this._mergeFormats(s.formats,n),r.defineProperty(this,"_locale",{value:this._resolveLocale(t)});var o=this._findPluralRuleFunction(this._locale),a=this._compilePattern(i,t,n,o),l=this;this.format=function(t){try{return l._format(a,t)}catch(t){throw t.variableId?new Error("The intl string context variable '"+t.variableId+"' was not provided to the string '"+e+"'"):t}}}t.default=s,r.defineProperty(s,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),r.defineProperty(s,"__localeData__",{value:r.objCreate(null)}),r.defineProperty(s,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");s.__localeData__[e.locale.toLowerCase()]=e}}),r.defineProperty(s,"__parse",{value:a.default.parse}),r.defineProperty(s,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),s.prototype.resolvedOptions=function(){return{locale:this._locale}},s.prototype._compilePattern=function(e,t,n,i){return new o.default(t,n,i).compile(e)},s.prototype._findPluralRuleFunction=function(e){for(var t=s.__localeData__,n=t[e.toLowerCase()];n;){if(n.pluralRuleFunction)return n.pluralRuleFunction;n=n.parentLocale&&t[n.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},s.prototype._format=function(e,t){var n,r,o,a,s,l,c="";for(n=0,r=e.length;n<r;n+=1)if("string"!=typeof(o=e[n])){if(a=o.id,!t||!i.hop.call(t,a))throw(l=new Error("A value must be provided for: "+a)).variableId=a,l;s=t[a],o.options?c+=this._format(o.getOption(s),t):c+=o.format(s)}else c+=o;return c},s.prototype._mergeFormats=function(e,t){var n,o,a={};for(n in e)i.hop.call(e,n)&&(a[n]=o=r.objCreate(e[n]),t&&i.hop.call(t,n)&&i.extend(o,t[n]));return a},s.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(s.defaultLocale);var t,n,i,r,o=s.__localeData__;for(t=0,n=e.length;t<n;t+=1)for(i=e[t].toLowerCase().split("-");i.length;){if(r=o[i.join("-")])return r.locale;i.pop()}var a=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+a)}},function(e,t,n){"use strict";var i=n(76),r=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),o=(!r&&Object.prototype.__defineGetter__,r?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):(!i.hop.call(e,t)||"value"in n)&&(e[t]=n.value)}),a=Object.create||function(e,t){var n,r;function a(){}for(r in a.prototype=e,n=new a,t)i.hop.call(t,r)&&o(n,r,t[r]);return n};t.defineProperty=o,t.objCreate=a},function(e,t,n){"use strict";function i(e,t,n){this.locales=e,this.formats=t,this.pluralFn=n}function r(e){this.id=e}function o(e,t,n,i,r){this.id=e,this.useOrdinal=t,this.offset=n,this.options=i,this.pluralFn=r}function a(e,t,n,i){this.id=e,this.offset=t,this.numberFormat=n,this.string=i}function s(e,t){this.id=e,this.options=t}t.default=i,i.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},i.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,n,i,r=e.elements,o=[];for(t=0,n=r.length;t<n;t+=1)switch((i=r[t]).type){case"messageTextElement":o.push(this.compileMessageText(i));break;case"argumentElement":o.push(this.compileArgument(i));break;default:throw new Error("Message element does not have a valid type")}return o},i.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new a(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},i.prototype.compileArgument=function(e){var t=e.format;if(!t)return new r(e.id);var n,i=this.formats,a=this.locales,l=this.pluralFn;switch(t.type){case"numberFormat":return n=i.number[t.style],{id:e.id,format:new Intl.NumberFormat(a,n).format};case"dateFormat":return n=i.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,n).format};case"timeFormat":return n=i.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,n).format};case"pluralFormat":return n=this.compileOptions(e),new o(e.id,t.ordinal,t.offset,n,l);case"selectFormat":return n=this.compileOptions(e),new s(e.id,n);default:throw new Error("Message element does not have a valid format type")}},i.prototype.compileOptions=function(e){var t,n,i,r=e.format,o=r.options,a={};for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===r.type?e:null,t=0,n=o.length;t<n;t+=1)a[(i=o[t]).selector]=this.compileMessage(i.value);return this.currentPlural=this.pluralStack.pop(),a},r.prototype.format=function(e){return e||"number"==typeof e?"string"==typeof e?e:String(e):""},o.prototype.getOption=function(e){var t=this.options;return t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)]||t.other},a.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},s.prototype.getOption=function(e){var t=this.options;return t[e]||t.other}},function(e,t,n){"use strict";(t=e.exports=n(153).default).default=t},function(e,t,n){"use strict";t.default=function(){function e(t,n,i,r){this.message=t,this.expected=n,this.found=i,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var n,i=arguments.length>1?arguments[1]:{},r={},o={start:Pe},a=Pe,s=function(e){return{type:"messageFormatPattern",elements:e,location:Ce()}},l=function(e){var t,n,i,r,o,a="";for(t=0,i=e.length;t<i;t+=1)for(n=0,o=(r=e[t]).length;n<o;n+=1)a+=r[n];return a},c=function(e){return{type:"messageTextElement",value:e,location:Ce()}},d=/^[^ \t\n\r,.+={}#]/,u={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},h="{",p={type:"literal",value:"{",description:'"{"'},f=",",g={type:"literal",value:",",description:'","'},m="}",v={type:"literal",value:"}",description:'"}"'},b=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2],location:Ce()}},y="number",w={type:"literal",value:"number",description:'"number"'},k="date",x={type:"literal",value:"date",description:'"date"'},_="time",S={type:"literal",value:"time",description:'"time"'},C=function(e,t){return{type:e+"Format",style:t&&t[2],location:Ce()}},T="plural",M={type:"literal",value:"plural",description:'"plural"'},I=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options,location:Ce()}},D="selectordinal",P={type:"literal",value:"selectordinal",description:'"selectordinal"'},A=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options,location:Ce()}},E="select",L={type:"literal",value:"select",description:'"select"'},N=function(e){return{type:"selectFormat",options:e,location:Ce()}},F="=",R={type:"literal",value:"=",description:'"="'},O=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t,location:Ce()}},B="offset:",z={type:"literal",value:"offset:",description:'"offset:"'},U=function(e){return e},j=function(e,t){return{type:"pluralFormat",offset:e,options:t,location:Ce()}},$={type:"other",description:"whitespace"},H=/^[ \t\n\r]/,V={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},G={type:"other",description:"optionalWhitespace"},K=/^[0-9]/,q={type:"class",value:"[0-9]",description:"[0-9]"},W=/^[0-9a-f]/i,Y={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Q="0",X={type:"literal",value:"0",description:'"0"'},Z=/^[1-9]/,J={type:"class",value:"[1-9]",description:"[1-9]"},ee=function(e){return parseInt(e,10)},te=/^[^{}\\\0-\x1F \t\n\r]/,ne={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},ie="\\\\",re={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},oe=function(){return"\\"},ae="\\#",se={type:"literal",value:"\\#",description:'"\\\\#"'},le=function(){return"\\#"},ce="\\{",de={type:"literal",value:"\\{",description:'"\\\\{"'},ue=function(){return"{"},he="\\}",pe={type:"literal",value:"\\}",description:'"\\\\}"'},fe=function(){return"}"},ge="\\u",me={type:"literal",value:"\\u",description:'"\\\\u"'},ve=function(e){return String.fromCharCode(parseInt(e,16))},be=function(e){return e.join("")},ye=0,we=0,ke=[{line:1,column:1,seenCR:!1}],xe=0,_e=[],Se=0;if("startRule"in i){if(!(i.startRule in o))throw new Error("Can't start parsing from rule \""+i.startRule+'".');a=o[i.startRule]}function Ce(){return Me(we,ye)}function Te(e){var n,i,r=ke[e];if(r)return r;for(n=e-1;!ke[n];)n--;for(r={line:(r=ke[n]).line,column:r.column,seenCR:r.seenCR};n<e;)"\n"===(i=t.charAt(n))?(r.seenCR||r.line++,r.column=1,r.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(r.line++,r.column=1,r.seenCR=!0):(r.column++,r.seenCR=!1),n++;return ke[e]=r,r}function Me(e,t){var n=Te(e),i=Te(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:i.line,column:i.column}}}function Ie(e){ye<xe||(ye>xe&&(xe=ye,_e=[]),_e.push(e))}function De(t,n,i,r){return null!==n&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(n),new e(null!==t?t:function(e,t){var n,i=new Array(e.length);for(n=0;n<e.length;n++)i[n]=e[n].description;return"Expected "+(e.length>1?i.slice(0,-1).join(", ")+" or "+i[e.length-1]:i[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(n,i),n,i,r)}function Pe(){return Ae()}function Ae(){var e,t,n;for(e=ye,t=[],n=Ee();n!==r;)t.push(n),n=Ee();return t!==r&&(we=e,t=s(t)),e=t}function Ee(){var e;return(e=function(){var e,n;e=ye,(n=function(){var e,n,i,o,a,s;e=ye,n=[],i=ye,(o=Re())!==r&&(a=je())!==r&&(s=Re())!==r?i=o=[o,a,s]:(ye=i,i=r);if(i!==r)for(;i!==r;)n.push(i),i=ye,(o=Re())!==r&&(a=je())!==r&&(s=Re())!==r?i=o=[o,a,s]:(ye=i,i=r);else n=r;n!==r&&(we=e,n=l(n));(e=n)===r&&(e=ye,n=Fe(),e=n!==r?t.substring(e,ye):n);return e}())!==r&&(we=e,n=c(n));return e=n}())===r&&(e=function(){var e,n,i,o,a,s,l;e=ye,123===t.charCodeAt(ye)?(n=h,ye++):(n=r,0===Se&&Ie(p));n!==r&&Re()!==r&&(i=function(){var e,n,i;if((e=ze())===r){if(e=ye,n=[],d.test(t.charAt(ye))?(i=t.charAt(ye),ye++):(i=r,0===Se&&Ie(u)),i!==r)for(;i!==r;)n.push(i),d.test(t.charAt(ye))?(i=t.charAt(ye),ye++):(i=r,0===Se&&Ie(u));else n=r;e=n!==r?t.substring(e,ye):n}return e}())!==r&&Re()!==r?(o=ye,44===t.charCodeAt(ye)?(a=f,ye++):(a=r,0===Se&&Ie(g)),a!==r&&(s=Re())!==r&&(l=function(){var e;(e=function(){var e,n,i,o,a,s;e=ye,t.substr(ye,6)===y?(n=y,ye+=6):(n=r,0===Se&&Ie(w));n===r&&(t.substr(ye,4)===k?(n=k,ye+=4):(n=r,0===Se&&Ie(x)),n===r&&(t.substr(ye,4)===_?(n=_,ye+=4):(n=r,0===Se&&Ie(S))));n!==r&&Re()!==r?(i=ye,44===t.charCodeAt(ye)?(o=f,ye++):(o=r,0===Se&&Ie(g)),o!==r&&(a=Re())!==r&&(s=je())!==r?i=o=[o,a,s]:(ye=i,i=r),i===r&&(i=null),i!==r?(we=e,n=C(n,i),e=n):(ye=e,e=r)):(ye=e,e=r);return e}())===r&&(e=function(){var e,n,i,o;e=ye,t.substr(ye,6)===T?(n=T,ye+=6):(n=r,0===Se&&Ie(M));n!==r&&Re()!==r?(44===t.charCodeAt(ye)?(i=f,ye++):(i=r,0===Se&&Ie(g)),i!==r&&Re()!==r&&(o=Ne())!==r?(we=e,n=I(o),e=n):(ye=e,e=r)):(ye=e,e=r);return e}())===r&&(e=function(){var e,n,i,o;e=ye,t.substr(ye,13)===D?(n=D,ye+=13):(n=r,0===Se&&Ie(P));n!==r&&Re()!==r?(44===t.charCodeAt(ye)?(i=f,ye++):(i=r,0===Se&&Ie(g)),i!==r&&Re()!==r&&(o=Ne())!==r?(we=e,n=A(o),e=n):(ye=e,e=r)):(ye=e,e=r);return e}())===r&&(e=function(){var e,n,i,o,a;e=ye,t.substr(ye,6)===E?(n=E,ye+=6):(n=r,0===Se&&Ie(L));if(n!==r)if(Re()!==r)if(44===t.charCodeAt(ye)?(i=f,ye++):(i=r,0===Se&&Ie(g)),i!==r)if(Re()!==r){if(o=[],(a=Le())!==r)for(;a!==r;)o.push(a),a=Le();else o=r;o!==r?(we=e,n=N(o),e=n):(ye=e,e=r)}else ye=e,e=r;else ye=e,e=r;else ye=e,e=r;else ye=e,e=r;return e}());return e}())!==r?o=a=[a,s,l]:(ye=o,o=r),o===r&&(o=null),o!==r&&(a=Re())!==r?(125===t.charCodeAt(ye)?(s=m,ye++):(s=r,0===Se&&Ie(v)),s!==r?(we=e,n=b(i,o),e=n):(ye=e,e=r)):(ye=e,e=r)):(ye=e,e=r);return e}()),e}function Le(){var e,n,i,o,a;return e=ye,Re()!==r&&(n=function(){var e,n,i,o;return e=ye,n=ye,61===t.charCodeAt(ye)?(i=F,ye++):(i=r,0===Se&&Ie(R)),i!==r&&(o=ze())!==r?n=i=[i,o]:(ye=n,n=r),(e=n!==r?t.substring(e,ye):n)===r&&(e=je()),e}())!==r&&Re()!==r?(123===t.charCodeAt(ye)?(i=h,ye++):(i=r,0===Se&&Ie(p)),i!==r&&Re()!==r&&(o=Ae())!==r&&Re()!==r?(125===t.charCodeAt(ye)?(a=m,ye++):(a=r,0===Se&&Ie(v)),a!==r?(we=e,e=O(n,o)):(ye=e,e=r)):(ye=e,e=r)):(ye=e,e=r),e}function Ne(){var e,n,i,o;if(e=ye,(n=function(){var e,n,i;return e=ye,t.substr(ye,7)===B?(n=B,ye+=7):(n=r,0===Se&&Ie(z)),n!==r&&Re()!==r&&(i=ze())!==r?(we=e,e=n=U(i)):(ye=e,e=r),e}())===r&&(n=null),n!==r)if(Re()!==r){if(i=[],(o=Le())!==r)for(;o!==r;)i.push(o),o=Le();else i=r;i!==r?(we=e,e=n=j(n,i)):(ye=e,e=r)}else ye=e,e=r;else ye=e,e=r;return e}function Fe(){var e,n;if(Se++,e=[],H.test(t.charAt(ye))?(n=t.charAt(ye),ye++):(n=r,0===Se&&Ie(V)),n!==r)for(;n!==r;)e.push(n),H.test(t.charAt(ye))?(n=t.charAt(ye),ye++):(n=r,0===Se&&Ie(V));else e=r;return Se--,e===r&&(n=r,0===Se&&Ie($)),e}function Re(){var e,n,i;for(Se++,e=ye,n=[],i=Fe();i!==r;)n.push(i),i=Fe();return e=n!==r?t.substring(e,ye):n,Se--,e===r&&(n=r,0===Se&&Ie(G)),e}function Oe(){var e;return K.test(t.charAt(ye))?(e=t.charAt(ye),ye++):(e=r,0===Se&&Ie(q)),e}function Be(){var e;return W.test(t.charAt(ye))?(e=t.charAt(ye),ye++):(e=r,0===Se&&Ie(Y)),e}function ze(){var e,n,i,o,a,s;if(e=ye,48===t.charCodeAt(ye)?(n=Q,ye++):(n=r,0===Se&&Ie(X)),n===r){if(n=ye,i=ye,Z.test(t.charAt(ye))?(o=t.charAt(ye),ye++):(o=r,0===Se&&Ie(J)),o!==r){for(a=[],s=Oe();s!==r;)a.push(s),s=Oe();a!==r?i=o=[o,a]:(ye=i,i=r)}else ye=i,i=r;n=i!==r?t.substring(n,ye):i}return n!==r&&(we=e,n=ee(n)),e=n}function Ue(){var e,n,i,o,a,s,l,c;return te.test(t.charAt(ye))?(e=t.charAt(ye),ye++):(e=r,0===Se&&Ie(ne)),e===r&&(e=ye,t.substr(ye,2)===ie?(n=ie,ye+=2):(n=r,0===Se&&Ie(re)),n!==r&&(we=e,n=oe()),(e=n)===r&&(e=ye,t.substr(ye,2)===ae?(n=ae,ye+=2):(n=r,0===Se&&Ie(se)),n!==r&&(we=e,n=le()),(e=n)===r&&(e=ye,t.substr(ye,2)===ce?(n=ce,ye+=2):(n=r,0===Se&&Ie(de)),n!==r&&(we=e,n=ue()),(e=n)===r&&(e=ye,t.substr(ye,2)===he?(n=he,ye+=2):(n=r,0===Se&&Ie(pe)),n!==r&&(we=e,n=fe()),(e=n)===r&&(e=ye,t.substr(ye,2)===ge?(n=ge,ye+=2):(n=r,0===Se&&Ie(me)),n!==r?(i=ye,o=ye,(a=Be())!==r&&(s=Be())!==r&&(l=Be())!==r&&(c=Be())!==r?o=a=[a,s,l,c]:(ye=o,o=r),(i=o!==r?t.substring(i,ye):o)!==r?(we=e,e=n=ve(i)):(ye=e,e=r)):(ye=e,e=r)))))),e}function je(){var e,t,n;if(e=ye,t=[],(n=Ue())!==r)for(;n!==r;)t.push(n),n=Ue();else t=r;return t!==r&&(we=e,t=be(t)),e=t}if((n=a())!==r&&ye===t.length)return n;throw n!==r&&ye<t.length&&Ie({type:"end",description:"end of input"}),De(null,_e,xe<t.length?t.charAt(xe):null,xe<t.length?Me(xe,xe+1):Me(xe,xe))}}}()},function(e,t,n){"use strict";t.default={locale:"en",pluralRuleFunction:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e,o=r&&n[0].slice(-1),a=r&&n[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&i?"one":"other"}}},function(e,t){},function(e,t,n){"use strict";var i=n(157);function r(e){if("undefined"!=typeof JSON){var t,n,i,r=[];for(t=0,n=e.length;t<n;t+=1)(i=e[t])&&"object"==typeof i?r.push(o(i)):r.push(i);return JSON.stringify(r)}}function o(e){var t,n,i,r,o=[],a=[];for(t in e)e.hasOwnProperty(t)&&a.push(t);var s=a.sort();for(n=0,i=s.length;n<i;n+=1)(r={})[t=s[n]]=e[t],o[n]=r;return o}t.default=function(e){var t=i.objCreate(null);return function(){var n=Array.prototype.slice.call(arguments),o=r(n),a=o&&t[o];return a||(a=new(i.bind.apply(e,[null].concat(n))),o&&(t[o]=a)),a}}},function(e,t,n){"use strict";var i=Function.prototype.bind||function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),r.prototype=new i,r},r=Object.prototype.hasOwnProperty,o=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),a=(!o&&Object.prototype.__defineGetter__,o?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):(!r.call(e,t)||"value"in n)&&(e[t]=n.value)}),s=Object.create||function(e,t){var n,i;function o(){}for(i in o.prototype=e,n=new o,t)r.call(t,i)&&a(n,i,t[i]);return n};t.bind=i,t.defineProperty=a,t.objCreate=s},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(159)],void 0===(r=function(e,t,n,i,r){"use strict";return i.View.extend({events:{},initialize:function(){t.bindAll(this,t.functionsIn(this))},setupProgress:function(e){this.$el=e.el$||this.$el,this.text$=e.text$,this.itemsAdded=e.itemsAdded||0,this.itemsResolved=e.itemsResolved||0,this.pct=e.pct||0,this._eventNames=e.eventNames,this.initialText=e.initialText},render:function(){this.$el.html(r.toString()),this._eventNames&&this._eventNames.updateText&&(marvel.events.on(this._eventNames.updateText,this._handleProgressUpdateText),this.text$&&""===this.text$.text()&&this.text$.html("&nbsp;")),this.progress$=this.$el.find(".progress-bar-fill"),this.initialText&&this.setText(this.initialText),this._eventNames&&this._eventNames.setPct?(this._setProgressPercent(this.pct),marvel.events.on(this._eventNames.setPct,this._handleProgressSetPct)):(this._setProgressPercent(this.itemsResolved/this.itemsAdded),this._eventNames&&this._eventNames.add&&marvel.events.on(this._eventNames.add,this._handleProgressItemAdded),this._eventNames&&this._eventNames.resolved&&marvel.events.on(this._eventNames.resolved,this._handleProgressItemResolved))},_setProgressPercent:function(e){e>1?e=1:e<0&&(e=0),this.pct=e,this.progress$.css("transform","scaleX("+this.pct+")")},_updateProgressPercent:function(){var e=this.itemsResolved/this.itemsAdded;this._setProgressPercent(e)},_handleProgressItemAdded:function(e){this.itemsAdded+=e||1,this._updateProgressPercent()},_handleProgressItemResolved:function(e){this.itemsResolved+=e||1,this._updateProgressPercent()},_handleProgressSetPct:function(e){this.pct=e,this._setProgressPercent(e)},setText:function(e){this._handleProgressUpdateText(e)},_handleProgressUpdateText:function(e){this.text$&&((e=e||"").jquery?(this.text$.html(""),this.text$.append(e)):this.text$.text(e))},hide:function(){this._eventNames.add&&marvel.events.off(this._eventNames.add,this._handleProgressItemAdded),this._eventNames.resolved&&marvel.events.off(this._eventNames.resolved,this._handleProgressItemResolved),this._eventNames.setPct&&marvel.events.off(this._eventNames.setPct,this._handleProgressSetPct),this._eventNames.updateText&&marvel.events.off(this._eventNames.updateText,this._handleProgressUpdateText)}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="progress-bar-view">\n    <div class="progress-bar-bg">\n        <div class="progress-bar-fill"></div>\n    </div>\n</div>\n'},function(e,t){e.exports='<div class="confirm-view-bg mrvl-overlay-overlay-bg">\n</div>\n<div class="confirm-view-shell mrvl-overlay-shell" data-auto="confirm-view-shell">\n    <h2 class="confirm-view-dialog-title dialog-title" data-auto="confirm-view-title">{{confirm-view-default-title}}</h2>\n    <div class="confirm-view-content-shell mrvl-overlay-content-shell">\n        <div class="confirm-main-content">\n            <div class="confirm-view-content mrvl-overlay-content">\n                <div class="confirm-view-thumbnail"></div>\n                <div class="confirm-progress-bar" data-auto="confirm-progress-bar"></div>\n                <div class="wait-spinner" data-auto="wait-spinner"></div>\n                <div class="wait-success"></div>\n                <p class="confirm-view-dialog-text" data-auto="confirm-view-text"></p>\n                <div class="confirm-view-prompt-field-area hide">\n                    <input class="confirm-view-prompt-field" data-auto="confirm-view-prompt-field">\n                </div>\n            </div>\n\n            <div class="mrvl-dlg-btn-acts">\n                <div class="sp-cta-button-secondary" data-auto="cancel-btn">{{confirm-view-default-verb-cancel}}</div>\n                <div class="sp-cta-button-primary confirm-btn-0" data-auto="confirm-btn">{{confirm-view-default-verb-ok}}</div>\n                <div class="sp-cta-button-primary confirm-btn-1 hide" data-auto="confirm-btn-1">{{confirm-view-default-verb-ok}}</div>\n                <div class="sp-cta-button-primary confirm-btn-2 hide" data-auto="confirm-btn-2">{{confirm-view-default-verb-ok}}</div>\n            </div>\n        </div>\n    </div>\n    <button class="confirm-view-close-btn x-close-btn">X</button>\n</div>\n'},function(e,t,n){var i=n(162);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(69);(e.exports=n(34)(!1)).push([e.i,".sp-cta-button-primary,.sp-cta-button-secondary{height:32px;border-radius:24px;font-size:15px;font-weight:700;line-height:30px;padding:0 16px;min-width:75px;text-align:center;cursor:pointer;transition:background-color .3s,color .3s}.sp-cta-button-primary.link,.sp-cta-button-secondary.link{text-decoration:none;line-height:32px}.sp-cta-button-primary.disabled,.sp-cta-button-secondary.disabled{background-color:rgba(130,145,155,.09);color:#d8dde0}.sp-cta-button-primary.disabled:active,.sp-cta-button-primary.disabled:hover,.sp-cta-button-secondary.disabled:active,.sp-cta-button-secondary.disabled:hover{cursor:default;background-color:rgba(130,145,155,.09)}.sp-cta-button-primary{color:#fff;background-color:#1473e6}.sp-cta-button-primary:hover{background-color:#1269d0}.sp-cta-button-primary:active{background-color:#1056a7}.sp-cta-button-secondary{color:#82919b;background-color:transparent;border:2px solid #82919b;line-height:28px;transition:background-color .3s,color .3s,border-color .3s}.sp-cta-button-secondary:hover{background-color:#82919b;color:#fff}.sp-cta-button-secondary:active{background-color:#35414c;border-color:#35414c;color:#fff}.sp-cta-button-secondary.over-dark,.sp-cta-button-secondary.over-dark-photo{color:#dce0e3;border-color:#dce0e3}.sp-cta-button-secondary.over-dark-photo.over-dark-photo,.sp-cta-button-secondary.over-dark.over-dark-photo{color:#fff;border-color:#fff}.sp-cta-button-secondary.over-dark-photo:hover,.sp-cta-button-secondary.over-dark:hover{color:#35414c;background-color:#dce0e3}.sp-cta-button-secondary.over-dark-photo:hover.over-dark-photo,.sp-cta-button-secondary.over-dark:hover.over-dark-photo{background-color:#fff}.sp-cta-button-secondary.over-dark-photo:active,.sp-cta-button-secondary.over-dark:active{background-color:#35414c;border-color:#35414c;color:#fff}.sp-cta-button-secondary.over-dark-photo{color:#fff;border:2px solid #fff}.sp-cta-button-secondary.over-dark-photo:hover{color:#35414c;background-color:#fff}.sp-cta-button-secondary.over-dark-photo:active{background-color:#35414c;border-color:#35414c;color:#fff}.mrvl-dlg-btn-acts .sp-cta-button-primary,.mrvl-dlg-btn-acts .sp-cta-button-secondary{margin-left:5px;margin-right:5px}.mrvl-dlg-btn-acts .sp-cta-button-primary:first-child,.mrvl-dlg-btn-acts .sp-cta-button-secondary:first-child{margin-left:0}.mrvl-dlg-btn-acts .sp-cta-button-primary:last-child,.mrvl-dlg-btn-acts .sp-cta-button-secondary:last-child{margin-right:0}.mrvl-overlay-overlay-bg{z-index:106;position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.8)}.mrvl-overlay-shell{z-index:106;position:fixed;background-color:#fff;border-radius:10px;width:580px;height:500px;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}.mrvl-overlay-shell .marvel-overlay-shell-content{background-color:#fff;border-radius:5px;position:absolute;top:30px;bottom:0;width:100%}.mrvl-overlay-shell .mrvl-overlay-content-shell{padding:30px 30px 25px}.mrvl-overlay-shell .mrvl-overlay-content{margin-bottom:80px}.mrvl-overlay-shell .mrvl-overlay-content p{font-size:1.38em;font-weight:400;line-height:1.5;color:#35414c;word-wrap:break-word}.mrvl-overlay-shell .dialog-title{font-size:2em;font-weight:700;background-color:#f2f4f5;text-align:left;font-family:brandon-grotesque,adobe-clean,sans-serif;color:#35414c;margin:0;padding:20px 25px;border-top-left-radius:10px;border-top-right-radius:10px}.mrvl-overlay-shell h2{font-size:2.4em;color:#484848}.mrvl-overlay-shell h2,.mrvl-overlay-shell h3{font-weight:300;text-align:center;margin:30px 0 16px}.mrvl-overlay-shell h3{font-size:1.8em;color:#666}.mrvl-overlay-shell .x-close-btn{position:absolute;right:20px;top:20px;background-color:transparent;border:none;outline:none;color:#999;cursor:pointer;font-size:1.4em}.mrvl-overlay-shell .cancel-btn,.mrvl-overlay-shell .done-btn{background-color:transparent;color:#ccc;border:1px solid #ccc}.mrvl-overlay-shell .mrvl-dlg-btn-acts{position:absolute;bottom:27px;text-align:right;right:25px;width:100%}.mrvl-overlay-shell .mrvl-dlg-btn-acts .cancel-btn{background-color:#9aa6af}.mrvl-overlay-shell .mrvl-dlg-btn-acts .cancel-btn:hover{background-color:#82919b}.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn{background-color:#35657c}.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn:hover{background-color:#35414c}.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn a{color:#fff;background-color:#35657c}.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn:hover a,.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn a:hover{background-color:#35414c}.mrvl-overlay-shell .mrvl-dlg-btn-acts .cancel-btn,.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn,.mrvl-overlay-shell .mrvl-dlg-btn-acts .done-btn{padding:10px 16px;color:#fff;text-decoration:none;border-radius:40px;font-weight:700;font-size:1.23em;margin:0;line-height:1;height:36px;border:0}@-moz-document url-prefix(){.mrvl-overlay-shell .mrvl-dlg-btn-acts .cancel-btn,.mrvl-overlay-shell .mrvl-dlg-btn-acts .confirm-btn,.mrvl-overlay-shell .mrvl-dlg-btn-acts .done-btn{line-height:-moz-block-height!important}}.mrvl-overlay-shell .mrvl-dlg-btn-acts .mrvl-btn{display:inline-block;margin:0 5px;overflow:hidden;position:relative}.mrvl-overlay-shell .mrvl-dlg-btn-acts .mrvl-btn:last-child{margin-right:0}.mrvl-overlay-shell.short{height:250px}.mrvl-overlay-shell .flag-toggle{width:62px;height:28px;cursor:pointer;display:inline-block;position:relative}.mrvl-overlay-shell .flag-toggle.selected .toggle-values{left:0}.mrvl-overlay-shell .flag-toggle.selected .toggle-handle{left:33px}.mrvl-overlay-shell .flag-toggle:not(.selected) .toggle-handle{left:-3px}.mrvl-overlay-shell .flag-toggle .toggle-handle,.mrvl-overlay-shell .flag-toggle .toggle-values{transition-property:left;transition:left .19s linear;transition-duration:.19s;transition-timing-function:linear;transition-delay:0s}.mrvl-overlay-shell .flag-toggle .toggle-values{width:116px;height:24px;position:absolute;z-index:0;left:-58px}.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-off,.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-on{width:58px;line-height:24px;text-transform:uppercase;display:inline-block;font-size:11px;font-weight:700}.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-off.toggle-values-on,.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-on.toggle-values-on{background-color:#1473e6;text-align:left;color:#1473e6;padding-left:10px}.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-off.toggle-values-off,.mrvl-overlay-shell .flag-toggle .toggle-values .toggle-values-on.toggle-values-off{background-color:#82909b;text-align:right;color:#82909b;padding-right:10px}.mrvl-overlay-shell .flag-toggle .toggle-mask{position:absolute;overflow:hidden;width:58px;height:24px;z-index:1;top:2px}.mrvl-overlay-shell .flag-toggle .toggle-mask .toggle-values-image-mask{position:absolute;top:0;left:0;width:58px;height:24px;z-index:1;background-image:url("+i(n(163))+');background-size:cover}.mrvl-overlay-shell .flag-toggle .toggle-handle{height:28px;width:28px;border-radius:14px;background-color:#dce0e3;position:absolute;z-index:2}.mrvl-overlay-shell .flag-toggle .toggle-handle .dot{background-color:#81919b;width:6px;height:6px;border-radius:3px;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.confirm-overlay .confirm-view-bg,.confirm-overlay .index-progress-view-bg,.confirm-overlay .move-view-bg{z-index:10001}.confirm-overlay .confirm-view-bg.transparent-overlay,.confirm-overlay .index-progress-view-bg.transparent-overlay,.confirm-overlay .move-view-bg.transparent-overlay{background-color:transparent}.confirm-overlay .confirm-view-shell,.confirm-overlay .index-progress-view-shell,.confirm-overlay .move-view-shell{width:inherit;height:auto;min-width:440px;min-height:222px;z-index:10002;border-radius:4px;padding:40px}.confirm-overlay .confirm-view-shell.alert .cancel-btn,.confirm-overlay .index-progress-view-shell.alert .cancel-btn,.confirm-overlay .move-view-shell.alert .cancel-btn{display:none}.confirm-overlay .confirm-view-shell.prompt.mrvl-overlay-shell .dialog-title,.confirm-overlay .index-progress-view-shell.prompt.mrvl-overlay-shell .dialog-title,.confirm-overlay .move-view-shell.prompt.mrvl-overlay-shell .dialog-title{border-color:transparent}.confirm-overlay .confirm-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta,.confirm-overlay .index-progress-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta,.confirm-overlay .move-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta{margin-bottom:0;padding-bottom:4px}.confirm-overlay .confirm-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta:after,.confirm-overlay .index-progress-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta:after,.confirm-overlay .move-view-shell.prompt.mrvl-overlay-shell .dialog-title.beta:after{background:#1473e6;color:#fff;font-size:10px;font-family:adobe-clean,sans-serif;content:"BETA";margin-left:20px;border-radius:0;padding:3px 5px;display:inline-block;-webkit-transform:translateY(-4px);transform:translateY(-4px)}.confirm-overlay .confirm-view-shell .wait-spinner,.confirm-overlay .index-progress-view-shell .wait-spinner,.confirm-overlay .move-view-shell .wait-spinner{display:none}.confirm-overlay .confirm-view-shell .wait-success,.confirm-overlay .index-progress-view-shell .wait-success,.confirm-overlay .move-view-shell .wait-success{display:none;width:63px;height:63px;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);background-image:url(/images/brandkit/blue-check.svg);background-repeat:no-repeat;background-size:28px 28px;background-position:center 14px;border:4px solid #1d6ae5;border-radius:100px;margin-top:-9px}.confirm-overlay .confirm-view-shell .confirm-progress-bar,.confirm-overlay .confirm-view-shell.showing-progress .confirm-btn,.confirm-overlay .confirm-view-shell.showing-progress:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .confirm-view-shell.showing-progress:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .confirm-view-shell.showing-progress:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .confirm-view-shell.showing-waiter-success .confirm-btn,.confirm-overlay .confirm-view-shell.showing-waiter-success:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .confirm-view-shell.showing-waiter-success:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .confirm-view-shell.showing-waiter-success:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .confirm-view-shell.showing-waiter .confirm-btn,.confirm-overlay .confirm-view-shell.showing-waiter:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .confirm-view-shell.showing-waiter:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .confirm-view-shell.showing-waiter:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .index-progress-view-shell .confirm-progress-bar,.confirm-overlay .index-progress-view-shell.showing-progress .confirm-btn,.confirm-overlay .index-progress-view-shell.showing-progress:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .index-progress-view-shell.showing-progress:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .index-progress-view-shell.showing-progress:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .index-progress-view-shell.showing-waiter-success .confirm-btn,.confirm-overlay .index-progress-view-shell.showing-waiter-success:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .index-progress-view-shell.showing-waiter-success:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .index-progress-view-shell.showing-waiter-success:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .index-progress-view-shell.showing-waiter .confirm-btn,.confirm-overlay .index-progress-view-shell.showing-waiter:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .index-progress-view-shell.showing-waiter:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .index-progress-view-shell.showing-waiter:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .move-view-shell .confirm-progress-bar,.confirm-overlay .move-view-shell.showing-progress .confirm-btn,.confirm-overlay .move-view-shell.showing-progress:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .move-view-shell.showing-progress:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .move-view-shell.showing-progress:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .move-view-shell.showing-waiter-success .confirm-btn,.confirm-overlay .move-view-shell.showing-waiter-success:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .move-view-shell.showing-waiter-success:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .move-view-shell.showing-waiter-success:not(.can-cancel-waiter) .mrvl-dlg-btn-acts,.confirm-overlay .move-view-shell.showing-waiter .confirm-btn,.confirm-overlay .move-view-shell.showing-waiter:not(.can-cancel-waiter) .cancel-btn,.confirm-overlay .move-view-shell.showing-waiter:not(.can-cancel-waiter) .confirm-view-close-btn,.confirm-overlay .move-view-shell.showing-waiter:not(.can-cancel-waiter) .mrvl-dlg-btn-acts{display:none}.confirm-overlay .confirm-view-shell.showing-progress.showing-waiter .wait-spinner,.confirm-overlay .confirm-view-shell.showing-waiter-success.showing-waiter .wait-spinner,.confirm-overlay .confirm-view-shell.showing-waiter.showing-waiter .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-progress.showing-waiter .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-waiter-success.showing-waiter .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-waiter.showing-waiter .wait-spinner,.confirm-overlay .move-view-shell.showing-progress.showing-waiter .wait-spinner,.confirm-overlay .move-view-shell.showing-waiter-success.showing-waiter .wait-spinner,.confirm-overlay .move-view-shell.showing-waiter.showing-waiter .wait-spinner{-webkit-animation:blue-spinner-anim 1s steps(60) infinite forwards;animation:blue-spinner-anim 1s steps(60) infinite forwards;background:50% url('+i(n(164))+") no-repeat;width:68px;height:68px;position:relative;display:block;margin-bottom:1.5rem;margin-top:-12px}@-webkit-keyframes blue-spinner-anim{0%{background-position:0 0}to{background-position:-4080px 0}}@keyframes blue-spinner-anim{0%{background-position:0 0}to{background-position:-4080px 0}}.confirm-overlay .confirm-view-shell.showing-progress.showing-progress .confirm-progress-bar,.confirm-overlay .confirm-view-shell.showing-waiter-success.showing-progress .confirm-progress-bar,.confirm-overlay .confirm-view-shell.showing-waiter.showing-progress .confirm-progress-bar,.confirm-overlay .index-progress-view-shell.showing-progress.showing-progress .confirm-progress-bar,.confirm-overlay .index-progress-view-shell.showing-waiter-success.showing-progress .confirm-progress-bar,.confirm-overlay .index-progress-view-shell.showing-waiter.showing-progress .confirm-progress-bar,.confirm-overlay .move-view-shell.showing-progress.showing-progress .confirm-progress-bar,.confirm-overlay .move-view-shell.showing-waiter-success.showing-progress .confirm-progress-bar,.confirm-overlay .move-view-shell.showing-waiter.showing-progress .confirm-progress-bar{display:block;position:relative;width:80%;margin:10px auto;height:4px;border-radius:0}.confirm-overlay .confirm-view-shell.showing-progress.mrvl-overlay-shell .dialog-title,.confirm-overlay .confirm-view-shell.showing-waiter-success.mrvl-overlay-shell .dialog-title,.confirm-overlay .confirm-view-shell.showing-waiter.mrvl-overlay-shell .dialog-title,.confirm-overlay .index-progress-view-shell.showing-progress.mrvl-overlay-shell .dialog-title,.confirm-overlay .index-progress-view-shell.showing-waiter-success.mrvl-overlay-shell .dialog-title,.confirm-overlay .index-progress-view-shell.showing-waiter.mrvl-overlay-shell .dialog-title,.confirm-overlay .move-view-shell.showing-progress.mrvl-overlay-shell .dialog-title,.confirm-overlay .move-view-shell.showing-waiter-success.mrvl-overlay-shell .dialog-title,.confirm-overlay .move-view-shell.showing-waiter.mrvl-overlay-shell .dialog-title{text-align:center;border-bottom-color:transparent}.confirm-overlay .confirm-view-shell.showing-progress.waiter-has-text .wait-spinner,.confirm-overlay .confirm-view-shell.showing-waiter-success.waiter-has-text .wait-spinner,.confirm-overlay .confirm-view-shell.showing-waiter.waiter-has-text .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-progress.waiter-has-text .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-waiter-success.waiter-has-text .wait-spinner,.confirm-overlay .index-progress-view-shell.showing-waiter.waiter-has-text .wait-spinner,.confirm-overlay .move-view-shell.showing-progress.waiter-has-text .wait-spinner,.confirm-overlay .move-view-shell.showing-waiter-success.waiter-has-text .wait-spinner,.confirm-overlay .move-view-shell.showing-waiter.waiter-has-text .wait-spinner{margin-bottom:1rem;margin-top:-24px}.confirm-overlay .confirm-view-shell.showing-progress .confirm-view-dialog-text,.confirm-overlay .confirm-view-shell.showing-waiter-success .confirm-view-dialog-text,.confirm-overlay .confirm-view-shell.showing-waiter .confirm-view-dialog-text,.confirm-overlay .index-progress-view-shell.showing-progress .confirm-view-dialog-text,.confirm-overlay .index-progress-view-shell.showing-waiter-success .confirm-view-dialog-text,.confirm-overlay .index-progress-view-shell.showing-waiter .confirm-view-dialog-text,.confirm-overlay .move-view-shell.showing-progress .confirm-view-dialog-text,.confirm-overlay .move-view-shell.showing-waiter-success .confirm-view-dialog-text,.confirm-overlay .move-view-shell.showing-waiter .confirm-view-dialog-text{text-align:center}.confirm-overlay .confirm-view-shell.showing-progress:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .confirm-view-shell.showing-waiter-success:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .confirm-view-shell.showing-waiter:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .index-progress-view-shell.showing-progress:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .index-progress-view-shell.showing-waiter-success:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .index-progress-view-shell.showing-waiter:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .move-view-shell.showing-progress:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .move-view-shell.showing-waiter-success:not(.can-cancel-waiter).showing-waiter .confirm-view-content,.confirm-overlay .move-view-shell.showing-waiter:not(.can-cancel-waiter).showing-waiter .confirm-view-content{margin-bottom:inherit}.confirm-overlay .confirm-view-shell.showing-waiter-success .wait-success,.confirm-overlay .index-progress-view-shell.showing-waiter-success .wait-success,.confirm-overlay .move-view-shell.showing-waiter-success .wait-success{display:block}.confirm-overlay .confirm-view-shell .cancel-btn,.confirm-overlay .confirm-view-shell .confirm-btn,.confirm-overlay .confirm-view-shell .mrvl-btn,.confirm-overlay .index-progress-view-shell .cancel-btn,.confirm-overlay .index-progress-view-shell .confirm-btn,.confirm-overlay .index-progress-view-shell .mrvl-btn,.confirm-overlay .move-view-shell .cancel-btn,.confirm-overlay .move-view-shell .confirm-btn,.confirm-overlay .move-view-shell .mrvl-btn{text-align:center}.confirm-overlay .confirm-view-shell .confirm-dialog-link,.confirm-overlay .index-progress-view-shell .confirm-dialog-link,.confirm-overlay .move-view-shell .confirm-dialog-link{font-weight:600;color:#35414c}.confirm-overlay .confirm-view-shell .confirm-view-prompt-field,.confirm-overlay .index-progress-view-shell .confirm-view-prompt-field,.confirm-overlay .move-view-shell .confirm-view-prompt-field{color:#35414c;border:1px solid #dce0e3;border-width:0 0 1px;width:100%;font-size:3em;line-height:-moz-block-height;padding-bottom:2px;font-family:adobe-clean,sans-serif}.confirm-overlay .confirm-view-shell .confirm-view-prompt-field:focus,.confirm-overlay .index-progress-view-shell .confirm-view-prompt-field:focus,.confirm-overlay .move-view-shell .confirm-view-prompt-field:focus{outline:none;border-color:#1473e6}.confirm-overlay .confirm-view-shell .confirm-view-prompt-field.error,.confirm-overlay .index-progress-view-shell .confirm-view-prompt-field.error,.confirm-overlay .move-view-shell .confirm-view-prompt-field.error{border-color:#e63c4b}.confirm-overlay .confirm-view-shell .x-close-btn,.confirm-overlay .index-progress-view-shell .x-close-btn,.confirm-overlay .move-view-shell .x-close-btn{position:absolute;right:25px;top:25px;background-image:url("+i(n(58))+');background-color:transparent;background-repeat:no-repeat;background-size:contain;background-position:50%;width:20px;height:20px;border:none;outline:none;cursor:pointer;color:transparent;transition:opacity .3s ease-in;opacity:.7}.confirm-overlay .confirm-view-shell .x-close-btn:hover,.confirm-overlay .index-progress-view-shell .x-close-btn:hover,.confirm-overlay .move-view-shell .x-close-btn:hover{opacity:1}.confirm-overlay .confirm-view-shell span,.confirm-overlay .index-progress-view-shell span,.confirm-overlay .move-view-shell span{font-weight:400;color:#35414c}.confirm-overlay .confirm-view-shell span em,.confirm-overlay .index-progress-view-shell span em,.confirm-overlay .move-view-shell span em{font-weight:700}.confirm-overlay .confirm-view-shell a,.confirm-overlay .index-progress-view-shell a,.confirm-overlay .move-view-shell a{text-decoration:none;cursor:pointer;color:#35414c;font-weight:700;opacity:.9}.confirm-overlay .confirm-view-shell a:hover,.confirm-overlay .index-progress-view-shell a:hover,.confirm-overlay .move-view-shell a:hover{opacity:1}.confirm-overlay .confirm-view-shell .sp-cta-button-primary a,.confirm-overlay .confirm-view-shell .sp-cta-button-secondary a,.confirm-overlay .index-progress-view-shell .sp-cta-button-primary a,.confirm-overlay .index-progress-view-shell .sp-cta-button-secondary a,.confirm-overlay .move-view-shell .sp-cta-button-primary a,.confirm-overlay .move-view-shell .sp-cta-button-secondary a{color:inherit;opacity:inherit}.confirm-overlay .confirm-view-shell .sp-cta-button-primary.disabled.sp-cta-button-primary,.confirm-overlay .confirm-view-shell .sp-cta-button-secondary.disabled.sp-cta-button-primary,.confirm-overlay .index-progress-view-shell .sp-cta-button-primary.disabled.sp-cta-button-primary,.confirm-overlay .index-progress-view-shell .sp-cta-button-secondary.disabled.sp-cta-button-primary,.confirm-overlay .move-view-shell .sp-cta-button-primary.disabled.sp-cta-button-primary,.confirm-overlay .move-view-shell .sp-cta-button-secondary.disabled.sp-cta-button-primary{opacity:.5}.confirm-overlay .confirm-view-shell b,.confirm-overlay .confirm-view-shell strong,.confirm-overlay .index-progress-view-shell b,.confirm-overlay .index-progress-view-shell strong,.confirm-overlay .move-view-shell b,.confirm-overlay .move-view-shell strong{font-weight:600}.confirm-overlay .mrvl-overlay-overlay-bg{background-color:rgba(25,34,38,.5)}.confirm-overlay .mrvl-overlay-shell .dialog-title{width:360px;font-size:22px;font-weight:700;font-family:brandon-grotesque,adobe-clean,sans-serif;background-color:inherit;padding:0 0 13px;border-bottom:2px solid #e8ebed;margin-bottom:25px}.confirm-overlay .mrvl-overlay-shell .mrvl-dlg-btn-acts{margin-top:25px;position:inherit;display:-webkit-flex;display:flex;-webkit-justify-content:flex-end;justify-content:flex-end}.confirm-overlay .mrvl-overlay-shell .mrvl-dlg-btn-acts button,.confirm-overlay .mrvl-overlay-shell .mrvl-dlg-btn-acts input[type=button]{outline:none;font-family:adobe-clean,sans-serif}.confirm-overlay .mrvl-overlay-shell .mrvl-overlay-content p{font-size:1.077em;width:360px}.confirm-overlay .mrvl-overlay-shell .mrvl-overlay-content p span{font-family:adobe-clean,sans-serif;font-weight:400;font-size:1em}.confirm-overlay .mrvl-overlay-shell .mrvl-overlay-content p span em{font-weight:700}.confirm-overlay .confirm-view-content-shell.mrvl-overlay-content-shell{padding:0}.confirm-overlay .confirm-view-content-shell.mrvl-overlay-content-shell .confirm-view-content{margin-bottom:inherit}.confirm-overlay .cancel-btn,.confirm-overlay .confirm-btn,.confirm-overlay .mrvl-btn{border-radius:40px;font-size:1.23em;font-family:adobe-clean,sans-serif;font-weight:700;height:32px;padding:6px 16px 7px;transition:background-color .2s ease-in,color .2s ease-in;text-align:center}.confirm-overlay .confirm-btn,.confirm-overlay .confirm-btn a{background-color:#1473e6;color:#fff;line-height:1.23em}.confirm-overlay .confirm-btn.confirm-btn a,.confirm-overlay .confirm-btn a.confirm-btn a{opacity:1;transition:background-color .2s ease-in,color .2s ease-in}.confirm-overlay .confirm-btn:hover,.confirm-overlay .confirm-btn a:hover{background-color:#1269d0}.confirm-overlay .confirm-btn:hover a,.confirm-overlay .confirm-btn a:hover a{background-color:#1269d0;color:#fff}.confirm-overlay .confirm-btn:active,.confirm-overlay .confirm-btn a:active{background-color:#1056a7}.confirm-overlay .confirm-btn:active a,.confirm-overlay .confirm-btn a:active a{background-color:#1056a7;color:#fff}.confirm-overlay .cancel-btn{background-color:transparent;color:#82919b;border:2px solid #82919b}.confirm-overlay .cancel-btn:active,.confirm-overlay .cancel-btn:hover{background-color:#82919b;color:#fff}.confirm-overlay.custom-font-manager-confirm .confirm-view-bg,.confirm-overlay.custom-font-manager-confirm .index-progress-view-bg,.confirm-overlay.custom-font-manager-confirm .move-view-bg{z-index:100003}.confirm-overlay.custom-font-manager-confirm .confirm-view-shell,.confirm-overlay.custom-font-manager-confirm .index-progress-view-shell,.confirm-overlay.custom-font-manager-confirm .move-view-shell{z-index:100004}.confirm-overlay .index-progress-view-shell{padding:0;width:550px}.confirm-overlay .index-progress-view-shell .index-progress-view-graphic-div{background-color:#eff1f2;border-top-left-radius:4px;border-top-right-radius:4px;overflow:hidden;position:relative}.confirm-overlay .index-progress-view-shell .index-progress-view-graphic-div .index-progress-view-curve{position:absolute;top:204px;margin-left:-85px;background-color:#e2e6e9;height:550px;width:720px;border-radius:50%}.confirm-overlay .index-progress-view-shell .index-progress-view-graphic-div .index-progress-view-graphic{height:300px;width:300px;position:relative;z-index:1;margin-left:125px}.confirm-overlay .index-progress-view-shell .index-progress-view-description{background-color:#fff;margin:30px 30px 0}.confirm-overlay .index-progress-view-shell .index-progress-view-description .index-progress-view-title{border:none;margin:0}.confirm-overlay .index-progress-view-shell .index-progress-view-description p{font-size:1.2em;font-weight:300;margin-bottom:6px}.confirm-overlay .index-progress-view-shell .index-progress-view-description .index-progress-view-warning{font-weight:700;font-style:italic}.confirm-overlay .index-progress-view-shell .index-progress-view-results{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;margin:30px}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left{width:100%}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:7px;padding-right:30px}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels .index-progress-view-label{font-weight:700;opacity:.5}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels .index-progress-view-label .loadinging-dots span{-webkit-animation:dots-blink;animation:dots-blink;-webkit-animation-duration:1.4s;animation-duration:1.4s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-fill-mode:both;animation-fill-mode:both}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels .index-progress-view-label .loadinging-dots span:nth-child(2){-webkit-animation-delay:.4s;animation-delay:.4s}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels .index-progress-view-label .loadinging-dots span:nth-child(3){-webkit-animation-delay:.8s;animation-delay:.8s}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-labels .index-complete-view-label{font-weight:700;opacity:.5}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-bar{height:8px;width:100%;padding-right:30px}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-bar .progress-bar-view{position:static}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-left .index-progress-view-progress .index-progress-view-progress-bar .progress-bar-view .progress-bar-bg .progress-bar-fill{transition:-webkit-transform .1s ease-out;transition:transform .1s ease-out;transition:transform .1s ease-out,-webkit-transform .1s ease-out}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-right{width:100%;display:-webkit-flex;display:flex;-webkit-justify-content:flex-end;justify-content:flex-end}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-right .index-progress-view-create-folder-button{padding-left:15px;padding-right:15px;height:30px;cursor:pointer;font-size:15px;font-weight:800;color:#fff;background-color:#1473e6;border-radius:20px;transition:background-color .2s}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-right .index-progress-view-create-folder-button:focus{outline:none}.confirm-overlay .index-progress-view-shell .index-progress-view-results .index-progress-view-results-right .index-progress-view-create-folder-button.disabled{background-color:#f1f1f1;color:#aeaeae}.progress-bar-view{position:absolute;height:100%;width:100%;top:0;left:0}.progress-bar-view .progress-bar-bg{height:100%;border-radius:50px;background-color:#dce0e3;overflow:hidden}.progress-bar-view .progress-bar-bg .progress-bar-fill{height:100%;width:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transform-origin:left center 0;transform-origin:left center 0;background-color:#1473e6;transition:-webkit-transform .5s ease-out;transition:transform .5s ease-out;transition:transform .5s ease-out,-webkit-transform .5s ease-out}.progress-bar-view .progress-bar-bg .progress-bar-fill.ongoing{width:95%;transition:width 6s ease-out}.mrvl-dlg-btn-area{position:absolute;bottom:30px;text-align:center;width:100%}.mrvl-dlg-btn-area .mrvl-btn{display:inline-block;margin:0 20px}.wait-spinner{content:"";position:absolute;top:50%;left:48.5%;margin:-1.5rem 0 0 -1.5rem;width:65px;height:65px;background-size:100% 100%;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-name:wait-spinner-rotate;animation-name:wait-spinner-rotate}@-webkit-keyframes wait-spinner-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes wait-spinner-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes dots-blink{0%{opacity:.2}20%{opacity:1}to{opacity:.2}}@keyframes dots-blink{0%{opacity:.2}20%{opacity:1}to{opacity:.2}}',""])},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OCAyNCIgd2lkdGg9IjU4IiBoZWlnaHQ9IjI0Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPmljb24tcGlsbC1tYXNrPC90aXRsZT48cGF0aCBpZD0icGF0aC0xIiBjbGFzcz0iY2xzLTEiIGQ9Ik0xMiwyNEgwVjEyLjE5QTEyLjA1LDEyLjA1LDAsMCwwLDEyLDI0Wm00NiwwSDQ2QTEyLjA2LDEyLjA2LDAsMCwwLDU4LDEyLjIyVjI0Wk0wLDExLjgxSDBWMEgxMS44M0ExMi4wOSwxMi4wOSwwLDAsMCwwLDExLjgxWm01OCwwQTEyLDEyLDAsMCwwLDQ2LjIxLDBINThWMTEuNzhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDApIi8+PC9zdmc+Cg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjQwODBweCIgaGVpZ2h0PSI2OHB4IiB2aWV3Qm94PSIwIDAgNDA4MCA2OCI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGwtb3BhY2l0eTowO3N0cm9rZTojMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1vcGFjaXR5OjAuMTt9Cgkuc3Qxe2ZpbGwtb3BhY2l0eTowO3N0cm9rZTojMTQ3M0U2O3N0cm9rZS13aWR0aDo0O30KPC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTM0LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBTNTAuNiw2NCwzNCw2NFM0LDUwLjYsNCwzNFMxNy40LDQsMzQsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTM0LDRMMzQsNGMxNi42LDAsMzAsMTMuNCwzMCwzMCIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTAyLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBTNzIsNTAuNiw3MiwzNFM4NS40LDQsMTAyLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xMDIuOCw0QzExOSw0LjQsMTMyLDE3LjcsMTMyLDM0YzAsMy40LTAuNiw2LjctMS42LDkuOCIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTcwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMTUzLjQsNCwxNzAsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTE3MS42LDRDMTg3LjQsNC45LDIwMCwxOCwyMDAsMzRjMCw2LjgtMi4zLDEzLjEtNi4xLDE4LjIiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIzOCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzIyMS40LDQsMjM4LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNDAuNCw0LjFDMjU1LjgsNS4zLDI2OCwxOC4yLDI2OCwzNGMwLDEwLjEtNSwxOS0xMi42LDI0LjQiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTMwNiw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzI4OS40LDQsMzA2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMDkuMSw0LjJDMzI0LjIsNS43LDMzNiwxOC41LDMzNiwzNGMwLDEzLjItOC41LDI0LjQtMjAuMywyOC40Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zNzQsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzNTcuNCw0LDM3NCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzc3LjksNC4zQzM5Mi42LDYuMiw0MDQsMTguOCw0MDQsMzRjMCwxNi0xMi42LDI5LjEtMjguNCwzMCIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDQyLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTNDI1LjQsNCw0NDIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTQ0Ni43LDQuNEM0NjEsNi42LDQ3MiwxOSw0NzIsMzRjMCwxNi42LTEzLjQsMzAtMzAsMzBjLTIuMSwwLTQuMi0wLjItNi4yLTAuNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTEwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBjLTE2LjYsMC0zMC0xMy40LTMwLTMwUzQ5My40LDQsNTEwLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik01MTUuNSw0LjVDNTI5LjQsNy4xLDU0MCwxOS4zLDU0MCwzNGMwLDE2LjYtMTMuNCwzMC0zMCwzMGMtNC43LDAtOS4yLTEuMS0xMy4yLTMuMSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNTc4LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTNTYxLjQsNCw1NzgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTU4NC4yLDQuN0M1OTcuOCw3LjUsNjA4LDE5LjYsNjA4LDM0YzAsMTYuNi0xMy40LDMwLTMwLDMwYy03LjMsMC0xNC0yLjYtMTkuMS02LjkiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTY0Niw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzYyOS40LDQsNjQ2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik02NTMsNC44QzY2Ni4yLDgsNjc2LDE5LjksNjc2LDM0YzAsMTYuNi0xMy40LDMwLTMwLDMwYy05LjcsMC0xOC4zLTQuNi0yMy44LTExLjgiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTcxNCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzY5Ny40LDQsNzE0LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik03MjEuOCw1QzczNC42LDguNCw3NDQsMjAuMSw3NDQsMzRjMCwxNi42LTEzLjQsMzAtMzAsMzBjLTEyLDAtMjIuMy03LTI3LjEtMTcuMiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNzgyLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTNzY1LjQsNCw3ODIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTc5MC41LDUuMkM4MDIuOSw4LjksODEyLDIwLjQsODEyLDM0YzAsMTYuNi0xMy40LDMwLTMwLDMwYy0xNC4xLDAtMjYtOS44LTI5LjItMjIuOSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODUwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTODMzLjQsNCw4NTAsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTg1OS4zLDUuNUM4NzEuMyw5LjQsODgwLDIwLjcsODgwLDM0YzAsMTYuNi0xMy40LDMwLTMwLDMwYy0xNi4xLDAtMjkuMy0xMi43LTMwLTI4LjYiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTkxOCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzkwMS40LDQsOTE4LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik05MjgsNS43QzkzOS43LDkuOCw5NDgsMjEsOTQ4LDM0YzAsMTYuNi0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwYzAtMS40LDAuMS0yLjgsMC4zLTQuMSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNOTg2LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTOTY5LjQsNCw5ODYsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTk5Ni44LDZjMTEuMiw0LjMsMTkuMiwxNS4yLDE5LjIsMjhjMCwxNi42LTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBjMC0zLjIsMC41LTYuMywxLjQtOS4xIi8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDU0LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMTAzNy40LDQsMTA1NCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTA2NS41LDYuM2MxMC44LDQuNSwxOC41LDE1LjIsMTguNSwyNy43YzAsMTYuNi0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwYzAtNC45LDEuMi05LjYsMy4zLTEzLjciLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTExMjIsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxMTA1LjQsNCwxMTIyLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xMTM0LjIsNi42YzEwLjUsNC43LDE3LjgsMTUuMiwxNy44LDI3LjRjMCwxNi42LTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBjMC02LjYsMi4xLTEyLjcsNS43LTE3LjYiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTExOTAsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxMTczLjQsNCwxMTkwLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xMjAzLDYuOWMxMCw0LjksMTcsMTUuMiwxNywyNy4xYzAsMTYuNi0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwYzAtOC4yLDMuMy0xNS42LDguNi0yMSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTI1OCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzEyNDEuNCw0LDEyNTgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTEyODEuNCwxNS4zYzQuMSw1LjEsNi42LDExLjYsNi42LDE4LjdjMCwxNi42LTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBjMC05LjYsNC42LTE4LjIsMTEuNi0yMy43Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMzI2LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMTMwOS40LDQsMTMyNiw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTM1NSwyNi40YzAuNiwyLjQsMSw1LDEsNy42YzAsMTYuNi0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwYzAtMTEsNi0yMC43LDE0LjktMjUuOSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTM5NCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzEzNzcuNCw0LDEzOTQsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTE0MjMuNywzOC4xYy0yLDE0LjYtMTQuNSwyNS45LTI5LjcsMjUuOWMtMTYuNiwwLTMwLTEzLjQtMzAtMzBjMC0xMi4zLDcuNS0yMywxOC4xLTI3LjYiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTE0NjIsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxNDQ1LjQsNCwxNDYyLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNDg4LjMsNDguNWMtNS4xLDkuMi0xNSwxNS41LTI2LjMsMTUuNWMtMTYuNiwwLTMwLTEzLjQtMzAtMzBjMC0xMy42LDktMjUsMjEuNC0yOC43Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xNTMwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMTUxMy40LDQsMTUzMCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTU0OS45LDU2LjRjLTUuMyw0LjctMTIuMyw3LjYtMTkuOSw3LjZjLTE2LjYsMC0zMC0xMy40LTMwLTMwYzAtMTQuNywxMC42LTI3LDI0LjYtMjkuNSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTU5OCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzE1ODEuNCw0LDE1OTgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTE2MTAsNjEuNWMtMy43LDEuNi03LjcsMi41LTEyLDIuNWMtMTYuNiwwLTMwLTEzLjQtMzAtMzBjMC0xNS44LDEyLjItMjguNywyNy42LTI5LjkiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTE2NjYsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxNjQ5LjQsNCwxNjY2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNjY5LjUsNjMuOGMtMS4yLDAuMS0yLjMsMC4yLTMuNSwwLjJjLTE2LjYsMC0zMC0xMy40LTMwLTMwczEzLjQtMzAsMzAtMzBjMC4yLDAsMC40LDAsMC41LDAiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTE3MzQsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxNzE3LjQsNCwxNzM0LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNzI5LjMsNjMuNkMxNzE1LDYxLjQsMTcwNCw0OSwxNzA0LDM0YzAtMTYuNiwxMy40LTMwLDMwLTMwYzEuMSwwLDIuMiwwLjEsMy4zLDAuMiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTgwMiw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzE3ODUuNCw0LDE4MDIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTE3OTAuMSw2MS41Yy0xMC43LTQuNi0xOC4xLTE1LjItMTguMS0yNy41YzAtMTYuNiwxMy40LTMwLDMwLTMwYzIsMCwzLjksMC4yLDUuOCwwLjYiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTE4NzAsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMxODUzLjQsNCwxODcwLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xODUyLDU4Yy03LjMtNS41LTEyLTE0LjItMTItMjRjMC0xNi42LDEzLjQtMzAsMzAtMzBjMi44LDAsNS42LDAuNCw4LjIsMS4xIi8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xOTM4LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMTkyMS40LDQsMTkzOCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTkxNS4zLDUzLjZjLTQuNS01LjMtNy4zLTEyLjEtNy4zLTE5LjZjMC0xNi42LDEzLjQtMzAsMzAtMzBjMy42LDAsNy4xLDAuNiwxMC4zLDEuOCIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjAwNiw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzE5ODkuNCw0LDIwMDYsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTE5NzkuOSw0OC43Yy0yLjUtNC4zLTMuOS05LjMtMy45LTE0LjdjMC0xNi42LDEzLjQtMzAsMzAtMzBjNC40LDAsOC42LDAuOSwxMi4zLDIuNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjA3NCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzIwNTcuNCw0LDIwNzQsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTIwNDUuNiw0My44Yy0xLTMuMS0xLjYtNi40LTEuNi05LjhjMC0xNi42LDEzLjQtMzAsMzAtMzBjNS4xLDAsOS45LDEuMywxNC4xLDMuNSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjE0Miw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzIxMjUuNCw0LDIxNDIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTIxMTIuNCwzOC45Yy0wLjMtMS42LTAuNC0zLjItMC40LTQuOWMwLTE2LjYsMTMuNC0zMCwzMC0zMGM1LjgsMCwxMS4yLDEuNiwxNS44LDQuNSIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjIxMCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzIxOTMuNCw0LDIyMTAsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTIxODAsMzQuM2MwLTAuMSwwLTAuMiwwLTAuM2MwLTE2LjYsMTMuNC0zMCwzMC0zMGM2LjQsMCwxMi40LDIsMTcuMyw1LjUiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIyNzgsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyMjYxLjQsNCwyMjc4LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yMjQ4LjMsMzAuMUMyMjUwLjIsMTUuNCwyMjYyLjgsNCwyMjc4LDRjNywwLDEzLjUsMi40LDE4LjYsNi41Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yMzQ2LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMjMyOS40LDQsMjM0Niw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMjMxNywyNi4zYzMuNC0xMi44LDE1LjEtMjIuMywyOS0yMi4zYzcuNiwwLDE0LjYsMi44LDE5LjksNy41Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNDE0LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMjM5Ny40LDQsMjQxNCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMjM4Ni4xLDIyLjlDMjM5MC41LDExLjgsMjQwMS40LDQsMjQxNCw0YzguMiwwLDE1LjYsMy4zLDIxLDguNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjQ4Miw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzI0NjUuNCw0LDI0ODIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTI0NTUuNSwyMGM1LTkuNSwxNS0xNiwyNi41LTE2YzguNywwLDE2LjUsMy43LDIyLDkuNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjU1MCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzI1MzMuNCw0LDI1NTAsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTI1MjUsMTcuNWM1LjMtOC4xLDE0LjUtMTMuNSwyNS0xMy41YzkuMiwwLDE3LjQsNC4xLDIyLjksMTAuNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjYxOCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzI2MDEuNCw0LDI2MTgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTI1OTQuNSwxNS4zQzI2MDAsOC40LDI2MDguNSw0LDI2MTgsNGM5LjYsMCwxOC4yLDQuNSwyMy43LDExLjYiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI2ODYsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyNjY5LjQsNCwyNjg2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjY0LjEsMTMuNWM1LjUtNS44LDEzLjMtOS41LDIxLjktOS41YzEwLDAsMTksNSwyNC40LDEyLjUiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI3NTQsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyNzM3LjQsNCwyNzU0LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzMzLjcsMTEuOUMyNzM5LDcsMjc0Ni4yLDQsMjc1NCw0YzEwLjUsMCwxOS43LDUuNCwyNS4xLDEzLjUiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI4MjIsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyODA1LjQsNCwyODIyLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yODAzLjIsMTAuNmM1LjEtNC4xLDExLjctNi42LDE4LjgtNi42YzEwLjksMCwyMC40LDUuOCwyNS42LDE0LjQiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI4OTAsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyODczLjQsNCwyODkwLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yODcyLjYsOS41YzQuOS0zLjQsMTAuOS01LjUsMTcuNC01LjVjMTEuMiwwLDIxLDYuMiwyNi4yLDE1LjMiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI5NTgsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMyOTQxLjQsNCwyOTU4LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yOTQyLDguNmM0LjctMi45LDEwLjEtNC42LDE2LTQuNmMxMS42LDAsMjEuNyw2LjYsMjYuNywxNi4yIi8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zMDI2LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMzAwOS40LDQsMzAyNiw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzAxMS40LDcuOGM0LjMtMi40LDkuMy0zLjgsMTQuNi0zLjhjMTIsMCwyMi4zLDcsMjcuMSwxNy4xIi8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zMDk0LDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMzA3Ny40LDQsMzA5NCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzA4MC42LDcuMWM0LTIsOC42LTMuMSwxMy40LTMuMWMxMi4zLDAsMjIuOSw3LjQsMjcuNSwxOCIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzE2Miw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzMxNDUuNCw0LDMxNjIsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTMxNDkuOCw2LjZjMy43LTEuNyw3LjgtMi42LDEyLjItMi42YzEyLjYsMCwyMy40LDcuOCwyNy45LDE4LjkiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTMyMzAsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzMjEzLjQsNCwzMjMwLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMjE4LjksNi4xYzMuNC0xLjMsNy4yLTIuMSwxMS4xLTIuMWMxMi45LDAsMjQsOC4yLDI4LjIsMTkuNyIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzI5OCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzMyODEuNCw0LDMyOTgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTMyODcuOSw1LjdjMy4yLTEuMSw2LjYtMS43LDEwLjEtMS43YzEzLjIsMCwyNC41LDguNiwyOC41LDIwLjUiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTMzNjYsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzMzQ5LjQsNCwzMzY2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMzU2LjksNS40YzIuOS0wLjksNS45LTEuNCw5LjEtMS40YzEzLjUsMCwyNSw5LDI4LjcsMjEuMyIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzQzNCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzM0MTcuNCw0LDM0MzQsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTM0MjUuOCw1LjFjMi42LTAuNyw1LjQtMS4xLDguMi0xLjFjMTMuOCwwLDI1LjUsOS40LDI5LDIyLjEiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTM1MDIsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzNDg1LjQsNCwzNTAyLDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNDk0LjcsNC45YzIuNC0wLjYsNC44LTAuOSw3LjMtMC45YzE0LjEsMCwyNiw5LjgsMjkuMiwyMi45Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zNTcwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMzU1My40LDQsMzU3MCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzU2My42LDQuN2MyLjEtMC41LDQuMi0wLjcsNi40LTAuN2MxNC40LDAsMjYuNCwxMC4yLDI5LjMsMjMuNyIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzYzOCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzM2MjEuNCw0LDM2MzgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTM2MzIuNCw0LjVjMS44LTAuMywzLjctMC41LDUuNi0wLjVjMTQuNywwLDI2LjksMTAuNiwyOS41LDI0LjUiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTM3MDYsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzNjg5LjQsNCwzNzA2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNzAxLjMsNC40YzEuNS0wLjMsMy4xLTAuNCw0LjctMC40YzE1LDAsMjcuNCwxMSwyOS42LDI1LjMiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTM3NzQsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFMzNzU3LjQsNCwzNzc0LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNzcwLjEsNC4zYzEuMi0wLjIsMi42LTAuMywzLjktMC4zYzE1LjIsMCwyNy44LDExLjQsMjkuNywyNi4xIi8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zODQyLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMzgyNS40LDQsMzg0Miw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzgzOC45LDQuMmMxLTAuMSwyLTAuMiwzLjEtMC4yYzE1LjUsMCwyOC4zLDExLjgsMjkuOCwyNi45Ii8+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0zOTEwLDRjMTYuNiwwLDMwLDEzLjQsMzAsMzBzLTEzLjQsMzAtMzAsMzBzLTMwLTEzLjQtMzAtMzBTMzg5My40LDQsMzkxMCw0eiIvPgo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzkwNy42LDQuMWMwLjgtMC4xLDEuNi0wLjEsMi40LTAuMWMxNS44LDAsMjguNywxMi4yLDI5LjksMjcuNiIvPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzk3OCw0YzE2LjYsMCwzMCwxMy40LDMwLDMwcy0xMy40LDMwLTMwLDMwcy0zMC0xMy40LTMwLTMwUzM5NjEuNCw0LDM5NzgsNHoiLz4KPHBhdGggY2xhc3M9InN0MSIgZD0iTTM5NzYuNCw0YzAuNSwwLDEuMSwwLDEuNiwwYzE2LDAsMjkuMSwxMi42LDMwLDI4LjQiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTQwNDYsNGMxNi42LDAsMzAsMTMuNCwzMCwzMHMtMTMuNCwzMC0zMCwzMHMtMzAtMTMuNC0zMC0zMFM0MDI5LjQsNCw0MDQ2LDR6Ii8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik00MDQ1LjIsNGMwLjMsMCwwLjUsMCwwLjgsMGMxNi4zLDAsMjkuNiwxMywzMCwyOS4yIi8+Cjwvc3ZnPgo="},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?e:(r=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:i+o.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(7)],void 0===(r=function(e,t,n,i,r){"use strict";return n.Model.extend({DEFAULT_AA_EVENT_TO_TRIGGER:"shown",initialize:function(e){t.bindAll(this,t.functionsIn(this)),this._setData(e)},_setData:function(e){this._experimentData=e},getExperimentName:function(){return this._experimentData.experimentName},getVariantName:function(){return this._experimentData.variantName},getMetadata:function(){return t.cloneDeep(this._experimentData.metadata)},_getStandardTypeName:function(){return this._isStandard()?"standard":"global"},_getAuthenticatedTypeName:function(){return this._isAuthenticated()?"authenticated":"unauthenticated"},_getVariantId:function(){return this._experimentData.variantId},isInSecondLockup:function(){return this._experimentData.isInSecondLockup},_isStandard:function(){return this._experimentData.isStandard},_isAuthenticated:function(){return this._experimentData.isAuthenticated},_standardizedAAEventName:function(e){var t="experiment:";return t+=this._getStandardTypeName()+":",t+=this._getAuthenticatedTypeName()+":",t+=e},track:function(e){r.setExperiment(this._experimentData,this._getStandardTypeName(),this._getAuthenticatedTypeName()),e=e||this.DEFAULT_AA_EVENT_TO_TRIGGER,r.trackEvent(this._standardizedAAEventName(e),{})}})}.apply(t,i))||(e.exports=r)},function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=function(e){return e&&DataView.prototype.isPrototypeOf(e)},r=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};d.prototype.append=function(e,t){e=s(e),t=l(t);var n=this.map[e];this.map[e]=n?n+","+t:t},d.prototype.delete=function(e){delete this.map[s(e)]},d.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},d.prototype.set=function(e,t){this.map[s(e)]=l(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),c(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),c(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),c(e)},t.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},g.call(m.prototype),g.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var a=[301,302,303,307,308];b.redirect=function(e,t){if(-1===a.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},e.Headers=d,e.Request=m,e.Response=b,e.fetch=function(e,n){return new Promise((function(i,r){var o=new m(e,n),a=new XMLHttpRequest;a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;i(new b(r,n))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===o._bodyInit?null:o._bodyInit)}))},e.fetch.polyfill=!0}function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function p(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&i(e))this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!r(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var e,t,n,i=u(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=h(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(e,t){var n,i,r=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),o.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}})),t}function b(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t,n){var i,r,o;i=[n(0),n(3),n(2),n(15),n(13),n(4),n(6),n(5),n(279),n(54),n(12)],void 0===(r=function(e,t,n,i,r,a,s,l,c,d,u){"use strict";o=n.Model.extend({initialize:function(){this.connectionManager=void 0,this.rootObjectId=void 0,this._connectionManagerPromise=void 0},_getCollabController:function(){return d},_deltaHandler:function(e){r.logger.traceflow("baton-locking","_deltaHandler, object=",e)},_batonHandler:function(e){r.logger.traceflow("baton-locking","made it to _batonHandler: resource:"+e.resourceId+" sequenceNumber:"+e.sequenceNumber+" clientId:"+e.clientId)},_errorHandler:function(e){r.logger.traceflow("baton-locking","made it to _errorHandler, object=",JSON.stringify(e))},_createConnectionManager:function(e){return new c.default.ConnectionManager(e)},_cookieOverrides:function(e){var t={host:e,pathSuffix:""};return e.match(/stage.*\.adobe.io$/)?(t.host=e.replace(/\.adobe\.io$/,".adobeprojectm.com"),t.pathSuffix=";Domain=adobeprojectm.com"):(t.host=e.replace(/\.adobe\.io$/,".adobe.com"),t.pathSuffix=";Domain=adobe.com"),t},_initializeConnectionManager:function(){if(!this._connectionManagerPromise){var e=Date.now();this._connectionManagerPromise=s.getAccessToken().then(function(e){var t={rootObjectId:this.rootObjectId,dsHost:a.discoveryServiceHost,dsEnvSelector:a.discoveryServiceEnvironment,authToken:e,syncMessageHandler:this._deltaHandler.bind(this),batonMessageHandler:this._batonHandler.bind(this),errorHandler:this._errorHandler.bind(this),cookieOverrides:this._cookieOverrides,logger:r.logger,apiKey:a.key};return this.connectionManager=this._createConnectionManager(t),this.connectionManager.connect()}.bind(this)).then(function(){this.sessionId=i.v4();var t=this.connectionManager.userId,n={deviceId:i.v4(),agent:navigator.userAgent,platform:navigator.platform};r.logger.info("BatonController - connect",{topic:this.rootObjectId,sessionId:this.sessionId,clientInfo:n,elapsed:Date.now()-e});return e=Date.now(),this.connectionManager.send(new c.default.OpenSessionRequest(this.rootObjectId,t,n,"2147483647")).then((function(){r.logger.info("BatonController - opened session",{elapsed:Date.now()-e}),r.logger.traceflow("baton-locking","Delta History session is open.")}))}.bind(this)).catch((function(t){throw r.logger.error("BatonController - connect failed",{error:t,elapsed:Date.now()-e}),t}))}return this._connectionManagerPromise},isCollaborationEnabled:function(e,t){var n=r.AdobeDCXUtil.appendPathElements("assets",e,t);return this._getCollabController().getCollaborationForPath(n).then(function(e){return!!(e&&e.collaborators&&e.collaborators.length>0)&&(this.collaborators=e.collaborators,!0)}.bind(this))},_clientIdToUserName:function(e){var t=e.split(":")[0],n=(this.collaborators||[]).find((function(e){return e.collaborator===t}));return n&&n.displayName||"Unknown user"},lockHeldByDisplayNameFromErr:function(e){return this._clientIdToUserName(e.lockHeldByUser)},acquireBatonLock:function(e,n,i){return this.rootObjectId&&this.rootObjectId!==n?(r.logger.warn("PRIOR LOCK ERROR CONDITION: asking for "+n+" but we still have "+this.rootObjectId),t.reject({code:"FAILED_TO_RELEASE_PRIOR_LOCK",usermsg:"Failed to release project lock."})):n?this.rootObjectId===n&&this._batonLockDefer?this._batonLockDefer.promise:(this.rootObjectId=n,this._batonLockDefer=t.defer(),this._batonLockRequestedTime=0,this.isCollaborationEnabled(e,this.rootObjectId).then(function(e){if(e)return this._initializeConnectionManager().then(function(){return this._batonLockRequestedTime=Date.now(),this._requestBatonLock()}.bind(this)).then(function(){r.logger.info("acquireBatonLock success",{elapsed:Date.now()-this._batonLockRequestedTime}),this._batonLockDefer.resolve({virtualBaton:!1})}.bind(this));this._batonLockDefer.resolve({virtualBaton:!0})}.bind(this)).catch(function(e){this._cleanupConnection(),this._batonLockDefer.reject(this._parseBatonError(e,Date.now()-this._batonLockRequestedTime))}.bind(this)),this._batonLockDefer.promise):t.resolve({virtualBaton:!0})},_parseBatonError:function(e,t){var n=new Error("BATON_LOCK_FAILED unable to acquire lock");return e&&e.errObject&&"ACQUIRE_BATON"===e.errObject.operation?423===e.errObject.status?(r.logger.info("AcquireBatonRequest lock denied, another user has it",Object.assign({elapsed:t},e.errObject)),n.lockHeldByUser=e.errObject.clientIds[0]):r.logger.error("baton-locking service failed with unexpected error",e):r.logger.error("unexpected error when attempting to acquire baton lock",e),n},_requestBatonLock:function(){return this.connectionManager.send(new c.default.AcquireBatonRequest([{resourceId:this.rootObjectId,sequenced:!1,allOrNone:!0}],"0",!0)).then(function(e){return r.logger.traceflow("baton-locking","AcquireBatonRequest resolved to "+JSON.stringify(e,null,2)),e}.bind(this))},_cleanupConnection:function(){if(this.connectionManager){try{this.connectionManager.cleanup()}catch(e){r.logger.traceflow("baton-locking","Caught error cleaning up connectionManager")}this.connectionManager=null}this._connectionManagerPromise=null,this.rootObjectId=null},justReleaseBatonLock:function(){return this._connectionManagerPromise?this._connectionManagerPromise.then(function(){return this._batonLockDefer.promise||t.reject(new Error("BatonController::justReleaseBatonLock"))}.bind(this)).then(function(){return this.connectionManager.send(new c.default.ReleaseBatonRequest([this.rootObjectId]))}.bind(this)).then((function(e){console.info("ReleaseBatonRequest resolved to "+JSON.stringify(e,null,2))})).finally(function(){this._batonLockDefer=null}.bind(this)):t.resolve()},releaseBatonLock:function(){return this.releaseBatonLockAndConnection()},releaseLockOnWindowUnload:function(){this.connectionManager&&this.rootObjectId&&(this.connectionManager.send(new c.default.ReleaseBatonRequest([this.rootObjectId])),this.connectionManager.send(new c.default.CloseSessionRequest))},releaseBatonLockAndConnection:function(){return this._connectionManagerPromise?this.justReleaseBatonLock().finally(function(){return this.connectionManager.send(new c.default.CloseSessionRequest)}.bind(this)).then(function(){return this._cleanupConnection(),t.resolve()}.bind(this)).catch(function(e){return e&&e.hasOwnProperty("lockHeldByUser")||r.logger.warn("BatonController: caught error releasing baton",e),this._cleanupConnection(),t.resolve()}.bind(this)):(this._cleanupConnection(),t.resolve())}})}.apply(t,i))||(e.exports=r),e.exports=o},function(e,t,n){(function(e){var i=n(170),r=n(78),o=n(176),a=n(177),s=n(37),l=t;l.request=function(t,n){t="string"==typeof t?s.parse(t):o(t);var r=-1===e.location.protocol.search(/^https?:$/)?"http:":"",a=t.protocol||r,l=t.hostname||t.host,c=t.port,d=t.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]"),t.url=(l?a+"//"+l:"")+(c?":"+c:"")+d,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var u=new i(t);return n&&u.on("response",n),u},l.get=function(e,t){var n=l.request(e,t);return n.end(),n},l.ClientRequest=i,l.IncomingMessage=r,l.Agent=function(){},l.Agent.defaultMaxSockets=4,l.STATUS_CODES=a,l.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,n(10))},function(e,t,n){(function(t,i,r){var o=n(77),a=n(14),s=n(78),l=n(79),c=n(175),d=s.IncomingMessage,u=s.readyStates;var h=e.exports=function(e){var n,i=this;l.Writable.call(i),i._opts=e,i._body=[],i._headers={},e.auth&&i.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){i.setHeader(t,e.headers[t])}));var r=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!o.abortController)r=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!o.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}i._mode=function(e,t){return o.fetch&&t?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&e?"arraybuffer":o.vbArray&&e?"text:vbarray":"text"}(n,r),i.on("finish",(function(){i._onFinish()}))};a(h,l.Writable),h.prototype.setHeader=function(e,t){var n=e.toLowerCase();-1===p.indexOf(n)&&(this._headers[n]={name:e,value:t})},h.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},h.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},h.prototype._onFinish=function(){var e=this;if(!e._destroyed){var n=e._opts,a=e._headers,s=null;"GET"!==n.method&&"HEAD"!==n.method&&(s=o.arraybuffer?c(t.concat(e._body)):o.blobConstructor?new i.Blob(e._body.map((function(e){return c(e)})),{type:(a["content-type"]||{}).value||""}):t.concat(e._body).toString());var l=[];if(Object.keys(a).forEach((function(e){var t=a[e].name,n=a[e].value;Array.isArray(n)?n.forEach((function(e){l.push([t,e])})):l.push([t,n])})),"fetch"===e._mode){var d=null;if(o.abortController){var h=new AbortController;d=h.signal,e._fetchAbortController=h,"requestTimeout"in n&&0!==n.requestTimeout&&i.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),n.requestTimeout)}i.fetch(e._opts.url,{method:e._opts.method,headers:l,body:s||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:d}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){e.emit("error",t)}))}else{var p=e._xhr=new i.XMLHttpRequest;try{p.open(e._opts.method,e._opts.url,!0)}catch(t){return void r.nextTick((function(){e.emit("error",t)}))}"responseType"in p&&(p.responseType=e._mode.split(":")[0]),"withCredentials"in p&&(p.withCredentials=!!n.withCredentials),"text"===e._mode&&"overrideMimeType"in p&&p.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(p.timeout=n.requestTimeout,p.ontimeout=function(){e.emit("requestTimeout")}),l.forEach((function(e){p.setRequestHeader(e[0],e[1])})),e._response=null,p.onreadystatechange=function(){switch(p.readyState){case u.LOADING:case u.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(p.onprogress=function(){e._onXHRProgress()}),p.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{p.send(s)}catch(t){return void r.nextTick((function(){e.emit("error",t)}))}}}},h.prototype._onXHRProgress=function(){(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},h.prototype._connect=function(){var e=this;e._destroyed||(e._response=new d(e._xhr,e._fetchResponse,e._mode),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},h.prototype._write=function(e,t,n){this._body.push(e),n()},h.prototype.abort=h.prototype.destroy=function(){this._destroyed=!0,this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},h.prototype.end=function(e,t,n){"function"==typeof e&&(n=e,e=void 0),l.Writable.prototype.end.call(this,e,t,n)},h.prototype.flushHeaders=function(){},h.prototype.setTimeout=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,n(16).Buffer,n(10),n(21))},function(e,t){},function(e,t,n){"use strict";var i=n(39).Buffer,r=n(173);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t,n,r,o=i.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=o,r=s,t.copy(n,r),s+=a.data.length,a=a.next;return o},e}(),r&&r.inspect&&r.inspect.custom&&(e.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){"use strict";e.exports=o;var i=n(84),r=n(23);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}r.inherits=n(14),r.inherits(o,i),o.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){var i=n(16).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(i.isBuffer(e)){for(var t=new Uint8Array(e.length),n=e.length,r=0;r<n;r++)t[r]=e[r];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var r in i)n.call(i,r)&&(e[r]=i[r])}return e};var n=Object.prototype.hasOwnProperty},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,n){"use strict";var i=t;function r(){i.Reader._configure(i.BufferReader),i.util._configure()}i.build="minimal",i.Writer=n(88),i.BufferWriter=n(187),i.Reader=n(89),i.BufferReader=n(188),i.util=n(18),i.rpc=n(189),i.roots=n(191),i.configure=r,i.Writer._configure(i.BufferWriter),r()},function(e,t,n){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),i=0,r=2,o=!0;for(;r<arguments.length;)n[i++]=arguments[r++];return new Promise((function(r,a){n[i]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];r.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,a(e))}}))}},function(e,t,n){"use strict";var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),o=new Array(123),a=0;a<64;)o[r[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;i.encode=function(e,t,n){for(var i,o=null,a=[],s=0,l=0;t<n;){var c=e[t++];switch(l){case 0:a[s++]=r[c>>2],i=(3&c)<<4,l=1;break;case 1:a[s++]=r[i|c>>4],i=(15&c)<<2,l=2;break;case 2:a[s++]=r[i|c>>6],a[s++]=r[63&c],l=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return l&&(a[s++]=r[i],a[s++]=61,1===l&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};i.decode=function(e,t,n){for(var i,r=n,a=0,s=0;s<e.length;){var l=e.charCodeAt(s++);if(61===l&&a>1)break;if(void 0===(l=o[l]))throw Error("invalid encoding");switch(a){case 0:i=l,a=1;break;case 1:t[n++]=i<<2|(48&l)>>4,i=l,a=2;break;case 2:t[n++]=(15&i)<<4|(60&l)>>2,i=l,a=3;break;case 3:t[n++]=(3&i)<<6|l,a=0}}if(1===a)throw Error("invalid encoding");return n-r},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){"use strict";function i(){this._listeners={}}e.exports=i,i.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},i.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},i.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}},function(e,t,n){"use strict";function i(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=128===n[3];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3]}function o(e,i,r){t[0]=e,i[r]=n[3],i[r+1]=n[2],i[r+2]=n[1],i[r+3]=n[0]}function a(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],t[0]}function s(e,i){return n[3]=e[i],n[2]=e[i+1],n[1]=e[i+2],n[0]=e[i+3],t[0]}e.writeFloatLE=i?r:o,e.writeFloatBE=i?o:r,e.readFloatLE=i?a:s,e.readFloatBE=i?s:a}():function(){function t(e,t,n,i){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,n,i);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,n,i);else{var o=Math.floor(Math.log(t)/Math.LN2);e((r<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,i)}}function n(e,t,n){var i=e(t,n),r=2*(i>>31)+1,o=i>>>23&255,a=8388607&i;return 255===o?a?NaN:r*(1/0):0===o?1401298464324817e-60*r*a:r*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,a),e.readFloatBE=n.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=128===n[7];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3],i[r+4]=n[4],i[r+5]=n[5],i[r+6]=n[6],i[r+7]=n[7]}function o(e,i,r){t[0]=e,i[r]=n[7],i[r+1]=n[6],i[r+2]=n[5],i[r+3]=n[4],i[r+4]=n[3],i[r+5]=n[2],i[r+6]=n[1],i[r+7]=n[0]}function a(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],n[4]=e[i+4],n[5]=e[i+5],n[6]=e[i+6],n[7]=e[i+7],t[0]}function s(e,i){return n[7]=e[i],n[6]=e[i+1],n[5]=e[i+2],n[4]=e[i+3],n[3]=e[i+4],n[2]=e[i+5],n[1]=e[i+6],n[0]=e[i+7],t[0]}e.writeDoubleLE=i?r:o,e.writeDoubleBE=i?o:r,e.readDoubleLE=i?a:s,e.readDoubleBE=i?s:a}():function(){function t(e,t,n,i,r,o){var a=i<0?1:0;if(a&&(i=-i),0===i)e(0,r,o+t),e(1/i>0?0:2147483648,r,o+n);else if(isNaN(i))e(0,r,o+t),e(2146959360,r,o+n);else if(i>17976931348623157e292)e(0,r,o+t),e((a<<31|2146435072)>>>0,r,o+n);else{var s;if(i<22250738585072014e-324)e((s=i/5e-324)>>>0,r,o+t),e((a<<31|s/4294967296)>>>0,r,o+n);else{var l=Math.floor(Math.log(i)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(s=i*Math.pow(2,-l))>>>0,r,o+t),e((a<<31|l+1023<<20|1048576*s&1048575)>>>0,r,o+n)}}}function n(e,t,n,i,r){var o=e(i,r+t),a=e(i,r+n),s=2*(a>>31)+1,l=a>>>20&2047,c=4294967296*(1048575&a)+o;return 2047===l?c?NaN:s*(1/0):0===l?5e-324*s*c:s*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,a,0,4),e.readDoubleBE=n.bind(null,s,4,0)}(),e}function r(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=i(i)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){"use strict";var i=t;i.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},i.read=function(e,t,n){if(n-t<1)return"";for(var i,r=null,o=[],a=0;t<n;)(i=e[t++])<128?o[a++]=i:i>191&&i<224?o[a++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(i>>10),o[a++]=56320+(1023&i)):o[a++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),a=0);return r?(a&&r.push(String.fromCharCode.apply(String,o.slice(0,a))),r.join("")):String.fromCharCode.apply(String,o.slice(0,a))},i.write=function(e,t,n){for(var i,r,o=n,a=0;a<e.length;++a)(i=e.charCodeAt(a))<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(r=e.charCodeAt(a+1)))?(i=65536+((1023&i)<<10)+(1023&r),++a,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-o}},function(e,t,n){"use strict";e.exports=function(e,t,n){var i=n||8192,r=i>>>1,o=null,a=i;return function(n){if(n<1||n>r)return e(n);a+n>i&&(o=e(i),a=0);var s=t.call(o,a,a+=n);return 7&a&&(a=1+(7|a)),s}}},function(e,t,n){"use strict";e.exports=r;var i=n(18);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=r.zero=new r(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(n,i)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(i.isString(e)){if(!i.Long)return r.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):o},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;r.fromHash=function(e){return e===a?o:new r((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";e.exports=a;var i=n(88);(a.prototype=Object.create(i.prototype)).constructor=a;var r=n(18),o=r.Buffer;function a(){i.call(this)}a.alloc=function(e){return(a.alloc=r._Buffer_allocUnsafe)(e)};var s=o&&o.prototype instanceof Uint8Array&&"set"===o.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]};function l(e,t,n){e.length<40?r.utf8.write(e,t,n):t.utf8Write(e,n)}a.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s,t,e),this},a.prototype.string=function(e){var t=o.byteLength(e);return this.uint32(t),t&&this._push(l,t,e),this}},function(e,t,n){"use strict";e.exports=o;var i=n(89);(o.prototype=Object.create(i.prototype)).constructor=o;var r=n(18);function o(e){i.call(this,e)}r.Buffer&&(o.prototype._slice=r.Buffer.prototype.slice),o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},function(e,t,n){"use strict";t.Service=n(190)},function(e,t,n){"use strict";e.exports=r;var i=n(18);function r(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(r.prototype=Object.create(i.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,n,r,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return i.asPromise(e,s,t,n,r,o);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return s.emit("error",e,t),a(e);if(null!==n){if(!(n instanceof r))try{n=r[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",n,t),a(null,n)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var i=n(193).default;n(200),(t=e.exports=i).default=t},function(e,t,n){"use strict";var i=n(194),r=n(199);i.default.__addLocaleData(r.default),i.default.defaultLocale="en",t.default=i.default},function(e,t,n){"use strict";var i=n(90),r=n(195),o=n(196),a=n(197);function s(e,t,n){var i="string"==typeof e?s.__parse(e):e;if(!i||"messageFormatPattern"!==i.type)throw new TypeError("A message must be provided as a String or AST.");n=this._mergeFormats(s.formats,n),r.defineProperty(this,"_locale",{value:this._resolveLocale(t)});var o=this._findPluralRuleFunction(this._locale),a=this._compilePattern(i,t,n,o),l=this;this.format=function(t){try{return l._format(a,t)}catch(t){throw t.variableId?new Error("The intl string context variable '"+t.variableId+"' was not provided to the string '"+e+"'"):t}}}t.default=s,r.defineProperty(s,"formats",{enumerable:!0,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}}),r.defineProperty(s,"__localeData__",{value:r.objCreate(null)}),r.defineProperty(s,"__addLocaleData",{value:function(e){if(!e||!e.locale)throw new Error("Locale data provided to IntlMessageFormat is missing a `locale` property");s.__localeData__[e.locale.toLowerCase()]=e}}),r.defineProperty(s,"__parse",{value:a.default.parse}),r.defineProperty(s,"defaultLocale",{enumerable:!0,writable:!0,value:void 0}),s.prototype.resolvedOptions=function(){return{locale:this._locale}},s.prototype._compilePattern=function(e,t,n,i){return new o.default(t,n,i).compile(e)},s.prototype._findPluralRuleFunction=function(e){for(var t=s.__localeData__,n=t[e.toLowerCase()];n;){if(n.pluralRuleFunction)return n.pluralRuleFunction;n=n.parentLocale&&t[n.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a `pluralRuleFunction` for :"+e)},s.prototype._format=function(e,t){var n,r,o,a,s,l,c="";for(n=0,r=e.length;n<r;n+=1)if("string"!=typeof(o=e[n])){if(a=o.id,!t||!i.hop.call(t,a))throw(l=new Error("A value must be provided for: "+a)).variableId=a,l;s=t[a],o.options?c+=this._format(o.getOption(s),t):c+=o.format(s)}else c+=o;return c},s.prototype._mergeFormats=function(e,t){var n,o,a={};for(n in e)i.hop.call(e,n)&&(a[n]=o=r.objCreate(e[n]),t&&i.hop.call(t,n)&&i.extend(o,t[n]));return a},s.prototype._resolveLocale=function(e){"string"==typeof e&&(e=[e]),e=(e||[]).concat(s.defaultLocale);var t,n,i,r,o=s.__localeData__;for(t=0,n=e.length;t<n;t+=1)for(i=e[t].toLowerCase().split("-");i.length;){if(r=o[i.join("-")])return r.locale;i.pop()}var a=e.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+e.join(", ")+", or the default locale: "+a)}},function(e,t,n){"use strict";var i=n(90),r=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),o=(!r&&Object.prototype.__defineGetter__,r?Object.defineProperty:function(e,t,n){"get"in n&&e.__defineGetter__?e.__defineGetter__(t,n.get):(!i.hop.call(e,t)||"value"in n)&&(e[t]=n.value)}),a=Object.create||function(e,t){var n,r;function a(){}for(r in a.prototype=e,n=new a,t)i.hop.call(t,r)&&o(n,r,t[r]);return n};t.defineProperty=o,t.objCreate=a},function(e,t,n){"use strict";function i(e,t,n){this.locales=e,this.formats=t,this.pluralFn=n}function r(e){this.id=e}function o(e,t,n,i,r){this.id=e,this.useOrdinal=t,this.offset=n,this.options=i,this.pluralFn=r}function a(e,t,n,i){this.id=e,this.offset=t,this.numberFormat=n,this.string=i}function s(e,t){this.id=e,this.options=t}t.default=i,i.prototype.compile=function(e){return this.pluralStack=[],this.currentPlural=null,this.pluralNumberFormat=null,this.compileMessage(e)},i.prototype.compileMessage=function(e){if(!e||"messageFormatPattern"!==e.type)throw new Error('Message AST is not of type: "messageFormatPattern"');var t,n,i,r=e.elements,o=[];for(t=0,n=r.length;t<n;t+=1)switch((i=r[t]).type){case"messageTextElement":o.push(this.compileMessageText(i));break;case"argumentElement":o.push(this.compileArgument(i));break;default:throw new Error("Message element does not have a valid type")}return o},i.prototype.compileMessageText=function(e){return this.currentPlural&&/(^|[^\\])#/g.test(e.value)?(this.pluralNumberFormat||(this.pluralNumberFormat=new Intl.NumberFormat(this.locales)),new a(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,e.value)):e.value.replace(/\\#/g,"#")},i.prototype.compileArgument=function(e){var t=e.format;if(!t)return new r(e.id);var n,i=this.formats,a=this.locales,l=this.pluralFn;switch(t.type){case"numberFormat":return n=i.number[t.style],{id:e.id,format:new Intl.NumberFormat(a,n).format};case"dateFormat":return n=i.date[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,n).format};case"timeFormat":return n=i.time[t.style],{id:e.id,format:new Intl.DateTimeFormat(a,n).format};case"pluralFormat":return n=this.compileOptions(e),new o(e.id,t.ordinal,t.offset,n,l);case"selectFormat":return n=this.compileOptions(e),new s(e.id,n);default:throw new Error("Message element does not have a valid format type")}},i.prototype.compileOptions=function(e){var t,n,i,r=e.format,o=r.options,a={};for(this.pluralStack.push(this.currentPlural),this.currentPlural="pluralFormat"===r.type?e:null,t=0,n=o.length;t<n;t+=1)a[(i=o[t]).selector]=this.compileMessage(i.value);return this.currentPlural=this.pluralStack.pop(),a},r.prototype.format=function(e){return e||"number"==typeof e?"string"==typeof e?e:String(e):""},o.prototype.getOption=function(e){var t=this.options;return t["="+e]||t[this.pluralFn(e-this.offset,this.useOrdinal)]||t.other},a.prototype.format=function(e){var t=this.numberFormat.format(e-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+t).replace(/\\#/g,"#")},s.prototype.getOption=function(e){var t=this.options;return t[e]||t.other}},function(e,t,n){"use strict";(t=e.exports=n(198).default).default=t},function(e,t,n){"use strict";t.default=function(){function e(t,n,i,r){this.message=t,this.expected=n,this.found=i,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){var n,i=arguments.length>1?arguments[1]:{},r={},o={start:Pe},a=Pe,s=function(e){return{type:"messageFormatPattern",elements:e,location:Ce()}},l=function(e){var t,n,i,r,o,a="";for(t=0,i=e.length;t<i;t+=1)for(n=0,o=(r=e[t]).length;n<o;n+=1)a+=r[n];return a},c=function(e){return{type:"messageTextElement",value:e,location:Ce()}},d=/^[^ \t\n\r,.+={}#]/,u={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},h="{",p={type:"literal",value:"{",description:'"{"'},f=",",g={type:"literal",value:",",description:'","'},m="}",v={type:"literal",value:"}",description:'"}"'},b=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2],location:Ce()}},y="number",w={type:"literal",value:"number",description:'"number"'},k="date",x={type:"literal",value:"date",description:'"date"'},_="time",S={type:"literal",value:"time",description:'"time"'},C=function(e,t){return{type:e+"Format",style:t&&t[2],location:Ce()}},T="plural",M={type:"literal",value:"plural",description:'"plural"'},I=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options,location:Ce()}},D="selectordinal",P={type:"literal",value:"selectordinal",description:'"selectordinal"'},A=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options,location:Ce()}},E="select",L={type:"literal",value:"select",description:'"select"'},N=function(e){return{type:"selectFormat",options:e,location:Ce()}},F="=",R={type:"literal",value:"=",description:'"="'},O=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t,location:Ce()}},B="offset:",z={type:"literal",value:"offset:",description:'"offset:"'},U=function(e){return e},j=function(e,t){return{type:"pluralFormat",offset:e,options:t,location:Ce()}},$={type:"other",description:"whitespace"},H=/^[ \t\n\r]/,V={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},G={type:"other",description:"optionalWhitespace"},K=/^[0-9]/,q={type:"class",value:"[0-9]",description:"[0-9]"},W=/^[0-9a-f]/i,Y={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Q="0",X={type:"literal",value:"0",description:'"0"'},Z=/^[1-9]/,J={type:"class",value:"[1-9]",description:"[1-9]"},ee=function(e){return parseInt(e,10)},te=/^[^{}\\\0-\x1F \t\n\r]/,ne={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},ie="\\\\",re={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},oe=function(){return"\\"},ae="\\#",se={type:"literal",value:"\\#",description:'"\\\\#"'},le=function(){return"\\#"},ce="\\{",de={type:"literal",value:"\\{",description:'"\\\\{"'},ue=function(){return"{"},he="\\}",pe={type:"literal",value:"\\}",description:'"\\\\}"'},fe=function(){return"}"},ge="\\u",me={type:"literal",value:"\\u",description:'"\\\\u"'},ve=function(e){return String.fromCharCode(parseInt(e,16))},be=function(e){return e.join("")},ye=0,we=0,ke=[{line:1,column:1,seenCR:!1}],xe=0,_e=[],Se=0;if("startRule"in i){if(!(i.startRule in o))throw new Error("Can't start parsing from rule \""+i.startRule+'".');a=o[i.startRule]}function Ce(){return Me(we,ye)}function Te(e){var n,i,r=ke[e];if(r)return r;for(n=e-1;!ke[n];)n--;for(r={line:(r=ke[n]).line,column:r.column,seenCR:r.seenCR};n<e;)"\n"===(i=t.charAt(n))?(r.seenCR||r.line++,r.column=1,r.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(r.line++,r.column=1,r.seenCR=!0):(r.column++,r.seenCR=!1),n++;return ke[e]=r,r}function Me(e,t){var n=Te(e),i=Te(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:i.line,column:i.column}}}function Ie(e){ye<xe||(ye>xe&&(xe=ye,_e=[]),_e.push(e))}function De(t,n,i,r){return null!==n&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(n),new e(null!==t?t:function(e,t){var n,i=new Array(e.length);for(n=0;n<e.length;n++)i[n]=e[n].description;return"Expected "+(e.length>1?i.slice(0,-1).join(", ")+" or "+i[e.length-1]:i[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(n,i),n,i,r)}function Pe(){return Ae()}function Ae(){var e,t,n;for(e=ye,t=[],n=Ee();n!==r;)t.push(n),n=Ee();return t!==r&&(we=e,t=s(t)),e=t}function Ee(){var e;return(e=function(){var e,n;e=ye,(n=function(){var e,n,i,o,a,s;e=ye,n=[],i=ye,(o=Re())!==r&&(a=je())!==r&&(s=Re())!==r?i=o=[o,a,s]:(ye=i,i=r);if(i!==r)for(;i!==r;)n.push(i),i=ye,(o=Re())!==r&&(a=je())!==r&&(s=Re())!==r?i=o=[o,a,s]:(ye=i,i=r);else n=r;n!==r&&(we=e,n=l(n));(e=n)===r&&(e=ye,n=Fe(),e=n!==r?t.substring(e,ye):n);return e}())!==r&&(we=e,n=c(n));return e=n}())===r&&(e=function(){var e,n,i,o,a,s,l;e=ye,123===t.charCodeAt(ye)?(n=h,ye++):(n=r,0===Se&&Ie(p));n!==r&&Re()!==r&&(i=function(){var e,n,i;if((e=ze())===r){if(e=ye,n=[],d.test(t.charAt(ye))?(i=t.charAt(ye),ye++):(i=r,0===Se&&Ie(u)),i!==r)for(;i!==r;)n.push(i),d.test(t.charAt(ye))?(i=t.charAt(ye),ye++):(i=r,0===Se&&Ie(u));else n=r;e=n!==r?t.substring(e,ye):n}return e}())!==r&&Re()!==r?(o=ye,44===t.charCodeAt(ye)?(a=f,ye++):(a=r,0===Se&&Ie(g)),a!==r&&(s=Re())!==r&&(l=function(){var e;(e=function(){var e,n,i,o,a,s;e=ye,t.substr(ye,6)===y?(n=y,ye+=6):(n=r,0===Se&&Ie(w));n===r&&(t.substr(ye,4)===k?(n=k,ye+=4):(n=r,0===Se&&Ie(x)),n===r&&(t.substr(ye,4)===_?(n=_,ye+=4):(n=r,0===Se&&Ie(S))));n!==r&&Re()!==r?(i=ye,44===t.charCodeAt(ye)?(o=f,ye++):(o=r,0===Se&&Ie(g)),o!==r&&(a=Re())!==r&&(s=je())!==r?i=o=[o,a,s]:(ye=i,i=r),i===r&&(i=null),i!==r?(we=e,n=C(n,i),e=n):(ye=e,e=r)):(ye=e,e=r);return e}())===r&&(e=function(){var e,n,i,o;e=ye,t.substr(ye,6)===T?(n=T,ye+=6):(n=r,0===Se&&Ie(M));n!==r&&Re()!==r?(44===t.charCodeAt(ye)?(i=f,ye++):(i=r,0===Se&&Ie(g)),i!==r&&Re()!==r&&(o=Ne())!==r?(we=e,n=I(o),e=n):(ye=e,e=r)):(ye=e,e=r);return e}())===r&&(e=function(){var e,n,i,o;e=ye,t.substr(ye,13)===D?(n=D,ye+=13):(n=r,0===Se&&Ie(P));n!==r&&Re()!==r?(44===t.charCodeAt(ye)?(i=f,ye++):(i=r,0===Se&&Ie(g)),i!==r&&Re()!==r&&(o=Ne())!==r?(we=e,n=A(o),e=n):(ye=e,e=r)):(ye=e,e=r);return e}())===r&&(e=function(){var e,n,i,o,a;e=ye,t.substr(ye,6)===E?(n=E,ye+=6):(n=r,0===Se&&Ie(L));if(n!==r)if(Re()!==r)if(44===t.charCodeAt(ye)?(i=f,ye++):(i=r,0===Se&&Ie(g)),i!==r)if(Re()!==r){if(o=[],(a=Le())!==r)for(;a!==r;)o.push(a),a=Le();else o=r;o!==r?(we=e,n=N(o),e=n):(ye=e,e=r)}else ye=e,e=r;else ye=e,e=r;else ye=e,e=r;else ye=e,e=r;return e}());return e}())!==r?o=a=[a,s,l]:(ye=o,o=r),o===r&&(o=null),o!==r&&(a=Re())!==r?(125===t.charCodeAt(ye)?(s=m,ye++):(s=r,0===Se&&Ie(v)),s!==r?(we=e,n=b(i,o),e=n):(ye=e,e=r)):(ye=e,e=r)):(ye=e,e=r);return e}()),e}function Le(){var e,n,i,o,a;return e=ye,Re()!==r&&(n=function(){var e,n,i,o;return e=ye,n=ye,61===t.charCodeAt(ye)?(i=F,ye++):(i=r,0===Se&&Ie(R)),i!==r&&(o=ze())!==r?n=i=[i,o]:(ye=n,n=r),(e=n!==r?t.substring(e,ye):n)===r&&(e=je()),e}())!==r&&Re()!==r?(123===t.charCodeAt(ye)?(i=h,ye++):(i=r,0===Se&&Ie(p)),i!==r&&Re()!==r&&(o=Ae())!==r&&Re()!==r?(125===t.charCodeAt(ye)?(a=m,ye++):(a=r,0===Se&&Ie(v)),a!==r?(we=e,e=O(n,o)):(ye=e,e=r)):(ye=e,e=r)):(ye=e,e=r),e}function Ne(){var e,n,i,o;if(e=ye,(n=function(){var e,n,i;return e=ye,t.substr(ye,7)===B?(n=B,ye+=7):(n=r,0===Se&&Ie(z)),n!==r&&Re()!==r&&(i=ze())!==r?(we=e,e=n=U(i)):(ye=e,e=r),e}())===r&&(n=null),n!==r)if(Re()!==r){if(i=[],(o=Le())!==r)for(;o!==r;)i.push(o),o=Le();else i=r;i!==r?(we=e,e=n=j(n,i)):(ye=e,e=r)}else ye=e,e=r;else ye=e,e=r;return e}function Fe(){var e,n;if(Se++,e=[],H.test(t.charAt(ye))?(n=t.charAt(ye),ye++):(n=r,0===Se&&Ie(V)),n!==r)for(;n!==r;)e.push(n),H.test(t.charAt(ye))?(n=t.charAt(ye),ye++):(n=r,0===Se&&Ie(V));else e=r;return Se--,e===r&&(n=r,0===Se&&Ie($)),e}function Re(){var e,n,i;for(Se++,e=ye,n=[],i=Fe();i!==r;)n.push(i),i=Fe();return e=n!==r?t.substring(e,ye):n,Se--,e===r&&(n=r,0===Se&&Ie(G)),e}function Oe(){var e;return K.test(t.charAt(ye))?(e=t.charAt(ye),ye++):(e=r,0===Se&&Ie(q)),e}function Be(){var e;return W.test(t.charAt(ye))?(e=t.charAt(ye),ye++):(e=r,0===Se&&Ie(Y)),e}function ze(){var e,n,i,o,a,s;if(e=ye,48===t.charCodeAt(ye)?(n=Q,ye++):(n=r,0===Se&&Ie(X)),n===r){if(n=ye,i=ye,Z.test(t.charAt(ye))?(o=t.charAt(ye),ye++):(o=r,0===Se&&Ie(J)),o!==r){for(a=[],s=Oe();s!==r;)a.push(s),s=Oe();a!==r?i=o=[o,a]:(ye=i,i=r)}else ye=i,i=r;n=i!==r?t.substring(n,ye):i}return n!==r&&(we=e,n=ee(n)),e=n}function Ue(){var e,n,i,o,a,s,l,c;return te.test(t.charAt(ye))?(e=t.charAt(ye),ye++):(e=r,0===Se&&Ie(ne)),e===r&&(e=ye,t.substr(ye,2)===ie?(n=ie,ye+=2):(n=r,0===Se&&Ie(re)),n!==r&&(we=e,n=oe()),(e=n)===r&&(e=ye,t.substr(ye,2)===ae?(n=ae,ye+=2):(n=r,0===Se&&Ie(se)),n!==r&&(we=e,n=le()),(e=n)===r&&(e=ye,t.substr(ye,2)===ce?(n=ce,ye+=2):(n=r,0===Se&&Ie(de)),n!==r&&(we=e,n=ue()),(e=n)===r&&(e=ye,t.substr(ye,2)===he?(n=he,ye+=2):(n=r,0===Se&&Ie(pe)),n!==r&&(we=e,n=fe()),(e=n)===r&&(e=ye,t.substr(ye,2)===ge?(n=ge,ye+=2):(n=r,0===Se&&Ie(me)),n!==r?(i=ye,o=ye,(a=Be())!==r&&(s=Be())!==r&&(l=Be())!==r&&(c=Be())!==r?o=a=[a,s,l,c]:(ye=o,o=r),(i=o!==r?t.substring(i,ye):o)!==r?(we=e,e=n=ve(i)):(ye=e,e=r)):(ye=e,e=r)))))),e}function je(){var e,t,n;if(e=ye,t=[],(n=Ue())!==r)for(;n!==r;)t.push(n),n=Ue();else t=r;return t!==r&&(we=e,t=be(t)),e=t}if((n=a())!==r&&ye===t.length)return n;throw n!==r&&ye<t.length&&Ie({type:"end",description:"end of input"}),De(null,_e,xe<t.length?t.charAt(xe):null,xe<t.length?Me(xe,xe+1):Me(xe,xe))}}}()},function(e,t,n){"use strict";t.default={locale:"en",pluralRuleFunction:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e,o=r&&n[0].slice(-1),a=r&&n[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&i?"one":"other"}}},function(e,t){},function(e,t,n){var i,r;i=[n(0),n(4)],void 0===(r=function(e,t){"use strict";return{productionModelVersion:"1.22",productionRuntimeVersion:"1.22",slateNextFeaturesModelVersion:"1.22",slateNextFeaturesRuntimeVersion:"1.22",featureFlags:[{name:"slate-next-features",usesNextRuntimeVersion:!0,usesNextModelVersion:!0,editorFeatureFlagName:"slateNextFeaturesEnabled"},{name:"slate-enable-pagentations",usesNextRuntimeVersion:!0,usesNextModelVersion:!1,editorFeatureFlagName:"slateEnablePagentations"},{name:"slate-enable-split-layout",usesNextRuntimeVersion:!0,usesNextModelVersion:!0,editorFeatureFlagName:"slateEnableSplitLayout"}],_hasFeaturePropEnabled:function(e){for(var t=marvel.features,n=this.featureFlags,i=n.length,r=0;r<i;r++)if(t.hasFeature(n[r].name)&&n[r][e])return!0;return!1},getEditorFeatureFlags:function(){for(var e={},t=marvel.features,n=this.featureFlags,i=n.length,r=0;r<i;r++){var o=n[r];o.editorFeatureFlagName&&(e[o.editorFeatureFlagName]=t.hasFeature(o.name)||!1)}return e},getRuntimeVersion:function(){return this._hasFeaturePropEnabled("usesNextRuntimeVersion")?this.slateNextFeaturesRuntimeVersion:this.productionRuntimeVersion},getEditorModelVersion:function(){return this._hasFeaturePropEnabled("usesNextModelVersion")?this.slateNextFeaturesModelVersion:this.productionModelVersion},compareVersionNumbers:function(e,t){e=((e||"0")+"").split(/\./),t=((t||"0")+"").split(/\./);for(var n=Math.max(e.length,t.length),i=0;i<n;i++){var r=parseInt(e[i]||"0",10),o=parseInt(t[i]||"0",10);if(r!=o)return r-o}return 0}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i=n(203);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";if(n(59)){var i=n(246),r=n(28),o=n(29),a=n(9),s=n(338),l=n(381),c=n(202),d=n(265),u=n(244),h=n(103),p=n(266),f=n(118),g=n(49),m=n(465),v=n(248),b=n(215),y=n(102),w=n(283),k=n(31),x=n(96),_=n(373),S=n(249),C=n(251),T=n(250).f,M=n(375),I=n(245),D=n(40),P=n(121),A=n(328),E=n(284),L=n(377),N=n(262),F=n(331),R=n(264),O=n(376),B=n(456),z=n(51),U=n(119),j=z.f,$=U.f,H=r.RangeError,V=r.TypeError,G=r.Uint8Array,K=Array.prototype,q=l.ArrayBuffer,W=l.DataView,Y=P(0),Q=P(2),X=P(3),Z=P(4),J=P(5),ee=P(6),te=A(!0),ne=A(!1),ie=L.values,re=L.keys,oe=L.entries,ae=K.lastIndexOf,se=K.reduce,le=K.reduceRight,ce=K.join,de=K.sort,ue=K.slice,he=K.toString,pe=K.toLocaleString,fe=D("iterator"),ge=D("toStringTag"),me=I("typed_constructor"),ve=I("def_constructor"),be=s.CONSTR,ye=s.TYPED,we=s.VIEW,ke=P(1,(function(e,t){return Te(E(e,e[ve]),t)})),xe=o((function(){return 1===new G(new Uint16Array([1]).buffer)[0]})),_e=!!G&&!!G.prototype.set&&o((function(){new G(1).set({})})),Se=function(e,t){var n=f(e);if(n<0||n%t)throw H("Wrong offset!");return n},Ce=function(e){if(k(e)&&ye in e)return e;throw V(e+" is not a typed array!")},Te=function(e,t){if(!(k(e)&&me in e))throw V("It is not a typed array constructor!");return new e(t)},Me=function(e,t){return Ie(E(e,e[ve]),t)},Ie=function(e,t){for(var n=0,i=t.length,r=Te(e,i);i>n;)r[n]=t[n++];return r},De=function(e,t,n){j(e,t,{get:function(){return this._d[n]}})},Pe=function(e){var t,n,i,r,o,a,s=x(e),l=arguments.length,d=l>1?arguments[1]:void 0,u=void 0!==d,h=M(s);if(null!=h&&!_(h)){for(a=h.call(s),i=[],t=0;!(o=a.next()).done;t++)i.push(o.value);s=i}for(u&&l>2&&(d=c(d,arguments[2],2)),t=0,n=g(s.length),r=Te(this,n);n>t;t++)r[t]=u?d(s[t],t):s[t];return r},Ae=function(){for(var e=0,t=arguments.length,n=Te(this,t);t>e;)n[e]=arguments[e++];return n},Ee=!!G&&o((function(){pe.call(new G(1))})),Le=function(){return pe.apply(Ee?ue.call(Ce(this)):Ce(this),arguments)},Ne={copyWithin:function(e,t){return B.call(Ce(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Z(Ce(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return O.apply(Ce(this),arguments)},filter:function(e){return Me(this,Q(Ce(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return J(Ce(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Ce(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Y(Ce(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Ce(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Ce(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ce.apply(Ce(this),arguments)},lastIndexOf:function(e){return ae.apply(Ce(this),arguments)},map:function(e){return ke(Ce(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Ce(this),arguments)},reduceRight:function(e){return le.apply(Ce(this),arguments)},reverse:function(){for(var e,t=Ce(this).length,n=Math.floor(t/2),i=0;i<n;)e=this[i],this[i++]=this[--t],this[t]=e;return this},some:function(e){return X(Ce(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return de.call(Ce(this),e)},subarray:function(e,t){var n=Ce(this),i=n.length,r=v(e,i);return new(E(n,n[ve]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,g((void 0===t?i:v(t,i))-r))}},Fe=function(e,t){return Me(this,ue.call(Ce(this),e,t))},Re=function(e){Ce(this);var t=Se(arguments[1],1),n=this.length,i=x(e),r=g(i.length),o=0;if(r+t>n)throw H("Wrong length!");for(;o<r;)this[t+o]=i[o++]},Oe={entries:function(){return oe.call(Ce(this))},keys:function(){return re.call(Ce(this))},values:function(){return ie.call(Ce(this))}},Be=function(e,t){return k(e)&&e[ye]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},ze=function(e,t){return Be(e,t=b(t,!0))?u(2,e[t]):$(e,t)},Ue=function(e,t,n){return!(Be(e,t=b(t,!0))&&k(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?j(e,t,n):(e[t]=n.value,e)};be||(U.f=ze,z.f=Ue),a(a.S+a.F*!be,"Object",{getOwnPropertyDescriptor:ze,defineProperty:Ue}),o((function(){he.call({})}))&&(he=pe=function(){return ce.call(this)});var je=p({},Ne);p(je,Oe),h(je,fe,Oe.values),p(je,{slice:Fe,set:Re,constructor:function(){},toString:he,toLocaleString:Le}),De(je,"buffer","b"),De(je,"byteOffset","o"),De(je,"byteLength","l"),De(je,"length","e"),j(je,ge,{get:function(){return this[ye]}}),e.exports=function(e,t,n,l){var c=e+((l=!!l)?"Clamped":"")+"Array",u="get"+e,p="set"+e,f=r[c],v=f||{},b=f&&C(f),y=!f||!s.ABV,x={},_=f&&f.prototype,M=function(e,n){j(e,n,{get:function(){return function(e,n){var i=e._d;return i.v[u](n*t+i.o,xe)}(this,n)},set:function(e){return function(e,n,i){var r=e._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[p](n*t+r.o,i,xe)}(this,n,e)},enumerable:!0})};y?(f=n((function(e,n,i,r){d(e,f,c,"_d");var o,a,s,l,u=0,p=0;if(k(n)){if(!(n instanceof q||"ArrayBuffer"==(l=w(n))||"SharedArrayBuffer"==l))return ye in n?Ie(f,n):Pe.call(f,n);o=n,p=Se(i,t);var v=n.byteLength;if(void 0===r){if(v%t)throw H("Wrong length!");if((a=v-p)<0)throw H("Wrong length!")}else if((a=g(r)*t)+p>v)throw H("Wrong length!");s=a/t}else s=m(n),o=new q(a=s*t);for(h(e,"_d",{b:o,o:p,l:a,e:s,v:new W(o)});u<s;)M(e,u++)})),_=f.prototype=S(je),h(_,"constructor",f)):o((function(){f(1)}))&&o((function(){new f(-1)}))&&F((function(e){new f,new f(null),new f(1.5),new f(e)}),!0)||(f=n((function(e,n,i,r){var o;return d(e,f,c),k(n)?n instanceof q||"ArrayBuffer"==(o=w(n))||"SharedArrayBuffer"==o?void 0!==r?new v(n,Se(i,t),r):void 0!==i?new v(n,Se(i,t)):new v(n):ye in n?Ie(f,n):Pe.call(f,n):new v(m(n))})),Y(b!==Function.prototype?T(v).concat(T(b)):T(v),(function(e){e in f||h(f,e,v[e])})),f.prototype=_,i||(_.constructor=f));var I=_[fe],D=!!I&&("values"==I.name||null==I.name),P=Oe.values;h(f,me,!0),h(_,ye,c),h(_,we,!0),h(_,ve,f),(l?new f(1)[ge]==c:ge in _)||j(_,ge,{get:function(){return c}}),x[c]=f,a(a.G+a.W+a.F*(f!=v),x),a(a.S,c,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o((function(){v.of.call(f,1)})),c,{from:Pe,of:Ae}),"BYTES_PER_ELEMENT"in _||h(_,"BYTES_PER_ELEMENT",t),a(a.P,c,Ne),R(c),a(a.P+a.F*_e,c,{set:Re}),a(a.P+a.F*!D,c,Oe),i||_.toString==he||(_.toString=he),a(a.P+a.F*o((function(){new f(1).slice()})),c,{slice:Fe}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()}))||!o((function(){_.toLocaleString.call([1,2])}))),c,{toLocaleString:Le}),N[c]=D?I:P,i||D||h(_,fe,P)}}else e.exports=function(){}},function(e,t,n){var i=n(208);function r(e,t){var n=(t=t||{}).delimiter||".",r=t.maxDepth,o={};return function e(a,s,l){l=l||1,Object.keys(a).forEach((function(c){var d=a[c],u=t.safe&&Array.isArray(d),h=Object.prototype.toString.call(d),p=i(d),f=s?s+n+c:c;if(!u&&!p&&("[object Object]"===h||"[object Array]"===h)&&Object.keys(d).length&&(!t.maxDepth||l<r))return e(d,f,l+1);o[f]=d}))}(e),o}e.exports=r,r.flatten=r,r.unflatten=function e(t,n){var r=(n=n||{}).delimiter||".",o=n.overwrite||!1,a={};if(i(t)||"[object Object]"!==Object.prototype.toString.call(t))return t;function s(e){var t=Number(e);return isNaN(t)||-1!==e.indexOf(".")||n.object?e:t}return Object.keys(t).sort((function(e,t){return e.length-t.length})).forEach((function(i){for(var l=i.split(r),c=s(l.shift()),d=s(l[0]),u=a;void 0!==d;){var h=Object.prototype.toString.call(u[c]),p="[object Object]"===h||"[object Array]"===h;if(!o&&!p&&void 0!==u[c])return;(o&&!p||!o&&null==u[c])&&(u[c]="number"!=typeof d||n.object?{}:[]),u=u[c],l.length>0&&(c=s(l.shift()),d=s(l[0]))}u[c]=e(t[i],n)})),a}},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e){e.exports=JSON.parse('{"toolbar":{"setting":{"project_settings":"Project settings","header_footer":"Show header and footer","google_analytics":{"label":"Google Analytics tracking ID","error":"Sorry, that\'s not a valid tracking ID. Not sure where to find it? <a href=\'https://support.google.com/analytics/answer/1008080\' target=\'_blank\'>Learn more</a>","link_placeholder":"e.g. UA-000000-0"},"cookie_banner":{"label":"Enable cookie banner on my Page","label_text":"Text &#65290;","text_error":"Enter text for the cookie banner.","text_placeholder":"Insert copy here, which should vary depending on your region.","label_link":"Consent link &#65290;","link_placeholder":"Accept","label_disclaimer":"About cookies","disclaimer":"Cookie notice requirements vary depending upon your location. The sample text above is only a placeholder. When enabled, your cookie banner will <em>only appear on your live Page</em>. After the banner has been cleared, it will not appear again for a year. <em>Please note: Changes in Settings will be applied when publishing or updating your Page</em>."}},"themes":"Themes","settings":"Settings","present":"Present","preview":"Preview","share":"Share","get_inspired":"Get Inspired"},"share_submenu":{"button":{"publish":"Publish and share link","print":"Print","invite":"Invite","new_tag":"NEW","lms_attach":"Send to Canvas","lms_turn_in":"Turn in to Canvas"},"error":{"photos":"You must replace or remove all missing photos before you can share."},"tooltip":{"new_feature_lms_canvas":"New: Send to your Canvas assignments!"}},"storage":{"credits":{"default":"{count, plural, offset:0 =0 {} =1 {Created with an image by} other {Created with images by}}"}},"print":{"unsupported":{"title":"Unsupported Browser","message":"This feature is not yet supported in your browser. Please switch to Google Chrome to enable it."},"wrong_method":{"title":"Shucks, we can\'t print this way","message":"It looks like you\'re trying to print, but you can\'t get there from here. Close this window, then click \'Share\' at the top of the editor, and choose \'Print\'."},"preview":{"close":"Close Preview","print":"Print"}},"sync":{"saving":"Saving...","saved":"Saved"},"modal_toolbar":{"save":"Save","cancel":"Cancel"},"theme_picker":{"title":"Themes","upgrade_button":{"text":"Create your own theme"},"brand_group":{"title":"Brand Themes"},"builtin_group":{"title":"Spark Themes"},"edit_theme_shortcut":"Edit theme","brand_upgrade_text":"Add your brand","brand_tool_tip_text":"Switch between your brands","brand_switcher_tool_tip_text":"Switch brand"},"progress":{"creating":{"photo":{"previews":{"count":{"label":"Creating {count, number, integer} photo previews"}}}},"complete":{"count":{"label":"{current, number, integer} of {count, number, integer} complete"}}},"dialog":{"help":{"glideshow":{"title":"Create a glideshow","content":"Glideshow gives you a beautiful new way to tell your story. Choose photos, then add text, block quotes, images, and more.","button":{"ok":"OK, got it"}}},"link":{"add_button":"Add a button","edit_button":"Edit a button"},"embedded_link":{"add_video":"Add an Embedded Video","edit_video":"Edit an Embedded Video"}},"error":{"images":{"dismiss":"OK","status":{"code":"(Error code: { code })"},"default":{"title":"Image Problem","body":"This is odd. We could not process that image for some reason. If this continues, please let us know."},"no":{"connect":{"title":"Connection Refused","body":"We called. Nobody answered. Maybe try again later."}},"not":{"found":{"title":"Unable to Save Image","body":"We\'re having trouble saving that image right now. Try again in a bit or try a different image."}},"too":{"large":{"title":"Image Too Large","body":"That\'s a big image! Try a smaller size or another image."}},"invalid":{"type":{"title":"Unsupported Image Type","body":"We do not work on image types like that. Please try again with a different type like JPG or PNG."}},"service":{"unavailable":{"title":"No Response","body":"We tried to get your image, but the service either did not respond or was taking too long. Maybe try again in a bit."}},"creating":{"preview":{"title":{"unavailable":"{count, plural, offset:0 =0 {All available} =1 {One Image Unavailable} other {# Images Unavailable}}"},"body":{"single":"Your selected image could not be read at this time. Please select a different image or try again later.","some":"One or more of your selected images could not be read at this time. Please select different images or try again later.","all":"Your selected images could not be read at this time. Please select different images or try again later."}}}}},"project":{"compatibility":{"requires":{"newer":{"version":"This story was edited in a newer version of Spark Page, and cannot be opened here."}},"confirm":{"update":"WARNING: You are about to open this story in a new version of Spark Page. It will no longer be editable in the current version of Spark Page, either on the web or on your mobile device. This cannot be undone.\\n\\nAre you sure you want to continue?"}}},"conflict_dialog":{"title":"Conflicting changes","message":"We found changes in the cloud that were made to this project on another device on ","message_advice":"You can update to the version in the cloud, or discard those changes and keep the version you\'re working on.","button":{"update":"Update to cloud","keep":"Keep this version"},"date_time":"{datetime, date, medium} at {datetime, time, short}."},"embedded_link_dialog":{"title":"Add an Embedded Video","advice":"Add a link from YouTube, Vimeo, or Spark Video.","button":{"save":"Save","cancel":"Cancel"}},"fatal_error_dialog":{"title":"Unable to open Spark Page project","button":{"ok":"Ok"},"please_text":"Please","contact_support_text":"contact support","include_details_text":"and include the following details:"},"inline_link_dialog":{"title":"Edit link","advice":"Enter a URL, such as www.example.com","button":{"save":"Save","cancel":"Cancel"}},"link_dialog":{"title":"Add a button","advice":"Enter a URL, such as www.example.com","alignment":"Alignment","button":{"save":"Save","cancel":"Cancel"},"link":{"placeholder":"Button text"}},"brand_download_dialog":{"title":"Uh Oh","message":"We had a problem downloading your brand assets. You can continue by removing the brand assets from this project, or try again later.","button":{"edit":"Edit","cancel":"Cancel"}},"brand_load_spinner":{"title":"We\'re on it...Just a moment!","message":"Loading your brand assets..."},"brand_switcher_alert":{"title":"This is a collaborative project","message":{"owner":"Please remove collaborators from this project before switching your brand.","recipient":"Only the owner can switch the brand associated with this project."},"button":{"ok":"Got it"}},"slate_spinner":{"title":"Preparing your Page for printing...","tooltip":"Closing this window will cancel the print process."},"preview":{"options":{"button_tooltip":{"close":"close","fullscreen":"fullscreen"}},"nav":{"button_tooltip":{"previous":"prev","next":"next"}}},"theme_editor_shell":{"title":"Page Theme","name":{"light":"Light","medium":"Medium","dark":"Dark","custom":"Custom Theme"},"saving":"Saving...","button":{"done":"Done"}},"theme_panel_index":{"title":"Edit theme","section":{"page":"Page","text":"Text","links_and_buttons":"Links and Buttons","photos":"Photos","more":"More"},"panel":{"page":"Background","title_section":"Title","heading":"Heading 1","subheading":"Heading 2","paragraph":"Paragraph","blockquote":"Quote","button":"Button","inline_link":"Link","inline_image":"Inline","full_width_image":"Full width","window_image":"Window","fill_screen_image":"Fill screen","photo_grid":"Grid","glideshow":"Glideshow"},"button":{"reset_changes":"Reset changes"}},"theme_components":{"blockquote":{"title":"Quote","options":{"bottom_rule":"Bottom rule","top_bottom_rule":"Top bottom rule","left_rule":"Left rule","color_band":"Color band"}},"button":{"title":"Button","options":{"square_background":"Square background","rounded_background":"Rounded background","pill_background":"Pill background","square_border":"Square border","rounded_border":"Rounded border","pill_border":"Pill border","double_border":"Double border","triangle":"Triangle"}},"glideshow":{"title":"Glideshow"},"heading":{"title":"Heading 1","options":{"none":"None","single_rule":"Single rule","double_rule":"Double rule","whimsy":"Whimsy"}},"fill_screen_image":{"title":"Fill screen photo"},"full_width_image":{"title":"Full width photo"},"inline_image":{"title":"Inline photo","options":{"none":"None","caption_background":"Caption background","image_border":"Image border"}},"inline_link":{"title":"Text link","options":{"none":"None","underline":"Underline"}},"ordered_list":{"title":"Ordered list"},"page":{"title":"Background"},"photo_grid":{"title":"Photo grid"},"simple_text":{"title":"Paragraph"},"subheading":{"title":"Heading 2"},"title_section":{"title":"Title and subtitle","options":{"gradient_overlay":"Gradient overlay","border_box":"Border box","solid_box":"Solid box","middle_rule":"Middle rule","top_bottom_rule":"Top and bottom rule","color_band":"Color band","whimsy":"Whimsy"}},"unordered_list":{"title":"Unordered list"},"window_image":{"title":"Window photo"}},"theme_labels":{"color_picker":{"background":"Background","border":"Border","hover":"Hover","normal":"Normal","shape":"Shape","subtitle_text":"Subtitle text","text":"Text","title_text":"Title text"},"opacity":{"transparent":"Transparent"},"side_panel":{"color":"Color","opacity":"Opacity","subtitle_text":"Subtitle text","style":"Style","text":"Text","title_text":"Title text"},"toggle":{"all_caps":"All caps","underline_on_hover":"Underline on hover"}},"theme_sample":{"title":"Story Title","sections":{"s00":{"text_title":"Story Title","text_subtitle":"Use this sample project to customize your Page theme. Scroll down to get started!"},"s01":{"text_00":"You\'re on your way to creating a custom Page theme. Use this sample story to edit your theme and preview changes.","text_01":"Heading 1","text_02":"This story includes all the elements you might use in your story  from paragraphs and buttons, to different photo layouts. To get started, click on any item in the story to select it, or use the tray on the right to select something.","text_03":"We include <strong>bold</strong>, <em>italics</em>, and <strong><em>bold italics</em></strong> in your theme, so you can emphasize important text accordingly. These are set automatically based on the fonts you\'ve chosen, so there\'s nothing extra for you to do.","text_04":"Button","text_05":"Heading 2","text_06":"Want to try a different color or font for the heading above? Click anywhere on the heading, and youll see customization options appear on the right.","text_07":"Use a quote to highlight something important or break up long paragraphs of text.","text_08":"Each design element has different things to customize, so try each one to explore all the options.","text_09":"<a href=\'http://spark.adobe.com\'>Text link</a>"},"s02":{"text_00":"Highlight something important with a floating caption."},"s03":{"text_00":"Your design changes are saved as you go, so dont worry about losing your work. If you\'ve made some changes and don\'t want to commit, click reset and well revert the styles to the previous state.","text_01":"List item","text_02":"List item","text_03":"List item","text_04":"List item","text_05":"List item","text_06":"List item","text_07":"Caption text","text_08":"Page includes four photo layouts, each with unique design options. Click to explore each one."},"s04":{"text_00":"Highlight something important with a floating caption."},"s05":{"text_00":"Make a bold statement with a full screen photo, or use a full width layout for a slightly more subtle effect."},"s06":{"text_00":"Caption text"},"s07":{"text_00":"Photo grids are a great way to present photos with a common theme. Add a couple photos, or many and include a caption at the bottom."},"s08":{"text_00":"Caption text"},"s09":{"text_00":"Heading 1","text_01":"Glideshows are a great way to use engaging photography to tell your story. They can include text, buttons, and inline photos.","text_02":"Button","text_03":"Heading 2","text_04":"Your styles will carry over from the body of the page, to the glideshow.","text_05":"Use a quote to highlight something important or break up long paragraphs of text."}}}}')},function(e){e.exports=JSON.parse('{"slate-web":{"da-DK":"/slate-web/locales/da-DK-effbecaa.json","de-DE":"/slate-web/locales/de-DE-c8284cd2.json","en-US":"/slate-web/locales/en-US-a286b245.json","es-ES":"/slate-web/locales/es-ES-b89dadeb.json","fi-FI":"/slate-web/locales/fi-FI-edeb91ec.json","fr-FR":"/slate-web/locales/fr-FR-e3999fbb.json","it-IT":"/slate-web/locales/it-IT-e7d433ad.json","ja-JP":"/slate-web/locales/ja-JP-f8e69a1a.json","ko-KR":"/slate-web/locales/ko-KR-1af748b1.json","nb-NO":"/slate-web/locales/nb-NO-053a4629.json","nl-NL":"/slate-web/locales/nl-NL-6a3a75df.json","pt-BR":"/slate-web/locales/pt-BR-30905459.json","sv-SE":"/slate-web/locales/sv-SE-194fcc27.json","zh-Hans-CN":"/slate-web/locales/zh-Hans-CN-1db2cae5.json","zh-Hant-TW":"/slate-web/locales/zh-Hant-TW-9189ae21.json","zz-ZZ":"/slate-web/locales/zz-ZZ-63579291.json"},"page-react":{"da-DK":"/slate-web/page-react/assets/locales/da-DK-b0b56d6c.json","de-DE":"/slate-web/page-react/assets/locales/de-DE-70150e29.json","en-US":"/slate-web/page-react/assets/locales/en-US-cbb8638e.json","es-ES":"/slate-web/page-react/assets/locales/es-ES-b2478ec4.json","fi-FI":"/slate-web/page-react/assets/locales/fi-FI-73c72d28.json","fr-FR":"/slate-web/page-react/assets/locales/fr-FR-2f5943d0.json","it-IT":"/slate-web/page-react/assets/locales/it-IT-923471e6.json","ja-JP":"/slate-web/page-react/assets/locales/ja-JP-1b8ecbad.json","ko-KR":"/slate-web/page-react/assets/locales/ko-KR-0bddae4d.json","nb-NO":"/slate-web/page-react/assets/locales/nb-NO-71768a28.json","nl-NL":"/slate-web/page-react/assets/locales/nl-NL-8283977c.json","pt-BR":"/slate-web/page-react/assets/locales/pt-BR-57bb337d.json","sv-SE":"/slate-web/page-react/assets/locales/sv-SE-f1a9f362.json","zh-Hans-CN":"/slate-web/page-react/assets/locales/zh-Hans-CN-4f24a44a.json","zh-Hant-TW":"/slate-web/page-react/assets/locales/zh-Hant-TW-aa5099bc.json","zz-ZZ":"/slate-web/page-react/assets/locales/zz-ZZ-8e6e39c8.json"}}')},,function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(98)],void 0===(r=function(e,t,n,i){"use strict";function r(e){this.items=[]}return t.extend(r.prototype,{getMetaData:function(e){return[]},setImageFilter:function(e){this._imageFilter=e},getImage:function(e){return null},haveMoreMetaData:function(){return!1},newItem:function(){return null},canSetFilter:function(){return!1},fusePath:function(e){var t,n=e[0];for(t=1;t<e.length;t++)n=n.replace(/\/$/,"")+"/"+e[t].replace(/^\//,"");return n}}),r.fusePath=r.prototype.fusePath,r}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(4),n(44)],void 0===(r=function(e,t,n,i,r,o){"use strict";return new(n.Model.extend({initialize:function(){this.deferredInit=i.defer(),o.isLoadedAndConsented().then(function(e){e&&this.onPrivacyConsentAccepted()}.bind(this)).done(),this.deferredInit.promise.then(this._init.bind(this))},_init:function(){var e;window.fbq||(e=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},window.fbq=e,window._fbq||(window._fbq=e),e.push=e,e.loaded=!0,e.version="2.0",e.queue=[],e("init",r.analytics.facebookPixelId),this._loadLibrary())},_loadLibrary:function(){if(window.location.hash&&window.location.hash.match(/^\#?from_ims/))this._hashChangeHandler||(this._hashChangeHandler=this._loadLibrary.bind(this),window.addEventListener("hashchange",this._hashChangeHandler));else{var t=document.createElement("script");t.async=!0,t.src="//connect.facebook.net/en_US/fbevents.js",e("head").append(t),this._hashChangeHandler&&window.removeEventListener("hashchange",this._hashChangeHandler)}},trackEvent:function(e,t){window.fbq&&window.fbq("track",e,t)},onPrivacyConsentAccepted:function(){this.deferredInit.resolve()}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(4),n(2)],void 0===(r=function(e,t,n,i,r){"use strict";var o=null,a={},s={},l={},c={Advertisement:{title:"Advertisement",iconURL:"/images/examples/flyer-lt.svg"},Announcement:{title:"Announcement",iconURL:"/images/examples/announcement-lt.svg"},"Animated Story":{title:"Animated Story",iconURL:"/images/examples/announcement-lt.svg"},Article:{title:"Article",iconURL:"/images/examples/webpage-lt.svg"},Brochure:{title:"Brochure",iconURL:"/images/examples/brochure-lt.svg"},Catalog:{title:"Catalog",iconURL:"/images/examples/catalog-lt.svg"},"Did You Know":{title:"Did You Know",iconURL:"/images/examples/flyer-lt.svg"},"Explainer/How To":{title:"Explainer/How To",iconURL:"/images/examples/flyer-lt.svg"},"Event Recap":{title:"Event Recap",iconURL:"/images/examples/flyer-lt.svg"},"Facebook Cover":{title:"Facebook Cover",iconURL:"/images/examples/flyer-lt.svg"},"Facts and Figures":{title:"Facts and Figures",iconURL:"/images/examples/flyer-lt.svg"},"For Fun":{title:"For Fun",iconURL:"/images/examples/flyer-lt.svg"},Flyer:{title:"Flyer",iconURL:"/images/examples/flyer-lt.svg"},Fundraiser:{title:"Fundraiser",iconURL:"/images/examples/fundraiser-lt.svg"},Greeting:{title:"Greeting",iconURL:"/images/examples/flyer-lt.svg"},"Hero Image":{title:"Hero Image",iconURL:"/images/examples/flyer-lt.svg"},Invitation:{title:"Invitation",iconURL:"/images/examples/flyer-lt.svg"},Lesson:{title:"Lesson",iconURL:"/images/examples/school-lt.svg"},"Linkedin Cover":{title:"Linkedin Cover",iconURL:"/images/examples/school-lt.svg"},Meme:{title:"Meme",iconURL:"/images/examples/flyer-lt.svg"},Newsletter:{title:"Newsletter",iconURL:"/images/examples/newsletter-lt.svg"},"Personal Story":{title:"Personal Story",iconURL:"/images/examples/photoessay-lt.svg"},"Photo Journal":{title:"Photo Journal",iconURL:"/images/examples/photoessay-lt.svg"},"Photo Story":{title:"Photo Story",iconURL:"/images/examples/photoessay-lt.svg"},Presentation:{title:"Presentation",iconURL:"/images/examples/presentation-lt.svg"},Pitch:{title:"Pitch",iconURL:"/images/examples/presentation-lt.svg"},Portfolio:{title:"Portfolio",iconURL:"/images/examples/flyer-lt.svg"},Resume:{title:"Resume",iconURL:"/images/examples/newsletter-lt.svg"},Recipe:{title:"Recipe",iconURL:"/images/examples/newsletter-lt.svg"},Report:{title:"Report",iconURL:"/images/examples/newsletter-lt.svg"},"Sales Promotion":{title:"Sales Promotion",iconURL:"/images/examples/flyer-lt.svg"},"Social Cause":{title:"Social Cause",iconURL:"/images/examples/newsletter-lt.svg"},"Social Graphic":{title:"Social Graphic",iconURL:"/images/examples/newsletter-lt.svg"},"Social Newsletter":{title:"Social Newsletter",iconURL:"/images/examples/newsletter-lt.svg"},School:{title:"School",iconURL:"/images/examples/school-lt.svg"},Testimonial:{title:"Testimonial",iconURL:"/images/examples/photoessay-lt.svg"},"Training Material":{title:"Training Material",iconURL:"/images/examples/photoessay-lt.svg"},"Travel Journal":{title:"Travel Journal",iconURL:"/images/examples/photoessay-lt.svg"},"Twitter Cover":{title:"Twitter Cover",iconURL:"/images/examples/photoessay-lt.svg"},Webpage:{title:"Webpage",iconURL:"/images/examples/webpage-lt.svg"},Whitepaper:{title:"Whitepaper",iconURL:"/images/examples/webpage-lt.svg"},Quote:{title:"Quote",iconURL:"/images/examples/flyer-lt.svg"}};function d(e){switch(e.type){case"theo":e.uri=e.imageURI||e.thumbURI;break;case"voice":e.uri=e.embedURI,e.uri||(e.uri="https://cc-api-cp.adobe.io/api/v2/voice/assets/"+e.alias+"/video/embed?api_key=LucaApp1");break;case"slate":e.uri=i.slateExampleServer+e.alias+"/"}a[e.alias]=e}return new(r.Model.extend({getUseCase:function(e){return c[e]},fetch:function(){e.ajax({method:"GET",url:"/examples/favorites",success:function(e){var n=e;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){window.marvel.logger.error("JSON parse failed when fetching list of examples and categories "+e),o.reject(e)}t.each(n.categories,(function(e){e&&e.slug&&(s[e.slug]=e)})),t.each(n["favorite-examples"],(function(e){e&&e.alias&&d(e)})),o.resolve()},error:function(e){window.marvel.logger.error("Failed to load favorite examples data "+e.status,e),o.reject(e.status)}})},loaded:function(){return o||(o=n.defer(),this.fetch()),o.promise},fetchByExample:function(t){var i=n.defer();return e.ajax({method:"GET",url:"/examples/detail/"+t,success:function(e){var t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){return window.marvel.logger.error("JSON parse failed when fetching specific example "+e),i.reject(e)}d(t),i.resolve(t)},error:function(e){window.marvel.logger.error("Failed to load example ["+t+"] data "+e.status,e),i.reject(e.status)}}),i.promise},getExamplesForType:function(e){return this.loaded().then((function(){return t.filter(a,(function(t){return t.type==e}))}))},getExamplesForTypeSample:function(e,n){return this.getExamplesForType(e).then((function(e){return t.sampleSize(e,n)}))},getExample:function(e){return a[e]?n.resolve(a[e]):(l[e]||(l[e]=this.fetchByExample(e)),l[e])},getCategories:function(){return this.loaded().then((function(){return s}))},getCategory:function(e){return this.getCategories().then((function(n){var i=null;return t.each(n,(function(t){t.slug===e&&(i=t)})),i}))},getCategoriesForNPWOverlay:function(){return this.getCategories().then((function(e){var n=t.filter(e,(function(e){return e.listedInNPWOverlay}));return n.sort((function(e,t){return e.name.localeCompare(t.name)})),n}))},getSubCategories:function(e){return this.getCategories().then((function(n){var i=t.filter(n,(function(t){return t.subcategory==e}));return i.sort((function(e,t){return e.name.localeCompare(t.name)})),i}))},getCategoryFavorites:function(e){return this.getCategory(e).then(function(e){var i=[],r=[];return t.each(e.favorites,function(e){var t=r.length;r[t]="placeholder",i.push(this.getExample(e).then((function(e){return r[t]=e,e})))}.bind(this)),n.allSettled(i).then((function(){return r}))}.bind(this))}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i=n(31);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(245)("meta"),r=n(31),o=n(102),a=n(51).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(29)((function(){return l(Object.preventExtensions({}))})),d=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},u=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";d(e)}return e[i].i},getWeak:function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;d(e)}return e[i].w},onFreeze:function(e){return c&&u.NEED&&l(e)&&!o(e,i)&&d(e),e}}},function(e,t,n){"use strict";(function(e){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==e,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var i=new ArrayBuffer(0);try{t.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),t.blob=0===r.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!n(469).Readable}catch(e){t.nodestream=!1}}).call(this,n(16).Buffer)},function(e,t,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(e[i]=n[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){var t,n,i,r,o,a;for(i=0,t=0,n=e.length;t<n;t++)i+=e[t].length;for(a=new Uint8Array(i),r=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,r),r+=o.length;return a}},a={arraySet:function(e,t,n,i,r){for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(i)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(7),n(220),n(11),n(8)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";new a({color:"blue",name:"PopOverView"});return n.View.extend({parentEl:".popover-wrapper",cachename:"popover-view",events:{"click .popover-primary-btn":"handlePrimaryClick","click .popover-secondary-btn":"handleSecondaryClick"},initialize:function(n){t.bindAll(this,t.functionsIn(this)),this.setOptions(n),"auto"===this.height&&this.determineHeight(),this.showing=!1,marvel.events.on("spark-area-change",function(){this.showing&&this.hide()}.bind(this)),e(window).resize(t.throttle(function(){this.showing&&(this.hideOnResize?this.hide():this.show())}.bind(this),1e3)),this.hideEvent&&marvel.events.on(this.hideEvent,function(){this.showing&&this.hide()}.bind(this))},setOptions:function(t){t&&(t.target&&(this.$referenceView=t.target instanceof e?t.target:e(t.target)),this.popOverName=t.name||"unnamed-takeover",this.logoURL=this._normalizeImageNameBasedOnScreen(t.logo)||void 0,this.primaryTxt=t.primaryTxt||"",this.secondaryTxt=t.secondaryTxt||"",this.dialogClass=t.dialogClass||"",this.primaryBtnTitle=t.primaryBtnTitle||"",this.secondaryBtnTitle=t.secondaryBtnTitle||"",this.primaryClickHandler=t.primaryClickHandler||void 0,this.hideHandler=t.hideHandler||void 0,this.secondaryClickHandler=t.secondaryClickHandler||void 0,this.height=t.height||"auto",this.width=t.width||340,this.direction=t.direction||"auto",this.top=t.top||void 0,this.left=t.left||void 0,this.positionOffset="number"==typeof t.positionOffset?t.positionOffset:10,this.refHeight=t.refHeight||void 0,this.refWidth=t.refWidth||void 0,this.hideEvent=t.hideEvent||void 0,this.hideOnResize=t.hideOnResize||!1,this.highlight=t.highlight||!1,this.template=t.template||o,this.keepViewOnHide=t.keepViewOnHide||!1,this.isBeta=t.isBeta||!1,this.parentCssToAdd=t.parentCssToAdd,this.analyticsEvent=t.analyticsEvent||"viewedOnboarding",this.analyticsTrigger=t.analyticsTrigger||t.name||"unnamed",this.primaryCTAAnalytic=t.primaryCTAAnalytic||"clickedOnboardingCTA",this.secondaryCTAAnalytic=t.secondaryCTAAnalytic||"clickedOnboardingMaybeLater")},handlePrimaryClick:function(){r.trackEvent(this.primaryCTAAnalytic,{trigger:this.analyticsTrigger}),t.isFunction(this.primaryClickHandler)&&this.primaryClickHandler(),this.hide()},handleSecondaryClick:function(){r.trackEvent(this.secondaryCTAAnalytic,{trigger:this.analyticsTrigger}),t.isFunction(this.secondaryClickHandler)&&this.secondaryClickHandler(),this.hide()},_isInEditor:function(){return window.marvel._siteSection&&0===window.marvel._siteSection.indexOf("editor:")},determineHeight:function(){var t=e("<div/>");t.html(s.mustacheRender(this.template,{primaryText:this.primaryTxt,isBeta:this.isBeta,secondaryText:this.secondaryTxt,dialogClass:this.dialogClass,logoURL:this.logoURL,secondaryBtnTitle:this.secondaryBtnTitle,primaryBtnTitle:this.primaryBtnTitle,height:"auto",width:this.width+"px",direction:"top"})).appendTo(this.parentEl);var n=t.find(".popover-dialog");n.css("animation","none"),this.height=n.height(),t.remove()},show:function(n){if(!n||"auto"==this.direction){var o=this.$referenceView?this.getDocumentOffset(this.$referenceView).top:this.top,a=this.$referenceView?this.getDocumentOffset(this.$referenceView).left:this.left,l=e(window).height()-(this.$referenceView?this.getDocumentOffset(this.$referenceView).top+this.$referenceView.outerHeight(!0):this.top+this.refHeight),c=e(window).width()-(this.$referenceView?this.getDocumentOffset(this.$referenceView).left+this.$referenceView.outerHeight(!0):this.left+this.refWidth),d=[{dir:"top",val:o},{dir:"left",val:a},{dir:"bottom",val:l},{dir:"right",val:c}],u=t.maxBy(d,(function(e){return e.val}));n=u&&u.dir?u.dir:"bottom",l<=this.height/2&&(n="top"),o<=this.height/2&&(n="bottom"),a<=this.width/2&&(n="right"),c<=this.width/2&&(n="left")}var h,p,f,g;switch(n){case"bottom":f="top";break;case"top":f="bottom";break;case"left":f="right";break;case"right":f="left";break;case"bottom-left":f="top-right",g="right";break;default:f="top"}this.highlight&&this.highlightElement(this.$referenceView),this.$el.html(s.mustacheRender(this.template,{primaryText:this.primaryTxt,isBeta:this.isBeta,secondaryText:this.secondaryTxt,dialogClass:this.dialogClass,logoURL:this.logoURL,secondaryBtnTitle:this.secondaryBtnTitle,primaryBtnTitle:this.primaryBtnTitle,height:this.height+"px",width:this.width+"px",direction:f}));var m=this.$el.parent();m.length||(m=e(this.parentEl)).append(this.$el),this.parentCssToAdd&&m.addClass(this.parentCssToAdd);var v=this.$el.find(".popover-dialog");this.$referenceView||(this.$referenceView={offset:function(){return{top:this.top,left:this.left}}.bind(this),outerWidth:function(){return this.refWidth}.bind(this),outerHeight:function(){return this.refHeight}.bind(this)});var b=this.positionElementAroundAnother(this.$referenceView,v,{position:n,positionOffset:this.positionOffset,align:g});return h=b.y+"px",p=b.x+"px",v.css({top:h,left:p}),v.addClass(f),this.showing=!0,r.trackEvent(this.analyticsEvent,{trigger:this.analyticsTrigger}),t.defer(function(){this.$el.removeClass("hide")}.bind(this)),this.$el.find(".popover-fixed").removeClass("hide"),t.defer(function(){e("#active-popover").click(function(e){e.stopImmediatePropagation(),this.showing&&this.hide("no-selection")}.bind(this))}.bind(this)),i(!0)},highlightElement:function(e){e.addClass("popover-highlight-element")},removeHighlight:function(e){e.removeClass("popover-highlight-element")},getDocumentOffset:function(t){var n=0,i=0;if(t=e(t)[0]){var r=t.offsetParent;for(n=t.offsetLeft,i=t.offsetTop;t;)t===r&&(n+=t.offsetLeft,i+=t.offsetTop,r=t.offsetParent),n-=t.scrollLeft||0,i-=t.scrollTop||0,t=t.parentNode}return{left:n,top:i}},positionElementAroundAnother:function(t,n,i){i=e.extend({position:"right",positionOffset:0,align:"center",alignOffset:0},i);var r=t.tagName?e(t):t,o=e(n),a=o.offsetParent();o.removeClass("top bottom left right");var s=r.offset(),l=r.outerWidth(),c=r.outerHeight(),d=a.offset(),u=o.outerWidth(),h=o.outerHeight(),p=i.positionOffset,f=i.align,g=i.alignOffset,m=s.left-d.left,v=s.top-d.top;switch(i.position){case"top":m=m+this.getAlignmentAdjustment(f,l,u)+g,v=v-h-p;break;case"bottom":case"bottom-left":m=m+this.getAlignmentAdjustment(f,l,u)+g,v=v+c+p;break;case"left":m=m-u-p,v=v+this.getAlignmentAdjustment(f,c,h)+g;break;case"right":default:m=m+l+p,v=v+this.getAlignmentAdjustment(f,c,h)+g}return{x:m,y:v}},getAlignmentAdjustment:function(e,t,n){var i=0;switch(e){case"left":case"top":i=0;break;case"right":case"bottom":i=t-n;break;case"center":default:i=(t-n)/2}return i},_normalizeImageNameBasedOnScreen:function(e){return e&&window.devicePixelRatio>1&&-1==e.indexOf("@2x")?e.replace(/\.(?=[^.]*$)/,"@2x."):e},hide:function(n){if(this.showing=!1,this.parentCssToAdd){var i=this.$el.parent();i.length&&i.removeClass(this.parentCssToAdd)}return this.$el.addClass("hide"),this.$el.find(".popover-fixed").addClass("hide"),t.isFunction(this.hideHandler)&&this.hideHandler(n),this.keepViewOnHide||(e("#active-popover").unbind("click"),this.remove()),this},remove:function(){if(this.parentCssToAdd){var e=this.$el.parent();e.length&&e.removeClass(this.parentCssToAdd)}return n.View.prototype.remove.apply(this,arguments),this}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div id="active-popover" class="popover-fixed hide"></div>\n<div class="popover-dialog {{direction}} {{#dialogClass}}{{.}}{{/dialogClass}}" style="height: {{height}}; width: {{width}}; top: {{topOffset}}; left: {{leftOffset}};">\n    <div class="popover-section">\n        {{#logoURL}}\n            <div class="popover-logo" style="background-image: url(\'{{.}}\');"></div>\n        {{/logoURL}}\n        <div class="popover-content" style="text-align:{{#logoURL}}center{{/logoURL}}{{^logoURL}}left{{/logoURL}};">\n\n            <div class="popover-primary-text{{^isBeta}} beta{{/isBeta}}">{{{primaryText}}}</div>\n            <div class="popover-secondary-text">{{{secondaryText}}}</div>\n            <div class="popover-btns">\n                {{#secondaryBtnTitle}}\n                    <button class="popover-secondary-btn">{{.}}</button>\n                {{/secondaryBtnTitle}}\n                {{#primaryBtnTitle}}\n                    <button class="popover-primary-btn">{{.}}</button>\n                {{/primaryBtnTitle}}\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(6),n(70),n(5),n(107),n(11),n(4)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c){"use strict";var d=new l({color:"rebeccapurple",name:"userProfile"});return i.Model.extend({userTypeMap:{B:"Free",IN:"Individual",INS:"Individual",ENTS:"Enterprise",ENT:"Enterprise",TM:"Teams",TMS:"Teams",K12F:"EDU Spark K12 Free",HEDF:"Edu Spark HED free",K12P:"EDU CC All apps K12 paid",Unknown:"Unknown"},initProfile:function(e){var t=n.defer();return r.isValid().then(function(){var n=r.getProfile();n&&(this._acProfile=n,this._init(e),this.loadProfileImage(this.profile.avatar,100).then(function(e){this.profile.avatar._data=e,t.resolve()}.bind(this),function(e){this.profile.avatar._data="",t.resolve()}.bind(this)))}.bind(this)),t.promise},_init:function(e){this._id=e.profileId,this._type=e.profileType,this._acProfile=this._acProfile||r.getProfile(),this._settings=t.assign({},this.defaults),this.profile=t.clone(this._settings),this.profile.displayName=this.getSetting("displayName"),this._settings.displayName=this.profile.displayName,this.profile.email=this.getSetting("email"),this.profile.getUserProfilePictureUrl=this.getUserProfilePictureUrl.bind(this)},defaults:{category:"",avatar:{default:"/images/icon-generic-avatar.svg"}},_getValueFromAuthControllerProfile:function(e){return this._acProfile[e]},getSetting:function(e){if(-1===e.indexOf("-")){if("first_name"===e||"last_name"===e){var n=this._settings.displayName;if(n===this._acProfile.displayName)return this._getValueFromAuthControllerProfile(e);var i=n&&n.split(" ")||[""];return 1===i.length?"first_name"===e?i[0]:"":"first_name"===e?i.slice(0,-1).join(" "):i[i.length-1].trim()}return"usertype"===e?this.getUserType():t.isUndefined(this._settings[e])?this._acProfile[e]:this._settings[e]}var r=s.getSettingIfEmailList(e);return r?r.value:a.hasFeature(e)},_serviceLevelToInt:function(e){return 0===e.indexOf("PAID_LVL")?parseInt(e.substring(9),10):c.serviceLevelFree},_getMaxServiceLevelFromContexts:function(e){return e.length?t.reduce(e,function(e,t){var n=this._serviceLevelToInt(t.prodCtx.serviceLevel);return Math.max(n,e)}.bind(this),c.serviceLevelFree):this._serviceLevelToInt("FREE_BASIC")},_getAllSparkProductContextsFromAll:function(e){return t.filter(e||[],(function(e){return"spark"===e.prodCtx.serviceCode}))},getPaidLevel:function(){var e=this.getSetting("serviceAccounts"),n=t.find(e,(function(e){return"spark"===e.serviceCode})),i=this.getSetting("projectedProductContext")||[],r=this._getAllSparkProductContextsFromAll(i);return Math.max(this._serviceLevelToInt(n?n.serviceLevel:"FREE_BASIC"),this._getMaxServiceLevelFromContexts(r))},getUserTypeId:function(){var e;return t.find(this.userTypeMap,function(t,n){var i="user-type-"+n;if(a.hasFeature(i)&&this.userTypeMap[n])return e=n,!0}.bind(this)),e&&"Unknown"!==e||(e="Unknown"),e},getUserType:function(){var e=this.getUserTypeId();return this.userTypeMap[e]},isEDUAccount:function(){var e=this.getUserType();return-1!==["K12F","HEDF","K12P"].indexOf(e)||!!a.hasFeature("_enterprise-safe-search")},isNonEnterpriseUser:function(){return"type1"===this._acProfile.account_type},getProfileHomeSettings:function(){return{isEDUAccount:this.isEDUAccount(),userType:this.getUserType(),canSeeInAppUpgradeMarketing:this._canSeeInAppUpgradeMarketing(),canSeeMarketing:s.userQualifiesToReceiveMarketing()}},_canSeeInAppUpgradeMarketing:function(){return!a.hasFeature("entitle-brand-kit")&&s.userQualifiesToReceiveMarketing()},canShowNonDooploImageSourceForUser:function(e,t){return"stock"===(e=e.toLowerCase())?!!a.hasFeature("stock-picker-enable-in-"+t)&&this.getSetting("user-flag-image-source-stock"):"giphy"!==e||!!a.hasFeature("image-picker-suppports-giphy")&&(!!a.hasFeature("giphy-picker-enable-in-"+t)&&this.getSetting("user-flag-image-source-giphy"))},filterDooploBitmapServicesForUser:function(e,n){var i={enabled:[],blocked:[],show:[]},r=function(e,t,n){this.getSetting(e)?n?i.enabled.push(t):i.show.push(t):i.blocked.push(t)}.bind(this);return e&&e.length?t.each(e,function(e){e=e.toLowerCase(),r(o.imageServices.flagPrefixDooplo+e,e,!0)}.bind(this)):t.each(o.imageServices.dooplo,function(e){var t=o.imageServices.flagPrefixDooplo+e;r(t,e,!0);var n=o.imageServices.showFlagPrefixDooplo+e;r(n,e,!1)}.bind(this)),i.enabled=t.filter(i.enabled,(function(e){return"The Noun Project"!==e})),i},getGetNoticedSettings:function(){var e={supported:this.isNonEnterpriseUser(),value:!1};return e.supported&&(e.value=!this.getSetting("share-default-to-unlisted")),e},isUserProfileDefaultUrl:function(e){return e===this.defaults.avatar.default},getUserProfilePictureUrl:function(e){return this.getSizedProfileImage(e)},getSizedProfileImage:function(e){return this.profile&&this.profile.avatar?this.profile.avatar._data:""},loadProfileImage:function(e,t){return e.componentName?this.getNamedImageAsset(e.componentName,t):r.getUserProfilePictureUrl("max").then(function(t){return t||e.default}.bind(this),function(t){return d.error("error loading user profile image, using default instead",t),e.default}.bind(this))},getUserProfileImageForTransload:function(e){var t,i=this.profile[e],r=n.defer();if(i)if(i._data)0===i._data.indexOf("https")||i._data===this.defaults.avatar.default?r.resolve(i._data):o.convertUrlToBlob(i._data).then((function(e){t={source:"file",file:e},r.resolve(t)}),(function(e){r.reject(e)}));else{var a=this.getNamedImageAssetComponent(e);a&&(t={source:"component",component:a}),r.resolve(t)}else r.resolve();return r.promise},getUserDisplayName:function(e){var t,n=this._settings&&this._settings.displayName;return e.preferFirstPlusInitial?this._getValueFromAuthControllerProfile("displayName")===n&&(t=this._getValueFromAuthControllerProfile("last_name")||"",""!==(n=this._getValueFromAuthControllerProfile("first_name")||"")?(n=n.charAt(0).toLocaleUpperCase()+n.substring(1),""!==t&&(n+=" "+t.charAt(0).toLocaleLowerCase())):n=t):e.preferFirst&&(n=this._getValueFromAuthControllerProfile("first_name")||"Friend"),n},emailListSettingsLoaded:function(){return s.emailListSettingsLoaded()},saveUpdatedProfileSettings:function(e){var i=e.featureFlipperChanges,r=i&&i.authenticated||{},o=[],l=s.getFilteredChanges(e),c=i&&i.numUnauthenticated?i.unauthenticated:null;return t.each(e,(function(e,t){-1!==t.indexOf("-")&&(l.settings[t]||"featureFlipperChanges"===t||(r[t]=e))})),l.differences&&o.push(s.saveAndUpdateSettings(l.differences)),t.isEmpty(r)&&!c||o.push(a.setUserFlagsBothKinds(r,c)),o.length>0?n.allSettled(o).then((function(e){return i&&i.total&&(r.featureFlipperChanges=i),r})):n.resolve(r)},uploadNamedImageAsset:function(e,t){var n=this.composite.getDCXComposite().current,i={name:e,path:e,isUpdate:!!n.getComponentWithAbsolutePath("/"+e),parent:n.getChildrenOf()[0],relationship:"rendition",type:t.type,file:t};return this.composite.pushComponentWithRetry(i).then(function(){return this.composite.saveChanges((function(){}))}.bind(this))},updateNamedImageAsset:function(e,t,n,i){var r=this.composite.getDCXComposite().current,o={name:e,relationship:"rendition",type:n||"image/jpg",path:e,isUpdate:!!r.getComponentWithAbsolutePath("/"+e),parent:r.getChildrenOf()[0],copyFrom:{source:i,assetId:t}};return this.composite.pushComponentWithRetry(o)},getNamedImageAssetComponent:function(e){return this.composite.getDCXComposite().current.getComponentWithAbsolutePath("/"+e)},getNamedImageAsset:function(e,t){var i=this.getNamedImageAssetComponent(e);return i?this.composite.getImageComponentHref(i,t):n.reject("UserProfile: no component found for "+e)}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="ddv-dropdown">\n    {{^buttonIcon}}\n    <div class="ddv-dropdown-button" data-auto="{{buttonDataAuto}}">\n        {{#buttonLabel}}<label class="ddv-dropdown-label">{{.}}</label>{{/buttonLabel}}\n        {{#buttonDisplay}}{{.}}{{/buttonDisplay}}\n    </div>\n    {{/buttonIcon}}\n    {{#buttonIcon}}\n    <div class="ddv-dropdown-button use-icon-div" data-auto="{{buttonDataAuto}}">\n        {{#buttonLabel}}<label class="ddv-dropdown-label">{{.}}</label>{{/buttonLabel}}\n        <div class="ddv-dropdown-button-text-div">{{#buttonDisplay}}{{.}}{{/buttonDisplay}}</div>\n        <div class="background-icon-div"></div>\n    </div>\n    {{/buttonIcon}}\n    <div class="ddv-dropdown-bg hide">\n    {{#items}}\n    <div class="{{itemClass}}{{#checkmarkStyle}} {{.}}{{/checkmarkStyle}}" data-auto="{{^itemDataAuto}}{{itemDataPrefix}}{{id}}{{/itemDataAuto}}{{#itemDataAuto}}{{.}}{{/itemDataAuto}}"{{#buttonText}} data-button-text="{{.}}"{{/buttonText}}>{{{name}}}\n    </div>\n    {{/items}}\n    </div>\n    <div class="ddv-dropdown-overlay hide"></div>\n</div>\n'},,function(e,t,n){"use strict";var i=n(32).nextTick,r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var o=n(23);o.inherits=n(14);var a=n(419),s=n(352);o.inherits(u,a);for(var l=r(s.prototype),c=0;c<l.length;c++){var d=l[c];u.prototype[d]||(u.prototype[d]=s.prototype[d])}function u(e){if(!(this instanceof u))return new u(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||i(p,this)}function p(e){e.end()}Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),u.prototype._destroy=function(e,t){this.push(null),this.end(),i(t,e)}},function(e,t){e.exports="<style>\n    {{#assets}}\n    #{{id}} {\n        {{^hideAssetUntilLoaded}}\n        {{^rendition}}\n        background-image: url('{{{url}}}.{{fileType}}');\n        {{/rendition}}\n        {{#rendition}}\n        background-image: url('{{{.}}}');\n        {{/rendition}}\n        {{/hideAssetUntilLoaded}}\n        {{#hwar}}\n        padding-top: {{.}};\n        {{/hwar}}\n        {{#w}}\n        width: {{.}};\n        {{/w}}\n        {{#h}}\n        height: {{.}};\n        {{/h}}\n    }\n\n    {{/assets}}\n    @media\n        only screen and (-webkit-min-device-pixel-ratio: 1.5),\n        only screen and (min--moz-device-pixel-ratio: 1.5),\n        only screen and (-o-min-device-pixel-ratio: 1.5/1),\n        only screen and (min-device-pixel-ratio: 1.5),\n        only screen and (min-resolution: 192dpi),\n        only screen and (min-resolution: 1.5dppx) {\n\n        {{#assets}}\n        #{{id}} {\n            {{^hideAssetUntilLoaded}}\n            {{^rendition}}\n            background-image: url('{{{url}}}@2x.{{fileType}}');\n            {{/rendition}}\n            {{#rendition2x}}\n            background-image: url('{{{.}}}');\n            {{/rendition2x}}\n            {{/hideAssetUntilLoaded}}\n        }\n        {{/assets}}\n</style>\n"},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(6),n(7),n(106),n(11),n(12),n(65),n(4),n(227),n(228),n(229),n(230),n(231),n(232),n(237),n(5),n(42),n(43),n(8),n(56)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u,h,p,f,g,m,v,b,y,w,k,x){"use strict";var _=new s({color:"aqua",name:"upgrade-view"}),S=[],C=n.View.extend({events:{"click .plan-buy-button":"offerButtonClick","click .view-plans-button":"viewPlansButtonClick","click .plan-get-started-button":"offerButtonClick","click .upgrade-view-close-btn":"handleCloseUpgradeView","click a":"handleAnchorClick","click .plan-see-hide-features":"handleShowFeatures"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this._controller=e.controller,this._browserStorage=new w("sessionStorage"),this._plansSectionTemplate={},this._pageVariant={}},_plans:{},_getTermInfo:function(e){return this._plans.termMap[e]},_getCommitmentTermInfo:function(e){return this._plans.commitmentAndTermMap[e]},_combineNames:function(e){var t="";if(e.length)if(1===e.length)t=e[0];else if(2===e.length)t=e[0]+" and "+e[1];else{var n;for(n=0;n<e.length-1;n++)t+=e[n]+", ";t+="and "+e[n]}return t},handleViewTransitionEnd:function(n){this._viewOverlay$.addClass("hide"),this._isView&&e(document.body).removeClass("no-scroll-upgrade-view"),t.each(S,(function(t){e(document.body).removeClass(t)}))},handleCloseUpgradeView:function(e){e&&!this._hidePlans&&this.sendPlanAnalytic("dismissPurchasePanel",{reason:"cancel"}),marvel._dialogShowing=!1,window.marvel.events.dialogClosed(),this._viewOverlay$.one("transitionend.upgradeview",this.handleViewTransitionEnd),this.needsShowing$.removeClass("showing"),e&&this._controller.upgradeViewClosed()},handleShowFeatures:function(t){t.preventDefault();var n=e(t.currentTarget),i=n.children().first();i.text().trim()===k.getString("upgrade-see-details")?(i.text(k.getString("upgrade-hide-details")),n.removeClass("see-details")):(i.text(k.getString("upgrade-see-details")),n.addClass("see-details"));var r=n.data("planclassname");e(".plan-features-"+r).toggle()},sendAnalytic:function(e,t){"string"==typeof(e=e||{})&&(e={type:e}),e.workflow=this.workflow,o.trackEvent("plansPageEvent",e,null,t)},sendPlanAnalytic:function(e,n,i){var r=this._controller.getUserAnalytics();(n=t.assign({},{trigger:this.workflow,context:this._pageVariant&&this._pageVariant.id||"unknown"},n||{},r,this._plansShowingAnalytics||{})).showingPlans&&(n.showingPlans=n.showingPlans.join(",")),o.trackEvent(e,n,null,i)},handleAnchorClick:function(t){var n=e(t.currentTarget),i=n.attr("href");if("#"===i.charAt(0))t.preventDefault(),this.scrollToElement(i);else{var r;if(n.data("app")){n.hasClass("download-app-store-button");var o=n.hasClass("download-google-play-button");n.hasClass("about-app");r={type:o?"androidAppClick":"iosAppClick",id:n.data("analytics")}}r?this.sendAnalytic(r):n.hasClass("landing-plans-edu-link")?this.sendPlanAnalytic("plansPageLinkClick:eduLink"):n.hasClass("landing-plans-cc-premium-info-link")&&this.sendPlanAnalytic("plansPageLinkClick:ccPremiumInfokLink")}},setupPlanDiv:function(n){if(this._plansShowingAnalytics.showingPlans.push(n.id),n.recommended&&(this._plansShowingAnalytics.recommended=n.id),n.div$.data("plan",n),n.price$=n.div$.find(".plan-price"),t.each(n.price$,(function(t){var i=n.offersById[e(t).data("offer")];e(t).data("offer",i)})),n.items&&n.items.length>1||n.apps)if(n.offersDropdown=new a(n.div$.find(".plan-dropdown"),n.dropdownOptions),n.apps){var i=n.div$.find(".single-app-dropdown");n.appsDropdownOptions.placeholderText=i.attr("placeholder")||k.getString("upgrade-select-application"),n.appsDropdown=new a(i,n.appsDropdownOptions),i.removeClass("hide"),n.defaultPrice&&(n.defaultPrice.div$=n.div$.find(".default-price-holder .plan-price"),n.defaultPrice.div$.addClass("selected")),n.appsDropdown.render()}else n.offersDropdown.render();else n.div$.addClass("single-offer");n.defaultOfferId&&this.setPlanOffer(n,n.defaultOfferId)},setPlanApp:function(e,n,i){var r,o=e.apps[n],a=e.selectedOfferTerms||e.defaultOfferTerms[0];t.find(o.offers,function(e){if(e.termsId===a)return r=e,!0}.bind(this)),r?e.selectedOfferTerms=r.termsId:t.find(e.defaultOfferTerms,function(t){var n=e.offersInfo.offerIdsByTerms[t];if(n)return r=n,!0}.bind(this)),e.selectedApp||(e.div$.find(".plan-pricing-area").removeClass("hide"),e.defaultPrice&&e.defaultPrice.div$.removeClass("selected")),e.selectedApp=o,e.offersDropdown.renderItems(o.offersInfo.dropdownItems,r.offerId),this.setPlanOffer(e,r)},setPlanOffer:function(n,i,r){if(n.showFreeText)return n.div$.addClass("free"),void(n.selectedOffer=i);var o;"string"==typeof i&&(i=n.offersById[i]),o=i.priceDisplay.price<=0,n.selectedPrice$&&n.selectedPrice$.removeClass("selected"),t.find(n.price$,(function(t){if(e(t).data("offer")===i)return n.selectedPrice$=e(t),!0})),n.selectedPrice$.addClass("selected"),n.selectedOffer=i,o?n.div$.addClass("free"):n.div$.removeClass("free"),r&&n.apps&&(n.selectedOfferTerms=i.termsId)},offerDropdownOnChange:function(e,t){this.setPlanOffer(e.options.plan,t,!0)},appDropdownOnChange:function(e,t){this.setPlanApp(e.options.plan,t,!0)},_getTermsPriceLineString:function(e){var t={commitment:k.getString(this._getTermInfo(e.commitment).commitment),commitmentAndTerms:k.getString(this._getCommitmentTermInfo(e.termsId))};return"mm"!==e.termsId&&(t.billing=k.getString(this._getTermInfo(e.term).billed)),t},_getOfferDropdownOption:function(e){var t=e.priceDisplay,n=this._getTermsPriceLineString(e),i=this.getMenuPriceLine(t,n);return{id:e.offerId,name:i.line,buttonText:i.buttonText}},getOffersInfo:function(e){var n={dropdownItems:[],offerIdsByTerms:{}};return t.each(e,function(e){n.offerIdsByTerms[e.termsId]=e.offerId,n.dropdownItems.push(this._getOfferDropdownOption(e))}.bind(this)),n},_initPlans:function(e){this.countryInfo=e.plansData.countryInfo;var n=[],i={};t.each(e.plansData.orderedPlans,function(r){r.supertitle=r.supertitle,r.title=k.getString(r.title),r.subtitle=k.getString(r.subtitle),r.upgradeButtonText=k.getString(r.upgradeButtonText),r.promoSettings&&r.promoSettings.titleStringId&&(r.promoTitle=k.getString(r.promoSettings.titleStringId)),t.isObject(e.pageVariant)&&t.isObject(e.pageVariant.plans)&&t.isObject(e.pageVariant.plans[r.id])&&(r=t.assign({},r,e.pageVariant.plans[r.id])),r.hide||(n.push(r),i[r.id]=r),!0===r.hasAdminFeatures&&(e.plansData.hasAdminFeatures=!0)}.bind(this)),e.plansData.orderedPlans=n,this._plansById=i,this._plans=e.plansData,this._plans.orderedPlans=n},getMenuPriceLine:function(e,t){return e.terms=t,{line:k.mustacheRender(this.menuLineTemplate,e),buttonText:t.commitmentAndTerms||t.commitment}},initPlansDisplay:function(){var n=this.plans$.find(".inner");t.each(n,function(t){var n=e(t),i=n.data("plan"),r=this._plansById[i];r&&(r.div$=n)}.bind(this)),this._plansShowingAnalytics={showingPlans:[],recommended:"none"},t.each(this._plans.orderedPlans,function(e){if(e.apps||e.offers)if(e.items=[],e.dropdownOptions={items:[],defaultValue:e.defaultOfferId,onchangeCallback:this.offerDropdownOnChange.bind(this),plan:e},e.offers)t.each(e.offers,function(t){e.items.push({offerId:t.offerId,isDr:t.isDr,isSpark:t.isSpark,quantity:t.quantity||1}),e.dropdownOptions.items.push(this._getOfferDropdownOption(t))}.bind(this));else if(e.apps){var n=e.apps;e.apps={},e.appsDropdownOptions={items:[],defaultValue:e.defaultOfferId,onchangeCallback:this.appDropdownOnChange.bind(this),plan:e},t.each(n,function(t){t.id=t.id||t.name,e.apps[t.id]=t,e.appsDropdownOptions.items.push({id:t.id,name:t.name}),t.offersInfo=this.getOffersInfo(t.offers)}.bind(this))}this.setupPlanDiv(e)}.bind(this))},renderInApp:function(e){window.marvel.events.dialogShown("upgrade"),this._viewOverlay$=e.parent$,this._isView=!0,this.renderOptions(e)},renderInLanding:function(e){this._isView=!1,this.renderOptions(e)},_renderPageVariant:function(t){var n=e(".mrvl-mrkt-nav-start-now");t.pageVariant.addBuyNowToNavBar&&(n.text(k.getString(t.pageVariant.upgradeButtonText)),n.css("width","100px"),n.on("click",(function(t){t.preventDefault(),e(".plan-buy-button")[0].click()}))),t.pageVariant&&e(document.body).addClass(t.pageVariant.cssId),t.robotsMetaContent&&e("head").append('<meta name="robots" content="'+t.robotsMetaContent+'"')},_renderView:function(t){this.workflow=t.workflow,this._hidePlans=t.hidePlans,this.setElement(t.parent$),this.renderPlans(t),t.hasPlansAtTop?this.$el.addClass("plans-page-plans-top"):this.$el.removeClass("plans-page-plans-top"),this._renderPageVariant(t);t.jumpToAnchor&&this.scrollToElement(t.jumpToAnchor,{fromLoad:!0}),t.hidePlans?this.sendAnalytic("viewedPlansPageNoPlans"):this.sendPlanAnalytic("displayPurchasePanel"),e(".fouc").removeClass("fouc")},_loadTarget:function(e){return i.Promise((function(t,n){window.adobe&&window.adobe.target?window.adobe.target.getOffer({mbox:d.upgradeMboxName,params:{touchpointName:e.workflow,srcUrl:encodeURI(window.location.pathname),returnHost:window.location.host},success:function(e){window.adobe.target.applyOffer({mbox:d.upgradeMboxName,offer:e}),t()},error:function(e,n){_.warn("Failed to load target!",{status:e,error:n}),t()}}):(_.debug("Target disabled or not available, not using it."),t())}))},_getPageVariant:function(e){this._allowedVariants=e.plansData.allowedVariants||e.allowedVariants;var n=this._browserStorage.get("paid_traffic_source"),i=window.location.pathname.split("/");if(i.length>=3){var r=i[i.length-1];if(this._allowedVariants.hasOwnProperty(r))return this._browserStorage.set("paid_traffic_source",r),this._allowedVariants[r]}return!t.isEmpty(n)&&this._allowedVariants.hasOwnProperty(n)?this._allowedVariants[n]:e.plansData.pageVariant},shouldExcludeFromSparkRunExperiment:function(e){return e.hidePlans||e.marketingTouchpointCTA||e.jumpToAnchor||this._browserStorage.get("paid_traffic_source")&&0===this._browserStorage.get("paid_traffic_source").indexOf("gmo")||-1!==window.location.pathname.search(/gmo/i)},isAtMarketingTouchpoint:function(e){return e.marketingTouchpointCTA||e.jumpToLearnMore},renderOptions:function(e){var n=t.cloneDeep(e);n.pageVariant=n.plansData.pageVariant,this._pageVariant=n.pageVariant;var r=[this._controller.loadCommerceForView(),this._controller.loadTrackingBeaconForView()];i.allSettled(r).then(function(){this.isAtMarketingTouchpoint(n)?(n.pageVariant=this._getPageVariant(n),this._pageVariant=n.pageVariant,n.showViewPlansLink=!1,this._renderView(n)):this._loadTarget(n).then(function(){n.showViewPlansLink=!0,n.hasPlansAtTop=!0,this._renderView(n)}.bind(this)).done()}.bind(this)).done()},_initMainVideo:function(){var e=this.$el.find(".plans-video-viewer");if(e.length){var t=e.find("iframe");e.find(".close-button").on("click",function(){return e.addClass("hide"),t[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo"}',"https://www.youtube.com"),this.$el.removeClass("showing-hero-video"),!1}.bind(this)),this.$el.find(".watch-plans-video-button").on("click",function(n){e.removeClass("hide");var i=t.attr("data-src");return t[0].src=i+"&autoplay=1",this.$el.addClass("showing-hero-video"),!1}.bind(this))}},render:function(){return this.$el.length&&this.$el.parent().length||this.setElement(e(document.body).find(".landing-plans-view")),this.$el.html(this._rendered_template),this.page$=this.$el,this.plans$=this.page$.find(".list-of-plans"),this._isView?(this.needsShowing$=this.$el.filter(".needs-showing").add(this.$el.find(".needs-showing")),this._viewOverlay$.removeClass("hide"),t.delay(function(){this.needsShowing$.addClass("showing")}.bind(this),5),this.scroller$=this.$el,e(document.body).addClass("no-scroll-upgrade-view")):this.scroller$=e(window),this.initPlansDisplay(),this._isView||this.$el.removeClass("hide"),this._initMainVideo(),this.brandsExamplesView?this.brandsExamplesView.setElement(this.$el.find(".brands-examples-view-holder")):this.brandsExamplesView=new v({el:this.$el.find(".brands-examples-view-holder"),model:new n.Model({parentWorkflow:this.workflow,pickerOnTop:!0,parentZIndex:1*this.$el.css("z-index")||0})}),this.brandsExamplesView.render(),this},_getPartialsForPageVariant:function(e){var n=p;return!t.isEmpty(e)&&this._plansSectionTemplate.hasOwnProperty(e.id)&&(n=this._plansSectionTemplate[e.id]),{"plans-plans-section":n}},renderPlans:function(e){this._initPlans(e);var n,i={plansData:e.plansData,showViewPlansLink:e.showViewPlansLink,upgradeButtonText:k.getString(e.pageVariant.upgradeButtonText),pricingVariantSubUrl:e.pageVariant.pricingVariantSubUrl,hidePlansPricingCTA:e.pageVariant.hidePlansPricingCTA,getStartedButtonText:k.getString(e.pageVariant.getStartedButtonText),isInAppView:this._isView,hideAllPlans:e.hidePlans,ccPlansLink:e.plansData.ccPlansLink,eduLink:x.getLocalizedURL(e.plansData.eduLink,k.getLocale()),ccPremiumInfoLink:k.formatMessage(e.plansData.ccPremiumInfoLink,{"zendesk-locale":k.getZendeskLocale()}),eduPhoneNumber:e.plansData.eduPhoneNumber,enterprisePhoneNumber:e.plansData.enterprisePhoneNumber,promoTermsLink:e.plansData.promoTermsLink,teamPromoTermsLink:e.plansData.promoTermsLink,customerServicePhoneNumber:e.plansData.customerServicePhoneNumber,enterpriseLink:x.getLocalizedURL(e.plansData.enterpriseLink,k.getLocale()),showCCPremiumInfo:e.plansData.showCCPremiumInfo,platformInfo:c.getPlatformInfo()},r=this._getPartialsForPageVariant(e.pageVariant);n=i.hideAllPlans?{}:t.extend({"plans-plans":h,"plans-plans-section":p,"plan-price-display":f},r);var o=u;this.menuLineTemplate=g,this._rendered_template=k.mustacheRender(o,i,n),this.render()},showAlert:function(e,t){return window.marvel._isInApp?l.showAlert(e,t):(alert(t),i())},viewPlansButtonClick:function(e){this.sendPlanAnalytic("pricing:viewPlansClicked")},offerButtonClick:function(t){var n=e(t.target).closest(".inner").data("plan");if(n.selectedOffer){var i=n.selectedOffer.offerId,r=n.div$.hasClass("free"),o=n.productCode,a=function(){this._controller.handleUserClicksToPurchasePlan({offerId:i,quantity:n.quantity,isDr:n.selectedOffer.isDr,isSpark:n.selectedOffer.isSpark,countryCode:this.countryInfo.countryCode,languageCode:this.countryInfo.locale,isSparkFree:r,productId:o,workflow:this.workflow,view:this._isView&&this,ucReturnUrl:n.ucReturnUrl})}.bind(this);if(r)this.sendPlanAnalytic("dismissPurchasePanel",{reason:"get-started"},a);else{var s={productId:o,customerSegment:n.selectedOffer.segment,offerTerm:this._plans.termsInfo.termsToTermId[n.selectedOffer.term],offerCommitment:this._plans.termsInfo.termsToTermId[n.selectedOffer.commitment],offerId:i};this.sendPlanAnalytic("beginPurchaseFlow",s,a)}}else this.showAlert(k.getString("upgrade-error-title-plans"),k.getString("upgrade-error-text-select-offer")).done()},scrollToElement:function(n,i){var r;if(i=i||{},"#plans"===n&&this._plans.orderedPlans.length){var o,a=t.find(this._plans.orderedPlans,(function(e){if(e.recommended)return e;o||"SPK.FREE"===e.id||(o=e)}));r=a?a.div$:this.$el.find(n)}else try{r="string"==typeof n?this.$el.find(n):n}catch(e){}r&&r.length||(r=this.$el.find("div:first")),this._isView||(i.fromLoad?this._scrollBound||(this._scrollBound=!0,this._scrollCap=this._scrollCap.bind(this),this._clearScrollCap=this._clearScrollCap.bind(this)):this._lastJumpTime&&e(window).off("scroll.uc",this._scrollCap));var s,l=r.offset().top-(this.scroller$.offset()||{top:0}).top,c=this.scroller$.scrollTop();if(this._isView)s=l+c;else{s=l-66}this.scroller$.scrollTop(s),r.focus(),i.fromLoadFix||i.fromLoad&&!this._isView&&(this._lastScrollTo=n,this._lastJumpTime=Date.now(),t.delay(function(){e(window).one("scroll.uc",this._scrollCap),e(document.body).one("wheel.uc",this._clearScrollCap.bind(this)),e(document.body).one("mousedown.uc",this._clearScrollCap.bind(this))}.bind(this)))},_clearScrollCap:function(){this._lastJumpTime&&(this._lastJumpTime=0,e(window).off("scroll.uc",this._scrollCap))},_scrollCap:function(t){this._lastJumpTime&&(this.scrollToElement(this._lastScrollTo,{fromLoadFix:!0}),Date.now()-this._lastJumpTime<1e4&&e(window).one("scroll.uc",this._scrollCap))}});return C.getPricePartials=function(){return{"plan-price-display":f}},C}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='{{#isInAppView}}\n    <div class="upgrade-overlay">\n{{/isInAppView}}\n    <div class="landing-plans-sections">\n        {{> plans-plans-section }}\n\n        <div class="plans-blurb-section plans-page-section">\n            <div class="blurb-row-holder stunning-graphics">\n                <div class="blurb-row  stunning-graphics">\n                    <div class="blurb-text">\n                        <div class="blurb-text-inner">\n                            <div class="blurb-text-inner-inner">\n                                <h3 class="blurb-title">{{upgrade-plan-section2-title}}</h3>\n                                <p class="blurb-blurb-text">{{upgrade-plan-section2-subtitle}}</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="blurb-video">\n                        <video src="/images/pricing/v2/feature1.mp4" poster="/images/pricing/v2/feature1.png" loop muted\n                               autoplay id="pricing-feature1" class="stunning-graphics-video"></video>\n                    </div>\n                </div>\n                <div class="feature-row-holder stunning-graphics">\n                    <div class="content">\n                        <h3>{{upgrade-plan-section2-content1-title}}</h3>\n                        <p>{{upgrade-plan-section2-content1-subtitle}}</p>\n                    </div>\n                    <div class="content">\n                        <h3>{{upgrade-plan-section2-content2-title}}</h3>\n                        <p>{{upgrade-plan-section2-content2-subtitle}}</p>\n                    </div>\n                    <div class="content">\n                        <h3>{{upgrade-plan-section2-content3-title}}</h3>\n                        <p>{{upgrade-plan-section2-content3-subtitle}}</p>\n                    </div>\n                    <div class="content">\n                        <h3>{{upgrade-plan-section2-content4-title}}</h3>\n                        <p>{{upgrade-plan-section2-content4-subtitle}}</p>\n                    </div>\n                    <div class="content">\n                        <h3>{{upgrade-plan-section2-content5-title}}</h3>\n                        <p>{{upgrade-plan-section2-content5-subtitle}}</p>\n                    </div>\n                </div>\n            </div>\n\n            <div class="blurb-row-holder express">\n                <div class="blurb-row express">\n\n                    <div class="blurb-text">\n                        <div class="blurb-text-inner">\n                            <div class="blurb-text-inner-inner">\n                                <h3 class="blurb-title">{{upgrade-plan-section3-title}}</h3>\n                                <p class="blurb-blurb-text">{{upgrade-plan-section3-subtitle}}</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="blurb-video">\n                        <video src="/images/pricing/v2/feature2.mp4" poster="/images/pricing/v2/feature2.png" loop muted\n                               autoplay id="pricing-feature2" class="express-video"></video>\n                    </div>\n                </div>\n                <div class="feature-row-holder express">\n                    <div class="content">\n                        <h3>{{upgrade-plan-section3-content1-title}}</h3>\n                        <p>{{upgrade-plan-section3-content1-subtitle}}</p>\n                    </div>\n                    <div class="content">\n                        <h3>{{upgrade-plan-section3-content2-title}}</h3>\n                        <p>{{upgrade-plan-section3-content2-subtitle}}</p>\n                    </div>\n                    <div class="content">\n                        <h3>{{upgrade-plan-section3-content3-title}}</h3>\n                        <p>{{upgrade-plan-section3-content3-subtitle}}</p>\n                    </div>\n                </div>\n            </div>\n\n            <div class="blurb-row-holder work">\n                <div class="blurb-row work">\n                    <div class="blurb-text">\n                        <div class="blurb-text-inner">\n                            <div class="blurb-text-inner-inner">\n                                <h3 class="blurb-title">{{upgrade-plan-section4-title}}</h3>\n                                <p class="blurb-blurb-text">{{upgrade-plan-section4-subtitle}}</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="blurb-video">\n                        <video src="/images/pricing/v2/feature3.mp4" poster="/images/pricing/v2/feature3.png" loop muted\n                               autoplay id="pricing-feature3" class="work-video"></video>\n                    </div>\n                </div>\n\n                <div class="feature-row-holder work">\n                    <div class="content">\n                        <h3>{{upgrade-plan-section4-content1-title}}</h3>\n                        <p>{{upgrade-plan-section4-content1-subtitle}}</p>\n                    </div>\n                    <div class="content">\n                        <h3>{{upgrade-plan-section4-content2-title}}</h3>\n                        <p>{{upgrade-plan-section4-content2-subtitle}}</p>\n                    </div>\n                    <div class="content">\n                        <h3>{{upgrade-plan-section4-content3-title}}</h3>\n                        <p>{{upgrade-plan-section4-content3-subtitle}}</p>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n        {{#showViewPlansLink}}\n            <a name="plans-plans" href="#plans-plans"\n               class="sp-cta-button-secondary hero-button view-plans-button">{{upgrade-view-plans}}</a>\n        {{/showViewPlansLink}}\n    </div>\n{{#isInAppView}}\n        <button class="upgrade-view-close-btn x-close-btn needs-showing"\n                data-auto="upgrade-view-close-button"></button>\n{{/isInAppView}}\n\n</div>\n'},function(e,t){e.exports='<ul class="list list-of-plans{{^plansData.hasAdminFeatures}} no-admin-features{{/plansData.hasAdminFeatures}}{{#plansData.somePlansHaveApps}} has-apps{{/plansData.somePlansHaveApps}} number-of-plans-{{plansData.numberOfPlans}}"\n    id="plans" name="plans">\n    {{#plansData}}\n        {{#orderedPlans}}\n            <li class="inner{{#recommended}} recommended{{/recommended}}{{#discounted}} discounted{{/discounted}}"\n                data-plan="{{id}}">\n                <span class="recommended recommended-only">{{upgrade-recommended-text}}</span>\n                {{#promoTitle}}\n                <span class="discounted discounted-only">{{promoTitle}}</span>\n                {{/promoTitle}}\n                <div class="plan-info{{#recommended}} recommended-plan-info{{/recommended}}">\n                    <div class="plan-info-header">\n                        <div class="plan-supertitle">{{#supertitle}}{{.}}{{/supertitle}}</div>\n                        <div class="plan-title">{{title}}</div>\n\n                        {{#image}}\n                            <div class="plan-image {{planClassName}}">\n                                <img src="{{{.}}}"/>\n                            </div>\n                        {{/image}}\n\n                        <div class="plan-subtitle">{{{subtitle}}}</div>\n                        {{^showFreeText}}\n                            <div class="plan-pricing-area{{#hasSpecialOffers}} has-special-offers{{/hasSpecialOffers}}">\n                                {{#offers}}\n                                    {{> plan-price-display }}\n                                {{/offers}}\n                                {{#defaultPrice}}\n                                    <div class="default-price-holder">\n                                        {{> plan-price-display }}\n                                    </div>\n                                {{/defaultPrice}}\n                                {{#apps}}\n                                    {{#offers}}\n                                        {{> plan-price-display }}\n                                    {{/offers}}\n                                {{/apps}}\n\n                                <div class="plan-dropdown-area">\n                                    {{#hasApps}}\n                                        <div class="single-app-dropdown hide"\n                                             placeholder="{{upgrade-select-application}}"></div>\n                                    {{/hasApps}}\n                                    <div class="plan-dropdown"></div>\n                                </div>\n                            </div>\n\n                        {{/showFreeText}}\n                        {{#showFreeText}}\n                            <div class="plan-pricing-area simply-free">\n                                <div class="free-text is-free">{{upgrade-show-free-text-free}}</div>\n                                <div class="free-text no-credit-card-required">{{upgrade-show-free-text-credit-card}}</div>\n                            </div>\n                        {{/showFreeText}}\n                        <button class="plan-buy-button sp-cta-button-primary">{{upgradeButtonText}}</button>\n                    </div>\n                    <div class="plan-see-hide-features see-details" data-planClassName="{{planClassName}}">\n                        <div class="plan-see-hide-features-label">\n                            {{upgrade-see-details}}\n                        </div>\n                        <div class="plan-see-hide-features-arrow" />\n                    </div>\n\n                    <ul class="plan-info-features plan-features-{{planClassName}}">\n                        <li class="check-plan-has-feature {{#hasFeatureUseStunningImages}} checked{{/hasFeatureUseStunningImages}}"></li>\n                        <li class="check-plan-has-feature {{#hasFeatureInviteOthers}} checked{{/hasFeatureInviteOthers}}"></li>\n                        <li class="check-plan-has-feature {{#hasFeatureCreateUniqueDesigns}} checked{{/hasFeatureCreateUniqueDesigns}}"></li>\n                        <li class="check-plan-has-feature {{#hasFeatureRemoveWatermark}} checked{{/hasFeatureRemoveWatermark}}"></li>\n                        <li class="check-plan-has-feature {{#hasFeaturePersonalizeDesigns}} checked{{/hasFeaturePersonalizeDesigns}}"></li>\n                        <li class="check-plan-has-feature {{#hasFeatureSwitchBrands}} checked{{/hasFeatureSwitchBrands}}"></li>\n                        <li class="check-plan-has-feature {{#hasFeatureDesignFromTemplates}} checked{{/hasFeatureDesignFromTemplates}}"></li>\n                        <li class="check-plan-has-feature {{#hasFeatureAdobeFonts}} checked{{/hasFeatureAdobeFonts}} no-bottom-border"></li>\n\n                        {{#plansData.hasAdminFeatures}}\n                            <li class="space divider"></li>\n                            <li class="check-plan-has-feature {{#hasFeatureConsolidateBilling}} checked{{/hasFeatureConsolidateBilling}}"></li>\n                            <li class="check-plan-has-feature {{#hasFeatureReassignLicenses}} checked{{/hasFeatureReassignLicenses}}"></li>\n                            <li class="check-plan-has-feature {{#hasFeatureDedicatedTechnicalSupport}} checked{{/hasFeatureDedicatedTechnicalSupport}}"></li>\n                        {{/plansData.hasAdminFeatures}}\n\n                        {{#hasFeatureUseStunningImages}}\n                            <li class="plan-feature named-plan-feature use-stunning-images">\n                                <div>\n                                    {{upgrade-feature-use-stunning-images}}\n                                </div>\n                            </li>\n                        {{/hasFeatureUseStunningImages}}\n\n                        {{#hasFeatureInviteOthers}}\n                            <li class="plan-feature named-plan-feature invite-others">\n                                <div>\n                                    {{upgrade-feature-invite-others}}\n                                </div>\n                            </li>\n                        {{/hasFeatureInviteOthers}}\n\n                        {{#hasFeatureCreateUniqueDesigns}}\n                            <li class="plan-feature named-plan-feature create-unique-designs">\n                                <div>\n                                    {{upgrade-feature-create-unique-designs}}\n                                </div>\n                            </li>\n                        {{/hasFeatureCreateUniqueDesigns}}\n\n                        {{#hasFeatureDesignFromTemplates}}\n                            <li class="plan-feature named-plan-feature design-from-templates">\n                                <div>\n                                    {{upgrade-feature-design-from-templates}}\n                                </div>\n                            </li>\n                        {{/hasFeatureDesignFromTemplates}}\n\n                        {{#hasFeaturePersonalizeDesigns}}\n                            <li class="plan-feature named-plan-feature personalize-designs">\n                                <div>\n                                    {{upgrade-feature-personalize-designs}}\n                                </div>\n                            </li>\n                        {{/hasFeaturePersonalizeDesigns}}\n\n                        {{#hasFeatureSwitchBrands}}\n                            <li class="plan-feature named-plan-feature switch-brands">\n                                <span class="new-tag"></span>\n                                <div>\n                                    {{upgrade-feature-switch-brands}}\n                                </div>\n                            </li>\n                        {{/hasFeatureSwitchBrands}}\n\n                        {{#hasFeatureRemoveWatermark}}\n                            <li class="plan-feature named-plan-feature remove-watermark">\n                                <div>\n                                    {{upgrade-feature-remove-watermark}}\n                                </div>\n                            </li>\n                        {{/hasFeatureRemoveWatermark}}\n\n                        {{#hasFeatureAdobeFonts}}\n                            <li class="plan-feature named-plan-feature has-adobe-fonts">\n                                <div>\n                                    {{upgrade-feature-has-adobe-fonts}}\n                                </div>\n                            </li>\n                        {{/hasFeatureAdobeFonts}}\n\n\n                        {{#hasFeatureConsolidateBilling}}\n                            <li class="plan-info-upgrade-admin-label ">{{upgrade-admin-features-label}}</li>\n                            <li class="plan-feature named-plan-feature consolidate-billing admin-feature">\n                                <div>\n                                    {{upgrade-feature-consolidate-billing}}\n                                </div>\n                            </li>\n                        {{/hasFeatureConsolidateBilling}}\n                        {{#hasFeatureReassignLicenses}}\n                            <li class="plan-feature named-plan-feature reassign-licenses admin-feature">\n                                <div>\n                                    {{upgrade-feature-reassign-licenses}}\n                                </div>\n                            </li>\n                        {{/hasFeatureReassignLicenses}}\n                        {{#hasFeatureDedicatedTechnicalSupport}}\n                            <li class="plan-feature named-plan-feature dedicated-tech-support admin-feature">\n                                <div>\n                                    {{upgrade-feature-dedicated-tech-support}}\n                                </div>\n                            </li>\n                        {{/hasFeatureDedicatedTechnicalSupport}}\n                    </ul>\n                </div>\n            </li>\n        {{/orderedPlans}}\n    {{/plansData}}\n</ul>\n\n\n'},function(e,t){e.exports='{{^hideAllPlans}}\n    <a name="plans-plans"></a>\n    <div class="landing-plans-plans-wrapper">\n        <div class="landing-plans-plans-wrapper-inner">\n            <div class="landing-plans-plans">\n                <div class="plans-wrapper{{^plansData.hasAdminFeatures}} no-admin-features{{/plansData.hasAdminFeatures}}{{#plansData.somePlansHaveApps}} has-apps{{/plansData.somePlansHaveApps}}">\n                    <div class="plans-wrapper-header">\n                        <h1 class="plans-wrapper-title"><span>{{upgrade-plans-wrapper-title}}&nbsp;</span><div class="brand plans-wrapper-title-item"><span class="hidden team">{{upgrade-plans-wrapper-title-item-team}}</span><span class="hidden marketing">{{upgrade-plans-wrapper-title-item-marketing}}</span><span class="hidden instagram">{{upgrade-plans-wrapper-title-item-instagram}}</span><span class="hidden stories">{{upgrade-plans-wrapper-title-item-stories}}</span><span class="hidden campaign">{{upgrade-plans-wrapper-title-item-campaign}}</span><span class="hidden friends">{{upgrade-plans-wrapper-title-item-friends}}</span><span class="hidden designs">{{upgrade-plans-wrapper-title-item-designs}}</span><span class="hidden brand">{{upgrade-plans-wrapper-title-item-brand}}</span><span class="hidden club">{{upgrade-plans-wrapper-title-item-club}}</span></div></h1>\n                    </div>\n                    <div class="plans-wrapper-features">\n                        <h4 class="upgrade-features-label">{{upgrade-features-label}}</h4>\n                        <ul>\n                            <li class="plan-feature use-stunning-images">\n                                <div>{{upgrade-feature-use-stunning-images}}</div>\n                            </li>\n                            <li class="plan-feature invite-others">\n                                <div>{{upgrade-feature-invite-others}}</div>\n                            </li>\n                            <li class="plan-feature create-unique-designs">\n                                <div>{{upgrade-feature-create-unique-designs}}</div>\n                            </li>\n                            <li class="plan-feature design-from-templates">\n                                <div>{{upgrade-feature-design-from-templates}}</div>\n                            </li>\n                            <li class="plan-feature personalize-designs">\n                                <div>{{upgrade-feature-personalize-designs}}</div>\n                            </li>\n                            <li class="plan-feature switch-brands">\n                                <span class="new-tag">{{upgrade-new-tag}}</span>\n                                <div>{{upgrade-feature-switch-brands}}</div>\n                            </li>\n                            <li class="plan-feature remove-watermark">\n                                <div>{{upgrade-feature-remove-watermark}}</div>\n                            </li>\n                            <li class="plan-feature has-adobe-fonts">\n                                <div>{{upgrade-feature-has-adobe-fonts}}</div>\n                            </li>\n                        </ul>\n                        <h4 class="upgrade-admin-label">{{upgrade-admin-label}}</h4>\n                        <ul>\n                            <li class="plan-feature consolidate-billing admin-feature">\n                                <div>{{upgrade-feature-consolidate-billing}}</div>\n                            </li>\n                            <li class="plan-feature reassign-licenses admin-feature">\n                                <div>{{upgrade-feature-reassign-licenses}}</div>\n                            </li>\n                            <li class="plan-feature dedicated-tech-support admin-feature">\n                                <div>{{upgrade-feature-dedicated-tech-support}}</div>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                {{> plans-plans }}\n                <div class="clear"></div>\n            </div>\n            {{#plansData.hasAdminFeatures}}\n                <p class="discount-terms-conditions">{{#fmr}}upgrade-discount-terms-conditions{{/fmr}}</p>\n            {{/plansData.hasAdminFeatures}}\n            {{^plansData.hasAdminFeatures}}\n                <p class="discount-terms-conditions">{{#fmr}}upgrade-terms-conditions{{/fmr}}</p>\n            {{/plansData.hasAdminFeatures}}\n\n            {{#platformInfo.androidOrIos}}\n                <div class="landing-plans-mobile-apps-section">\n                    {{#platformInfo.iOS}}\n                        <div class="landing-plans-ios-apps-section flex-vertical">\n                            {{#platformInfo.apps.inOrder}}\n                                <div class="landing-plans-ios-app {{id}} flex-vertical">\n                                    <p class="landing-plans-ios-about {{id}}">{{{downloadFormatForReason}}}</p>\n                                    <a class="download-app-store-button link-background cc-paid-cta ios"\n                                       href="{{{appStoreUrl}}}"\n                                       alt="{{downloadAlt}}"\n                                       data-app="{{id}}"\n                                       data-analytics="plans-cta-download-ios-{{id}}"></a>\n                                </div>\n                            {{/platformInfo.apps.inOrder}}\n                        </div>\n                    {{/platformInfo.iOS}}\n                    {{#platformInfo.android}}\n                        <div class="landing-plans-android-apps-section flex-vertical">\n                            {{#platformInfo.apps.inOrder}}\n                                {{#googlePlay}}\n                                    <div class="landing-plans-android-app post flex-vertical">\n                                        <p class="landing-plans-android-about post">{{{downloadFormatForReason}}}</p>\n                                        <a class="download-google-play-button link-background cc-paid-cta android"\n                                           href="{{{googlePlayUrl.upgradeView}}}"\n                                           data-app="post"\n                                           data-analytics="plans-cta-download-android-post"\n                                           alt="{{googlePlayDownloadAlt}}"></a>\n                                    </div>\n                                {{/googlePlay}}\n                            {{/platformInfo.apps.inOrder}}\n                        </div>\n                    {{/platformInfo.android}}\n                </div>\n            {{/platformInfo.androidOrIos}}\n\n            <div class="learn-more-edu learn-more-and-call"><div class="learn-more-and-call-header">{{upgrade-education-label}}</div><div class="learn-more-and-call-text with-phone-text"><div>{{#fmr}}upgrade-call-education{{/fmr}}</div></div><div class="learn-more-and-call-text learn-more-and-call-explainer"><div>{{#fmr}}upgrade-learn-more-edu{{/fmr}}</div></div></div>\n\n\n            <div class="learn-more-enterprise learn-more-and-call">\n                <div class="learn-more-and-call-header">{{upgrade-enterprise-label}}</div><div class="learn-more-and-call-text with-phone-text"><div>{{#fmr}}upgrade-call-enterprise{{/fmr}}</div></div><div class="learn-more-and-call-text learn-more-and-call-explainer"><div>{{#fmr}}upgrade-learn-more-enterprise{{/fmr}}</div></div>\n            </div>\n\n            <div class="cc-footer">\n                <img src="/images/pricing/v2/icon-cc.svg" alt="{{upgrade-cc-text}}" />\n                <p class="cc-text">{{#fmr}}upgrade-cc-text{{/fmr}}</p>\n            </div>\n        </div>\n    </div>\n{{/hideAllPlans}}\n\n\n'},function(e,t){e.exports='<div class="plan-price{{#symbolAtEnd}} symbol-at-end{{/symbolAtEnd}}{{#priceDisplay}}{{#oldPrice}} has-special-offer{{/oldPrice}}{{#selected}} selected{{/selected}}{{/priceDisplay}}" data-offer="{{offerId}}">\n{{#priceDisplay}}\n{{#oldPrice}}\n<div class="old-price-div">\n{{^symbolAtEnd}}\n    <div class="currency">{{currencySymbol}}</div><div class="old-price">{{shortNumberString}}</div>\n{{/symbolAtEnd}}\n{{#symbolAtEnd}}\n    <div class="value">{{shortNumberString}}</div><div class="currency">{{currencySymbol}}</div>\n{{/symbolAtEnd}}\n</div>\n<div class="new-price-div">\n{{/oldPrice}}\n{{^symbolAtEnd}}\n    <div class="currency">{{currencySymbol}}</div><div class="value">{{numberString}}{{fractionDelimiter}}</div><div class="fraction-and-time"><div class="value-fraction">{{fraction}}{{^fraction}}&nbsp;{{/fraction}}</div><div class="time">{{time}}{{#discounted}}*{{/discounted}}</div></div>\n{{/symbolAtEnd}}\n{{#symbolAtEnd}}\n    <div class="value">{{numberString}}{{fractionDelimiter}}</div><div class="fraction-and-time"><div class="fraction-and-currency"><div class="value-fraction">{{fraction}}</div><div class="currency">{{currencySymbol}}</div></div><div class="time">{{time}}{{#discounted}}*{{/discounted}}</div></div>\n{{/symbolAtEnd}}\n{{#oldPrice}}\n</div>\n{{/oldPrice}}\n{{/priceDisplay}}\n</div>\n'},function(e,t){e.exports='<div class="plan-offer-dropdown-line-terms">{{terms.commitment}}{{#terms.billing}}, {{.}}{{/terms.billing}}</div>\n<div class="plan-offer-dropdown-line-pricing">\n{{^symbolAtEnd}}\n<span class="currency">{{currencySymbol}}</span>\n{{/symbolAtEnd}}\n{{#oldPrice}}\n<span class="old-price price-text">{{shortNumberString}}</span>\n<span class="new-price price-text">\n{{/oldPrice}}\n{{^oldPrice}}\n<span class="price-text">\n{{/oldPrice}}\n{{shortNumberString}}\n</span>\n{{#symbolAtEnd}}\n<span class="currency">{{currencySymbol}}</span>\n{{/symbolAtEnd}}\n<span class="payment-time">{{time}}</span>\n</div>\n'},function(e,t,n){var i=n(233);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(69);(e.exports=n(34)(!1)).push([e.i,"@-webkit-keyframes slideme{0%{opacity:0}5%{opacity:1}10%{opacity:1}15%{opacity:0}20%{opacity:0}30%{opacity:0}}@keyframes slideme{0%{opacity:0}5%{opacity:1}10%{opacity:1}15%{opacity:0}20%{opacity:0}30%{opacity:0}}.close-button{position:absolute;right:0;top:0;background-color:red;background:url("+i(n(58))+");background-size:18px 18px;background-repeat:no-repeat;background-position:50%;width:60px;height:60px;z-index:1000}.plans-page,.upgrade-overlay-holder{width:100%;font-family:adobe-clean,sans-serif}.plans-page .landing-plans-mobile-apps-section,.plans-page .landing-plans-mobile-apps-section .landing-plans-android-app,.plans-page .landing-plans-mobile-apps-section .landing-plans-ios-app,.upgrade-overlay-holder .landing-plans-mobile-apps-section,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-android-app,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-ios-app{margin:20px 0}.plans-page .landing-plans-mobile-apps-section .landing-plans-android-app p,.plans-page .landing-plans-mobile-apps-section .landing-plans-ios-app p,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-android-app p,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-ios-app p{color:#82919b;font-weight:400;margin-bottom:20px}.plans-page .landing-plans-mobile-apps-section .landing-plans-android-app p a,.plans-page .landing-plans-mobile-apps-section .landing-plans-ios-app p a,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-android-app p a,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-ios-app p a{color:#35414c;font-weight:700;text-decoration:none;cursor:pointer}.plans-page .landing-plans-mobile-apps-section .landing-plans-android-app p a:hover,.plans-page .landing-plans-mobile-apps-section .landing-plans-ios-app p a:hover,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-android-app p a:hover,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-ios-app p a:hover{opacity:.8}.plans-page .landing-plans-mobile-apps-section .landing-plans-android-app .link-background,.plans-page .landing-plans-mobile-apps-section .landing-plans-ios-app .link-background,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-android-app .link-background,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-ios-app .link-background{display:inherit;background-size:contain;background-repeat:no-repeat;width:154px;height:44px}.plans-page .landing-plans-mobile-apps-section .landing-plans-android-app .link-background.download-app-store-button,.plans-page .landing-plans-mobile-apps-section .landing-plans-ios-app .link-background.download-app-store-button,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-android-app .link-background.download-app-store-button,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-ios-app .link-background.download-app-store-button{background-image:url(/images/landing/appstoredownloadbtn.svg)}.plans-page .landing-plans-mobile-apps-section .landing-plans-android-app .link-background.download-google-play-button,.plans-page .landing-plans-mobile-apps-section .landing-plans-ios-app .link-background.download-google-play-button,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-android-app .link-background.download-google-play-button,.upgrade-overlay-holder .landing-plans-mobile-apps-section .landing-plans-ios-app .link-background.download-google-play-button{background-image:url(/images/landing/googleplaydownloadbtn.svg)}.plans-page a,.upgrade-overlay-holder a{text-decoration:none}.plans-page .upgrade-overlay,.upgrade-overlay-holder .upgrade-overlay{font-size:16px}.plans-page h1,.plans-page h2,.plans-page h3,.plans-page h4,.plans-page h5,.upgrade-overlay-holder h1,.upgrade-overlay-holder h2,.upgrade-overlay-holder h3,.upgrade-overlay-holder h4,.upgrade-overlay-holder h5{max-width:calc(100vw - 32px)}.plans-page h1,.upgrade-overlay-holder h1{font-size:1.8em}.plans-page h1.big,.upgrade-overlay-holder h1.big{font-size:2.5em;padding-bottom:15px;font-weight:300}.plans-page h2,.upgrade-overlay-holder h2{font-size:1.5em}.plans-page h3,.upgrade-overlay-holder h3{font-size:1.4em;font-family:adobe-clean,sans-serif}.plans-page h4,.plans-page h5,.upgrade-overlay-holder h4,.upgrade-overlay-holder h5{font-size:1.2em}.plans-page h6,.upgrade-overlay-holder h6{font-size:1.1em}.plans-page .tag-line,.upgrade-overlay-holder .tag-line{color:#181919}.plans-page .landing-plans-sections,.upgrade-overlay-holder .landing-plans-sections{width:100%;margin:auto;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;-webkit-justify-content:center;justify-content:center}.plans-page .landing-plans-sections p,.upgrade-overlay-holder .landing-plans-sections p{color:#82919c;font-size:1.125em;line-height:1.5em;font-weight:500}.plans-page .landing-plans-sections .plans-page-section,.upgrade-overlay-holder .landing-plans-sections .plans-page-section{width:100%;margin:auto}.plans-page .landing-plans-view,.plans-page .upgrade-overlay,.upgrade-overlay-holder .landing-plans-view,.upgrade-overlay-holder .upgrade-overlay{font-size:16px}.plans-page .landing-plans-view h2,.plans-page .upgrade-overlay h2,.upgrade-overlay-holder .landing-plans-view h2,.upgrade-overlay-holder .upgrade-overlay h2{font-size:2.25em;font-family:brandon-grotesque,adobe-clean,sans-serif;font-weight:400;color:#35414c}.plans-page .view-plans-button,.upgrade-overlay-holder .view-plans-button{border:2px solid #82919b;color:#82919b;margin:60px auto 70px;border-radius:24px;width:150px;padding:0 24px;font-size:16px;line-height:38px;height:42px}.plans-page .landing-plans-plans-wrapper,.upgrade-overlay-holder .landing-plans-plans-wrapper{background-color:#f2f4f5;width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:0 auto}.plans-page .landing-plans-plans-wrapper-inner,.upgrade-overlay-holder .landing-plans-plans-wrapper-inner{margin:80px auto 60px;width:1036px}.plans-page .plans-blurb-section,.upgrade-overlay-holder .plans-blurb-section{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;padding:0;font-family:adobe-clean,sans-serif;overflow:hidden;margin:0}.plans-page .plans-blurb-section .feature-row-holder,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder{display:-webkit-flex;display:flex;margin:80px auto 40px;max-width:1200px;-webkit-align-items:center;align-items:center;-webkit-justify-content:space-around;justify-content:space-around;text-align:center;-webkit-flex-wrap:wrap;flex-wrap:wrap}.plans-page .plans-blurb-section .feature-row-holder h3,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder h3{color:#4b00b0;font-size:18px;line-height:24px;font-weight:700;margin-bottom:16px}.plans-page .plans-blurb-section .feature-row-holder p,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder p{font-size:15px;line-height:20px;color:#284660}.plans-page .plans-blurb-section .feature-row-holder .content,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder .content{-webkit-flex-basis:33%;flex-basis:33%;-webkit-flex-grow:0;flex-grow:0;height:140px;padding:0 30px;margin-bottom:60px}.plans-page .plans-blurb-section .feature-row-holder .content h3,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder .content h3{font-size:18px;line-height:18px;margin-bottom:16px}.plans-page .plans-blurb-section .feature-row-holder .content p,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder .content p{font-size:15px;line-height:20px}.plans-page .plans-blurb-section .feature-row-holder.stunning-graphics,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder.stunning-graphics{-webkit-flex-basis:20%;flex-basis:20%;-webkit-flex-grow:0;flex-grow:0}.plans-page .plans-blurb-section .feature-row-holder.stunning-graphics h3,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder.stunning-graphics h3{color:#4b00b0}.plans-page .plans-blurb-section .feature-row-holder.express h3,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder.express h3{color:#ff4931}.plans-page .plans-blurb-section .feature-row-holder.work h3,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder.work h3{color:#10c459}.plans-page .plans-blurb-section .blurb-row-holder,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder{background:#fff;display:block;margin:100px auto 0}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row{max-width:1169px}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text{text-align:left;margin:auto;display:inline-block;width:40%}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-title,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-title{margin-bottom:30px;font-size:37px;line-height:44px;font-weight:900}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-blurb-text,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-blurb-text{font-size:21px;font-weight:400;line-height:30px;color:#284660}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-video,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-video{display:inline-block;width:50%;text-align:center}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-video video,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-video video{width:100%;height:auto;margin:0 auto}.plans-page .plans-blurb-section .blurb-row-holder.stunning-graphics,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder.stunning-graphics{-webkit-order:0;order:0}.plans-page .plans-blurb-section .blurb-row-holder.stunning-graphics .blurb-title,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder.stunning-graphics .blurb-title{color:#4b00b0}.plans-page .plans-blurb-section .blurb-row-holder.express,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder.express{-webkit-order:1;order:1}.plans-page .plans-blurb-section .blurb-row-holder.express .blurb-title,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder.express .blurb-title{color:#ff4931}.plans-page .plans-blurb-section .blurb-row-holder.work,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder.work{-webkit-order:2;order:2}.plans-page .plans-blurb-section .blurb-row-holder.work .blurb-title,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder.work .blurb-title{color:#10c459}@media (max-width:768px){.plans-page .plans-blurb-section .blurb-row-holder,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder{width:100vw;text-align:center;display:block;max-width:700px}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row{display:block}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text{margin-top:0;display:block;width:100%;text-align:center}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-title,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-title{font-size:37px;line-height:44px;margin:0 auto 30px}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-blurb-text,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-blurb-text{font-size:21px;line-height:30px}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-video,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-video{display:block;margin:100px auto 0;width:100%}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-video video,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-video video{width:80%;height:auto}.plans-page .plans-blurb-section .feature-row-holder,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder{margin:80px auto 60px}}@media (max-width:767px){.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-video,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-video{-webkit-transform:scale(1.2);transform:scale(1.2);margin:80px auto 0}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text{width:90%}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-title,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-title{font-size:32px;line-height:36px;margin:0 auto 30px}.plans-page .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-blurb-text,.upgrade-overlay-holder .plans-blurb-section .blurb-row-holder .blurb-row .blurb-text .blurb-blurb-text{font-size:18px;line-height:24px}.plans-page .plans-blurb-section .feature-row-holder,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder{display:block;text-align:center;margin-top:0}.plans-page .plans-blurb-section .feature-row-holder .content,.upgrade-overlay-holder .plans-blurb-section .feature-row-holder .content{-webkit-flex-basis:0;flex-basis:0;-webkit-flex-grow:0;flex-grow:0;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:auto;margin:80px auto 0;text-align:center;width:80%;padding:0}}.plans-page.upgrade-overlay-holder,.upgrade-overlay-holder.upgrade-overlay-holder{position:fixed;width:100%;height:100vh;overflow:auto;z-index:100001;top:100%;transition:top .5s ease-in}.plans-page.upgrade-overlay-holder .x-close-btn,.upgrade-overlay-holder.upgrade-overlay-holder .x-close-btn{position:fixed;z-index:2001;right:26px;top:calc(100vh + 26px);background-image:url(/images/icon-close-x.svg);background-color:transparent;background-repeat:no-repeat;background-size:contain;background-position:50%;width:20px;height:20px;border:none;outline:none;cursor:pointer;color:transparent;opacity:0;transition:opacity .5s ease-in,top .5s ease-in}.plans-page.upgrade-overlay-holder .x-close-btn.showing,.upgrade-overlay-holder.upgrade-overlay-holder .x-close-btn.showing{opacity:.5;top:26px}.plans-page.upgrade-overlay-holder .x-close-btn.showing:hover,.upgrade-overlay-holder.upgrade-overlay-holder .x-close-btn.showing:hover{opacity:1}.plans-page.upgrade-overlay-holder.showing,.upgrade-overlay-holder.upgrade-overlay-holder.showing{top:0}.plans-page.upgrade-overlay-holder.showing-hero-video,.upgrade-overlay-holder.upgrade-overlay-holder.showing-hero-video{overflow:hidden}.plans-page.upgrade-overlay-holder.showing-hero-video .upgrade-view-close-btn,.upgrade-overlay-holder.upgrade-overlay-holder.showing-hero-video .upgrade-view-close-btn{display:none}.landing-plans-hero{padding-top:48px;text-align:center;position:relative;height:200px;font-size:2em}.landing-plans-hero h2,.landing-plans-hero h4{font-family:adobe-clean,sans-serif;color:#35414c}.landing-plans-hero h2{color:#fff;line-height:1.14;width:70%;margin:0 auto 38px;text-align:center;font-size:48px}.landing-plans-hero h4{margin-top:20px;margin-bottom:50px;color:#fff;font-size:20px}.landing-plans-hero h4 a{color:#fff;font-weight:400}.landing-plans-hero .graphic-device{width:764px;height:auto}.landing-plans-view,.upgrade-overlay-holder .upgrade-overlay{-webkit-align-content:center;align-content:center;text-align:center;background:#fff}.landing-plans-plans-wrapper p.discount-terms-conditions{font-size:14px;line-height:17px;font-weight:400;padding-left:350px;margin:10px auto 40px;font-family:adobe-clean,sans-serif}.landing-plans-plans-wrapper p.discount-terms-conditions a{color:#82919b;font-weight:400;text-decoration:underline}.landing-plans-plans-wrapper p.discount-terms-conditions .phone{color:#1473e6;font-weight:400}.landing-plans-plans-wrapper .landing-plans-plans{font-family:adobe-clean,sans-serif;margin:0 auto;position:relative;display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:center;justify-content:center}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper{width:310px;text-align:left;font-weight:400;margin-right:50px;opacity:1}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper h4{font-size:18px;font-weight:700;line-height:52px;color:#35414c;height:52px;font-family:adobe-clean,sans-serif}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .admin-feature{display:block}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .upgrade-admin-label{height:40px;line-height:40px}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .upgrade-features-label{height:52px}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper.no-admin-features .admin-feature,.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper.no-admin-features .divider,.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper.no-admin-features .upgrade-admin-label{display:none}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title span{font-size:40px;font-weight:900;line-height:48px;margin-bottom:60px;text-align:left;font-family:adobe-clean,sans-serif;color:#284660}@media (min-width:768px) and (max-width:1023px){.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title span{font-size:40px;line-height:48px}}@media (max-width:767px){.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title span{font-size:36px;line-height:46px}}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item{display:inline}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item .hidden{position:absolute;display:inline;opacity:0;-webkit-animation:slideme 18s infinite;animation:slideme 18s infinite;width:auto;color:#10c459;margin:0}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item .hidden:first-child{-webkit-animation-delay:2s;animation-delay:2s}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item .hidden:nth-child(2){-webkit-animation-delay:4s;animation-delay:4s}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item .hidden:nth-child(3){-webkit-animation-delay:6s;animation-delay:6s}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item .hidden:nth-child(4){-webkit-animation-delay:8s;animation-delay:8s}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item .hidden:nth-child(5){-webkit-animation-delay:10s;animation-delay:10s}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item .hidden:nth-child(6){-webkit-animation-delay:12s;animation-delay:12s}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item .hidden:nth-child(7){-webkit-animation-delay:14s;animation-delay:14s}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item .hidden:nth-child(8){-webkit-animation-delay:16s;animation-delay:16s}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item .hidden:nth-child(9){-webkit-animation-delay:18s;animation-delay:18s}@media (max-width:767px){.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-title .plans-wrapper-title-item{display:block}}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-header{height:330px;position:relative}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper.no-admin-features .plans-wrapper-header{height:378px}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper.has-apps.no-admin-features .plans-wrapper-header,.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper.has-apps .plans-wrapper-header{height:418px}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-desc{color:#35414c;font-family:adobe-clean,sans-serif;font-size:15px;line-height:19px;font-weight:400;text-align:left;opacity:1;display:inline-block}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-desc strong{font-weight:900}.landing-plans-plans-wrapper .landing-plans-plans .plans-wrapper .plans-wrapper-desc h4{font-weight:700}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature{background-repeat:no-repeat;background-position:0;background-size:32px 32px;text-align:left;height:60px;font-size:15px;padding-top:3px;position:relative}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature div{font-size:15px;line-height:17px;font-weight:400;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);padding-left:45px;width:100%}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature span.new-tag{position:absolute;background-color:#10c459;color:#fff;font-weight:700;border-radius:4px;min-width:24px;height:16px;top:50%;padding-left:5px;padding-right:5px;-webkit-transform:translateY(-50%);transform:translateY(-50%);font-size:11px;text-align:center;line-height:16px;right:318px}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.create-premium-templates{background-image:url(/images/pricing/v2/feature-icons/create-premium-templates.svg)}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.invite-others{background-image:url(/images/pricing/v2/feature-icons/invite-others.svg)}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.create-unique-designs{background-image:url(/images/pricing/v2/feature-icons/create-unique-designs.svg);background-size:32px 32px}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.use-stunning-images{background-image:url(/images/pricing/v2/feature-icons/use-stunning-images-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.remove-watermark{background-image:url(/images/pricing/v2/feature-icons/remove-watermark-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.reassign-licenses{background-image:url(/images/pricing/v2/feature-icons/reassign-licenses-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.personalize-designs{background-image:url(/images/pricing/v2/feature-icons/personalize-designs-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.switch-brands{background-image:url(/images/pricing/v2/feature-icons/switch-brands.svg)}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.consolidate-billing{background-image:url(/images/pricing/v2/feature-icons/consolidate-billing-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.design-from-templates{background-image:url(/images/pricing/v2/feature-icons/design-from-templates-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.dedicated-tech-support{background-image:url(/images/pricing/v2/feature-icons/dedicated-tech-support-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans .plan-feature.has-adobe-fonts{background-image:url(/images/pricing/v2/feature-icons/has-adobe-fonts-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans .check-plan-has-feature{background-repeat:no-repeat;background-position:0;height:60px;border-bottom:1px solid rgba(53,65,76,.2)}.landing-plans-plans-wrapper .landing-plans-plans .check-plan-has-feature.checked{background-position:50%;background-size:14px auto;background-image:url(/images/pricing/v2/checked.svg)}.landing-plans-plans-wrapper .landing-plans-plans .sp-cta-button-primary{border:2px solid #1473e6;color:#1473e6;font-size:15px;font-weight:700;min-width:140px;max-width:170px;height:40px;background-color:#fff;line-height:25px;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.landing-plans-plans-wrapper .landing-plans-plans .sp-cta-button-primary:hover{color:#fff;background-color:#1473e6;border-color:#fff}.landing-plans-plans-wrapper .landing-plans-plans .sp-cta-button-primary.selected{background-color:#fff;color:#1473e6}.landing-plans-plans-wrapper .landing-plans-plans .landing-plans-plans-footer-line{font-size:18px;line-height:26px;font-weight:400;color:#35414c}.landing-plans-plans-wrapper .landing-plans-plans .landing-plans-plans-footer-line a{font-weight:400;text-decoration:none;color:#1473e6;cursor:pointer}.landing-plans-plans-wrapper .landing-plans-plans .landing-plans-plans-footer-line a:hover{color:#1269d0}.landing-plans-plans-wrapper .landing-plans-plans .landing-plans-plans-footer-line.landing-plans-enterprise-info{margin-top:24px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans{font-family:adobe-clean,sans-serif;background-color:#fff;display:-webkit-flex;display:flex;height:1040px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans .plan-info-header{height:400px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans.has-apps{height:730px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans.has-apps .plan-info-header{height:470px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans.has-apps li.inner{width:260px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans.has-apps.no-admin-features .plan-info-header{height:470px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans.no-admin-features{height:850px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans.no-admin-features.has-apps{height:890px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans.no-admin-features .plan-info-header{height:430px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans.no-admin-features.divider{display:none}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner{list-style:none;border-radius:0;width:222px;padding:0;margin:0}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info{opacity:1;margin:0;padding:0;transition:opacity .6s}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info.recommended-plan-info,.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info:hover{opacity:1}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-upgrade-admin-label{display:none;font-family:adobe-clean,sans-serif;font-size:18px;line-height:40px;text-align:left;border-top:1px solid rgba(53,65,76,.2);font-weight:700;padding:10px 0 0}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .named-plan-feature{display:none}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header{padding:20px 10px 40px;border-bottom:1px solid rgba(53,65,76,.2)}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-supertitle{font-size:13px;font-weight:400;margin:10px auto 5px;line-height:24px;color:#82919b}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-title{color:#35414c;font-size:21px;font-weight:900;text-transform:uppercase;margin:0 0 20px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-buy-button{margin:0;height:44px;font-size:15px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-subtitle{font-size:15px;line-height:19px;font-weight:400;color:#35414c;margin:0 0 24px;height:60px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-image{width:100%;margin:0 auto 24px;height:60px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-image.free img,.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-image.individual img{width:60px;height:60px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-image.team img{width:78px;height:60px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-image.ccp img{width:auto;height:48px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area{margin:0 0 20px;color:#35414c;font-weight:400;font-family:adobe-clean,sans-serif;min-height:66px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area .plan-dropdown{margin:0 auto}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area.simply-free{min-height:70px;font-weight:400}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area.simply-free .free-text{font-size:24px;line-height:22px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area.simply-free .free-text.is-free{font-weight:700;font-size:24px;line-height:22px;padding:0 0 3px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area.simply-free .free-text.no-credit-card-required{font-size:15px;font-weight:400;line-height:22px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area .plan-price{display:none;color:#35414c;font-size:24px;font-weight:700;line-height:22px;font-family:adobe-clean,sans-serif;margin:0 0 15px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area .plan-price div{display:inline-block;font-weight:700}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area .plan-price div.currency,.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area .plan-price div.fraction-and-time div.time{font-weight:400;font-size:15px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area .plan-price.selected{display:inline-block}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area .plan-price.has-special-offer.selected{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;margin-top:-22px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area .plan-price.has-special-offer.selected .old-price{font-size:.7em;-webkit-text-decoration-color:#dc4158;-moz-text-decoration-color:#dc4158;text-decoration-color:#dc4158}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area.single-offer .plan-dropdown-area{height:32px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area.single-offer .plan-pricing-area .plan-dropdown{display:none}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-header .plan-pricing-area.single-offer .plan-pricing-area .plan-price{width:100%;border-radius:40px;padding-left:0;padding-right:0}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .no-bottom-border{border:0}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-see-hide-features{display:none}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-features .space{height:60px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-features .space.empty{background-color:#f2f4f5;opacity:0}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-info .plan-info-features .space.divider{opacity:.2;height:40px;border-bottom:40px solid rgba(53,65,76,.5)}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .recommended-only{font-size:14px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-dropdown,.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .single-app-dropdown{font-size:15px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:20px auto 5px;max-width:326px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-dropdown .ddv-dropdown-button,.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .single-app-dropdown .ddv-dropdown-button{background:#fff url(/images/pricing/v2/updownarrow.svg) no-repeat 90% 50%;width:160px;height:32px;border-radius:4px;color:#284660;font-size:15px;line-height:19px;font-weight:400;margin:0 auto;text-align:center}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .plan-dropdown .ddv-dropdown-line,.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .single-app-dropdown .ddv-dropdown-line{font-size:15px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .discounted-only,.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner .recommended-only{display:none}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.recommended{opacity:1;background:linear-gradient(#5256d0,#4599cd);color:#fff}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.recommended .plan-info-header,.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.recommended .plan-info-header .plan-subtitle,.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.recommended .plan-info-header .plan-title{opacity:1;color:#fff}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.recommended .plan-info-header .plan-supertitle{color:#f2f4f5}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.recommended .plan-info-header .plan-pricing-area .plan-price{color:#fff}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.recommended .plan-info-header .sp-cta-button-primary{opacity:1;background-color:#f2f4f5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none;border:0}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.recommended .plan-info-header .sp-cta-button-primary:hover{color:#1473e6;background-color:#fff}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.recommended .check-plan-has-feature.checked{background-image:url(/images/pricing/v2/checked-white.svg)}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.recommended .recommended-only{display:block;font-size:14px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.recommended .recommended{height:32px;text-transform:uppercase;font-family:adobe-clean,sans-serif;color:#fff;display:block;line-height:32px;font-weight:700;border-radius:8px 8px 0 0;margin-top:-32px;background-color:#10c459}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.discounted .plan-supertitle{color:#82919b}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.discounted .discounted-only{display:block}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.discounted .recommended-only{display:none}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans li.inner.discounted .discounted{height:32px;text-transform:none;font-family:adobe-clean,sans-serif;color:#35414c;display:block;font-size:14px;line-height:32px;font-weight:700;border-radius:8px 8px 0 0;margin-top:-32px;background-color:#ffdb2a;text-transform:uppercase}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans.no-admin-features li.inner{width:260px}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans .plan-offer-dropdown-line-pricing .old-price,.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans .plan-price .old-price{text-decoration:line-through}.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans .plan-offer-dropdown-line-pricing.plan-offer-dropdown-line-pricing .old-price,.landing-plans-plans-wrapper .landing-plans-plans .list-of-plans .plan-price.plan-offer-dropdown-line-pricing .old-price{font-size:.95em}.landing-plans-plans-wrapper .cc-footer{color:#82919b;text-align:center;font-size:15px;line-height:26px;font-weight:400;margin:50px auto 30px;font-family:inherit}.landing-plans-plans-wrapper .cc-footer p{margin-top:10px}.landing-plans-plans-wrapper .cc-footer a{color:#1473e6;font-weight:400}.landing-plans-plans-wrapper .learn-more-and-call{margin:12px auto;display:block;width:880px;text-align:left;font-weight:400;color:#1473e6}.landing-plans-plans-wrapper .learn-more-and-call .learn-more-and-call-header{font-family:adobe-clean,sans-serif;font-weight:700;font-size:20px;line-height:80px;margin:0;height:80px;text-align:left;text-transform:uppercase;color:#35414c;display:inline-block;width:200px}.landing-plans-plans-wrapper .learn-more-and-call .learn-more-and-call-text{display:inline-block;background-color:#fff;font-family:adobe-clean,sans-serif;font-weight:400;height:80px;margin:0;font-size:16px;color:#35414c;line-height:19px;text-align:center;position:relative;border-top-right-radius:4px;border-bottom-right-radius:4px}.landing-plans-plans-wrapper .learn-more-and-call .learn-more-and-call-text div{padding-left:15px;font-weight:400;width:100%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.landing-plans-plans-wrapper .learn-more-and-call .learn-more-and-call-explainer{width:460px;font-weight:400;font-size:15px;line-height:19px;position:relative;border-top-right-radius:4px;border-bottom-right-radius:4px}.landing-plans-plans-wrapper .learn-more-and-call .learn-more-and-call-explainer div{font-weight:400;width:100%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.landing-plans-plans-wrapper .learn-more-and-call .with-phone-text{width:220px;padding:32px;font-size:18px;border-radius:4px;color:#82919b;background-color:#fff;margin:0}.landing-plans-plans-wrapper .learn-more-and-call .with-phone-text .phone,.landing-plans-plans-wrapper .learn-more-and-call a{color:#1473e6;font-weight:400}@media (max-width:1024px){.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner{width:90%;max-width:648px;margin:40px auto}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .plans-wrapper{float:none;text-align:center;padding:0 0 30px;width:100%}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .plans-wrapper .plans-wrapper-header{width:100%;text-align:center;height:auto}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .plans-wrapper .plans-wrapper-header .plans-wrapper-title{text-align:left;height:130px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .plans-wrapper.has-apps .plans-wrapper-header,.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .plans-wrapper.no-admin-features .plans-wrapper-header{height:auto}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .plans-wrapper .plans-wrapper-desc{width:100%;text-align:center;line-height:24px;font-size:18px;margin:0 0 40px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .plans-wrapper .plans-wrapper-features{display:none}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .discount-terms-conditions{padding:0;text-align:center;font-size:16px;line-height:20px;font-weight:400;margin:0 auto 40px;font-family:adobe-clean,sans-serif}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .discount-terms-conditions .phone{color:#1473e6;font-weight:400}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .discount-terms-conditions a{color:#82919b;font-weight:400;text-decoration:underline}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .upgrade-admin-label,.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .upgrade-features-label{display:none;font-family:adobe-clean,sans-serif}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .learn-more-and-call{width:100%;display:block;padding:25px;text-align:center;background-color:#fff;border-radius:8px;margin:20px auto}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .learn-more-and-call .learn-more-and-call-header{font-family:adobe-clean,sans-serif;font-size:20px;height:auto;line-height:20px;margin:0 auto 10px;text-align:center;display:block;padding:0}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .learn-more-and-call .learn-more-and-call-text{display:block;text-align:center;margin:0 auto;width:100%;padding:20px 0 30px;height:auto}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .learn-more-and-call .learn-more-and-call-explainer{width:100%;font-size:16px;line-height:20px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .learn-more-and-call .with-phone-text{font-size:20px;line-height:24px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans{display:block;width:100%}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans{height:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;background-color:transparent}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .space{display:none}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans.no-admin-features{height:auto}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans.has-apps .inner .plan-info-header{height:470px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans.has-apps .inner,.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans.no-admin-features .inner{width:100%;height:auto}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner{width:100%;max-width:100%;display:block;background-color:#fff;margin:0 auto 40px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info{opacity:1;padding:0 20px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .collapsible{font-size:20px;line-height:18px;color:#82919b;font-weight:400;cursor:pointer;padding:20px;margin:0 auto;text-align:center;outline:none;background:url(/images/pricing/v2/down.svg);background-repeat:no-repeat;background-size:24px 24px;background-position:70%}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-see-hide-features{display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;height:25px;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:20px auto;text-align:center;line-height:18px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-see-hide-features .plan-see-hide-features-label{font-size:20px;color:#82919b;white-space:nowrap;font-weight:400}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-see-hide-features .plan-see-hide-features-arrow{width:24px;height:24px;display:inline-block;background-image:url(/images/pricing/v2/uparrow.svg);background-position:100% -3px;background-repeat:no-repeat;background-size:24px 24px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-see-hide-features.see-details .plan-see-hide-features-arrow{background-image:url(/images/pricing/v2/downarrow.svg)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-features{padding:0 5px 5px;display:none}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-features .plan-info-upgrade-admin-label{display:block}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-features .check-plan-has-feature{display:none}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-features .named-plan-feature{display:block;margin:20px auto 25px;padding-left:45px;position:relative}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-features .named-plan-feature div{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-features .named-plan-feature span.new-tag{top:0;-webkit-transform:none;transform:none;background-color:transparent;background-repeat:no-repeat;background-size:16px auto;left:-16px;width:16px;height:16px;right:0;background-image:url(/images/pricing/v2/new_star.svg)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info.recommended-plan-info .plan-info-features{display:block}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header{height:auto}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-subtitle{font-size:18px;height:auto;margin:0 0 40px;line-height:24px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-supertitle{font-size:16px;line-height:24px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-title{font-size:24px;line-height:30px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-buy-button{font-size:18px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-dropdown .ddv-dropdown-button{width:100%}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-image{margin:0 auto 20px;text-align:center;height:auto}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-image.individual img{width:92px;height:92px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-image.team img{width:120px;height:92px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-image.free img{width:92px;height:92px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-image.ccp img{width:auto;height:48px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-pricing-area{font-weight:400}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-pricing-area.simply-free{min-height:65px;font-weight:400}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-pricing-area.simply-free .free-text.is-free{font-size:24px;line-height:22px;font-family:inherit;font-weight:400;margin-bottom:3px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-pricing-area.simply-free .free-text.no-credit-card-required{font-size:15px;font-weight:400;line-height:22px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-pricing-area .plan-price{font-size:24px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info .plan-info-header .plan-pricing-area div{font-weight:400;font-family:inherit}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.discounted{-webkit-order:-1;order:-1;margin-top:20px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended{-webkit-order:-2;order:-2}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended .plan-see-hide-features{display:none}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended .plan-info-features li.plan-feature{background-size:32px 32px}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended .plan-info-features li.plan-feature.create-premium-templates{background-image:url(/images/pricing/v2/feature-icons/create-premium-templates-w.svg)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended .plan-info-features li.plan-feature.invite-others{background-image:url(/images/pricing/v2/feature-icons/invite-others-w.svg)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended .plan-info-features li.plan-feature.create-unique-designs{background-image:url(/images/pricing/v2/feature-icons/create-unique-designs-w.svg)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended .plan-info-features li.plan-feature.use-stunning-images{background-image:url(/images/pricing/v2/feature-icons/use-stunning-images-w-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended .plan-info-features li.plan-feature.remove-watermark{background-image:url(/images/pricing/v2/feature-icons/remove-watermark-w-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended .plan-info-features li.plan-feature.personalize-designs{background-image:url(/images/pricing/v2/feature-icons/personalize-designs-w-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended .plan-info-features li.plan-feature.switch-brands{background-image:url(/images/pricing/v2/feature-icons/switch-brands-w.svg)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended .plan-info-features li.plan-feature.design-from-templates{background-image:url(/images/pricing/v2/feature-icons/design-from-templates-w-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner.recommended .plan-info-features li.plan-feature.has-adobe-fonts{background-image:url(/images/pricing/v2/feature-icons/has-adobe-fonts-w-1.svg)}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .landing-plans-plans .list-of-plans .inner .plan-info-features .plan-feature{height:40px;font-weight:400}.landing-plans-plans-wrapper .landing-plans-plans-wrapper-inner .cc-footer .cc-text{font-size:16px;line-height:20px}}.hero-video-viewer{display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:200;padding-top:5px;padding-bottom:5px}.hero-video-viewer.hide{display:none}.hero-video-viewer .cc-paid-hero-video,.hero-video-viewer iframe{width:100%;height:100%}.hero-video-viewer .close-button{position:absolute;right:0;top:0;background-color:red;background:url("+i(n(58))+");background-size:18px 18px;background-repeat:no-repeat;background-position:50%;width:60px;height:60px;z-index:1000}.flex-horizontal{-webkit-flex-direction:row;flex-direction:row}.flex-horizontal,.flex-vertical{display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}.flex-vertical{-webkit-flex-direction:column;flex-direction:column}.scroller-mask{-webkit-overflow-scrolling:touch;overflow:hidden;-ms-overflow-style:none}.scroller-mask::-webkit-scrollbar{display:none}.scroller-mask .scroller{position:absolute;top:0;display:-webkit-flex;display:flex;transition:-webkit-transform .1s;transition:transform .1s;transition:transform .1s,-webkit-transform .1s}.scroller-mask .scroller.non-flex-scroller{position:inherit}.scroller-mask .scroller.initting{transition:-webkit-transform 0s;transition:transform 0s;transition:transform 0s,-webkit-transform 0s}.scroller-mask .scroller-hit-area{position:absolute;top:0;height:100%;width:10%;max-width:100px;min-width:75px}.scroller-mask .scroller-hit-area.left{left:0;cursor:w-resize}.scroller-mask .scroller-hit-area.left.disabled{z-index:-1}.scroller-mask .scroller-hit-area.right{right:0;cursor:e-resize}.scroller-mask .scroller-hit-area.right.disabled{z-index:-1}.scroller-mask.supports-touch,.scroller-mask.supports-track-scroll-h{overflow-x:auto;overflow-y:hidden}.scroller-mask.supports-touch .scroller-hit-area,.scroller-mask.supports-track-scroll-h .scroller-hit-area{display:none}.scroller-mask.scroll-not-needed{overflow:hidden}.scroller-mask.scroll-not-needed .scroller{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.example-assets-row-mask{width:100vw;position:relative;height:454px}.example-assets-row-mask.desktop{width:calc(100vw - 16px)}@media (max-width:1024px){.example-assets-row-mask{height:346px}}.example-assets-row-scroller{height:calc(100% - 3px)}.example-assets-row{height:100%;left:0;bottom:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:baseline;align-items:baseline;padding:0 15px}.example-asset-item{max-height:100%;height:276px;-webkit-justify-content:flex-start;justify-content:flex-start;margin:0 14px;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.example-asset-item:first-child{margin-left:0}.example-asset-item:last-child{margin-right:0}.example-asset-item .asset-background{max-height:calc(100% - 50px);width:276px;position:relative;background-repeat:no-repeat;background-size:contain;background-position:bottom;box-shadow:0 1px 3px rgba(0,0,0,.1)}.example-asset-item .asset-title{height:50px;line-height:50px;font-size:14px;font-weight:400;text-align:left;width:100%;padding:0 20px;background:#fff;border-bottom-left-radius:4px;border-bottom-right-radius:4px;box-shadow:0 1px 3px rgba(0,0,0,.1);z-index:1;-webkit-flex-shrink:0;flex-shrink:0}.example-asset-item .show-asset-btn{display:none}.example-asset-item.can-preview .show-asset-btn{display:block;cursor:-webkit-zoom-in;cursor:zoom-in;width:100%;height:100%;background-repeat:no-repeat;background-position:50%;position:absolute;bottom:0}.example-asset-item.can-preview.video .show-asset-btn{background-image:url(/images/icon-video-play-button.svg);background-size:18%}@media (max-width:1024px){.example-asset-item{width:200px;height:200px}.example-asset-item .asset-background{width:200px}}.bullets-area .bullet-item{display:-webkit-flex;display:flex;width:376px;height:359px;-webkit-flex-direction:column;flex-direction:column;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-align-items:center;align-items:center;margin-left:12px;margin-right:12px;font-size:15px;text-align:center;font-weight:400;padding:32px;border-radius:4px;background-color:#fff}.bullets-area .bullet-item:first-child{margin-left:0}.bullets-area .bullet-item:last-child{margin-right:0}.bullets-area .bullet-item .bullet-image{width:204px;height:126px;background-repeat:no-repeat;background-size:contain;background-position:50%}.bullets-area .bullet-item .bullet-title{font-family:brandon-grotesque,adobe-clean,sans-serif;font-size:1.375em;font-weight:700;margin-top:40px;margin-bottom:14px;line-height:28px;color:#35414c}.bullets-area .bullet-item .bullet-text{line-height:1.5;font-weight:400;width:100%;color:#35414c}@media (max-width:1024px){.bullets-area .bullet-item{width:320px;height:337px;margin-left:5px;margin-right:5px;padding:30px}}@media (max-width:800px){.bullets-area.flex-horizontal{-webkit-flex-direction:column;flex-direction:column}.bullets-area.flex-horizontal .bullet-item{width:376px;height:335px;margin:10px 0;max-width:calc(100vw - 16px)}.bullets-area.flex-horizontal .bullet-item:first-child{margin-top:0}.bullets-area.flex-horizontal .bullet-item:last-child{margin-bottom:0}}.ddv-dropdown{height:100%;width:100%}.ddv-dropdown .ddv-dropdown-overlay{position:fixed;width:200vw;height:200vh;top:-50vh;left:-50vw;background-color:#fff;opacity:0;z-index:10001}.ddv-dropdown .ddv-dropdown-button{width:100%;color:#35414c;padding:5px 35px 5px 23px;font-size:16px;border-radius:23px;height:100%;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;background:#f2f4f5 url(/images/caret-arrow.png) 90% 50% no-repeat;background-size:11px auto;border:1px solid #dce0e3;cursor:pointer;font-style:normal;font-weight:400;transition:border-color .4s;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;line-height:150%;text-align:center}.ddv-dropdown .ddv-dropdown-button:focus,.ddv-dropdown .ddv-dropdown-button:hover{border-color:#82919b}.ddv-dropdown .ddv-dropdown-bg{z-index:10002;background-color:#fff;box-shadow:0 2px 10px 1px hsla(0,0%,60%,.35);border-radius:6px;padding:6px;position:fixed;overflow-y:auto}.ddv-dropdown .ddv-dropdown-bg.hide{display:none}.ddv-dropdown .ddv-dropdown-bg.center-vertical{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.ddv-dropdown .ddv-dropdown-bg .ddv-dropdown-line{padding:0 16px;margin:5px;background-repeat:no-repeat;background-position:10px;background-size:16px;border-radius:3px;cursor:pointer;font-size:16px;color:#9aa6af;font-weight:400;text-align:left;line-height:27px}.ddv-dropdown .ddv-dropdown-bg .ddv-dropdown-line:hover:not(.arrow-nav){background-color:#f2f4f5;color:#35414c}.ddv-dropdown .ddv-dropdown-bg .ddv-dropdown-line.selected.use-checkmark{background-image:url("+i(n(234))+")}.ddv-dropdown .ddv-dropdown-bg .ddv-dropdown-line.selected.use-checkbox{background-image:url("+i(n(235))+");color:#1473e6}.ddv-dropdown .ddv-dropdown-bg .ddv-dropdown-line.selected:not(.use-checkbox){background-position:right 11px center;background-color:#f2f4f5;color:#35414c}.ddv-dropdown .ddv-dropdown-bg .ddv-dropdown-line.use-checkbox{padding-left:32px;background-image:url("+i(n(236))+");background-position:left 7px center;background-size:12px;color:#35414c}.cc-logo{height:24px;width:32px;background-repeat:no-repeat;background-size:contain;background-image:url(/images/icon-logo-cc-red.svg)}.cc-logo.gray{background-image:url(/images/icon-logo-cc-gray.svg)}.sp-cta-button-primary,.sp-cta-button-secondary{height:32px;border-radius:24px;font-size:15px;font-weight:700;line-height:30px;padding:0 16px;min-width:75px;text-align:center;cursor:pointer;transition:background-color .3s,color .3s}.sp-cta-button-primary.link,.sp-cta-button-secondary.link{text-decoration:none;line-height:32px}.sp-cta-button-primary.disabled,.sp-cta-button-secondary.disabled{background-color:rgba(130,145,155,.09);color:#d8dde0}.sp-cta-button-primary.disabled:active,.sp-cta-button-primary.disabled:hover,.sp-cta-button-secondary.disabled:active,.sp-cta-button-secondary.disabled:hover{cursor:default;background-color:rgba(130,145,155,.09)}.sp-cta-button-primary{color:#fff;background-color:#1473e6}.sp-cta-button-primary:hover{background-color:#1269d0}.sp-cta-button-primary:active{background-color:#1056a7}.sp-cta-button-secondary{color:#82919b;background-color:transparent;border:2px solid #82919b;line-height:28px;transition:background-color .3s,color .3s,border-color .3s}.sp-cta-button-secondary:hover{background-color:#82919b;color:#fff}.sp-cta-button-secondary:active{background-color:#35414c;border-color:#35414c;color:#fff}.sp-cta-button-secondary.over-dark,.sp-cta-button-secondary.over-dark-photo{color:#dce0e3;border-color:#dce0e3}.sp-cta-button-secondary.over-dark-photo.over-dark-photo,.sp-cta-button-secondary.over-dark.over-dark-photo{color:#fff;border-color:#fff}.sp-cta-button-secondary.over-dark-photo:hover,.sp-cta-button-secondary.over-dark:hover{color:#35414c;background-color:#dce0e3}.sp-cta-button-secondary.over-dark-photo:hover.over-dark-photo,.sp-cta-button-secondary.over-dark:hover.over-dark-photo{background-color:#fff}.sp-cta-button-secondary.over-dark-photo:active,.sp-cta-button-secondary.over-dark:active{background-color:#35414c;border-color:#35414c;color:#fff}.sp-cta-button-secondary.over-dark-photo{color:#fff;border:2px solid #fff}.sp-cta-button-secondary.over-dark-photo:hover{color:#35414c;background-color:#fff}.sp-cta-button-secondary.over-dark-photo:active{background-color:#35414c;border-color:#35414c;color:#fff}.mrvl-dlg-btn-acts .sp-cta-button-primary,.mrvl-dlg-btn-acts .sp-cta-button-secondary{margin-left:5px;margin-right:5px}.mrvl-dlg-btn-acts .sp-cta-button-primary:first-child,.mrvl-dlg-btn-acts .sp-cta-button-secondary:first-child{margin-left:0}.mrvl-dlg-btn-acts .sp-cta-button-primary:last-child,.mrvl-dlg-btn-acts .sp-cta-button-secondary:last-child{margin-right:0}.brands-examples-view .brand-assets-holder{-webkit-order:1;order:1}.brands-examples-view .brand-picker,.brands-examples-view.picker-on-top .brand-assets-holder{-webkit-order:2;order:2}.brands-examples-view.picker-on-top .brand-picker{-webkit-order:1;order:1}.example-assets-row{-webkit-transform:translate(0);transform:translate(0);opacity:1;transition:opacity .7s;display:-webkit-flex;display:flex}.example-assets-row.anim-out{opacity:0}.example-assets-row.anim-in{top:0;position:absolute}.example-assets-row.selected{display:-webkit-flex;display:flex}.example-assets-row .example-asset-item{height:250px}.example-assets-row .example-asset-item .asset-background{width:250px}@media (max-width:1024px){.example-assets-row .example-asset-item{width:200px;height:200px}.example-assets-row .example-asset-item .asset-background{width:200px}}.brand-picker{margin-top:54px;margin-bottom:60px;position:relative;max-width:calc(100vw - 16px);padding-left:16px;padding-right:16px}.brand-picker .border-box{position:absolute;top:0;left:0;width:100%;height:100%;border-bottom:2px solid #dadee1}.brand-picker .brand-icon{z-index:1;width:80px;height:80px;background-size:50px 50px;background-position:top;background-repeat:no-repeat;margin-left:10px;margin-right:10px;cursor:pointer;transition:border-color .7s;border-bottom:2px solid #dadee1;opacity:.5}.brand-picker .brand-icon:last-child{margin-right:0}.brand-picker .brand-icon:nth-child(2){margin-left:0}.brand-picker .brand-icon.selected{border-bottom:2px solid #35414c;opacity:1}.brand-picker .brand-icon:hover{border-bottom:2px solid #35414c}@media (max-width:375px){.brand-picker .brand-icon{background-size:contain}}.bullet-item .bullet-image{height:160px}.bullet-item.logo .bullet-image{height:158px;width:238px;background-image:url(/images/features/steps-logo.png)}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5),only screen and (min-resolution:1.5dppx),only screen and (min-resolution:192dpi){.bullet-item.logo .bullet-image{background-image:url(/images/features/steps-logo@2x.png)}}.bullet-item.logo-ccpl .bullet-image{background-image:url(/images/features/steps-logo-ccpl.png)}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5),only screen and (min-resolution:1.5dppx),only screen and (min-resolution:192dpi){.bullet-item.logo-ccpl .bullet-image{background-image:url(/images/features/steps-logo-ccpl@2x.png)}}.bullet-item.colors .bullet-image{width:128px;height:133px;background-image:url(/images/features/steps-colors.svg)}.bullet-item.colors-and-fonts .bullet-image{width:242px;height:104px;background-image:url(/images/features/steps-colors-and-fonts.svg)}.bullet-item.fonts .bullet-image{width:99px;height:135px;background-image:url(/images/features/steps-fonts.svg)}.bullet-item.templates-and-themes .bullet-image{height:182px;width:218px;background-image:url(/images/features/steps-templates-and-themes.png)}@media (max-width:768px){.bullet-item.templates-and-themes .bullet-image{margin-bottom:-32px}}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5),only screen and (min-resolution:1.5dppx),only screen and (min-resolution:192dpi){.bullet-item.templates-and-themes .bullet-image{background-image:url(/images/features/steps-templates-and-themes@2x.png)}}.bullet-item.intuitive .bullet-image{background-image:url(/images/features/intuitive.png)}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5),only screen and (min-resolution:1.5dppx),only screen and (min-resolution:192dpi){.bullet-item.intuitive .bullet-image{background-image:url(/images/features/intuitive@2x.png)}}.bullet-item.tell-a-story .bullet-image{background-image:url(/images/features/tell-a-story.png)}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5),only screen and (min-resolution:1.5dppx),only screen and (min-resolution:192dpi){.bullet-item.tell-a-story .bullet-image{background-image:url(/images/features/tell-a-story@2x.png)}}.bullet-item.share .bullet-image{background-image:url(/images/features/share.png)}@media only screen and (-webkit-min-device-pixel-ratio:1.5),only screen and (-webkit-min-device-pixel-ratio:2),only screen and (min--moz-device-pixel-ratio:1.5),only screen and (min-device-pixel-ratio:1.5),only screen and (min-resolution:1.5dppx),only screen and (min-resolution:192dpi){.bullet-item.share .bullet-image{background-image:url(/images/features/share@2x.png)}}",""])},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDggOCI+PHBhdGggZD0iTTYuNDEgMWwtLjY5LjcyTDIuOTQgNC41bC0uODEtLjc4TDEuNDEgMyAwIDQuNDFsLjcyLjcyIDEuNSAxLjUuNjkuNzIuNzItLjcyIDMuNS0zLjUuNzItLjcyTDYuNDEgMXoiIGZpbGw9IiMzNTQxNGMiLz48L3N2Zz4K"},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjYwNDkgMjcyIDEyIDEyIiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiPjxkZWZzPjxzdHlsZT4uYXtmaWxsOiMxNDczZTY7fTwvc3R5bGU+PC9kZWZzPjxwYXRoIGNsYXNzPSJhIiBkPSJNMTAtMjYzOEgyYTIsMiwwLDAsMS0yLTJ2LThhMiwyLDAsMCwxLDItMmg4YTIsMiwwLDAsMSwyLDJ2OEEyLDIsMCwwLDEsMTAtMjYzOFptLTYuODc1LTYuNmEuNzYxLjc2MSwwLDAsMC0uNS4ybC0uNC40YS43OS43OSwwLDAsMCwwLDEuMWwyLjQsMi4zYS43NjEuNzYxLDAsMCwwLC41LjIuODY4Ljg2OCwwLDAsMCwuNi0uM2w0LjEtNS4yYS43MzcuNzM3LDAsMCwwLC4yLS42LjU1Mi41NTIsMCwwLDAtLjMtLjVsLS40LS4zYS43NTEuNzUxLDAsMCwwLS40LS4yLjkwNi45MDYsMCwwLDAtLjcuM2wtMy4yLDQuMi0xLjQtMS40QS43NjIuNzYyLDAsMCwwLDMuMTI1LTI2NDQuNloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYwNDkgMjkyMikiLz48L3N2Zz4K"},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjYwNDkgMjQwIDEyIDEyIj48ZGVmcz48c3R5bGU+LmEsLmN7ZmlsbDpub25lO30uYXtzdHJva2U6IzM1NDE0YztzdHJva2Utd2lkdGg6MnB4O30uYntzdHJva2U6bm9uZTt9PC9zdHlsZT48L2RlZnM+PGcgY2xhc3M9ImEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYwNDkgMjQwKSI+PHJlY3QgY2xhc3M9ImIiIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgcng9IjIiLz48cmVjdCBjbGFzcz0iYyIgeD0iMSIgeT0iMSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIiByeD0iMSIvPjwvZz48L3N2Zz4="},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(5),n(6),n(7),n(4),n(20),n(238),n(239),n(241),n(225),n(242),n(8)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u,h,p,f){"use strict";var g;return n.View.extend({defaultBrands:{defaultId:"morningGlo",assetsRoot:"/images/brandExamples/brand-",displayOrder:["morningGlo","rgFitness","pattiWatts","emeraldJones","blueWater"],thumbFileType:"png",allChildren:[{id:"morningGlo",icon:"MorningGlo.svg",displayOrder:["presentation","ad","flyer","engaging-tip","invitation"],allChildren:[{id:"presentation",title:f.getString("brand-examples-video-story"),aspectRatio:200/112,contentType:"video",thumb:"MG_Video"},{id:"ad",title:f.getString("brand-examples-ad"),aspectRatio:1,contentType:"post",thumb:"MG_2ndlocation"},{id:"flyer",title:f.getString("brand-examples-flyer"),aspectRatio:250/370,contentType:"page",thumb:"MG_Page"},{id:"invitation",title:f.getString("brand-examples-invitation"),aspectRatio:1,contentType:"post",thumb:"MG_PostClass"},{id:"engaging-tip",title:f.getString("brand-examples-engaging-tip"),aspectRatio:1,contentType:"post",thumb:"MG_PostTip"}]},{id:"rgFitness",icon:"RGFitness.svg",displayOrder:["presentation","ad","flyer","engaging-tip","invitation"],allChildren:[{id:"presentation",title:f.getString("brand-examples-video-story"),aspectRatio:200/112,contentType:"video",thumb:"RG_Video"},{id:"ad",title:f.getString("brand-examples-ad"),aspectRatio:1,contentType:"post",thumb:"RGPost_SignUp"},{id:"flyer",title:f.getString("brand-examples-flyer"),aspectRatio:250/370,contentType:"page",thumb:"RGPage"},{id:"invitation",title:f.getString("brand-examples-invitation"),aspectRatio:1,contentType:"post",thumb:"RGPost_Quote"},{id:"engaging-tip",title:f.getString("brand-examples-engaging-tip"),aspectRatio:1,contentType:"post",thumb:"RGPost_Hustle"}]},{id:"pattiWatts",icon:"PattiWatts.svg",displayOrder:["advertisement","tip","newsletter","quote","tip2"],allChildren:[{id:"advertisement",title:f.getString("brand-examples-video-story"),aspectRatio:200/112,contentType:"video",thumb:"PW_Video"},{id:"tip",title:f.getString("brand-examples-tip"),aspectRatio:1,contentType:"post",thumb:"PW_PostTip"},{id:"newsletter",title:f.getString("brand-examples-newsletter"),aspectRatio:250/370,contentType:"page",thumb:"PW_Page"},{id:"quote",title:f.getString("brand-examples-quote"),aspectRatio:1,contentType:"post",thumb:"PW_Quote"},{id:"tip2",title:f.getString("brand-examples-tip"),aspectRatio:1,contentType:"post",thumb:"PW_Tip2"}]},{id:"emeraldJones",icon:"EmeraldLandscaping.svg",displayOrder:["presentation","portfolio","flyer","invitation","tip"],allChildren:[{id:"presentation",title:f.getString("brand-examples-video-story"),aspectRatio:200/112,contentType:"video",thumb:"EJVideo"},{id:"portfolio",title:f.getString("brand-examples-portfolio"),aspectRatio:1,contentType:"post",thumb:"EJPost_portfolio"},{id:"flyer",title:f.getString("brand-examples-flyer"),aspectRatio:250/370,contentType:"page",thumb:"EJPage"},{id:"invitation",title:f.getString("brand-examples-invitation"),aspectRatio:1,contentType:"post",thumb:"EJPost_Offer"},{id:"tip",title:f.getString("brand-examples-engaging-tip"),aspectRatio:1,contentType:"post",thumb:"EJPost_Tip"}]},{id:"blueWater",icon:"BlueWater.svg",displayOrder:["presentation","guide","flyer","tip","invitation"],allChildren:[{id:"presentation",title:f.getString("brand-examples-video-story"),aspectRatio:200/112,contentType:"video",thumb:"BWSC_Video"},{id:"guide",title:f.getString("brand-examples-guide"),aspectRatio:1,contentType:"post",thumb:"BWSC_PostProfile"},{id:"flyer",title:f.getString("brand-examples-flyer"),aspectRatio:200/294,contentType:"page",thumb:"BWSC_Page"},{id:"invitation",title:f.getString("brand-examples-invitation"),aspectRatio:1,contentType:"post",thumb:"BWSC_RecruitmentPost"},{id:"tip",title:f.getString("brand-examples-engaging-tip"),aspectRatio:1,contentType:"post",thumb:"BWSC_PostThanks"}]}]},events:{"click .brand-icon":"handleBrandIconClick","click .example-asset-item":"handleExampleAssetClick"},workflow:"brandsExamplesView",initialize:function(e){t.bindAll(this,t.functionsIn(this))},sendAnalytic:function(e){var t=this.model.get("parentWorkflow"),n=t?t+":"+this.workflow:this.workflow;a.trackEvent("brandsExamplesAction",e,n)},render:function(){return this._brandsRenderStage("beforeMustache"),this.$el.html(l.to_html(c,this.model.toJSON(),{})),this._brandsRenderStage("afterMustache"),this},_doChildSwitch:function(e,n){if(e.current){e.current.selector$&&e.current.selector$.removeClass("selected"),e.current.animDiv$.removeClass("selected"),e.current.animDiv$.addClass("anim-out"),e.current.animDiv$.addClass("anim-in");var i=e.current;t.delay((function(){e.current!==i&&(i.animDiv$.addClass("hide"),i.animDiv$.removeClass("anim-in"))}),750)}e.current=n,n.selector$&&n.selector$.addClass("selected"),e.current.animDiv$.addClass("selected"),e.current.animDiv$.removeClass("anim-in"),e.current.animDiv$.removeClass("hide"),t.delay((function(){e.current.animDiv$.removeClass("anim-out")}),1),this.current=e.current},setCurrentBrand:function(e){var t=this.model.get("brands");"string"==typeof e&&(e=t.byId[e]),e!==t.current?(this._doChildSwitch(t,e),this.examplesScroller.resetScroll()):this.current=e},_getOrderedChildrenSet:function(e,n){var i={},r=[];return t.each(n,(function(e,t){i[e]=t})),t.each(e,(function(e){var n=i[e.id];t.isUndefined(n)||(r[n]=e)})),t.compact(r)},_brandsRenderStage:function(i){var r=this.model.get("brands");if("beforeMustache"===i){r?this.model.set("brands",t.cloneDeep(r)):this.model.set("brands",t.cloneDeep(this.defaultBrands)),r=this.model.get("brands");var o=this.model.get("displayOrder")||r.displayOrder,a=this.model.get("exampleOrders"),s=d.contentTypeMap,c=[];r.children=this._getOrderedChildrenSet(r.allChildren,o),r.byId={},r.assetsById={},t.each(r.children,function(e){var i=r.assetsRoot+e.id+"/",o=a&&a[e.id]||e.displayOrder;r.byId[e.id]=e,e.logoUrl=i+e.icon,e.id===r.defaultId&&(e.selected=!0,r.current=e),e.assets=this._getOrderedChildrenSet(e.allChildren,o),t.each(e.assets,(function(t){var o=t.uri;t.thumbUrl=i+t.thumb,t.assetId=t.assetId||e.id+"_"+t.id,t.hwar=100/t.aspectRatio+"%",t.brandId=e.id,o||(t.model=new n.Model({assetId:t.assetId,type:s[t.contentType],useCase:t.title,uri:o,alias:t.alias})),r.assetsById[t.assetId]=t,c.push({id:t.assetId,url:t.thumbUrl})}))}.bind(this));var p=l.to_html(h,{assets:c,fileType:r.thumbFileType});this.model.set("examplesStyle",p)}else if("afterMustache"===i){t.each(this.$el.find(".example-assets-row"),(function(t){t=e(t),r.byId[t.data("id")].animDiv$=t})),t.each(this.$el.find(".brand-icon"),(function(t){t=e(t),r.byId[t.data("id")].selector$=t})),this.setCurrentBrand(r.current);var f=this.$el.find(".example-assets-row-mask"),g=new n.Model({scroller$:f.find(".example-assets-row-scroller"),content$:f.find(".example-assets-row")});this.examplesScroller?(this.examplesScroller.setElement(f),this.examplesScroller.model=g):this.examplesScroller=new u({el:f,model:g}),this.examplesScroller.render()}},handleBrandIconClick:function(t){var n=e(t.target).data("id");this.setCurrentBrand(n),this.sendAnalytic({type:"brandIconClick",brand:n})},handleExampleAssetClick:function(t){var n=e(t.currentTarget).closest(".example-asset-item"),i=n.data("assetid"),r=this.model.get("brands").assetsById[i],o=(this.model.get("parentZIndex")||1*this.$el.css("z-index")||0)+1,a=n.hasClass("can-preview");this.sendAnalytic({type:"brandAssetClick",assetId:i,canPreview:a}),a&&(g?g.setOptions({parentObj:this,model:r.model,fullScreen:!0,minZIndex:o}):g=new d({model:r.model,el:"#preview-overlay-fs",parentObj:this,fullScreen:!0,minZIndex:o}),g.showOverlay())},closeExample:function(){g&&g.handleCloseBtn()},remove:function(){this.examplesScroller&&this.examplesScroller.remove()}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='{{#brands}}\n{{{examplesStyle}}}\n<div class="brands-examples-view flex-vertical{{#pickerOnTop}} picker-on-top{{/pickerOnTop}}">\n    <div class="brand-assets-holder example-assets-row-mask scroller-mask">\n        <div class="example-assets-row-scroller flex-vertical">\n        {{#children}}\n            <div class="example-assets-row flex-horizontal {{#selected}} selected{{/selected}}{{^selected}} anim-out hide{{/selected}}" data-id="{{id}}">\n                {{#assets}}\n                <div class="brand-asset example-asset-item flex-vertical {{contentType}}{{#uri}} can-preview{{/uri}}" data-assetid="{{assetId}}">\n                    <div class="asset-background" id="{{assetId}}" style="padding-top:{{hwar}};">\n                        <div class="show-asset-btn"></div>\n                    </div>\n                    <div class="asset-title">{{title}}</div>\n                </div>\n                {{/assets}}\n            </div>\n        {{/children}}\n        </div>\n    </div>\n    <div class="brand-picker flex-horizontal">\n        <div class="border-box"></div>\n    {{#children}}\n        <div class="brand-icon{{#selected}} selected{{/selected}}" data-id="{{id}}" style="background-image:url({{logoUrl}}"></div>\n    {{/children}}\n    </div>\n</div>\n{{/brands}}\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(25),n(6),n(7),n(5),n(240),n(214),n(26),n(4)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u){"use strict";var h={theo:"post",slate:"page",voice:"video"},p=r.extend({el:"#preview-overlay",showFullScreen:!1,parentObj:null,events:{"click .preview-close-btn":"handleCaseOverlayCloseBtn","click .preview-blank-one-btn":"handleBlankOneClick","click .preview-resize-out-btn":"handleResizeOut","click .preview-resize-in-btn":"handleResizeIn","click .close-toast":"badgeToastClose"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),e.fullScreen&&(this.showFullScreen=e.fullScreen),e.parentObj&&(this.parentObj=e.parentObj),this.minZIndex=e.minZIndex||0},setOptions:function(e){this.showFullScreen=e.fullScreen,this.parentObj=e.parentObj,this.minZIndex=e.minZIndex||0,this.model=e.model||this.model},_getTypeName:function(e){return h[e]?h[e]:e},_getCreateNewButtonText:function(e){var t,n=d.getAppByType(e).getDisplayName();switch(e){case"post":t=s.hasFeature("post-gallery-remix")?"Remix this Post":"Create new "+n;break;default:t="Create new "+n}return t},createShareURI:function(e,t,n){if("theo"==t)return null;var i=u.publishedContentBases;if(i[t])return i[t]+"/"+n+"/";throw new Error("Unkown example type: "+t)},createFacebookShareURI:function(e,t,n){var i=this.createShareURI(e,t,n);return i?"https://www.facebook.com/sharer/sharer.php?u="+i:null},createTwitterShareURI:function(e,t,n){var i=this.createShareURI(e,t,n);if(!i)return null;switch(t){case"voice":return"https://twitter.com/intent/tweet?text="+encodeURIComponent('Check out this video: "'+e+'" '+i+" #adobespark via @AdobeSpark");case"slate":return"https://twitter.com/intent/tweet?text="+encodeURIComponent('Check out this web story: "'+e+'" '+i+" #adobespark via @AdobeSpark");default:throw new Error("Unkown example type: "+t)}},render:function(){if(this.$el.html(l.toString()),this.pageBody$=e("body"),this.bodyHasNoScroll=this.pageBody$.hasClass("no-scroll"),this.pageBody$.addClass("in-preview"),this.showBadge||e(".video-promotion").hide(),this.showFullScreen){this.$el.find(".preview-resize-in-btn").addClass("hide"),this.handleResizeOut();var i=this.createFacebookShareURI(this.model.get("title"),this.model.get("type"),this.model.get("alias")),r=this.createTwitterShareURI(this.model.get("title"),this.model.get("type"),this.model.get("alias"));i&&(e(".facebook-icon-item").removeClass("hide"),e(".preview-facebook-icon").attr("href",i)),r&&(e(".twitter-icon-item").removeClass("hide"),e(".preview-twitter-icon").attr("href",r))}else this.$el.find(".preview-social-icons").addClass("hide");this.iframeWrap$=this.$el.find(".preview-iframe-wrap"),this.iframeContainer$=this.$el.find(".preview-iframe-container"),this.iframe$=this.$el.find(".preview-iframe"),this.div$=this.$el.find(".preview-div"),this.divWrap$=this.$el.find(".preview-div-wrap"),this.type$=this.$el.find(".preview-case-type"),this.makeNewButton$=this.$el.find(".preview-blank-one-btn"),s.hasFeature("create-from-enabled")&&this.$el.find(".preview-make-one-btn").removeClass("hide");var o=this.model.get("type"),a=this._getTypeName(o),h=this.model.get("uri");"theo"===o?(this.div$.css("background-image","url("+h+")"),this.divWrap$.removeClass("hide"),this.iframeContainer$.addClass("hide")):("voice"===o?(this.iframe$.attr("src",h),e(".preview-resize-out-wrapper").addClass("hide"),this.showFullScreen&&(this.resizeVideo(),e(window).on("resize.resizevoice",this.resizeVideo))):this.iframe$.attr("src",h),this.divWrap$.addClass("hide"),this.iframeContainer$.removeClass("hide"));var p=d.getAppByType(a).getDisplayName();this.makeNewButton$.text(this._getCreateNewButtonText(a)),this.makeNewButton$.addClass(o),this.type$.text(p),this.type$.addClass(o),this.iframeWrap$.addClass(o),this.iframe$.addClass(o),this.iframeContainer$.addClass(o),this.$el.find(".case-overlay-shell").addClass(o),this.$el.find(".preview-main-area").addClass(o);var f=this.model.get("useCase"),g=this.model.get("description");(this._resetZIndexString=null,this.minZIndex)&&(1*this.$el.css("z-index")<this.minZIndex&&(this._resetZIndexString=this.$el[0].style.zIndex,this.$el.css("z-index",this.minZIndex)));if(f&&(this.caseTitle$=this.$el.find(".preview-case-title"),this.caseTitle$.text(f)),g&&(this.caseDesc$=this.$el.find(".preview-case-desc"),this.caseDesc$.text(g),this.caseDesc$.removeClass("hide")),this.caseRelated$=this.$el.find(".preview-case-related-items"),this.model.get("related")&&this.model.get("related").length){var m=this.model.get("related"),v=m.length>2?2:m.length,b=m.slice(0,v);t.each(b,function(e){c.getExample(e).then(function(e){var t=new n.Model(e),i=t.get("type");"theo"==i?h=t.get("imageURI")?t.get("imageURI"):t.get("thumbURI"):"voice"==i?(h=t.get("embedURI"))||(h="https://cc-api-cp.adobe.io/api/v2/voice/assets/"+t.get("alias")+"/video/embed?api_key=LucaApp1"):h=u.slateExampleServer+t.get("alias")+"/",t.set("uri",h);var r=this.createRelatedIem(t);this.caseRelated$.append(r)}.bind(this))}.bind(this))}else this.$el.find(".preview-case-related").addClass("hide");return this.showBadge&&(this.toast=this.$el.find("#custom-toast"),e("#custom-toast-text").attr("href","https://www.adobe.com/go/how-to-make-addictive-cooking-videos-for-social-media"),"mini-chocolate-cakes-recipe"!==this.model.get("slug")&&this.toast.hide(),this.badgeToastShow()),this.delegateEvents(),this},badgeToastShow:function(){var t=e(window).width()<=800?"400px":"353px";t=e(window).width()<=500?"300px":t,t=320===e(window).width()?"276px":t,setTimeout((function(){e("#custom-toast-text").delay(3e3).animate({width:t,opacity:"1"},{duration:700,queue:!1}),e(".close-toast").delay(1e3).animate({opacity:"1"},{duration:300,queue:!0})}),4e3)},badgeToastClose:function(){e(".close-toast").animate({opacity:"0"}),e("#custom-toast-text").animate({width:"0",opacity:"0"},{duration:400,queue:!1}),e("#custom-toast").animate({opacity:"0"},{duration:100,queue:!1}),e(".badgeBounce").addClass("badgeBounceReverse")},resizeVideo:function(){var t=e(window),n=t.width();n=.7*n>1280?1280:.7*n;var i,r,o=parseInt(t.height()-67);n/(16/9)>o?(r=o,i=o*(16/9)):(i=n,r=n/(16/9)),i=Math.ceil(i),r=Math.ceil(r),this.iframeContainer$.width(i),this.iframeContainer$.height(r);var a=(o-r)/2;if(this.iframeContainer$.css("margin-top",a),this.iframeContainer$.css("margin-bottom",a),this.showBadge){this.$el.find(".preview-main-area").height();o<800&&n>414&&(this.iframeContainer$.width(951),this.iframeContainer$.height(535),this.iframeContainer$.css("margin-top","17.5px"),this.iframeContainer$.css("margin-bottom","17.5px"))}},createRelatedIem:function(t){var n=t.get("type"),i=d.getAppByType(this._getTypeName(n)).getDisplayName(),r=e("<div></div>").addClass("preview-case-related-item"),o=e("<div></div>").addClass("preview-case-type").text(i).addClass(n),a=e("<div></div>").addClass("preview-case-related-thumb").css("background-image","url("+t.get("thumbURI")+")").addClass(n),s=e("<div></div>").addClass("preview-case-related-title").text(t.get("useCase"));return r.append(o).append(a).append(s),this.parentObj&&r.on("click",function(e){e.stopPropagation(),this.parentObj.handleExampleClick(t)}.bind(this)),r},_openEditor:function(){if(d.getAppByType(this._getTypeName(this.model.get("type"))).requestAppCreateNew("npw-example-blank","organizer:projects",{projectOverlay:"v1.1",exampleAlias:this.model.get("alias")}))return marvel.events.trigger("remove-first-use-prep"),!0},handleResizeOut:function(){this.showFullScreen?this.$el.find(".case-overlay-shell").addClass("case-overlay-shell-only-full-screen"):this.$el.find(".case-overlay-shell").addClass("case-overlay-shell-full-screen")},handleResizeIn:function(){this.$el.find(".case-overlay-shell").removeClass("case-overlay-shell-full-screen")},handleBlankOneClick:function(e){if(o.checkUserAgentNavIfNotOk())if("theo"==this.model.get("type")&&s.hasFeature("post-gallery-remix"))marvel.navigate("#remix-gallery/post/"+this.model.get("alias"),{trigger:!0}),this.hideOverlay();else{if(!this._openEditor())return!1;this.hideOverlay()}},onHide:function(){this.bodyHasNoScroll||this.pageBody$.removeClass("no-scroll"),this.pageBody$.removeClass("in-preview"),this.showFullScreen=!1,null!==this._resetZIndexString&&this.$el.css("z-index",this._resetZIndexString),this.$el.empty(),this.undelegateEvents(),e(window).off("resize.resizevoice")},handleCaseOverlayCloseBtn:function(){a.trackEvent("CaseOverlayCloseBtnClicked",{context:this.model.get("alias")},"exampleviewer:case-overlay"),this.handleCloseBtn()}});return p.contentTypeMap={video:"voice",page:"slate",post:"theo"},p}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="case-overlay-shell" data-auto="case-overlay-shell">\n    <div class="preview-full-screen-overlay clearfix">\n        <ul class="preview-social-icons clearfix">\n            <li class="facebook-icon-item hide"><a href="#" class="preview-social-icon preview-facebook-icon" target="_blank"><img src="/images/facebook-grey.svg" alt="Facebook" class="preview-facebook-icon"></a></li>\n            <li class="twitter-icon-item hide"><a href="#" class="preview-social-icon preview-twitter-icon" target="_blank"><img src="/images/twitter-grey.svg" alt="Twitter" class="preview-twitter-icon"></a></li>\n        </ul>\n        <button class="preview-blank-one-btn" data-auto="preview-blank-one-btn-fs">Create new video</button>\n    </div>\n    <div class="mrvl-overlay-actions">\n        <button class="preview-resize-in-btn" data-auto="preview-resize-in-btn"></button>\n        <button class="preview-close-btn" data-auto="preview-close-btn"></button>\n    </div>\n\n    <div class="preview-main-area">\n        <div class="preview-iframe-container hide">\n            <div class="preview-iframe-wrap">\n                <iframe name="case-overlay-iframe" class="preview-iframe" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>\n                <div class="preview-resize-out-wrapper">\n                    <div class="preview-resize-out-btn" data-auto="preview-resize-out-btn"></div>\n                </div>\n            </div>\n        </div>\n        <div class="video-promotion">\n            <div id="custom-badge-toast" class="badge-position">\n                <a href="/about"><img id="custom-badge" class="badge badgeBounce" src="/images/feature-promotion/new-video-badge-dark@2x.png"></a>\n                <div id="custom-toast" class="badge-text">\n                    <a id="custom-toast-text" href="#">How to craft a great recipe video</a>\n                    <div class="close-toast circle">\n                        <span class="close"></span>\n                    </div> \n                </div>\n            </div>\n        </div>\n        <div class="preview-div-wrap hide">\n            <div class="preview-div"></div>\n        </div>\n    </div>\n\n    <div class="preview-case-area">\n        <div class="preview-case-panel">\n            <div class="preview-case-top">\n                <div class="preview-case-type" data-auto="preview-case-type"></div>\n                <h2 class="preview-case-title"></h2>\n                <p class="preview-case-desc hide"></p>\n\n                <div class="preview-make-btns">\n                    <div class="preview-blank-one-btn" data-auto="preview-blank-one-btn">Create new Page</div>\n                </div>\n            </div>\n            <div class="preview-case-related">\n                <h4>More like this:</h4>\n\n                <div class="preview-case-related-items clearfix"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(65)],void 0===(r=function(e,t,n,i,r){"use strict";return n.View.extend({events:{"mouseover .scroller-hit-area":"handleMouseOverHitArea","mousemove .scroller-hit-area":"handleMouseMoveHitArea","mouseleave .scroller-hit-area":"handleMouseLeaveHitArea"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this._debouncer=t.debounce(this.windowResized,100).bind(this)},render:function(){var n=r.getPlatformInfo(),i=this.$el.find(".scroller-hit-area left"),o=this.$el.find(".scroller-hit-area right");return this.$el.addClass("scroller-mask").addClass(n.cssString),this._appliedPlatformCssString=n.cssString,n.supportsTrackScrollH?(this._browserScroller=!0,i.length&&i.addClass("hide"),o.length&&o.addClass("hide")):(i.length||(i=e('<div class="scroller-hit-area left"></div>'),this.$el.append(i)),o.length||(o=e('<div class="scroller-hit-area right"></div>'),this.$el.append(o)),this._setScrollSupportNotification(!0)),this.right$=o,this.left$=i,this.scroller$=this.model.get("scroller$"),this._currentTarget$=this.scroller$.find("div:visible:first"),this.scroller$.addClass("initting"),this.scroller$.addClass("scroller"),this.resetScroll(),t.delay(function(){this.scroller$.removeClass("initting")}.bind(this),0),this._debouncerEventsSet||(this._debouncerEventsSet=!0,e(window).on("resize.sidescroller",this._debouncer)),this._removed=!1,this},_setScrollSupportNotification:function(e){e!==this._requested_scroll_suport_notification&&(e?(this._requested_scroll_suport_notification=!0,marvel.events.on("platformUtils:detected-support-track-scroll-h",this.detectedScrollSupport.bind(this))):(this._requested_scroll_suport_notification=!1,marvel.events.off("platformUtils:detected-support-track-scroll-h",this.detectedScrollSupport.bind(this))))},detectedScrollSupport:function(e){this._setScrollSupportNotification(!1),this._appliedPlatformCssString&&this.$el.removeClass(this._appliedPlatformCssString),this.$el.addClass("scroller-mask").addClass(e.cssString),this._appliedPlatformCssString=e.cssString,this._browserScroller=!0,this.resetScroll()},startCheck:function(){this.clearTheInterval(),this.scrollCheck()},startInterval:function(e){this.scrollInterval&&clearInterval(this.scrollInterval),this.scrollInterval="waitToStart"===e?setInterval(this.startCheck.bind(this),100):setInterval(this.scrollCheck.bind(this),5)},handleMouseOverHitArea:function(t){this._currentTarget$=e(t.currentTarget),this._currentOffsetX=t.offsetX,this.startInterval("waitToStart")},handleMouseMoveHitArea:function(t){this._currentTarget$=e(t.currentTarget),this._currentOffsetX=t.offsetX},clearTheInterval:function(){this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=null)},handleMouseLeaveHitArea:function(e){this.clearTheInterval(),this._currentOverEdgeScroll=0},resetScroll:function(){this.setNewMiddle(0),this.clearTheInterval()},setNewMiddle:function(e){var t=this.scroller$.find("div:visible:first"),n=this.$el.width(),i=.5*(t.outerWidth()-n);this.setNewScrollValue(e-i)},setNewScrollValue:function(t){var n,i,r=this.scroller$.find("div:visible:first"),o=e(document).width(),a=this.$el.width(),s=.5*(a-o),l=r.outerWidth(),c=.5*(l-a);this.scroller$.css("width",l+"px"),l<a?(t=c,this.left$.addClass("disabled"),this.right$.addClass("disabled"),this.$el.addClass("scroll-not-needed"),this.scroller$.css("transform","")):(this.$el.removeClass("scroll-not-needed"),this._browserScroller?(i=800,(t=-t)<(n=0)?t=n:t>i&&(t=i),this.scroller$.css("transform",""),this.$el.scrollLeft(t)):(n=a-(l+s),t>(i=0+s)?(t=i,this.left$.addClass("disabled"),this.right$.removeClass("disabled")):t<n?(t=n,this.right$.addClass("disabled"),this.left$.removeClass("disabled")):(this.right$.removeClass("disabled"),this.left$.removeClass("disabled")),this.scroller$.css("transform","translateX("+t+"px)"))),this._scrollValue=t},scrollCheck:function(){var e,t=this._currentTarget$.hasClass("left")?-1:1,n=this._currentTarget$.width(),i=this._scrollValue;e=-1===t?i+9*(1-this._currentOffsetX/n):i-9*(this._currentOffsetX/n),this.setNewScrollValue(e),this._scrollValue!=e?(this.clearTheInterval(),this._currentOverEdgeScroll=0):this._currentOverEdgeScroll!==t&&this.startInterval("scrollCheck")},isShowing:function(){return!this._removed},windowResized:function(){this.isShowing()?this.resetScroll():(this._debouncerEventsSet=!1,e(window).off("resize.sidescroller",this._debouncer))},remove:function(){return this._setScrollSupportNotification(!1),this._appliedPlatformCssString&&(this.$el.removeClass(this._appliedPlatformCssString),this._appliedPlatformCssString=null),this._debouncerEventsSet&&(this._debouncerEventsSet=!1,e(window).off("resize.sidescroller",this._debouncer)),this._removed=!0,this}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i=n(243);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(34)(!1)).push([e.i,".brands-examples-view .brand-assets-holder{-webkit-order:1;order:1}.brands-examples-view .brand-picker,.brands-examples-view.picker-on-top .brand-assets-holder{-webkit-order:2;order:2}.brands-examples-view.picker-on-top .brand-picker{-webkit-order:1;order:1}.example-assets-row{-webkit-transform:translate(0);transform:translate(0);opacity:1;transition:opacity .7s;display:-webkit-flex;display:flex}.example-assets-row.anim-out{opacity:0}.example-assets-row.anim-in{top:0;position:absolute}.example-assets-row.selected{display:-webkit-flex;display:flex}.example-assets-row .example-asset-item{height:250px}.example-assets-row .example-asset-item .asset-background{width:250px}@media (max-width:1024px){.example-assets-row .example-asset-item{width:200px;height:200px}.example-assets-row .example-asset-item .asset-background{width:200px}}.brand-picker{margin-top:54px;margin-bottom:60px;position:relative;max-width:calc(100vw - 16px);padding-left:16px;padding-right:16px}.brand-picker .border-box{position:absolute;top:0;left:0;width:100%;height:100%;border-bottom:2px solid #dadee1}.brand-picker .brand-icon{z-index:1;width:80px;height:80px;background-size:50px 50px;background-position:top;background-repeat:no-repeat;margin-left:10px;margin-right:10px;cursor:pointer;transition:border-color .7s;border-bottom:2px solid #dadee1;opacity:.5}.brand-picker .brand-icon:last-child{margin-right:0}.brand-picker .brand-icon:nth-child(2){margin-left:0}.brand-picker .brand-icon.selected{border-bottom:2px solid #35414c;opacity:1}.brand-picker .brand-icon:hover{border-bottom:2px solid #35414c}@media (max-width:375px){.brand-picker .brand-icon{background-size:contain}}",""])},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var i=n(441),r=n(359);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(118),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):o(e,t)}},function(e,t,n){var i=n(30),r=n(442),o=n(359),a=n(358)("IE_PROTO"),s=function(){},l=function(){var e,t=n(356)("iframe"),i=o.length;for(t.style.display="none",n(361).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[o[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=i(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(441),r=n(359).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(102),r=n(96),o=n(358)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var i=n(31);e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t){e.exports='<div class="um-menu-icon{{#loading}} loading{{/loading}}" style="background-image:url({{userThumb}})"></div>\n<div class="um-overlay"></div>\n<div class="um-dropdown">\n    <div class="um-user-details">\n        <div class="um-user-item">\n            <a href="{{adobeAccountManagementLink}}/profile" data-auto="um-manage-account-profile-lnk" class="um-thumb" style="background-image:url({{userThumb}})" target="_blank"></a>\n            <div class="user-item-fields">\n                <div class="um-name" data-auto="um-name">{{userDisplayName}}</div>\n                <div class="um-email" data-auto="um-email">{{userEmail}}</div>\n                <a href="{{adobeAccountManagementLink}}" target="_blank" class="um-manage-account-lnk" data-auto="um-manage-account-lnk">{{user-menu-manage-adobe-account-link}}</a>\n            </div>\n        </div>\n    </div>\n    <div class="um-main-area" data-auto="um-main-area">\n        {{#hasPremium}}\n        <div>\n        <h4>{{user-menu-spark}}</h4>\n        {{/hasPremium}}\n        {{#hasPremium}}\n        <span class="um-profile-premium-badge" data-auto="um-profile-premium-badge">{{user-menu-premium-badge}}</span>\n        </div>\n        {{/hasPremium}}\n\n        <a href="https://adobespark.zendesk.com/hc/{{zendesk-locale}}/categories/202688167-Adobe-Spark" class="um-support um-link" target="_blank" data-context="user-menu" data-item="support" data-auto="um-link-support">{{user-menu-support-link}}</a>\n\n        <a href="#" class="um-profile-settings um-link" data-auto="um-link-profile-settings" data-item="settings">{{user-menu-profile-settings-link}}</a>\n\n        {{^hasPremium}}\n        <a href="/pricing" class="um-link um-profile-upgrade" data-item="upgrade" data-aa-name="profile-upgrade" data-auto="um-profile-upgrade">{{user-menu-upgrade-link}}</a>\n        {{/hasPremium}}\n\n        {{#componentSandbox}}<a href="/sp/sandbox" class="um-component-sandbox um-link" data-auto="um-link-component-sandbox" data-item="component-sandbox">{{user-menu-component-sandbox-link}}</a>{{/componentSandbox}}\n\n        {{#featureFlipper}}<a href="#" class="um-feature-flipper um-link" data-auto="um-link-feature-flipper" data-item="feature-flipper">{{user-menu-feature-flipper-link}}</a>{{/featureFlipper}}\n    </div>\n    <div class="um-sign-out-area">\n        <a href="#" class="um-sign-out um-link" data-context="user-menu" data-auto="um-link-sign-out" data-item="sign-out">{{user-menu-sign-out-link}}</a>\n    </div>\n</div>\n'},function(e,t,n){var i,r,o;
/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.1
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */!function(a,s){"use strict";e.exports?e.exports=s(n(85),n(86),n(87)):(r=[n(85),n(86),n(87)],void 0===(o="function"==typeof(i=s)?i.apply(t,r):i)||(e.exports=o))}(0,(function(e,t,n,i){"use strict";var r=i&&i.URI;function o(e,t){var n=arguments.length>=1,i=arguments.length>=2;if(!(this instanceof o))return n?i?new o(e,t):new o(e):new o;if(void 0===e){if(n)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&n)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}o.version="1.19.1";var a=o.prototype,s=Object.prototype.hasOwnProperty;function l(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function d(e){return"Array"===c(e)}function u(e,t){var n,i,r={};if("RegExp"===c(t))r=null;else if(d(t))for(n=0,i=t.length;n<i;n++)r[t[n]]=!0;else r[t]=!0;for(n=0,i=e.length;n<i;n++){(r&&void 0!==r[e[n]]||!r&&t.test(e[n]))&&(e.splice(n,1),i--,n--)}return e}function h(e,t){var n,i;if(d(t)){for(n=0,i=t.length;n<i;n++)if(!h(e,t[n]))return!1;return!0}var r=c(t);for(n=0,i=e.length;n<i;n++)if("RegExp"===r){if("string"==typeof e[n]&&e[n].match(t))return!0}else if(e[n]===t)return!0;return!1}function p(e,t){if(!d(e)||!d(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function f(e){return e.replace(/^\/+|\/+$/g,"")}function g(e){return escape(e)}function m(e){return encodeURIComponent(e).replace(/[!'()*]/g,g).replace(/\*/g,"%2A")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return o.domAttributes[t]}},o.encode=m,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=m,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(e,t){var n=o.encode(e+"");return void 0===t&&(t=o.escapeQuerySpace),t?n.replace(/%20/g,"+"):n},o.decodeQuery=function(e,t){e+="",void 0===t&&(t=o.escapeQuerySpace);try{return o.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}};var v,b={encode:"encode",decode:"decode"},y=function(e,t){return function(n){try{return o[t](n+"").replace(o.characters[e][t].expression,(function(n){return o.characters[e][t].map[n]}))}catch(e){return n}}};for(v in b)o[v+"PathSegment"]=y("pathname",b[v]),o[v+"UrnPathSegment"]=y("urnpath",b[v]);var w=function(e,t,n){return function(i){var r;r=n?function(e){return o[t](o[n](e))}:o[t];for(var a=(i+"").split(e),s=0,l=a.length;s<l;s++)a[s]=r(a[s]);return a.join(e)}};function k(e){return function(t,n){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!n),this)}}function x(e,t){return function(n,i){return void 0===n?this._parts[e]||"":(null!==n&&(n+="").charAt(0)===t&&(n=n.substring(1)),this._parts[e]=n,this.build(!i),this)}}o.decodePath=w("/","decodePathSegment"),o.decodeUrnPath=w(":","decodeUrnPathSegment"),o.recodePath=w("/","encodePathSegment","decode"),o.recodeUrnPath=w(":","encodeUrnPathSegment","decode"),o.encodeReserved=y("reserved","encode"),o.parse=function(e,t){var n;return t||(t={preventInvalidHostname:o.preventInvalidHostname}),(n=e.indexOf("#"))>-1&&(t.fragment=e.substring(n+1)||null,e=e.substring(0,n)),(n=e.indexOf("?"))>-1&&(t.query=e.substring(n+1)||null,e=e.substring(0,n)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=o.parseAuthority(e,t)):(n=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,n)||null,t.protocol&&!t.protocol.match(o.protocol_expression)?t.protocol=void 0:"//"===e.substring(n+1,n+3)?(e=e.substring(n+3),e=o.parseAuthority(e,t)):(e=e.substring(n+1),t.urn=!0)),t.path=e,t},o.parseHost=function(e,t){e||(e="");var n,i,r=(e=e.replace(/\\/g,"/")).indexOf("/");if(-1===r&&(r=e.length),"["===e.charAt(0))n=e.indexOf("]"),t.hostname=e.substring(1,n)||null,t.port=e.substring(n+2,r)||null,"/"===t.port&&(t.port=null);else{var a=e.indexOf(":"),s=e.indexOf("/"),l=e.indexOf(":",a+1);-1!==l&&(-1===s||l<s)?(t.hostname=e.substring(0,r)||null,t.port=null):(i=e.substring(0,r).split(":"),t.hostname=i[0]||null,t.port=i[1]||null)}return t.hostname&&"/"!==e.substring(r).charAt(0)&&(r++,e="/"+e),t.preventInvalidHostname&&o.ensureValidHostname(t.hostname,t.protocol),t.port&&o.ensureValidPort(t.port),e.substring(r)||"/"},o.parseAuthority=function(e,t){return e=o.parseUserinfo(e,t),o.parseHost(e,t)},o.parseUserinfo=function(e,t){var n,i=e.indexOf("/"),r=e.lastIndexOf("@",i>-1?i:e.length-1);return r>-1&&(-1===i||r<i)?(n=e.substring(0,r).split(":"),t.username=n[0]?o.decode(n[0]):null,n.shift(),t.password=n[0]?o.decode(n.join(":")):null,e=e.substring(r+1)):(t.username=null,t.password=null),e},o.parseQuery=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var n,i,r,a={},l=e.split("&"),c=l.length,d=0;d<c;d++)n=l[d].split("="),i=o.decodeQuery(n.shift(),t),r=n.length?o.decodeQuery(n.join("="),t):null,s.call(a,i)?("string"!=typeof a[i]&&null!==a[i]||(a[i]=[a[i]]),a[i].push(r)):a[i]=r;return a},o.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=o.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},o.buildHost=function(e){var t="";return e.hostname?(o.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},o.buildAuthority=function(e){return o.buildUserinfo(e)+o.buildHost(e)},o.buildUserinfo=function(e){var t="";return e.username&&(t+=o.encode(e.username)),e.password&&(t+=":"+o.encode(e.password)),t&&(t+="@"),t},o.buildQuery=function(e,t,n){var i,r,a,l,c="";for(r in e)if(s.call(e,r)&&r)if(d(e[r]))for(i={},a=0,l=e[r].length;a<l;a++)void 0!==e[r][a]&&void 0===i[e[r][a]+""]&&(c+="&"+o.buildQueryParameter(r,e[r][a],n),!0!==t&&(i[e[r][a]+""]=!0));else void 0!==e[r]&&(c+="&"+o.buildQueryParameter(r,e[r],n));return c.substring(1)},o.buildQueryParameter=function(e,t,n){return o.encodeQuery(e,n)+(null!==t?"="+o.encodeQuery(t,n):"")},o.addQuery=function(e,t,n){if("object"==typeof t)for(var i in t)s.call(t,i)&&o.addQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=n);"string"==typeof e[t]&&(e[t]=[e[t]]),d(n)||(n=[n]),e[t]=(e[t]||[]).concat(n)}},o.setQuery=function(e,t,n){if("object"==typeof t)for(var i in t)s.call(t,i)&&o.setQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");e[t]=void 0===n?null:n}},o.removeQuery=function(e,t,n){var i,r,a;if(d(t))for(i=0,r=t.length;i<r;i++)e[t[i]]=void 0;else if("RegExp"===c(t))for(a in e)t.test(a)&&(e[a]=void 0);else if("object"==typeof t)for(a in t)s.call(t,a)&&o.removeQuery(e,a,t[a]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===c(n)?!d(e[t])&&n.test(e[t])?e[t]=void 0:e[t]=u(e[t],n):e[t]!==String(n)||d(n)&&1!==n.length?d(e[t])&&(e[t]=u(e[t],n)):e[t]=void 0:e[t]=void 0}},o.hasQuery=function(e,t,n,i){switch(c(t)){case"String":break;case"RegExp":for(var r in e)if(s.call(e,r)&&t.test(r)&&(void 0===n||o.hasQuery(e,r,n)))return!0;return!1;case"Object":for(var a in t)if(s.call(t,a)&&!o.hasQuery(e,a,t[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(n)){case"Undefined":return t in e;case"Boolean":return n===Boolean(d(e[t])?e[t].length:e[t]);case"Function":return!!n(e[t],t,e);case"Array":return!!d(e[t])&&(i?h:p)(e[t],n);case"RegExp":return d(e[t])?!!i&&h(e[t],n):Boolean(e[t]&&e[t].match(n));case"Number":n=String(n);case"String":return d(e[t])?!!i&&h(e[t],n):e[t]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var e=[],t=[],n=0,i=0;i<arguments.length;i++){var r=new o(arguments[i]);e.push(r);for(var a=r.segment(),s=0;s<a.length;s++)"string"==typeof a[s]&&t.push(a[s]),a[s]&&n++}if(!t.length||!n)return new o("");var l=new o("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||l.path("/"+l.path()),l.normalize()},o.commonPath=function(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n++)if(e.charAt(n)!==t.charAt(n)){n--;break}return n<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(n)&&"/"===t.charAt(n)||(n=e.substring(0,n).lastIndexOf("/")),e.substring(0,n+1))},o.withinString=function(e,t,n){n||(n={});var i=n.start||o.findUri.start,r=n.end||o.findUri.end,a=n.trim||o.findUri.trim,s=n.parens||o.findUri.parens,l=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var c=i.exec(e);if(!c)break;var d=c.index;if(n.ignoreHtml){var u=e.slice(Math.max(d-3,0),d);if(u&&l.test(u))continue}for(var h=d+e.slice(d).search(r),p=e.slice(d,h),f=-1;;){var g=s.exec(p);if(!g)break;var m=g.index+g[0].length;f=Math.max(f,m)}if(!((p=f>-1?p.slice(0,f)+p.slice(f).replace(a,""):p.replace(a,"")).length<=c[0].length||n.ignore&&n.ignore.test(p))){var v=t(p,d,h=d+p.length,e);void 0!==v?(v=String(v),e=e.slice(0,d)+v+e.slice(h),i.lastIndex=d+v.length):i.lastIndex=h}}return i.lastIndex=0,e},o.ensureValidHostname=function(t,n){var i=!!t,r=!1;if(!!n&&(r=h(o.hostProtocols,n)),r&&!i)throw new TypeError("Hostname cannot be empty, if protocol is "+n);if(t&&t.match(o.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(t).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(e){if(e){var t=Number(e);if(!(/^[0-9]+$/.test(t)&&t>0&&t<65536))throw new TypeError('Port "'+e+'" is not a valid port')}},o.noConflict=function(e){if(e){var t={URI:this.noConflict()};return i.URITemplate&&"function"==typeof i.URITemplate.noConflict&&(t.URITemplate=i.URITemplate.noConflict()),i.IPv6&&"function"==typeof i.IPv6.noConflict&&(t.IPv6=i.IPv6.noConflict()),i.SecondLevelDomains&&"function"==typeof i.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=i.SecondLevelDomains.noConflict()),t}return i.URI===this&&(i.URI=r),this},a.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},a.clone=function(){return new o(this)},a.valueOf=a.toString=function(){return this.build(!1)._string},a.protocol=k("protocol"),a.username=k("username"),a.password=k("password"),a.hostname=k("hostname"),a.port=k("port"),a.query=x("query","?"),a.fragment=x("fragment","#"),a.search=function(e,t){var n=this.query(e,t);return"string"==typeof n&&n.length?"?"+n:n},a.hash=function(e,t){var n=this.fragment(e,t);return"string"==typeof n&&n.length?"#"+n:n},a.pathname=function(e,t){if(void 0===e||!0===e){var n=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?o.decodeUrnPath:o.decodePath)(n):n}return this._parts.urn?this._parts.path=e?o.recodeUrnPath(e):"":this._parts.path=e?o.recodePath(e):"/",this.build(!t),this},a.path=a.pathname,a.href=function(e,t){var n;if(void 0===e)return this.toString();this._string="",this._parts=o._parts();var i=e instanceof o,r="object"==typeof e&&(e.hostname||e.path||e.pathname);e.nodeName&&(e=e[o.getDomAttribute(e)]||"",r=!1);if(!i&&r&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=o.parse(String(e),this._parts);else{if(!i&&!r)throw new TypeError("invalid input");var a=i?e._parts:e;for(n in a)"query"!==n&&s.call(this._parts,n)&&(this._parts[n]=a[n]);a.query&&this.query(a.query,!1)}return this.build(!t),this},a.is=function(e){var t=!1,i=!1,r=!1,a=!1,s=!1,l=!1,c=!1,d=!this._parts.urn;switch(this._parts.hostname&&(d=!1,i=o.ip4_expression.test(this._parts.hostname),r=o.ip6_expression.test(this._parts.hostname),s=(a=!(t=i||r))&&n&&n.has(this._parts.hostname),l=a&&o.idn_expression.test(this._parts.hostname),c=a&&o.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return d;case"absolute":return!d;case"domain":case"name":return a;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return r;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var _=a.protocol,S=a.port,C=a.hostname;a.protocol=function(e,t){if(e&&!(e=e.replace(/:(\/\/)?$/,"")).match(o.protocol_expression))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return _.call(this,e,t)},a.scheme=a.protocol,a.port=function(e,t){return this._parts.urn?void 0===e?"":this:(void 0!==e&&(0===e&&(e=null),e&&(":"===(e+="").charAt(0)&&(e=e.substring(1)),o.ensureValidPort(e))),S.call(this,e,t))},a.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var n={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==o.parseHost(e,n))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=n.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(e,this._parts.protocol)}return C.call(this,e,t)},a.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=this.protocol();return this.authority()?(n?n+"://":"")+this.authority():""}var i=o(e);return this.protocol(i.protocol()).authority(i.authority()).build(!t),this},a.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?o.buildHost(this._parts):"";if("/"!==o.parseHost(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},a.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?o.buildAuthority(this._parts):"";if("/"!==o.parseAuthority(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},a.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var n=o.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==e[e.length-1]&&(e+="@"),o.parseUserinfo(e,this._parts),this.build(!t),this},a.resource=function(e,t){var n;return void 0===e?this.path()+this.search()+this.hash():(n=o.parse(e),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!t),this)},a.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var i=this._parts.hostname.length-this.domain().length,r=this._parts.hostname.substring(0,i),a=new RegExp("^"+l(r));if(e&&"."!==e.charAt(e.length-1)&&(e+="."),-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");return e&&o.ensureValidHostname(e,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,e),this.build(!t),this},a.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(t).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(e,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var r=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(r,e)}return this.build(!t),this},a.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),r=this._parts.hostname.substring(i+1);return!0!==t&&n&&n.list[r.toLowerCase()]&&n.get(this._parts.hostname)||r}var o;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');o=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},a.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?o.decodePath(i):i}var r=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,r),s=new RegExp("^"+l(a));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=o.recodePath(e),this._parts.path=this._parts.path.replace(s,e),this.build(!t),this},a.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(n+1);return e?o.decodePathSegment(i):i}var r=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(r=!0);var a=new RegExp(l(this.filename())+"$");return e=o.recodePath(e),this._parts.path=this._parts.path.replace(a,e),r?this.normalizePath(t):this.build(!t),this},a.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var n,i,r=this.filename(),a=r.lastIndexOf(".");return-1===a?"":(n=r.substring(a+1),i=/^[a-z0-9%]+$/i.test(n)?n:"",e?o.decodePathSegment(i):i)}"."===e.charAt(0)&&(e=e.substring(1));var s,c=this.suffix();if(c)s=e?new RegExp(l(c)+"$"):new RegExp(l("."+c)+"$");else{if(!e)return this;this._parts.path+="."+o.recodePath(e)}return s&&(e=o.recodePath(e),this._parts.path=this._parts.path.replace(s,e)),this.build(!t),this},a.segment=function(e,t,n){var i=this._parts.urn?":":"/",r=this.path(),o="/"===r.substring(0,1),a=r.split(i);if(void 0!==e&&"number"!=typeof e&&(n=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(o&&a.shift(),e<0&&(e=Math.max(a.length+e,0)),void 0===t)return void 0===e?a:a[e];if(null===e||void 0===a[e])if(d(t)){a=[];for(var s=0,l=t.length;s<l;s++)(t[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(f(t[s])))}else(t||"string"==typeof t)&&(t=f(t),""===a[a.length-1]?a[a.length-1]=t:a.push(t));else t?a[e]=f(t):a.splice(e,1);return o&&a.unshift(""),this.path(a.join(i),n)},a.segmentCoded=function(e,t,n){var i,r,a;if("number"!=typeof e&&(n=t,t=e,e=void 0),void 0===t){if(d(i=this.segment(e,t,n)))for(r=0,a=i.length;r<a;r++)i[r]=o.decode(i[r]);else i=void 0!==i?o.decode(i):void 0;return i}if(d(t))for(r=0,a=t.length;r<a;r++)t[r]=o.encode(t[r]);else t="string"==typeof t||t instanceof String?o.encode(t):t;return this.segment(e,t,n)};var T=a.query;return a.query=function(e,t){if(!0===e)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=e.call(this,n);return this._parts.query=o.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=o.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):T.call(this,e,t)},a.setQuery=function(e,t,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)i[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var r in e)s.call(e,r)&&(i[r]=e[r])}return this._parts.query=o.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},a.addQuery=function(e,t,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(i,e,void 0===t?null:t),this._parts.query=o.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},a.removeQuery=function(e,t,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(i,e,t),this._parts.query=o.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(n=t),this.build(!n),this},a.hasQuery=function(e,t,n){var i=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(i,e,t,n)},a.setSearch=a.setQuery,a.addSearch=a.addQuery,a.removeSearch=a.removeQuery,a.hasSearch=a.hasQuery,a.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},a.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},a.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},a.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},a.normalizePath=function(e){var t,n=this._parts.path;if(!n)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;var i,r,a="";for("/"!==(n=o.recodePath(n)).charAt(0)&&(t=!0,n="/"+n),"/.."!==n.slice(-3)&&"/."!==n.slice(-2)||(n+="/"),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(a=n.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);-1!==(i=n.search(/\/\.\.(\/|$)/));)0!==i?(-1===(r=n.substring(0,i).lastIndexOf("/"))&&(r=i),n=n.substring(0,r)+n.substring(i+3)):n=n.substring(3);return t&&this.is("relative")&&(n=a+n.substring(1)),this._parts.path=n,this.build(!e),this},a.normalizePathname=a.normalizePath,a.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},a.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},a.normalizeSearch=a.normalizeQuery,a.normalizeHash=a.normalizeFragment,a.iso8859=function(){var e=o.encode,t=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=e,o.decode=t}return this},a.unicode=function(){var e=o.encode,t=o.decode;o.encode=m,o.decode=unescape;try{this.normalize()}finally{o.encode=e,o.decode=t}return this},a.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";if(t._parts.protocol&&(n+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(n+=e.toUnicode(t._parts.hostname),t._parts.port&&(n+=":"+t._parts.port)):n+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(n+="/"),n+=t.path(!0),t._parts.query){for(var i="",r=0,a=t._parts.query.split("&"),s=a.length;r<s;r++){var l=(a[r]||"").split("=");i+="&"+o.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(i+="="+o.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=o.decodeQuery(t.hash(),!0)},a.absoluteTo=function(e){var t,n,i,r=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof o||(e=new o(e)),r._parts.protocol)return r;if(r._parts.protocol=e._parts.protocol,this._parts.hostname)return r;for(n=0;i=a[n];n++)r._parts[i]=e._parts[i];return r._parts.path?(".."===r._parts.path.substring(-2)&&(r._parts.path+="/"),"/"!==r.path().charAt(0)&&(t=(t=e.directory())||(0===e.path().indexOf("/")?"/":""),r._parts.path=(t?t+"/":"")+r._parts.path,r.normalizePath())):(r._parts.path=e._parts.path,r._parts.query||(r._parts.query=e._parts.query)),r.build(),r},a.relativeTo=function(e){var t,n,i,r,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new o(e).normalize(),t=s._parts,n=e._parts,r=s.path(),a=e.path(),"/"!==r.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===n.protocol&&(t.protocol=null),t.username!==n.username||t.password!==n.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==n.hostname||t.port!==n.port)return s.build();if(t.hostname=null,t.port=null,r===a)return t.path="",s.build();if(!(i=o.commonPath(r,a)))return s.build();var l=n.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=l+t.path.substring(i.length)||"./",s.build()},a.equals=function(e){var t,n,i,r,a,l=this.clone(),c=new o(e),u={};if(l.normalize(),c.normalize(),l.toString()===c.toString())return!0;if(i=l.query(),r=c.query(),l.query(""),c.query(""),l.toString()!==c.toString())return!1;if(i.length!==r.length)return!1;for(a in t=o.parseQuery(i,this._parts.escapeQuerySpace),n=o.parseQuery(r,this._parts.escapeQuerySpace),t)if(s.call(t,a)){if(d(t[a])){if(!p(t[a],n[a]))return!1}else if(t[a]!==n[a])return!1;u[a]=!0}for(a in n)if(s.call(n,a)&&!u[a])return!1;return!0},a.preventInvalidHostname=function(e){return this._parts.preventInvalidHostname=!!e,this},a.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},a.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},o}))},function(e,t,n){var i,r;i=[n(0),n(2),n(3),n(6),n(12)],void 0===(r=function(e,t,n,i,r){"use strict";var o=[];function a(e){for(var t=o.length-1;t>=0;t--)o[t]===e&&o.splice(t,1)}return new(t.Model.extend({_execute:function(t){o.push(t),t.promises=[],t.fnExe(t),n.allSettled(t.promises).then(function(n){var o=[];e.each(n,(function(e){"fulfilled"!==e.state&&o.push(e.reason)})),0===o.length?(marvel.logger.debug("transaction success: "+t.name),a(t),t.deferred&&t.deferred.resolve(n)):(a(t),t.deferred&&t.deferred.reject(o),i.checkIsOffline().then(function(n){n||!t.fnErr||"function"!=typeof t.fnErr?t.retry?(t.count=t.count||1,n?marvel.logger.warn("TBD: retry after coming back online"):(marvel.logger.warn("Transaction: retrying "+t.name+" ("+t.count+") after a failure."),e.delay(function(){t.count<t.retry?(t.count++,this._execute(t)):(marvel.logger.warn("Transaction "+t.name+" failed after "+t.retry+" retries. Informing user",o),r.showAlert("Oops!","Something is wrong ["+t.name+" failed].  Upon dismissing this message your browser will refresh.").then((function(){window.location.reload()})))}.bind(this),500*Math.pow(2,t.count)))):n?marvel.logger.warn("Transaction failure not shown "+t.name):(marvel.logger.warn("Transaction "+t.name+" failed, informing user",o),r.showAlert("Oops!","Something is wrong ["+t.name+" failed].  Upon dismissing this message your browser will refresh.").then((function(){window.location.reload()}))):t.fnErr(o)}.bind(this)))}.bind(this))},inProgress:function(){return o.length>0},execute:function(e,t,i,r){marvel.logger.debug("Transaction.execute("+e+")");var o={fnExe:i,fnErr:r,name:e,retry:t,deferred:n.defer()};return this._execute(o),o.deferred.promise}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";e.exports=n(178)},,function(e,t,n){var i=n(169),r=n(37),o=e.exports;for(var a in i)i.hasOwnProperty(a)&&(o[a]=i[a]);function s(e){if("string"==typeof e&&(e=r.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}o.request=function(e,t){return e=s(e),i.request.call(this,e,t)},o.get=function(e,t){return e=s(e),i.get.call(this,e,t)}},function(e,t){e.exports=localeBundle},,function(e,t,n){var i=n(51).f,r=n(102),o=n(40)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t){e.exports={}},function(e,t,n){var i=n(40)("unscopables"),r=Array.prototype;null==r[i]&&n(103)(r,i,{}),e.exports=function(e){r[i][e]=!0}},function(e,t,n){"use strict";var i=n(28),r=n(51),o=n(59),a=n(40)("species");e.exports=function(e){var t=i[e];o&&t&&!t[a]&&r.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(95);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){"use strict";for(var i=n(41),r=n(217),o=n(339),a=n(105),s=new Array(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1;function c(){a.call(this,"utf-8 decode"),this.leftOver=null}function d(){a.call(this,"utf-8 encode")}t.utf8encode=function(e){return r.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,n,i,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=r.uint8array?new Uint8Array(l):new Array(l),a=0,o=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t}(e)},t.utf8decode=function(e){return r.nodebuffer?i.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,r,o,a=e.length,l=new Array(2*a);for(n=0,t=0;t<a;)if((r=e[t++])<128)l[n++]=r;else if((o=s[r])>4)l[n++]=65533,t+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&t<a;)r=r<<6|63&e[t++],o--;o>1?l[n++]=65533:r<65536?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),i.applyFromCharCode(l)}(e=i.transformTo(r.uint8array?"uint8array":"array",e))},i.inherits(c,a),c.prototype.processChunk=function(e){var n=i.transformTo(r.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var o=n;(n=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),n.set(o,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}(n),l=n;a!==n.length&&(r.uint8array?(l=n.subarray(0,a),this.leftOver=n.subarray(a,n.length)):(l=n.slice(0,a),this.leftOver=n.slice(a,n.length))),this.push({data:t.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=c,i.inherits(d,a),d.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=d},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},,,,function(e,t,n){"use strict";(t=e.exports=n(156).default).default=t},,function(e,t,n){var i;void 0===(i=function(){"use strict";function e(e){return"[Throws: "+(e?e.message:"?")+"]"}return function(t,n){var i=Object.assign({},{depth:4},n),r=[];return function t(n){if(null===n||"object"!=typeof n)return n;if(-1!==r.indexOf(n))return"[Circular]";if(r.length>=i.depth)return"[Object]";if(r.push(n),"function"==typeof n.toJSON)try{var o=t(n.toJSON());return r.pop(),o}catch(t){return e(t)}if(Array.isArray(n)){var a=n.map(t);return r.pop(),a}var s=Object.keys(n).reduce((function(i,r){return i[r]=t(function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))try{return t[n]}catch(t){return e(t)}return t[n]}(n,r)),i}),{});return r.pop(),s}(t)}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(1),n(0),n(2)],void 0===(r=function(e,t,n){"use strict";return new(n.Model.extend({analyticIsValid:function(e,t){var n;if(this.analyticsSchema.actions[e]){n="true";for(var i=this.analyticsSchema.actions[e],r=this.analyticsSchema.persistentMetadata,o=i.concat(r),a=0;a<o.length;a++){var s=o[a];switch(s){case"platformName":"web"!==t[s]&&(n="false",window.marvel.logger.debug('"platformName" should be "web"'));break;case"sendTimestamp":var l=Date.now(),c=t[s];(c<l-1e3||c>l)&&(n="false",window.marvel.logger.debug("Timestamp is "+c+", though this is erroneous given that the current time is "+l));break;case"projectId":var d=t[s];"string"==typeof d&&d.length||(n="false",window.marvel.logger.debug('"projectId" is either an empty string or not a string'));break;default:var u=this.analyticsSchema.metadataValues[s];u||window.marvel.logger.debug("Analytics Validator schema is malformed for ["+e+"]'s ["+s+"]"),u&&u.indexOf(t[s])<0&&(n="false",window.marvel.logger.debug('The analytics metadata key "'+s+'" must contain one of the following values: ["'+u.join('" , "')+'"]'))}}}else n="unknown";return n},analyticsSchema:{actions:{"authentication:loginScreenDisplayed":["userType"],"authentication:loginSucceeded":["isNewToSpark","loginMethod"],"brandKit:setupCompleted":["brandKitCompleteness","brandKitId","isUpdated"],endPurchaseFlow:["reason"],"project:editorDisplayed":["isNewProject","projectId"],"project:createClicked":[],"project:exportCompleted":["exportMethod","exportedWithBranding","isReExport","projectId"]},persistentMetadata:["deviceName","platformName","sendTimestamp","sparkFormat"],metadataValues:{brandKitCompleteness:["true","false"],brandKitId:["BRAND_KIT_ID"],deviceName:["ANDROID_DEVICE_NAME","iPad","iPhone","iPod","web"],exportedWithBranding:["true","false"],exportMethod:["ANDROID_EXPORT_METHOD","copyEmbedToClipboard","copyLinkToClipboard","download","email","facebook","twitter","sms"],isNewToSpark:["true","false"],isNewProject:["true","false"],isUpdated:["true","false"],isReExport:["true","false"],loginMethod:["adobeID","directEmail","facebookID","googleID","sharedKeychain","adobeID:edu"],platformName:["android","ios","web"],projectId:["PROJECT_ID"],reason:["success","failure","cancel"],sendTimestamp:["UNIX_MILLISECOND_TIMESTAMP"],sparkFormat:["page","post","video","site","webNoFormat"],userType:["knownNotAuth","unknown"]}}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";n.r(t);var i=n(46),r=n(61),o=n(74),a=n(91),s=new(function(){function e(){i(this,e),this._sendQueue=[],this._isFlushing=!1}return r(e,[{key:"push",value:function(e){a(e)?o(e.sendHandler)?(this._sendQueue.push(e),this._attemptFlush()):this._logError("Must pass in analytic.sendHandler so analytic can be sent"):this._logError("Must pass in plain analytic object.")}},{key:"_attemptFlush",value:function(){this._isFlushing||(this._isFlushing=!0,this._flush())}},{key:"_flush",value:function(){if(this._sendQueue.length<=0)this._isFlushing=!1;else{var e=this._sendQueue.shift();try{e.sendHandler(e.analyticName,e.eventData,e.pageName,this._getWrappedDoneHandler(e))}catch(t){this._logError("Exception thrown from within analytic sendHandler"+" during queue flush attempt for analytic: ".concat(JSON.stringify(e))+" Error: ".concat(JSON.stringify(t))),this._flush()}}}},{key:"_getWrappedDoneHandler",value:function(e){var t=this;return function(){try{e.doneHandler&&e.doneHandler()}catch(n){t._logError("analytic.doneHandler threw exception: ".concat(JSON.stringify(n))+" with analytic: ".concat(JSON.stringify(e)))}finally{t._flush()}}}},{key:"_logError",value:function(e){window.marvel.logger.error("".concat("AnalyticsSendQueueLog: ").concat(e))}}]),e}());t.default=s},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(4),n(44)],void 0===(r=function(e,t,n,i,r,o){"use strict";return new(n.Model.extend({initialize:function(){this.deferredInit=i.defer(),o.isLoadedAndConsented().then(function(e){e&&this.onPrivacyConsentAccepted()}.bind(this)).done()},trackFirstLaunch:function(){this.deferredInit.promise.then((function(){var e=1e13*(Math.random()+""),t=document.createElement("iframe");t.src="https://1295336.fls.doubleclick.net/activityi;src=1295336;type=adobe994;cat=proje0;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord="+e+"?",t.width="0",t.height="0",t.frameBorder="0",t.style.position="absolute",t.style.top="0",t.style.left="-500px",document.body.appendChild(t)}))},onPrivacyConsentAccepted:function(){this.deferredInit.resolve()}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i;void 0===(i=function(){"use strict";function e(e,t){var a=e[0],s=e[1],l=e[2],c=e[3];a=n(a,s,l,c,t[0],7,-680876936),c=n(c,a,s,l,t[1],12,-389564586),l=n(l,c,a,s,t[2],17,606105819),s=n(s,l,c,a,t[3],22,-1044525330),a=n(a,s,l,c,t[4],7,-176418897),c=n(c,a,s,l,t[5],12,1200080426),l=n(l,c,a,s,t[6],17,-1473231341),s=n(s,l,c,a,t[7],22,-45705983),a=n(a,s,l,c,t[8],7,1770035416),c=n(c,a,s,l,t[9],12,-1958414417),l=n(l,c,a,s,t[10],17,-42063),s=n(s,l,c,a,t[11],22,-1990404162),a=n(a,s,l,c,t[12],7,1804603682),c=n(c,a,s,l,t[13],12,-40341101),l=n(l,c,a,s,t[14],17,-1502002290),a=i(a,s=n(s,l,c,a,t[15],22,1236535329),l,c,t[1],5,-165796510),c=i(c,a,s,l,t[6],9,-1069501632),l=i(l,c,a,s,t[11],14,643717713),s=i(s,l,c,a,t[0],20,-373897302),a=i(a,s,l,c,t[5],5,-701558691),c=i(c,a,s,l,t[10],9,38016083),l=i(l,c,a,s,t[15],14,-660478335),s=i(s,l,c,a,t[4],20,-405537848),a=i(a,s,l,c,t[9],5,568446438),c=i(c,a,s,l,t[14],9,-1019803690),l=i(l,c,a,s,t[3],14,-187363961),s=i(s,l,c,a,t[8],20,1163531501),a=i(a,s,l,c,t[13],5,-1444681467),c=i(c,a,s,l,t[2],9,-51403784),l=i(l,c,a,s,t[7],14,1735328473),a=r(a,s=i(s,l,c,a,t[12],20,-1926607734),l,c,t[5],4,-378558),c=r(c,a,s,l,t[8],11,-2022574463),l=r(l,c,a,s,t[11],16,1839030562),s=r(s,l,c,a,t[14],23,-35309556),a=r(a,s,l,c,t[1],4,-1530992060),c=r(c,a,s,l,t[4],11,1272893353),l=r(l,c,a,s,t[7],16,-155497632),s=r(s,l,c,a,t[10],23,-1094730640),a=r(a,s,l,c,t[13],4,681279174),c=r(c,a,s,l,t[0],11,-358537222),l=r(l,c,a,s,t[3],16,-722521979),s=r(s,l,c,a,t[6],23,76029189),a=r(a,s,l,c,t[9],4,-640364487),c=r(c,a,s,l,t[12],11,-421815835),l=r(l,c,a,s,t[15],16,530742520),a=o(a,s=r(s,l,c,a,t[2],23,-995338651),l,c,t[0],6,-198630844),c=o(c,a,s,l,t[7],10,1126891415),l=o(l,c,a,s,t[14],15,-1416354905),s=o(s,l,c,a,t[5],21,-57434055),a=o(a,s,l,c,t[12],6,1700485571),c=o(c,a,s,l,t[3],10,-1894986606),l=o(l,c,a,s,t[10],15,-1051523),s=o(s,l,c,a,t[1],21,-2054922799),a=o(a,s,l,c,t[8],6,1873313359),c=o(c,a,s,l,t[15],10,-30611744),l=o(l,c,a,s,t[6],15,-1560198380),s=o(s,l,c,a,t[13],21,1309151649),a=o(a,s,l,c,t[4],6,-145523070),c=o(c,a,s,l,t[11],10,-1120210379),l=o(l,c,a,s,t[2],15,718787259),s=o(s,l,c,a,t[9],21,-343485551),e[0]=d(a,e[0]),e[1]=d(s,e[1]),e[2]=d(l,e[2]),e[3]=d(c,e[3])}function t(e,t,n,i,r,o){return t=d(d(t,e),d(i,o)),d(t<<r|t>>>32-r,n)}function n(e,n,i,r,o,a,s){return t(n&i|~n&r,e,n,o,a,s)}function i(e,n,i,r,o,a,s){return t(n&r|i&~r,e,n,o,a,s)}function r(e,n,i,r,o,a,s){return t(n^i^r,e,n,o,a,s)}function o(e,n,i,r,o,a,s){return t(i^(n|~r),e,n,o,a,s)}function a(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var s="0123456789abcdef".split("");function l(e){for(var t="",n=0;n<4;n++)t+=s[e>>8*n+4&15]+s[e>>8*n&15];return t}function c(t){return function(e){for(var t=0;t<e.length;t++)e[t]=l(e[t]);return e.join("")}(function(t){var n,i=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=t.length;n+=64)e(r,a(t.substring(n-64,n)));t=t.substring(n-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++)o[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(e(r,o),n=0;n<16;n++)o[n]=0;return o[14]=8*i,e(r,o),r}(t))}var d=function(e,t){return e+t&4294967295};return"5d41402abc4b2a76b9719d911017c592"!=c("hello")&&(d=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}),c}.apply(t,[]))||(e.exports=i)},,function(e,t,n){var i,r;i=[n(0),n(3),n(27),n(201),n(19),n(128),n(75),n(8),n(124),n(12)],void 0===(r=function(e,t,i,r,o,a,s,l,c,d){"use strict";var u={},h=!1,p=!1;return new(i.extend({typeName:"page",getConfig:function(){return{syncGroup:"slate",scope:"slate",community:marvel.settings.lucac,newDocName:"My Page",doctype:"application/vnd.adobe.luca.document+dcx",legacyName:"Slate",displayName:"Page",templateSyncGroup:"slate-template",templateDCXType:"application/vnd.adobe.luca.sptemplate+dcx"}},checkDocCompatibility:function(e,n){var i=e.getDCXRoot().getValue("slate#modelVersion")||"",a=r.getEditorModelVersion(),s=r.compareVersionNumbers(i,a),d=marvel.features.hasFeature("slate-enable-model-update-confirmation"),f=r.compareVersionNumbers(a,r.productionModelVersion)>0,g=marvel.features.hasFeature("slate-debug-locale");return c.init(l.getLocale()).then((function(){return"opening"===n&&s<0&&d&&(f||g)?u[e.id]||window.confirm(c.getString("project.compatibility.confirm.update"))?void(u[e.id||""]=!0):t.reject({code:"USER_CANCELED"}):s>0?t.reject({code:"NOT_COMPATIBLE",usermsg:c.getString("project.compatibility.requires.newer.version")}):t.resolve()})).then(function(){return h?h&&p?t.resolve():t.reject({code:"USER_CANCELED"}):(h=!0,o.getController().then(function(t){return this._checkBrandExist(e,t)}.bind(this)).then(function(e){return p=e,e?t.resolve():(this.clearCheckBrandFlags(),t.reject({code:"USER_CANCELED"}))}.bind(this)))}.bind(this))},_checkBrandExist:function(e,t){var n=e.getMyApp().getAuthoringContextId(e);return t.getContextById(n).then(function(e){var t=n&&!e;return t?d.showConfirm(c.getString("brand_download_dialog.title"),c.getString("brand_download_dialog.message"),{okText:c.getString("brand_download_dialog.button.edit"),cancelText:c.getString("brand_download_dialog.button.cancel")}):!t}.bind(this))},clearCheckBrandFlags:function(){h=!1,p=!1},lazyLoad:function(e){Promise.all([n.e("vendors~slate-app-ac-theme-editor~slate-web"),n.e(0),n.e(1),n.e("brand-kit-chooser-view~brand-kit-editor~slate-web~user-profile-view"),n.e("slate-web")]).then(function(t){var i=n(324),r=n(302);this.setStorageImpl(r),this.setAppViewImplCls(i),this.setPublishImpl(r),e.resolve()}.bind(this).bind(null,n)).catch(n.oe)},getDocContentETag:function(e){return e.getComponentEtag("/luca.json")},resolveConflict:function(e,t,n,i,r,o,a){return this.load().then(function(){this.getStorageImpl().resolveConflict(e,t,n,r,o)}.bind(this)).done(),!0},resetDocPublishData:function(n,i){var r=[this.setCPAssetId(n,null)];t.allSettled(r).then((function(t){var n=[];e.each(t,(function(e){"fulfilled"!==e.state&&n.push(e.reason)})),0===n.length?i.resolve():i.reject(n)}))},isDocPublished:function(e){return!!this.getCPAssetId(e)},supportsDownload:function(){return!1},getProjectName:function(e,t){return"social"==t?this.getStorageImpl().getLastSharedTitle(e):e.get("name")||this.getSetting("newDocName")},setProjectName:function(e,t){return e.saveChanges((function(e){e.setValue("name",t)}))},usesContentModifiedEtags:function(){return!1},hasContentBeenUpdatedSincePublish:function(e,t){var n=i.prototype.hasContentBeenUpdatedSincePublish.apply(this,arguments),r=e.getDCXRoot(),o=r.getValue("slate#data"),a=!1;return o&&(a=o.headerDisabled!==o.lastPublishedHeaderDisabled||o.googleAnalyticsId!==o.lastPublishedGoogleAnalyticsId||o.cookieBannerEnabled!==o.lastPublishedCookieBannerEnabled||o.cookieBannerText!==o.lastPublishedCookieBannerText||o.cookieBannerConsentCTA!==o.lastPublishedCookieBannerConsentCTA),n||a},getThemeController:function(e){var i=t.defer();return Promise.all([n.e(0),n.e(1),n.e(8)]).then(function(t){var r=n(303);r.authContext=e,i.resolve(r)}.bind(this).bind(null,n)).catch(n.oe),i.promise},getThemeEditorView:function(){var e=t.defer();return Promise.all([n.e("vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor"),n.e("vendors~slate-app-ac-theme-editor~slate-web"),n.e(0),n.e(1),n.e("slate-app-ac-theme-editor")]).then(function(t){var i=n(325);e.resolve(i)}.bind(null,n)).catch(n.oe),e.promise},stripBranding:function(e,t){return i.prototype.stripBranding.apply(this,arguments).then((function(){var n=e.getDCXRoot(),i=n.getValue("slate#data");if(i&&(i.headerDisabled=void 0,n.setValue("slate#data",i)),!t)return e.saveChanges((function(){}))}))},getDocumentAsync:function(e){return e.getComponent("/luca.json").then((function(e){return e?JSON.parse(e):null}))},getFontsUsed:function(e){return this.getDocumentAsync(e).then(function(t){return this.getFontsUsedFromSlateTheme(t.theme,e)}.bind(this))},getFontsUsedFromSlateTheme:function(n,i){var r,l=[],c={};return t.all([(r=i,o.getController().then((function(e){return e.getActiveContext(r)}))),s.SparkFonts.getFontRegistry()]).spread((function(t,i){var r=new s(i),o=r.getBodySetByCssNameLookup(),d=a.getThemeTextNodes(n);function u(e,t){t&&!c[t]&&(c[t]=!0,l.push({source:e,lookupKey:t}))}function h(t,n,i){if(n){var r=o[t];if(r)return void e.each(r.faces,(function(e){u("spark-provided",e.lookupKey)}))}u("spark-provided",i)}return e.each(d,(function(e){var n=e.node,i=s.componentsThatUseBodyFonts[e.component];if(t&&n.assetId){var o=t.getFontById(n.assetId);if(!o)return;var a=o.cssName(),l=o.lookupKey();o.isCustomFont()?function(e,n,i){if(n){var r=t.getCustomBodyFontSet(e.subgroupName());if(r)return void r.forEach((function(e){u(e.source(),e.lookupKey())}))}u(e.source(),i)}(o,i,l):o.isSparkFont()&&h(a,i,l)}else{var c=r.getFontFromThemeNode(n);c&&h(n.fontFamily,i,c.lookupKey)}})),l}))},getLicenseableResources:function(t,n){n=n||{};return this.getDocumentAsync(t).then((function(t){if(!t)return[];var i=[];return e.each(t.pages,(function(t){e.each(t.sections,(function(t){i=i.concat(e.filter(t.content_items,(function(t){var i=e.get(t,"image.license.type",""),r="royalty_free_standard"===i||"royalty_free_extended"===i,o="royalty_free"===i,a=r||o;switch(n.licensed){case!0:return r;case!1:return o;default:return a}})))}))})),i=e.map(i,(function(e){return e.image.license}))}))}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i=n(204);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var i=n(204),r=n(40)("toStringTag"),o="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?n:o?i(t):"Object"==(a=i(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var i=n(30),r=n(203),o=n(40)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||null==(n=i(a)[o])?t:r(n)}},function(e,t,n){"use strict";var i=null;i="undefined"!=typeof Promise?Promise:n(774),e.exports={Promise:i}},,function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(6),n(64),n(5),n(7),n(4),n(62),n(22),n(12),n(8),n(56),n(253)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u,h,p,f){"use strict";return n.View.extend({events:{"click .um-menu-icon":"handleMenuIconClick","click .um-user-details":"handleMenuIconClick","click .um-link":"handleLinkClick","click .um-overlay":"handleOverlayClick"},initialize:function(e){this.globalNav=e.globalNav,t.bindAll(this,t.functionsIn(this))},_hideMenu:function(){this.$el.removeClass("dropdown-showing"),e(document).off("keyup.usermenu",this.handleKeyUp),this.dropdown$.one("transitionend",function(){this.dropdown$.addClass("hide"),this.$el.find(".um-overlay").removeClass("dropdown-opened")}.bind(this))},_showMenu:function(){this.dropdown$.removeClass("hide"),t.delay(function(){this.$el.addClass("dropdown-showing"),this.$el.find(".um-overlay").addClass("dropdown-opened"),e(document).on("keyup.usermenu",this.handleKeyUp)}.bind(this),0)},isShowing:function(){return this.$el.hasClass("dropdown-showing")},handleMenuIconClick:function(e){this.isShowing()?this._hideMenu():this._showMenu()},handleOverlayClick:function(e){this._hideMenu()},handleKeyUp:function(e){e.keyCode===d.DOM_VK_ESCAPE&&this._hideMenu()},_rerender:function(){return o.userProfileLoaded().then(function(){var e={loading:!1,userEmail:o.getProfile().profile.email,userDisplayName:o.getProfile().getUserDisplayName({preferFirst:!0}),userThumb:o.getProfile().getUserProfilePictureUrl(50),componentSandbox:a.hasFeature("component-sandbox"),featureFlipper:a.hasFeature("feature-flipper-ui"),hasPremium:a.hasFeature("entitle-brand-kit"),adobeAccountManagementLink:p.getLocalizedURL(l.adobeAccountManagementLink,h.getLocale())};this.$el.html(h.mustacheRender(f,e))}.bind(this))},trackClickEvent:function(e,t){var n=e.data("item");t=t||"profile:clicked"+n,s.trackEvent(t,{},"user:menu")},handleLinkClick:function(t){var n,i=e(t.target),r=i.data("item"),o=!0,s=!0;"support"===r?marvel.events.trigger("get-support",t):"feature-flipper"===r?(s=!1,a.hasFeature("feature-flipper-ui")&&this.editUserSettings({isFeatureFlipperRequest:!0})):"component-sandbox"===r?(s=!1,a.hasFeature("component-sandbox")&&(o=!1)):"settings"===r?this.editUserSettings():"sign-out"===r?(this.trackClickEvent(i),s=!1,this.logout()):"upgrade"===r?(n="profile:clickedUpgrade",c.handleShowUpgrade("user-menu")):o=!1,s&&this.trackClickEvent(i,n),o&&t.preventDefault(),this._hideMenu()},editUserSettings:function(e){e=t.assign({mode:"edit"},e||{}),o.editSettings(e).then(function(e){e&&(this._rerender(),e.featureFlipperChanges&&(u.showWaitView(h.getString("user-menu-relaunching-message")),document.location.reload()))}.bind(this)),this._hideMenu()},logout:function(){window.Intercom&&window.Intercom("shutdown"),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),document.location.pathname&&0===document.location.pathname.indexOf(h.getLocalizedSparkPath("/sp/"))?r.logout(document.location.origin):r.logout(document.location.origin+document.location.pathname)},render:function(){return this.$el.addClass("loading"),this.$el.html(h.mustacheRender(f,{loading:!0})),this.chooserList$=this.$el.find(".um-user-details"),this.dropdown$=this.$el.find(".um-dropdown").addClass("hide"),this._rerender().then(function(){this.$el.removeClass("loading"),this.$el.removeClass("hide")}.bind(this)),e(".nav-cta-actions").addClass("has-user-menu"),this}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(27),n(13)],void 0===(r=function(e,t,i,r,o,a){"use strict";return new(o.extend({typeName:"page-template",getConfig:function(){return{syncGroup:"slate-template",scope:"slate-template",newDocName:"Blank Template (unused)",doctype:"application/vnd.adobe.luca.sptemplate+dcx",displayName:"Page Template",templateSyncGroup:"slate",templateDCXType:"application/vnd.adobe.luca.document+dcx"}},isaProjectFormat:function(){return!1},supportsCollaboration:function(){return!0},lazyLoad:function(e){Promise.resolve().then(function(t){var i=new(n(45));this.setStorageImpl(i),e.resolve()}.bind(this).bind(null,n)).catch(n.oe)},usesContentModifiedEtags:function(){return!1}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(27),n(13)],void 0===(r=function(e,t,i,r,o,a){"use strict";return new(o.extend({typeName:"adobe-voice-template",getConfig:function(){return{syncGroup:"adobe-voice-template",scope:"voice-template",newDocName:"Blank Template (unused)",doctype:"application/vnd.adobe.ginger.sptemplate+dcx",displayName:"Page Template",templateSyncGroup:"adobe-voice",templateDCXType:"application/vnd.adobe.ginger.document+dcx"}},isaProjectFormat:function(){return!1},supportsCollaboration:function(){return!0},lazyLoad:function(e){Promise.resolve().then(function(t){var i=new(n(45));this.setStorageImpl(i),e.resolve()}.bind(this).bind(null,n)).catch(n.oe)},usesContentModifiedEtags:function(){return!1}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(27),n(13)],void 0===(r=function(e,t,i,r,o,a){"use strict";return new(o.extend({typeName:"authoring-context",getProjectName:function(e,t){return e.get("name")||this.getSetting("newDocName")},getConfig:function(){return{syncGroup:"adobe-spark-authoring-contexts",scope:"authoring-context",newDocName:"My Authoring Context",doctype:"application/vnd.adobe.authoringcontext.document+dcx",displayName:"Authoring Context"}},isaProjectFormat:function(){return!1},lazyLoad:function(e){n.e("authoring-context").then(function(t){var i=n(305);this.setStorageImpl(i),e.resolve()}.bind(this).bind(null,n)).catch(n.oe)},usesContentModifiedEtags:function(){return!1},resolveConflict:function(e,t,i,r){return n.e("brand-kit-conflict-resolver").then(function(o){var s=n(326);s.muiStorage=a,s.resolveConflict(e,t,i,r)}.bind(null,n)).catch(n.oe),!0}}))}.apply(t,i))||(e.exports=r)},,function(e,t,n){var i=n(497),r=n(343);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?r(e):t}},function(e,t,n){var i=n(344);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},,function(e,t,n){var i=n(3),r=n(410),o=n(0),a=n(558),s=!0;e.exports={fontCanvas:a.fontCanvas,generateMetrics:a.generateMetrics,generateMetricsAsync:a.generateMetricsAsync,extractFontInfo:function(e){var t,n=i.defer(),a=new FileReader;return e.size>10485760?n.resolve({error:!0,FILE_TOO_BIG:!0}):(a.onload=function(){try{t=this.result;var i,a,l={};try{var c=(a=r.parse(t)).tables,d=c.name||{},u=c.os2||{},h=c.hhea||{},p=c.post||{};if(l.fullName=d.fullName&&d.fullName.en,l.fullName=(l.fullName||"").replace(/[^A-z\-\s\_0-9]/g,""),l.familyName=d.fontFamily&&d.fontFamily.en,l.familyName=(l.familyName||"").replace(/[^A-z\-\s\_0-9]/g,""),l.subfamilyName=d.fontSubfamily&&d.fontSubfamily.en,l.subfamilyName=(l.subfamilyName||"").replace(/[^A-z\-\s\_0-9]/g,""),l.preferredFamilyName=d.preferredFamily&&d.preferredFamily.en,l.preferredSubfamilyName=d.preferredSubfamily&&d.preferredSubfamily.en,l.postScriptName=d.postScriptName&&(d.postScriptName.en||d.postScriptName["win-en"]||d.postScriptName["mac-en"]||d.postScriptName["uni-en"]),l.windowsPostScriptName=d.postScriptName&&d.postScriptName["win-en"],l.macPostScriptName=d.postScriptName&&d.postScriptName["mac-en"],l.unicodePostScriptName=d.postScriptName&&d.postScriptName["uni-en"],l._licenseInfo={copyright:d.copyright&&d.copyright.en,designer:d.designer&&d.designer.en,designerURL:d.designerURL&&d.designerURL.en,license:d.license&&d.license.en,licenseURL:d.licenseURL&&d.licenseURL.en,manufacturerURL:d.manufacturerURL&&d.manufacturerURL.en,trademark:d.trademark&&d.trademark.en,licenseFlag:u.fsType+""},l.familyName||(l.fullName?l.familyName=l.fullName:l.fullName=l.familyName=e.name.replace(/\.[^/.]+$/,"")),s){var f=o.find(["BoldItalic","RegularItalic","Bold","Italic","Regular","Normal"],(function(e){return(l.preferredFamilyName||l.familyName||"").toLowerCase().endsWith(e.toLowerCase())}));f&&(l.familyName=l.familyName.substring(0,l.familyName.length-f.length).trim(),l.familyName.endsWith("-")&&(l.familyName=l.familyName.substring(0,l.familyName.length-1)),l.preferredFamilyName&&(l.preferredFamilyName=l.familyName),l.subfamilyName=f,l.preferredSubfamilyName&&(l.preferredSubfamilyName=l.subfamilyName),"Bold"!==f&&"BoldItalic"!==f||(i=700))}l.weight=u.usWeightClass||function(e){e.indexOf("Italic")>=0&&(e=e.substring(0,e.indexOf("Italic")));var t={100:"100","100-thin":"100",ultra:"100",ultralight:"100","ultra-light":"100",200:"200","200-x-light":"200",two:"200",extralight:"200","extra-light":"200",thin:"200",hair:"200",300:"300","300-light":"300",three:"300",light:"300",400:"400","400-regular":"400",regular:"400",four:"400","":"400",normal:"400",book:"400",500:"500","500-medium":"500",medium:"500",five:"500",600:"600","600-semibold":"600",six:"600",semibold:"600","semi-bold":"600",demi:"600",700:"700","700-bold":"700",seven:"700",bold:"700",800:"800","800-black":"800",eight:"800",extrabold:"800","extra-bold":"800",heavy:"800",900:"900","900-x-black":"900",nine:"900",black:"900",1e3:"1000",extrablack:"1000","extra-black":"1000"};return t[(e=(e=e.trim()).replace(/\s+/g,"-")).toLowerCase()]||console.warn("----\x3e fontWeight failed to resolve ["+e+"]"),t[e.toLowerCase()]||400}(l.preferredSubfamilyName||l.subfamilyName),l.fsType=u.fsType,s&&i&&400===l.weight&&(l.weight=i);var g=0==p.italicAngle?"normal":"italic",m=(v=l.preferredSubfamilyName||l.subfamilyName).indexOf("Italic")>=0?"italic":v.indexOf("Oblique")>=0?"oblique":"";"normal"==g&&"italic"==m&&(g="italic"),l.style=g,o.extend(l,{numGlyphs:a.glyphs.length,xHeight:u.sxHeight||u.xHeight||0,capHeight:u.sCapHeight||u.capHeight||h.ascender,italicAngle:p.italicAngle,underlineThickness:p.underlineThickness,underlinePosition:p.underlinePosition,lineGap:h.lineGap,ascent:h.ascender,descent:h.descender}),n.resolve(l)}catch(e){console.warn("Failed to parse font file",e),n.resolve({error:!0,FILE_PARSE_ERROR:!0})}}catch(e){console.warn("Failed to parse font file",e),n.resolve({error:!0,FILE_PARSE_ERROR:!0})}var v},a.onerror=function(e){console.warn("Failed to parse font file with error",e),n.resolve({error:!0,FILE_PARSE_ERROR:!0})},a.readAsArrayBuffer(e)),n.promise}}},function(e,t,n){var i;void 0===(i=function(){return{}}.apply(t,[]))||(e.exports=i)},function(e,t,n){var i,r;i=[n(1),n(0),n(2)],void 0===(r=function(e,t,n){"use strict";function i(e){this._init(e)}return e.extend(i.prototype,{_init:function(t,n){this._userCallback=n,this.$ele=e(t),this.$rootPicker=this.$ele.parents(".photo-picker"),this.items=[]},show:function(){this.$ele.addClass("showing")},getItem:function(e){return this.items[e]},_clear:function(){this.$ele.find(".column").empty(),this.items=[]},_handleScroll:function(e){this.requestOutstanding||this._scrolledFarEnough()&&this.hasMore()&&(this.requestOutstanding=!0,this.showMoreToCome(),this.searchNextSet())},_handleResize:function(e){this._handleScroll(e)},_handleThumbClick:function(e){},_handleLoadedThumbnail:function(e){},handleChangingToEditor:function(e){},handleChangingFromEditor:function(e){},hasMore:function(){return this.page<this.pages},_scrolledFarEnough:function(){var t=this.$ele.find(".results"),n=t.find(".column"),i=t[0].scrollTop,r=2*t.height()+i,o=!1;return n.each((function(){if(r>e(this).height())return o=!0,!1})),o},_addThumbnail:function(t,n,i,r,o,a){var s,l,c=n.find(".left"),d=n.find(".right"),u=this,h=this.requestId,p=e("<img class='thumbnail' data-auto='image-picker-thumbnail-img' />"),f=e("<div class='thumbnail-wrapper' data-auto='image-picker-thumbnail-wrapper' />"),g=i.getThumbHoverLabel&&i.getThumbHoverLabel();if(l=o?c.height()<=d.height()?c:d:c,r&&r.width&&r.height&&(f.append(p),l.append(f),p.css("height",p.width()*r.height/r.width),s=!0),g){var m=e("<div class='thumb-hover-label' data-auto='thumb-hover-label'>"+g+"</div>");f.append(m),m.on("click",u._handleThumbClick.bind(u)),m.data("item",i),f.addClass("has-hover-label")}return this.loader.add(t,{callback:function(e,t,n){u.requestId&&h!==u.requestId||(p.on("load",(function(){window.setTimeout((function(){f.addClass("showing")}),0)})),s||(o&&(l=c.height()<=d.height()?c:d),f.append(p),l.append(f)),a&&(p[0].crossOrigin="anonymous"),p[0].src=e,p.on("click",u._handleThumbClick.bind(u)),p.data("item",i),u._handleLoadedThumbnail(p,f))}}),f},canGoBack:function(){return!1},goBack:function(){},showMoreToCome:function(){this.$rootPicker.find(".more-to-come").addClass("showing")},hideMoreToCome:function(){this.$rootPicker.find(".more-to-come").removeClass("showing")}}),i}.apply(t,i))||(e.exports=r)},,,,function(e,t,n){var i,r;i=[n(0),n(2),n(3),n(348),n(111),n(13),n(349),n(7),n(213),n(26),n(5),n(4),n(6),n(19)],void 0===(r=function(e,t,i,r,o,a,s,l,c,d,u,h,p,f){"use strict";var g,m=a.logger,v=0;return g=t.Model.extend({defaults:{name:"",type:"private-collection",id:null,syncGroupName:"",components:null,compositeObj:null,publishProgress:null},_commitQueue:null,_commitInProgress:!1,_saveQueue:null,initialize:function(n){this._commitQueue=[],this._saveQueue=[],this._initDefer=i.defer(),this.iGUID=v++;var r=new t.Collection([],{model:s});this.set("components",r),this._doSaveChanges=this._doSaveChanges.bind(this),this._saveChangesDebounce=e.debounce(this._doSaveChanges,500)},linkSparkAsset:function(e){this._linkedSparkAsset=e},setName:function(e){this.getDCXComposite().current.name=e,this.set("name",e)},getEtag:function(){return this.getDCXComposite().current.manifestEtag},getDocData:function(e){var t=this.getDCXRoot(),n="";return t&&(n=t.getValue(e)),n},setCollaboration:function(e){this._collaboration=e},getCollaboration:function(){return this._collaboration||this.get("collaboration")||this.changed&&this.changed.collaboration||this.attributes&&this.attributes.collaboration},belongsToUser:function(){return"INCOMING"!==this.getCollaboration()},getCollaborationForAnalytics:function(){var e=this.getCollaboration();return"INCOMING"===e?"collabRecipient":"OUTGOING"===e?"collabOwner":"collabNone"},acquireNestedMap:function(e,t){return this._acquireNestedMap(e,t)},acquireNestedMapSync:function(e,t){return this._acquireNestedMap(e,!0,!0,t)},_acquireNestedMap:function(t,n,r,o){var a,s,l=this.getChildWithMap(t,o),c=!1;return l||(t=t.split("."),s="",e.each(t,function(e,t){s&&(s+="."),"{new}"!==e?(s+=e,(l=this.getChildWithMap(s,o))||(c=!0,l=this.addChildPath(void 0,e,a))):(c=!0,l=this.addChildPath(void 0,void 0,a),s+=l.getValue("path")),a=l}.bind(this)),!c||n)?r?l:i.resolve(l):this.saveChanges((function(){})).then((function(){return i.resolve(l)}))},acquireNestedChildren:function(e,t){return this.acquireNestedMap(e,t).then(function(e){return this.getChildrenOf(e)}.bind(this))},acquireNestedChildrenSync:function(e,t){if("all-fonts"===e&&!u.hasFeature("enable-custom-fonts"))return console.warn("Illegal custom fonts API call w/o feature flag",(new Error).stack),[];var n=this.acquireNestedMapSync(e,t);return this.getChildrenOf(n,t)},getChildWithMap:function(t,n){for(var i,r,o,a,s,l,c,d=n||this.getDCXComposite().current,u=d.getChildrenOf(),h=d.getComponentsOf(),p=function(e){if(e.getValue(l)==c)return r=e,a||(u=d.getChildrenOf(e),h=d.getComponentsOf(e)),!1},f=function(e){if(e.path==o)return r=e,a||(u=d.getChildrenOf(e),h=d.getComponentsOf(e)),!1},g=0,m=(t=t.split(".")).length;g<m;g++){if(o=t[g],s=/^\[([^\]\=]*)\=([^\]\=]*)\]$/.exec(o),-1!=o.search(/^\!/)?(a=!0,o=o.replace(/^\!/,"")):a=!1,!u)return;if(i=r,s?(l=s[1],c=s[2],e.find(a?h:u,p)):e.find(a?h:u,f),void 0!==r&&void 0!==i&&i==r)return}return r},getChildrenOf:function(e,t){return(t||this.getDCXComposite().current).getChildrenOf(e)},addChild:function(e,t){return this.getDCXComposite().current.addChild(e,void 0,-1,t)},addChildPath:function(e,t,n){var i=this.getDCXComposite().current.addChild(e,void 0,-1,n);return i.path=t||i.id,i},removeChild:function(e){return this.getDCXComposite().current.removeChild(e)},isNew:function(){return!this.getDCXComposite().current.manifestEtag},getDCXComposite:function(){return this.get("compositeObj")},getDCXRoot:function(){var e=this.get("compositeObj");return e?e.current.rootNode:null},setAndSaveDataToRoot:function(e,t){this.saveChanges((function(n){n.setValue(e,t)}))},getDataFromRoot:function(e){return this.getDCXRoot().getValue(e)},addComponent:function(e){e.composite=this.getDCXComposite();var t=this.get("components"),n=new s(e);return t.add(n),n},removeComponent:function(e){this.get("components").remove(e);var t=this.getDCXComposite().current,n=t.getComponentWithAbsolutePath("/"+e.get("path"));return t.removeComponent(n),e},getComponentWithAbsolutePath:function(e){return this.get("components").find((function(t){return t.get("path")==e.replace(/^\//,"")}))},getComponent:function(e){return a.getComponent(e,this.getDCXComposite())},getComponentHref:function(e,t,n){return a._dep_getComponentHref(e,this.getDCXComposite(),t,n)},getImageComponentHref:function(e,t,n){return a.getComponentRenditionHref(this.getDCXComposite(),e,t,n)},_privateGetComponentHref:function(e){return a._privateGetComponentHref(this.getDCXComposite(),e)},getFirstChildNode:function(){return this.getDCXComposite().current.getChildrenOf()[0]},findComponent:function(e,t){for(var n=this.getDCXComposite().current.getComponentsOf(e),i=0,r=n.length;i<r;i++){var o=n[i],a=!0;for(var s in t)if(t.hasOwnProperty(s)){var l=t[s];if(o[s]!=l){a=!1;break}}if(a)return o}},setProjectName:function(e){this.getMyApp().setProjectName(this,e)},getProjectName:function(e){return this.getMyApp().getProjectName(this,e)},preloadImageRendition:function(e){var t=i.defer();return this.getImageRendition(e).then(function(e){var n,i;e&&(n=e.url),n?((i=new Image).onload=function(){t.resolve(n)},i.onerror=function(){t.reject(new Error("Image rendition "+n+" came back with 404"))},i.src=n):t.resolve()}.bind(this)).catch((function(e){window.marvel.logger.error("failed to get image rendition",e),t.reject(e)})).done(),t.promise},getImageRendition:function(e){var t,n=this.getDCXComposite().current,r=this.getDCXRoot(),o=r.getValue("slate#coverpath");e=e||400;var a,s="center",l="center";if(r.type.match("luca")&&o){t=n.getComponentWithAbsolutePath("/"+o),s=r.getValue("slate#coverx"),l=r.getValue("slate#covery");var c=r.getValue("slate#data");a=c&&c.themeName&&"vintage"==c.themeName.toLowerCase()?"grayscale(1)":void 0}else t=this.getImageRenditionComponent();if(t){return e&&{size:e},this.getImageComponentHref(t,e).then(function(e){return{url:e,position:s+" "+l,filter:a}}.bind(this))}return i.reject(new Error("failed to find rendition component"))},getImageRenditionComponent:function(){if("function"==typeof this.getMyApp().getPreviewComponent)return this.getMyApp().getPreviewComponent(this);var t=this.getDCXComposite().current;return e.find(t.getComponentsOf(),(function(e){return e&&e.type.match(/^image/)&&"rendition"==e.relationship&&"shareImage"!=e.name&&"embed"!=e.name}))},getInfoForComponents:function(t){var n,r=this.getMyPrimaryApp(),o=r.getAppTypeID(),a={},s=(e.isArray(t),{GooglePhotosImagePickerContext:"google",DropboxImagePickerContext:"dropbox",DooploImagePickerContext:"dooplo",FacebookImagePickerContext:"facebook",AdobestockImagePickerContext:"stock",CCImagePickerContext:"creativeCloud",LightroomImagePickerContext:"lightroom",UploadedImagePickerContext:"uploaded",undefined:"uploaded"}),l={Google:"google",Dropbox:"dropbox",Dooplo:"dooplo",Facebook:"facebook",AdobeStock:"stock",CreativeCloud:"creativeCloud",Lightroom:"lightroom",Uploaded:"uploaded",undefined:"uploaded"};return"slate"===o?this.getComponent("/luca.json").then(function(t){return r.load().then(function(){var o,l;if(o=r.getStorageImpl().getData("imagePickerContexts",this),l={},e.each(o,(function(e){l[e.asset_id]=e})),t)try{n=JSON.parse(t)}catch(e){return i.reject(e)}return n&&n.pages&&n.pages.length&&e.each(n.pages[0].sections,(function(t){e.each(t.content_items,(function(e){if("img"===e.type){a[e.image.image_url.split("?")[0]]=e.image;var t=l[e.image.id];e.image.pickerContext=l[t],e.image.srcName=s[t?t.class_name:void 0]}}))})),a}.bind(this))}.bind(this)).catch((function(e){return i.reject(e)})):"voice"==o?this.getComponent("/PageSequence.json").then(function(t){var n;try{n=JSON.parse(t)}catch(e){return i.reject(e)}var r=e.find(n,(function(e){return"PageSequence"==e.className}));return r&&r.data&&r.data.pages&&e.each(r.data.pages,(function(t){var n;t&&t.data&&t.data.layout&&t.data.layout.data&&(n=t.data.layout.data.items),n&&e.each(n,(function(e){if(e.data&&"Image"==e.data.contentType){var t,n=e.data.content,i=e.data.searchTerm;i&&(t=-1==i.search(/\//)?"Dooplo":i.replace(/^\s*/,"").replace(/\/.*$/,"")),a[n]={srcName:l[t]||"uploaded"}}}))})),a}.bind(this)).catch((function(e){return i.reject(e)})):i.resolve()},_lazyLoadPublishUtils:function(){return this._videoPublishLazyLoadDefer||(this._videoPublishLazyLoadDefer=i.defer(),Promise.all([n.e(4),n.e("vendors~gic-voice-publishUtils"),n.e(0),n.e(1),n.e("gic-voice-publishUtils")]).then(function(e){var t=n(569);this._videoPublishLazyLoadDefer.resolve(t)}.bind(this).bind(null,n)).catch(n.oe)),this._videoPublishLazyLoadDefer.promise},getImageComponents:function(t){var n=this.getMyPrimaryApp().getAppTypeID(),r=this.getDCXComposite().current;return t=t||{},"voice"!==n||t.publishUtils?this.getInfoForComponents("images").then(function(o){var a,s=[];if("slate"===n?a=e.find(r.getChildrenOf(),(function(e){return"page"===e.name})):"voice"===n?a=e.find(r.getChildrenOf(),(function(e){return"Media"===e.name})):"theo"===n&&(a=e.find(r.getChildrenOf(),(function(e){return"application/vnd.adobe.theo.content+dcx"===e.type&&"/content"===e.absolutePath}))),a){var l,c,d=r.getComponentsOf(a);if("slate"===n)e.each(d,(function(e){(c=o[e.path])&&s.push({component:e,data:c})}));else if("theo"===n)(l=a._data.children)&&l.length&&(l=l[0].children)&&(s=[],e.each(l,(function(t){if("image"===t["theo#kind"]){var n=t.components?r.getComponentWithId(t.components[0].id):r.getComponentWithId(t.path);if(n){var i=t["theo#media-metadata"]||{};"adobestock"===i.source&&((i=e.assign({},i)).license=e.assign({},i)),s.push({component:n,data:i})}}})));else if("voice"===n){var u={};l=a._data.children,s=[],e.each(l,(function(t){var n;t.components&&e.each(t.components,(function(e){if(e&&e.type.match(/^image/)&&(n=r.getComponentWithId(e.id))){var i=t["ginger#data"],o={component:n,data:i};s.push(o),u[n.id]=o}}))}));var h=[];return e.each(s,function(e){h.push(t.publishUtils.makeMetadataPromise(this.id,e.component.id))}.bind(this)),i.allSettled(h).then((function(t){var n=[];return e.each(t,(function(t){if("fulfilled"==t.state){var i=t.value.contentID,r=u[i];if(r){var a=t.value,s=o[i];r.data=e.extend({},a,s)}}else n.push(t.reason)})),n.length&&window.marvel.logger.warn("errors fetching video metadatata in getImageComponents",n),s}))}}return s}.bind(this)):this._lazyLoadPublishUtils().then(function(e){return t.publishUtils=e,this.getImageComponents(t)}.bind(this))},pushComponent:function(e){return this._pushComponent(e,!1)},pushComponentWithRetry:function(e){return this._pushComponent(e,!0)},_pushComponent:function(t,n){var i=this.getDCXComposite(),r=this.get("syncGroupName"),o=t.isUpdate,s=e.pick(t,["id","name","relationship","type","path","absolutePath","file","parent","copyFrom","cover"]);return this.ensureCompositeIsSaved((function(){return n?a.pushComponent(s,i,r,o):a.pushComponentWithoutRetry(s,i,r,o)}))},isMidCommit:function(){return!!this._commitInProgress},pull:function(){var e=i.defer(),t=this.getDCXComposite();return a.pullComposite(t).then((function(t){e.resolve(t)})),e.promise},_resolveOrganizerProjectRenameConflict:function(e,t,n,i,o){if(e.current.rootNode.name!==t.rootNode.name||n.rootNode.name!==t.rootNode.name){var a=n.copy();if(e.current.rootNode.name!==t.rootNode.name){for(var s=r(e.current._data,t._data)||[],l=!1,c=0,d=s.length;c<d;c++){var u=s[c].path[0];if("local"===u||"state"===u);else{if("name"!==u)return m.error("Unexpected property changed in Organizer view",{propName:u,diffResults:s}),void i.reject(o);a.rootNode.name=e.current.rootNode.name,l=!0}}if(!l)return m.error('_resolveOrganizerProjectRenameConflict "diff" reported no project name change?'),void i.reject(o)}else m.warn("_resolveOrganizerProjectRenameConflict: How'd we encounter a conflict and the local project name hasn't changed?");e.resolvePullWithBranch(a,function(e){e?i.reject(e):(i.resolve(),this.saveChanges((function(){}),!0))}.bind(this))}else i.reject(o)},_resolveConflict:function(t,n){var r=this.getDCXComposite();return a.pullCompositeManifestOnly(r).then(function(s){return i.all([a.loadBaseBranch(r),o.load()]).then(function(o){var a=o[0],l=o[1].ACPSparkController.isEditorOpen();e.each(n,function(e){if(l){var n=this.getMyApp();n.resolveConflict?n.resolveConflict(s,e.recoverData,e.commitDefer,this,r,a,t):e.commitDefer.reject(t)}else this._resolveOrganizerProjectRenameConflict(r,a,s,e.commitDefer,t)}.bind(this));var c=[];return e.each(n,(function(e){e.commitDefer&&c.push(e.commitDefer.promise)})),i.all(c)}.bind(this)).then((function(e){return i.resolve()})).catch((function(e){return m.error("CompositeDocModel._resolveConflict ignoring caught errors. Returning original UPDATE_CONFLICT error.",e),i.reject(t)}))}.bind(this)).catch((function(i){m.error("CompositeDocModel caught error during conflict resolution pullCompositeManifestOnly",{outerErr:t,caughtErr:i}),e.each(n,(function(e){e.commitDefer&&e.commitDefer.reject(t)}))}))},_doSaveChanges:function(){var t,n=!1;if(!this._commitInProgress){marvel.events.trigger("sync-start",!0),this._commitInProgress=!0,t=this.get("syncGroupName"),this.setModifiedDate(new Date((new Date).getTime()+864e5)),this.isNew()?(n=!0,a.addDocToSyncGroup(this,t)):marvel.events.trigger("saved-composite-doc",this);var r,o=this.getDCXRoot(),s=this._commitQueue;this._commitQueue=[],e.each(s,(function(e){e.override&&(r=!0),e.fnSet(o)})),this.set("name",this.getDCXComposite().current.name),this.ensureCompositeIsSaved(function(){return this.pushModifiedComponents().then(function(){return this.getMyApp().usesContentModifiedEtags()&&this.setContentModifiedIfNeeded(),a.pushComposite(this.getDCXComposite(),t,r).then(function(){m.debug("[compositeDoc saved]"),n&&this.triggerProjectCreatedAnalytics(),marvel.events.trigger("saved-composite-doc",this),this._commitInProgress=!1,marvel.events.trigger("sync-stop",!0),e.each(s,(function(e){e.commitDefer.resolve()})),this._commitQueue.length&&this._saveChangesDebounce()}.bind(this))}.bind(this))}.bind(this)).catch(function(t){try{if(this._commitInProgress=!1,t&&"UPDATE_CONFLICT"===t.code)return this._resolveConflict(t,s);if(t&&"EXCEEDS_QUOTA"===t.code)return console.warn("TBD: handle EXCEEDS_QUOTA"),i.reject(t);e.each(s,(function(e){return e.commitDefer.reject(t)}))}catch(e){return m.error("CompositeDocModel caught error during error handling",{outerErr:t,caughtErr:e}),i.reject(t)}}.bind(this)).done()}},triggerProjectCreatedAnalytics:function(e){(e=e||{}).contextData&&l.addContextData(e.contextData);var t=this.getMyApp(),n=this;if(t.isaProjectFormat()){var i=this.getMyApp().typeName;"theo"!==i&&"post"!==i||l.setProductName("theo"),l.setCurrentProjectId(this.get("id")),l.trackEvent("projectCreated",{contextData:["projectId","workflow","projectType","contextString","exampleId","remixableAssetId","createdFromId"]},e.env||this.getMyApp().typeName+":editor",function(){l.removeContextData(["type","contextString","exampleId","remixableAssetId","createdFromId"])}.bind(this)),c.trackEvent("AddToCart",{content_name:"Project Created"}),t.isBranded(this).then((function(i){i&&f.getCreatedAnalytics(n).then((function(n){l.trackEvent("createdBrandedProject",n,e.env||t.typeName+":editor")}))}))}},ensureCompositeIsSaved:function(t){return this.isNew()&&!this._isBeingCreatedPromise?(this._isBeingCreatedPromise=a.pushComposite(this.getDCXComposite(),this.get("syncGroupName")).then(function(){var n=t(),i=this._saveQueue;return this._saveQueue=[],this._isBeingCreatedPromise=null,e.each(i,(function(e){e.deferred.resolve(e.fn())})),n}.bind(this)),this._isBeingCreatedPromise):this.isNew()&&this._isBeingCreatedPromise?this._isBeingCreatedPromise.then(t):t()},pushModifiedComponents:function(){var e=this.getDCXComposite();return i.all(this.get("components").reduce(function(t,n){var i=n.get("path");return n.isModified()&&t.push(a.pushComponent({path:i,name:n.get("name"),relationship:n.get("relationship"),type:n.get("type"),file:n.getFile(),parent:n.get("parent")},e,this.get("syncGroupName"),e.current.getComponentWithAbsolutePath("/"+i)).then((function(){n.setUnmodified()})).catch((function(e){m.error("Failed to push modified components "+e,e)}))),t}.bind(this),[]))},clearRootDataWithPrefix:function(t){var n=this.getDCXComposite().current._data;e.each(n,(function(e,i){0===i.indexOf(t)&&delete n[i]}))},clearUnneededDuplicationData:function(){this.getMyApp().clearDataForDocCreatedByDupe(this)},saveAsTemplate:function(){var e=this.getMyApp().getSetting("templateSyncGroup"),t=this.getMyApp().getSetting("templateDCXType");return this._duplicate(e,t)},duplicate:function(){var e=this.get("syncGroupName");return this._duplicate(e)},_duplicate:function(e,t){var n=i.defer(),r=a.newCompositeAsCopyOf(this.getDCXComposite(),t);if(r){r.href=a.dcxSession.getHrefForComposite(r,e);var o=new g({name:r.current.name,id:r.id,modified:!1,syncGroupName:e,compositeObj:r});a.addDocToSyncGroup(o,e),o.clearUnneededDuplicationData(),o.getMyApp().usesContentModifiedEtags()&&o.setContentModifiedIfNeeded(),a.pushComposite(r,e).then((function(){n.resolve(o),a.syncNow()}),function(e){m.error("Duplicate failed while pushing composite : "+e,e),n.reject(e)}.bind(this))}else{var s="Failed to duplicate document";m.error(s),n.reject(s)}return n.promise},nextSave:function(){return this._nextSaveDefer||(this._nextSaveDefer=i.defer()),this._nextSaveDefer.promise},saveChanges:function(e,t,n){var r={override:t,commitDefer:this._nextSaveDefer||i.defer(),fnSet:e,recoverData:n};return this._nextSaveDefer=null,m.debug("[compositeDoc saving]"),this._commitQueue.push(r),this._saveChangesDebounce(),r.commitDefer.promise},_patchCurrent:function(e,t){var n=this.getDCXComposite().current._data;if(n[e]=t,arguments.length>2)for(var i=2;i<arguments.length;i+=2)n[arguments[i]]=arguments[i+1]},setDocRootVals:function(e,t){var n=arguments;this.saveChanges((function(e){for(var t=n.length,i=0;i<t;i+=2)e.setValue(n[i],n[i+1])}))},getComponentEtag:function(e){var t=this.getDCXComposite().current.getComponentWithAbsolutePath(e);return t?t.etag:null},getAppRegistry:function(){return d},getMyApp:function(){return d.getAppForDoc(this)},getMyPrimaryApp:function(){var t=this.getMyApp(),n=t.getSetting("syncGroup");return e.endsWith(n,"-template")&&(t=d.getAppBySyncGroupName(t.getConfig().templateSyncGroup)),t},isTemplate:function(){var t=this.getMyApp().getSetting("syncGroup");return e.endsWith(t,"-template")},getMainContentEtag:function(){return this.getMyApp().getDocContentETag(this)},setContentModifiedIfNeeded:function(){var e=this.getMyApp().getDocContentETag(this)||"";e!=this.getContentModEtag()&&this._patchCurrent("cp#contentEtag",e,"cp#contentModified",this._getFutureModDate())},getContentModEtag:function(){return this.getDCXRoot().getValue("cp#contentEtag")},getContentModifiedDate:function(e){var t=this.get("modified");return e&&e.preferCpContentModified&&(t=this.getDCXRoot().getValue("cp#contentModified")||t),t?t.indexOf("Z")>-1?this._unZpadDate(t):new Date(t):new Date},_unZpadDate:function(e){var t=Date.parse(e);if(isNaN(t)){var n,i=e.split("T"),r=1*i[1].substring(0,2);return r>23?(e=i[0]+"T23"+i[1].substring(2),(n=new Date(e)).setUTCHours(n.getUTCHours()+(r-23)),n):new Date}return new Date(t)},_zpadDate:function(e,t){t&&(e=new Date(e)).setUTCHours(e.getUTCHours()+e.getTimezoneOffset()/60);var n=e.getHours();function i(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}return e.getFullYear()+"-"+i(e.getMonth()+1,2)+"-"+i(e.getDate(),2)+"T"+i(n,2)+":"+i(e.getMinutes(),2)+":"+i(e.getSeconds(),2)+"."+i(e.getMilliseconds(),2)+"Z"},_getFutureModDate:function(){return this._zpadDate(new Date((new Date).getTime()+3e4),!0)},setModifiedDate:function(e){this.set("modified",this._zpadDate(e))},isPublished:function(){return this.getMyApp().isDocPublished(this)},delete:function(){return a.deleteCompositeDoc(this)},getStorageURL:function(){return this.getDCXComposite().href.replace("-creativesdk","")},getStoragePath:function(){var e=this.getStorageURL();return e.substring(e.indexOf("/assets/")+1)},getURN:function(){var e=i.defer();return p.ajax({type:"HEAD",url:this.getDCXComposite().href,headers:{"x-api-key":h.key},contentType:"application/json; charset=utf-8"}).then(function(t,n,i){e.resolve(i.getResponseHeader("x-resource-urn"))}.bind(this)).fail(function(t){e.reject(t)}.bind(this)),e.promise},getSharedCloudCollectionId:function(){return a.getSharedCloudCollectionId(this.getDCXComposite())},hasCloudDocChanged:function(){var e=i.defer(),t=this.getStoragePath();return p.ajax({type:"HEAD",url:"https://"+window.marvel.settings.ss+"/"+t+"/manifest",headers:{"x-api-key":window.marvel.settings.key}}).then(function(t,n,i){e.resolve(i.getResponseHeader("etag")!==this.getEtag())}.bind(this)).fail((function(t){e.reject(t)})),e.promise}})}.apply(t,i))||(e.exports=r)},,,,,,,,function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(38),n(70),n(270),n(11)],void 0===(r=function(e,t,n,i,r,o,a,s){var l=new s({color:"#33BEFF",name:"FacebookAPI"});return new(n.Model.extend({init:function(e){a.init(e)},setAnalyticsInfo:function(e){a.setAnalyticsInfo(e)},getCoverImage:function(e){var t=i.defer();return window.FB||t.reject(new Error("FB javascript not loaded on page")),a.getAccessToken(e).then(function(e){window.FB.api("/me",{fields:"cover"},function(e){if(!e||e.error)marvel.logger.error("Cannot retrieve Facebook cover image ",e),t.reject(new Error("No data received from Facebook when fetching cover image.",e));else if(e.cover&&e.cover.id){var n=e.cover.id;window.FB.api("/"+n,{fields:"images"},function(e){if(!e||e.error)t.resolve(null);else if(e.images&&e.images.length){var n=e.images[0];t.resolve(n)}else t.resolve(null)}.bind(this))}else t.resolve(null)}.bind(this))}.bind(this),(function(e){t.reject(e)})).done(),t.promise},uploadPhoto:function(t,n,r){var s=i.defer();return a.getAccessToken(t).then(function(i){o.convertUrlToBlob(n).then(function(n){var o=new FormData;o.append("access_token",i),o.append("source",n),t.hideFromFeed?o.append("no_story",!0):o.append("no_story",!1),r&&o.append("caption",r),e.ajax({url:"https://graph.facebook.com/me/photos",type:"POST",data:o,processData:!1,contentType:!1,cache:!1,success:function(e,t,n){e&&e.id?s.resolve(e.id):s.reject(new Error("No data returned from Facebook when uploading photo. Got status "+n.status))},error:function(e,t,n){s.reject({returnVal:e.responseText,status:t,httpStatus:e.status})}})}.bind(this),function(e){s.reject(new Error("Could not convert image into a blob to be uploaded to Facebook",e))}.bind(this)).done()}.bind(this)).done(),s.promise},uploadPhotoUserFeed:function(t,n,r){var o=i.defer();return a.getAccessToken(t).then(function(t){var i=new FormData;i.append("access_token",t),i.append("object_attachment",n),r&&i.append("message",r),e.ajax({url:"https://graph.facebook.com/me/feed",type:"POST",data:i,processData:!1,contentType:!1,cache:!1,success:function(e,t,n){o.resolve(e&&e.id)},error:function(e,t,n){o.reject({returnVal:e.responseText,status:t,httpStatus:e.status})}})}.bind(this)).done(),o.promise},uploadPhotoPage:function(n,r,s,l){var c=i.defer();return a.getAccessToken(n).then(function(){this.getAccounts(n).then(function(n){var i=!1;t.each(n,function(t){if(t.id==l)return i=!0,o.convertUrlToBlob(r).then(function(n){var i=new FormData;i.append("access_token",t.access_token),i.append("source",n),i.append("caption",s),e.ajax({url:"https://graph.facebook.com/"+t.id+"/photos",type:"POST",data:i,processData:!1,contentType:!1,cache:!1,success:function(e,t,n){e&&e.id?c.resolve(e.id):c.reject(new Error("No data returned from Facebook when uploading photo to Page. Got status "+n.status))},error:function(e,t,n){alert("error"+JSON.stringify(n)),c.reject({returnVal:e.responseText,status:t,httpStatus:e.status})}})}.bind(this),function(e){c.reject(new Error("Could not convert image into a blob to be uploaded to Facebook",e))}.bind(this)).done(),!0}.bind(this)),i||c.reject(new Error("Could not find Facebook account to post to."))}.bind(this))}.bind(this),(function(e){alert("error"+JSON.stringify(e))})).done(),c.promise},getProfileImage:function(){var e=i.defer();return a.getAccessToken().then(function(t){window.FB.api("/me",{fields:"picture",width:100},(function(t){t&&t.data&&t.data.url?e.resolve(t.data.url):(l.error("no data (profile image) returned from facebook",t),e.reject(new Error("No data (profile image) returned from Facebook",t)))}))}.bind(this),(function(t){e.reject(t)})).done(),e.promise},getMe:function(e){var t=i.defer();return a.getAccessToken(e).then(function(e){window.FB.api("/me",{fields:"first_name, name, id"},(function(e){e?t.resolve(e):t.reject(new Error("fb_auth: No data return about user",e))}))}.bind(this),(function(e){t.reject(e)})).done(),t.promise},getProfileImg:function(e){var t=i.defer();return a.getAccessToken(e).then(function(e){if(this._succesfulTokenImage){if(this._succesfulTokenImage.token===e)return void t.resolve(this._succesfulTokenImage.data);this._succesfulTokenImage=null}window.FB.api("/me",{fields:"picture"},function(n){n&&n.picture&&n.picture.data?(this._succesfulTokenImage={data:n.picture.data,token:e},t.resolve(this._succesfulTokenImage.data)):t.reject(new Error("fb_auth: No data return about user",n))}.bind(this))}.bind(this),(function(e){t.reject(e)})).done(),t.promise},getAccounts:function(e){var t=i.defer();return a.getAccessToken(e).then(function(e){window.FB.api("/me/accounts",{fields:"id, name, access_token, can_post, picture, perms, category"},(function(e){e&&e.data?t.resolve(e.data):t.reject(new Error("No data when retrieving accounts returned from Facebook",e))}))}.bind(this),(function(e){t.reject(e)})).done(),t.promise},getDataById:function(e){var t=i.defer();return a.getAccessToken().then(function(n){window.FB.api("/"+e,{},(function(e){e?t.resolve(e):t.reject(new Error("No data when retrieving account information returned from Facebook",e))}))}.bind(this),(function(e){t.reject(e)})).done(),t.promise}}))}.apply(t,i))||(e.exports=r)},,,,,,,,,,,,,,,,,,function(e,t,n){var i=n(60),r=n(28),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(246)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var i=n(104),r=n(49),o=n(248);e.exports=function(e){return function(t,n,a){var s,l=i(t),c=r(l.length),d=o(a,c);if(e&&n!=n){for(;c>d;)if((s=l[d++])!=s)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===n)return e||d||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(9),r=n(205),o=n(29),a=n(363),s="["+a+"]",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),d=function(e,t,n){var r={},s=o((function(){return!!a[e]()||""!=""[e]()})),l=r[e]=s?t(u):a[e];n&&(r[n]=l),i(i.P+i.F*s,"String",r)},u=d.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=d},function(e,t,n){var i=n(40)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var i=n(30);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var i=n(283),r=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},function(e,t,n){"use strict";n(458);var i=n(95),r=n(103),o=n(29),a=n(205),s=n(40),l=n(378),c=s("species"),d=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var h=s(e),p=!o((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=p?!o((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[h](""),!t})):void 0;if(!p||!f||"replace"===e&&!d||"split"===e&&!u){var g=/./[h],m=n(a,h,""[e],(function(e,t,n,i,r){return t.exec===l?p&&!r?{done:!0,value:g.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}})),v=m[0],b=m[1];i(String.prototype,e,v),r(RegExp.prototype,h,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},function(e,t,n){var i=n(202),r=n(454),o=n(373),a=n(30),s=n(49),l=n(375),c={},d={};(t=e.exports=function(e,t,n,u,h){var p,f,g,m,v=h?function(){return e}:l(e),b=i(n,u,t?2:1),y=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(p=s(e.length);p>y;y++)if((m=t?b(a(f=e[y])[0],f[1]):b(e[y]))===c||m===d)return m}else for(g=v.call(e);!(f=g.next()).done;)if((m=r(g,b,f.value,t))===c||m===d)return m}).BREAK=c,t.RETURN=d},function(e,t,n){var i=n(28).navigator;e.exports=i&&i.userAgent||""},function(e,t,n){"use strict";var i=n(28),r=n(9),o=n(95),a=n(266),s=n(216),l=n(335),c=n(265),d=n(31),u=n(29),h=n(331),p=n(261),f=n(364);e.exports=function(e,t,n,g,m,v){var b=i[e],y=b,w=m?"set":"add",k=y&&y.prototype,x={},_=function(e){var t=k[e];o(k,e,"delete"==e?function(e){return!(v&&!d(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!d(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!d(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof y&&(v||k.forEach&&!u((function(){(new y).entries().next()})))){var S=new y,C=S[w](v?{}:-0,1)!=S,T=u((function(){S.has(1)})),M=h((function(e){new y(e)})),I=!v&&u((function(){for(var e=new y,t=5;t--;)e[w](t,t);return!e.has(-0)}));M||((y=t((function(t,n){c(t,y,e);var i=f(new b,t,y);return null!=n&&l(n,m,i[w],i),i}))).prototype=k,k.constructor=y),(T||I)&&(_("delete"),_("has"),m&&_("get")),(I||C)&&_(w),v&&k.clear&&delete k.clear}else y=g.getConstructor(t,e,m,w),a(y.prototype,n),s.NEED=!0;return p(y,e),x[e]=y,r(r.G+r.W+r.F*(y!=b),x),v||g.setStrong(y,e,m),y}},function(e,t,n){for(var i,r=n(28),o=n(103),a=n(245),s=a("typed_array"),l=a("view"),c=!(!r.ArrayBuffer||!r.DataView),d=c,u=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");u<9;)(i=r[h[u++]])?(o(i.prototype,s,!0),o(i.prototype,l,!0)):d=!1;e.exports={ABV:c,CONSTR:d,TYPED:s,VIEW:l}},function(e,t,n){"use strict";(function(t){e.exports={isNode:void 0!==t,newBufferFrom:function(e,n){return new t(e,n)},allocBuffer:function(e){return t.alloc?t.alloc(e):new t(e)},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,n(16).Buffer)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports='<div class="glb-nav-overlay" data-auto="glb-nav-overlay"></div>\n<div class="glb-nav glb-nav-vertical glb-nav-left glb-nav-desktop" data-auto="glb-nav">\n    <div class="glb-nav-top">\n        <div class="glb-nav-logo-wrapper clearfix">\n            <a href = "#" class="glb-nav-close-btn" data-auto="glb-nav-close-btn"></a>\n            <a href="/{{localePathPrefix}}" tabindex="-1"><p class="glb-nav-logo" data-auto="glb-nav-logo">{{mobile-menu-title}}</p></a>\n        </div>\n        <button class="glb-nav-spark-home glb-nav-link glb-nav-link-spark-home" data-dest="home" data-auto="glb-nav-link-spark-home">{{mobile-menu-spark-home}}</button>\n        <hr class="glb-nav-line" />\n        <div class="glb-nav-links">\n            <a href="/blog/" class="glb-nav-link glb-nav-link-blog" data-auto="glb-nav-link-blog">{{mobile-menu-blog}}</a>\n            <a href="https://adobespark.uservoice.com" class="glb-nav-link glb-nav-link-user-voice suggest-feature-link hide-if-user-menu" target="_blank" data-context="globalnav" data-auto="glb-nav-link-user-voice">{{mobile-menu-suggest-a-feature}}</a>\n        </div>\n        <hr class="glb-nav-line" />\n        <div class="glb-nav-links">\n            <a href="/{{localePathPrefix}}features" class="glb-nav-link glb-nav-link-features" data-auto="glb-nav-link-features">{{mobile-menu-spark-features}}</a>\n            <a href="/{{localePathPrefix}}about#landing-mobile-apps" class="glb-nav-link glb-nav-link-mobile-apps" data-auto="glb-nav-link-mobile-apps">{{mobile-menu-mobile-apps}}</a>\n            <a href="https://adobespark.zendesk.com/hc/en-us/categories/202688167-Adobe-Spark" class="glb-support-link glb-nav-link glb-nav-link-support" data-auto="glb-nav-link-support" target="_blank">{{mobile-menu-support}}</a>\n        </div>\n    </div>\n\n    <div class="glb-nav-social-icons"><h3 class="drop-by-text">{{mobile-menu-social}}</h3><a href="https://www.facebook.com/adobespark" data-auto="glb-nav-social-facebook" data-context="global-nav" data-type="facebook" class="social-button glb-nav-social-icon glb-nav-fb" target="_blank"></a><a href="https://twitter.com/AdobeSpark" data-auto="glb-nav-social-twitter" data-context="global-nav" data-type="twitter" class="social-button glb-nav-social-icon glb-nav-tw" target="_blank"></a><a href="https://www.instagram.com/AdobeSpark" data-auto="glb-nav-social-instagram" data-context="global-nav" data-type="instagram" class="social-button glb-nav-social-icon glb-nav-in" target="_blank"></a></div>\n</div>\n'},function(e,t){e.exports='<div class="glb-nav-overlay" data-auto="glb-nav-overlay"></div>\n<div class="glb-nav glb-nav-vertical glb-nav-left glb-nav-mobile" data-auto="glb-nav">\n    <div class="glb-nav-top">\n        <div class="glb-nav-logo-wrapper clearfix">\n            <a href="#" class="glb-nav-close-btn" data-auto="glb-nav-close-btn"></a>\n            <a href="/{{localePathPrefix}}about"><p class="glb-nav-logo">{{mobile-menu-title}}</p></a>\n        </div>\n        <div class="glb-nav-apps non-android">\n            <div class="glb-nav-app-view-shell">\n                <div class="glb-nav-app glb-nav-app-post-mobile">{{mobile-menu-spark-post}}</div>\n                <div class="glb-nav-app-view-link-shell">\n                    <a href="https://c00.adobe.com/v3/9c5f8efbfd205eb5ababce6d862135839de6e5ed55a3d0034475b7bee0ff552c/start?a_i_id=1051937863&a_dd=i&ctxa.referrer.campaign.name=Spark+Home+Page&ctxa.referrer.campaign.trackingcode=votknbon&ctxa.referrer.campaign.source=Spark+Home+Page&ctxa.referrer.campaign.medium=Banner" data-context="glb-nav-mobile"  class="download-app-store-link glb-nav-app-view" data-app="theo">{{{mobile-menu-view-app}}}</a>\n                </div>\n            </div>\n            <div class="glb-nav-app-view-shell">\n                <div class="glb-nav-app glb-nav-app-page-mobile">{{mobile-menu-spark-page}}</div>\n                <div class="glb-nav-app-view-link-shell">\n                    <a href="https://c00.adobe.com/v3/2c18a4dd7ed9e6bff783299fe0861806c9f14220edc8b0d08d613ccb7b9cae6c/start?a_i_id=968433730&a_dd=i&ctxa.referrer.campaign.name=Spark+Home+Page&ctxa.referrer.campaign.trackingcode=kpv6s5k2&ctxa.referrer.campaign.source=Spark+Home+Page&ctxa.referrer.campaign.medium=Banner" data-context="glb-nav-mobile" class="download-app-store-link glb-nav-app-view" data-app="page">{{{mobile-menu-view-app}}}</a>\n                </div>\n            </div>\n            <div class="glb-nav-app-view-shell">\n                <div class="glb-nav-app glb-nav-app-video-mobile">{{mobile-menu-spark-video}}</div>\n                <div class="glb-nav-app-view-link-shell">\n                    <a href="https://c00.adobe.com/v3/0b7e67fa41f6b592f2d606c22f107ce856db905f9d8ff39637f4a156e11890bf/start?a_i_id=852555131&a_dd=i&ctxa.referrer.campaign.name=Spark+Home+Page&ctxa.referrer.campaign.trackingcode=j0qyxypf&ctxa.referrer.campaign.source=Spark+Home+Page&ctxa.referrer.campaign.medium=Banner" data-context="glb-nav-mobile" class="download-app-store-link glb-nav-app-view" data-app="video">{{{mobile-menu-view-app}}}</a>\n                </div>\n            </div>\n        </div>\n        <div class="glb-nav-apps android-only">\n            <div class="glb-nav-app-view-shell">\n                <div class="glb-nav-app glb-nav-app-post-mobile">{{mobile-menu-spark-post}}</div>\n                <div class="glb-nav-app-view-link-shell">\n                    <a href="https://play.google.com/store/apps/details?id=com.adobe.spark.post&referrer=utm_source%3DSpark%2520Hamburger%2520Button%2520Android%2520Link%26utm_campaign%3DAndroid%2520Launch" data-context="glb-nav-mobile"  class="download-google-play-link glb-nav-app-view" data-app="theo">{{{mobile-menu-view-app}}}</a>\n                </div>\n            </div>\n            <div class="glb-nav-app-view-shell">\n                <div class="glb-nav-app glb-nav-app-page-mobile">{{mobile-menu-spark-page}}</div>\n                <div class="glb-nav-app-view-link-shell">\n                    <a href="/about" data-context="glb-nav-mobile" class="download-google-play-about-link glb-nav-app-view" data-app="page">{{mobile-menu-learn-more}}&nbsp;&#8250;</a>\n                </div>\n            </div>\n            <div class="glb-nav-app-view-shell">\n                <div class="glb-nav-app glb-nav-app-video-mobile">{{mobile-menu-spark-video}}</div>\n                <div class="glb-nav-app-view-link-shell">\n                    <a href="/about" data-context="glb-nav-mobile" class="download-google-play-about-link glb-nav-app-view" data-app="video">{{mobile-menu-learn-more}}&nbsp;&#8250;</a>\n                </div>\n            </div>\n        </div>\n\n        <div class="glb-nav-links">\n            <a href="/{{localePathPrefix}}features" data-auto="glb-nav-link-features">{{mobile-menu-features}}</a>\n            <a href="/{{localePathPrefix}}pricing/" class="mrvl-mrkt-nav-link mrkt-nav-pricing" data-aa-name="pricing" data-auto="site-nav-pricing-simple">{{mobile-menu-pricing}}</a>\n            <a href="/blog" class="glb-nav-link glb-nav-link-blog" data-auto="glb-nav-link-blog">{{mobile-menu-blog}}</a>\n            <div class="glb-nav-drop-learn-more">\n                <div data-accordion-target="glb-nav-learn-more-links" class="glb-nav-link glb-nav-link-learn-more glb-nav-link-accordion" data-auto="glb-nav-link-learn-more">{{mobile-menu-learn-more}}</div>\n                <div class="glb-nav-learn-more-links glb-nav-accordion-panel">\n                    <a href="/{{localePathPrefix}}spark-for-business/" data-auto="glb-nav-link-spark-for-business">{{mobile-menu-spark-for-business}}</a>\n                    <a href="/{{localePathPrefix}}edu/" data-auto="glb-nav-link-spark-in-the-classroom">{{mobile-menu-spark-for-education}}</a>\n                    <a href="https://adobespark.zendesk.com/hc/en-us/categories/202688167-Adobe-Spark" target="_blank" data-auto="glb-nav-link-app-support">{{mobile-menu-support}}</a>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="glb-nav-social-icons"><h3 class="drop-by-text">{{mobile-menu-social}}</h3><a href="https://www.facebook.com/AdobeSpark" data-auto="glb-nav-social-facebook" data-context="global-nav" data-type="facebook" class="social-button glb-nav-social-icon glb-nav-fb" target="_blank"></a><a href="https://twitter.com/AdobeSpark" data-auto="glb-nav-social-twitter" data-context="global-nav" data-type="twitter" class="social-button glb-nav-social-icon glb-nav-tw" target="_blank"></a><a href="https://www.instagram.com/AdobeSpark" data-auto="glb-nav-social-instagram" data-context="global-nav" data-type="instagram" class="social-button glb-nav-social-icon glb-nav-in" target="_blank"></a></div>\n</div>\n'},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,i)}e.exports=n},function(e,t,n){var i,r;i=[n(1),n(296),n(517),n(519)],void 0===(r=function(e,t,n,i){var r=function(t){i.call();this.options=t=e.extend({},this.defaultOptions,t),this._queue=[],this._needsSort=!1,this._isRunning=!1,this._loaderContexts=[];for(var n=0;n<t.numAsyncRequestsAllowed;n++)this._loaderContexts[n]=this._createLoaderContext()};return r.nextRequestId=1,n.inherit(r,i),e.extend(r.prototype,{defaultOptions:{createNewImageOnReset:!0,timeoutInterval:0,numAsyncRequestsAllowed:1,crossOrigin:!1},_createLoaderContext:function(){var e=this,t={entry:null,loader:new Image,loadFunc:function(){e._handleLoad(t)},loadErrorFunc:function(){e._handleError(t)},timeoutFunc:function(){e._handleTimeout(t)},timeoutTimerId:0};return this.options.crossOrigin&&(t.loader.crossOrigin=this.options.crossOrigin),t},add:function(t,i){if(t){for(var o=n.ensureArray(t),a=0;a<o.length;a++){var s=e.extend({reqId:r.nextRequestId++,src:o[a],width:0,height:0,priority:50,callback:null,data:null},i);this._queue.push(s),this._needsSort=!0,this.trigger("wp-image-loader-add",s)}this._isRunning&&this._loadNext()}},start:function(){this._isRunning||(this._isRunning=!0,this.trigger("wp-image-loader-start"),this._loadNext())},stop:function(){if(this._isRunning){for(var e=this._loaderContexts,t=e.length,n=0;n<t;n++){var i=e[n];i.entry&&(this._queue.unshift(i.entry),this._needsSort=!0),this._resetLoaderContext(i)}this._isRunning=!1,this.trigger("wp-image-loader-stop")}},getQueueCount:function(){return this._queue.length+this._getPendingRequestCount()},clearQueue:function(){var e=this._isRunning;this.stop(),this._queue.length=0,e&&this.start()},_loadNext:function(){if(this._isRunning){var e=this._getAvailableLoaderContext();if(e){var t=this._queue;if(t.length){this._needsSort&&(t=this._queue=t.sort((function(e,t){var n=e.priority-t.priority;return n||e.reqId-t.reqId})),this._needsSort=!1);var n=t.shift();e.entry=n,this.options.timeoutInterval>0&&(e.timeoutTimerId=setTimeout(e.timeoutFunc,this.options.timeoutInterval));var i=e.loader;i.onload=e.loadFunc,i.onerror=e.loadErrorFunc,i.src=n.src,t.length&&this._loadNext()}else 0===this.getQueueCount()&&this.trigger("wp-image-loader-empty")}}},_getPendingRequestCount:function(){for(var e=this._loaderContexts,t=e.length,n=0,i=0;i<t;i++){e[i].entry&&++n}return n},_getAvailableLoaderContext:function(){for(var e=this._loaderContexts,t=e.length,n=0;n<t;n++){var i=e[n];if(!i.entry)return i}return null},_resetLoaderContext:function(e){var t=e.loader;t.onload=null,t.onerror=null,t.src=""==t.src?" ":"",this.options.createNewImageOnReset&&(e.loader=new Image,this.options.crossOrigin&&(e.loader.crossOrigin=this.options.crossOrigin)),e.entry=null,e.timeoutTimerId&&(clearTimeout(e.timeoutTimerId),e.timeoutTimerId=0)},_handleLoad:function(e){var t=e.loader;entry=e.entry,entry.width=t.width,entry.height=t.height,this._resetLoaderContext(e),entry.callback&&entry.callback(entry.src,entry.width,entry.height,entry.data),this.trigger("wp-image-loader-load-success",entry),this._loadNext()},_handleError:function(e){var t=e.entry;this._resetLoaderContext(e),this.trigger("wp-image-loader-load-error",t),this._loadNext()},_handleTimeout:function(e){var t=e.entry;this._resetLoaderContext(e),this.trigger("wp-image-loader-timeout",t),this._loadNext()}}),t.ImageLoader=r,r}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2)],void 0===(r=function(e,t,n,i){"use strict";return i.Model.extend({PROPERTIES_TO_CHECK:null,SERVICE_NAME:null,WAIT_TIME:9e4,init:function(){return t.bindAll(this,t.functionsIn(this)),this.initializeDefered?this.initializeDefered.promise:(this.initializeDefered=n.defer(),this._loadLibrary(),this._whenAvailable(this.SERVICE_NAME,this.PROPERTIES_TO_CHECK).then(function(){this.initializeDefered.resolve()}.bind(this),function(){this.initializeDefered.reject(new Error("ThirdPartyLibraryLoaderController::init"))}.bind(this)),this.initializeDefered.promise)},_loadLibrary:function(){return!1},_whenAvailable:function(e,i){var r=this.WAIT_TIME,o=n.defer(),a=function(e,n){var i=!1;return t.each(n,(function(t,n){typeof window[e][n]===t&&(i=!0)})),i},s=function(){var t=Date.now()+r;if(!window[e]||i&&!a(e,i))var n=window.setInterval((function(){!window[e]||i&&!a(e,i)?Date.now()>=t&&(window.marvel.logger.warn(e+" is not available globally"),clearInterval(n),o.reject(new Error("ThirdPartyLibraryLoaderController::checkIfGlobalObjectAvailable"))):(clearInterval(n),o.resolve())}),2);else o.resolve()};return"complete"!==document.readyState?window.attachEvent?window.attachEvent("onload",s):window.addEventListener("load",s,!1):s(),o.promise}})}.apply(t,i))||(e.exports=r)},function(e,t){},function(e,t,n){(function(t){var n;n=function(){"use strict";var e,n,i=[];function r(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function o(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function a(e,t,n){a.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function s(e,t){s.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function l(e,t){l.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function c(e,t,n){c.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function d(e,t,n){var i=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,i),e}function u(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function h(e,t,n,i,r,o,p){p=p||[];var f=(r=r||[]).slice(0);if(void 0!==o){if(i){if("function"==typeof i&&i(f,o))return;if("object"==typeof i){if(i.prefilter&&i.prefilter(f,o))return;if(i.normalize){var g=i.normalize(f,o,e,t);g&&(e=g[0],t=g[1])}}}f.push(o)}"regexp"===u(e)&&"regexp"===u(t)&&(e=e.toString(),t=t.toString());var m=typeof e,v=typeof t,b="undefined"!==m||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(o),y="undefined"!==v||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(o);if(!b&&y)n(new s(f,t));else if(!y&&b)n(new l(f,e));else if(u(e)!==u(t))n(new a(f,e,t));else if("date"===u(e)&&e-t!=0)n(new a(f,e,t));else if("object"===m&&null!==e&&null!==t)if(p.filter((function(t){return t.lhs===e})).length)e!==t&&n(new a(f,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var w;for(e.length,w=0;w<e.length;w++)w>=t.length?n(new c(f,w,new l(void 0,e[w]))):h(e[w],t[w],n,i,f,w,p);for(;w<t.length;)n(new c(f,w,new s(void 0,t[w++])))}else{var k=Object.keys(e),x=Object.keys(t);k.forEach((function(r,o){var a=x.indexOf(r);a>=0?(h(e[r],t[r],n,i,f,r,p),x=d(x,a)):h(e[r],void 0,n,i,f,r,p)})),x.forEach((function(e){h(void 0,t[e],n,i,f,e,p)}))}p.length=p.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||n(new a(f,e,t)))}function p(e,t,n,i){return i=i||[],h(e,t,(function(e){e&&i.push(e)}),n),i.length?i:void 0}function f(e,t,n){if(e&&t&&n&&n.kind){for(var i=e,r=-1,o=n.path?n.path.length-1:0;++r<o;)void 0===i[n.path[r]]&&(i[n.path[r]]="number"==typeof n.path[r]?[]:{}),i=i[n.path[r]];switch(n.kind){case"A":!function e(t,n,i){if(i.path&&i.path.length){var r,o=t[n],a=i.path.length-1;for(r=0;r<a;r++)o=o[i.path[r]];switch(i.kind){case"A":e(o[i.path[r]],i.index,i.item);break;case"D":delete o[i.path[r]];break;case"E":case"N":o[i.path[r]]=i.rhs}}else switch(i.kind){case"A":e(t[n],i.index,i.item);break;case"D":t=d(t,n);break;case"E":case"N":t[n]=i.rhs}return t}(n.path?i[n.path[r]]:i,n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}}return e="object"==typeof t&&t?t:"undefined"!=typeof window?window:{},(n=e.DeepDiff)&&i.push((function(){void 0!==n&&e.DeepDiff===p&&(e.DeepDiff=n,n=void 0)})),r(a,o),r(s,o),r(l,o),r(c,o),Object.defineProperties(p,{diff:{value:p,enumerable:!0},observableDiff:{value:h,enumerable:!0},applyDiff:{value:function(e,t,n){e&&t&&h(e,t,(function(i){n&&!n(e,t,i)||f(e,t,i)}))},enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:function(e,t,n){if(e&&t&&n&&n.kind){var i,r,o=e;for(r=n.path.length-1,i=0;i<r;i++)void 0===o[n.path[i]]&&(o[n.path[i]]={}),o=o[n.path[i]];switch(n.kind){case"A":!function e(t,n,i){if(i.path&&i.path.length){var r,o=t[n],a=i.path.length-1;for(r=0;r<a;r++)o=o[i.path[r]];switch(i.kind){case"A":e(o[i.path[r]],i.index,i.item);break;case"D":case"E":o[i.path[r]]=i.lhs;break;case"N":delete o[i.path[r]]}}else switch(i.kind){case"A":e(t[n],i.index,i.item);break;case"D":case"E":t[n]=i.lhs;break;case"N":t=d(t,n)}return t}(o[n.path[i]],n.index,n.item);break;case"D":case"E":o[n.path[i]]=n.lhs;break;case"N":delete o[n.path[i]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==n},enumerable:!0},noConflict:{value:function(){return i&&(i.forEach((function(e){e()})),i=null),p},enumerable:!0}}),p},e.exports=n()}).call(this,n(10))},function(e,t,n){var i,r;i=[n(0),n(2),n(3),n(13)],void 0===(r=function(e,t,n,i){"use strict";return t.Model.extend({defaults:{name:"",relationship:"",type:"",path:"",contents:"",composite:null,file:null,parent:null,modified:0},getFile:function(){var e=this.get("file");return e||(this.get("type").match("image")?void 0:new Blob([this.get("contents")],{type:"text/plain"}))},getActualComponent:function(){return this.get("composite").current.getComponentWithAbsolutePath("/"+this.get("path"))},isModified:function(){return this.get("modified")>0},setModified:function(){var e=this.get("modified");this.set("modified",e+1)},setUnmodified:function(){var e=this.get("modified");this.set("modified",e-1)}})}.apply(t,i))||(e.exports=r)},,function(e,t,n){(t=e.exports=n(419)).Stream=t,t.Readable=t,t.Writable=n(352),t.Duplex=n(224),t.Transform=n(422),t.PassThrough=n(572)},function(e,t,n){"use strict";(function(t,i,r){var o=n(32).nextTick;function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;e.entry=null;for(;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=b;var s,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:o;b.WritableState=v;var c=n(23);c.inherits=n(14);var d={deprecate:n(117)},u=n(420),h=n(39).Buffer,p=r.Uint8Array||function(){};var f,g=n(421);function m(){}function v(e,t){s=s||n(224),e=e||{};var i=t instanceof s;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,c=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(c||0===c)?c:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,r){--t.pendingcb,n?(o(r,i),o(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(r(i),e._writableState.errorEmitted=!0,e.emit("error",i),S(e,t))}(e,n,i,t,r);else{var a=x(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||k(e,n),i?l(w,e,n,a,r):w(e,n,a,r)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function b(e){if(s=s||n(224),!(f.call(b,this)||this instanceof s))return new b(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function y(e,t,n,i,r,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function w(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),S(e,t)}function k(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var s=0,l=!0;n;)r[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;r.allBuffers=l,y(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,d=n.encoding,u=n.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,d,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var n=x(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(b,u),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===b&&(e&&e._writableState instanceof v)}})):f=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,n){var i,r=this._writableState,a=!1,s=!r.objectMode&&(i=e,h.isBuffer(i)||i instanceof p);return s&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=m),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),o(t,n)}(this,n):(s||function(e,t,n,i){var r=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),o(i,a),r=!1),r}(this,r,e,n))&&(r.pendingcb++,a=function(e,t,n,i,r,o){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n));return t}(t,i,r);i!==a&&(n=!0,r="buffer",i=a)}var s=t.objectMode?1:i.length;t.length+=s;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,s,i,r,o);return l}(this,r,s,e,t,n)),a},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||k(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},b.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?o(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(21),n(116).setImmediate,n(10))},,function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(8),n(7),n(6),n(5),n(64),n(11),n(4),n(26),n(53),n(19),n(37),n(62),n(570)],void 0===(r=function(e,t,i,r,o,a,s,l,c,d,u,h,p,f,g,m,v){"use strict";var b=new d({color:"green",name:"SearchController"}),y=["visualBrowse","projects","home","branding"],w=u.cpTemplateSearchRemixFeedTag,k=u.cpTemplateSearchRemixPaidTag,x=u.cpTemplateSearchMappedTagRemixPaid,_={default:o.getString("npw-vb-back-to-default"),projects:o.getString("npw-vb-back-to-organizer"),branding:o.getString("npw-vb-back-to-branding"),visualBrowse:o.getString("npw-vb-back-to-visual-browse"),searchResults:o.getString("npw-vb-back-to-results"),home:o.getString("npw-vb-back-to-home")},S={projects:"projects",branding:"branding",home:""};return new(r.Model.extend({initialize:function(){t.defer(function(){s.isValid().then(this._initSearchRequires.bind(this),(function(){})).done()}.bind(this)),t.bindAll(this,["handleCreateFromHomeTemplateThumb","handleHomeCreateFromScratch"])},_searchViews:{},_searchViewsPreviousInstancesData:{},_findTagsWithPrefix:function(e,n,i){return t.reduce(e,(function(e,t){var r=t.split(n+"-");return""===r[0]&&(i?e.push(r.slice(1)).join("-"):e.push(t)),e}),[])},_seoPageToSearch:{"photo-collage-maker":{keys:"collage"}},setupUrlSearchFromRemixMetadataAndOrSeoPageOrQuery:function(e){if((e=e||{}).query)return this.setupUrlSearchFromArgs(e.query);var n,i,r,o=e.seoPage,a=e.searchRemixMetadata;if(o){if("templates"===o.type||"make"===o.type){var s=o.id.split(":").join("_");r=o.id.split(":"),"templates"===o.type?(r=o.id.split(":"),v.isPlural(r[0])&&(r[0]=v.singular(r[0]))):r=t.map(r,(function(e){var t=e.split("-"),n=t[t.length-1];return"builder"!==n&&"maker"!==n||(e=t.slice(0,t.length-1).join("-")),e})),i="seo:"+o.type+":"+s+":"+(a?"remix":"new")}}else i="remix";var l={trigger:i},c=o.customSearch;if(c)t.assign(l,c);else{var d=[],u=o.id&&this._seoPageToSearch[o.id];if(u)t.assign(l,u);else if(a&&"[]"!=a.tagNames){try{var h=a.tagNames.substring(1,a.tagNames.length-1);n=h.length?t.reduce(h.split(","),(function(e,t){return(t=t.trim())!==w&&e.push(t.trim()),e}),[]):[]}catch(e){n=[]}var p=[];if(n.length){var f=this._findTagsWithPrefix(n,"spcase",!1);f.length?p.push(f[0]):(f=this._findTagsWithPrefix(n,"explore",!1)).length&&p.push(f[0])}p.length||o.id||p.push("spcase-social"),d=t.map(p,(function(e){return e.split("-").splice(1).join("-")}))}r&&r.length&&!u&&(d=d.concat(r)),(d=t.uniq(d)).length?l.keys=d.join("+"):l.all=!0}return a&&!l.assetId&&(l.assetId=a.templateId),this.setupUrlSearchFromArgs(l)},vbTriggeringRemixFromSearchThumb:function(e,t){this._triggeredRemixData={useCase:e,from:"vb",reopenRedrawData:t&&t.getDataForReopenRedraw()}},editorTriggeringRemixFromSearchThumb:function(e,t){this.saveSessionForNewDocRequest(t,null,e,"createFromSearchThumb"),this._triggeredRemixData={useCase:e,from:t.editorApp,reopenRedrawData:t&&t.getDataForReopenRedraw()}},getInitialHomeModuleResults:function(e){return this._initialHomeModuleResultsDefer||(this._initialHomeModuleResultsDefer=i.defer(),this.getASearchRequestsController({addDefaultCallbacks:!0}).then(function(n){var i,r=e.limit;e.eduType?i="spterm-k12":"en"===o.getLocale().split("-")[0]&&(i="explore-feed");e.randomizeOrder&&e.randomSampleSize&&e.randomSampleSize>r&&(r=e.randomSampleSize);var a={limit:r,forceLowerLimit:!0,filters:i};e.allPremium&&(a.filters="premium"),n.getTemplateResultsForOpeningEditor("post",a).then(function(n){if(e.randomizeOrder){if(n.nonRamdomAssets=t.clone(n.assets),e.randomSampleSize&&e.randomSampleSize!==e.limit)if(e.randomSampleSize>e.limit)n.assets=t.shuffle(n.assets).slice(0,e.limit);else{var i=n.assets.splice(0,e.randomizeOrder);i=t.shuffle(i),n.assets=i.concat(n.assets)}else n.assets=t.shuffle(n.assets);t.each(n.assets,(function(e,t){e._orderedIndex=t}))}this._initialHomeModuleResults=n,this._initialHomeModuleResultsDefer.resolve(n)}.bind(this)).done()}.bind(this)).done()),this._initialHomeModuleResultsDefer.promise},getHeaderBackInfo:function(){var e,t,n;if(marvel._isInApp){t=(n=g.parse(r.history.fragment,!0).pathname||"").split("/"),n="/"+n}else{var i=o.localePathPrefix,a=window.location.pathname||"";if(t=window.location.pathname.split("/"),i){var s=t.indexOf(i);-1!==s&&(t=t.slice(s))}else"/"===a[0]&&(t=t.slice(1))}if("search"!==(e=t[0])&&"npw"!==e){var l;l=e?"folders"===e?"projects":marvel._isInApp?S[e]||"home":"landing:"+e:"home";return marvel._isInApp?window.marvel.navigate("/search",{trigger:!1,replace:!0}):window.location.href=o.getLocalizedSparkPath("/sp/search"),{backPath:n,backType:l}}return null},_getValidBackInfoQuery:function(e){var n;if(e.backType){var i=e.backType.split("/"),r=i[0].toLowerCase();"organizer"===r&&(r="projects"),t.find(y,(function(e){return e.toLowerCase()===r}))&&(n={backType:r},i.length>1&&(n.backPath=i.join("/")))}return n},setupUrlSearchFromArgs:function(e){if("string"==typeof e)if(-1!==e.indexOf("="))try{e=g.parse("?"+e,!0).query}catch(e){return null}else e={keys:e};t.isUndefined(e.fallbackThresh)&&(e.fallbackThresh=10);var n={searchQuery:e,trigger:e.trigger||"urlSearch",needsToBeTriggered:!0},i=this._getValidBackInfoQuery(e);return i&&(n.backInfo=i),n},triggerSearchForView:function(e,t){},defaultHandleCreateFromSearchResultsThumbClick:function(e,t){p.trigger("create-from-search-results",{asset:e,analytics:t})},_getAppFromAppOrAppProperty:function(e){return e&&(this._searchRequires?e=this._searchRequires.VisualBrowseAndSearchAppsController.getApp(e):("string"==typeof e&&(e=h.getAppByType(e)||h.getAppByName(e)||h.getAppByDocType(e)),!e||e.isaProjectFormat&&e.isaProjectFormat()||(e=null))),e},appSupportsEditorSearch:function(e){return(e=this._getAppFromAppOrAppProperty(e))&&e.appSupportsEditorSearch&&e.appSupportsEditorSearch()?"post"===e.typeName?l.hasFeature("post-templates-search-enabled")&&e:e:null},getBackArrowText:function(e){return e&&t.startsWith("landing:")?o.formatMessage("npw-vb-back-to-landing",{landing:e.split(":")[1]}):_[e]||_.default},getBackInfoFromNPWCurrentPath:function(e,t){var n,i,o=g.parse(e||r.history.fragment,!0);t?n=o.query&&o.query.backType?o.query.backType:"visualBrowse":o.query&&o.query.homeBackType?(n=o.query.homeBackType,i=o.query.backAppPath):n="home";return{text:this.getBackArrowText(n),backId:n,backPath:i}},_getUserFlagTemplatesData:function(){if(!this._userFlagTemplatesData){var e,t,n=!1;this._isLoggedOut?(e=l.hasUnauthenticatedFeature("npw-vb-search-enable-premium-templates-pre-susi"))&&(t=u.cpTemplateSearchRemixPaidDefaultFilter):(e=l.hasFeature("enable-premium-templates"),n=l.hasFeature("enable-giphy-templates-web")&&l.hasFeature("user-flag-image-source-giphy"),e&&l.hasFeature("is-paid-user")&&!l.hasFeature("has-premium-typekit")&&(e=!1),e&&(t=l.hasFeature("is-paid-user")?u.cpTemplateSearchRemixPaidDefaultFilterPremiumUser:u.cpTemplateSearchRemixPaidDefaultFilter)),this._userFlagTemplatesData={premiumFilter:t,allowPremiumTemplates:e,allowGiphyTemplates:n,showUpgradeForPremium:e&&!l.hasFeature("is-paid-user")}}return this._userFlagTemplatesData},_getCommonOptions:function(){var e,n=l.hasFeature("npw-visual-browse-search-debug-tagging"),i=l.hasFeature("npw-visual-browse-search-page-and-video-as-related"),r=u.sparkContentSearchHostProd,o={apiKey:u.sparkContentSearchApiKey,calcAggsForAllFragments:l.hasFeature("search-suggest-aggs-on-all-fragments"),updateKeysForUserStringUpdate:l.hasFeature("search-suggest-update-keys-for-string-update"),multiWordBabel:l.hasFeature("search-suggest-multi-word-babel"),suggestAggsOnSpace:!0,numFragmentsToRequest:8};l.hasFeature("remix-and-search-use-stage-cp")?(r=u.sparkContentSearchHostStage,o.host=u.sparkContentSuggestHostStage):o.host=u.sparkContentSuggestHostProd,n&&(e=r===u.sparkContentSearchHostStage?u.cpCuratorAssetPathStage:u.cpCuratorAssetPathProd),o.pathPrefix="/suggestions";var a={debugTagging:n,debugTaggingAssetPathTemplate:e,showNumbersInLines:n||l.hasFeature("npw-visual-browse-search-numbers-per-line"),keysForTags:!l.hasFeature("npw-visual-browse-search-cp-separate-prefixes"),detailViewEnabled:l.hasFeature("npw-visual-browse-search-cp-enable-detail"),hideAssetUntilLoaded:l.hasFeature("search-results-hide-asset-until-loaded"),allowFieldDefault:l.hasFeature("npw-visual-browse-search-allow-field-default"),showLoadMoreButton:l.hasFeature("npw-visual-browse-show-load-more-button"),searchPageAndVideoAsRelated:i,enableSearchHistory:!0,defaultFallbackThresh:10,searchHost:r,searchPathPrefix:"/v2/content",searchServiceSuggestOptions:o,SearchController:this,isLoggedOut:this._isLoggedOut},s=this._getUserFlagTemplatesData();return t.assign(a,s),a},_moveAssetToHeadOfAssetsArray:function(e,n){var i=-1;t.find(n,(function(t,n){if(t.id===e.id)return i=n,!0})),i>0?(n.splice(i,1),n.unshift(e)):-1===i&&n.unshift(e)},_getAppliedDefaultOptions:function(e,n,i,r){var o=this._getCommonOptions(),a=this._triggeredRemixData;this._triggeredRemixData=null,o.popularSearchStrings=n,i&&!i.unsupported&&(o.sizeFilterInfo=i);var s=e.editorApp&&this._getAppFromAppOrAppProperty(e.editorApp);(e=t.assign({},o,e)).handleCreateFromSearchResultsThumbClick||(e.handleCreateFromSearchResultsThumbClick=this.defaultHandleCreateFromSearchResultsThumbClick.bind(this));var c="";if(this._isEDUAccount&&(c="edu"),e.userProps={eduType:c,isPremiumUser:l.hasFeature("entitle-brand-kit"),refAppEnabled:l.hasFeature("enable-reference-app")},r&&(e.searchReact=r),e.SearchRequestsController&&(e.searchPromise||e.SearchRequestsController._assets))e.autoSearch={useController:!0,needsToBeTriggered:!0,searchPromise:e.searchPromise};else if(e.searchQuery&&!e.autoSearch)e.autoSearch=this.setupUrlSearchFromArgs(e.searchQuery);else if(a&&a.reopenRedrawData){if(a.useCase){var d=a.reopenRedrawData.lastRenderedResults.results,u=d.assetsById[a.useCase.id];u&&(this._moveAssetToHeadOfAssetsArray(u,d.assets),this._moveAssetToHeadOfAssetsArray(u,a.reopenRedrawData.dataToRestore._assets.assetsArray),t.each(d.assets,(function(e,t){e._orderedIndex=t})))}e.searchData=a.reopenRedrawData}else e.searchIfNotVB?e.autoSearch=this.setupUrlSearchFromArgs(e.searchIfNotVB):e.autoSearch||(e.seoPage||e.searchRemixMetadata)&&(e.autoSearch=this.setupUrlSearchFromRemixMetadataAndOrSeoPageOrQuery(e));if(e.editorApp=s,s&&!e.context&&(e.context="editor:"+s.typeName),e.searchViewId=e.searchViewId||e.context,!e.searchData&&!e.autoSearch){var h=this.getCachedView(e.searchViewId),p=h&&h.SearchRequestsController,f=this._searchViewsPreviousInstancesData[e.searchViewId];f?e.searchData=p?p.getSearchDataForRestore(f):f:p&&(e.searchData=p.getSearchDataForRestore(null))}return e.resultsOptions&&!t.isUndefined(e.resultsOptions.implicitCreateCta)||(e.resultsOptions=t.assign({},e.resultsOptions||{},{implicitCreateCta:!0}),e.defaultCreateAction||(e.defaultCreateAction="confirm")),e.allowPremiumTemplates&&e.experimentPremiumFilter&&(e.premiumFilter=e.experimentPremiumFilter),e.SearchController=this,e},_getNonEditorSearchReactRequires:function(){return this._getHomeSearchReactRequiresDefer||(this._getHomeSearchReactRequiresDefer=i.defer(),Promise.all([n.e("m-react-spectrum"),n.e(2),n.e(3),n.e("vendors~brandswitcher~ccx-share-sheet~missingfontsmodal~non-editor-search-react~react-personalizer"),n.e("non-editor-search-react")]).then(function(e){var t=n(271).default,i=n(884).default;this._getHomeSearchReactRequiresDefer.resolve({reactWrapper:t,CreateProjectMenu:i})}.bind(this).bind(null,n)).catch(n.oe)),this._getHomeSearchReactRequiresDefer.promise},_initSearchRequires:function(){return this._initSearchRequiresDefer||(this._initSearchRequiresDefer=i.defer(),s.isValid().then(function(){return this._isLoggedOut=!1,l.featuresLoaded()}.bind(this),function(e){this._isLoggedOut=!0}.bind(this)).finally(function(){(this._isLoggedOut?i(!1):c.getIsEDUAccount()).then(function(e){Promise.all([n.e("vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor"),n.e("npw-visual-browse-view~search-controller~share-view"),n.e("npw-visual-browse-view~search-controller"),n.e("search-controller")]).then(function(t){var i=n(889),r=n(900),o=n(888),a=n(883),s=n(901),l=n(902);this._isEDUAccount=e,this._searchRequires={SearchView:r,SearchViewTemplate:i,VisualBrowseUseCasesController:o,VisualBrowseAndSearchAppsController:a,SearchRequestsController:s,SearchControllerSizeFilterMapsJSON:l},this._initSearchRequiresDefer.resolve(this._searchRequires)}.bind(this).bind(null,n)).catch(n.oe)}.bind(this)).done()}.bind(this)).done()),this._initSearchRequiresDefer.promise},getCachedView:function(e){return this._searchViews[e]},_editorSizeInfoDefers:{},_getEditorSizeFilterInfoAfterRequires:function(e){var t={unsupported:!0};if(e=this._getAppFromAppOrAppProperty(e)){var n=this._editorSizeInfoDefers[e.typeName];if(!n)if(n=i.defer(),this._editorSizeInfoDefers[e.typeName]=n,e.getSizePickerInfo){var r={sizeFilterMapsJSON:this._searchRequires.SearchControllerSizeFilterMapsJSON};e.getSizePickerInfo().then((function(e){r.pickerInfo=e,n.resolve(r)})).catch((function(e){b.error("error getting size picker info",e),n.resolve(t)}))}else n.resolve(t);return n.promise}return i.resolve(t)},_getDataIdFromViewOptions:function(e){return e.editorApp?"editor:"+e.editorApp.getAppTypeID():e.searchViewId},_requestControllers:{},_getASearchRequestsControllerAfterRequires:function(e){if((e=e||{}).editorApp){var n=this.getCachedView("editor:"+e.editorApp.getAppTypeID());if(n&&n.SearchRequestsController)return n.SearchRequestsController}var i=this._getDataIdFromViewOptions(e),r=t.assign(this._getCommonOptions(),{logger:b,callbacks:{},dataId:i},e,{VisualBrowseUseCasesController:this._searchRequires.VisualBrowseUseCasesController,VisualBrowseAndSearchAppsController:this._searchRequires.VisualBrowseAndSearchAppsController});e.addDefaultCallbacks&&t.each(this._searchRequires.SearchRequestsController.requiredCallbackNames,(function(e){r.callbacks[e]||(r.callbacks[e]=function(){})}));var o=this._requestControllers[i];return o?o.updateOptions(r):(o=new this._searchRequires.SearchRequestsController(r),this._requestControllers[o.dataId]=o),o},getASearchRequestsController:function(e){return this._initSearchRequires().then(function(){return this._getEditorSizeFilterInfoAfterRequires(e.editorApp).then(function(t){return e.sizeFilterInfo=t,this._getASearchRequestsControllerAfterRequires(e)}.bind(this))}.bind(this))},getEditorSizeFilterInfo:function(e){return this._initSearchRequires().then(function(){return this._getEditorSizeFilterInfoAfterRequires(e)}.bind(this))},reopeningEditorWithSearchView:function(e){return this.getASearchView(e)},getASearchView:function(e){return this._initSearchRequires().then(function(){var n,r=[];return e.template=e.template||this._searchRequires.SearchViewTemplate,this._getPopularSearchStringsPromise||(this._getPopularSearchStringsPromise=this._searchRequires.VisualBrowseUseCasesController.getPopularSearchStrings()),r.push(this._getPopularSearchStringsPromise),r.push(this._getEditorSizeFilterInfoAfterRequires(e.editorApp||"post")),e.editorApp||(r.push(this._getNonEditorSearchReactRequires()),n=!0),i.allSettled(r).then(function(i){var r,o=i[0].value,a=i[1].value;n&&(r=i[i.length-1].value),"header"!==e.context||this._headerOptions||(this._headerOptions=t.clone(e)),e=this._getAppliedDefaultOptions(e,o,a,r);var s=this.getCachedView(e.searchViewId);if(s){if("header"===e.searchViewId&&e.context!==s._options.context&&(e.reset=!0,e.SearchRequestsController||(e.SearchRequestsController=s.SearchRequestsController)),e.npwInAppContainer)return s._options.context="npw",s;s.updateOptions(e)}else e.SearchRequestsController||(e.SearchRequestsController=this._getASearchRequestsControllerAfterRequires(e)),s=new this._searchRequires.SearchView(e),this._searchViews[e.searchViewId]=s;return s}.bind(this))}.bind(this))},searchViewShown:function(e,t){e.searchViewShown(t)},hidingVisualBrowseInAppContainer:function(e){e._options.context="header"},removeSearchView:function(e){var n=e._options.searchViewId;if("header"!==n){var i=n&&this._searchViews[n];i&&(i!==e&&b.debug("mismatched views in removeSearchView",{cachedView:i,view:e}),this._searchViewsPreviousInstancesData[n]=i.getDataForReopenRedraw(),delete this._searchViews[n]),e.remove()}else{var r=t.clone(this._headerOptions);this.getASearchView(r).then((function(e){e.setElement(r.el),e.render()}))}},_maxTotalStringLengthForTranslate:512,_cachedTranslationsByTransGroup:{},_cacheTranslationTypeIdFromSendData:function(e){var t=[e.to[0]];return e.preferredSrcLang?t.push(e.preferredSrcLang):e.from&&t.push("f."+e.from),t.join(".")},doesStringHaveNonEnglishLetters:function(e){return!!e&&!!e.match(/[^\x00-\x7F]/)},_getTranslationFromCache:function(e){var t=this._cacheTranslationTypeIdFromSendData(e),n=this._cachedTranslationsByTransGroup[t];return n&&n[e.str[0]]},_addTranslationToCache:function(e,n){var i=this._cacheTranslationTypeIdFromSendData(e),r=this._cachedTranslationsByTransGroup[i],o=e.str[0];r||(r={},this._cachedTranslationsByTransGroup[i]=r),r[o]=t.clone(n)},_getTranslateSettingsFromOptions:function(e){var t,n=e.fromLang,i=e.toLang,r=o.getLocale().split("-").join("_"),a=e.translationType,s=!!a;if(a)if(s=!0,"guessToUs"===a){var l=n||r;t=l,i="en_US",e.guessIfUs||"en_US"===l&&(n=i)}else"currentToUs"===a?(n=r,i="en_US"):"usToCurrent"===a?(n="en_US",i=r):s=!1;s||(n=n&&n.split("-").join("_")||r,i=i&&i.split("-").join("_")||"en_US");var c={contentType:"UGC",domain:"GENERIC",to:[i]};return n&&(c.from=n),t&&(c.preferredSrcLang=t),c.from===c.to[0]&&(c.noTranslationNeeded=!0),c},_getNoTranslateResults:function(e,n){var i=t.map(e.str,(function(t){return{translatedText:t,originalText:t,success:!0,from:e.to,to:e.to[0]}}));return n?i:i[0]},getTranslatedSearchString:function(n){var r;if("string"==typeof n?(r=n,n={}):r=n.textToTranslate,r.length>this._maxTotalStringLengthForTranslate)return i.reject("string longer than "+this._maxTotalStringLengthForTranslate+":"+r.length);var o=this._getTranslateSettingsFromOptions(n),a=r;if(o.str=[a],o.noTranslationNeeded)return i.resolve(this._getNoTranslateResults(o));var s=this._getTranslationFromCache(o);if(s)return i(s);var l={},c=i.defer();return e.ajax({type:"POST",url:u.mtTranslationServicePath,headers:{"X-Api-Key":u.key,"Content-Type":"application/json"},data:JSON.stringify(o),dataType:"json",traditional:!0,success:function(e,n,i){if(e.code)-9!==e.code&&b.error("[Search:MachineTranslation] unexpected translation error:"+e.msg,e),l=this._getNoTranslateResults(o);else{var r=e.Bing;r||(r=t.find(e,(function(e){return e})));var s=r[0],d=s.translations[0];""===(l=t.assign({from:s.from,originalText:s.originalText},d)).translatedText&&(l.translatedText=a)}this._addTranslationToCache(o,l),c.resolve(l)}.bind(this),error:function(e,t,n){b.error("mt translation failure:"+t,e),c.reject(n||"translation service error")}.bind(this)}),c.promise},_navigateRequiringLogin:function(e,n){if(this._isLoggedOut)"/"!==e[0]&&(e="/"+e),window.location.href="/sp"+e;else{var i=t.assign({trigger:!0},n||{});window.marvel.navigate(e,i)}},_visualBrowseLoggedOutCreateNav:function(e,t,n){t&&"new"!==t||(t="newlo");var i="/npw/"+e+"/"+t;n&&("?"!==n.charAt(0)&&(i+="?"),i+=n),this._navigateRequiringLogin(i)},_getRemixUrlFromSearchResultAsset:function(e,t){return e.remixable?"design-remix/"+t.type+"/"+(e.alias||e.id):e.remixUrl?e.remixUrl:""},remixFromSearchThumb:function(e,t,n){var i,r=e;switch(n.analytics.context){case"item-detail-create":i="createFromSearchDetail";break;case"item-grid":i="createFromSearchThumb"}this.vbTriggeringRemixFromSearchThumb(e,t),this._handleSearchThumbCreateAnalytics(e,n),this._handleNewDocRequest(t,r.app,r,i)},_handleNewDocRequest:function(e,t,n,i,r){var o=this._searchRequires.VisualBrowseAndSearchAppsController.getFormatInfo(t),a="home:"+r;if(b.debug("need to pass in page info for _handleNewDocRequest"),this.saveSessionForNewDocRequest(e,t,n,i,r),n){var s=this._getRemixUrlFromSearchResultAsset(n,o);if(s)return void this._navigateRequiringLogin(s)}this._isLoggedOut?this._visualBrowseLoggedOutCreateNav(t):o.app.requestAppCreateNew({},a)},_handleSearchThumbCreateAnalytics:function(e,t){var n=t&&t.analytics||{},i=t.eventName||"NPWVisualBrowseCreateFromTemplateResult";this._handleProjectCreateClickedAnalyticsData({eventName:i,extraData:n})},_addCurrentSearchToContextData:function(e,n,i,r,o){var a=e.SearchRequestsController.getCurrentSearch();if(a){var s={str:a.searchStr};a.options.tagFilters&&(s.tagFilters=t.map(a.options.tagFilters,(function(e){return e.tag}))),n.search=s}},saveSessionForNewDocRequest:function(e,t,n,i,r){var o="npw"===(r=r||e&&e._options.context).split(":")[0]?"visual-browse":r,a={},s=e&&"createFromHomeThumb"!==i;n&&("useCaseClicked"===i?(a.useCaseId=n.id.split("_")[0],s=!1):"createFromSearchThumb"===i&&(o+=":search")),a.npwMethod=o,s&&this._addCurrentSearchToContextData(e,a,t,n,i),this._saveProjectContextData(a)},_saveProjectContextData:function(e){if(window.sessionStorage)try{sessionStorage.setItem("project_ctx",JSON.stringify(e))}catch(e){}},_headerSearchInittedDefer:i.defer(),headerSearchInitted:function(){return this._headerSearchInittedDefer.promise},_backArrowClickHandlerForHeader:function(t,n){var r=e(t.target).data("back-id"),o=e(t.target).data("back-path")||"/"+r;return o?("/home"===o?o="/":"/visualBrowse"===o&&l.hasFeature("home-show-visual-browse")&&(o="/npw"),marvel._isInApp&&window.marvel.navigate(o,{trigger:!0})):history.back(),i()},_formatFilters:{format:{id:"all",app:""}},initHeaderSearch:function(n){if(!this._initHeaderSearchPromise){n=n||{};var i={asHeader:!0,doNotRenderOnInit:!0,templateOptions:{searchViewBarOnly:!0,searchParentHeightControl:!0,searchViewNoBackground:!0,searchViewInHeader:!1,inVbSearchHeader:!0,inMainSearchHeader:!0},el:e(".search-in-main-header"),resultsHolder$:e(".main-header-search-results"),context:"header",sendDeferWithCreateEvent:!1,defaultCreateAction:"confirm",dropdownSelectorStr:".npw-visual-browse-header-create-new-dropdown",createFormats:!0,showFormatFilters:!1,showPlaceholderIfNotShowingResultsGrid:!0,backArrowClickHandler:this._backArrowClickHandlerForHeader.bind(this)};l.hasFeature("home-show-visual-browse")&&(i.showFormatFilters=!0,i.defaultFilters=this._formatFilters,i.filtersInHeader=!0,i.filtersInHeaderCss="filters-if-npw"),t.assign(i,n),this._initHeaderSearchPromise=this.getASearchView(i).then(function(e){return e.render(),this._headerSearchInittedDefer.resolve(e),this._headerSearchView=e,window.marvel.events.on("design-view-unloading",this._handleDesignViewUnloading.bind(this)),window.marvel.events.on("designview-rendersubview-doc-loaded",this._handleDesignViewLoaded.bind(this)),e}.bind(this))}return this._initHeaderSearchPromise},_handleDesignViewUnloading:function(e){this._headerSearchView&&this._headerSearchView._cachedParent$&&(this._headerSearchView.$el.appendTo(this._headerSearchView._cachedParent$),this._headerSearchView._cachedParent$=null)},_handleDesignViewLoaded:function(e){if(this._headerSearchView){var t=this._headerSearchView.$el.parent();t.length&&(this._headerSearchView.$el.detach(),this._headerSearchView._cachedParent$=t)}},getTagNamesAnalyticValForAsset:function(e){var n=t.clone(e.tags||[]);if(n.push(w),e.nsTags&&(n=n.concat(e.nsTags)),e.isPremiumTemplate){n.push(k);var i=n.indexOf(x);-1!==i&&n.splice(i,1)}return n.push(e.sploc),"["+(n=t.uniq(n)).join(",")+"]"},showPremiumUpgradeModalForPremiumTemplate:function(e,t){var n=(t=t||{}).analyticsPage||"home",i=t.analyticsFullTagNames||this.getTagNamesAnalyticValForAsset(e);m.showMerchMessagingModal({workflow:"premiumTemplate",destinationUrl:"design-remix/post/"+(e.alias||e.id),asset:e,analyticsPage:n,analyticsFullTagNames:i})},_addFormatToAnalyticsData:function(e,t){var n="unknown";return"page"!==t&&"post"!==t&&"video"!==t||(n=t),e.sparkFormat=n,e},_trackEvent:function(e,n){var i,r;n=n||{},b.debug("need to set pagename for _trackEvent"),r=i=n.context||"header";var o=t.assign(n,{context:i});a.trackEvent(e,o,r)},_handleProjectCreateClickedAnalyticsData:function(e){e=t.cloneDeep(e),this._trackEvent("project:"+e.eventName,e.extraData)},_handleProjectCreateClickedAnalytics:function(e,t){t=t||{},this._addFormatToAnalyticsData(t,e),this._handleProjectCreateClickedAnalyticsData({eventName:"createClicked",extraData:t})},handleFormatCreateFromScratch:function(e){this._handleProjectCreateClickedAnalytics(e),this._isLoggedOut,this._handleNewDocRequest(this._headerSearchView,e,null,"createClicked")},_sendHomeTemplatePressedAnalytics:function(e){var n=e&&e.asset,i=t.extend({contextualData6:"templateType:"+(n&&n.isPremiumTemplate?"paid":"free"),contextualData3:"categoryName:templateSearch",contextualData4:"templateLocation:home",contextualData5:n?"tagNames:"+this.getTagNamesAnalyticValForAsset(n):"",templateId:n&&n.id||"none"},e.eventData);a.trackEvent("templatePressed",i,"home")},handleCreateFromHomeTemplateThumb:function(e,t){this._sendHomeTemplatePressedAnalytics({asset:e,eventData:t});var n=this._getUserFlagTemplatesData();if(e.isPremiumTemplate&&n.showUpgradeForPremium)this.showPremiumUpgradeModalForPremiumTemplate(e,t);else{var i=t&&t.context||"home";this._handleSearchThumbCreateAnalytics(e,t),this._handleNewDocRequest(this._headerSearchView,e.app||"post",e,"createFromHomeThumb",i)}},handleHomeCreateFromScratchInSearch:function(e,t,n){this._handleHomeCreateFromScratch(t,n,e)},handleHomeCreateFromScratch:function(e,t){this._handleHomeCreateFromScratch(e,t,null)},_handleHomeCreateFromScratch:function(e,t,n){"video"===e.app?this.doNewNonPost(e,"video"):"page"===e.app?this.doNewNonPost(e,"page"):"refapp"===e.app?this.doNewNonPost(e,"refapp"):"brandedTemplatePicker"===e.id?this.doPostBrandedTemplate(t,n):this.doPostBlank(e,t)},queryStringFromObject:function(e,n){var i=new URLSearchParams;return t.each(e,(function(e,t){i.set(t,e)})),(n?"?":"")+i},doPostBrandedTemplate:function(e,t){var n,i=e.templateData.asset,r=e.templateData.kit,o=e.templateData.fromScatch,a=e.templateData.app,s=r.getId(),c={workflow:"blank",fallbackThresh:"default",trigger:"CreateProjectMenu"};o?(n="design/"+a+"/new",c.branded=!0,c.sizeCategory="popular"):n=i.remixUrl,n+=this.queryStringFromObject(c,!0),l.hasFeature("entitle-brand-kit")?this._navigateRequiringLogin(n,{trigger:!0,replace:!1}):t?this.navigateToBrandingFromCreateProjectMenu(t,s):this._navigateRequiringLogin("branding/"+(s||""),{trigger:!0})},doPostBlank:function(e,n){var i={"instagram-post":{aspectId:"Instagram"},"facebook-cover":{aspectId:"Facebook"},collage:{sizeCategory:"popular",pickImage:"beforeSize",search:"keys=collage"},flyer:{aspectId:"Poster",search:"flyer"},"custom-size-graphic":{sizeCategory:"custom"},custom:{sizeCategory:"custom"},sizePicker:{}}[e.id]||{};t.assign(i,t.pick(e,["aspectId","search","sizeCategory","pickImage"]));var r={workflow:"blank",fallbackThresh:"default",trigger:"CreateProjectMenu"};t.assign(r,i);var o="/design/post/new"+this.queryStringFromObject(r,!0);this._navigateRequiringLogin(o,{trigger:!0,replace:!1})},doNewNonPost:function(e,t){var n="/design/";t||("refapp"===e.id?t="refapp":(b.warn("unknown action in doNewNonPost",{action:e}),t="page")),n+=t+"/new",this._navigateRequiringLogin(n,{trigger:!0,replace:!1})},navigateToBrandingFromCreateProjectMenu:function(e,t){this._navigateRequiringLogin("branding/"+(t||""),{trigger:!0}),e.returningToHome()}}))}.apply(t,i))||(e.exports=r)},,function(e,t,n){var i=n(31),r=n(28).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){t.f=n(40)},function(e,t,n){var i=n(327)("keys"),r=n(245);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(204);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(28).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(31),r=n(30),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(202)(Function.call,n(119).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(e,t,n){var i=n(31),r=n(362).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&i(o)&&r&&r(e,o),e}},function(e,t,n){"use strict";var i=n(118),r=n(205);e.exports=function(e){var t=String(r(this)),n="",o=i(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var i=n(118),r=n(205);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),l=i(n),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var i=n(246),r=n(9),o=n(95),a=n(103),s=n(262),l=n(453),c=n(261),d=n(251),u=n(40)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,f,g,m,v){l(n,t,f);var b,y,w,k=function(e){if(!h&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",_="values"==g,S=!1,C=e.prototype,T=C[u]||C["@@iterator"]||g&&C[g],M=T||k(g),I=g?_?k("entries"):M:void 0,D="Array"==t&&C.entries||T;if(D&&(w=d(D.call(new e)))!==Object.prototype&&w.next&&(c(w,x,!0),i||"function"==typeof w[u]||a(w,u,p)),_&&T&&"values"!==T.name&&(S=!0,M=function(){return T.call(this)}),i&&!v||!h&&!S&&C[u]||a(C,u,M),s[t]=M,s[x]=p,g)if(b={values:_?M:k("values"),keys:m?M:k("keys"),entries:I},v)for(y in b)y in C||o(C,y,b[y]);else r(r.P+r.F*(h||S),t,b);return b}},function(e,t,n){var i=n(371),r=n(205);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},function(e,t,n){var i=n(31),r=n(204),o=n(40)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},function(e,t,n){var i=n(40)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var i=n(262),r=n(40)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){"use strict";var i=n(51),r=n(244);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){var i=n(283),r=n(40)("iterator"),o=n(262);e.exports=n(60).getIteratorMethod=function(e){if(null!=e)return e[r]||e["@@iterator"]||o[i(e)]}},function(e,t,n){"use strict";var i=n(96),r=n(248),o=n(49);e.exports=function(e){for(var t=i(this),n=o(t.length),a=arguments.length,s=r(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,c=void 0===l?n:r(l,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var i=n(263),r=n(457),o=n(262),a=n(104);e.exports=n(369)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,n){"use strict";var i,r,o=n(332),a=RegExp.prototype.exec,s=String.prototype.replace,l=a,c=(i=/a/,r=/b*/g,a.call(i,"a"),a.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),d=void 0!==/()??/.exec("")[1];(c||d)&&(l=function(e){var t,n,i,r,l=this;return d&&(n=new RegExp("^"+l.source+"$(?!\\s)",o.call(l))),c&&(t=l.lastIndex),i=a.call(l,e),c&&i&&(l.lastIndex=l.global?i.index+i[0].length:t),d&&i&&i.length>1&&s.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i}),e.exports=l},function(e,t,n){"use strict";var i=n(368)(!0);e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},function(e,t,n){var i,r,o,a=n(202),s=n(447),l=n(361),c=n(356),d=n(28),u=d.process,h=d.setImmediate,p=d.clearImmediate,f=d.MessageChannel,g=d.Dispatch,m=0,v={},b=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},y=function(e){b.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++m]=function(){s("function"==typeof e?e:Function(e),t)},i(m),m},p=function(e){delete v[e]},"process"==n(204)(u)?i=function(e){u.nextTick(a(b,e,1))}:g&&g.now?i=function(e){g.now(a(b,e,1))}:f?(o=(r=new f).port2,r.port1.onmessage=y,i=a(o.postMessage,o,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(i=function(e){d.postMessage(e+"","*")},d.addEventListener("message",y,!1)):i="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,n){"use strict";var i=n(28),r=n(59),o=n(246),a=n(338),s=n(103),l=n(266),c=n(29),d=n(265),u=n(118),h=n(49),p=n(465),f=n(250).f,g=n(51).f,m=n(376),v=n(261),b="prototype",y="Wrong index!",w=i.ArrayBuffer,k=i.DataView,x=i.Math,_=i.RangeError,S=i.Infinity,C=w,T=x.abs,M=x.pow,I=x.floor,D=x.log,P=x.LN2,A=r?"_b":"buffer",E=r?"_l":"byteLength",L=r?"_o":"byteOffset";function N(e,t,n){var i,r,o,a=new Array(n),s=8*n-t-1,l=(1<<s)-1,c=l>>1,d=23===t?M(2,-24)-M(2,-77):0,u=0,h=e<0||0===e&&1/e<0?1:0;for((e=T(e))!=e||e===S?(r=e!=e?1:0,i=l):(i=I(D(e)/P),e*(o=M(2,-i))<1&&(i--,o*=2),(e+=i+c>=1?d/o:d*M(2,1-c))*o>=2&&(i++,o/=2),i+c>=l?(r=0,i=l):i+c>=1?(r=(e*o-1)*M(2,t),i+=c):(r=e*M(2,c-1)*M(2,t),i=0));t>=8;a[u++]=255&r,r/=256,t-=8);for(i=i<<t|r,s+=t;s>0;a[u++]=255&i,i/=256,s-=8);return a[--u]|=128*h,a}function F(e,t,n){var i,r=8*n-t-1,o=(1<<r)-1,a=o>>1,s=r-7,l=n-1,c=e[l--],d=127&c;for(c>>=7;s>0;d=256*d+e[l],l--,s-=8);for(i=d&(1<<-s)-1,d>>=-s,s+=t;s>0;i=256*i+e[l],l--,s-=8);if(0===d)d=1-a;else{if(d===o)return i?NaN:c?-S:S;i+=M(2,t),d-=a}return(c?-1:1)*i*M(2,d-t)}function R(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function O(e){return[255&e]}function B(e){return[255&e,e>>8&255]}function z(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function U(e){return N(e,52,8)}function j(e){return N(e,23,4)}function $(e,t,n){g(e[b],t,{get:function(){return this[n]}})}function H(e,t,n,i){var r=p(+n);if(r+t>e[E])throw _(y);var o=e[A]._b,a=r+e[L],s=o.slice(a,a+t);return i?s:s.reverse()}function V(e,t,n,i,r,o){var a=p(+n);if(a+t>e[E])throw _(y);for(var s=e[A]._b,l=a+e[L],c=i(+r),d=0;d<t;d++)s[l+d]=c[o?d:t-d-1]}if(a.ABV){if(!c((function(){w(1)}))||!c((function(){new w(-1)}))||c((function(){return new w,new w(1.5),new w(NaN),"ArrayBuffer"!=w.name}))){for(var G,K=(w=function(e){return d(this,w),new C(p(e))})[b]=C[b],q=f(C),W=0;q.length>W;)(G=q[W++])in w||s(w,G,C[G]);o||(K.constructor=w)}var Y=new k(new w(2)),Q=k[b].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||l(k[b],{setInt8:function(e,t){Q.call(this,e,t<<24>>24)},setUint8:function(e,t){Q.call(this,e,t<<24>>24)}},!0)}else w=function(e){d(this,w,"ArrayBuffer");var t=p(e);this._b=m.call(new Array(t),0),this[E]=t},k=function(e,t,n){d(this,k,"DataView"),d(e,w,"DataView");var i=e[E],r=u(t);if(r<0||r>i)throw _("Wrong offset!");if(r+(n=void 0===n?i-r:h(n))>i)throw _("Wrong length!");this[A]=e,this[L]=r,this[E]=n},r&&($(w,"byteLength","_l"),$(k,"buffer","_b"),$(k,"byteLength","_l"),$(k,"byteOffset","_o")),l(k[b],{getInt8:function(e){return H(this,1,e)[0]<<24>>24},getUint8:function(e){return H(this,1,e)[0]},getInt16:function(e){var t=H(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=H(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return R(H(this,4,e,arguments[1]))},getUint32:function(e){return R(H(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return F(H(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return F(H(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){V(this,1,e,O,t)},setUint8:function(e,t){V(this,1,e,O,t)},setInt16:function(e,t){V(this,2,e,B,t,arguments[2])},setUint16:function(e,t){V(this,2,e,B,t,arguments[2])},setInt32:function(e,t){V(this,4,e,z,t,arguments[2])},setUint32:function(e,t){V(this,4,e,z,t,arguments[2])},setFloat32:function(e,t){V(this,4,e,j,t,arguments[2])},setFloat64:function(e,t){V(this,8,e,U,t,arguments[2])}});v(w,"ArrayBuffer"),v(k,"DataView"),s(k[b],a.VIEW,!0),t.ArrayBuffer=w,t.DataView=k},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(473)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";var i=n(285),r=n(477),o=n(478),a=n(479);o=n(478);function s(e,t,n,i,r){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=i,this.compressedContent=r}s.prototype={getContentWorker:function(){var e=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},e.exports=s},function(e,t,n){"use strict";var i=n(41);var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t){return void 0!==e&&e.length?"string"!==i.getTypeOf(e)?function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},,function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(42)],void 0===(r=function(e,t,i,r,o){"use strict";return new(i.Model.extend({npwExperimentContexts:{firstUse:{ids:["npwVisualBrowse*","npwVbFu*","npwSearchExperiment*"]},nonFirstUse:{ids:["npwVisualBrowse*","npwVbRu*","npwSearchExperiment*"]}},_recordExperiment:function(e){var n=e.firstUse?"firstUse":"nonFirstUse",i=this.npwExperimentContexts[n];if(i.defer)return i.defer.promise;if(i.defer=r.defer(),i.ids.length){var a=[];t.each(i.ids,function(e){a.push(o.run(e))}.bind(this)),r.allSettled(a).then((function(e){t.each(e,(function(e,t){"fulfilled"!==e.state&&window.marvel.logger.error("Error loading NPW experiment: "+i.ids[t],e.reason)})),i.defer.resolve()}))}else i.defer.resolve();return i.defer.promise},getNpwClass:function(e){return this._recordExperiment(e).then(this._doRequire.bind(this))},_doRequire:function(){return this._getVisualBrowseDefer||(this._getVisualBrowseDefer=r.defer(),Promise.all([n.e("npw-visual-browse-view~search-controller~share-view"),n.e("npw-visual-browse-view~search-controller"),n.e("npw-visual-browse-view")]).then(function(e){var t=n(588);this._getVisualBrowseDefer.resolve(t)}.bind(this).bind(null,n)).catch(n.oe)),this._getVisualBrowseDefer.promise},preloadRequire:function(){this._doRequire().done()}}))}.apply(t,i))||(e.exports=r)},,,,,,,,function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(92),n(568)],void 0===(r=function(e,t,n,i,r,o){"use strict";var a,s=["#FFFFFF","#D9D9D9","#B3B3B3","#808080","#4D4D4D","#262626","#000000","#B1DFE8","#85EBFF","#33DDFF","#00AFD1","#0087A2","#075767","#3E636A","#C3DCEB","#99D8FF","#1FA9FF","#0079C6","#0065A3","#06446C","#3A5364","#CCD2ED","#B6C2F5","#667CE0","#2044E0","#152FA3","#0B1D6F","#3B4364","#DEC6E8","#D396ED","#B651E1","#8C20BA","#5D147C","#410F57","#4F365A","#EAC6D9","#FCC5E2","#F977BC","#EA1889","#9C0757","#610536","#624153","#E8C8C1","#FFCAC2","#FF8370","#F22B0C","#A31600","#520B00","#58332D","#E6D1BA","#FFD5AD","#FFAB5C","#FF7D00","#AF5500","#522700","#523D2A","#E8D9BE","#FFE2AD","#FFC65C","#FFA500","#A56E06","#613F00","#5C4C30","#EDE4BE","#FFF0AD","#FFE570","#FFCF00","#B89600","#665300","#5A5439","#EAEAC1","#FFFEAD","#FFFD70","#F4EF21","#B8B500","#7A7800","#6E6D3E","#DAE8C1","#D7F7A1","#AFFF26","#88ED24","#67B31B","#416F14","#556942","#C0EACE","#A2F2BD","#82F5A8","#25D55F","#179942","#0D6129","#3E6049","#F2F2F2","#E6E6E6","#BFBFBF","#999999","#595959","#404040","#1A1A1A"],l=[{hex:"#EFDECD",name:"Almond",rgb:"(239, 222, 205)"},{hex:"#CD9575",name:"Antique Brass",rgb:"(205, 149, 117)"},{hex:"#FDD9B5",name:"Apricot",rgb:"(253, 217, 181)"},{hex:"#78DBE2",name:"Aquamarine",rgb:"(120, 219, 226)"},{hex:"#87A96B",name:"Asparagus",rgb:"(135, 169, 107)"},{hex:"#FFA474",name:"Atomic Tangerine",rgb:"(255, 164, 116)"},{hex:"#FAE7B5",name:"Banana Mania",rgb:"(250, 231, 181)"},{hex:"#9F8170",name:"Beaver",rgb:"(159, 129, 112)"},{hex:"#FD7C6E",name:"Bittersweet",rgb:"(253, 124, 110)"},{hex:"#000000",name:"Black",rgb:"(0,0,0)"},{hex:"#ACE5EE",name:"Blizzard Blue",rgb:"(172, 229, 238)"},{hex:"#1F75FE",name:"Blue",rgb:"(31, 117, 254)"},{hex:"#A2A2D0",name:"Blue Bell",rgb:"(162, 162, 208)"},{hex:"#6699CC",name:"Blue Gray",rgb:"(102, 153, 204)"},{hex:"#0D98BA",name:"Blue Green",rgb:"(13, 152, 186)"},{hex:"#7366BD",name:"Blue Violet",rgb:"(115, 102, 189)"},{hex:"#DE5D83",name:"Blush",rgb:"(222, 93, 131)"},{hex:"#CB4154",name:"Brick Red",rgb:"(203, 65, 84)"},{hex:"#B4674D",name:"Brown",rgb:"(180, 103, 77)"},{hex:"#FF7F49",name:"Burnt Orange",rgb:"(255, 127, 73)"},{hex:"#EA7E5D",name:"Burnt Sienna",rgb:"(234, 126, 93)"},{hex:"#B0B7C6",name:"Cadet Blue",rgb:"(176, 183, 198)"},{hex:"#FFFF99",name:"Canary",rgb:"(255, 255, 153)"},{hex:"#1CD3A2",name:"Caribbean Green",rgb:"(28, 211, 162)"},{hex:"#FFAACC",name:"Carnation Pink",rgb:"(255, 170, 204)"},{hex:"#DD4492",name:"Cerise",rgb:"(221, 68, 146)"},{hex:"#1DACD6",name:"Cerulean",rgb:"(29, 172, 214)"},{hex:"#BC5D58",name:"Chestnut",rgb:"(188, 93, 88)"},{hex:"#DD9475",name:"Copper",rgb:"(221, 148, 117)"},{hex:"#9ACEEB",name:"Cornflower",rgb:"(154, 206, 235)"},{hex:"#FFBCD9",name:"Cotton Candy",rgb:"(255, 188, 217)"},{hex:"#FDDB6D",name:"Dandelion",rgb:"(253, 219, 109)"},{hex:"#2B6CC4",name:"Denim",rgb:"(43, 108, 196)"},{hex:"#EFCDB8",name:"Desert Sand",rgb:"(239, 205, 184)"},{hex:"#6E5160",name:"Eggplant",rgb:"(110, 81, 96)"},{hex:"#CEFF1D",name:"Electric Lime",rgb:"(206, 255, 29)"},{hex:"#71BC78",name:"Fern",rgb:"(113, 188, 120)"},{hex:"#6DAE81",name:"Forest Green",rgb:"(109, 174, 129)"},{hex:"#C364C5",name:"Fuchsia",rgb:"(195, 100, 197)"},{hex:"#CC6666",name:"Fuzzy Wuzzy",rgb:"(204, 102, 102)"},{hex:"#E7C697",name:"Gold",rgb:"(231, 198, 151)"},{hex:"#FCD975",name:"Goldenrod",rgb:"(252, 217, 117)"},{hex:"#A8E4A0",name:"Granny Smith Apple",rgb:"(168, 228, 160)"},{hex:"#95918C",name:"Gray",rgb:"(149, 145, 140)"},{hex:"#1CAC78",name:"Green",rgb:"(28, 172, 120)"},{hex:"#1164B4",name:"Green Blue",rgb:"(17, 100, 180)"},{hex:"#F0E891",name:"Green Yellow",rgb:"(240, 232, 145)"},{hex:"#FF1DCE",name:"Hot Magenta",rgb:"(255, 29, 206)"},{hex:"#B2EC5D",name:"Inchworm",rgb:"(178, 236, 93)"},{hex:"#5D76CB",name:"Indigo",rgb:"(93, 118, 203)"},{hex:"#CA3767",name:"Jazzberry Jam",rgb:"(202, 55, 103)"},{hex:"#3BB08F",name:"Jungle Green",rgb:"(59, 176, 143)"},{hex:"#FEFE22",name:"Laser Lemon",rgb:"(254, 254, 34)"},{hex:"#FCB4D5",name:"Lavender",rgb:"(252, 180, 213)"},{hex:"#FFF44F",name:"Lemon Yellow",rgb:"(255, 244, 79)"},{hex:"#FFBD88",name:"Macaroni and Cheese",rgb:"(255, 189, 136)"},{hex:"#F664AF",name:"Magenta",rgb:"(246, 100, 175)"},{hex:"#AAF0D1",name:"Magic Mint",rgb:"(170, 240, 209)"},{hex:"#CD4A4C",name:"Mahogany",rgb:"(205, 74, 76)"},{hex:"#EDD19C",name:"Maize",rgb:"(237, 209, 156)"},{hex:"#979AAA",name:"Manatee",rgb:"(151, 154, 170)"},{hex:"#FF8243",name:"Mango Tango",rgb:"(255, 130, 67)"},{hex:"#C8385A",name:"Maroon",rgb:"(200, 56, 90)"},{hex:"#EF98AA",name:"Mauvelous",rgb:"(239, 152, 170)"},{hex:"#FDBCB4",name:"Melon",rgb:"(253, 188, 180)"},{hex:"#1A4876",name:"Midnight Blue",rgb:"(26, 72, 118)"},{hex:"#30BA8F",name:"Mountain Meadow",rgb:"(48, 186, 143)"},{hex:"#C54B8C",name:"Mulberry",rgb:"(197, 75, 140)"},{hex:"#1974D2",name:"Navy Blue",rgb:"(25, 116, 210)"},{hex:"#FFA343",name:"Neon Carrot",rgb:"(255, 163, 67)"},{hex:"#BAB86C",name:"Olive Green",rgb:"(186, 184, 108)"},{hex:"#FF7538",name:"Orange",rgb:"(255, 117, 56)"},{hex:"#FF2B2B",name:"Orange Red",rgb:"(255, 43, 43)"},{hex:"#F8D568",name:"Orange Yellow",rgb:"(248, 213, 104)"},{hex:"#E6A8D7",name:"Orchid",rgb:"(230, 168, 215)"},{hex:"#414A4C",name:"Outer Space",rgb:"(65, 74, 76)"},{hex:"#FF6E4A",name:"Outrageous Orange",rgb:"(255, 110, 74)"},{hex:"#1CA9C9",name:"Pacific Blue",rgb:"(28, 169, 201)"},{hex:"#FFCFAB",name:"Peach",rgb:"(255, 207, 171)"},{hex:"#C5D0E6",name:"Periwinkle",rgb:"(197, 208, 230)"},{hex:"#FDDDE6",name:"Piggy Pink",rgb:"(253, 221, 230)"},{hex:"#158078",name:"Pine Green",rgb:"(21, 128, 120)"},{hex:"#FC74FD",name:"Pink Flamingo",rgb:"(252, 116, 253)"},{hex:"#F78FA7",name:"Pink Sherbet",rgb:"(247, 143, 167)"},{hex:"#8E4585",name:"Plum",rgb:"(142, 69, 133)"},{hex:"#7442C8",name:"Purple Heart",rgb:"(116, 66, 200)"},{hex:"#9D81BA",name:"Purple Mountain's Majesty",rgb:"(157, 129, 186)"},{hex:"#FE4EDA",name:"Purple Pizzazz",rgb:"(254, 78, 218)"},{hex:"#FF496C",name:"Radical Red",rgb:"(255, 73, 108)"},{hex:"#D68A59",name:"Raw Sienna",rgb:"(214, 138, 89)"},{hex:"#714B23",name:"Raw Umber",rgb:"(113, 75, 35)"},{hex:"#FF48D0",name:"Razzle Dazzle Rose",rgb:"(255, 72, 208)"},{hex:"#E3256B",name:"Razzmatazz",rgb:"(227, 37, 107)"},{hex:"#EE204D",name:"Red",rgb:"(238,32 ,77 )"},{hex:"#FF5349",name:"Red Orange",rgb:"(255, 83, 73)"},{hex:"#C0448F",name:"Red Violet",rgb:"(192, 68, 143)"},{hex:"#1FCECB",name:"Robin's Egg Blue",rgb:"(31, 206, 203)"},{hex:"#7851A9",name:"Royal Purple",rgb:"(120, 81, 169)"},{hex:"#FF9BAA",name:"Salmon",rgb:"(255, 155, 170)"},{hex:"#FC2847",name:"Scarlet",rgb:"(252, 40, 71)"},{hex:"#76FF7A",name:"Screamin' Green",rgb:"(118, 255, 122)"},{hex:"#9FE2BF",name:"Sea Green",rgb:"(159, 226, 191)"},{hex:"#A5694F",name:"Sepia",rgb:"(165, 105, 79)"},{hex:"#8A795D",name:"Shadow",rgb:"(138, 121, 93)"},{hex:"#45CEA2",name:"Shamrock",rgb:"(69, 206, 162)"},{hex:"#FB7EFD",name:"Shocking Pink",rgb:"(251, 126, 253)"},{hex:"#CDC5C2",name:"Silver",rgb:"(205, 197, 194)"},{hex:"#80DAEB",name:"Sky Blue",rgb:"(128, 218, 235)"},{hex:"#ECEABE",name:"Spring Green",rgb:"(236, 234, 190)"},{hex:"#FFCF48",name:"Sunglow",rgb:"(255, 207, 72)"},{hex:"#FD5E53",name:"Sunset Orange",rgb:"(253, 94, 83)"},{hex:"#FAA76C",name:"Tan",rgb:"(250, 167, 108)"},{hex:"#18A7B5",name:"Teal Blue",rgb:"(24, 167, 181)"},{hex:"#EBC7DF",name:"Thistle",rgb:"(235, 199, 223)"},{hex:"#FC89AC",name:"Tickle Me Pink",rgb:"(252, 137, 172)"},{hex:"#DBD7D2",name:"Timberwolf",rgb:"(219, 215, 210)"},{hex:"#17806D",name:"Tropical Rain Forest",rgb:"(23, 128, 109)"},{hex:"#DEAA88",name:"Tumbleweed",rgb:"(222, 170, 136)"},{hex:"#77DDE7",name:"Turquoise Blue",rgb:"(119, 221, 231)"},{hex:"#FFFF66",name:"Unmellow Yellow",rgb:"(255, 255, 102)"},{hex:"#926EAE",name:"Violet (Purple)",rgb:"(146, 110, 174)"},{hex:"#324AB2",name:"Violet Blue",rgb:"(50, 74, 178)"},{hex:"#F75394",name:"Violet Red",rgb:"(247, 83, 148)"},{hex:"#FFA089",name:"Vivid Tangerine",rgb:"(255, 160, 137)"},{hex:"#8F509D",name:"Vivid Violet",rgb:"(143, 80, 157)"},{hex:"#FFFFFF",name:"White",rgb:"(255, 255, 255)"},{hex:"#A2ADD0",name:"Wild Blue Yonder",rgb:"(162, 173, 208)"},{hex:"#FF43A4",name:"Wild Strawberry",rgb:"(255, 67, 164)"},{hex:"#FC6C85",name:"Wild Watermelon",rgb:"(252, 108, 133)"},{hex:"#CDA4DE",name:"Wisteria",rgb:"(205, 164, 222)"},{hex:"#FCE883",name:"Yellow",rgb:"(252, 232, 131)"},{hex:"#C5E384",name:"Yellow Green",rgb:"(197, 227, 132)"},{hex:"#FFAE42",name:"Yellow Orange",rgb:"(255, 174, 66)"}];return a=new(n.Model.extend({componentToHex:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},rgbStringToRgb:function(e){var t=/rgb\s?\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3})\)/.exec(e.toLowerCase()),n=null;return t&&!((n={r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3])}).r>255||n.r<0||n.g>255||n.g<0||n.b>255||n.b<0)?n:null},rgbToHex:function(e){return"#"+this.componentToHex(e.r)+this.componentToHex(e.g)+this.componentToHex(e.b)},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},rgbToHslArray:function(e){var t,n,i,r=e.r/255,o=e.g/255,a=e.b/255,s=Math.max(r,o,a),l=Math.min(r,o,a),c=(s+l)/2;if(s==l)t=n=0;else{switch(i=s-l,n=c>.5?i/(2-s-l):i/(s+l),s){case r:t=(o-a)/i+(o<a?6:0);break;case o:t=(a-r)/i+2;break;case a:t=(r-o)/i+4}t/=6}return new Array(360*t,100*n,100*c)},rgbToHsl:function(e){var t=this.rgbToHslArray(e),n={};return n.h=t[0]/360,n.s=t[1]/100,n.l=t[2]/100,n},hslToRgb:function(e,t,n){function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var r,o,a;if(0===t)r=o=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=i(l,s,e+1/3),o=i(l,s,e),a=i(l,s,e-1/3)}return{r:Math.round(255*r),g:Math.round(255*o),b:Math.round(255*a)}},getSaturation:function(e){return this.rgbToHsl(this.hexToRgb(e)).s},colorDistance:function(e,t){var n=0,i=[1,.5,.8];"string"==typeof e&&(e=this.hexToRgb(e)),"string"==typeof t&&(t=this.hexToRgb(t)),e=this.rgbToHslArray(e),t=this.rgbToHslArray(t);for(var r=0;r<e.length;r++)n+=(e[r]-t[r])*(e[r]-t[r])*i[r];return Math.abs(n)},basicColors:function(){return s},nameThatColor:function(e){var n,i;return t.each(l,function(t){var r=this.hexToRgb(t.hex),o=this.colorDistance(r,e);(!i||o<n)&&(n=o,i=t)}.bind(this)),i.name},shadeColor:function(e,t){if(!e)return null;var n=this.hexToRgb(e),i=n.r,r=n.g,o=n.b;return i=parseInt(i*(100+t)/100,10),r=(r=parseInt(r*(100+t)/100,10))<255?r:255,o=(o=parseInt(o*(100+t)/100,10))<255?o:255,"#"+(1===(i=i<255?i:255).toString(16).length?"0"+i.toString(16):i.toString(16))+(1===r.toString(16).length?"0"+r.toString(16):r.toString(16))+(1===o.toString(16).length?"0"+o.toString(16):o.toString(16))},rgbFromHexOrName:function(t){var n,i,r=t.trim().toLowerCase(),o=e("body").find(".color-utils-color-checker");o.length?o.removeClass("hide"):(o=e('<div class="color-utils-color-checker" style="position:absolute;left:-10000px;top:-10000px"></div>'),e("body").append(o));var a=o.css("backgroundColor","rgba(45,98,37,0.42)").css("backgroundColor"),s=o.css("backgroundColor",r).css("backgroundColor");return s===a?"#"!==r.charAt(0)?(s=o.css("backgroundColor","#"+r).css("backgroundColor"))!==a&&(i=!0):(s=o.css("backgroundColor",r.substring(1)).css("backgroundColor"))!==a&&(i=!0):i=!0,o.addClass("hide"),i&&(n=this.rgbStringToRgb(s)),n},colorsFromImage:function(e,n,r){return e.then(function(e){if(!e)return i.resolve([]);var a=i.defer();try{var s=new Image,l=new o;s.onload=function(){var e=l.getPalette(s,n,1,this,r),i=[];t.each(e,function(e,t){i.push("#"+this.componentToHex(e[0])+this.componentToHex(e[1])+this.componentToHex(e[2]))}.bind(this)),a.resolve(i)}.bind(this),s.onerror=function(e){a.resolve([])}.bind(this),s.src=e}catch(e){a.resolve([])}return a.promise}.bind(this))},drawImageWithShadow:function(e){var t=document.createElement("canvas");t.width=e.width+60,t.height=e.height+60;var n=t.getContext("2d"),i=document.createElement("canvas");i.width=e.width+60,i.height=e.height+60;var o=i.getContext("2d");n.drawImage(e,15,15),o.shadowOffsetX=0,o.shadowOffsetY=0,o.shadowColor="rgba(0, 0, 0, 0.5)",o.shadowBlur=15,o.drawImage(t,15,15);var a=i.toDataURL("image/png"),s=r(a);return URL.createObjectURL(s)},getImageWithShadow:function(e){return e.then(function(e){if(!e)return i.resolve([]);var t=i.defer(),n=new Image;return n.onload=function(){var e=this.drawImageWithShadow(n);t.resolve(e)}.bind(this),n.src=e,t.promise}.bind(this))},lighten:function(e,t){return(e=this.rgbToHsl(e)).l*=t,e.l=Math.max(0,Math.min(e.l,1)),this.hslToRgb(e.h,e.s,e.l)},maxContrast:function(e,n){var i,r=this.getLuminosity(e),o=0;return t.each(n,function(e){var t=this.getLuminosity(e),n=Math.abs(r-t);(!i||n>o)&&(i=e,o=n)}.bind(this)),i},getLuminosity:function(e){var t=this.getLinearFromSrgbComponent(e.r),n=this.getLinearFromSrgbComponent(e.g),i=this.getLinearFromSrgbComponent(e.b),r=Math.round(.2126*t+.7252*n+.0722*i);return Math.min(r,255)},getLightness:function(e){return this.rgbToHsl(e).l},isSameColor:function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b},isBlack:function(e){return this.isSameColor(e,{r:0,g:0,b:0})},isWhite:function(e){return this.isSameColor(e,{r:255,g:255,b:255})},getLinearFromSrgbComponent:function(e){return 255*(e=(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))},_createTintsBetween:function(e,t,n){if(t<n&&t>=0&&n<e.length)for(var i=e[t],r=e[n],o=n-t,a=(r.r-i.r)/o,s=(r.g-i.g)/o,l=(r.b-i.b)/o,c=0,d=t+1;d<n;d++)++c,e[d]={r:Math.round(i.r+a*c),g:Math.round(i.g+s*c),b:Math.round(i.b+l*c)}},_generateTintEntries:function(e,t){return this._createTintsBetween(e,0,t),this._createTintsBetween(e,t,e.length-1),e},generateTintSpectrum:function(e,t){var n=(t=t||{}).numTints||7,i=n-1,r=this.getLuminosity(e),o=Math.floor(n/2),a=[];a[0]={r:0,g:0,b:0},a[i]={r:255,g:255,b:255};var s,l=Math.round(r/255*(n-1));if(t.centerBaseColor&&(l=Math.floor(n/2)),"number"==typeof t.tintIndex&&(l=t.tintIndex),t.allowBWOverride||(0!==l||this.isBlack(e)||(l=1),l!==i||this.isWhite(e)||--l),t.centerLightColors&&l>o&&1-r/255>.05&&(l=o),t.shiftLightColors&&l>o&&l<i)for(var c=i-l,d=i-1,u=255*("number"==typeof t.maxPercentage?t.maxPercentage:.8),h=255-r,p=r+h*(d-l)/c;(p<u||d===l)&&l!=o&&!((p=r+h*(d-(s=l-1))/(c=i-s))>u);)l=s;if(t.shiftDarkColors&&l<o&&l>0)for(var f=255*("number"==typeof t.minPercentage?t.minPercentage:.1),g=r-0,m=g*(1/l);(m>f||1===l)&&l!=o&&!((m=g*(1/(s=l+1)))<f);)l=s;return a[l]=e,this._generateTintEntries(a,l)},getColorIndex:function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];if(this.isSameColor(r,t))return i}return-1},deriveDarkestFromPrimary:function(e,t,n,i){var r=t.slice(0),o=this.getColorIndex(r,e);n/=100,i/=100;var a=Math.round(255*n),s=Math.max(e.r,e.g,e.b);if(0!==o&&s>a){if(1===o)s>Math.round(255*(n+i))&&(r[2]=r[1],o=2);if(o>1){var l=a/s;r[1]={r:Math.round(e.r*l),g:Math.round(e.g*l),b:Math.round(e.b*l),a:1},this._createTintsBetween(r,1,o),this._createTintsBetween(r,o,r.length-1)}}return r},calcShints:function(e){var t=this.generateTintSpectrum(e,{numTints:7,shiftLightColors:!0,shiftDarkColors:!0,minPercentage:.1,maxPercentage:.8});return this.deriveDarkestFromPrimary(e,t,10,5)}})),window.ColorUtils=a,a}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(25),n(22)],void 0===(r=function(e,t,n,i,r,o){"use strict";var a=n.Model.extend({defaults:{}});return r.extend({events:{"click .x-close-btn":"_handleCancel","click .mrvl-overlay-bg":"_handleCancel"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.model=new a,t.extend(this,n.Events),this.update(e),this.model.on("change:location",this.positionDialog())},onHide:function(){this.cleanupForHide()},cleanupForHide:function(){this.$el.find(".x-close-btn").removeClass("hide"),this.$el.find(".buttons").removeClass("hide"),this._ignoreCloseActions=!1},unclosable:function(){this.$el.find(".x-close-btn").addClass("hide"),this.$el.find(".buttons").addClass("hide"),this._ignoreCloseActions=!0},update:function(e){e&&t.extend(this,e),this.location&&this.model.set({location:this.location},{silent:!0})},move:function(e){this.model.set({location:e},{silent:!0}),this.positionDialog()},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===o.DOM_VK_ESCAPE&&this._handleCancel()},contentModified:function(){this.positionDialog(!0)},positionDialog:function(e){var t=this.$el.find(".mrvl-overlay-shell"),n=this.model.get("location");if(t.length>0&&n){var i=this.$el.hasClass("hide");i&&this.$el.removeClass("hide");var r,o,a,s,l,c,d,u=t.outerWidth(),h=t.outerHeight(),p=0,f=t.find(".pointer"),g=f.length&&f.outerWidth();f.length&&f.outerHeight();for(a=t.parent();!p&&a.length;){if("absolute"===(l=a.css("position"))||"relative"===l||"fixed"===l){p=a.width(),s=a.height();break}a=a.parent()}n.x>=p/2?(o=n.left-u/2-7,d=!0):(o=n.left+n.width+u/2+7,d=!1),r=n.y-.75*h,r=Math.max(5,Math.min(r,s-h-5)),t.css({top:r+"px",left:o+"px",position:"absolute"});var m=t.offset().top-a.offset().top;if(i&&this.$el.addClass("hide"),f&&(c=n.y-m-6,c=Math.max(4,Math.min(h-12,c)),f.css("top",c+"px"),d?f.css({right:.5*-g,left:"auto"}).addClass("on-right"):f.css({left:.5*-g,right:"auto"}).removeClass("on-right"),this.zoomInOut)){var v=(d?u+.5*g:.5*-g)+"px"+" "+(c+"px");t.css("transform-origin",v)}}},assignFieldsByClass:function(){if(this.fields)for(var e in this.fields)this.fields.hasOwnProperty(e)&&this.$el.find("."+e).text(this.fields[e])},render:function(){return this.$el&&this.$el.length&&(this.zoomInOut?(this.$el.addClass("zoomInOut"),this.transitionObjectSelector=".mrvl-overlay-shell"):(this.$el.removeClass("zoomInOut"),this.transitionObjectSelector=null),this.template?(this.$el.html(this.template.toString()),this.assignFieldsByClass(),this.location&&this.positionDialog()):this.$el.html("<p>This class needs to be extended or have an el and template defined to be useful</p>")),this.afterRenderCallback&&this.afterRenderCallback(this.$el),this}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(5),n(7)],void 0===(r=function(e,t,n,i,r,o){"use strict";return new(n.Model.extend({_isQualified:function(){var e=i.defer();return e.resolve(!0),e.promise},_getProperties:function(e){return e=e||{}},brandSetupEvent:function(e,t){return this._genericBrandEvent(e,t,"BrandSetup")},_genericBrandEvent:function(e,t,n){var r=i.defer();return o.trackEvent(e,this._getProperties(t),n,(function(){r.resolve()})),r.promise},choseNoLogoInSetup:function(){this.brandSetupEvent("editedElementBrandSetup").then(function(){o.trackEvent("setLogoBrandSetup",this._getProperties(),"BrandSetup",function(){o.trackEvent("noLogoBrandSetup",this._getProperties(),"BrandSetup")}.bind(this))}.bind(this)).done()},addedLogoInSetup:function(e){this.brandSetupEvent("editedElementBrandSetup").then(function(){o.trackEvent("setLogoBrandSetup",this._getProperties(),"BrandSetup",function(){o.trackEvent("uploadedLogoBrandSetup",this._getProperties({logoFileType:e}),"BrandSetup")}.bind(this))}.bind(this)).done()},choseColorInSetup:function(){this.brandSetupEvent("editedElementBrandSetup").then(function(){o.trackEvent("setColorBrandSetup",this._getProperties(),"BrandSetup")}.bind(this)).done()},choseFontsInSetup:function(e){this.brandSetupEvent("editedElementBrandSetup").then(function(){o.trackEvent("setFontsBrandSetup",this._getProperties(e),"BrandSetup")}.bind(this)).done()},viewedBrandSetup:function(e){o.trackEvent("viewedBrandSetup",this._getProperties(),"BrandSetup",function(){e>0?o.trackEvent("viewedPartialBrandSetup",this._getProperties({brandSetupProgress:e}),"BrandSetup"):this._isQualified().then(function(e){e?o.trackEvent("viewedQualifiedBrandSetup",this._getProperties(),"BrandSetup"):o.trackEvent("viewedUnqualifiedBrandSetup",this._getProperties(),"BrandSetup")}.bind(this)).done()}.bind(this))},launchedFontPicker:function(e,t){return this._genericBrandEvent("launchedFontPicker",this._getProperties(e),t)},canceledFontPicker:function(e,t){return this._genericBrandEvent("canceledFontPicker",this._getProperties(e),t)},pickedFont:function(e,t){return this._genericBrandEvent("pickedFont",this._getProperties(e),t)},clickedAddCustomFont:function(e,t){return this._genericBrandEvent("clickedAddCustomFont",this._getProperties(e),t)},uploadedCustomFont:function(e,t){return this._genericBrandEvent("uploadedFont",this._getProperties(e),t)},failedUploadingCustomFont:function(e,t){return this._genericBrandEvent("failedUploadingFont",this._getProperties(e),t)},deletedCustomFont:function(e,t){return this._genericBrandEvent("deletedUploadedFont",this._getProperties(e),t)},brandManagerEvent:function(e,t){return this._genericBrandEvent(e,t||{},"BrandManager")},editedElementBrandManager:function(e,t,n){return this._genericBrandEvent("editedElementBrandManager",{},"BrandManager").then(function(){return this._genericBrandEvent(e,{},"BrandManager").then(function(){return this._genericBrandEvent(t,n,"BrandManager")}.bind(this))}.bind(this))},clickedDeleteBrand:function(){return this._genericBrandEvent("clickedDeleteBrand",{},"BrandManager")},clickedBrandUpdate:function(){return this._genericBrandEvent("clickedBrandUpdate",{},"BrandManager")},deletedBrand:function(){return this._genericBrandEvent("deletedBrand",{},"BrandManager")}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(36)],void 0===(r=function(e,t,i,r){"use strict";var o={},a=0,s=function(){--a<0&&(a=0),a>0?e("html").addClass("ac-wf-loading"):e("html").removeClass("ac-wf-loading")};return{loadFont:function(l,c){var d,u,h,p;return++a>0?e("html").addClass("ac-wf-loading"):e("html").removeClass("ac-wf-loading"),d=t.isString(l)?l:(u=l).lookupKey(),o[d]?o[d]:(p=u?i.resolve(u):r.getFontRegistry().then((function(e){if(e.facesByKey[d]){var t=i.defer();return Promise.resolve().then(function(i){var r=new(n(99));r.setFontDataFromSparkFontDefn(e.facesByKey[d]),t.resolve(r)}.bind(null,n)).catch(n.oe),t.promise}var r="loadFont failed find face defn for "+d;return console.warn(r),i.reject(r)})),h=i.defer(),o[d]=h.promise,p.then(function(e){return"spark-provided"!==e.source()||r.USE_SPARKFONTS_PREVIEW_API&&e.tkPreviewId()?"tk-synced"===e.source()||"spark-provided"===e.source()?r.inject().then((function(){setTimeout((function(){h.resolve(e)}),3e3);var t={id:e.tkPreviewId(),variations:e.tkVariation(),css_name:e.cssName(),name:e.friendlyName()};return window.TypekitPreview.load([t],{active:function(){h.resolve(e)},inactive:function(e,t){var n="error loading typekit preview font "+e+" and "+t;console.warn(n),h.reject(n)},fontinactive:function(e,t){var n="error-inactive loading typekit preview font "+e+" and "+t;console.warn(n),h.reject(n)}}),!0})):"user-uploaded"==e.source()?this._loadUploadedFont(e).then((function(){h.resolve(e)}),(function(e){h.reject(e)})):(console.warn("ATTEMPT TO LOAD FONT FACE WITH UNKNOW SOURCE "+e.source()),void h.reject("Unknown font source")):r.inject().then((function(){h.resolve(e)}))}.bind(this)).done(),h.promise.finally(s),o[d])},_loadUploadedFont:function(n){var r,o="cls-"+n.cssName().replace(" ","-").replace(/\"/g,"")+"-"+n.fontWeight()+"-"+n.fontStyle(),a=document.head.querySelectorAll("style."+o)[0],s="font-css-"+o;if(!a&&(a=this._createStyleBlock(o),window.localStorage)){try{r=window.localStorage.getItem(s)}catch(e){}var l,c;return r?(a.innerHTML=r,l=i.defer(),(c=e("<div class='font-loading-measure'>AbcdeFghijklmnoPqrstuvWxyz</div>")).css({position:"fixed",visibility:"hidden",top:"-1000px",left:"-1000px","font-size":"30px","font-style":n.fontStyle(),"font-weight":n.fontWeight()}),e("body").append(c),n.$css(c),t.delay((function(){c.remove(),l.resolve()}),500),l.promise):this._loadFontAjax(n).then((function(r){return n.getCSSFontFaceAsync(!0,r).then(function(r){a.innerHTML=r;try{window.localStorage.setItem(s,r)}catch(e){}return l=i.defer(),(c=e("<div class='font-loading-measure'>AbcdeFghijklmnoPqrstuvWxyz</div>")).css({position:"fixed",visibility:"hidden",top:"-1000px",left:"-1000px","font-size":"30px","font-style":n.fontStyle(),"font-weight":n.fontWeight()}),e("body").append(c),n.$css(c),t.delay((function(){c.remove(),l.resolve()}),500),l.promise}.bind(this))}),function(e){return n.getCSSFontFaceAsync().then(function(e){a.innerHTML=e}.bind(this))}.bind(this))}return i.resolve()},_loadFontAjax:function(t){var n=i.defer();return t.getHrefAsync(void 0,!0).then(function(t){e.ajax({url:t,type:"GET",mimeType:"text/plain; charset=x-user-defined"}).done(function(e,t,i){var r="data:"+(i.getResponseHeader("content-type")||"application/x-font-opentype")+";base64,"+this._base64Encode(e);n.resolve(r)}.bind(this)).fail((function(e,t,i){console.warn("ERROR loading font file: ",i),n.reject(i)}))}.bind(this)).catch((function(e){n.reject(e)})).done(),n.promise},_base64Encode:function(e){for(var t,n,i,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",a=0,s=e.length;a<s;){if(t=255&e.charCodeAt(a++),a==s){o+=r.charAt(t>>2),o+=r.charAt((3&t)<<4),o+="==";break}if(n=e.charCodeAt(a++),a==s){o+=r.charAt(t>>2),o+=r.charAt((3&t)<<4|(240&n)>>4),o+=r.charAt((15&n)<<2),o+="=";break}i=e.charCodeAt(a++),o+=r.charAt(t>>2),o+=r.charAt((3&t)<<4|(240&n)>>4),o+=r.charAt((15&n)<<2|(192&i)>>6),o+=r.charAt(63&i)}return o},_createStyleBlock:function(e){var t=document.createElement("style");return t.type="text/css",t.className=e,document.getElementsByTagName("head")[0].appendChild(t),t}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(2),n(3)],void 0===(r=function(e,t){"use strict";return new(e.Model.extend({getPublisher:function(){return this._publisher?t.resolve(this._publisher):(this._getPublisherDefer||(this._getPublisherDefer=t.defer(),this.getUtils().then(function(e){n.e("mui-cppublisher").then(function(t){var i=n(880);this._publisher=new i({cpUtils:e}),this._getPublisherDefer.resolve(this._publisher)}.bind(this).bind(null,n)).catch(n.oe)}.bind(this))),this._getPublisherDefer.promise)},getUtils:function(){return this._cpUtils?t.resolve(this._cpUtils):(this._getUtilsDefer||(this._getUtilsDefer=t.defer(),this.getPubController().then(function(e){n.e("mui-cputils").then(function(e){var t=n(881);this._cpUtils=new t({pubController:this._pubController}),this._getUtilsDefer.resolve(this._cpUtils)}.bind(this).bind(null,n)).catch(n.oe)}.bind(this))),this._getUtilsDefer.promise)},getPubController:function(){return this._pubController?t.resolve(this._pubController):(this._getPubControllerDefer||(this._getPubControllerDefer=t.defer(),n.e("mui-pubcontroller").then(function(e){this._pubController=n(882),this._getPubControllerDefer.resolve(this._pubController)}.bind(this).bind(null,n)).catch(n.oe)),this._getPubControllerDefer.promise)}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(4)],void 0===(r=function(e,t,n,i,r){"use strict";return new(n.Model.extend({clientId:r.instagramClientId,authenticate:function(e){this.accessToken=e},_request:function(t,n){var r=i.defer(),o=e.ajax({url:"https://api.instagram.com/v1/"+t,dataType:"jsonp",type:"GET",data:e.extend({},{access_token:this.accessToken},n)});return o.done((function(e,t,n){r.resolve(e,t,n)})),o.fail((function(e,n,i){console.warn("Instagram API: access to url "+t+" failed =  ",n),r.reject(e,n,i)})),r.promise},userProfile:function(e,t){return t=t||"self",this._request("users/"+t,e)},fetchRecentUserMedia:function(e,t){return t=t||"self",this._request("users/"+t+"/media/recent",e)}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1)],void 0===(r=function(e){var t,n="virtualMouseBindings",i="virtualTouchID",r="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),o="clientX clientY pageX pageY screenX screenY".split(" "),a=e.event.mouseHooks?e.event.mouseHooks.props:[],s=e.event.props.concat(a),l={},c=0,d=0,u=0,h=!1,p=[],f=!1,g=!1,m="addEventListener"in document,v=e(document),b=1,y=0;function w(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function k(t){for(var i,r,o={};t;){for(r in i=e.data(t,n))i[r]&&(o[r]=o.hasVirtualBinding=!0);t=t.parentNode}return o}function x(){g=!0}function _(){g=!1}function S(){C(),c=setTimeout((function(){c=0,y=0,p.length=0,f=!1,x()}),e.vmouse.resetTimerDuration)}function C(){c&&(clearTimeout(c),c=0)}function T(t,i,r){var a;return(r&&r[t]||!r&&function(t,i){for(var r;t;){if((r=e.data(t,n))&&(!i||r[i]))return t;t=t.parentNode}return null}(i.target,t))&&(a=function(t,n){var i,r,a,l,c,d,u,h,p,f=t.type;if((t=e.Event(t)).type=n,i=t.originalEvent,r=e.event.props,f.search(/^(mouse|click)/)>-1&&(r=s),i)for(u=r.length;u;)t[l=r[--u]]=i[l];if(f.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==f.search(/^touch/)&&(f=(a=w(i)).touches,c=a.changedTouches,d=f&&f.length?f[0]:c&&c.length?c[0]:void 0))for(h=0,p=o.length;h<p;h++)t[l=o[h]]=d[l];return t}(i,t),e(i.target).trigger(a)),a}function M(t){var n=e.data(t.target,i);if(!(f||y&&y===n)){var r=T("v"+t.type,t);r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function I(t){var n,r,o=w(t).touches;if(o&&1===o.length&&(r=k(n=t.target)).hasVirtualBinding){y=b++,e.data(n,i,y),C(),_(),h=!1;var a=w(t).touches[0];d=a.pageX,u=a.pageY,T("vmouseover",t,r),T("vmousedown",t,r)}}function D(e){g||(h||T("vmousecancel",e,k(e.target)),h=!0,S())}function P(t){if(!g){var n=w(t).touches[0],i=h,r=e.vmouse.moveDistanceThreshold,o=k(t.target);(h=h||Math.abs(n.pageX-d)>r||Math.abs(n.pageY-u)>r)&&!i&&T("vmousecancel",t,o),T("vmousemove",t,o),S()}}function A(e){if(!g){x();var t,n=k(e.target);if(T("vmouseup",e,n),!h){var i=T("vclick",e,n);i&&i.isDefaultPrevented()&&(t=w(e).changedTouches[0],p.push({touchID:y,x:t.clientX,y:t.clientY}),f=!0)}T("vmouseout",e,n),h=!1,S()}}function E(t){var i,r=e.data(t,n);if(r)for(i in r)if(r[i])return!0;return!1}function L(){}e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};var N=!1;try{var F=Object.defineProperty({},"passive",{get:function(){N={passive:!1}}});window.addEventListener("test",F,F),window.removeEventListener("test",F,F)}catch(e){N=!1}function R(t){var i=t.substr(1);return{setup:function(r,o){E(this)||e.data(this,n,{}),e.data(this,n)[t]=!0,l[t]=(l[t]||0)+1,1===l[t]&&v.bind(i,M),e(this).bind(i,L),m&&(l.touchstart=(l.touchstart||0)+1,1===l.touchstart&&(document.addEventListener("touchstart",I,N),document.addEventListener("touchend",A,N),document.addEventListener("touchmove",P,N),v.bind("scroll",D)))},teardown:function(r,o){--l[t],l[t]||v.unbind(i,M),m&&(--l.touchstart,l.touchstart||(document.removeEventListener("touchstart",I,N),document.removeEventListener("touchend",A,N),document.removeEventListener("touchmove",P,N),v.unbind("scroll",D)));var a=e(this),s=e.data(this,n);s&&(s[t]=!1),a.unbind(i,L),E(this)||a.removeData(n)}}}for(var O=0;O<r.length;O++)e.event.special[r[O]]=R(r[O]);m&&document.addEventListener("click",(function(n){var r,o,a,s,l,c=p.length,d=n.target;if(c)for(r=n.clientX,o=n.clientY,t=e.vmouse.clickDistanceThreshold,a=d;a;){for(s=0;s<c;s++)if(l=p[s],0,a===d&&Math.abs(l.x-r)<t&&Math.abs(l.y-o)<t||e.data(a,i)===l.touchID)return n.preventDefault(),void n.stopPropagation();a=a.parentNode}}),!0)}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(407),n(2),n(3),n(556),n(25),n(12),n(6),n(5),n(398),n(413),n(408),n(15),n(409),n(508),n(295),n(512),n(513),n(36),n(399),n(99),n(514),n(101),n(4),n(8),n(404),n(405),n(561)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u,h,p,f,g,m,v,b,y,w,k,x,_,S,C,T,M,I){"use strict";var D=i.Model.extend({subgroupName:function(){return this.get("preferred_family_name")},faceName:function(){return this.get("preferred_subfamily_name")},fullName:function(){return this.subgroupName()+" "+this.faceName()},cssName:function(){return y.cssName(this.subgroupName())},isSupportedLanguage:function(){return"ja"!==this.get("default_language")},getAcFontDefn:function(){var e=t.cloneDeep(this.attributes),n=new k;return n.setFontDataFromTypekitSyncInfo(e),n},getChecksum:function(){var e="",n=t.cloneDeep(this.attributes),i=Object.keys(n).sort();return t.each(i,(function(t){var i=n[t];e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(i)})),(new o).update(e).digest("hex")}}),P=i.Collection.extend({model:D,findByVariationId:function(e){return this.models.find((function(t){return t.attributes.id==e}))},getChecksum:function(){var e={},n=this.models.map((function(n){return e[n.get("id")]=n,t.cloneDeep(n.attributes)}));n=t.sortBy(n,"id");var i=t.reduce(n,(function(t,n){return t+(t.length?",":"")+e[n.id].getChecksum()}),"");return(new o).update(i).digest("hex")}});return a.extend({_options:{},events:{"click .font-card-picker-save-btn":"handleSaveBtn","click .js-accordion":"handleAccordion","click .font-face-picker .js-font-face":"handleFacePicked","click .font-body-picker .js-font-face":"handleBodyPicked","click .font-headline-picker .js-font-face":"handleHeadlinePicked","click .font-card-picker-prev-btn":"handlePrevCardButton","click .font-card-picker-next-btn":"handleNextCardButton"},initialize:function(){a.prototype.initialize.call(this),this._reanchor=this._reanchor.bind(this),this.onDocClick=this.onDocClick.bind(this)},_initializeTypekitFonts:function(){this._syncedFonts?(this._lastSelectionsChecksum=this._syncedFonts.getChecksum(),this._renderSyncedFonts(this._syncedFonts),this._awaitSyncedFonts=this._awaitSyncedFonts||r.defer(),this._awaitSyncedFonts.resolve(),this._startPollingForTypekitSelectedList()):this._doFetchTypekitSelectedList().then(function(){this._awaitSyncedFonts=this._awaitSyncedFonts||r.defer(),this._awaitSyncedFonts.resolve(),this._startPollingForTypekitSelectedList()}.bind(this)).catch((function(e){marvel.logger.error("Error polling for TK synced fonts",e)}))},_startPollingForTypekitSelectedList:function(){this._fetchTypekitSelectedListIntervalId&&clearTimeout(this._fetchTypekitSelectedListIntervalId),this._pollForTypekitSelectedList()},_pollForTypekitSelectedList:function(){this._fetchTypekitSelectedListIntervalId=setTimeout(function(){this._doFetchTypekitSelectedList().then(function(){this._pollForTypekitSelectedList()}.bind(this)).catch((function(e){marvel.logger.error("Error polling for TK synced fonts",e)}))}.bind(this),6e3)},_doFetchTypekitSelectedList:function(){return _(f.getSelections,{maxAttempts:3,delay:300,loggerFn:marvel.logger.info.bind(marvel.logger),logMessagePrefix:"[FontPickerDialogV2:_doFetchTylekitSelectedList] getSelections:"})().then(function(e){var t=new P(e);this._syncedFonts=t;var n=t.getChecksum();n!==this._lastSelectionsChecksum&&(this._renderSyncedFonts(t),this._lastSelectionsChecksum=n)}.bind(this))},launch:function(e){this.configure(e),this.showOverlay()},chooseCustomFont:function(e){setTimeout(function(){this._addCustomFontClicked()}.bind(this),100)},autoPickLocalFiles:function(e){setTimeout(function(){this._addCustomFontClicked(void 0,e)}.bind(this),100)},showOverlay:function(){d.launchedFontPicker({pickerMode:this._options.mode},this._options.launchContext),a.prototype.showOverlay.call(this)},configure:function(t){this.setAuthoringContext(t.authoringContext),t.$el&&this.setElement(t.$el),t.$anchor&&(this.anchor$=e(t.$anchor)),t.$reference&&(this.reference$=e(t.$reference)),t.offsetX=t.offsetX||0,t.offsetY="number"==typeof t.offsetY?t.offsetY:-66,t.brandFonts=!!t.brandFonts,this._options=t,t.value?this.setValue(t.value):this._value=void 0},setAuthoringContext:function(e){this._ac=e},_assignRoleAndSave:function(e){var n,i,r=this._options.mode,o=this._ac;switch(r){case"card":case"headline":var a=e.getFeel?e.getFeel():"user-uploaded";return n=new T(void 0,{feel:a}),e.each((function(e){var i;if(t.each(e._uniqueRoles,(function(e){var t=o.getFontWithRole(e);t&&t.isSparkFont()&&(i=t)})),i&&(e.isDefn()?i.setLookupKey(e.lookupKey()):o.removeFont(i,!0)),e.isDefn()){if(!i){var r=e;i=o.acquireSparkFont(r.lookupKey()),o.setUniqueRolesSync("all-fonts",i.getData(),r._uniqueRoles),t.each(r._genericRoles,i.addRole.bind(i))}}else i=e,o.setUniqueRolesSync("all-fonts",i.getData(),i._uniqueRoles);n.add(i)})),n;case"face":return e.isDefn()?(i=o.acquireSparkFont(e.lookupKey())).addRole("secondary-font"):i=e,i;case"body":return e}},_onSelect:function(e,t){this._stayOpen()&&this.applyValue(),this._options.onSelect&&"function"==typeof this._options.onSelect&&(this._stayOpen()&&this._options.assignRoleAndSave&&(e=this._assignRoleAndSave(e)),this._options.onSelect(e,t))},_onFinish:function(e,t){d.pickedFont({pickerMode:this._options.mode},this._options.launchContext),this._options.onFinish&&"function"==typeof this._options.onFinish&&(this._options.assignRoleAndSave&&(e=this._assignRoleAndSave(e)),this._options.onFinish(e,t)),this._lastSelectionsChecksum=void 0,this._fetchTypekitSelectedListIntervalId&&(clearTimeout(this._fetchTypekitSelectedListIntervalId),this._fetchTypekitSelectedListIntervalId=void 0),this.setValue(void 0)},_goToCard:function(e){var t=this.fontCardStack$.find(".font-card");t.addClass("hide"),t.eq(e).removeClass("hide")},handlePrevCardButton:function(e){var t=this.fontCardStack$.find(".font-card"),n=t.length,i=this.fontCardStack$.find(".font-card:not(.hide)"),r=t.index(i)-1;return r<0&&(r=n-1),this._goToCard(r),!1},handleNextCardButton:function(e){var t=this.fontCardStack$.find(".font-card"),n=t.length,i=this.fontCardStack$.find(".font-card:not(.hide)"),r=t.index(i)+1;return r>=n&&(r=0),this._goToCard(r),!1},_stayOpen:function(){return this._options.stayOpen&&"face"===this._options.mode},_checkMissingFontStatus:function(e){return this._ac&&!this._ac.belongsToUser()&&e.isCustomFont()&&!e.isInstallable()?y.checkProvidedFonts([e.getTOUAName()]).then((function(t){if(t[e.getTOUAName()])return r.resolve(!0);var n=r.defer();return window.marvel.events.trigger("missing-brand-fonts-ux",{missingFonts:[e],defer:n}),n.promise})):r.resolve(!0)},handleFacePicked:function(t){var n=e(t.currentTarget).data("value");if(this._checkMissingFontStatus(n).then(function(e){e&&(this.setValue(n),this._onSelect(n),this._stayOpen()||(this._onFinish(n),this.close()))}.bind(this)).done(),this._stayOpen())return!1},handleBodyPicked:function(n){var i=e(n.currentTarget).data("value"),r=!0;if(t.each(["is-body-font","is-body-font-italic","is-body-font-bold","is-body-font-bold-italic"],(function(e){if(!i.getFontWithRole(e))return r=!1,!1})),r)this._onSelect(i),this._onFinish(i),this.close();else{var o=i.getPropFromFirst("subgroupName"),a=this._ac.guessCustomBodyFontSet(o),s=!1;if(a&&(s=!a.find(function(e){return 400==e.fontWeight()&&"normal"==e.fontStyle()}.bind(this))),this.customFontManager.setFontSubgroup(o),s)this.customFontManager.setMode("completeBodyFontSetMissingNormal"),this.customFontManager.willTriggerThemeUpdates=this._options.willTriggerThemeUpdates,this.customFontManager.getUsageOfAssetsMessage=this._options.getUsageOfAssetsMessage,this.customFontManager.showOverlay(),this.customFontManager.onFinish=function(e,t){this._onSelect(e,t),this._onFinish(e,t),this.close()}.bind(this);else{var l=this._ac.establishCustomBodyFontSet(o);this._ac.save(),this._onSelect(l),this._onFinish(l),this.close()}}},handleHeadlinePicked:function(e){return this.handleFacePicked(e)},handleAccordion:function(n){n.preventDefault();var i,r,o=e(n.currentTarget);(o.hasClass("is-transitioning")||(o.addClass("is-transitioning"),this.$el.find(".font-picker-subgroup-accordion-v2-content").one("transitionend webkitTransitionEnd MSTransitionEnd otransitionend",(function(){o.removeClass("is-transitioning")})),o.toggleClass("active")),this._options.stayOpen)&&(o.hasClass("active")&&(t.each(o.find(".font-picker-subgroup-accordion-v2-content .js-font-face"),(function(t){t=e(t),i||(i=t),t.hasClass("active")&&(r=!0,i=t)})),r||this.handleFacePicked({currentTarget:i})))},setValue:function(e){if("string"==typeof e)if("new"==e)this.value=void 0;else{var n=e,i=this.registry;if(!i)return void(this._pendingValue=n);if(!this._options||!this._options.mode)return void(this._pendingValue=n);if("body"==this._options.mode){var r=i.bodyFonts;t.each(r,(function(e){t.find(e.faces,(function(e){return e.lookupKey==n}))&&(n=e.faces[0].lookupKey)}))}var o=i.facesByKey[n],a=new k;a.setFontDataFromSparkFontDefn(o),this.value=a}else this.value=void 0===e?void 0:e;this.applyValue()},applyValue:function(n){if(!this.value&&this._pendingValue&&this.setValue(this._pendingValue),this.value){this._pendingValue=void 0,this.$el.find(".js-font-face").removeClass("active"),this.$el.find(".js-accordion").removeClass("selected");var i,r="is-body-font";if("headline"!==this._options.mode&&"card"!==this._options.mode||(r="headline-font"),this.value.length?this.value instanceof T?i=this.value.getFontWithRole(r):(i=t.find(this.value,(function(e){return"function"==typeof e.hasRole?e.hasRole(r):e.role===r})))&&i.acFontDefn&&(i=i.acFontDefn):i=this.value,i){var o=this.$el.find(".js-lkup-"+i.uiKey());o.length||(o=this.$el.find(".js-lkup-"+i.lookupKey()));var a=o.parents(".js-accordion");o.addClass("active"),a.length>0&&(a.addClass("active"),a.addClass("selected")),n&&t.each(o,(function(t){var n,i,r=(t=e(t)).parents(".js-sp-font-picker"),o=t.parents(".js-accordion"),a=t.offset(),s=r.offset(),l=-10;o.length>0?(i=(n=o.offset()).top+o.height(),a.top-n.top>r.height()-30?l+=a.top-s.top:l+=n.top-s.top):(l+=a.top-s.top,i=a.top+t.height()),i-s.top>r.height()-30&&r.scrollTop(l-8)}))}return i}},handleSaveBtn:function(e){e.preventDefault();var t=this.fontCardStack$.find(".font-card:not(.hide)").data("value");t&&this._checkMissingFontStatus(t).then(function(e){e&&(this._onSelect(t),this._onFinish(t))}.bind(this)).done()},close:function(e){this.hideOverlay()},setOption:function(e,t){this._options=this._options||{},this._options[e]=t},setAnchor:function(t){t&&(this.anchor$=e(t)),this._reanchor()},_getBoundingClientRect:function(e){e.length&&(e=e[0]);var t=this._options.offsetViewport,n=e.getBoundingClientRect();if(t){var i=t.x,r=t.y;return{left:n.left+i,right:n.right+i,top:n.top+r,bottom:n.bottom+r,width:n.width,height:n.height,x:n.x+i,y:n.x+r}}return n},_reanchor:function(){if(this.anchor$){var t,n,i,r,o,a,s=this.anchor$&&this.anchor$.length?this.anchor$[0]:this.anchor$,l=this._options.offsetY||0,c=this._options.offsetX||0,d=this._getBoundingClientRect(s),u=d.top,h=d.left,p=d.bottom,f=d.right,g=d.width,m=d.height,v=d.x,b=d.y,y=this.shell$.height(),w=this.shell$.width(),k=e(window).width(),x=e(window).height(),_=!1,S=!1,C=!1,T=!1,M=0;(d={top:u,left:h,bottom:p,right:f,width:g,height:m,x:v,y:b}).top+=l,d.bottom+=l,d.left+=c,d.right+=c;var I=d.top+d.height/2-y/2;k>d.right+w+50&&d.top+d.height/2+y/2<x&&(C=!0,I<0&&(M=Math.abs(I)+50)),0<d.left-(w+50)&&d.top+d.height/2+y/2<x&&d.top-d.height/2-y/2>0&&(_=!0),0<d.top-(y+50)&&(S=!0),x>d.bottom+y+50&&(T=!0),this.shell$.removeClass("pop-top"),this.shell$.removeClass("pop-right"),this.shell$.removeClass("pop-left"),this.shell$.removeClass("pop-bottom"),"dropdown"==this._options.behavior?a="pop-bottom":this._options.anchorTop?T?a="pop-bottom":_?a="pop-left":C?a="pop-right":S?a="pop-top":console.warn("font picker does not fit anywhere"):this._options.anchorVert?a=T?"pop-bottom":S?"pop-top":C?"pop-right":"pop-left":C?a="pop-right":_?a="pop-left":T?a="pop-bottom":S?a="pop-top":console.warn("font picker does not fit anywhere"),this.carrot$.css("left",""),this.shell$.addClass(a);var D=this.reference$&&this.reference$.length?this.reference$[0]:this.reference$;switch(a){case"pop-left":n=d.left-w-20,i=Math.max(d.top+d.height/2-y/2-20,8),M=0;break;case"pop-right":n=d.right+15,i=d.top+d.height/2-y/2,0!==M&&(70,this.carrot$.css("top","70px"));break;case"pop-top":D?((t=this._getBoundingClientRect(D)).top+l,n=(o=t.left+l)+(t.width-w)/2-7,r=d.left+d.width/2-n-this.carrot$.width()/2,this.carrot$.css("left",r+"px")):n=d.left+d.width/2-30,i=d.top-y-40,M=0;break;case"pop-bottom":D?((t=this._getBoundingClientRect(D)).top+l,o=t.left+c,"dropdown"==this._options.behavior?n=o+(t.width-w)/2:(n=o+(t.width-w)/2-7,r=d.left+d.width/2-n-this.carrot$.width()/2,this.carrot$.css("left",r+"px"))):n="dropdown"==this._options.behavior?d.left:d.left+d.width/2-30;var P=x-(d.bottom+y+10);i=P<0?d.bottom+10+P-70:d.bottom+10,M=0}this.shell$.css({left:n+"px",top:i+M+"px"})}},_autoPairBodyFonts:function(e,n,i){var r=t.find(e.bodyFonts,(function(e){return"PT Sans"===e.subgroupName}));t.each(r.faces,(function(t){t.acFontDefn||(t.acFontDefn=new k,t.acFontDefn.setFontDataFromSparkFontDefn(e.facesByKey[t.lookupKey])),i.push(t)}))},_prepareFontCollectionForCustomHeadline:function(e,n){var i=new T([],{feel:"user-uploaded"});return this._ac.setUniqueRolesSync("all-fonts",e.getData(),["headline-font"]),i.add(e,{uniqueRoles:["headline-font"]}),t.each([{name:"Proxima Nova n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a6"},{name:"Proxima Nova n7",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056"},{name:"Proxima Nova i4",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"349cdb88287c79301e46f20cbfc11397b7"},{name:"Proxima Nova i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467"}],function(e){var t=e.role,n=e.secondaryRole,r=e.lookupKey,o=this._ac.getFontByLookupKey(r);o||(o=this._ac.acquireSparkFont(r)),this._ac.setUniqueRolesSync("all-fonts",o.getData(),[t]),o.addRole(n),i.add(o)}.bind(this)),i},setLogoFont:function(e,t,n){if(t){var i=this.$el.find(".font-picker-logo-fonts");y.inject().then(function(r){var o=this._injectTypekitFont(e,i,t,r);n&&(n=n+" in "+t.family.name,o.attr("title",t.family.name),o.text(n)),i.removeClass("hide")}.bind(this)).done()}},_renderSyncedFonts:function(t){var n=this.$el.find(".font-picker-synced-fonts-list");n.find(".js-font-face").each((function(){var n=this.className.replace(/^.*js-lkup-([^\s]*).*$/i,"$1").replace(/^tk-/,"");t.findByVariationId(n)||(e(this).remove(),window.marvel.events.trigger("typekit-synced-font-deactivated",{variationId:n}))})),t.each(function(e){this._renderSyncedFont(e)}.bind(this)),n.find(".js-accordion").each((function(){var t=e(this).find(".content");t.length&&t.children().length||e(this).remove()}))},_acquireSyncedFontAccordion:function(t){var n=this.$el.find(".font-picker-synced-fonts-list"),i=t.subgroupName(),r=t.cssName(),o=n.find(".js-subgroup-"+r);if(!o.length){var a=t.getAcFontDefn();o=e('<div class="font-picker-subgroup-accordion-v2 js-accordion js-subgroup-'+r+'"></div>');var s=e('<div class="font-picker-subgroup-accordion-v2-label"><div class="font-loading-spinner"></div>'+i+"</div>"),l=e('<div class="font-picker-subgroup-accordion-v2-content content"></div>');o.append(s),o.append(l),s.addClass("font-loading"),w.loadFont(a,this._ac).then(function(e){e.$css(s),s.css({"font-weight":400,"font-style":"normal"}),s.removeClass("font-loading")}.bind(this)),n.append(o)}return o},_renderSyncedFont:function(t){if(t.isSupportedLanguage()){var n=this._acquireSyncedFontAccordion(t),i=this.$el.find(".font-picker-synced-fonts-list"),r=t.getAcFontDefn(),o="js-lkup-"+r.uiKey();if(!i.find("."+o).length){var a;a=n&&n.length?t.faceName():t.fullName();var s=e('<div class="font-picker-face font-picker-synced-font js-font-face">'+a+"</div>");return s.prepend(e('<div class="font-loading-spinner"></div>')),s.addClass("font-loading"),s.addClass(o),s.data("value",r),w.loadFont(r,this._ac).then(function(e){e.$css(s),s.removeClass("font-loading")}.bind(this)).done(),n&&n.length?n.find(".content").prepend(s):i.prepend(s),s}}},_injectBrandFonts:function(e,t,n){var i;this._options.mode;i=t?this._ac.getCustomFontSubgroups(!1,!0):this._ac.getFontSubgroups(!1,!0),this._renderFontSubgroups(i,e,null,n,this._ac)},_injectUploadedFonts:function(e,t){return this._injectBrandFonts(e,!0,t)},_eachSorted:function(e,n,i){var r,o,a;i?(o=i.getFontWithRole("headline-font"),a=i.getFontWithRole("body-font"),r=t.sortBy(Object.keys(e),(function(e,t){if(o){if(e===o.subgroupName())return-1;if(t===o.subgroupName())return 1}if(a){if(e===a.subgroupName())return-1;if(t===a.subgroupName())return 1}return e<t?-1:t<e?1:0}))):r=Object.keys(e).sort(),t.each(r,function(t){n(e[t],t)}.bind(this))},_injectUploadedBodyFonts:function(e){this._injectBrandBodyFonts(e,!0)},_injectBrandBodyFonts:function(t,n){var i;i=n?this._ac.getCustomFontSubgroups(!1,!0):this._ac.getFontSubgroups(!0,!0),t.html(""),this._eachSorted(i,function(n,i){n.getPropFromFirst("cssName");n.loadFonts();var r=e('<div class="font-picker-face-v2 font-picker-custom-font js-font-face"></div>'),o=e('<span class="cfm-font-exclamation"></span>'),a=e('<span class="cfm-font-edit"></span>');r.data("value",n);var s=n.find((function(e){return e.hasRole&&e.hasRole("is-body-font")})),l=n.at(0);if(n.getPropFromFirst("isCustomFont")&&!s){var c=this._ac.guessCustomBodyFontSet(i);s=c.find((function(e){return 400==e.fontWeight()&&"normal"==e.fontStyle()})),l=c.at(0)||n.at(0)}var d=s||l;this._cssForPicker$(d,r,i),s?(r.addClass("js-lkup-"+s.uiKey()),s.isCustomFont()&&(r.append(a),a.on("click",function(e){return e.preventDefault(),e.stopPropagation(),this.customFontManager.setFontSubgroup(i),this.customFontManager.setMode("editBodyFontSet"),this.customFontManager.willTriggerThemeUpdates=this._options.willTriggerThemeUpdates,this.customFontManager.getUsageOfAssetsMessage=this._options.getUsageOfAssetsMessage,this.customFontManager.showOverlay(),this.customFontManager.onFinish=function(e,t){this._onSelect(e,t),this._onFinish(e,t),this.close()}.bind(this),!1}.bind(this)))):r.append(o),t.append(r)}.bind(this))},_installCustomFont:function(e){e.getCSSFontFaceAsync().then((function(e){var t=document.createElement("style");t.type="text/css",t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)})).catch((function(t){console.warn("Font picker dialog unexpected error installing font",{err:t,font:e})}))},_installCustomFontWithNameAndURL:function(e,t){var n,i=e.replace(" ",""),r=document.createElement("style");return r.type="text/css",n="@font-face { font-family: "+i+'; src: url("'+t+'"); }',r.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(r),i},_renderAdobeFonts:function(t,n){n.append("<h3>"+C.getString("font-picker-adobe-fonts-label")+"</h3>");var i=e('<div class="font-picker-synced-fonts-list"></div>');n.append(i),this._options.typekitSyncEnabled&&this._initializeTypekitFonts();var r=e('<div class="font-picker-manage-synced-btn">'+C.getString("font-picker-browse-adobe-fonts-label")+"</div>");n.append(r),r.on("click",function(e){c.setUserFlag("hide-premium-font-onboarding",!0),this.shell$.removeClass("font-onboarding"),s.showConfirm(C.getString("font-picker-browse-adobe-fonts-dialog-title"),C.getString("font-picker-browse-adobe-fonts-dialog-body"),{okText:C.getString("font-picker-browse-adobe-fonts-dialog-ok"),hideCancelButton:!0,hideCloseButton:!0,okHandler:function(){window.open(S.adobeFontsBrowse,"_blank")}.bind(this)}).done()}.bind(this))},_renderCustomFonts:function(t,n){if(c.hasFeature("enable-custom-fonts")){var i=e('<div class="font-picker-uploaded-fonts"></div>'),r=c.hasFeature("entitle-brand-kit");if(c.hasFeature("enable-custom-fonts-typekit-logofont")){var o=e('<div class="font-picker-logo-fonts hide"><h3>Logo font</h3></div>');n.append(o)}if(!this._options.hideCustomFonts){if(this._options.brandFonts&&(r||this._options.allowCustomUnentitled)){var a=e("<h3></h3>");this._ac.activated()?a.text(this._ac.getName()):a.text(C.getString("font-picker-your-uploaded-fonts")),n.append(a),this._injectBrandFonts(i,!1,t)}else this._options.hideCustomFonts||n.append("<h3>"+C.getString("font-picker-your-uploaded-fonts")+"</h3>"),(r||this._options.allowCustomUnentitled)&&this._injectUploadedFonts(i,t);n.append(i)}var s=!this._ac||this._ac.belongsToUser();if(!this._options.hideAddCustomFontsButton&&s){var l=e('<div class="font-picker-add-font-btn">'+C.getString("font-picker-add-your-fonts-button")+"</div>");n.append(l),l.on("click",function(e){return this._addCustomFontClicked(t),!1}.bind(this)),this._fileDropSetup||(this._fileDropSetup=!0,M({el:this.$el},function(e,t){e&&window.marvel.logger.warn("error while dropping font files - before font picker detected any errors",e),this.autoPickLocalFiles(t)}.bind(this)))}}},_addCustomFontClicked:function(e,t){var n;e=e||this.registry,n="face"==this._options.mode?".font-face-picker .font-picker-uploaded-fonts":"body"==this._options.mode?".font-body-picker .font-picker-uploaded-fonts":".font-headline-picker .font-picker-uploaded-fonts";var i=this.$el.find(n),r=this.$el.find(".font-picker-add-font-btn"),o=c.hasFeature("entitle-brand-kit");if(d.clickedAddCustomFont({},this._options.launchContext),!o&&!this._options.allowCustomUnentitled)return this.close(),window.marvel.events.trigger("add-custom-fonts-attempted",{ele$:r}),!1;this.customFontManager.setMode("addFonts"),this.customFontManager.render(),"headline"!=this._options.mode&&"face"!=this._options.mode||(this.customFontManager.willTriggerThemeUpdates=this._options.willTriggerThemeUpdates,this.customFontManager.getUsageOfAssetsMessage=this._options.getUsageOfAssetsMessage),t?this.customFontManager.autoPickLocalFiles(t):this.customFontManager.handleUploadFileClicked(),this.customFontManager.onFinish=function(t,n){if(this._options.multiSelectOnUpload&&"face"==this._options.mode)this._onSelect(t,n),this._onFinish(t,n);else if(this._options.selectOnUpload&&t&&1===t.length){var r=t.at(0);if("headline"===this._options.mode){var o=this._prepareFontCollectionForCustomHeadline(r,e);this._onSelect(o,n),this._onFinish(o,n)}else{if("face"!=this._options.mode)return;this._onSelect(r,n),this._onFinish(r,n)}return void this.close()}"headline"==this._options.mode||"face"==this._options.mode?t.each(function(t){t.isCustomFont()&&this._appendFontFace(t,i,"font-picker-custom-font",e).addClass("active")}.bind(this)):this._injectBrandBodyFonts(i,!1)}.bind(this)},_renderCustomBodyFonts:function(t,n){if(c.hasFeature("enable-custom-fonts")&&!this._options.hideCustomFonts){var i=e('<div class="font-picker-uploaded-fonts"></div>');if(!this._options.hideCustomFonts){if(this._options.brandFonts){var r=e("<h3></h3>");r.text(this._ac.getName()),n.append(r),this._injectBrandBodyFonts(i)}else n.append("<h3>"+C.getString("font-picker-your-uploaded-fonts")+"</h3>"),this._injectUploadedBodyFonts(i);n.append(i)}if(!this._options.hideAddCustomFontsButton){var o=e('<div class="font-picker-add-font-btn">'+C.getString("font-picker-add-your-fonts-button")+"</div>");n.append(o),o.on("click",function(e){return c.setUserFlag("hide-premium-font-onboarding",!0),this.shell$.removeClass("font-onboarding"),this._addCustomFontClicked(t),!1}.bind(this)),this._fileDropSetup||(this._fileDropSetup=!0,M({el:this.$el},function(e,t){e&&window.marvel.logger.warn("error while dropping font files - before font picker detected any errors",e),this.autoPickLocalFiles(t)}.bind(this)))}}},_cssForPicker$:function(e,t,n,i){var r=function(){e.$loadFontCSS?e.$loadFontCSS(t,13,!1):(w.loadFont(e),e.$css(t)),n?t.text(e.subgroupName()):t.text(e.faceName()),i&&t.text(e.friendlyName())};e.$cssRendition?e.$cssRendition(t,r,n&&!i,i):e.$loadFontCSS?e.$loadFontCSS(t,13,!1):r()},_appendFontFace:function(t,n,i,r,o){var a,s,l,c=this._options.mode,d=(t.friendlyName(),t.cssName(),y.cssName(t.subgroupName())+(t.isDefn()?"-spark":"-brand")),u=e('<div class="font-picker-face-v2 js-font-face js-subgroup-'+d+'"></div>'),h=n.find(".js-accordion.js-subgroup-"+d),p=!1;if(h.length)p=!0,a=h.find(".font-picker-subgroup-accordion-v2-label"),s=h.find(".font-picker-subgroup-accordion-v2-content");else if((o=o||this._ac.getFontSubgroup(t.subgroupName()))&&o.length>1){var f=n.find(".js-font-face.js-subgroup-"+d);p=!0,h=e('<div class="font-picker-subgroup-accordion-v2 js-accordion js-subgroup-'+d+'"></div>'),a=e('<div class="font-picker-subgroup-accordion-v2-label"><div class="font-loading-spinner"></div></div>'),s=e('<div class="font-picker-subgroup-accordion-v2-content"></div>'),f.length?(f.replaceWith(h),s.append(f)):n.append(h),h.append(a),h.append(s),this._cssForPicker$(t,a,!0)}(i&&u.addClass(i),u.append(e('<div class="font-loading-spinner"></div>')),"headline"==c)?(!t.isDefn()&&t.isCustomFont()&&(l=this._prepareFontCollectionForCustomHeadline(t,r)),u.data("value",l)):u.data("value",t);return u.addClass("js-lkup-"+t.uiKey()),p?s.append(u):n.append(u),this._cssForPicker$(t,u,!a,!a),h},_renderFontSubgroups:function(e,t,n,i,r){this._options.mode;this._eachSorted(e,function(e,r){e.each(function(r){this._appendFontFace(r,t,n,i,e)}.bind(this))}.bind(this),r)},_renderSparkfontFaces:function(e,n,r){var o={};this._options.suppressSparkfonts||t.each(e.facesByKey,function(e){var t=new k;t.setFontDataFromSparkFontDefn(e,!1);var n=t.subgroupName();o[n]=o[n]||new i.Collection,o[n].add(t)}.bind(this)),this._options.extraFonts&&t.each(this._options.extraFonts,function(e){var t=new k;t.setFontDataFromSparkFontDefn(e,!0,!0);var n=t.subgroupName();o[n]=o[n]||new i.Collection,o[n].add(t)}.bind(this)),r.append("<h3>"+C.getString("font-picker-more-label")+"</h3>"),this._renderFontSubgroups(o,r,"font-picker-custom-font",e)},_renderFacePicker:function(e){var t,n=this.$el.find(".font-face-picker");"face"==this._options.mode&&this.value&&(t=this.value),this._renderCustomFonts(e,n),this._renderSparkfontFaces(e,t,n),this._options.typekitSyncEnabled&&this._renderAdobeFonts(e,n)},_renderCardPicker:function(n){var i,r=this.fontCardStack$,o=0,a=0;"card"==this._options.mode&&this.value&&(i=this.value),t.each(n.cards,function(s,l){t.each(s.fontCards,function(l){if(i){var c=!0;t.each(l.fonts,(function(e,t){var n=i.getFontWithRole(e.role);i&&c&&e.lookupKey==n.lookupKey()||(c=!1)})),c&&(a=o)}var d=new k;d.setFontDataFromSparkFontDefn(n.facesByKey[l.fonts[0].lookupKey]);var u=new k;u.setFontDataFromSparkFontDefn(n.facesByKey[l.fonts[1].lookupKey]);var h=e('<div class="font-card" data-feel="'+s.feel+'"></div>'),p=e('<div class="font-card-headline-font">'+d.friendlyName(!0)+"</div>"),f=e('<div class="font-card-headline-render" style="font-family:'+d.cssName()+"; font-weight: "+d.fontWeight()+"; font-style: "+d.fontStyle()+'">'+C.getString("font-picker-card-picker-headline-label")+"</div>"),g=e('<div class="font-card-body-font">'+u.subgroupName()+"</div>"),m=e('<div class="font-card-body-render"style="font-family:'+u.cssName()+'">'+C.getString("font-picker-card-picker-body-copy")+"</div>");h.append(p),h.append(f),h.append(g),h.append(m);var v=new T([],{feel:s.feel});t.each(l.fonts,(function(e){var t=new k;t.setFontDataFromSparkFontDefn(n.facesByKey[e.lookupKey]),v.add(t,{uniqueRoles:[e.role],genericRoles:[e.secondaryRole]})})),h.data("value",v),r.append(h),o++}.bind(this))}.bind(this)),this._goToCard(a)},_renderBodyPicker:function(n){var i=this.$el.find(".font-body-picker");this._renderCustomBodyFonts(n,i),"body"==this._options.mode&&this.value&&this.value,i.append("<h3>"+C.getString("font-picker-more-label")+"</h3>"),t.each(n.bodyFonts,function(r){var o=r.faces[0].lookupKey,a=e('<div class="font-picker-face-v2 js-font-face js-lkup-'+o+'"></div>');i.append(a);var s=new T;t.each(r.faces,(function(e,t){var i=new k;i.setFontDataFromSparkFontDefn(n.facesByKey[e.lookupKey]),s.add(i,{uniqueRoles:[e.role],genericRoles:[e.secondaryRole]}),0===t&&i.$cssRendition(a,(function(){w.loadFont(i),i.$css(a)}),!0)})),a.data("value",s);var l=s.find((function(e){return e.hasRole?e.hasRole("is-body-font"):e._genericRoles&&t.includes(e._genericRoles,"is-body-font")}));a.addClass("js-lkup-"+l.uiKey())}.bind(this))},_renderHeadlinePicker:function(n){var i=this.$el.find(".font-headline-picker"),r={};this._renderCustomFonts(n,i),t.each(n.cards,function(o,a){t.each(o.fontCards,function(a){a.fonts;var s=t.find(a.fonts,(function(e){return"headline-font"===e.role})),l=new k;l.setFontDataFromSparkFontDefn(n.facesByKey[s.lookupKey]);var c,d=r[o.feel];if(!d){var u=o.feel.charAt(0).toUpperCase()+o.feel.substring(1);d=e("<h3>"+u+"</h3>"),i.append(d),r[o.feel]=d}c=e('<div class="font-picker-face-v2 js-font-face"></div>'),l.$cssRendition(c,(function(){w.loadFont(l),l.$css(c),c.text(l.friendlyName())}),!1,!0),c.addClass("js-lkup-"+l.uiKey()),i.append(c);var h=new T([],{feel:o.feel});t.each(a.fonts,(function(e){var t=new k;t.setFontDataFromSparkFontDefn(n.facesByKey[e.lookupKey]);var i={};e.role&&(i.uniqueRoles=[e.role]),e.secondaryRole&&(i.genericRoles=[e.secondaryRole]),h.add(t,i)})),c.data("value",h)}.bind(this))}.bind(this))},onEscapePressed:function(){d.canceledFontPicker({pickerMode:this._options.mode},this._options.launchContext),this._options.onCancel&&"function"==typeof this._options.onCancel&&this._options.onCancel(),a.prototype.onEscapePressed.call(this)},onDocClick:function(t){var n=e(t.target);n.hasClass("font-picker-shell")||n.closest(".font-picker-shell").length||n.hasClass("cfm-shell")||n.closest(".cfm-shell").length||(this._stayOpen()?(this._onFinish(this.value),this.close()):this.onEscapePressed())},_awaitFontLists:function(){var e=r.defer();return this._awaitSyncedFonts?this._awaitSyncedFonts.promise.then(function(){e.resolve()}.bind(this)):e.resolve(),e.promise},render:function(){this.$el.html(C.mustacheRender(I)),e(window).on("resize",this._reanchor),this.$el.removeClass("hide"),this.$el.css("visibility","hidden"),e("body").addClass("font-picker-wf-loading"),this.shell$=this.$el.find(".font-picker-shell"),this.shell$.addClass("loading"),this.fontCardStack$=this.$el.find(".font-card-picker-stack"),this.carrot$=this.shell$.find(".font-picker-carrot"),c.hasFeature("entitle-brand-kit")&&!c.hasFeature("hide-premium-font-onboarding")&&this.shell$.addClass("font-onboarding"),this.shell$.removeClass("card-mode face-mode body-mode"),this.shell$.addClass(this._options.mode+"-mode"),"dropdown"==this._options.behavior||this._options.hideCarrot?this.shell$.addClass("no-carrot"):this.shell$.removeClass("no-carrot");var t=this._options.overlay;if(t){var n=this.$el;if(n.addClass("act-as-font-picker-overlay"),"object"==typeof t){var i=t.top;i&&n.css("top",i+"px");var r=t.right;r&&n.css("right",r+"px");var o=t.bottom;o&&n.css("bottom",o+"px");var a=t.left;a&&n.css("left",a+"px")}}var s=this._options.width;s?(this.$el.css("width",s+"px"),this.$el.find(".font-face-picker").css("width",s+"px"),this.$el.find(".font-body-picker").css("width",s+"px"),this.$el.find(".font-headline-picker").css("width",s+"px")):(this.$el.css("width",""),this.$el.find(".font-face-picker").css("width",""),this.$el.find(".font-body-picker").css("width",""),this.$el.find(".font-headline-picker").css("width","")),e(".mrvl-main-page").on("click",this.onDocClick),e(".mrvl-main-page").on("dblclick",this.onDocClick),this.applyValue(!0),this._reanchor(),this.$el.css("visibility","visible"),y.getFontRegistry().then(function(t){if(this.registry=t,this.customFontManager&&this.customFontManager.setRegistry(t),this._renderFacePicker(t),this._renderCardPicker(t),this._renderBodyPicker(t),this._renderHeadlinePicker(t),this._ac)for(var n=this._ac.getFontsWithRoles(["body-font","body-font-italic","body-font-bold","body-font-bold-italic"]),i=0,r=n.length;i<r;i++){var o=n[i];if(o.cssName()&&"user-uploaded"==o.source()){o.cssName();break}}this._reanchor(),this.$el.css("visibility","visible"),this._awaitFontLists().then(function(){this.shell$.removeClass("loading"),e("body").removeClass("font-picker-wf-loading"),this.applyValue(!0)}.bind(this))}.bind(this)).done(),this._ac&&(this.customFontManager=new b(this._ac),this.customFontManager.setLaunchContext(this._options.launchContext))},onHide:function(){e(window).off("resize",this._reanchor),e(".mrvl-main-page").off("click",this.onDocClick)},hideCustomFontManager:function(){this.customFontManager&&this.customFontManager.hide()},showCustomFontManagerThemeUpdateProgressBar:function(){this.customFontManager&&this.customFontManager.showThemeUpdateProgressBar()}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2)],void 0===(r=function(e,t,n,i){"use strict";var r;return r=i.Collection.extend({setAC:function(e){this._ac=e},initialize:function(e,t){var n=i.Collection.prototype.initialize.call(this,e,t);return t&&t.feel&&(this._feel=t.feel),n},getFeel:function(){return this._feel},add:function(e,n){var r=i.Collection.prototype.add.call(this,e,n);return t.isArray(e)||(e=[e]),n&&n.genericRoles&&t.each(e,function(e){e._genericRoles=n.genericRoles}.bind(this)),n&&n.uniqueRoles&&t.each(e,function(e){e._uniqueRoles=n.uniqueRoles}.bind(this)),r},getPropFromFirst:function(e){var t=this.at(0);if(t[e])return"function"==typeof t[e]?t[e]():t.getData().getValue(e)},getCSSFontFace:function(e){return this.reduce((function(t,n){return t+n.getCSSFontFace(e)}),"")},loadFonts:function(){var e=new r,n=new r;if(this.each((function(t){t.isSparkFont()?e.add(t):n.add(t)})),e.length&&e.each((function(e){e.loadFont()})),n.length){var i=n.getPropFromFirst("cssName"),o=n.getCSSFontFace(),a=document.createElement("style");a.type="text/css",a.innerHTML=o,a.className=i;var s=document.head.querySelectorAll("style."+i);s&&t.each(s,(function(e){e.parentNode.removeChild(e)})),document.getElementsByTagName("head")[0].appendChild(a)}},getFontWithRole:function(e){return this.find((function(n){return n.hasRole&&"function"==typeof n.hasRole?n.hasRole(e):n._uniqueRoles&&!!t.find(n._uniqueRoles,(function(t){return t==e}))||n._genericRoles&&!!t.find(n._genericRoles,(function(t){return t==e}))}))}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3)],void 0===(r=function(e,t,n){"use strict";return function(n,i){var r=e(n.el),o=n.className||"mrvl-droppable-target",a=n.validTypes;r.on("drag dragstart dragend dragleave drop",(function(e){e.preventDefault(),e.stopPropagation()})),r.on("dragenter dragover",function(e){"dragover"===e.originalEvent.type&&(e.originalEvent.dataTransfer.dropEffect="copy"),r.addClass(o),e.preventDefault(),e.stopPropagation()}.bind(this)),r.on("dragleave dragend drop",function(e){r.removeClass(o),e.originalEvent.dataTransfer.clearData()}.bind(this)),r.on("drop",function(e){e.preventDefault(),e.stopPropagation();var n,r=[],o=!0,s=e.originalEvent.dataTransfer.files;if(a){if(s&&s.length)if(1===s.length&&(o=!1),o)r=t.filter(s,(function(e){return a.indexOf(e.type)>-1}));else{var l=t.find(s,(function(e){return a.indexOf(e.type)>-1}));l&&r.push(l)}}else r=s;r.length?r.length!==s.length?((n=new Error(400)).validFiles=r,n.files=s,i&&"function"==typeof i&&i(n,r)):i&&"function"==typeof i&&i(void 0,r):((n=new Error(400)).validFiles=r,n.files=s,i&&"function"==typeof i&&i(n,r))}.bind(this))}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(25),n(22),n(8),n(502)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return r.extend({events:{},el:".lms-integration-dialog-overlay",getIframeEl:function(){return document.getElementById("lms-integration-iframe")},initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,n.Events)},setAndShowIframe:function(e){this.$el.addClass(e.role),this.showOverlay(),this.getIframeEl().setAttribute("src",e.iframeSrc)},render:function(){return this.$el.html(a.mustacheRender(s)),this}})}.apply(t,i))||(e.exports=r)},function(e,t){!function(){var t=!1,n=/xyz/.test((function(){xyz}))?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(e,i){null==i&&(i=e,e="Class");var r=this.prototype;t=!0;var o=new this;for(var a in t=!1,i)o[a]="function"==typeof i[a]&&"function"==typeof r[a]&&n.test(i[a])?function(e,t){return function(){var n=this._super;this._super=r[e];var i=t.apply(this,arguments);return this._super=n,i}}(a,i[a]):i[a];function s(){!t&&this.init&&this.init.apply(this,arguments)}s.prototype=o;var l=new Function("return function "+e+"(){ }")();return s.prototype.constructor=l,s.extend=arguments.callee,s},e.exports=Class}()},function(e,t,n){var i=n(557);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(6),n(4)],void 0===(r=function(e,t,n,i,r){"use strict";var o=r.adobeFontsApiEndpoint+"/v1/",a=o+"selections",s=o+"visual_search/regions",l=o+"visual_search";function c(e,t,n,r,o){var a,s={url:e,headers:{"X-Api-Key":i.clientId,"Content-Type":"application/json"},success:n,error:function(e){console.warn("ERR",e),o&&"function"==typeof o&&o()}};return t&&(s.type="POST",(a=new FormData).append("image",t,"logofont.png"),s.data=a,s.processData=!1,s.contentType=!1,delete s.headers["Content-Type"]),r&&(s.url+="?"+r),s}var d=50;return{getSelections:function e(t,r){var o=n.defer(),s=c(a,null,(function(n){var i=r?r.concat(n):n;n&&"number"==typeof n.length&&n.length==d?o.resolve(e(t+1,i)):o.resolve(i)}),"page="+(t=t||1)+"&per_page="+d,(function(e){o.reject(e)}));return i.ajax(s),o.promise},findVisualSearchRegion:function(e){var t=n.defer(),r=c(s,e,(function(e){t.resolve(e[0])}));return i.ajax(r),t.promise},visualSearch:function(e,t){var r=n.defer(),o=c(l,e,(function(e){r.resolve(e)}),"x_min="+t.x_min+"&x_max="+t.x_max+"&y_min="+t.y_min+"&y_max="+t.y_max);return i.ajax(o),r.promise}}}.apply(t,i))||(e.exports=r)},function(e,t,n){(function(e){!function(t){"use strict";
/*! https://mths.be/codepointat v0.2.0 by @mathias */var i,r;String.prototype.codePointAt||(i=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}(),r=function(e){if(null==this)throw TypeError();var t=String(this),n=t.length,i=e?Number(e):0;if(i!=i&&(i=0),!(i<0||i>=n)){var r,o=t.charCodeAt(i);return o>=55296&&o<=56319&&n>i+1&&(r=t.charCodeAt(i+1))>=56320&&r<=57343?1024*(o-55296)+r-56320+65536:o}},i?i(String.prototype,"codePointAt",{value:r,configurable:!0,writable:!0}):String.prototype.codePointAt=r);var o=0,a=-3;function s(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function l(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new s,this.dtree=new s}var c=new s,d=new s,u=new Uint8Array(30),h=new Uint16Array(30),p=new Uint8Array(30),f=new Uint16Array(30),g=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m=new s,v=new Uint8Array(320);function b(e,t,n,i){var r,o;for(r=0;r<n;++r)e[r]=0;for(r=0;r<30-n;++r)e[r+n]=r/n|0;for(o=i,r=0;r<30;++r)t[r]=o,o+=1<<e[r]}var y=new Uint16Array(16);function w(e,t,n,i){var r,o;for(r=0;r<16;++r)e.table[r]=0;for(r=0;r<i;++r)e.table[t[n+r]]++;for(e.table[0]=0,o=0,r=0;r<16;++r)y[r]=o,o+=e.table[r];for(r=0;r<i;++r)t[n+r]&&(e.trans[y[t[n+r]]++]=r)}function k(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function x(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var i=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,i+n}function _(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=0,i=0,r=0,o=e.tag;do{i=2*i+(1&o),o>>>=1,++r,n+=t.table[r],i-=t.table[r]}while(i>=0);return e.tag=o,e.bitcount-=r,t.trans[n+i]}function S(e,t,n){var i,r,o,a,s,l;for(i=x(e,5,257),r=x(e,5,1),o=x(e,4,4),a=0;a<19;++a)v[a]=0;for(a=0;a<o;++a){var c=x(e,3,0);v[g[a]]=c}for(w(m,v,0,19),s=0;s<i+r;){var d=_(e,m);switch(d){case 16:var u=v[s-1];for(l=x(e,2,3);l;--l)v[s++]=u;break;case 17:for(l=x(e,3,3);l;--l)v[s++]=0;break;case 18:for(l=x(e,7,11);l;--l)v[s++]=0;break;default:v[s++]=d}}w(t,v,0,i),w(n,v,i,r)}function C(e,t,n){for(;;){var i,r,a,s,l=_(e,t);if(256===l)return o;if(l<256)e.dest[e.destLen++]=l;else for(i=x(e,u[l-=257],h[l]),r=_(e,n),s=a=e.destLen-x(e,p[r],f[r]);s<a+i;++s)e.dest[e.destLen++]=e.dest[s]}}function T(e){for(var t,n;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return a;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,o}(function(e,t){var n;for(n=0;n<7;++n)e.table[n]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,n=0;n<24;++n)e.trans[n]=256+n;for(n=0;n<144;++n)e.trans[24+n]=n;for(n=0;n<8;++n)e.trans[168+n]=280+n;for(n=0;n<112;++n)e.trans[176+n]=144+n;for(n=0;n<5;++n)t.table[n]=0;for(t.table[5]=32,n=0;n<32;++n)t.trans[n]=n})(c,d),b(u,h,4,3),b(p,f,2,1),u[28]=0,h[28]=258;var M=function(e,t){var n,i,r=new l(e,t);do{switch(n=k(r),x(r,2,0)){case 0:i=T(r);break;case 1:i=C(r,c,d);break;case 2:S(r,r.ltree,r.dtree),i=C(r,r.ltree,r.dtree);break;default:i=a}if(i!==o)throw new Error("Data error")}while(!n);return r.destLen<r.dest.length?"function"==typeof r.dest.slice?r.dest.slice(0,r.destLen):r.dest.subarray(0,r.destLen):r.dest};function I(e,t,n,i,r){return Math.pow(1-r,3)*e+3*Math.pow(1-r,2)*r*t+3*(1-r)*Math.pow(r,2)*n+Math.pow(r,3)*i}function D(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function P(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function A(e){throw new Error(e)}function E(e,t){e||A(t)}D.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},D.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},D.prototype.addX=function(e){this.addPoint(e,null)},D.prototype.addY=function(e){this.addPoint(null,e)},D.prototype.addBezier=function(e,t,n,i,r,o,a,s){var l=[e,t],c=[n,i],d=[r,o],u=[a,s];this.addPoint(e,t),this.addPoint(a,s);for(var h=0;h<=1;h++){var p=6*l[h]-12*c[h]+6*d[h],f=-3*l[h]+9*c[h]-9*d[h]+3*u[h],g=3*c[h]-3*l[h];if(0!==f){var m=Math.pow(p,2)-4*g*f;if(!(m<0)){var v=(-p+Math.sqrt(m))/(2*f);0<v&&v<1&&(0===h&&this.addX(I(l[h],c[h],d[h],u[h],v)),1===h&&this.addY(I(l[h],c[h],d[h],u[h],v)));var b=(-p-Math.sqrt(m))/(2*f);0<b&&b<1&&(0===h&&this.addX(I(l[h],c[h],d[h],u[h],b)),1===h&&this.addY(I(l[h],c[h],d[h],u[h],b)))}}else{if(0===p)continue;var y=-g/p;0<y&&y<1&&(0===h&&this.addX(I(l[h],c[h],d[h],u[h],y)),1===h&&this.addY(I(l[h],c[h],d[h],u[h],y)))}}},D.prototype.addQuad=function(e,t,n,i,r,o){var a=e+2/3*(n-e),s=t+2/3*(i-t),l=a+1/3*(r-e),c=s+1/3*(o-t);this.addBezier(e,t,a,s,l,c,r,o)},P.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},P.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},P.prototype.curveTo=P.prototype.bezierCurveTo=function(e,t,n,i,r,o){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:i,x:r,y:o})},P.prototype.quadTo=P.prototype.quadraticCurveTo=function(e,t,n,i){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:i})},P.prototype.close=P.prototype.closePath=function(){this.commands.push({type:"Z"})},P.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof D){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},P.prototype.getBoundingBox=function(){for(var e=new D,t=0,n=0,i=0,r=0,o=0;o<this.commands.length;o++){var a=this.commands[o];switch(a.type){case"M":e.addPoint(a.x,a.y),t=i=a.x,n=r=a.y;break;case"L":e.addPoint(a.x,a.y),i=a.x,r=a.y;break;case"Q":e.addQuad(i,r,a.x1,a.y1,a.x,a.y),i=a.x,r=a.y;break;case"C":e.addBezier(i,r,a.x1,a.y1,a.x2,a.y2,a.x,a.y),i=a.x,r=a.y;break;case"Z":i=t,r=n;break;default:throw new Error("Unexpected path command "+a.type)}}return e.isEmpty()&&e.addPoint(0,0),e},P.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},P.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function n(){for(var e=arguments,n="",i=0;i<arguments.length;i+=1){var r=e[i];r>=0&&i>0&&(n+=" "),n+=t(r)}return n}e=void 0!==e?e:2;for(var i="",r=0;r<this.commands.length;r+=1){var o=this.commands[r];"M"===o.type?i+="M"+n(o.x,o.y):"L"===o.type?i+="L"+n(o.x,o.y):"C"===o.type?i+="C"+n(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?i+="Q"+n(o.x1,o.y1,o.x,o.y):"Z"===o.type&&(i+="Z")}return i},P.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},P.prototype.toDOMElement=function(e){var t=this.toPathData(e),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),n};var L={fail:A,argument:E,assert:E},N={},F={},R={};function O(e){return function(){return e}}F.BYTE=function(e){return L.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},R.BYTE=O(1),F.CHAR=function(e){return[e.charCodeAt(0)]},R.CHAR=O(1),F.CHARARRAY=function(e){for(var t=[],n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t},R.CHARARRAY=function(e){return e.length},F.USHORT=function(e){return[e>>8&255,255&e]},R.USHORT=O(2),F.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},R.SHORT=O(2),F.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},R.UINT24=O(3),F.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},R.ULONG=O(4),F.LONG=function(e){return e>=2147483648&&(e=-(4294967296-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},R.LONG=O(4),F.FIXED=F.ULONG,R.FIXED=R.ULONG,F.FWORD=F.SHORT,R.FWORD=R.SHORT,F.UFWORD=F.USHORT,R.UFWORD=R.USHORT,F.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},R.LONGDATETIME=O(8),F.TAG=function(e){return L.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},R.TAG=O(4),F.Card8=F.BYTE,R.Card8=R.BYTE,F.Card16=F.USHORT,R.Card16=R.USHORT,F.OffSize=F.BYTE,R.OffSize=R.BYTE,F.SID=F.USHORT,R.SID=R.USHORT,F.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?F.NUMBER16(e):F.NUMBER32(e)},R.NUMBER=function(e){return F.NUMBER(e).length},F.NUMBER16=function(e){return[28,e>>8&255,255&e]},R.NUMBER16=O(3),F.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},R.NUMBER32=O(5),F.REAL=function(e){var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(n){var i=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*i)/i).toString()}for(var r="",o=0,a=t.length;o<a;o+=1){var s=t[o];r+="e"===s?"-"===t[++o]?"c":"b":"."===s?"a":"-"===s?"e":s}for(var l=[30],c=0,d=(r+=1&r.length?"f":"ff").length;c<d;c+=2)l.push(parseInt(r.substr(c,2),16));return l},R.REAL=function(e){return F.REAL(e).length},F.NAME=F.CHARARRAY,R.NAME=R.CHARARRAY,F.STRING=F.CHARARRAY,R.STRING=R.CHARARRAY,N.UTF8=function(e,t,n){for(var i=[],r=n,o=0;o<r;o++,t+=1)i[o]=e.getUint8(t);return String.fromCharCode.apply(null,i)},N.UTF16=function(e,t,n){for(var i=[],r=n/2,o=0;o<r;o++,t+=2)i[o]=e.getUint16(t);return String.fromCharCode.apply(null,i)},F.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var i=e.charCodeAt(n);t[t.length]=i>>8&255,t[t.length]=255&i}return t},R.UTF16=function(e){return 2*e.length};var B={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};N.MACSTRING=function(e,t,n,i){var r=B[i];if(void 0!==r){for(var o="",a=0;a<n;a++){var s=e.getUint8(t+a);o+=s<=127?String.fromCharCode(s):r[127&s]}return o}};var z,U="function"==typeof WeakMap&&new WeakMap;function j(e){return e>=-128&&e<=127}function $(e,t,n){for(var i=0,r=e.length;t<r&&i<64&&0===e[t];)++t,++i;return n.push(128|i-1),t}function H(e,t,n){for(var i=0,r=e.length,o=t;o<r&&i<64;){var a=e[o];if(!j(a))break;if(0===a&&o+1<r&&0===e[o+1])break;++o,++i}n.push(i-1);for(var s=t;s<o;++s)n.push(e[s]+256&255);return o}function V(e,t,n){for(var i=0,r=e.length,o=t;o<r&&i<64;){var a=e[o];if(0===a)break;if(j(a)&&o+1<r&&j(e[o+1]))break;++o,++i}n.push(64|i-1);for(var s=t;s<o;++s){var l=e[s];n.push(l+65536>>8&255,l+256&255)}return o}F.MACSTRING=function(e,t){var n=function(e){if(!z)for(var t in z={},B)z[t]=new String(t);var n=z[e];if(void 0!==n){if(U){var i=U.get(n);if(void 0!==i)return i}var r=B[e];if(void 0!==r){for(var o={},a=0;a<r.length;a++)o[r.charCodeAt(a)]=a+128;return U&&U.set(n,o),o}}}(t);if(void 0!==n){for(var i=[],r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o>=128&&void 0===(o=n[o]))return;i[r]=o}return i}},R.MACSTRING=function(e,t){var n=F.MACSTRING(e,t);return void 0!==n?n.length:0},F.VARDELTAS=function(e){for(var t=0,n=[];t<e.length;){var i=e[t];t=0===i?$(e,t,n):i>=-128&&i<=127?H(e,t,n):V(e,t,n)}return n},F.INDEX=function(e){for(var t=1,n=[t],i=[],r=0;r<e.length;r+=1){var o=F.OBJECT(e[r]);Array.prototype.push.apply(i,o),t+=o.length,n.push(t)}if(0===i.length)return[0,0];for(var a=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,l=[void 0,F.BYTE,F.USHORT,F.UINT24,F.ULONG][s],c=0;c<n.length;c+=1){var d=l(n[c]);Array.prototype.push.apply(a,d)}return Array.prototype.concat(F.Card16(e.length),F.OffSize(s),a,i)},R.INDEX=function(e){return F.INDEX(e).length},F.DICT=function(e){for(var t=[],n=Object.keys(e),i=n.length,r=0;r<i;r+=1){var o=parseInt(n[r],0),a=e[o];t=(t=t.concat(F.OPERAND(a.value,a.type))).concat(F.OPERATOR(o))}return t},R.DICT=function(e){return F.DICT(e).length},F.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},F.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var i=0;i<t.length;i+=1)L.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(F.OPERAND(e[i],t[i]));else if("SID"===t)n=n.concat(F.NUMBER(e));else if("offset"===t)n=n.concat(F.NUMBER32(e));else if("number"===t)n=n.concat(F.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(F.REAL(e))}return n},F.OP=F.BYTE,R.OP=R.BYTE;var G="function"==typeof WeakMap&&new WeakMap;function K(e,t,n){for(var i=0;i<t.length;i+=1){var r=t[i];this[r.name]=r.value}if(this.tableName=e,this.fields=t,n)for(var o=Object.keys(n),a=0;a<o.length;a+=1){var s=o[a],l=n[s];void 0!==this[s]&&(this[s]=l)}}function q(e,t,n){void 0===n&&(n=t.length);var i=new Array(t.length+1);i[0]={name:e+"Count",type:"USHORT",value:n};for(var r=0;r<t.length;r++)i[r+1]={name:e+r,type:"USHORT",value:t[r]};return i}function W(e,t,n){var i=t.length,r=new Array(i+1);r[0]={name:e+"Count",type:"USHORT",value:i};for(var o=0;o<i;o++)r[o+1]={name:e+o,type:"TABLE",value:n(t[o],o)};return r}function Y(e,t,n){var i=t.length,r=[];r[0]={name:e+"Count",type:"USHORT",value:i};for(var o=0;o<i;o++)r=r.concat(n(t[o],o));return r}function Q(e){1===e.format?K.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(q("glyph",e.glyphs))):L.assert(!1,"Can't create coverage table format 2 yet.")}function X(e){K.call(this,"scriptListTable",Y("scriptRecord",e,(function(e,t){var n=e.script,i=n.defaultLangSys;return L.assert(!!i,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new K("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new K("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(q("featureIndex",i.featureIndexes)))}].concat(Y("langSys",n.langSysRecords,(function(e,t){var n=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new K("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(q("featureIndex",n.featureIndexes)))}]}))))}]})))}function Z(e){K.call(this,"featureListTable",Y("featureRecord",e,(function(e,t){var n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new K("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(q("lookupListIndex",n.lookupListIndexes)))}]})))}function J(e,t){K.call(this,"lookupListTable",W("lookup",e,(function(e){var n=t[e.lookupType];return L.assert(!!n,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new K("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(W("subtable",e.subtables,n)))})))}F.CHARSTRING=function(e){if(G){var t=G.get(e);if(void 0!==t)return t}for(var n=[],i=e.length,r=0;r<i;r+=1){var o=e[r];n=n.concat(F[o.type](o.value))}return G&&G.set(e,n),n},R.CHARSTRING=function(e){return F.CHARSTRING(e).length},F.OBJECT=function(e){var t=F[e.type];return L.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},R.OBJECT=function(e){var t=R[e.type];return L.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},F.TABLE=function(e){for(var t=[],n=e.fields.length,i=[],r=[],o=0;o<n;o+=1){var a=e.fields[o],s=F[a.type];L.argument(void 0!==s,"No encoding function for field type "+a.type+" ("+a.name+")");var l=e[a.name];void 0===l&&(l=a.value);var c=s(l);"TABLE"===a.type?(r.push(t.length),t=t.concat([0,0]),i.push(c)):t=t.concat(c)}for(var d=0;d<i.length;d+=1){var u=r[d],h=t.length;L.argument(h<65536,"Table "+e.tableName+" too big."),t[u]=h>>8,t[u+1]=255&h,t=t.concat(i[d])}return t},R.TABLE=function(e){for(var t=0,n=e.fields.length,i=0;i<n;i+=1){var r=e.fields[i],o=R[r.type];L.argument(void 0!==o,"No sizeOf function for field type "+r.type+" ("+r.name+")");var a=e[r.name];void 0===a&&(a=r.value),t+=o(a),"TABLE"===r.type&&(t+=2)}return t},F.RECORD=F.TABLE,R.RECORD=R.TABLE,F.LITERAL=function(e){return e},R.LITERAL=function(e){return e.length},K.prototype.encode=function(){return F.TABLE(this)},K.prototype.sizeOf=function(){return R.TABLE(this)},Q.prototype=Object.create(K.prototype),Q.prototype.constructor=Q,X.prototype=Object.create(K.prototype),X.prototype.constructor=X,Z.prototype=Object.create(K.prototype),Z.prototype.constructor=Z,J.prototype=Object.create(K.prototype),J.prototype.constructor=J;var ee={Table:K,Record:K,Coverage:Q,ScriptList:X,FeatureList:Z,LookupList:J,ushortList:q,tableList:W,recordList:Y};function te(e,t){return e.getUint8(t)}function ne(e,t){return e.getUint16(t,!1)}function ie(e,t){return e.getUint32(t,!1)}function re(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var oe={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ae(e,t){this.data=e,this.offset=t,this.relativeOffset=0}ae.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ae.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ae.prototype.parseCard8=ae.prototype.parseByte,ae.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ae.prototype.parseCard16=ae.prototype.parseUShort,ae.prototype.parseSID=ae.prototype.parseUShort,ae.prototype.parseOffset16=ae.prototype.parseUShort,ae.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ae.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},ae.prototype.parseULong=function(){var e=ie(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ae.prototype.parseOffset32=ae.prototype.parseULong,ae.prototype.parseFixed=function(){var e=re(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ae.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,i="";this.relativeOffset+=e;for(var r=0;r<e;r++)i+=String.fromCharCode(t.getUint8(n+r));return i},ae.prototype.parseTag=function(){return this.parseString(4)},ae.prototype.parseLongDateTime=function(){var e=ie(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},ae.prototype.parseVersion=function(e){var t=ne(this.data,this.offset+this.relativeOffset),n=ne(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+n/e/10},ae.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=oe[e]*t},ae.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),n=this.data,i=this.offset+this.relativeOffset,r=0;r<e;r++)t[r]=n.getUint32(i),i+=4;return this.relativeOffset+=4*e,t},ae.prototype.parseOffset16List=ae.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),n=this.data,i=this.offset+this.relativeOffset,r=0;r<e;r++)t[r]=n.getUint16(i),i+=2;return this.relativeOffset+=2*e,t},ae.prototype.parseShortList=function(e){for(var t=new Array(e),n=this.data,i=this.offset+this.relativeOffset,r=0;r<e;r++)t[r]=n.getInt16(i),i+=2;return this.relativeOffset+=2*e,t},ae.prototype.parseByteList=function(e){for(var t=new Array(e),n=this.data,i=this.offset+this.relativeOffset,r=0;r<e;r++)t[r]=n.getUint8(i++);return this.relativeOffset+=e,t},ae.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),i=0;i<e;i++)n[i]=t.call(this);return n},ae.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),i=0;i<e;i++)n[i]=t.call(this);return n},ae.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),i=Object.keys(t),r=0;r<e;r++){for(var o={},a=0;a<i.length;a++){var s=i[a],l=t[s];o[s]=l.call(this)}n[r]=o}return n},ae.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),i=Object.keys(t),r=0;r<e;r++){for(var o={},a=0;a<i.length;a++){var s=i[a],l=t[s];o[s]=l.call(this)}n[r]=o}return n},ae.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var r=t[i],o=e[r];n[r]=o.call(this)}return n},ae.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},ae.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),n=new Array(t),i=0;i<t;i++)n[i]=this.parseValueRecord(e);return n},ae.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new ae(this.data,this.offset+t).parseStruct(e)},ae.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new ae(this.data,this.offset+t).parseStruct(e)},ae.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),n=t.length,i=this.relativeOffset,r=new Array(n),o=0;o<n;o++){var a=t[o];if(0!==a)if(this.relativeOffset=a,e){for(var s=this.parseOffset16List(),l=new Array(s.length),c=0;c<s.length;c++)this.relativeOffset=a+s[c],l[c]=e.call(this);r[o]=l}else r[o]=this.parseUShortList();else r[o]=void 0}return this.relativeOffset=i,r},ae.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(n)};if(2===t){for(var i=new Array(n),r=0;r<n;r++)i[r]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:i}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},ae.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:ae.uShort,end:ae.uShort,classId:ae.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},ae.list=function(e,t){return function(){return this.parseList(e,t)}},ae.list32=function(e,t){return function(){return this.parseList32(e,t)}},ae.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},ae.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},ae.pointer=function(e){return function(){return this.parsePointer(e)}},ae.pointer32=function(e){return function(){return this.parsePointer32(e)}},ae.tag=ae.prototype.parseTag,ae.byte=ae.prototype.parseByte,ae.uShort=ae.offset16=ae.prototype.parseUShort,ae.uShortList=ae.prototype.parseUShortList,ae.uLong=ae.offset32=ae.prototype.parseULong,ae.uLongList=ae.prototype.parseULongList,ae.struct=ae.prototype.parseStruct,ae.coverage=ae.prototype.parseCoverage,ae.classDef=ae.prototype.parseClassDef;var se={reserved:ae.uShort,reqFeatureIndex:ae.uShort,featureIndexes:ae.uShortList};ae.prototype.parseScriptList=function(){return this.parsePointer(ae.recordList({tag:ae.tag,script:ae.pointer({defaultLangSys:ae.pointer(se),langSysRecords:ae.recordList({tag:ae.tag,langSys:ae.pointer(se)})})}))||[]},ae.prototype.parseFeatureList=function(){return this.parsePointer(ae.recordList({tag:ae.tag,feature:ae.pointer({featureParams:ae.offset16,lookupListIndexes:ae.uShortList})}))||[]},ae.prototype.parseLookupList=function(e){return this.parsePointer(ae.list(ae.pointer((function(){var t=this.parseUShort();L.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var n=this.parseUShort(),i=16&n;return{lookupType:t,lookupFlag:n,subtables:this.parseList(ae.pointer(e[t])),markFilteringSet:i?this.parseUShort():void 0}}))))||[]},ae.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return L.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ae.offset32,featureTableSubstitutionOffset:ae.offset32})}))||[]};var le={getByte:te,getCard8:te,getUShort:ne,getCard16:ne,getShort:function(e,t){return e.getInt16(t,!1)},getULong:ie,getFixed:re,getTag:function(e,t){for(var n="",i=t;i<t+4;i+=1)n+=String.fromCharCode(e.getInt8(i));return n},getOffset:function(e,t,n){for(var i=0,r=0;r<n;r+=1)i<<=8,i+=e.getUint8(t+r);return i},getBytes:function(e,t,n){for(var i=[],r=t;r<n;r+=1)i.push(e.getUint8(r));return i},bytesToString:function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t},Parser:ae};function ce(e,t,n){e.segments.push({end:t,start:t,delta:-(t-n),offset:0,glyphIndex:n})}var de={parse:function(e,t){var n={};n.version=le.getUShort(e,t),L.argument(0===n.version,"cmap table version should be 0."),n.numTables=le.getUShort(e,t+2);for(var i=-1,r=n.numTables-1;r>=0;r-=1){var o=le.getUShort(e,t+4+8*r),a=le.getUShort(e,t+4+8*r+2);if(3===o&&(0===a||1===a||10===a)){i=le.getULong(e,t+4+8*r+4);break}}if(-1===i)throw new Error("No valid cmap sub-tables found.");var s=new le.Parser(e,t+i);if(n.format=s.parseUShort(),12===n.format)!function(e,t){var n;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=n=t.parseULong(),e.glyphIndexMap={};for(var i=0;i<n;i+=1)for(var r=t.parseULong(),o=t.parseULong(),a=t.parseULong(),s=r;s<=o;s+=1)e.glyphIndexMap[s]=a,a++}(n,s);else{if(4!==n.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");!function(e,t,n,i,r){var o;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=o=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var a=new le.Parser(n,i+r+14),s=new le.Parser(n,i+r+16+2*o),l=new le.Parser(n,i+r+16+4*o),c=new le.Parser(n,i+r+16+6*o),d=i+r+16+8*o,u=0;u<o-1;u+=1)for(var h=void 0,p=a.parseUShort(),f=s.parseUShort(),g=l.parseShort(),m=c.parseUShort(),v=f;v<=p;v+=1)0!==m?(d=c.offset+c.relativeOffset-2,d+=m,d+=2*(v-f),0!==(h=le.getUShort(n,d))&&(h=h+g&65535)):h=v+g&65535,e.glyphIndexMap[v]=h}(n,s,e,t,i)}return n},make:function(e){var t,n=!0;for(t=e.length-1;t>0;t-=1)if(e.get(t).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),n=!1;break}var i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:n?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:n?12:20}];n||(i=i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),i=i.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var r=new ee.Table("cmap",i);for(r.segments=[],t=0;t<e.length;t+=1){for(var o=e.get(t),a=0;a<o.unicodes.length;a+=1)ce(r,o.unicodes[a],t);r.segments=r.segments.sort((function(e,t){return e.start-t.start}))}!function(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}(r);var s=r.segments.length,l=0,c=[],d=[],u=[],h=[],p=[],f=[];for(t=0;t<s;t+=1){var g=r.segments[t];g.end<=65535&&g.start<=65535?(c=c.concat({name:"end_"+t,type:"USHORT",value:g.end}),d=d.concat({name:"start_"+t,type:"USHORT",value:g.start}),u=u.concat({name:"idDelta_"+t,type:"SHORT",value:g.delta}),h=h.concat({name:"idRangeOffset_"+t,type:"USHORT",value:g.offset}),void 0!==g.glyphId&&(p=p.concat({name:"glyph_"+t,type:"USHORT",value:g.glyphId}))):l+=1,n||void 0===g.glyphIndex||(f=(f=(f=f.concat({name:"cmap12Start_"+t,type:"ULONG",value:g.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:g.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:g.glyphIndex}))}if(r.segCountX2=2*(s-l),r.searchRange=2*Math.pow(2,Math.floor(Math.log(s-l)/Math.log(2))),r.entrySelector=Math.log(r.searchRange/2)/Math.log(2),r.rangeShift=r.segCountX2-r.searchRange,r.fields=r.fields.concat(c),r.fields.push({name:"reservedPad",type:"USHORT",value:0}),r.fields=r.fields.concat(d),r.fields=r.fields.concat(u),r.fields=r.fields.concat(h),r.fields=r.fields.concat(p),r.cmap4Length=14+2*c.length+2+2*d.length+2*u.length+2*h.length+2*p.length,!n){var m=16+4*f.length;r.cmap12Offset=20+r.cmap4Length,r.fields=r.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:m},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:f.length/3}]),r.fields=r.fields.concat(f)}return r}},ue=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],he=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],pe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],fe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function ge(e){this.font=e}function me(e){this.cmap=e}function ve(e,t){this.encoding=e,this.charset=t}function be(e){switch(e.version){case 1:this.names=fe.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<fe.length?this.names[t]=fe[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-fe.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var n=0;n<e.numberOfGlyphs;n++)this.names[n]=fe[n+e.glyphNameIndex[n]];break;case 3:default:this.names=[]}}ge.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.font.glyphs;if(n)for(var i=0;i<n.length;i+=1)for(var r=n.get(i),o=0;o<r.unicodes.length;o+=1)if(r.unicodes[o]===t)return i;return null},me.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},ve.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.encoding[t];return this.charset.indexOf(n)},be.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},be.prototype.glyphIndexToName=function(e){return this.names[e]};var ye={line:function(e,t,n,i,r){e.beginPath(),e.moveTo(t,n),e.lineTo(i,r),e.stroke()}};function we(e){this.bindConstructorValues(e)}function ke(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(t){e[n]=t},enumerable:!0,configurable:!0})}function xe(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++)this.glyphs[n]=t[n];this.length=t&&t.length||0}we.prototype.bindConstructorValues=function(e){var t,n;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,n=t||new P,{configurable:!0,get:function(){return"function"==typeof n&&(n=n()),n},set:function(e){n=e}}))},we.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},we.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},we.prototype.getPath=function(e,t,n,i,r){var o,a;e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72,i||(i={});var s=i.xScale,l=i.yScale;if(i.hinting&&r&&r.hinting&&(a=this.path&&r.hinting.exec(this,n)),a)o=r.hinting.getCommands(a),e=Math.round(e),t=Math.round(t),s=l=1;else{o=this.path.commands;var c=1/this.path.unitsPerEm*n;void 0===s&&(s=c),void 0===l&&(l=c)}for(var d=new P,u=0;u<o.length;u+=1){var h=o[u];"M"===h.type?d.moveTo(e+h.x*s,t+-h.y*l):"L"===h.type?d.lineTo(e+h.x*s,t+-h.y*l):"Q"===h.type?d.quadraticCurveTo(e+h.x1*s,t+-h.y1*l,e+h.x*s,t+-h.y*l):"C"===h.type?d.curveTo(e+h.x1*s,t+-h.y1*l,e+h.x2*s,t+-h.y2*l,e+h.x*s,t+-h.y*l):"Z"===h.type&&d.closePath()}return d},we.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var i=this.points[n];t.push(i),i.lastPointOfContour&&(e.push(t),t=[])}return L.argument(0===t.length,"There are still points left in the current contour."),e},we.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],i=0;i<e.length;i+=1){var r=e[i];"Z"!==r.type&&(t.push(r.x),n.push(r.y)),"Q"!==r.type&&"C"!==r.type||(t.push(r.x1),n.push(r.y1)),"C"===r.type&&(t.push(r.x2),n.push(r.y2))}var o={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(o.xMin)||(o.xMin=0),isFinite(o.xMax)||(o.xMax=this.advanceWidth),isFinite(o.yMin)||(o.yMin=0),isFinite(o.yMax)||(o.yMax=0),o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o},we.prototype.draw=function(e,t,n,i,r){this.getPath(t,n,i,r).draw(e)},we.prototype.drawPoints=function(e,t,n,i){function r(t,n,i,r){var o=2*Math.PI;e.beginPath();for(var a=0;a<t.length;a+=1)e.moveTo(n+t[a].x*r,i+t[a].y*r),e.arc(n+t[a].x*r,i+t[a].y*r,2,0,o,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0,i=void 0!==i?i:24;for(var o=1/this.path.unitsPerEm*i,a=[],s=[],l=this.path,c=0;c<l.commands.length;c+=1){var d=l.commands[c];void 0!==d.x&&a.push({x:d.x,y:-d.y}),void 0!==d.x1&&s.push({x:d.x1,y:-d.y1}),void 0!==d.x2&&s.push({x:d.x2,y:-d.y2})}e.fillStyle="blue",r(a,t,n,o),e.fillStyle="red",r(s,t,n,o)},we.prototype.drawMetrics=function(e,t,n,i){var r;t=void 0!==t?t:0,n=void 0!==n?n:0,i=void 0!==i?i:24,r=1/this.path.unitsPerEm*i,e.lineWidth=1,e.strokeStyle="black",ye.line(e,t,-1e4,t,1e4),ye.line(e,-1e4,n,1e4,n);var o=this.xMin||0,a=this.yMin||0,s=this.xMax||0,l=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",ye.line(e,t+o*r,-1e4,t+o*r,1e4),ye.line(e,t+s*r,-1e4,t+s*r,1e4),ye.line(e,-1e4,n+-a*r,1e4,n+-a*r),ye.line(e,-1e4,n+-l*r,1e4,n+-l*r),e.strokeStyle="green",ye.line(e,t+c*r,-1e4,t+c*r,1e4)},xe.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},xe.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var _e={GlyphSet:xe,glyphLoader:function(e,t){return new we({index:t,font:e})},ttfGlyphLoader:function(e,t,n,i,r,o){return function(){var a=new we({index:t,font:e});return a.path=function(){n(a,i,r);var t=o(e.glyphs,a);return t.unitsPerEm=e.unitsPerEm,t},ke(a,"xMin","_xMin"),ke(a,"xMax","_xMax"),ke(a,"yMin","_yMin"),ke(a,"yMax","_yMax"),a}},cffGlyphLoader:function(e,t,n,i){return function(){var r=new we({index:t,font:e});return r.path=function(){var t=n(e,r,i);return t.unitsPerEm=e.unitsPerEm,t},r}}};function Se(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(!Se(e[n],t[n]))return!1;return!0}return!1}function Ce(e){return e.length<1240?107:e.length<33900?1131:32768}function Te(e,t,n){var i,r,o=[],a=[],s=le.getCard16(e,t);if(0!==s){var l=le.getByte(e,t+2);i=t+(s+1)*l+2;for(var c=t+3,d=0;d<s+1;d+=1)o.push(le.getOffset(e,c,l)),c+=l;r=i+o[s]}else r=t+2;for(var u=0;u<o.length-1;u+=1){var h=le.getBytes(e,i+o[u],i+o[u+1]);n&&(h=n(h)),a.push(h)}return{objects:a,startOffset:t,endOffset:r}}function Me(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=e.parseByte(),r=i>>4,o=15&i;if(15===r)break;if(t+=n[r],15===o)break;t+=n[o]}return parseFloat(t)}(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return 256*(t-247)+e.parseByte()+108;if(t>=251&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function Ie(e,t,n){t=void 0!==t?t:0;var i=new le.Parser(e,t),r=[],o=[];for(n=void 0!==n?n:e.length;i.relativeOffset<n;){var a=i.parseByte();a<=21?(12===a&&(a=1200+i.parseByte()),r.push([a,o]),o=[]):o.push(Me(i,a))}return function(e){for(var t={},n=0;n<e.length;n+=1){var i=e[n][0],r=e[n][1],o=void 0;if(o=1===r.length?r[0]:r,t.hasOwnProperty(i)&&!isNaN(t[i]))throw new Error("Object "+t+" already has key "+i);t[i]=o}return t}(r)}function De(e,t){return t=t<=390?ue[t]:e[t-391]}function Pe(e,t,n){for(var i,r={},o=0;o<t.length;o+=1){var a=t[o];if(Array.isArray(a.type)){var s=[];s.length=a.type.length;for(var l=0;l<a.type.length;l++)void 0===(i=void 0!==e[a.op]?e[a.op][l]:void 0)&&(i=void 0!==a.value&&void 0!==a.value[l]?a.value[l]:null),"SID"===a.type[l]&&(i=De(n,i)),s[l]=i;r[a.name]=s}else void 0===(i=e[a.op])&&(i=void 0!==a.value?a.value:null),"SID"===a.type&&(i=De(n,i)),r[a.name]=i}return r}var Ae=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ee=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Le(e,t){return Pe(Ie(e,0,e.byteLength),Ae,t)}function Ne(e,t,n,i){return Pe(Ie(e,t,n),Ee,i)}function Fe(e,t,n,i){for(var r=[],o=0;o<n.length;o+=1){var a=Le(new DataView(new Uint8Array(n[o]).buffer),i);a._subrs=[],a._subrsBias=0;var s=a.private[0],l=a.private[1];if(0!==s&&0!==l){var c=Ne(e,l+t,s,i);if(a._defaultWidthX=c.defaultWidthX,a._nominalWidthX=c.nominalWidthX,0!==c.subrs){var d=Te(e,l+c.subrs+t);a._subrs=d.objects,a._subrsBias=Ce(a._subrs)}a._privateDict=c}r.push(a)}return r}function Re(e,t,n){var i,r,o,a,s,l,c,d,u=new P,h=[],p=0,f=!1,g=!1,m=0,v=0;if(e.isCIDFont){var b=e.tables.cff.topDict._fdSelect[t.index],y=e.tables.cff.topDict._fdArray[b];s=y._subrs,l=y._subrsBias,c=y._defaultWidthX,d=y._nominalWidthX}else s=e.tables.cff.topDict._subrs,l=e.tables.cff.topDict._subrsBias,c=e.tables.cff.topDict._defaultWidthX,d=e.tables.cff.topDict._nominalWidthX;var w=c;function k(e,t){g&&u.closePath(),u.moveTo(e,t),g=!0}function x(){h.length%2!=0&&!f&&(w=h.shift()+d),p+=h.length>>1,h.length=0,f=!0}return function n(c){for(var b,y,_,S,C,T,M,I,D,P,A,E,L=0;L<c.length;){var N=c[L];switch(L+=1,N){case 1:case 3:x();break;case 4:h.length>1&&!f&&(w=h.shift()+d,f=!0),v+=h.pop(),k(m,v);break;case 5:for(;h.length>0;)m+=h.shift(),v+=h.shift(),u.lineTo(m,v);break;case 6:for(;h.length>0&&(m+=h.shift(),u.lineTo(m,v),0!==h.length);)v+=h.shift(),u.lineTo(m,v);break;case 7:for(;h.length>0&&(v+=h.shift(),u.lineTo(m,v),0!==h.length);)m+=h.shift(),u.lineTo(m,v);break;case 8:for(;h.length>0;)i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a+h.shift(),u.curveTo(i,r,o,a,m,v);break;case 10:C=h.pop()+l,(T=s[C])&&n(T);break;case 11:return;case 12:switch(N=c[L],L+=1,N){case 35:i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),M=o+h.shift(),I=a+h.shift(),D=M+h.shift(),P=I+h.shift(),A=D+h.shift(),E=P+h.shift(),m=A+h.shift(),v=E+h.shift(),h.shift(),u.curveTo(i,r,o,a,M,I),u.curveTo(D,P,A,E,m,v);break;case 34:i=m+h.shift(),r=v,o=i+h.shift(),a=r+h.shift(),M=o+h.shift(),I=a,D=M+h.shift(),P=a,A=D+h.shift(),E=v,m=A+h.shift(),u.curveTo(i,r,o,a,M,I),u.curveTo(D,P,A,E,m,v);break;case 36:i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),M=o+h.shift(),I=a,D=M+h.shift(),P=a,A=D+h.shift(),E=P+h.shift(),m=A+h.shift(),u.curveTo(i,r,o,a,M,I),u.curveTo(D,P,A,E,m,v);break;case 37:i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),M=o+h.shift(),I=a+h.shift(),D=M+h.shift(),P=I+h.shift(),A=D+h.shift(),E=P+h.shift(),Math.abs(A-m)>Math.abs(E-v)?m=A+h.shift():v=E+h.shift(),u.curveTo(i,r,o,a,M,I),u.curveTo(D,P,A,E,m,v);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+N),h.length=0}break;case 14:h.length>0&&!f&&(w=h.shift()+d,f=!0),g&&(u.closePath(),g=!1);break;case 18:x();break;case 19:case 20:x(),L+=p+7>>3;break;case 21:h.length>2&&!f&&(w=h.shift()+d,f=!0),v+=h.pop(),k(m+=h.pop(),v);break;case 22:h.length>1&&!f&&(w=h.shift()+d,f=!0),k(m+=h.pop(),v);break;case 23:x();break;case 24:for(;h.length>2;)i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a+h.shift(),u.curveTo(i,r,o,a,m,v);m+=h.shift(),v+=h.shift(),u.lineTo(m,v);break;case 25:for(;h.length>6;)m+=h.shift(),v+=h.shift(),u.lineTo(m,v);i=m+h.shift(),r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a+h.shift(),u.curveTo(i,r,o,a,m,v);break;case 26:for(h.length%2&&(m+=h.shift());h.length>0;)i=m,r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o,v=a+h.shift(),u.curveTo(i,r,o,a,m,v);break;case 27:for(h.length%2&&(v+=h.shift());h.length>0;)i=m+h.shift(),r=v,o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a,u.curveTo(i,r,o,a,m,v);break;case 28:b=c[L],y=c[L+1],h.push((b<<24|y<<16)>>16),L+=2;break;case 29:C=h.pop()+e.gsubrsBias,(T=e.gsubrs[C])&&n(T);break;case 30:for(;h.length>0&&(i=m,r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a+(1===h.length?h.shift():0),u.curveTo(i,r,o,a,m,v),0!==h.length);)i=m+h.shift(),r=v,o=i+h.shift(),a=r+h.shift(),v=a+h.shift(),m=o+(1===h.length?h.shift():0),u.curveTo(i,r,o,a,m,v);break;case 31:for(;h.length>0&&(i=m+h.shift(),r=v,o=i+h.shift(),a=r+h.shift(),v=a+h.shift(),m=o+(1===h.length?h.shift():0),u.curveTo(i,r,o,a,m,v),0!==h.length);)i=m,r=v+h.shift(),o=i+h.shift(),a=r+h.shift(),m=o+h.shift(),v=a+(1===h.length?h.shift():0),u.curveTo(i,r,o,a,m,v);break;default:N<32?console.log("Glyph "+t.index+": unknown operator "+N):N<247?h.push(N-139):N<251?(b=c[L],L+=1,h.push(256*(N-247)+b+108)):N<255?(b=c[L],L+=1,h.push(256*-(N-251)-b-108)):(b=c[L],y=c[L+1],_=c[L+2],S=c[L+3],L+=4,h.push((b<<24|y<<16|_<<8|S)/65536))}}}(n),t.advanceWidth=w,u}function Oe(e,t){var n,i=ue.indexOf(e);return i>=0&&(n=i),(i=t.indexOf(e))>=0?n=i+ue.length:(n=ue.length+t.length,t.push(e)),n}function Be(e,t,n){for(var i={},r=0;r<e.length;r+=1){var o=e[r],a=t[o.name];void 0===a||Se(a,o.value)||("SID"===o.type&&(a=Oe(a,n)),i[o.op]={name:o.name,type:o.type,value:a})}return i}function ze(e,t){var n=new ee.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=Be(Ae,e,t),n}function Ue(e){var t=new ee.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function je(e){var t=[],n=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var i=0,r=0,o=0;o<n.commands.length;o+=1){var a=void 0,s=void 0,l=n.commands[o];if("Q"===l.type&&(l={type:"C",x:l.x,y:l.y,x1:1/3*i+2/3*l.x1,y1:1/3*r+2/3*l.y1,x2:1/3*l.x+2/3*l.x1,y2:1/3*l.y+2/3*l.y1}),"M"===l.type)a=Math.round(l.x-i),s=Math.round(l.y-r),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),i=Math.round(l.x),r=Math.round(l.y);else if("L"===l.type)a=Math.round(l.x-i),s=Math.round(l.y-r),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),i=Math.round(l.x),r=Math.round(l.y);else if("C"===l.type){var c=Math.round(l.x1-i),d=Math.round(l.y1-r),u=Math.round(l.x2-l.x1),h=Math.round(l.y2-l.y1);a=Math.round(l.x-l.x2),s=Math.round(l.y-l.y2),t.push({name:"dx1",type:"NUMBER",value:c}),t.push({name:"dy1",type:"NUMBER",value:d}),t.push({name:"dx2",type:"NUMBER",value:u}),t.push({name:"dy2",type:"NUMBER",value:h}),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),i=Math.round(l.x),r=Math.round(l.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var $e={parse:function(e,t,n){n.tables.cff={};var i=Te(e,function(e,t){var n={};return n.formatMajor=le.getCard8(e,t),n.formatMinor=le.getCard8(e,t+1),n.size=le.getCard8(e,t+2),n.offsetSize=le.getCard8(e,t+3),n.startOffset=t,n.endOffset=t+4,n}(e,t).endOffset,le.bytesToString),r=Te(e,i.endOffset),o=Te(e,r.endOffset,le.bytesToString),a=Te(e,o.endOffset);n.gsubrs=a.objects,n.gsubrsBias=Ce(n.gsubrs);var s=Fe(e,t,r.objects,o.objects);if(1!==s.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+s.length);var l=s[0];if(n.tables.cff.topDict=l,l._privateDict&&(n.defaultWidthX=l._privateDict.defaultWidthX,n.nominalWidthX=l._privateDict.nominalWidthX),void 0!==l.ros[0]&&void 0!==l.ros[1]&&(n.isCIDFont=!0),n.isCIDFont){var c=l.fdArray,d=l.fdSelect;if(0===c||0===d)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var u=Fe(e,t,Te(e,c+=t).objects,o.objects);l._fdArray=u,d+=t,l._fdSelect=function(e,t,n,i){var r,o=[],a=new le.Parser(e,t),s=a.parseCard8();if(0===s)for(var l=0;l<n;l++){if((r=a.parseCard8())>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+r+" (FD count "+i+")");o.push(r)}else{if(3!==s)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+s);var c,d=a.parseCard16(),u=a.parseCard16();if(0!==u)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+u);for(var h=0;h<d;h++){if(r=a.parseCard8(),c=a.parseCard16(),r>=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+r+" (FD count "+i+")");if(c>n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+c);for(;u<c;u++)o.push(r);u=c}if(c!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+c)}return o}(e,d,n.numGlyphs,u.length)}var h=t+l.private[1],p=Ne(e,h,l.private[0],o.objects);if(n.defaultWidthX=p.defaultWidthX,n.nominalWidthX=p.nominalWidthX,0!==p.subrs){var f=Te(e,h+p.subrs);n.subrs=f.objects,n.subrsBias=Ce(n.subrs)}else n.subrs=[],n.subrsBias=0;var g=Te(e,t+l.charStrings);n.nGlyphs=g.objects.length;var m=function(e,t,n,i){var r,o,a=new le.Parser(e,t);n-=1;var s=[".notdef"],l=a.parseCard8();if(0===l)for(var c=0;c<n;c+=1)r=a.parseSID(),s.push(De(i,r));else if(1===l)for(;s.length<=n;){r=a.parseSID(),o=a.parseCard8();for(var d=0;d<=o;d+=1)s.push(De(i,r)),r+=1}else{if(2!==l)throw new Error("Unknown charset format "+l);for(;s.length<=n;){r=a.parseSID(),o=a.parseCard16();for(var u=0;u<=o;u+=1)s.push(De(i,r)),r+=1}}return s}(e,t+l.charset,n.nGlyphs,o.objects);0===l.encoding?n.cffEncoding=new ve(he,m):1===l.encoding?n.cffEncoding=new ve(pe,m):n.cffEncoding=function(e,t,n){var i,r={},o=new le.Parser(e,t),a=o.parseCard8();if(0===a)for(var s=o.parseCard8(),l=0;l<s;l+=1)r[i=o.parseCard8()]=l;else{if(1!==a)throw new Error("Unknown encoding format "+a);var c=o.parseCard8();i=1;for(var d=0;d<c;d+=1)for(var u=o.parseCard8(),h=o.parseCard8(),p=u;p<=u+h;p+=1)r[p]=i,i+=1}return new ve(r,n)}(e,t+l.encoding,m),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new _e.GlyphSet(n);for(var v=0;v<n.nGlyphs;v+=1){var b=g.objects[v];n.glyphs.push(v,_e.cffGlyphLoader(n,v,Re,b))}},make:function(e,t){for(var n,i=new ee.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/t.unitsPerEm,o={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},a=[],s=1;s<e.length;s+=1)n=e.get(s),a.push(n.name);var l=[];i.header=new ee.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),i.nameIndex=function(e){var t=new ee.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}([t.postScriptName]);var c=ze(o,l);i.topDictIndex=Ue(c),i.globalSubrIndex=new ee.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),i.charsets=function(e,t){for(var n=new ee.Record("Charsets",[{name:"format",type:"Card8",value:0}]),i=0;i<e.length;i+=1){var r=Oe(e[i],t);n.fields.push({name:"glyph_"+i,type:"SID",value:r})}return n}(a,l),i.charStringsIndex=function(e){for(var t=new ee.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var i=e.get(n),r=je(i);t.charStrings.push({name:i.name,type:"CHARSTRING",value:r})}return t}(e),i.privateDict=function(e,t){var n=new ee.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=Be(Ee,e,t),n}({},l),i.stringIndex=function(e){var t=new ee.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}(l);var d=i.header.sizeOf()+i.nameIndex.sizeOf()+i.topDictIndex.sizeOf()+i.stringIndex.sizeOf()+i.globalSubrIndex.sizeOf();return o.charset=d,o.encoding=0,o.charStrings=o.charset+i.charsets.sizeOf(),o.private[1]=o.charStrings+i.charStringsIndex.sizeOf(),c=ze(o,l),i.topDictIndex=Ue(c),i}},He={parse:function(e,t){var n={},i=new le.Parser(e,t);return n.version=i.parseVersion(),n.fontRevision=Math.round(1e3*i.parseFixed())/1e3,n.checkSumAdjustment=i.parseULong(),n.magicNumber=i.parseULong(),L.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=i.parseUShort(),n.unitsPerEm=i.parseUShort(),n.created=i.parseLongDateTime(),n.modified=i.parseLongDateTime(),n.xMin=i.parseShort(),n.yMin=i.parseShort(),n.xMax=i.parseShort(),n.yMax=i.parseShort(),n.macStyle=i.parseUShort(),n.lowestRecPPEM=i.parseUShort(),n.fontDirectionHint=i.parseShort(),n.indexToLocFormat=i.parseShort(),n.glyphDataFormat=i.parseShort(),n},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new ee.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}},Ve={parse:function(e,t){var n={},i=new le.Parser(e,t);return n.version=i.parseVersion(),n.ascender=i.parseShort(),n.descender=i.parseShort(),n.lineGap=i.parseShort(),n.advanceWidthMax=i.parseUShort(),n.minLeftSideBearing=i.parseShort(),n.minRightSideBearing=i.parseShort(),n.xMaxExtent=i.parseShort(),n.caretSlopeRise=i.parseShort(),n.caretSlopeRun=i.parseShort(),n.caretOffset=i.parseShort(),i.relativeOffset+=8,n.metricDataFormat=i.parseShort(),n.numberOfHMetrics=i.parseUShort(),n},make:function(e){return new ee.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}},Ge={parse:function(e,t,n,i,r){for(var o,a,s=new le.Parser(e,t),l=0;l<i;l+=1){l<n&&(o=s.parseUShort(),a=s.parseShort());var c=r.get(l);c.advanceWidth=o,c.leftSideBearing=a}},make:function(e){for(var t=new ee.Table("hmtx",[]),n=0;n<e.length;n+=1){var i=e.get(n),r=i.advanceWidth||0,o=i.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:r}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:o})}return t}},Ke={make:function(e){for(var t=new ee.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",i=12+4*e.length,r=0;r<e.length;++r){var o=n.indexOf(e[r]);o<0&&(o=n.length,n+=e[r]),t.fields.push({name:"offset "+r,type:"USHORT",value:i+o}),t.fields.push({name:"length "+r,type:"USHORT",value:e[r].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t},parse:function(e,t){var n=new le.Parser(e,t),i=n.parseULong();L.argument(1===i,"Unsupported ltag table version."),n.skip("uLong",1);for(var r=n.parseULong(),o=[],a=0;a<r;a++){for(var s="",l=t+n.parseUShort(),c=n.parseUShort(),d=l;d<l+c;++d)s+=String.fromCharCode(e.getInt8(d));o.push(s)}return o}},qe={parse:function(e,t){var n={},i=new le.Parser(e,t);return n.version=i.parseVersion(),n.numGlyphs=i.parseUShort(),1===n.version&&(n.maxPoints=i.parseUShort(),n.maxContours=i.parseUShort(),n.maxCompositePoints=i.parseUShort(),n.maxCompositeContours=i.parseUShort(),n.maxZones=i.parseUShort(),n.maxTwilightPoints=i.parseUShort(),n.maxStorage=i.parseUShort(),n.maxFunctionDefs=i.parseUShort(),n.maxInstructionDefs=i.parseUShort(),n.maxStackElements=i.parseUShort(),n.maxSizeOfInstructions=i.parseUShort(),n.maxComponentElements=i.parseUShort(),n.maxComponentDepth=i.parseUShort()),n},make:function(e){return new ee.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},We=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ye={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Qe={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Xe={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Ze(e,t,n){switch(e){case 0:if(65535===t)return"und";if(n)return n[t];break;case 1:return Ye[t];case 3:return Xe[t]}}var Je="utf-16",et={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},tt={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function nt(e,t,n){switch(e){case 0:return Je;case 1:return tt[n]||et[t];case 3:if(1===t||10===t)return Je}}function it(e){var t={};for(var n in e)t[e[n]]=parseInt(n);return t}function rt(e,t,n,i,r,o){return new ee.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:i},{name:"length",type:"USHORT",value:r},{name:"offset",type:"USHORT",value:o}])}function ot(e,t){var n=function(e,t){var n=e.length,i=t.length-n+1;e:for(var r=0;r<i;r++)for(;r<i;r++){for(var o=0;o<n;o++)if(t[r+o]!==e[o])continue e;return r}return-1}(e,t);if(n<0){n=t.length;for(var i=0,r=e.length;i<r;++i)t.push(e[i])}return n}var at={parse:function(e,t,n){for(var i={},r=new le.Parser(e,t),o=r.parseUShort(),a=r.parseUShort(),s=r.offset+r.parseUShort(),l=0;l<a;l++){var c=r.parseUShort(),d=r.parseUShort(),u=r.parseUShort(),h=r.parseUShort(),p=We[h]||h,f=r.parseUShort(),g=r.parseUShort(),m=Ze(c,u,n),v=nt(c,d,u);if(void 0!==v&&void 0!==m){var b=void 0;if(b=v===Je?N.UTF16(e,s+g,f):N.MACSTRING(e,s+g,f,v)){var y=i[p];void 0===y&&(y=i[p]={}),y[m]=b,"postScriptName"===p&&(y[{0:"uni",1:"mac",3:"win"}[c]+"-"+m]=b)}}}return 1===o&&r.parseUShort(),i},make:function(e,t){var n,i=[],r={},o=it(We);for(var a in e){var s=o[a];if(void 0===s&&(s=a),n=parseInt(s),isNaN(n))throw new Error('Name table entry "'+a+'" does not exist, see nameTableNames for complete list.');r[n]=e[a],i.push(n)}for(var l=it(Ye),c=it(Xe),d=[],u=[],h=0;h<i.length;h++){var p=r[n=i[h]];for(var f in p){var g=p[f],m=1,v=l[f],b=Qe[v],y=nt(m,b,v),w=F.MACSTRING(g,y);void 0===w&&(m=0,(v=t.indexOf(f))<0&&(v=t.length,t.push(f)),b=4,w=F.UTF16(g));var k=ot(w,u);d.push(rt(m,b,v,n,w.length,k));var x=c[f];if(void 0!==x){var _=F.UTF16(g),S=ot(_,u);d.push(rt(3,1,x,n,_.length,S))}}}d.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var C=new ee.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:d.length},{name:"stringOffset",type:"USHORT",value:6+12*d.length}]),T=0;T<d.length;T++)C.fields.push({name:"record_"+T,type:"RECORD",value:d[T]});return C.fields.push({name:"strings",type:"LITERAL",value:u}),C}},st=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],lt={parse:function(e,t){var n={},i=new le.Parser(e,t);n.version=i.parseUShort(),n.xAvgCharWidth=i.parseShort(),n.usWeightClass=i.parseUShort(),n.usWidthClass=i.parseUShort(),n.fsType=i.parseUShort(),n.ySubscriptXSize=i.parseShort(),n.ySubscriptYSize=i.parseShort(),n.ySubscriptXOffset=i.parseShort(),n.ySubscriptYOffset=i.parseShort(),n.ySuperscriptXSize=i.parseShort(),n.ySuperscriptYSize=i.parseShort(),n.ySuperscriptXOffset=i.parseShort(),n.ySuperscriptYOffset=i.parseShort(),n.yStrikeoutSize=i.parseShort(),n.yStrikeoutPosition=i.parseShort(),n.sFamilyClass=i.parseShort(),n.panose=[];for(var r=0;r<10;r++)n.panose[r]=i.parseByte();return n.ulUnicodeRange1=i.parseULong(),n.ulUnicodeRange2=i.parseULong(),n.ulUnicodeRange3=i.parseULong(),n.ulUnicodeRange4=i.parseULong(),n.achVendID=String.fromCharCode(i.parseByte(),i.parseByte(),i.parseByte(),i.parseByte()),n.fsSelection=i.parseUShort(),n.usFirstCharIndex=i.parseUShort(),n.usLastCharIndex=i.parseUShort(),n.sTypoAscender=i.parseShort(),n.sTypoDescender=i.parseShort(),n.sTypoLineGap=i.parseShort(),n.usWinAscent=i.parseUShort(),n.usWinDescent=i.parseUShort(),n.version>=1&&(n.ulCodePageRange1=i.parseULong(),n.ulCodePageRange2=i.parseULong()),n.version>=2&&(n.sxHeight=i.parseShort(),n.sCapHeight=i.parseShort(),n.usDefaultChar=i.parseUShort(),n.usBreakChar=i.parseUShort(),n.usMaxContent=i.parseUShort()),n},make:function(e){return new ee.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:st,getUnicodeRange:function(e){for(var t=0;t<st.length;t+=1){var n=st[t];if(e>=n.begin&&e<n.end)return t}return-1}},ct={parse:function(e,t){var n={},i=new le.Parser(e,t);switch(n.version=i.parseVersion(),n.italicAngle=i.parseFixed(),n.underlinePosition=i.parseShort(),n.underlineThickness=i.parseShort(),n.isFixedPitch=i.parseULong(),n.minMemType42=i.parseULong(),n.maxMemType42=i.parseULong(),n.minMemType1=i.parseULong(),n.maxMemType1=i.parseULong(),n.version){case 1:n.names=fe.slice();break;case 2:n.numberOfGlyphs=i.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var r=0;r<n.numberOfGlyphs;r++)n.glyphNameIndex[r]=i.parseUShort();n.names=[];for(var o=0;o<n.numberOfGlyphs;o++)if(n.glyphNameIndex[o]>=fe.length){var a=i.parseChar();n.names.push(i.parseString(a))}break;case 2.5:n.numberOfGlyphs=i.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var s=0;s<n.numberOfGlyphs;s++)n.offset[s]=i.parseChar()}return n},make:function(){return new ee.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},dt=new Array(9);dt[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ae.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(ae.coverage),substitute:this.parseOffset16List()}:void L.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},dt[2]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),sequences:this.parseListOfLists()}},dt[3]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),alternateSets:this.parseListOfLists()}},dt[4]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var ut={sequenceIndex:ae.uShort,lookupListIndex:ae.uShort};dt[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(ae.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ut)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(ae.coverage),classDef:this.parsePointer(ae.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ut)}}))};if(3===t){var n=this.parseUShort(),i=this.parseUShort();return{substFormat:t,coverages:this.parseList(n,ae.pointer(ae.coverage)),lookupRecords:this.parseRecordList(i,ut)}}L.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},dt[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ae.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ut)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(ae.coverage),backtrackClassDef:this.parsePointer(ae.classDef),inputClassDef:this.parsePointer(ae.classDef),lookaheadClassDef:this.parsePointer(ae.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ut)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(ae.pointer(ae.coverage)),inputCoverage:this.parseList(ae.pointer(ae.coverage)),lookaheadCoverage:this.parseList(ae.pointer(ae.coverage)),lookupRecords:this.parseRecordList(ut)}:void L.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},dt[7]=function(){var e=this.parseUShort();L.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),n=new ae(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:dt[t].call(n)}},dt[8]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),backtrackCoverage:this.parseList(ae.pointer(ae.coverage)),lookaheadCoverage:this.parseList(ae.pointer(ae.coverage)),substitutes:this.parseUShortList()}};var ht=new Array(9);ht[1]=function(e){return 1===e.substFormat?new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)}].concat(ee.ushortList("substitute",e.substitute)))},ht[3]=function(e){return L.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)}].concat(ee.tableList("altSet",e.alternateSets,(function(e){return new ee.Table("alternateSetTable",ee.ushortList("alternate",e))}))))},ht[4]=function(e){return L.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)}].concat(ee.tableList("ligSet",e.ligatureSets,(function(e){return new ee.Table("ligatureSetTable",ee.tableList("ligature",e,(function(e){return new ee.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(ee.ushortList("component",e.components,e.components.length+1)))})))}))))};var pt={parse:function(e,t){var n=new ae(e,t=t||0),i=n.parseVersion(1);return L.argument(1===i||1.1===i,"Unsupported GSUB table version."),1===i?{version:i,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(dt)}:{version:i,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(dt),variations:n.parseFeatureVariationsList()}},make:function(e){return new ee.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ee.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new ee.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new ee.LookupList(e.lookups,ht)}])}},ft={parse:function(e,t){var n=new le.Parser(e,t),i=n.parseULong();L.argument(1===i,"Unsupported META table version."),n.parseULong(),n.parseULong();for(var r=n.parseULong(),o={},a=0;a<r;a++){var s=n.parseTag(),l=n.parseULong(),c=n.parseULong(),d=N.UTF8(e,t+l,c);o[s]=d}return o},make:function(e){var t=Object.keys(e).length,n="",i=16+12*t,r=new ee.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:i},{name:"numTags",type:"ULONG",value:t}]);for(var o in e){var a=n.length;n+=e[o],r.fields.push({name:"tag "+o,type:"TAG",value:o}),r.fields.push({name:"offset "+o,type:"ULONG",value:i+a}),r.fields.push({name:"length "+o,type:"ULONG",value:e[o].length})}return r.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),r}};function gt(e){return Math.log(e)/Math.log(2)|0}function mt(e){for(;e.length%4!=0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%=Math.pow(2,32)}function vt(e,t,n,i){return new ee.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==i?i:0}])}function bt(e){var t=new ee.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var n=Math.pow(2,gt(t.numTables));t.searchRange=16*n,t.entrySelector=gt(n),t.rangeShift=16*t.numTables-t.searchRange;for(var i=[],r=[],o=t.sizeOf()+vt().sizeOf()*t.numTables;o%4!=0;)o+=1,r.push({name:"padding",type:"BYTE",value:0});for(var a=0;a<e.length;a+=1){var s=e[a];L.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid.");var l=s.sizeOf(),c=vt(s.tableName,mt(s.encode()),o,l);for(i.push({name:c.tag+" Table Record",type:"RECORD",value:c}),r.push({name:s.tableName+" table",type:"RECORD",value:s}),o+=l,L.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!=0;)o+=1,r.push({name:"padding",type:"BYTE",value:0})}return i.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(i),t.fields=t.fields.concat(r),t}function yt(e,t,n){for(var i=0;i<t.length;i+=1){var r=e.charToGlyphIndex(t[i]);if(r>0)return e.glyphs.get(r).getMetrics()}return n}function wt(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}var kt={make:bt,fontToTable:function(e){for(var t,n=[],i=[],r=[],o=[],a=[],s=[],l=[],c=0,d=0,u=0,h=0,p=0,f=0;f<e.glyphs.length;f+=1){var g=e.glyphs.get(f),m=0|g.unicode;if(isNaN(g.advanceWidth))throw new Error("Glyph "+g.name+" ("+f+"): advanceWidth is not a number.");(t>m||void 0===t)&&m>0&&(t=m),c<m&&(c=m);var v=lt.getUnicodeRange(m);if(v<32)d|=1<<v;else if(v<64)u|=1<<v-32;else if(v<96)h|=1<<v-64;else{if(!(v<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<v-96}if(".notdef"!==g.name){var b=g.getMetrics();n.push(b.xMin),i.push(b.yMin),r.push(b.xMax),o.push(b.yMax),s.push(b.leftSideBearing),l.push(b.rightSideBearing),a.push(g.advanceWidth)}}var y={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,i),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,o),advanceWidthMax:Math.max.apply(null,a),advanceWidthAvg:wt(a),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,l)};y.ascender=e.ascender,y.descender=e.descender;var w=He.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:y.xMin,yMin:y.yMin,xMax:y.xMax,yMax:y.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),k=Ve.make({ascender:y.ascender,descender:y.descender,advanceWidthMax:y.advanceWidthMax,minLeftSideBearing:y.minLeftSideBearing,minRightSideBearing:y.minRightSideBearing,xMaxExtent:y.maxLeftSideBearing+(y.xMax-y.xMin),numberOfHMetrics:e.glyphs.length}),x=qe.make(e.glyphs.length),_=lt.make({xAvgCharWidth:Math.round(y.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:c,ulUnicodeRange1:d,ulUnicodeRange2:u,ulUnicodeRange3:h,ulUnicodeRange4:p,fsSelection:e.tables.os2.fsSelection,sTypoAscender:y.ascender,sTypoDescender:y.descender,sTypoLineGap:0,usWinAscent:y.yMax,usWinDescent:Math.abs(y.yMin),ulCodePageRange1:1,sxHeight:yt(e,"xyvw",{yMax:Math.round(y.ascender/2)}).yMax,sCapHeight:yt(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",y).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),S=Ge.make(e.glyphs),C=de.make(e.glyphs),T=e.getEnglishName("fontFamily"),M=e.getEnglishName("fontSubfamily"),I=T+" "+M,D=e.getEnglishName("postScriptName");D||(D=T.replace(/\s/g,"")+"-"+M);var P={};for(var A in e.names)P[A]=e.names[A];P.uniqueID||(P.uniqueID={en:e.getEnglishName("manufacturer")+":"+I}),P.postScriptName||(P.postScriptName={en:D}),P.preferredFamily||(P.preferredFamily=e.names.fontFamily),P.preferredSubfamily||(P.preferredSubfamily=e.names.fontSubfamily);var E=[],L=at.make(P,E),N=E.length>0?Ke.make(E):void 0,F=ct.make(),R=$e.make(e.glyphs,{version:e.getEnglishName("version"),fullName:I,familyName:T,weightName:M,postScriptName:D,unitsPerEm:e.unitsPerEm,fontBBox:[0,y.yMin,y.ascender,y.advanceWidthMax]}),O=e.metas&&Object.keys(e.metas).length>0?ft.make(e.metas):void 0,B=[w,k,x,_,L,C,F,R,S];N&&B.push(N),e.tables.gsub&&B.push(pt.make(e.tables.gsub)),O&&B.push(O);for(var z=bt(B),U=mt(z.encode()),j=z.fields,$=!1,H=0;H<j.length;H+=1)if("head table"===j[H].name){j[H].value.checkSumAdjustment=2981146554-U,$=!0;break}if(!$)throw new Error("Could not find head table with checkSum to adjust.");return z},computeCheckSum:mt};function xt(e,t){for(var n=0,i=e.length-1;n<=i;){var r=n+i>>>1,o=e[r].tag;if(o===t)return r;o<t?n=r+1:i=r-1}return-n-1}function _t(e,t){for(var n=0,i=e.length-1;n<=i;){var r=n+i>>>1,o=e[r];if(o===t)return r;o<t?n=r+1:i=r-1}return-n-1}function St(e,t){for(var n,i=0,r=e.length-1;i<=r;){var o=i+r>>>1,a=(n=e[o]).start;if(a===t)return n;a<t?i=o+1:r=o-1}if(i>0)return t>(n=e[i-1]).end?0:n}function Ct(e,t){this.font=e,this.tableName=t}function Tt(e){Ct.call(this,e,"gpos")}function Mt(e){Ct.call(this,e,"gsub")}function It(e,t){var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Dt(e,t,n){for(var i=e.subtables,r=0;r<i.length;r++){var o=i[r];if(o.substFormat===t)return o}if(n)return i.push(n),n}function Pt(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0;i<e.length;++i)n[i]=e[i];return t}function At(e,t){if(!e)throw t}function Et(e,t,n,i,r){var o;return(t&i)>0?(o=e.parseByte(),0==(t&r)&&(o=-o),o=n+o):o=(t&r)>0?n:n+e.parseShort(),o}function Lt(e,t,n){var i,r,o=new le.Parser(t,n);if(e.numberOfContours=o.parseShort(),e._xMin=o.parseShort(),e._yMin=o.parseShort(),e._xMax=o.parseShort(),e._yMax=o.parseShort(),e.numberOfContours>0){for(var a=e.endPointIndices=[],s=0;s<e.numberOfContours;s+=1)a.push(o.parseUShort());e.instructionLength=o.parseUShort(),e.instructions=[];for(var l=0;l<e.instructionLength;l+=1)e.instructions.push(o.parseByte());var c=a[a.length-1]+1;i=[];for(var d=0;d<c;d+=1)if(r=o.parseByte(),i.push(r),(8&r)>0)for(var u=o.parseByte(),h=0;h<u;h+=1)i.push(r),d+=1;if(L.argument(i.length===c,"Bad flags."),a.length>0){var p,f=[];if(c>0){for(var g=0;g<c;g+=1)r=i[g],(p={}).onCurve=!!(1&r),p.lastPointOfContour=a.indexOf(g)>=0,f.push(p);for(var m=0,v=0;v<c;v+=1)r=i[v],(p=f[v]).x=Et(o,r,m,2,16),m=p.x;for(var b=0,y=0;y<c;y+=1)r=i[y],(p=f[y]).y=Et(o,r,b,4,32),b=p.y}e.points=f}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var w=!0;w;){i=o.parseUShort();var k={glyphIndex:o.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&i)>0?(2&i)>0?(k.dx=o.parseShort(),k.dy=o.parseShort()):k.matchedPoints=[o.parseUShort(),o.parseUShort()]:(2&i)>0?(k.dx=o.parseChar(),k.dy=o.parseChar()):k.matchedPoints=[o.parseByte(),o.parseByte()],(8&i)>0?k.xScale=k.yScale=o.parseF2Dot14():(64&i)>0?(k.xScale=o.parseF2Dot14(),k.yScale=o.parseF2Dot14()):(128&i)>0&&(k.xScale=o.parseF2Dot14(),k.scale01=o.parseF2Dot14(),k.scale10=o.parseF2Dot14(),k.yScale=o.parseF2Dot14()),e.components.push(k),w=!!(32&i)}if(256&i){e.instructionLength=o.parseUShort(),e.instructions=[];for(var x=0;x<e.instructionLength;x+=1)e.instructions.push(o.parseByte())}}}function Nt(e,t){for(var n=[],i=0;i<e.length;i+=1){var r=e[i],o={x:t.xScale*r.x+t.scale01*r.y+t.dx,y:t.scale10*r.x+t.yScale*r.y+t.dy,onCurve:r.onCurve,lastPointOfContour:r.lastPointOfContour};n.push(o)}return n}function Ft(e){var t=new P;if(!e)return t;for(var n=function(e){for(var t=[],n=[],i=0;i<e.length;i+=1){var r=e[i];n.push(r),r.lastPointOfContour&&(t.push(n),n=[])}return L.argument(0===n.length,"There are still points left in the current contour."),t}(e),i=0;i<n.length;++i){var r=n[i],o=null,a=r[r.length-1],s=r[0];if(a.onCurve)t.moveTo(a.x,a.y);else if(s.onCurve)t.moveTo(s.x,s.y);else{var l={x:.5*(a.x+s.x),y:.5*(a.y+s.y)};t.moveTo(l.x,l.y)}for(var c=0;c<r.length;++c)if(o=a,a=s,s=r[(c+1)%r.length],a.onCurve)t.lineTo(a.x,a.y);else{var d=s;o.onCurve||(a.x,o.x,a.y,o.y),s.onCurve||(d={x:.5*(a.x+s.x),y:.5*(a.y+s.y)}),t.quadraticCurveTo(a.x,a.y,d.x,d.y)}t.closePath()}return t}function Rt(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var i=t.components[n],r=e.get(i.glyphIndex);if(r.getPath(),r.points){var o=void 0;if(void 0===i.matchedPoints)o=Nt(r.points,i);else{if(i.matchedPoints[0]>t.points.length-1||i.matchedPoints[1]>r.points.length-1)throw Error("Matched points out of range in "+t.name);var a=t.points[i.matchedPoints[0]],s=r.points[i.matchedPoints[1]],l={xScale:i.xScale,scale01:i.scale01,scale10:i.scale10,yScale:i.yScale,dx:0,dy:0};s=Nt([s],l)[0],l.dx=a.x-s.x,l.dy=a.y-s.y,o=Nt(r.points,l)}t.points=t.points.concat(o)}}return Ft(t.points)}Ct.prototype={searchTag:xt,binSearch:_t,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,n=0;n<e.scripts.length;n++){var i=e.scripts[n].tag;if("DFLT"===i)return i;"latn"===i&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var n=this.getTable(t);if(n){e=e||"DFLT";var i=n.scripts,r=xt(n.scripts,e);if(r>=0)return i[r].script;if(t){var o={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return i.splice(-1-r,0,o),o.script}}},getLangSysTable:function(e,t,n){var i=this.getScriptTable(e,n);if(i){if(!t||"dflt"===t||"DFLT"===t)return i.defaultLangSys;var r=xt(i.langSysRecords,t);if(r>=0)return i.langSysRecords[r].langSys;if(n){var o={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return i.langSysRecords.splice(-1-r,0,o),o.langSys}}},getFeatureTable:function(e,t,n,i){var r=this.getLangSysTable(e,t,i);if(r){for(var o,a=r.featureIndexes,s=this.font.tables[this.tableName].features,l=0;l<a.length;l++)if((o=s[a[l]]).tag===n)return o.feature;if(i){var c=s.length;return L.assert(0===c||n>=s[c-1].tag,"Features must be added in alphabetical order."),o={tag:n,feature:{params:0,lookupListIndexes:[]}},s.push(o),a.push(c),o.feature}}},getLookupTables:function(e,t,n,i,r){var o=this.getFeatureTable(e,t,n,r),a=[];if(o){for(var s,l=o.lookupListIndexes,c=this.font.tables[this.tableName].lookups,d=0;d<l.length;d++)(s=c[l[d]]).lookupType===i&&a.push(s);if(0===a.length&&r){s={lookupType:i,lookupFlag:0,subtables:[],markFilteringSet:void 0};var u=c.length;return c.push(s),l.push(u),[s]}}return a},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var n=St(e.ranges,t);return n?n.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var n=_t(e.glyphs,t);return n>=0?n:-1;case 2:var i=St(e.ranges,t);return i?i.index+t-i.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],n=e.ranges,i=0;i<n.length;i++)for(var r=n[i],o=r.start,a=r.end,s=o;s<=a;s++)t.push(s);return t}},Tt.prototype=Ct.prototype,Tt.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},Tt.prototype.getKerningValue=function(e,t,n){for(var i=0;i<e.length;i++)for(var r=e[i].subtables,o=0;o<r.length;o++){var a=r[o],s=this.getCoverageIndex(a.coverage,t);if(!(s<0))switch(a.posFormat){case 1:for(var l=a.pairSets[s],c=0;c<l.length;c++){var d=l[c];if(d.secondGlyph===n)return d.value1&&d.value1.xAdvance||0}break;case 2:var u=this.getGlyphClass(a.classDef1,t),h=this.getGlyphClass(a.classDef2,n),p=a.classRecords[u][h];return p.value1&&p.value1.xAdvance||0}}return 0},Tt.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},Mt.prototype=Ct.prototype,Mt.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Mt.prototype.getSingle=function(e,t,n){for(var i=[],r=this.getLookupTables(t,n,e,1),o=0;o<r.length;o++)for(var a=r[o].subtables,s=0;s<a.length;s++){var l=a[s],c=this.expandCoverage(l.coverage),d=void 0;if(1===l.substFormat){var u=l.deltaGlyphId;for(d=0;d<c.length;d++){var h=c[d];i.push({sub:h,by:h+u})}}else{var p=l.substitute;for(d=0;d<c.length;d++)i.push({sub:c[d],by:p[d]})}}return i},Mt.prototype.getAlternates=function(e,t,n){for(var i=[],r=this.getLookupTables(t,n,e,3),o=0;o<r.length;o++)for(var a=r[o].subtables,s=0;s<a.length;s++)for(var l=a[s],c=this.expandCoverage(l.coverage),d=l.alternateSets,u=0;u<c.length;u++)i.push({sub:c[u],by:d[u]});return i},Mt.prototype.getLigatures=function(e,t,n){for(var i=[],r=this.getLookupTables(t,n,e,4),o=0;o<r.length;o++)for(var a=r[o].subtables,s=0;s<a.length;s++)for(var l=a[s],c=this.expandCoverage(l.coverage),d=l.ligatureSets,u=0;u<c.length;u++)for(var h=c[u],p=d[u],f=0;f<p.length;f++){var g=p[f];i.push({sub:[h].concat(g.components),by:g.ligGlyph})}return i},Mt.prototype.addSingle=function(e,t,n,i){var r=Dt(this.getLookupTables(n,i,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});L.assert(1===r.coverage.format,"Ligature: unable to modify coverage table format "+r.coverage.format);var o=t.sub,a=this.binSearch(r.coverage.glyphs,o);a<0&&(a=-1-a,r.coverage.glyphs.splice(a,0,o),r.substitute.splice(a,0,0)),r.substitute[a]=t.by},Mt.prototype.addAlternate=function(e,t,n,i){var r=Dt(this.getLookupTables(n,i,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});L.assert(1===r.coverage.format,"Ligature: unable to modify coverage table format "+r.coverage.format);var o=t.sub,a=this.binSearch(r.coverage.glyphs,o);a<0&&(a=-1-a,r.coverage.glyphs.splice(a,0,o),r.alternateSets.splice(a,0,0)),r.alternateSets[a]=t.by},Mt.prototype.addLigature=function(e,t,n,i){var r=this.getLookupTables(n,i,e,4,!0)[0],o=r.subtables[0];o||(o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},r.subtables[0]=o),L.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);var a=t.sub[0],s=t.sub.slice(1),l={ligGlyph:t.by,components:s},c=this.binSearch(o.coverage.glyphs,a);if(c>=0){for(var d=o.ligatureSets[c],u=0;u<d.length;u++)if(It(d[u].components,s))return;d.push(l)}else c=-1-c,o.coverage.glyphs.splice(c,0,a),o.ligatureSets.splice(c,0,[l])},Mt.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n)}},Mt.prototype.add=function(e,t,n,i){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,i);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,n,i):this.addAlternate(e,t,n,i);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,i)}};var Ot,Bt,zt,Ut,jt={getPath:Ft,parse:function(e,t,n,i){for(var r=new _e.GlyphSet(i),o=0;o<n.length-1;o+=1){var a=n[o];a!==n[o+1]?r.push(o,_e.ttfGlyphLoader(i,o,Lt,e,t+a,Rt)):r.push(o,_e.glyphLoader(i,o))}return r}};function $t(e){this.font=e,this.getCommands=function(e){return jt.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Ht(e){return e}function Vt(e){return Math.sign(e)*Math.round(Math.abs(e))}function Gt(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Kt(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function qt(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Wt(e){return Math.sign(e)*Math.floor(Math.abs(e))}var Yt=function(e){var t=this.srPeriod,n=this.srPhase,i=1;return e<0&&(e=-e,i=-1),e+=this.srThreshold-n,e=Math.trunc(e/t)*t,(e+=n)<0?n*i:e*i},Qt={x:1,y:0,axis:"x",distance:function(e,t,n,i){return(n?e.xo:e.x)-(i?t.xo:t.x)},interpolate:function(e,t,n,i){var r,o,a,s,l,c,d;if(!i||i===this)return r=e.xo-t.xo,o=e.xo-n.xo,l=t.x-t.xo,c=n.x-n.xo,0===(d=(a=Math.abs(r))+(s=Math.abs(o)))?void(e.x=e.xo+(l+c)/2):void(e.x=e.xo+(l*s+c*a)/d);r=i.distance(e,t,!0,!0),o=i.distance(e,n,!0,!0),l=i.distance(t,t,!1,!0),c=i.distance(n,n,!1,!0),0!==(d=(a=Math.abs(r))+(s=Math.abs(o)))?Qt.setRelative(e,e,(l*s+c*a)/d,i,!0):Qt.setRelative(e,e,(l+c)/2,i,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,i,r){if(i&&i!==this){var o=r?t.xo:t.x,a=r?t.yo:t.y,s=o+n*i.x,l=a+n*i.y;e.x=s+(e.y-l)/i.normalSlope}else e.x=(r?t.xo:t.x)+n},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Xt={x:0,y:1,axis:"y",distance:function(e,t,n,i){return(n?e.yo:e.y)-(i?t.yo:t.y)},interpolate:function(e,t,n,i){var r,o,a,s,l,c,d;if(!i||i===this)return r=e.yo-t.yo,o=e.yo-n.yo,l=t.y-t.yo,c=n.y-n.yo,0===(d=(a=Math.abs(r))+(s=Math.abs(o)))?void(e.y=e.yo+(l+c)/2):void(e.y=e.yo+(l*s+c*a)/d);r=i.distance(e,t,!0,!0),o=i.distance(e,n,!0,!0),l=i.distance(t,t,!1,!0),c=i.distance(n,n,!1,!0),0!==(d=(a=Math.abs(r))+(s=Math.abs(o)))?Xt.setRelative(e,e,(l*s+c*a)/d,i,!0):Xt.setRelative(e,e,(l+c)/2,i,!0)},normalSlope:0,setRelative:function(e,t,n,i,r){if(i&&i!==this){var o=r?t.xo:t.x,a=r?t.yo:t.y,s=o+n*i.x,l=a+n*i.y;e.y=l+i.normalSlope*(e.x-s)}else e.y=(r?t.yo:t.y)+n},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Zt(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Jt(e,t){var n=Math.sqrt(e*e+t*t);return t/=n,1==(e/=n)&&0===t?Qt:0===e&&1===t?Xt:new Zt(e,t)}function en(e,t,n,i){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=n,this.onCurve=i,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Qt),Object.freeze(Xt),Zt.prototype.distance=function(e,t,n,i){return this.x*Qt.distance(e,t,n,i)+this.y*Xt.distance(e,t,n,i)},Zt.prototype.interpolate=function(e,t,n,i){var r,o,a,s,l,c,d;a=i.distance(e,t,!0,!0),s=i.distance(e,n,!0,!0),r=i.distance(t,t,!1,!0),o=i.distance(n,n,!1,!0),0!==(d=(l=Math.abs(a))+(c=Math.abs(s)))?this.setRelative(e,e,(r*c+o*l)/d,i,!0):this.setRelative(e,e,(r+o)/2,i,!0)},Zt.prototype.setRelative=function(e,t,n,i,r){i=i||this;var o=r?t.xo:t.x,a=r?t.yo:t.y,s=o+n*i.x,l=a+n*i.y,c=i.normalSlope,d=this.slope,u=e.x,h=e.y;e.x=(d*u-c*s+l-h)/(d-c),e.y=d*(e.x-u)+h},Zt.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},en.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},en.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var tn=Object.freeze(new en(0,0)),nn={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function rn(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Qt,this.round=Vt}}function on(e){for(var t=e.tZone=new Array(e.gZone.length),n=0;n<t.length;n++)t[n]=new en(0,0)}function an(e,t){var n,i=e.prog,r=e.ip,o=1;do{if(88===(n=i[++r]))o++;else if(89===n)o--;else if(64===n)r+=i[r+1]+1;else if(65===n)r+=2*i[r+1]+1;else if(n>=176&&n<=183)r+=n-176+1;else if(n>=184&&n<=191)r+=2*(n-184+1);else if(t&&1===o&&27===n)break}while(o>0);e.ip=r}function sn(e,n){t.DEBUG&&console.log(n.step,"SVTCA["+e.axis+"]"),n.fv=n.pv=n.dpv=e}function ln(e,n){t.DEBUG&&console.log(n.step,"SPVTCA["+e.axis+"]"),n.pv=n.dpv=e}function cn(e,n){t.DEBUG&&console.log(n.step,"SFVTCA["+e.axis+"]"),n.fv=e}function dn(e,n){var i,r,o=n.stack,a=o.pop(),s=o.pop(),l=n.z2[a],c=n.z1[s];t.DEBUG&&console.log("SPVTL["+e+"]",a,s),e?(i=l.y-c.y,r=c.x-l.x):(i=c.x-l.x,r=c.y-l.y),n.pv=n.dpv=Jt(i,r)}function un(e,n){var i,r,o=n.stack,a=o.pop(),s=o.pop(),l=n.z2[a],c=n.z1[s];t.DEBUG&&console.log("SFVTL["+e+"]",a,s),e?(i=l.y-c.y,r=c.x-l.x):(i=c.x-l.x,r=c.y-l.y),n.fv=Jt(i,r)}function hn(e){t.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function pn(e,n){var i=n.stack.pop(),r=n.z0[i],o=n.fv,a=n.pv;t.DEBUG&&console.log(n.step,"MDAP["+e+"]",i);var s=a.distance(r,tn);e&&(s=n.round(s)),o.setRelative(r,tn,s,a),o.touch(r),n.rp0=n.rp1=i}function fn(e,n){var i,r,o,a=n.z2,s=a.length-2;t.DEBUG&&console.log(n.step,"IUP["+e.axis+"]");for(var l=0;l<s;l++)i=a[l],e.touched(i)||(r=i.prevTouched(e))!==i&&(r===(o=i.nextTouched(e))&&e.setRelative(i,i,e.distance(r,r,!1,!0),e,!0),e.interpolate(i,r,o,e))}function gn(e,n){for(var i=n.stack,r=e?n.rp1:n.rp2,o=(e?n.z0:n.z1)[r],a=n.fv,s=n.pv,l=n.loop,c=n.z2;l--;){var d=i.pop(),u=c[d],h=s.distance(o,o,!1,!0);a.setRelative(u,u,h,s),a.touch(u),t.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-l)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",d)}n.loop=1}function mn(e,n){var i=n.stack,r=e?n.rp1:n.rp2,o=(e?n.z0:n.z1)[r],a=n.fv,s=n.pv,l=i.pop(),c=n.z2[n.contours[l]],d=c;t.DEBUG&&console.log(n.step,"SHC["+e+"]",l);var u=s.distance(o,o,!1,!0);do{d!==o&&a.setRelative(d,d,u,s),d=d.nextPointOnContour}while(d!==c)}function vn(e,n){var i,r,o=n.stack,a=e?n.rp1:n.rp2,s=(e?n.z0:n.z1)[a],l=n.fv,c=n.pv,d=o.pop();switch(t.DEBUG&&console.log(n.step,"SHZ["+e+"]",d),d){case 0:i=n.tZone;break;case 1:i=n.gZone;break;default:throw new Error("Invalid zone")}for(var u=c.distance(s,s,!1,!0),h=i.length-2,p=0;p<h;p++)r=i[p],l.setRelative(r,r,u,c)}function bn(e,n){var i=n.stack,r=i.pop()/64,o=i.pop(),a=n.z1[o],s=n.z0[n.rp0],l=n.fv,c=n.pv;l.setRelative(a,s,r,c),l.touch(a),t.DEBUG&&console.log(n.step,"MSIRP["+e+"]",r,o),n.rp1=n.rp0,n.rp2=o,e&&(n.rp0=o)}function yn(e,n){var i=n.stack,r=i.pop(),o=i.pop(),a=n.z0[o],s=n.fv,l=n.pv,c=n.cvt[r];t.DEBUG&&console.log(n.step,"MIAP["+e+"]",r,"(",c,")",o);var d=l.distance(a,tn);e&&(Math.abs(d-c)<n.cvCutIn&&(d=c),d=n.round(d)),s.setRelative(a,tn,d,l),0===n.zp0&&(a.xo=a.x,a.yo=a.y),s.touch(a),n.rp0=n.rp1=o}function wn(e,n){var i=n.stack,r=i.pop(),o=n.z2[r];t.DEBUG&&console.log(n.step,"GC["+e+"]",r),i.push(64*n.dpv.distance(o,tn,e,!1))}function kn(e,n){var i=n.stack,r=i.pop(),o=i.pop(),a=n.z1[r],s=n.z0[o],l=n.dpv.distance(s,a,e,e);t.DEBUG&&console.log(n.step,"MD["+e+"]",r,o,"->",l),n.stack.push(Math.round(64*l))}function xn(e,n){var i=n.stack,r=i.pop(),o=n.fv,a=n.pv,s=n.ppem,l=n.deltaBase+16*(e-1),c=n.deltaShift,d=n.z0;t.DEBUG&&console.log(n.step,"DELTAP["+e+"]",r,i);for(var u=0;u<r;u++){var h=i.pop(),p=i.pop();if(l+((240&p)>>4)===s){var f=(15&p)-8;f>=0&&f++,t.DEBUG&&console.log(n.step,"DELTAPFIX",h,"by",f*c);var g=d[h];o.setRelative(g,g,f*c,a)}}}function _n(e,n){var i=n.stack,r=i.pop();t.DEBUG&&console.log(n.step,"ROUND[]"),i.push(64*n.round(r/64))}function Sn(e,n){var i=n.stack,r=i.pop(),o=n.ppem,a=n.deltaBase+16*(e-1),s=n.deltaShift;t.DEBUG&&console.log(n.step,"DELTAC["+e+"]",r,i);for(var l=0;l<r;l++){var c=i.pop(),d=i.pop();if(a+((240&d)>>4)===o){var u=(15&d)-8;u>=0&&u++;var h=u*s;t.DEBUG&&console.log(n.step,"DELTACFIX",c,"by",h),n.cvt[c]+=h}}}function Cn(e,n){var i,r,o=n.stack,a=o.pop(),s=o.pop(),l=n.z2[a],c=n.z1[s];t.DEBUG&&console.log(n.step,"SDPVTL["+e+"]",a,s),e?(i=l.y-c.y,r=c.x-l.x):(i=c.x-l.x,r=c.y-l.y),n.dpv=Jt(i,r)}function Tn(e,n){var i=n.stack,r=n.prog,o=n.ip;t.DEBUG&&console.log(n.step,"PUSHB["+e+"]");for(var a=0;a<e;a++)i.push(r[++o]);n.ip=o}function Mn(e,n){var i=n.ip,r=n.prog,o=n.stack;t.DEBUG&&console.log(n.ip,"PUSHW["+e+"]");for(var a=0;a<e;a++){var s=r[++i]<<8|r[++i];32768&s&&(s=-(1+(65535^s))),o.push(s)}n.ip=i}function In(e,n,i,r,o,a){var s,l,c,d,u=a.stack,h=e&&u.pop(),p=u.pop(),f=a.rp0,g=a.z0[f],m=a.z1[p],v=a.minDis,b=a.fv,y=a.dpv;c=(l=s=y.distance(m,g,!0,!0))>=0?1:-1,l=Math.abs(l),e&&(d=a.cvt[h],r&&Math.abs(l-d)<a.cvCutIn&&(l=d)),i&&l<v&&(l=v),r&&(l=a.round(l)),b.setRelative(m,g,c*l,y),b.touch(m),t.DEBUG&&console.log(a.step,(e?"MIRP[":"MDRP[")+(n?"M":"m")+(i?">":"_")+(r?"R":"_")+(0===o?"Gr":1===o?"Bl":2===o?"Wh":"")+"]",e?h+"("+a.cvt[h]+","+d+")":"",p,"(d =",s,"->",c*l,")"),a.rp1=a.rp0,a.rp2=p,n&&(a.rp0=p)}$t.prototype.exec=function(e,n){if("number"!=typeof n)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var i=this.font,r=this._prepState;if(!r||r.ppem!==n){var o=this._fpgmState;if(!o){rn.prototype=nn,(o=this._fpgmState=new rn("fpgm",i.tables.fpgm)).funcs=[],o.font=i,t.DEBUG&&(console.log("---EXEC FPGM---"),o.step=-1);try{Bt(o)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}rn.prototype=o,(r=this._prepState=new rn("prep",i.tables.prep)).ppem=n;var a=i.tables.cvt;if(a)for(var s=r.cvt=new Array(a.length),l=n/i.unitsPerEm,c=0;c<a.length;c++)s[c]=a[c]*l;else r.cvt=[];t.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{Bt(r)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(this._errorState>1))try{return zt(e,r)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},zt=function(e,n){var i,r,o,a=n.ppem/n.font.unitsPerEm,s=a,l=e.components;if(rn.prototype=n,l){var c=n.font;r=[],i=[];for(var d=0;d<l.length;d++){var u=l[d],h=c.glyphs.get(u.glyphIndex);o=new rn("glyf",h.instructions),t.DEBUG&&(console.log("---EXEC COMP "+d+"---"),o.step=-1),Ut(h,o,a,s);for(var p=Math.round(u.dx*a),f=Math.round(u.dy*s),g=o.gZone,m=o.contours,v=0;v<g.length;v++){var b=g[v];b.xTouched=b.yTouched=!1,b.xo=b.x=b.x+p,b.yo=b.y=b.y+f}var y=r.length;r.push.apply(r,g);for(var w=0;w<m.length;w++)i.push(m[w]+y)}e.instructions&&!o.inhibitGridFit&&((o=new rn("glyf",e.instructions)).gZone=o.z0=o.z1=o.z2=r,o.contours=i,r.push(new en(0,0),new en(Math.round(e.advanceWidth*a),0)),t.DEBUG&&(console.log("---EXEC COMPOSITE---"),o.step=-1),Bt(o),r.length-=2)}else o=new rn("glyf",e.instructions),t.DEBUG&&(console.log("---EXEC GLYPH---"),o.step=-1),Ut(e,o,a,s),r=o.gZone;return r},Ut=function(e,n,i,r){for(var o,a,s,l=e.points||[],c=l.length,d=n.gZone=n.z0=n.z1=n.z2=[],u=n.contours=[],h=0;h<c;h++)o=l[h],d[h]=new en(o.x*i,o.y*r,o.lastPointOfContour,o.onCurve);for(var p=0;p<c;p++)o=d[p],a||(a=o,u.push(p)),o.lastPointOfContour?(o.nextPointOnContour=a,a.prevPointOnContour=o,a=void 0):(s=d[p+1],o.nextPointOnContour=s,s.prevPointOnContour=o);if(!n.inhibitGridFit){if(t.DEBUG){console.log("PROCESSING GLYPH",n.stack);for(var f=0;f<c;f++)console.log(f,d[f].x,d[f].y)}if(d.push(new en(0,0),new en(Math.round(e.advanceWidth*i),0)),Bt(n),d.length-=2,t.DEBUG){console.log("FINISHED GLYPH",n.stack);for(var g=0;g<c;g++)console.log(g,d[g].x,d[g].y)}}},Bt=function(e){var n=e.prog;if(n){var i,r=n.length;for(e.ip=0;e.ip<r;e.ip++){if(t.DEBUG&&e.step++,!(i=Ot[n[e.ip]]))throw new Error("unknown instruction: 0x"+Number(n[e.ip]).toString(16));i(e)}}},Ot=[sn.bind(void 0,Xt),sn.bind(void 0,Qt),ln.bind(void 0,Xt),ln.bind(void 0,Qt),cn.bind(void 0,Xt),cn.bind(void 0,Qt),dn.bind(void 0,0),dn.bind(void 0,1),un.bind(void 0,0),un.bind(void 0,1),function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",i,r),e.pv=e.dpv=Jt(r,i)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",i,r),e.fv=Jt(r,i)},function(e){var n=e.stack,i=e.pv;t.DEBUG&&console.log(e.step,"GPV[]"),n.push(16384*i.x),n.push(16384*i.y)},function(e){var n=e.stack,i=e.fv;t.DEBUG&&console.log(e.step,"GFV[]"),n.push(16384*i.x),n.push(16384*i.y)},function(e){e.fv=e.pv,t.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var n=e.stack,i=n.pop(),r=n.pop(),o=n.pop(),a=n.pop(),s=n.pop(),l=e.z0,c=e.z1,d=l[i],u=l[r],h=c[o],p=c[a],f=e.z2[s];t.DEBUG&&console.log("ISECT[], ",i,r,o,a,s);var g=d.x,m=d.y,v=u.x,b=u.y,y=h.x,w=h.y,k=p.x,x=p.y,_=(g-v)*(w-x)-(m-b)*(y-k),S=g*b-m*v,C=y*x-w*k;f.x=(S*(y-k)-C*(g-v))/_,f.y=(S*(w-x)-C*(m-b))/_},function(e){e.rp0=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP0[]",n),e.zp0=n,n){case 0:e.tZone||on(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP1[]",n),e.zp1=n,n){case 0:e.tZone||on(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP2[]",n),e.zp2=n,n){case 0:e.tZone||on(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZPS[]",n),e.zp0=e.zp1=e.zp2=n,n){case 0:e.tZone||on(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),t.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){t.DEBUG&&console.log(e.step,"RTG[]"),e.round=Vt},function(e){t.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Kt},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SMD[]",n),e.minDis=n/64},function(e){t.DEBUG&&console.log(e.step,"ELSE[]"),an(e,!1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"JMPR[]",n),e.ip+=n-1},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCVTCI[]",n),e.cvCutIn=n/64},void 0,void 0,function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DUP[]"),n.push(n[n.length-1])},hn,function(e){t.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"SWAP[]"),n.push(i),n.push(r)},function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DEPTH[]"),n.push(n.length)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"CINDEX[]",i),n.push(n[n.length-i])},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"MINDEX[]",i),n.push(n.splice(n.length-i,1)[0])},void 0,void 0,void 0,function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"LOOPCALL[]",i,r);var o=e.ip,a=e.prog;e.prog=e.funcs[i];for(var s=0;s<r;s++)Bt(e),t.DEBUG&&console.log(++e.step,s+1<r?"next loopcall":"done loopcall",s);e.ip=o,e.prog=a},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"CALL[]",n);var i=e.ip,r=e.prog;e.prog=e.funcs[n],Bt(e),e.ip=i,e.prog=r,t.DEBUG&&console.log(++e.step,"returning from",n)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var n=e.stack,i=e.prog,r=e.ip,o=n.pop(),a=r;for(t.DEBUG&&console.log(e.step,"FDEF[]",o);45!==i[++r];);e.ip=r,e.funcs[o]=i.slice(a+1,r)},void 0,pn.bind(void 0,0),pn.bind(void 0,1),fn.bind(void 0,Xt),fn.bind(void 0,Qt),gn.bind(void 0,0),gn.bind(void 0,1),mn.bind(void 0,0),mn.bind(void 0,1),vn.bind(void 0,0),vn.bind(void 0,1),function(e){for(var n=e.stack,i=e.loop,r=e.fv,o=n.pop()/64,a=e.z2;i--;){var s=n.pop(),l=a[s];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-i)+": ":"")+"SHPIX[]",s,o),r.setRelative(l,l,o),r.touch(l)}e.loop=1},function(e){for(var n=e.stack,i=e.rp1,r=e.rp2,o=e.loop,a=e.z0[i],s=e.z1[r],l=e.fv,c=e.dpv,d=e.z2;o--;){var u=n.pop(),h=d[u];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-o)+": ":"")+"IP[]",u,i,"<->",r),l.interpolate(h,a,s,c),l.touch(h)}e.loop=1},bn.bind(void 0,0),bn.bind(void 0,1),function(e){for(var n=e.stack,i=e.rp0,r=e.z0[i],o=e.loop,a=e.fv,s=e.pv,l=e.z1;o--;){var c=n.pop(),d=l[c];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-o)+": ":"")+"ALIGNRP[]",c),a.setRelative(d,r,0,s),a.touch(d)}e.loop=1},function(e){t.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Gt},yn.bind(void 0,0),yn.bind(void 0,1),function(e){var n=e.prog,i=e.ip,r=e.stack,o=n[++i];t.DEBUG&&console.log(e.step,"NPUSHB[]",o);for(var a=0;a<o;a++)r.push(n[++i]);e.ip=i},function(e){var n=e.ip,i=e.prog,r=e.stack,o=i[++n];t.DEBUG&&console.log(e.step,"NPUSHW[]",o);for(var a=0;a<o;a++){var s=i[++n]<<8|i[++n];32768&s&&(s=-(1+(65535^s))),r.push(s)}e.ip=n},function(e){var n=e.stack,i=e.store;i||(i=e.store=[]);var r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"WS",r,o),i[o]=r},function(e){var n=e.stack,i=e.store,r=n.pop();t.DEBUG&&console.log(e.step,"RS",r);var o=i&&i[r]||0;n.push(o)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"WCVTP",i,r),e.cvt[r]=i/64},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"RCVT",i),n.push(64*e.cvt[i])},wn.bind(void 0,0),wn.bind(void 0,1),void 0,kn.bind(void 0,0),kn.bind(void 0,1),function(e){t.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){t.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"LT[]",i,r),n.push(r<i?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"LTEQ[]",i,r),n.push(r<=i?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"GT[]",i,r),n.push(r>i?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"GTEQ[]",i,r),n.push(r>=i?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"EQ[]",i,r),n.push(i===r?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"NEQ[]",i,r),n.push(i!==r?1:0)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"ODD[]",i),n.push(Math.trunc(i)%2?1:0)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"EVEN[]",i),n.push(Math.trunc(i)%2?0:1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"IF[]",n),n||(an(e,!0),t.DEBUG&&console.log(e.step,"EIF[]"))},function(e){t.DEBUG&&console.log(e.step,"EIF[]")},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"AND[]",i,r),n.push(i&&r?1:0)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"OR[]",i,r),n.push(i||r?1:0)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"NOT[]",i),n.push(i?0:1)},xn.bind(void 0,1),function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"ADD[]",i,r),n.push(r+i)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"SUB[]",i,r),n.push(r-i)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"DIV[]",i,r),n.push(64*r/i)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"MUL[]",i,r),n.push(r*i/64)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"ABS[]",i),n.push(Math.abs(i))},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"NEG[]",i),n.push(-i)},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"FLOOR[]",i),n.push(64*Math.floor(i/64))},function(e){var n=e.stack,i=n.pop();t.DEBUG&&console.log(e.step,"CEILING[]",i),n.push(64*Math.ceil(i/64))},_n.bind(void 0,0),_n.bind(void 0,1),_n.bind(void 0,2),_n.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"WCVTF[]",i,r),e.cvt[r]=i*e.ppem/e.font.unitsPerEm},xn.bind(void 0,2),xn.bind(void 0,3),Sn.bind(void 0,1),Sn.bind(void 0,2),Sn.bind(void 0,3),function(e){var n,i=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SROUND[]",i),e.round=Yt,192&i){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,48&i){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}i&=15,e.srThreshold=0===i?0:(i/8-.5)*n},function(e){var n,i=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"S45ROUND[]",i),e.round=Yt,192&i){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,48&i){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}i&=15,e.srThreshold=0===i?0:(i/8-.5)*n},void 0,void 0,function(e){t.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Ht},void 0,function(e){t.DEBUG&&console.log(e.step,"RUTG[]"),e.round=qt},function(e){t.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Wt},hn,hn,void 0,void 0,void 0,void 0,void 0,function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANCTRL[]",n)},Cn.bind(void 0,0),Cn.bind(void 0,1),function(e){var n=e.stack,i=n.pop(),r=0;t.DEBUG&&console.log(e.step,"GETINFO[]",i),1&i&&(r=35),32&i&&(r|=4096),n.push(r)},void 0,function(e){var n=e.stack,i=n.pop(),r=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"ROLL[]"),n.push(r),n.push(i),n.push(o)},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"MAX[]",i,r),n.push(Math.max(r,i))},function(e){var n=e.stack,i=n.pop(),r=n.pop();t.DEBUG&&console.log(e.step,"MIN[]",i,r),n.push(Math.min(r,i))},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANTYPE[]",n)},function(e){var n=e.stack.pop(),i=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"INSTCTRL[]",n,i),n){case 1:return void(e.inhibitGridFit=!!i);case 2:return void(e.ignoreCvt=!!i);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Tn.bind(void 0,1),Tn.bind(void 0,2),Tn.bind(void 0,3),Tn.bind(void 0,4),Tn.bind(void 0,5),Tn.bind(void 0,6),Tn.bind(void 0,7),Tn.bind(void 0,8),Mn.bind(void 0,1),Mn.bind(void 0,2),Mn.bind(void 0,3),Mn.bind(void 0,4),Mn.bind(void 0,5),Mn.bind(void 0,6),Mn.bind(void 0,7),Mn.bind(void 0,8),In.bind(void 0,0,0,0,0,0),In.bind(void 0,0,0,0,0,1),In.bind(void 0,0,0,0,0,2),In.bind(void 0,0,0,0,0,3),In.bind(void 0,0,0,0,1,0),In.bind(void 0,0,0,0,1,1),In.bind(void 0,0,0,0,1,2),In.bind(void 0,0,0,0,1,3),In.bind(void 0,0,0,1,0,0),In.bind(void 0,0,0,1,0,1),In.bind(void 0,0,0,1,0,2),In.bind(void 0,0,0,1,0,3),In.bind(void 0,0,0,1,1,0),In.bind(void 0,0,0,1,1,1),In.bind(void 0,0,0,1,1,2),In.bind(void 0,0,0,1,1,3),In.bind(void 0,0,1,0,0,0),In.bind(void 0,0,1,0,0,1),In.bind(void 0,0,1,0,0,2),In.bind(void 0,0,1,0,0,3),In.bind(void 0,0,1,0,1,0),In.bind(void 0,0,1,0,1,1),In.bind(void 0,0,1,0,1,2),In.bind(void 0,0,1,0,1,3),In.bind(void 0,0,1,1,0,0),In.bind(void 0,0,1,1,0,1),In.bind(void 0,0,1,1,0,2),In.bind(void 0,0,1,1,0,3),In.bind(void 0,0,1,1,1,0),In.bind(void 0,0,1,1,1,1),In.bind(void 0,0,1,1,1,2),In.bind(void 0,0,1,1,1,3),In.bind(void 0,1,0,0,0,0),In.bind(void 0,1,0,0,0,1),In.bind(void 0,1,0,0,0,2),In.bind(void 0,1,0,0,0,3),In.bind(void 0,1,0,0,1,0),In.bind(void 0,1,0,0,1,1),In.bind(void 0,1,0,0,1,2),In.bind(void 0,1,0,0,1,3),In.bind(void 0,1,0,1,0,0),In.bind(void 0,1,0,1,0,1),In.bind(void 0,1,0,1,0,2),In.bind(void 0,1,0,1,0,3),In.bind(void 0,1,0,1,1,0),In.bind(void 0,1,0,1,1,1),In.bind(void 0,1,0,1,1,2),In.bind(void 0,1,0,1,1,3),In.bind(void 0,1,1,0,0,0),In.bind(void 0,1,1,0,0,1),In.bind(void 0,1,1,0,0,2),In.bind(void 0,1,1,0,0,3),In.bind(void 0,1,1,0,1,0),In.bind(void 0,1,1,0,1,1),In.bind(void 0,1,1,0,1,2),In.bind(void 0,1,1,0,1,3),In.bind(void 0,1,1,1,0,0),In.bind(void 0,1,1,1,0,1),In.bind(void 0,1,1,1,0,2),In.bind(void 0,1,1,1,0,3),In.bind(void 0,1,1,1,1,0),In.bind(void 0,1,1,1,1,1),In.bind(void 0,1,1,1,1,2),In.bind(void 0,1,1,1,1,3)];var Dn=Array.from||function(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Pn(e){(e=e||{}).empty||(At(e.familyName,"When creating a new Font object, familyName is required."),At(e.styleName,"When creating a new Font object, styleName is required."),At(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),At(e.ascender,"When creating a new Font object, ascender is required."),At(e.descender,"When creating a new Font object, descender is required."),At(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new _e.GlyphSet(this,e.glyphs||[]),this.encoding=new ge(this),this.position=new Tt(this),this.substitution=new Mt(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new $t(this):void 0}})}function An(e,t){var n=JSON.stringify(e),i=256;for(var r in t){var o=parseInt(r);if(o&&!(o<256)){if(JSON.stringify(t[r])===n)return o;i<=o&&(i=o+1)}}return t[i]=e,i}function En(e,t,n){var i=An(t.name,n);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:i}]}function Ln(e,t,n){var i={},r=new le.Parser(e,t);return i.tag=r.parseTag(),i.minValue=r.parseFixed(),i.defaultValue=r.parseFixed(),i.maxValue=r.parseFixed(),r.skip("uShort",1),i.name=n[r.parseUShort()]||{},i}function Nn(e,t,n,i){for(var r=[{name:"nameID_"+e,type:"USHORT",value:An(t.name,i)},{name:"flags_"+e,type:"USHORT",value:0}],o=0;o<n.length;++o){var a=n[o].tag;r.push({name:"axis_"+e+" "+a,type:"FIXED",value:t.coordinates[a]<<16})}return r}function Fn(e,t,n,i){var r={},o=new le.Parser(e,t);r.name=i[o.parseUShort()]||{},o.skip("uShort",1),r.coordinates={};for(var a=0;a<n.length;++a)r.coordinates[n[a].tag]=o.parseFixed();return r}Pn.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},Pn.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},Pn.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n},Pn.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var n=Dn(e),i=[],r=0;r<n.length;r+=1){var o=n[r];i.push(this.charToGlyphIndex(o))}var a=i.length;if(t.features){var s=t.script||this.substitution.getDefaultScriptName(),l=[];t.features.liga&&(l=l.concat(this.substitution.getFeature("liga",s,t.language))),t.features.rlig&&(l=l.concat(this.substitution.getFeature("rlig",s,t.language)));for(var c=0;c<a;c+=1)for(var d=0;d<l.length;d++){for(var u=l[d],h=u.sub,p=h.length,f=0;f<p&&h[f]===i[c+f];)f++;f===p&&(i.splice(c,p,u.by),a=a-p+1)}}for(var g=new Array(a),m=this.glyphs.get(0),v=0;v<a;v+=1)g[v]=this.glyphs.get(i[v])||m;return g},Pn.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},Pn.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),n=this.glyphs.get(t);return n||(n=this.glyphs.get(0)),n},Pn.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},Pn.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,e,t):this.kerningPairs[e+","+t]||0},Pn.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Pn.prototype.forEachGlyph=function(e,t,n,i,r,o){t=void 0!==t?t:0,n=void 0!==n?n:0,i=void 0!==i?i:72,r=r||this.defaultRenderOptions;var a,s=1/this.unitsPerEm*i,l=this.stringToGlyphs(e,r);if(r.kerning){var c=r.script||this.position.getDefaultScriptName();a=this.position.getKerningTables(c,r.language)}for(var d=0;d<l.length;d+=1){var u=l[d];o.call(this,u,t,n,i,r),u.advanceWidth&&(t+=u.advanceWidth*s),r.kerning&&d<l.length-1&&(t+=(a?this.position.getKerningValue(a,u.index,l[d+1].index):this.getKerningValue(u,l[d+1]))*s),r.letterSpacing?t+=r.letterSpacing*i:r.tracking&&(t+=r.tracking/1e3*i)}return t},Pn.prototype.getPath=function(e,t,n,i,r){var o=new P;return this.forEachGlyph(e,t,n,i,r,(function(e,t,n,i){var a=e.getPath(t,n,i,r,this);o.extend(a)})),o},Pn.prototype.getPaths=function(e,t,n,i,r){var o=[];return this.forEachGlyph(e,t,n,i,r,(function(e,t,n,i){var a=e.getPath(t,n,i,r,this);o.push(a)})),o},Pn.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,(function(){}))},Pn.prototype.draw=function(e,t,n,i,r,o){this.getPath(t,n,i,r,o).draw(e)},Pn.prototype.drawPoints=function(e,t,n,i,r,o){this.forEachGlyph(t,n,i,r,o,(function(t,n,i,r){t.drawPoints(e,n,i,r)}))},Pn.prototype.drawMetrics=function(e,t,n,i,r,o){this.forEachGlyph(t,n,i,r,o,(function(t,n,i,r){t.drawMetrics(e,n,i,r)}))},Pn.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},Pn.prototype.validate=function(){var e=this;function t(t){var n=e.getEnglishName(t);n&&n.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},Pn.prototype.toTables=function(){return kt.fontToTable(this)},Pn.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Pn.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0;i<e.length;i++)n[i]=e[i];return t},Pn.prototype.download=function(t){var i=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");t=t||i.replace(/\s/g,"")+"-"+r+".otf";var o=this.toArrayBuffer();if("undefined"!=typeof window)window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,o.byteLength,(function(e){e.root.getFile(t,{create:!0},(function(e){e.createWriter((function(t){var n=new DataView(o),i=new Blob([n],{type:"font/opentype"});t.write(i),t.addEventListener("writeend",(function(){location.href=e.toURL()}),!1)}))}))}),(function(e){throw new Error(e.name+": "+e.message)}));else{var a=n(347),s=function(t){for(var n=new e(t.byteLength),i=new Uint8Array(t),r=0;r<n.length;++r)n[r]=i[r];return n}(o);a.writeFileSync(t,s)}},Pn.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Pn.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Pn.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Rn={make:function(e,t){var n=new ee.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);n.offsetToData=n.sizeOf();for(var i=0;i<e.axes.length;i++)n.fields=n.fields.concat(En(i,e.axes[i],t));for(var r=0;r<e.instances.length;r++)n.fields=n.fields.concat(Nn(r,e.instances[r],e.axes,t));return n},parse:function(e,t,n){var i=new le.Parser(e,t),r=i.parseULong();L.argument(65536===r,"Unsupported fvar table version.");var o=i.parseOffset16();i.skip("uShort",1);for(var a=i.parseUShort(),s=i.parseUShort(),l=i.parseUShort(),c=i.parseUShort(),d=[],u=0;u<a;u++)d.push(Ln(e,t+o+u*s,n));for(var h=[],p=t+o+a*s,f=0;f<l;f++)h.push(Fn(e,p+f*c,d,n));return{axes:d,instances:h}}},On=new Array(10);On[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(ae.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(ae.coverage),values:this.parseValueRecordList()}:void L.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},On[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();L.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var n=this.parsePointer(ae.coverage),i=this.parseUShort(),r=this.parseUShort();if(1===t)return{posFormat:t,coverage:n,valueFormat1:i,valueFormat2:r,pairSets:this.parseList(ae.pointer(ae.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(r)}}))))};if(2===t){var o=this.parsePointer(ae.classDef),a=this.parsePointer(ae.classDef),s=this.parseUShort(),l=this.parseUShort();return{posFormat:t,coverage:n,valueFormat1:i,valueFormat2:r,classDef1:o,classDef2:a,class1Count:s,class2Count:l,classRecords:this.parseList(s,ae.list(l,(function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(r)}})))}}},On[3]=function(){return{error:"GPOS Lookup 3 not supported"}},On[4]=function(){return{error:"GPOS Lookup 4 not supported"}},On[5]=function(){return{error:"GPOS Lookup 5 not supported"}},On[6]=function(){return{error:"GPOS Lookup 6 not supported"}},On[7]=function(){return{error:"GPOS Lookup 7 not supported"}},On[8]=function(){return{error:"GPOS Lookup 8 not supported"}},On[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Bn=new Array(10),zn={parse:function(e,t){var n=new ae(e,t=t||0),i=n.parseVersion(1);return L.argument(1===i||1.1===i,"Unsupported GPOS table version "+i),1===i?{version:i,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(On)}:{version:i,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(On),variations:n.parseFeatureVariationsList()}},make:function(e){return new ee.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ee.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new ee.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new ee.LookupList(e.lookups,Bn)}])}},Un={parse:function(e,t){var n=new le.Parser(e,t),i=n.parseUShort();if(0===i)return function(e){var t={};e.skip("uShort");var n=e.parseUShort();L.argument(0===n,"Unsupported kern sub-table version."),e.skip("uShort",2);var i=e.parseUShort();e.skip("uShort",3);for(var r=0;r<i;r+=1){var o=e.parseUShort(),a=e.parseUShort(),s=e.parseShort();t[o+","+a]=s}return t}(n);if(1===i)return function(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var n=255&e.parseUShort();if(e.skip("uShort"),0===n){var i=e.parseUShort();e.skip("uShort",3);for(var r=0;r<i;r+=1){var o=e.parseUShort(),a=e.parseUShort(),s=e.parseShort();t[o+","+a]=s}}return t}(n);throw new Error("Unsupported kern table version ("+i+").")}},jn={parse:function(e,t,n,i){for(var r=new le.Parser(e,t),o=i?r.parseUShort:r.parseULong,a=[],s=0;s<n+1;s+=1){var l=o.call(r);i&&(l*=2),a.push(l)}return a}};function $n(e,t){n(347).readFile(e,(function(e,n){if(e)return t(e.message);t(null,Pt(n))}))}function Hn(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.response?t(null,n.response):t("Font could not be loaded: "+n.statusText)},n.onerror=function(){t("Font could not be loaded")},n.send()}function Vn(e,t){for(var n=[],i=12,r=0;r<t;r+=1){var o=le.getTag(e,i),a=le.getULong(e,i+4),s=le.getULong(e,i+8),l=le.getULong(e,i+12);n.push({tag:o,checksum:a,offset:s,length:l,compression:!1}),i+=16}return n}function Gn(e,t){if("WOFF"===t.compression){var n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),i=new Uint8Array(t.length);if(M(n,i),i.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(i.buffer,0),offset:0}}return{data:e,offset:t.offset}}function Kn(e){var t,n,i,r,o,a,s,l,c,d,u,h,p,f,g=new Pn({empty:!0}),m=new DataView(e,0),v=[],b=le.getTag(m,0);if(b===String.fromCharCode(0,1,0,0)||"true"===b||"typ1"===b)g.outlinesFormat="truetype",v=Vn(m,i=le.getUShort(m,4));else if("OTTO"===b)g.outlinesFormat="cff",v=Vn(m,i=le.getUShort(m,4));else{if("wOFF"!==b)throw new Error("Unsupported OpenType signature "+b);var y=le.getTag(m,4);if(y===String.fromCharCode(0,1,0,0))g.outlinesFormat="truetype";else{if("OTTO"!==y)throw new Error("Unsupported OpenType flavor "+b);g.outlinesFormat="cff"}v=function(e,t){for(var n=[],i=44,r=0;r<t;r+=1){var o=le.getTag(e,i),a=le.getULong(e,i+4),s=le.getULong(e,i+8),l=le.getULong(e,i+12),c=void 0;c=s<l&&"WOFF",n.push({tag:o,offset:a,compression:c,compressedLength:s,length:l}),i+=20}return n}(m,i=le.getUShort(m,12))}for(var w=0;w<i;w+=1){var k=v[w],x=void 0;switch(k.tag){case"cmap":x=Gn(m,k),g.tables.cmap=de.parse(x.data,x.offset),g.encoding=new me(g.tables.cmap);break;case"cvt ":x=Gn(m,k),f=new le.Parser(x.data,x.offset),g.tables.cvt=f.parseShortList(k.length/2);break;case"fvar":o=k;break;case"fpgm":x=Gn(m,k),f=new le.Parser(x.data,x.offset),g.tables.fpgm=f.parseByteList(k.length);break;case"head":x=Gn(m,k),g.tables.head=He.parse(x.data,x.offset),g.unitsPerEm=g.tables.head.unitsPerEm,t=g.tables.head.indexToLocFormat;break;case"hhea":x=Gn(m,k),g.tables.hhea=Ve.parse(x.data,x.offset),g.ascender=g.tables.hhea.ascender,g.descender=g.tables.hhea.descender,g.numberOfHMetrics=g.tables.hhea.numberOfHMetrics;break;case"hmtx":c=k;break;case"ltag":x=Gn(m,k),n=Ke.parse(x.data,x.offset);break;case"maxp":x=Gn(m,k),g.tables.maxp=qe.parse(x.data,x.offset),g.numGlyphs=g.tables.maxp.numGlyphs;break;case"name":h=k;break;case"OS/2":x=Gn(m,k),g.tables.os2=lt.parse(x.data,x.offset);break;case"post":x=Gn(m,k),g.tables.post=ct.parse(x.data,x.offset),g.glyphNames=new be(g.tables.post);break;case"prep":x=Gn(m,k),f=new le.Parser(x.data,x.offset),g.tables.prep=f.parseByteList(k.length);break;case"glyf":a=k;break;case"loca":u=k;break;case"CFF ":r=k;break;case"kern":d=k;break;case"GPOS":s=k;break;case"GSUB":l=k;break;case"meta":p=k}}var _=Gn(m,h);if(g.tables.name=at.parse(_.data,_.offset,n),g.names=g.tables.name,a&&u){var S=0===t,C=Gn(m,u),T=jn.parse(C.data,C.offset,g.numGlyphs,S),M=Gn(m,a);g.glyphs=jt.parse(M.data,M.offset,T,g)}else{if(!r)throw new Error("Font doesn't contain TrueType or CFF outlines.");var I=Gn(m,r);$e.parse(I.data,I.offset,g)}var D=Gn(m,c);if(Ge.parse(D.data,D.offset,g.numberOfHMetrics,g.numGlyphs,g.glyphs),function(e){for(var t,n=e.tables.cmap.glyphIndexMap,i=Object.keys(n),r=0;r<i.length;r+=1){var o=i[r],a=n[o];(t=e.glyphs.get(a)).addUnicode(parseInt(o))}for(var s=0;s<e.glyphs.length;s+=1)t=e.glyphs.get(s),e.cffEncoding?e.isCIDFont?t.name="gid"+s:t.name=e.cffEncoding.charset[s]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(s))}(g),d){var P=Gn(m,d);g.kerningPairs=Un.parse(P.data,P.offset)}else g.kerningPairs={};if(s){var A=Gn(m,s);g.tables.gpos=zn.parse(A.data,A.offset),g.position.init()}if(l){var E=Gn(m,l);g.tables.gsub=pt.parse(E.data,E.offset)}if(o){var L=Gn(m,o);g.tables.fvar=Rn.parse(L.data,L.offset,g.names)}if(p){var N=Gn(m,p);g.tables.meta=ft.parse(N.data,N.offset),g.metas=g.tables.meta}return g}t.Font=Pn,t.Glyph=we,t.Path=P,t.BoundingBox=D,t._parse=le,t.parse=Kn,t.load=function(e,t){("undefined"==typeof window?$n:Hn)(e,(function(e,n){if(e)return t(e);var i;try{i=Kn(n)}catch(e){return t(e,null)}return t(null,i)}))},t.loadSync=function(e){return Kn(Pt(n(347).readFileSync(e)))},Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(16).Buffer)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(20),n(295),n(36),n(8),n(412)],void 0===(r=function(e,t,n,i,r,o,a,s,l){"use strict";return n.View.extend({initialize:function(e){n.View.prototype.initialize.call(this),this.options=e},render:function(){var e=this.options.fontFile,t=this.options.fontInfoPromise,n=this.options.fontName,i=this.options.acFontFace,r=this.options.role,o=this.options.toBeReplaced,a=this.options.hideActions,c={};if(e&&t?(c.name=s.getString("custom-font-manager-face-loading"),c.preview="",c.preview_font_family="adobe-clean",c.disable_actions="disable",c.fontFile=e,this.$el.removeClass("cfm-font-empty"),this.$el.removeClass("cfm-font-empty-body-normal")):i?(this.options.subgroupName=i.subgroupName(),c.name=i.friendlyName(),c.preview=i.friendlyName(),this.$el.removeClass("cfm-font-empty"),this.$el.removeClass("cfm-font-empty-body-normal")):(c.name=n,c.hide_actions=!0,c.add_font=!0,this.$el.addClass("cfm-font-empty"),"is-body-font"==r&&this.$el.addClass("cfm-font-empty-body-normal")),c.toBeReplaced=o,a&&(c.hide_actions=a,this.$el.addClass("cfm-font-empty")),t&&t.then(this._handleFontInfo.bind(this)).done(),this.$el.addClass("cfm-font"),this.$el.attr("data-id",this.cid),this.$el.html(s.mustacheRender(l,c)),i){var d=this.$el.find(".cfm-font-preview"),u=d.outerHeight();i.$loadFontCSS(d,14);var h=parseInt(d.css("font-size"));h>=u&&(d.css("height",h+"px"),d.css("line-height",h+"px"),d.parent().css("height",h+"px"),d.parent().css("line-height",h+"px"))}return this.bindActions(),this},getSubgroupName:function(){return this.options.subgroupName},getFontFace:function(){return this.options&&this.options.acFontFace},setFontFace:function(e){this.options=this.options||{},this.options.acFontFace=e},setFontName:function(e){this.options=this.options||{},this.options.fontName=e},setToBeReplaced:function(){this.options.toBeReplaced=!0,this.options.hideActions=!0},getFontName:function(e){return this.options.fontName},setFontFile:function(e){this.options=this.options||{},this.options.fontFile=e},getFontFile:function(){return this.options&&this.options.fontFile},setFontInfoPromise:function(e){this.options=this.options||{},this.options.fontInfoPromise=e},getRole:function(){return this.options&&this.options.role},setRole:function(e){this.options=this.options||{},this.options.role=e},_loadFontFromLocalFile:function(n,r){var o=new FileReader,a=i.defer();return o.onload=function(i){var s="opentype";r.name.toLowerCase().endsWith(".ttf")&&(s="truetype");var l=t.trim(n.preferredFamilyName||n.familyName);t.trim(n.preferredSubfamilyName||n.subfamilyName);e("head").append('<style>\n@font-face {\n  font-family: "'+this._getCSSFamilyName(l)+'";\n font-weight:'+(n.weight||400)+';\n  src: url("'+o.result+'") format("'+s+'");\n}\n</style>'),a.resolve()}.bind(this),o.readAsDataURL(r),a.promise},_getCSSFamilyName:function(e){return this.options.parentView&&this.options.parentView._getCSSFamilyName?this.options.parentView._getCSSFamilyName(e):e.replace(/\s+/g,"-")},_handleFontInfo:function(e){var n,i=this.options.fontFile,r=t.trim(e.preferredFamilyName||e.familyName),o=t.trim(e.preferredSubfamilyName||e.subfamilyName)||"Regular",a={};this.trigger("cfm-got-font-info",{subgroupName:r,fullName:r+" "+o,info:e}),e.info&&e.info.FILE_TOO_BIG||!this.options.fontInfoPromise||!this.options.fontFile||(this.options.fontInfo=e,this.options.subgroupName=r,this.options.fontName=r+" "+o,a.preview=r+" "+o,a.preview_font_family=this._getCSSFamilyName(r),a.preview_font_weight=e.weight,a.preview_font_style=e.style,a.disable_actions="",a.name=r+" "+o,this._loadFontFromLocalFile(e,i).then(function(){this.$el.html(s.mustacheRender(l,a)),(n=this.$el.find(".cfm-font-preview")).addClass("font-loading"),this._styleWithMetrics(n,e),this.bindActions()}.bind(this)).done(),this.bindActions())},_styleWithMetrics:function(e,n){var i=t.trim(n.preferredFamilyName||n.familyName);t.trim(n.preferredSubfamilyName||n.subfamilyName);o.generateMetricsAsync(n.fullName,this._getCSSFamilyName(i),n,!0).then((function(t){var n=a.getFontNormalized(15,t),i=(n.size,e.outerHeight());e.css("font-size",n.size+"px"),n.size>=i&&(e.css("height",n.size+"px"),e.css("line-height",n.size+"px"),e.parent().css("line-height",n.size+"px"),e.parent().css("height",n.size+"px")),e.removeClass("font-loading")})).done()},bindActions:function(){this.$el.find(".cfm-font-delete").on("mouseover",function(e){this.trigger("cfm-item-delete-mouseover",{})}.bind(this)),this.$el.find(".cfm-font-delete").on("mouseout",function(e){this.trigger("cfm-item-delete-mouseout",{})}.bind(this)),this.$el.find(".cfm-font-replace").on("mouseover",function(e){this.trigger("cfm-item-replace-mouseover",{})}.bind(this)),this.$el.find(".cfm-font-replace").on("mouseout",function(e){this.trigger("cfm-item-replace-mouseout",{})}.bind(this)),this.$el.find(".cfm-font-delete").on("click",this._handleDeleteClick.bind(this)),this.$el.find(".cfm-font-replace").on("click",this._handleReplaceClick.bind(this)),this.options.hideReplace&&this.$el.find(".cfm-font-replace").addClass("hide"),this.options.disableReplace&&this.$el.find(".cfm-font-replace").addClass("replace-disabled"),this.options.disableDelete&&this.$el.find(".cfm-font-delete").addClass("delete-disabled"),this.$el.find(".cfm-font-file-missing").on("click",this._handleAddClick.bind(this)),this.actionsBound=!0},_handleAddClick:function(e){e.preventDefault(),e.stopPropagation(),this.trigger("cfm-item-add",{})},_handleReplaceClick:function(e){e.preventDefault(),e.stopPropagation(),this.trigger("cfm-item-replace",e)},_handleDeleteClick:function(e){e.preventDefault(),e.stopPropagation(),this.deleted=!0,this.trigger("cfm-item-delete",e)}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<span class="cfm-font-name{{# toBeReplaced }} strikethrough{{/ toBeReplaced }}">{{name}}<span class="cfm-font-exclamation"></span></span>\n{{# add_font }}\n<span class="cfm-font-preview cfm-font-file-missing">{{ custom-font-manager-font-file-missing }}</span>\n{{/ add_font }}\n{{^ add_font }}\n<span class="cfm-font-preview{{# toBeReplaced }} strikethrough{{/ toBeReplaced }}" style=\'font-family: "{{preview_font_family}}";font-weight: {{preview_font_weight}};font-style: {{preview_font_style}};\'>{{preview}}<div class="font-loading-spinner"></div></span>\n{{/ add_font }}\n<span class="cfm-font-actions{{^ hide_actions }} show{{/ hide_actions }}">\n    <a href="#" class="cfm-font-action cfm-font-replace {{disable_actions}}"></a>\n    <a href="#" class="cfm-font-action cfm-font-delete {{disable_actions}}"></a>\n</span>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(223),n(8)],void 0===(r=function(e,t,n,i,r){"use strict";var o=[{feel:r.getString("font-picker-feels-modern"),fontCards:[{fonts:[{name:"Futura PT Medium",role:"headline-font",lookupKey:"229bc085337038400404c908f6ea0996"},{name:"PT Serif n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"34ba94a3246371767d7be10ae7ef1d89"},{name:"PT Serif i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"34ba94a3246371767d60f00cfeea1f"},{name:"PT Serif n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"34ba94a3246371767d6beb01f6"},{name:"PT Serif i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"34ba94a3246371767d6beb01f6a3358fb2438db7"}]},{fonts:[{name:"Lato Bold",role:"headline-font",lookupKey:"288fc09f6c53777c34"},{name:"Acumin Pro Semi Condensed n3",role:"body-font",secondaryRole:"is-body-font",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d"},{name:"Acumin Pro Semi Condensed i3",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b"},{name:"Acumin Pro Semi Condensed n6",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c"},{name:"Acumin Pro Semi Condensed i6",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2"}]},{fonts:[{name:"Azo Sans Bold",role:"headline-font",lookupKey:"278fd89c347f793d1246e809"},{name:"Proxima Nova n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a6"},{name:"Proxima Nova n7",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056"},{name:"Proxima Nova i4",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"349cdb88287c79301e46f20cbfc11397b7"},{name:"Proxima Nova i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467"}]},{fonts:[{name:"PT Sans Narrow Bold",role:"headline-font",lookupKey:"34ba94a3207f6b301e48f61ffdf451b9bc4380"},{name:"PT Serif n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"34ba94a3246371767d7be10ae7ef1d89"},{name:"PT Serif i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"34ba94a3246371767d60f00cfeea1f"},{name:"PT Serif n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"34ba94a3246371767d6beb01f6"},{name:"PT Serif i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"34ba94a3246371767d6beb01f6a3358fb2438db7"}]}]},{feel:r.getString("font-picker-feels-classic"),fontCards:[{fonts:[{name:"Adobe Caslon Pro Regular",role:"headline-font",lookupKey:"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76"},{name:"Adobe Caslon Pro n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76"},{name:"Adobe Caslon Pro i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"258adb9224315b712345eb03b2d30e94fe6690b5dceede"},{name:"Adobe Caslon Pro n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"258adb9224315b712345eb03b2d30e94fe6d8bb8d4"},{name:"Adobe Caslon Pro i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75"}]},{fonts:[{name:"LTC Bodoni 175 Italic",role:"headline-font",lookupKey:"28baf7d0037e7c7f3e40a45ca5b651a9b64891b8d1f5"},{name:"Acumin Pro Semi Condensed n3",role:"body-font",secondaryRole:"is-body-font",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d"},{name:"Acumin Pro Semi Condensed i3",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b"},{name:"Acumin Pro Semi Condensed n6",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c"},{name:"Acumin Pro Semi Condensed i6",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2"}]},{fonts:[{name:"Didot Headline Regular",role:"headline-font",lookupKey:"2087d09f35315075314de804fce651a9b64891b8d1f5"},{name:"PT Serif n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"34ba94a3246371767d7be10ae7ef1d89"},{name:"PT Serif i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"34ba94a3246371767d60f00cfeea1f"},{name:"PT Serif n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"34ba94a3246371767d6beb01f6"},{name:"PT Serif i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"34ba94a3246371767d6beb01f6a3358fb2438db7"}]},{fonts:[{name:"PT Serif Regular",role:"headline-font",lookupKey:"34ba94a3246371767d7be10ae7ef1d89"},{name:"PT Sans n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"34ba94a3207f6b3d024ce318fee20e"},{name:"PT Sans i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"34ba94a3207f6b3d195de501fbe0"},{name:"PT Sans n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"34ba94a3207f6b3d1246e809"},{name:"PT Sans i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"34ba94a3207f6b3d1246e809b2ca089abf4687"}]},{fonts:[{name:"Courier Std n4",role:"headline-font",lookupKey:"2781c18228746a30035de040c0e61b8ebf4e96"},{name:"Adobe Caslon Pro n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76"},{name:"Adobe Caslon Pro i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"258adb9224315b712345eb03b2d30e94fe6690b5dceede"},{name:"Adobe Caslon Pro n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"258adb9224315b712345eb03b2d30e94fe6d8bb8d4"},{name:"Adobe Caslon Pro i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75"}]}]},{feel:r.getString("font-picker-feels-clean"),fontCards:[{fonts:[{name:"Proxima Nova Light",role:"headline-font",lookupKey:"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d"},{name:"Proxima Nova n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a6"},{name:"Proxima Nova n7",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056"},{name:"Proxima Nova i4",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"349cdb88287c79301e46f20cbfc11397b7"},{name:"Proxima Nova i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467"}]},{fonts:[{name:"Raleway Regular",role:"headline-font",lookupKey:"368fd8953670613d024ce318fee20e"},{name:"Lato n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"288fc09f6c437d772545e51f"},{name:"Lato i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"288fc09f6c586c713c40e7"},{name:"Lato n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"288fc09f6c53777c34"},{name:"Lato i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"288fc09f6c5374713342a424e6e21092b0"}]},{fonts:[{name:"PT Sans Narrow Regular",role:"headline-font",lookupKey:"34ba94a3207f6b301e48f61ffdf451a9b64891b8d1f5"},{name:"PT Sans n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"34ba94a3207f6b3d024ce318fee20e"},{name:"PT Sans i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"34ba94a3207f6b3d195de501fbe0"},{name:"PT Sans n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"34ba94a3207f6b3d1246e809"},{name:"PT Sans i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"34ba94a3207f6b3d1246e809b2ca089abf4687"}]},{fonts:[{name:"Museo Sans Rounded 500",role:"headline-font",lookupKey:"299bc7952e314b713e5aa43ffdf6129fb64bc9e180b7"},{name:"Proxima Nova n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a6"},{name:"Proxima Nova n7",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056"},{name:"Proxima Nova i4",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"349cdb88287c79301e46f20cbfc11397b7"},{name:"Proxima Nova i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467"}]}]},{feel:r.getString("font-picker-feels-loud"),fontCards:[{fonts:[{name:"Proxima Nova Black",role:"headline-font",lookupKey:"349cdb88287c79301e46f20cbfc1109ab044"},{name:"Proxima Nova n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a6"},{name:"Proxima Nova n7",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056"},{name:"Proxima Nova i4",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"349cdb88287c79301e46f20cbfc11397b7"},{name:"Proxima Nova i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467"}]},{fonts:[{name:"Raleway Heavy",role:"headline-font",lookupKey:"368fd8953670613d184ce51beb"},{name:"PT Serif n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"34ba94a3246371767d7be10ae7ef1d89"},{name:"PT Serif i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"34ba94a3246371767d60f00cfeea1f"},{name:"PT Serif n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"34ba94a3246371767d6beb01f6"},{name:"PT Serif i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"34ba94a3246371767d6beb01f6a3358fb2438db7"}]},{fonts:[{name:"Museo Slab 1000",role:"headline-font",lookupKey:"299bc7952e314b7c314ba95ca2b34c"},{name:"Museo Slab n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"299bc7952e314b7c314ba95ea2b3"},{name:"Museo Slab i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"299bc7952e314b7c314ba95ea2b35cb2a74e88bdd3"},{name:"Museo Slab n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"299bc7952e314b7c314ba95aa2b3"},{name:"Museo Slab i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"299bc7952e314b7c314ba95aa2b35cb2a74e88bdd3"}]},{fonts:[{name:"Clarendon Text Pro Bold",role:"headline-font",lookupKey:"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9"},{name:"PT Sans n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"34ba94a3207f6b3d024ce318fee20e"},{name:"PT Sans i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"34ba94a3207f6b3d195de501fbe0"},{name:"PT Sans n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"34ba94a3207f6b3d1246e809"},{name:"PT Sans i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"34ba94a3207f6b3d1246e809b2ca089abf4687"}]}]},{feel:r.getString("font-picker-feels-natural"),fontCards:[{fonts:[{name:"Local Brewery Bold",role:"headline-font",lookupKey:"2881d7912d315a62355ee11febae3e94bf4b"},{name:"Adobe Caslon Pro n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76"},{name:"Adobe Caslon Pro i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"258adb9224315b712345eb03b2d30e94fe6690b5dceede"},{name:"Adobe Caslon Pro n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"258adb9224315b712345eb03b2d30e94fe6d8bb8d4"},{name:"Adobe Caslon Pro i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75"}]},{fonts:[{name:"Voltage Bold",role:"headline-font",lookupKey:"3281d88420767d3d1246e809"},{name:"PT Sans n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"34ba94a3207f6b3d024ce318fee20e"},{name:"PT Sans i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"34ba94a3207f6b3d195de501fbe0"},{name:"PT Sans n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"34ba94a3207f6b3d1246e809"},{name:"PT Sans i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"34ba94a3207f6b3d1246e809b2ca089abf4687"}]},{fonts:[{name:"Wanderlust Shine Regular",role:"headline-font",lookupKey:"338fda9424637465235da43efaea129efe7d81b3c5ebdc76"},{name:"Proxima Nova n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a6"},{name:"Proxima Nova n7",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056"},{name:"Proxima Nova i4",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"349cdb88287c79301e46f20cbfc11397b7"},{name:"Proxima Nova i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467"}]},{fonts:[{name:"Bellfort Script Regular",role:"headline-font",lookupKey:"268bd89c277e6a64707ae71ffbf308d6814a83a1dce6cf"},{name:"Calluna n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"278fd89c347f793d024ce318fee20e"},{name:"Calluna i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"278fd89c347f793d195de501fbe0"},{name:"Calluna n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"278fd89c347f793d1246e809"},{name:"Calluna i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"278fd89c347f793d1246e809b2ca089abf4687"}]},{fonts:[{name:"Local Brewery Four",role:"headline-font",lookupKey:"2881d7912d315a62355ee11feba33a94a65dc986d5e0c86875bb"},{name:"PT Serif n4",role:"body-font",secondaryRole:"is-body-font",lookupKey:"34ba94a3246371767d7be10ae7ef1d89"},{name:"PT Serif i4",role:"body-font-italic",secondaryRole:"is-body-font-italic",lookupKey:"34ba94a3246371767d60f00cfeea1f"},{name:"PT Serif n7",role:"body-font-bold",secondaryRole:"is-body-font-bold",lookupKey:"34ba94a3246371767d6beb01f6"},{name:"PT Serif i7",role:"body-font-bold-italic",secondaryRole:"is-body-font-bold-italic",lookupKey:"34ba94a3246371767d6beb01f6a3358fb2438db7"}]}]}],a={};return t.each(i.sparkfonts,(function(e,n){t.each(e.faces,(function(t){a[t.lookupKey]={subgroup:e,subgroupName:n,face:t}}))})),t.each(o,(function(e){t.each(e.fontCards,(function(e){t.each(e.fonts,(function(e){var t=e.lookupKey,n=a[t],i=n.face.metrics.weight;i>900&&(i=900),i<100&&(i=100),e.weight=i,e.style="i"==n.face.typekitKey.charAt(0)?"italic":"normal",e.subgroupName=n.subgroupName,e.name=n.subgroupName+" "+n.face.name,e.css_name=n.subgroup.cssName}))}))})),o}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(8),n(112),n(4)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s=o.LibraryImageLinksModel;function l(){this.result=null,this._reachedEnd=!1,this.collection=new i.Collection,this.collection.model=s,this._lastOpts=null}function c(e,t){if(!e)throw new Error("Argument Error: Required data parameter must be non-null");this.data=e,this._items=[],this._modelAttrs=[],this.filter=t,this._parseData()}function d(e){if(!e)throw new Error("Argument Error: Required data parameter must be non-null");this.data=e,this.links={},this._parseData()}return l.apiHost="https://"+(a.dooplo||"cc-api-dooplo.adobe.io"),l.searchPath="/api/v1/assets/search",l.infoPath="/api/v1/assets/",l.apiKey=a.cpkey,l.SOURCE_CREDIT_INFOS={flickr:{hoverName:"Flickr",sourcesName:"Flickr",link:"https://www.flickr.com/",creditOrderIndex:1},pixabay:{hoverName:"Pixabay",sourcesName:"Pixabay",link:r.getLocalizedPixabayURL("https://pixabay.com/"),creditOrderIndex:2},unsplash:{hoverName:"Unsplash",sourcesName:"Unsplash",link:"https://unsplash.com/",creditOrderIndex:0},bing:{hoverName:"Bing",sourcesName:"Bing",link:"http://bing.com/images/",creditOrderIndex:4},"the noun project":{hoverName:"",sourcesName:"The Noun Project",link:"https://thenounproject.com/",creditOrderIndex:3}},t.extend(l.prototype,{_shouldWeTranslateSearchRequest:function(e){if(!window.marvel.SearchController)return marvel.logger.error("[Dooplo-Request] search-controller undefined in dooplo search"),!1;if("The Noun Project"===e.source[0]&&1===e.page&&e.query.trim().length,marvel.features.hasFeature("use-translation-service-for-icon-search")){if("en"===r.getLocale().split("-")[0])if(!!marvel.features.hasFeature("icon-search-translation-specify-from-locale")||!marvel.features.hasFeature("icon-search-translation-guess-for-english"))return!1;return!0}return!1},search:function(n){var i;if(n.translation)t.isUndefined(n.translation.err)?(i=n.translation,(n=t.cloneDeep(n.originalOptions)).query=i.translatedText,this._lastTranslation=i):n=n.originalOptions;else if(this._shouldWeTranslateSearchRequest(n)){if(!this._lastTranslation||this._lastTranslation.translatedText!==n.query)return void this._getTranslatedSearchString(n).then(function(e){this.search({translation:e,originalOptions:n})}.bind(this),function(e){this.search({translation:{err:e},originalOptions:n})}.bind(this));i=this._lastTranslation}this.result=null;var r=this._getParams({query:"landscape",page:n.startPage||1,size:25,asset_type:"image",image_filter:[],source:[]},n),o=n.success,a=n.error;function s(e){var t=e.links.original.type;return n.imageFilter.includesType(t)||n.imageFilter.includesExtensionOnly(t)}var d=l.apiHost+l.searchPath;return this._lastOpts=t.extend({},r,n),e.ajax({url:d,data:r,dataType:"json",traditional:!0}).done(function(e,i,l){var d=null;if(!e||t.isEmpty(e))d=new Error("No data received");else if(e.error_code)d=new Error(e.message);else try{var u=null;"image"===r.asset_type&&(u=s),this.result=new c(e,u&&u.bind(this)),this.result.getLength()?n.add?this.collection.set(this.result._modelAttrs,{add:!0}):this.collection.reset(this.result._modelAttrs):this._reachedEnd=!0}catch(e){d=e}d?a&&a(l,"error",d):o&&o(this.result,i,l)}.bind(this)).fail(a)},_getTranslatedSearchString:function(e){var t={textToTranslate:e.query};return marvel.features.hasFeature("icon-search-translation-specify-from-locale")?t.translationType="currentToUs":(t.translationType="guessToUs",t.guessIfUs=marvel.features.hasFeature("icon-search-translation-guess-for-english")),window.marvel.SearchController.getTranslatedSearchString(t)},searchNextSet:function(e){return this._lastOpts&&this._lastOpts.page++,e=t.extend({add:!0},this._lastOpts,e),this.search(e)},reachedEnd:function(){return this._reachedEnd},_getParams:function(e,n){var i={api_key:l.apiKey};if(e=t.extend(i,e),n){var r=[];for(var o in e)r.push(o);r.unshift(n);var a=t.pick.apply(t,r);e=t.extend(e,a)}return e},getLength:function(){return this.collection.length},at:function(e){return this.collection.at(e)}}),l.getAssetInfo=function(t){var i=l.apiHost+l.infoPath+t,r=n.defer();return e.ajax({method:"GET",url:i,data:{api_key:l.apiKey},dataType:"json",success:function(e,t,n){r.resolve(e)},error:function(e,t,n){marvel.logger.error("dooplo getAssetInfo error:",{err:n,status:t,responseText:e.responseText,url:i}),r.reject(new Error("DooploRequest::getAssetInfo"))}}).done(),r.promise},t.extend(c.prototype,{_parseData:function(){for(var e=this.data._embedded.assets,t=0,n=e.length;t<n;t++){var i=e[t],r=new d(i);if(!this.filter||this.filter(r)){var o=r.getThumbURL(),a=r.getPreviewURL(),s=r.getOriginalURL();this._items.push(r),this._modelAttrs.push({source_id:i.id,title:i.title,mimeType:r.getMimeType(),image_url:s||a||o,preview_url:a||s||o,thumb_url:o||a||s})}}},getLength:function(){return this._items.length},at:function(e){return this._items[e]}}),t.extend(d.prototype,{_parseData:function(){for(var e=this.data._links.rendition,t=0,n=e.length;t<n;t++){var i=e[t];this.links[i.name]=i}},getOriginalURL:function(){return this._sanitizeURL(this.links.original.href)},getPreviewURL:function(){return this._sanitizeURL(this.links.preview.href)},getThumbURL:function(){return this._sanitizeURL(this.links.thumb.href)},getMimeType:function(){return this.links.original.type},_sanitizeURL:function(e){return 0===e.indexOf(l.apiHost)&&(e=this._addAPIKeyToURL(e)),e},_addAPIKeyToURL:function(e){var t="?";return-1!==e.indexOf("?")&&(t="&"),e+t+"api_key="+l.apiKey},getAspect:function(){return{width:this.links.thumb.width,height:this.links.thumb.height}},getThumbHoverLabel:function(){if("vector"===this.data.asset_type)return"";var e=this.data.source.name.toLowerCase(),t=l.SOURCE_CREDIT_INFOS[e];return this.data.license&&this.data.license.attribution_name?r.getString("attribution-label-by")+" "+this.data.license.attribution_name:t?t.hoverName||"":(marvel.logger.error("dooplo-request: unknown image source type for thumb hover label:"+this.data.source.name,this),"")}}),l}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(98)],void 0===(r=function(e,t,n,i){"use strict";function r(e){this.formatArr=e,this.types=t.filter(e,(function(e){return e.indexOf("/")>-1})),this.extensionsWithDot=[],this.extensionsWithoutDot=[],t.each(e,function(e){var n;e.indexOf("/")>-1||(n=t.startsWith(e,".")?e.replace(/^\./,""):e,this.extensionsWithoutDot.push(n),this.extensionsWithDot.push("."+n))}.bind(this))}return t.extend(r.prototype,{includesType:function(e){return this.types.indexOf(e)>=0},includesExtensionOnly:function(e){return this.extensionsWithoutDot.indexOf(e)>=0},includesExtension:function(e){return t.some(this.extensionsWithDot,(function(n){return t.endsWith(e,n)}))},getAcceptAttributeString:function(){return this.extensionsWithDot.concat(this.types).join(",")}}),r}.apply(t,i))||(e.exports=r)},function(e,t,n){var i=n(268),r=n(344),o=n(510),a=n(511);function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},s(t)}e.exports=s},function(e,t,n){e.exports=r;var i=n(57).EventEmitter;function r(){i.call(this)}n(14)(r,i),r.Readable=n(351),r.Writable=n(573),r.Duplex=n(574),r.Transform=n(575),r.PassThrough=n(576),r.Stream=r,r.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",l));var a=!1;function s(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(d(),0===i.listenerCount(this,"error"))throw e}function d(){n.removeListener("data",r),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("error",c),e.on("error",c),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e}},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(13),n(6),n(4),n(5),n(54),n(563),n(26),n(400),n(255),n(111),n(11)],void 0===(r=function(e,t,i,r,o,a,s,l,c,d,u,h,p,f,g){"use strict";var m,v,b=new g({color:"coral",name:"OrganizeController"});return(m=new(v=i.Model.extend({fixedCollections:null,dynamicCollections:null,myProjects:null,initialize:function(){var e;t.bindAll(this,t.functionsIn(this)),this._docRefCollection=new i.Collection,a.isValid().then(function(){return e=!0,l.featuresLoaded().then(function(){this._initProjectFilters()}.bind(this))}.bind(this)).catch((function(t){e&&b.warn("error in OrganizeController init after isValid",t)})).done()},getDocRefs:function(){return this._deferDocRefs||(this._deferDocRefs=r.defer(),this._fetchDocRefs()),this._deferDocRefs.promise},_fingerprintModels:function(){return t.map(this._docRefCollection.models,(function(e){return e.id})).join()},_sortDocRefs:function(){var e=this._fingerprintModels();this.projectFilters?this._docRefCollection.models=this.projectFilters.sortDocRefs(this._docRefCollection.models):this._docRefCollection.models=t.sortBy(this._docRefCollection.models,(function(e){var t=e.get("modified");return-(t?new Date(t):new Date).getTime()})),e!==this._fingerprintModels()&&this._docRefCollection.trigger("reset",this._docRefCollection.models)},_includeAppProjects:function(e){return!(!e.isEnabled()||!e.isaProjectFormat())&&(!this.projectFilters||this.projectFilters.shouldShowAppProjects(e))},_handleDocPublishStates:function(e){t.each(e.runningJobs,function(e){var t=e.projectid,n=this._docRefCollection.get(t);n?n.resolve().then((function(t){t.set("publishProgress",e)})):console.log("Did not find project ref: "+t)}.bind(this)),t.each(e.downloadUrls,function(e){var t=e.projectId,n=this._docRefCollection.get(t);n?n.resolve().then((function(t){t.set("downloadUrl",e.href)})):console.log("Did not find project ref: "+t)}.bind(this))},_fetchDocRefs:function(){var e=[];if(!this.myProjects||this._finishedSyncingInitialMyProjects)t.each(u.apps,function(n){this._includeAppProjects(n)&&e.push(o.ensureSyncGroup(n.getSetting("syncGroup")).then(function(e){var i=e.getCompositeRefs(),r=i.length>0;t.each(i,function(e){this._docRefCollection.add(e)}.bind(this)),n.supportsAsyncPublish()&&n.getDocPublishStates&&r&&n.getDocPublishStates().then(this._handleDocPublishStates.bind(this)).catch((function(e){console.error("Error in updating publish states: ",e)}));var o=function(t){var i,r,o;if(t.get?(i=t.get("id"),o=t.get("modified")):(i=t.name,o=t.modified),r=this._docRefCollection.findWhere({id:i})){var a=r.getResolvedDoc();a&&(o=a.getContentModifiedDate()),r.set("modified",o)}else r=e.createCompositeModelRef(i,o,{}),t.get&&r.resolveModel(t),this.projectFilters.shouldShowAppProjects(n)&&this._docRefCollection.add(r)}.bind(this);this._finishedSyncingInitialMyProjects&&(e.off("sync-add"),e.off("sync-remove"),e.off("sync-refreshed")),e.on("sync-add",function(e){e&&e.length&&(t.each(e,function(e){o(e)}.bind(this)),this._sortDocRefs())}.bind(this)),e.on("sync-remove",function(e){e&&e.length&&(t.each(e,function(e){var t=this._docRefCollection.findWhere({id:e});t&&this._docRefCollection.remove(t)}.bind(this)),this._docRefCollection.trigger("reset",!0))}.bind(this)),e.on("sync-refreshed",function(e){t.each(e,function(e){o(e)}.bind(this)),this._sortDocRefs()}.bind(this))}.bind(this)))}.bind(this)),r.allSettled(e).then(function(e){var n,i=!1;t.each(e,(function(e){"rejected"===e.state&&(i||b.warn("Organizer failed to fetch doc refs",e),i=!0)})),i?(this._retryCounter=this._retryCounter||0,this._retryCounter++,n=2e3^this._retryCounter,this._retryCounter>10?window.marvel.events.trigger("service-borked"):window.marvel.events.trigger("service-error-retrying",{retries:this._retryCounter,delay:n}),t.delay(this._fetchDocRefs,n)):this.projectFilters&&this.projectFilters.filteringRequiresManifest()?(window.marvel.events.trigger("show-organizer-loading",{isLoading:!0}),this._resolveAllProjects().then(function(e){e&&(this._sortDocRefs(),this._deferDocRefs.resolve(this._docRefCollection))}.bind(this)).done()):(this._currentResolveAllProjectsPromise&&this._cancelResolveAllProjects(),this._sortDocRefs(),this._deferDocRefs.resolve(this._docRefCollection))}.bind(this));else if(!this._syncingInitialMyProjects){this._syncingInitialMyProjects=!0;var n=o.nextSync();o.syncNow(),n.then(function(){this._syncingInitialMyProjects=!1,this._finishedSyncingInitialMyProjects=!0,this._fetchDocRefs()}.bind(this))}},_cancelResolveAllProjects:function(){this._currentResolveAllProjectsPromise&&(this._currentResolveAllProjectsPromise=null)},_resolveAllProjects:function(){var e=r.defer(),n=[];return this._currentResolveAllProjectsPromise&&this._cancelResolveAllProjects(),this._currentResolveAllProjectsPromise=e.promise,t.each(this._docRefCollection.models,function(e){var t=e.resolve();n.push(t),t.then(function(e){return e}.bind(this),function(e){return l.hasFeature("organizer-can-show-bad-projects")?null:r.reject(e)}.bind(this))}.bind(this)),r.allSettled(n).then(function(t){var n=this._currentResolveAllProjectsPromise===e.promise;e.resolve(n)}.bind(this)),e.promise},_attachSyncGroupToList:function(e,n,i){e.getComposites().then(function(r){t.each(r,(function(e){n.add(e)})),e.on("sync-add",function(e){e&&e.length&&(t.each(e,(function(e){n.add(e)})),this._sortProjects(n))}.bind(this)),e.on("sync-remove",(function(e){e&&e.length&&(t.each(e,(function(e){var t=n.findWhere({id:e});t&&n.remove(t)})),n.trigger("reset",!0))})),e.on("sync-refreshed",function(e){e&&e.length||this._sortProjects(n)}.bind(this)),i.resolve(n)}.bind(this))},_fetchProjects:function(e){var t=r.defer();return o.ensureSyncGroup(e).then(function(e){this._attachSyncGroupToList(e,this.myProjects,t)}.bind(this),function(e){t.reject(e)}.bind(this)),t.promise},_sortProjects:function(e){e.models=t.sortBy(e.models,(function(e){return-new Date(e.get("modified")).getTime()})),e.trigger("reset",e.models,{})},_searchForBrandedProject:function(){this._refQueueOutstanding<3&&this._refQueue.length>0&&(this._refQueueOutstanding++,this._refQueue.pop().resolve().then(function(e){this._refQueueOutstanding--,e.getMyApp().getAuthoringContextId(e)===this._searchContext.getId()?"pending"===this._brandedDefer.promise.inspect().state&&this._brandedDefer.resolve(e):this._searchForBrandedProject()}.bind(this),function(e){console.warn("Failed to resolve project while searching for brand"),this._refQueueOutstanding--,this._searchForBrandedProject()}.bind(this)).done(),this._searchForBrandedProject());0===this._refQueue.length&&0===this._refQueueOutstanding&&"pending"===this._brandedDefer.promise.inspect().state&&this._brandedDefer.resolve()},hasBrandedProjects:function(e){return this._searchContext=e,this.getDocRefs().then(function(e){return this._refQueue=[],this._refQueueOutstanding=0,this._brandedDefer=r.defer(),e.each(function(e){this._refQueue.push(e)}.bind(this)),this._searchForBrandedProject(),this._brandedDefer.promise}.bind(this))},getAllMyProjects:function(){return this._allProjectsDefer||this.getMyProjects(),this._allProjectsDefer.promise},_doGetProjects:function(){var e=[];t.each(u.apps,function(t){this._includeAppProjects(t)&&e.push(this._fetchProjects(t.getSetting("syncGroup")))}.bind(this)),this._registeredSaveHandler||(marvel.events.on("saved-composite-doc",function(e){this._sortProjects(this.myProjects)}.bind(this)),this._registeredSaveHandler=!0),r.allSettled(e).then(function(e){var n=!1;t.each(e,(function(e){"rejected"===e.state&&(n||b.warn("Organizer failed to fetch projects",e),n=!0)})),n?(window.marvel.events.trigger("service-error-retrying"),t.delay(this._doGetProjects.bind(this),5e3)):(this._sortProjects(this.myProjects),this._allProjectsDefer.resolve(this.myProjects))}.bind(this))},getMyProjects:function(){return this._myProjectsDefer||(this._myProjectsDefer=r.defer(),this._allProjectsDefer=r.defer()),this.myProjects||(this.myProjects=new d,l.featuresLoaded().then(function(){this._initProjectFilters().then(function(){this._doGetProjects()}.bind(this))}.bind(this)),this._myProjectsDefer.resolve(this.myProjects)),this._myProjectsDefer.promise},deleteComposite:function(e,t){return b.info("deleteComposite",e),p.execute("deleteComposite",!1,(function(t){h.getUtils().then((function(n){t.promises.push(n.unpublishCompositeDoc({mrvlDoc:e,isDelete:!0}).then((function(){return e.delete()})))}))}))},duplicateComposite:function(e){return p.execute("duplicateComposite",!1,(function(t){t.promises.push(e.duplicate())})).then(function(e){var t=e[0].value,n=u.getAppForDoc(t);return(n.postDuplicate?n.postDuplicate(t):r()).then(function(){return this.itemActionDone(!0),t}.bind(this))}.bind(this)).catch((function(e){throw console.log(e),e}))},saveAsTemplate:function(e){return marvel.events.trigger("organizer-working",{working:!0}),p.execute("saveCompositeAsTemplate",!1,(function(t){t.promises.push(e.saveAsTemplate())})).then(function(t){var n=t[0].value,i=u.getAppForDoc(e);return(i.postDuplicate?i.postDuplicate(n):r()).then(function(){return marvel.events.trigger("organizer-working",{}),this.itemActionDone(!0),n}.bind(this))}.bind(this)).catch((function(e){throw marvel.events.trigger("organizer-working",{}),console.log(e),e}))},createDuplicateFromCpModel:function(e){var t={eventNames:{add:"publisher-dupe-asset-added",resolved:"publisher-dupe-asset-resolved"}};marvel.events.trigger("organizer-working",{working:!0,msg:"Slate will start shortly.",progressBar:t}),p.execute("createDuplicateFromPub",!1,(function(n){h.getUtils().then(function(i){var r=i.createDuplicateFromCpModel(e,t.eventNames);n.promises.push(r),r.then((function(e){var t=o.nextSync();o.syncNow(),t.then((function(){var t=u.getAppForDoc(e);t.getStorageImpl().setSaveThumbOnLoad(),marvel.navigate("design/"+t.typeName+"/"+e.get("id"),{trigger:!0}),marvel.events.trigger("organizer-working",{})}))}))}.bind(this))}))},organizerWantsToRerender:function(e){return this.ignoreNextOverlayFocus?(this.ignoreNextOverlayFocus=!1,this.pausedOrganizerView=null,!0):this._currentlyFocusedItem?(this.pausedOrganizerView=e,!1):(this.pausedOrganizerView=null,!0)},organizerNavigating:function(e){this.organizerItemFocusOut(e)},organizerItemFocusIn:function(e){this._currentlyFocusedItem=e},organizerItemFocusOut:function(e){this._currentlyFocusedItem=null,this._deferredAfterPendingInteractions&&(this._deferredAfterPendingInteractions.resolve(),this._deferredAfterPendingInteractions=null)},_reenableUpdate:function(e){this._currentlyFocusedItem=null,this._deferredAfterPendingInteractions&&(this._deferredAfterPendingInteractions.resolve(),this._deferredAfterPendingInteractions=null),this.pausedOrganizerView&&(this.pausedOrganizerView._rerender(),this.pausedOrganizerView=null)},afterPendingInteractions:function(e){return!this._currentlyFocusedItem||e&&e!==this._currentlyFocusedItem?r.resolve():(this._deferredAfterPendingInteractions||(this._deferredAfterPendingInteractions=r.defer()),this._deferredAfterPendingInteractions.promise)},itemActionDone:function(e){this._reenableUpdate(!0),this.ignoreNextOverlayFocus=e},organizerOverlayFocus:function(e,t,n){this.ignoreNextOverlayFocus&&t||(this._updateDelayTimer&&(window.clearTimeout(this._updateDelayTimer),this._updateDelayTimer=null),t?(this._currentlyFocusedItem=e,this._updateDelayTimer=window.setTimeout(function(){this._reenableUpdate(!1),this._updateDelayTimer=null}.bind(this),15e3)):this._reenableUpdate(n))},exportProjects:function(n){var i={},o=(r.defer(),window.adobeIMS.getAccessToken()),a=s.key,l=function(t){var n=r.defer();return e.ajax({url:t,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+o),e.setRequestHeader("X-Api-Key",a)},success:function(e,i,r){if("success"!=i)return n.resolve({type:"ERROR",message:"Requested "+t+". Got back "+r.statusCode+": "+r.body,children:[]});n.resolve(e)},error:function(e){n.resolve({type:"ERROR",message:"Requested "+t+". Got back "+e.message,children:[]})}}),n.promise};return r.all(t.map(["slate","adobe-voice"],(function(e){return l("https://"+s.ss+"/assets/"+e).then((function(n,i,o){return r.all(t.map(n.children,(function(t){return l("https://"+s.ss+"/assets/"+e+"/"+t.name).then((function(n){t.files=n;for(var i,o,a=n.children,c=0,d=a.length;c<d;c++){var u=a[c];"manifest"==u.name?i=u:-1==u.type.search(/content\+json$/)&&-1==u.type.search(/pageSequence\+json$/)||(o=u)}var h=[];return i&&h.push(l("https://"+s.ss+"/assets/"+e+"/"+t.name+"/manifest").then((function(e){i.contents=e}))),o&&h.push(l("https://"+s.ss+"/assets/"+e+"/"+t.name+"/"+o.name).then((function(e){o.contents=e}))),r.all(h)})).then((function(){return t}))})))})).then((function(t){i[e]=t})).catch((function(e){console.log(e)}))}))).then((function(){return i})).catch((function(e){console.log(e)}))},_initProjectFilters:function(){return this._initProjectFiltersDefer||(this._initProjectFiltersDefer=r.defer(),marvel.events.on("project-filters-updated",this._projectFiltersUpdatedEvent.bind(this)),n.e("project-filters-controller").then(function(e){var t=n(890);this.projectFilters=new t({projectFilterId:this._getProjectFilterId()}),this._initProjectFiltersDefer.resolve(this.projectFilters)}.bind(this).bind(null,n)).catch(n.oe)),this._initProjectFiltersDefer.promise},_getProjectFilterId:function(){return"project"},getCurrentSingleFilteredApp:function(){if(this.projectFilters){var e=this.projectFilters.getAppTypesToShow();if(1===e.length)return u.getAppByType(e[0])}return null},areFiltersAlreadyReady:function(){return!!this.projectFilters},whenFiltersReady:function(){return this._initProjectFilters()},doProjectsNeedRefreshBeforeOrganizerLoad:function(e){return this.projectFilters&&this.projectFilters.doProjectsNeedRefreshBeforeOrganizerLoad(e)},_projectFiltersUpdatedEvent:function(e,t,n){e.projectFilterId===this._getProjectFilterId()&&this.refreshDocRefs().then((function(){e.refreshDefer&&e.refreshDefer.resolve()}))},refreshProjectsForFiltering:function(){return this.projectFilters.refreshingProjects(),this.refreshDocRefs()},refreshDocRefs:function(){return this._deferDocRefs&&(this._deferDocRefs=null,this._docRefCollection=new i.Collection),this.getDocRefs()}}))).clsDEF=v,m}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";(function(t,i){var r=n(32).nextTick;e.exports=y;var o,a=n(66);y.ReadableState=b;n(57).EventEmitter;var s=function(e,t){return e.listeners(t).length},l=n(420),c=n(39).Buffer,d=t.Uint8Array||function(){};var u=n(23);u.inherits=n(14);var h=n(554),p=void 0;p=h&&h.debuglog?h.debuglog("stream"):function(){};var f,g=n(571),m=n(421);u.inherits(y,l);var v=["error","close","destroy","pause","resume"];function b(e,t){e=e||{};var i=t instanceof(o=o||n(224));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,a=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=n(63).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function y(e){if(o=o||n(224),!(this instanceof y))return new y(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function w(e,t,n,i,r){var o,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,S(e)}(e,a)):(r||(o=function(e,t){var n;i=t,c.isBuffer(i)||i instanceof d||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var i;return n}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):k(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?k(e,a,t,!1):T(e,a)):k(e,a,t,!1))):i||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function k(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&S(e)),T(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=c.from(e,t),t=""),n=!0),w(this,e,t,!1,n)},y.prototype.unshift=function(e){return w(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return f||(f=n(63).StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};var x=8388608;function _(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r(C,e):C(e))}function C(e){p("emit readable"),e.emit("readable"),P(e)}function T(e,t){t.readingMore||(t.readingMore=!0,r(M,e,t))}function M(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function I(e){p("readable nexttick read 0"),e.read(0)}function D(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),P(e),t.flowing&&!t.reading&&e.read(0)}function P(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function A(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,i=1,r=n.data;e-=r.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(a===o.length?r+=o:r+=o.slice(0,e),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}(e,t):function(e,t){var n=c.allocUnsafe(e),i=t.head,r=1;i.data.copy(n),e-=i.data.length;for(;i=i.next;){var o=i.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),0===(e-=a)){a===o.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=o.slice(a));break}++r}return t.length-=r,n}(e,t);return i}(e,t.buffer,t.decoder),n);var n}function E(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r(L,t,e))}function L(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function N(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?E(this):S(this),null;if(0===(e=_(e,t))&&t.ended)return 0===t.length&&E(this),null;var i,r=t.needReadable;return p("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",r=!0),t.ended||t.reading?p("reading or ended",r=!1):r&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=_(n,t))),null===(i=e>0?A(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&E(this)),null!==i&&this.emit("data",i),i},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,p("pipe count=%d opts=%j",o.pipesCount,t);var l=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?d:y;function c(t,i){p("onunpipe"),t===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,p("cleanup"),e.removeListener("close",v),e.removeListener("finish",b),e.removeListener("drain",u),e.removeListener("error",m),e.removeListener("unpipe",c),n.removeListener("end",d),n.removeListener("end",y),n.removeListener("data",g),h=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function d(){p("onend"),e.end()}o.endEmitted?r(l):n.once("end",l),e.on("unpipe",c);var u=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,P(e))}}(n);e.on("drain",u);var h=!1;var f=!1;function g(t){p("ondata"),f=!1,!1!==e.write(t)||f||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==N(o.pipes,e))&&!h&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function m(t){p("onerror",t),y(),e.removeListener("error",m),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",b),y()}function b(){p("onfinish"),e.removeListener("close",v),y()}function y(){p("unpipe"),n.unpipe(e)}return n.on("data",g),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",v),e.once("finish",b),e.emit("pipe",n),o.flowing||(p("pipe resume"),n.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,n);return this}var a=N(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},y.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&S(this):r(I,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r(D,e,t))}(this,e)),this},y.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(p("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){(p("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r)||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<v.length;o++)e.on(v[o],this.emit.bind(this,v[o]));return this._read=function(t){p("wrapped _read",t),i&&(i=!1,e.resume())},this},y._fromList=A}).call(this,n(10),n(21))},function(e,t,n){e.exports=n(57).EventEmitter},function(e,t,n){"use strict";var i=n(32).nextTick;function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i(r,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";e.exports=a;var i=n(224),r=n(23);function o(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);i.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){l(e,t,n)})):l(this,null,null)}function l(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}r.inherits=n(14),r.inherits(a,i),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(6)],void 0===(r=function(e,t,n,i,r){"use strict";return new(n.Model.extend({getUserUniqueId:function(e){var t=i.defer();return r.ajax({type:"PUT",url:"/encryptUserData",headers:{"Content-Type":"application/json;charset=UTF-8"},data:JSON.stringify({service:e}),success:function(e,n,i){t.resolve(e.unique_id)}.bind(this),error:function(e,n,i){t.reject({returnVal:e.responseText,status:n,httpStatus:e.status})}}),t.promise}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(2)],void 0===(r=function(e,t){return t.Model.extend({initialize:function(){this.elements=[]},getElements:function(){return this.elements},topenqueue:function(e){this.elements.unshift(e)},enqueue:function(e){this.elements.push(e)},_localStorageRetrieval:function(t){var n=[];if(window.localStorage)try{var i=window.localStorage.getItem(t);i&&((n=JSON.parse(i))&&!e.isEmpty(n)&&e.isArray(n)||(n=[]))}catch(e){}return n},localStorageStoreTop:function(e,t){if(window.localStorage)try{var n=this._localStorageRetrieval(e);n.unshift(t),window.localStorage.setItem(e,JSON.stringify(n))}catch(e){}},localStorageStore:function(e,t){if(window.localStorage)try{var n=this._localStorageRetrieval(e);n.push(t),window.localStorage.setItem(e,JSON.stringify(n))}catch(e){}},localStorageRemove:function(t,n){if(window.localStorage)try{var i=window.localStorage.getItem(t),r=[];i&&(r=(r=JSON.parse(i))&&!e.isEmpty(r)&&e.isArray(r)?e.filter(r,(function(e){return e.id==n.id})):[]),window.localStorage.setItem(t,JSON.stringify(r))}catch(e){}},localStorageToQueue:function(t){if(window.localStorage)try{var n=this._localStorageRetrieval(t);if(e.isEmpty(n))return!1;e.each(n,function(e){this.enqueue(e)}.bind(this))}catch(e){}},dequeue:function(t){var n;if(0===this.elements.length)return null;if(e.isUndefined(t))n=this.elements[0],this.elements.shift();else{if(!this.elements[t])return null;n=this.elements[t];var i=e.filter(this.elements,(function(e,n){return n!==t}));this.elements=i}return n},getLength:function(){return this.elements.length},isEmpty:function(){return 0===this.getLength()},peek:function(){return 0===this.elements.length?null:this.elements[0]}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(4),n(2)],void 0===(r=function(e,t,n,i,r){"use strict";return new(r.Model.extend({getUserSegmentsForSeoPage:function(t){var i=n.defer();return e.ajax({type:"POST",url:"/seo-page/segments",data:JSON.stringify({seoPage:t}),headers:{"Content-Type":"application/json;charset=UTF-8"},success:function(e){i.resolve(e)}.bind(this),error:function(e,t,n){i.reject(e)}.bind(this)}),i.promise}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(53)],void 0===(r=function(e,t,n,i,r){"use strict";return new(n.Model.extend({initialize:function(){this._messagingProviders=[],this._providerEvents={},this._eventHandlers={},this._messageViews={}},registerProvider:function(e){this._messagingProviders.push(e),e.messagingController=this,e.interestedEvents.forEach(this._addProviderEvent.bind(this,e))},registerMessageView:function(e){e.MessageViewCls?this._messageViews[e.MessageViewCls.prototype.cachename]={class:e.MessageViewCls,parentSelector:e.parentSelector,controller:e.controller,cache:null}:this._messageViews[e.name]=t.assign({},e)},_addProviderEvent:function(e,t){var n=this._providerEvents[t];n?n.push(e):(n=[e],this._providerEvents[t]=n,this._registerEventHandler(t))},_registerEventHandler:function(e){if(this._eventHandlers[e])throw new Error("BUG: Attempt to register event handler more than once!");var n=function(){var n=Array.prototype.slice.call(arguments),r=[];this._providerEvents[e].forEach((function(t){var i=t.handleEvent.apply(t,[e].concat(n));r.push(i)})),i.allSettled(r).then(function(n){var i={default:[]};t.flatten(n.filter((function(t){if("fulfilled"===t.state)return t.value;marvel.logger.error("A message provider failed to handle event "+e+"!",t.reason)})).map((function(e){return e.value}))).forEach(function(e){try{var n=this._getMessageView(e),r=t.get(n,"class.pattern")||n.pattern;r?i[r]?i[r].push(e):i[r]=[e]:i.default.push(e)}catch(t){marvel.logger.error("Error attempting to handle message!",{message:e,error:t})}}.bind(this)),t.each(i,function(e){e.length&&this._displayMessage(e[0])}.bind(this))}.bind(this))}.bind(this);this._eventHandlers[e]=n,r.on(e,n)},_displayMessage:function(e){return this._renderView(e)},_renderView:function(t){var n,i,r;try{i=(n=this._getMessageView(t)).parentSelector?e(n.parentSelector):null,n.class?(n.cache?(r=n.cache).model=t.model:(r=Object.create(n.class.prototype),i&&(r.el=i),n.class.call(r,{model:t.model}),n.cache=r),n.controller?n.controller.attachView(r,t.model):r.render()):n.show(t.params)}catch(e){marvel.logger.error("Failed to render messaging view!",{message:t,messageView:n,error:e})}},_getMessageView:function(e){var t=e.viewCachename||e.view,n=this._messageViews[t];if(!n){var i=new Error("Message with unknown view "+t);throw i.badMessage=e,i}return n}}))}.apply(t,i))||(e.exports=r)},,,,,,,,,,,,,function(e,t,n){e.exports=!n(59)&&!n(29)((function(){return 7!=Object.defineProperty(n(356)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(28),r=n(60),o=n(246),a=n(357),s=n(51).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var i=n(102),r=n(104),o=n(328)(!1),a=n(358)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var i=n(51),r=n(30),o=n(247);e.exports=n(59)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,l=0;s>l;)i.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var i=n(104),r=n(250).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return a.slice()}}(e):r(i(e))}},function(e,t,n){"use strict";var i=n(247),r=n(329),o=n(282),a=n(96),s=n(281),l=Object.assign;e.exports=!l||n(29)((function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i}))?function(e,t){for(var n=a(e),l=arguments.length,c=1,d=r.f,u=o.f;l>c;)for(var h,p=s(arguments[c++]),f=d?i(p).concat(d(p)):i(p),g=f.length,m=0;g>m;)u.call(p,h=f[m++])&&(n[h]=p[h]);return n}:l},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var i=n(203),r=n(31),o=n(447),a=[].slice,s={},l=function(e,t,n){if(!(t in s)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";s[t]=Function("F,a","return new F("+i.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=a.call(arguments,1),s=function(){var i=n.concat(a.call(arguments));return this instanceof s?l(t,i.length,i):o(t,i,e)};return r(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(28).parseInt,r=n(330).trim,o=n(363),a=/^[-+]?0[xX]/;e.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(e,t){var n=r(String(e),3);return i(n,t>>>0||(a.test(n)?16:10))}:i},function(e,t,n){var i=n(28).parseFloat,r=n(330).trim;e.exports=1/i(n(363)+"-0")!=-1/0?function(e){var t=r(String(e),3),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},function(e,t,n){var i=n(204);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},function(e,t,n){var i=n(31),r=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";var i=n(249),r=n(244),o=n(261),a={};n(103)(a,n(40)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var i=n(30);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},function(e,t,n){var i=n(203),r=n(96),o=n(281),a=n(49);e.exports=function(e,t,n,s,l){i(t);var c=r(e),d=o(c),u=a(c.length),h=l?u-1:0,p=l?-1:1;if(n<2)for(;;){if(h in d){s=d[h],h+=p;break}if(h+=p,l?h<0:u<=h)throw TypeError("Reduce of empty array with no initial value")}for(;l?h>=0:u>h;h+=p)h in d&&(s=t(s,d[h],h,c));return s}},function(e,t,n){"use strict";var i=n(96),r=n(248),o=n(49);e.exports=[].copyWithin||function(e,t){var n=i(this),a=o(n.length),s=r(e,a),l=r(t,a),c=arguments.length>2?arguments[2]:void 0,d=Math.min((void 0===c?a:r(c,a))-l,a-s),u=1;for(l<s&&s<l+d&&(u=-1,l+=d-1,s+=d-1);d-- >0;)l in n?n[s]=n[l]:delete n[s],s+=u,l+=u;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var i=n(378);n(9)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},function(e,t,n){n(59)&&"g"!=/./g.flags&&n(51).f(RegExp.prototype,"flags",{configurable:!0,get:n(332)})},function(e,t,n){"use strict";var i,r,o,a,s=n(246),l=n(28),c=n(202),d=n(283),u=n(9),h=n(31),p=n(203),f=n(265),g=n(335),m=n(284),v=n(380).set,b=n(705)(),y=n(461),w=n(706),k=n(336),x=n(462),_=l.TypeError,S=l.process,C=S&&S.versions,T=C&&C.v8||"",M=l.Promise,I="process"==d(S),D=function(){},P=r=y.f,A=!!function(){try{var e=M.resolve(1),t=(e.constructor={})[n(40)("species")]=function(e){e(D,D)};return(I||"function"==typeof PromiseRejectionEvent)&&e.then(D)instanceof t&&0!==T.indexOf("6.6")&&-1===k.indexOf("Chrome/66")}catch(e){}}(),E=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var n=e._c;b((function(){for(var i=e._v,r=1==e._s,o=0,a=function(t){var n,o,a,s=r?t.ok:t.fail,l=t.resolve,c=t.reject,d=t.domain;try{s?(r||(2==e._h&&R(e),e._h=1),!0===s?n=i:(d&&d.enter(),n=s(i),d&&(d.exit(),a=!0)),n===t.promise?c(_("Promise-chain cycle")):(o=E(n))?o.call(n,l,c):l(n)):c(i)}catch(e){d&&!a&&d.exit(),c(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&N(e)}))}},N=function(e){v.call(l,(function(){var t,n,i,r=e._v,o=F(e);if(o&&(t=w((function(){I?S.emit("unhandledRejection",r,e):(n=l.onunhandledrejection)?n({promise:e,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)})),e._h=I||F(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},F=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){v.call(l,(function(){var t;I?S.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})}))},O=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},B=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw _("Promise can't be resolved itself");(t=E(e))?b((function(){var i={_w:n,_d:!1};try{t.call(e,c(B,i,1),c(O,i,1))}catch(e){O.call(i,e)}})):(n._v=e,n._s=1,L(n,!1))}catch(e){O.call({_w:n,_d:!1},e)}}};A||(M=function(e){f(this,M,"Promise","_h"),p(e),i.call(this);try{e(c(B,this,1),c(O,this,1))}catch(e){O.call(this,e)}},(i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(266)(M.prototype,{then:function(e,t){var n=P(m(this,M));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=I?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i;this.promise=e,this.resolve=c(B,e,1),this.reject=c(O,e,1)},y.f=P=function(e){return e===M||e===a?new o(e):r(e)}),u(u.G+u.W+u.F*!A,{Promise:M}),n(261)(M,"Promise"),n(264)("Promise"),a=n(60).Promise,u(u.S+u.F*!A,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(s||!A),"Promise",{resolve:function(e){return x(s&&this===a?M:this,e)}}),u(u.S+u.F*!(A&&n(331)((function(e){M.all(e).catch(D)}))),"Promise",{all:function(e){var t=this,n=P(t),i=n.resolve,r=n.reject,o=w((function(){var n=[],o=0,a=1;g(e,!1,(function(e){var s=o++,l=!1;n.push(void 0),a++,t.resolve(e).then((function(e){l||(l=!0,n[s]=e,--a||i(n))}),r)})),--a||i(n)}));return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=P(t),i=n.reject,r=w((function(){g(e,!1,(function(e){t.resolve(e).then(n.resolve,i)}))}));return r.e&&i(r.v),n.promise}})},function(e,t,n){"use strict";var i=n(203);function r(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)}e.exports.f=function(e){return new r(e)}},function(e,t,n){var i=n(30),r=n(31),o=n(461);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var i=n(51).f,r=n(249),o=n(266),a=n(202),s=n(265),l=n(335),c=n(369),d=n(457),u=n(264),h=n(59),p=n(216).fastKey,f=n(252),g=h?"_s":"size",m=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var d=e((function(e,i){s(e,d,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[g]=0,null!=i&&l(i,n,e[c],e)}));return o(d.prototype,{clear:function(){for(var e=f(this,t),n=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var n=f(this,t),i=m(n,e);if(i){var r=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==i&&(n._f=r),n._l==i&&(n._l=o),n[g]--}return!!i},forEach:function(e){f(this,t);for(var n,i=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(f(this,t),e)}}),h&&i(d.prototype,"size",{get:function(){return f(this,t)[g]}}),d},def:function(e,t,n){var i,r,o=m(e,t);return o?o.v=n:(e._l=o={i:r=p(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=o),i&&(i.n=o),e[g]++,"F"!==r&&(e._i[r]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=f(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?d(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,d(1))}),n?"entries":"values",!n,!0),u(t)}}},function(e,t,n){"use strict";var i=n(266),r=n(216).getWeak,o=n(30),a=n(31),s=n(265),l=n(335),c=n(121),d=n(102),u=n(252),h=c(5),p=c(6),f=0,g=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},v=function(e,t){return h(e.a,(function(e){return e[0]===t}))};m.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var c=e((function(e,i){s(e,c,t,"_i"),e._t=t,e._i=f++,e._l=void 0,null!=i&&l(i,n,e[o],e)}));return i(c.prototype,{delete:function(e){if(!a(e))return!1;var n=r(e);return!0===n?g(u(this,t)).delete(e):n&&d(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=r(e);return!0===n?g(u(this,t)).has(e):n&&d(n,this._i)}}),c},def:function(e,t,n){var i=r(o(t),!0);return!0===i?g(e).set(t,n):i[e._i]=n,e},ufstore:g}},function(e,t,n){var i=n(118),r=n(49);e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var i=n(250),r=n(329),o=n(30),a=n(28).Reflect;e.exports=a&&a.ownKeys||function(e){var t=i.f(o(e)),n=r.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(49),r=n(365),o=n(205);e.exports=function(e,t,n,a){var s=String(o(e)),l=s.length,c=void 0===n?" ":String(n),d=i(t);if(d<=l||""==c)return s;var u=d-l,h=r.call(c,Math.ceil(u/c.length));return h.length>u&&(h=h.slice(0,u)),a?h+s:s+h}},function(e,t,n){var i=n(247),r=n(104),o=n(282).f;e.exports=function(e){return function(t){for(var n,a=r(t),s=i(a),l=s.length,c=0,d=[];l>c;)o.call(a,n=s[c++])&&d.push(e?[n,a[n]]:a[n]);return d}}},function(e,t,n){e.exports=n(417)},function(e,t,n){"use strict";var i=n(41),r=n(217),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var t,n,r,a,s,l,c,d=[],u=0,h=e.length,p=h,f="string"!==i.getTypeOf(e);u<e.length;)p=h-u,f?(t=e[u++],n=u<h?e[u++]:0,r=u<h?e[u++]:0):(t=e.charCodeAt(u++),n=u<h?e.charCodeAt(u++):0,r=u<h?e.charCodeAt(u++):0),a=t>>2,s=(3&t)<<4|n>>4,l=p>1?(15&n)<<2|r>>6:64,c=p>2?63&r:64,d.push(o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(c));return d.join("")},t.decode=function(e){var t,n,i,a,s,l,c=0,d=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var u,h=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&h--,e.charAt(e.length-2)===o.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=r.uint8array?new Uint8Array(0|h):new Array(0|h);c<e.length;)t=o.indexOf(e.charAt(c++))<<2|(a=o.indexOf(e.charAt(c++)))>>4,n=(15&a)<<4|(s=o.indexOf(e.charAt(c++)))>>2,i=(3&s)<<6|(l=o.indexOf(e.charAt(c++))),u[d++]=t,64!==s&&(u[d++]=n),64!==l&&(u[d++]=i);return u}},function(e,t){var n=e.exports={version:"2.3.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(763);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(382),r=n(340).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){"use strict";(function(t){var i=n(41),r=n(776),o=n(105),a=n(470),s=n(217),l=n(285),c=null;if(s.nodestream)try{c=n(777)}catch(e){}function d(e,n){return new l.Promise((function(r,o){var s=[],l=e._internalType,c=e._outputType,d=e._mimeType;e.on("data",(function(e,t){s.push(e),n&&n(t)})).on("error",(function(e){s=[],o(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return a.encode(t);default:return i.transformTo(e,t)}}(c,function(e,n){var i,r=0,o=null,a=0;for(i=0;i<n.length;i++)a+=n[i].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(o=new Uint8Array(a),i=0;i<n.length;i++)o.set(n[i],r),r+=n[i].length;return o;case"nodebuffer":return t.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}(l,s),d);r(e)}catch(e){o(e)}s=[]})).resume()}))}function u(e,t,n){var a=t;switch(t){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=t,this._mimeType=n,i.checkSupport(a),this._worker=e.pipe(new r(a)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}u.prototype={accumulate:function(e){return d(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.delay(t,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},e.exports=u}).call(this,n(16).Buffer)},function(e,t,n){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},function(e,t,n){"use strict";var i=n(41),r=n(105);function o(e){r.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=i.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},function(e,t,n){"use strict";var i=n(41),r=n(105);function o(e){r.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}i.inherits(o,r),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}r.prototype.processChunk.call(this,e)},e.exports=o},function(e,t,n){"use strict";var i=n(105),r=n(385);function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n(41).inherits(o,i),o.prototype.processChunk=function(e){this.streamInfo.crc32=r(e.data,this.streamInfo.crc32||0),this.push(e)},e.exports=o},function(e,t,n){"use strict";var i=n(105);t.STORE={magic:"\0\0",compressWorker:function(e){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},t.DEFLATE=n(780)},function(e,t,n){"use strict";e.exports=function(e,t,n,i){for(var r=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(r=r+t[i++]|0)|0}while(--a);r%=65521,o%=65521}return r|o<<16|0}},function(e,t,n){"use strict";var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},function(e,t,n){"use strict";var i=n(218),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new i.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,t.string2buf=function(e){var t,n,r,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(l),a=0,o=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,i,r,o,s=t||e.length,c=new Array(2*s);for(i=0,n=0;n<s;)if((r=e[n++])<128)c[i++]=r;else if((o=a[r])>4)c[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&n<s;)r=r<<6|63&e[n++],o--;o>1?c[i++]=65533:r<65536?c[i++]=r:(r-=65536,c[i++]=55296|r>>10&1023,c[i++]=56320|1023&r)}return l(c,i)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+a[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\b"},function(e,t,n){"use strict";var i=n(41),r=n(217),o=n(488),a=n(794),s=n(795),l=n(490);e.exports=function(e){var t=i.getTypeOf(e);return i.checkSupport(t),"string"!==t||r.uint8array?"nodebuffer"===t?new s(e):r.uint8array?new l(i.transformTo("uint8array",e)):new o(i.transformTo("array",e)):new a(e)}},function(e,t,n){"use strict";var i=n(489);function r(e){i.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}n(41).inherits(r,i),r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),i=e.charCodeAt(2),r=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),i=e.charCodeAt(2),r=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&i===o[2]&&r===o[3]},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){"use strict";var i=n(41);function r(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},e.exports=r},function(e,t,n){"use strict";var i=n(488);function r(e){i.call(this,e)}n(41).inherits(r,i),r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(7),n(309),n(25)],void 0===(r=function(e,t,n,i,r,o){"use strict";return o.extend({events:{"click .x-close-btn":"handleCancel","click .wk-cancel":"handleCancel","click .wk-post-to":"handlePostTo","click .wk-authenticate":"handleAuthenticate","click .wk-post-to-profile":"handlePostProfile","click .wk-download-link":"handleDownload"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),e&&e.imageUrl?this.imageUrl=e.imageUrl:this.imageUrl=null,e&&e.app?this.app=e.app:this.app=null,e&&e.projectId?this.projectId=e.projectId:this.projectId=null,e&&e.workflow?this.workflow=e.workflow:this.workflow=null,r.init()},setImageUrl:function(e){this.imageUrl=e},setProjectId:function(e){this.projectId=e},setApp:function(e){this.app=e},handleDownload:function(e){var t=this.app.getAppTypeID();i.trackEvent(this.analyticsEvents.downloadedDesign,{app:t,projectId:this.projectId,workflow:this.workflow},t+":editor")},handleCancel:function(e){e.preventDefault();var t=this.app.getAppTypeID();try{window.sessionStorage&&window.sessionStorage.removeItem("workflowOnLoadDesignView")}catch(e){}this.canViewPost=!1,this.isPosting=!1,this.postId=null,i.trackEvent(this.analyticsEvents.dismissWorkflow,{app:t,projectId:this.projectId,workflow:this.workflow},t+":editor"),i.removeContextData("workflow"),this.hideOverlay()}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0)],void 0===(r=function(e,t){return{setupAndCacheCss:function(n){var i=[];return t.each(n,(function(n,r){var o=e(r);t.each(n.add,(function(e){o.hasClass(e)||(i.push({obj$:o,cssClass:e,hadClass:!1}),o.addClass(e))})),t.each(n.remove,(function(e){o.hasClass(e)&&(i.push({obj$:o,cssClass:e,hadClass:!0}),o.removeClass(e))}))})),i},restoreCss:function(e){t.each(e,(function(e){e.hadClass?e.obj$.addClass(e.cssClass):e.obj$.removeClass(e.cssClass)}))}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(7),n(818),n(819),n(820),n(821),n(11),n(20)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d){"use strict";return n.View.extend({el:".takeover-wrapper",events:{"click .takeover-primary-btn":"handlePrimaryButton","click .takeover-secondary-btn":"handleSecondaryButton","click .takeover-dismiss-btn":"handleCloseButton"},initialize:function(){t.bindAll(this,t.functionsIn(this)),this.on("close",this.handleCloseButton,this)},handleCloseButton:function(){this.model.get("action")&&this.model.get("action")("close"),this.remove()},handlePrimaryButton:function(){this.model.get("action")&&this.model.get("action")("primary"),this.remove()},handleSecondaryButton:function(){this.model.get("action")&&this.model.get("action")("secondary"),this.remove()},_isInEditor:function(){return window.marvel._siteSection&&0===window.marvel._siteSection.indexOf("editor:")},render:function(){var e;e=this.model.get("design_type")&&"takeover_multi_col"===this.model.get("design_type")?a:this.model.get("design_type")&&"takeover_multi_col_with_cta"===this.model.get("design_type")?s:this.model.get("design_type")&&"takeover_multi_col_with_explainer"===this.model.get("design_type")?l:o,this.$el.html(d.to_html(e.toString(),this.model.toJSON()))},remove:function(){this.$el.empty()}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i=n(827);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(20),n(854)],void 0===(r=function(e,t,n,i,r){"use strict";var o=n.View.extend({cachename:"popupMessage",showMulti:!1,positionBottom:!1,events:{"click .popup-message-primary-button":"handlePrimaryButton","click .popup-message-close-x":"handleCloseButton","click .popup-message-secondary-button":"handleSecondaryButton"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.on("close",this.handleCloseButton,this),e&&(this.showMulti=!!e.showMulti,this.positionBottom=!!e.positionBottom)},handlePrimaryButton:function(e){this.model.get("action")&&this.model.get("action")("primary"),this.remove()},handleSecondaryButton:function(e){this.model.get("action")&&this.model.get("action")("secondary"),this.remove()},handleCloseButton:function(e){this.model.get("action")&&this.model.get("action")(),this.remove()},render:function(){var n=e(i.to_html(r.toString(),this.model.toJSON()));this.positionBottom?this.$el.addClass("popup-message-bottom"):this.positionBottom&&this.$el.removeClass("popup-message-bottom"),this.showMulti?(this.$el.addClass("popup-message-multi"),this.$el.append(n)):(this.$el.removeClass("popup-message-multi"),this.$el.html(n)),this.model.get("autoDecay")&&(t.delay((function(){n.addClass("popup-message-born")}),200),t.delay(this.decay,3500,n))},remove:function(){this.$el.empty()},decay:function(e){e.addClass("popup-message-decay"),t.delay((function(){e.remove()}),1e3)}});return o.pattern="popup",o}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(7),n(25),n(11),n(20),n(857),n(8)],void 0===(r=function(e,t,i,r,o,a,s,l,c,d){"use strict";new s({color:"blue",name:"ModalView"});var u=a.extend({cachename:"messagingModal",el:".messaging-modal-wrapper",events:{"click .dismiss-btn":"handleDismissClick","click .btn-cancel":"handleDismissClick","click .messaging-modal-shell-dismiss-button":"handleDismissClick","click .shell-content button":"handleButtonClick","click a":"handleLinkClick","click .messaging-modal-shell":"handleClickInside",click:"handleClickOutside"},initialize:function(){t.bindAll(this,t.functionsIn(this))},handleClickInside:function(e){if(this.model.get("hideOnClickOutside"))return!1},handleClickOutside:function(e){this.model.get("hideOnClickOutside")&&this.hide()},_trackClickEvent:function(e){var t=this.model.get("contextString")||this.modalViewName;o.trackEvent(e,{contextString:t},"messagingModal:"+this.modalViewName)},handleButtonClick:function(t){var n=e(t.target).data("data-analytics")||"",i=this.model.get("clickHandler");this._trackClickEvent("messagingModalClicked:"+n),i&&i(e(t.target),this),this.model.get("hideOnButtonClick")&&this.hide()},handleLinkClick:function(t){var n=e(t.target).data("data-analytics")||"",i=this.model.get("linkClickHandler");this._trackClickEvent("messagingModalLinkClicked:"+n),i&&i(e(t.target),this),this.model.get("hideOnLinkClick")&&this.hide()},render:function(){clearTimeout(this._autoShowTimeout),this.modalViewName=this.model.get("name")||"unnamed-modal";var e=this.model.get("partials")||{},i=this.model.get("cssClassName"),r=this.model.get("cssSubclassName"),o=this.model.get("manualShowCallback");if(t.each(e,(function(t,i){switch(t){case"onboardingPaidFirstVisit":e[i]=n(858);break;case"merchUpgradeModal":e[i]=n(859);break;case"fontsProvideUserFonts":e[i]=n(860);break;case"merchUpgradeBrandedProject":e[i]=n(861);break;case"onboardingBrandSetupComplete":e[i]=n(862);break;case"onboardingBrandify":e[i]=n(863);break;case"lightroomEditorOnboarding":e[i]=n(864);break;case"premiumTemplateUpgrade":e[i]=n(865);break;case"premiumTemplateRemixUpgrade":e[i]=n(866);break;case"errorMessage":e[i]=n(867)}})),this.$el.html(d.mustacheRender(c,this.model.toJSON(),e)),i&&this.$el.addClass(i),this.shell$=this.$el.find(".messaging-modal-shell"),r&&this.shell$.addClass(r),o)o(this);else if(!this.model.get("autoShowDisabled")){var a=this.model.get("autoShowDelay");a>0?this._autoShowTimeout=setTimeout(this._show.bind(this),a):this._show()}},showAfterManualShowCallback:function(){this._show()},handleDismissClick:function(){this._trackClickEvent("modalDismissed"),this.hide();var e=this.model.get("closeBtnCallback");e&&e(this)},show:function(){this.render(),this.model.get("autoShow")||this.model.get("autoShowDelay")||this._show()},_autoShowTimeout:null,_show:function(){this.showing=!0,this.$el.addClass("transitioned-out"),this.$el.removeClass("hide"),t.delay(function(){var t=e("body");this.$el.removeClass("transitioned-out"),t.hasClass("no-scroll")||(this._bodyForNoScroll$=t,this._bodyForNoScroll$.addClass("no-scroll"))}.bind(this),1);var n=this.model.get("analyticsEvent");if(n){var i=this.model.get("analyticsTrigger"),r=this.model.get("analyticsDataExtend"),a=this.model.get("analyticsPageName")||void 0,s={trigger:i};r&&t.extend(s,r),o.trackEvent(n,s,a)}},handleShellHideTransitionEnd:function(){this.$el.addClass("hide")},hide:function(){this.showing=!1,clearTimeout(this._autoShowTimeout),this.shell$.one("transitionend."+this.modalViewName,this.handleShellHideTransitionEnd),this.$el.addClass("transitioned-out"),this._bodyForNoScroll$&&(this._bodyForNoScroll$.removeClass("no-scroll"),this._bodyForNoScroll$=null)}});return u.pattern="modal",u}.apply(t,i))||(e.exports=r)},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=i=function(e){return n(e)}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(t)}e.exports=i},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(8),n(22),n(25),n(5),n(7),n(396),n(505),n(506)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u){"use strict";return a.extend({_options:{},events:{"click .cancel-btn":"handleCloseBtn","click .color-picker-brand-setup-button":"_handleBrandSetupClick"},initialize:function(){t.bindAll(this,t.functionsIn(this))},setOptions:function(e){this._options=e},updateOptions:function(e){this._options=t.assign(this._options||{},e)},setColor:function(e){this._dontSave=!1,this.saveBtn$.removeClass("invalid"),this.colorInputHex$.removeClass("invalid"),this.colorInputHex$.val(e),this._handleHexTextInput()},setAnchor:function(e){this.anchor$=e,this._reanchor()},handleSave:function(t){if(this._dontSave)this.saveBtn$.attr("title",r.getString("color-picker-dialog-invalid-color-input")),this.saveBtn$.addClass("invalid");else{this.saveBtn$.removeClass("invalid");var n=!1;t&&(n=e(t.target).hasClass("mrvl-overlay-bg")&&this._options.ignoreBackgroundClick),this.onFinish&&this.onFinish(!n,this._getHex(),this.acColor),this._saved=!0,this.hideOverlay()}},_getHex:function(){return c.rgbToHex(c.hslToRgb(this._currentHSL.h,this._currentHSL.s,this._currentHSL.l))},_recognizeCurrentColor:function(){var e=this._getHex(),t=this.$el.find(".color-hex-"+e.substring(1));this.acColor=this._colorsByHex[e],this._lastHex!==e&&(this._lastHex=e,this.onChange&&this.onChange(!1,e,this.acColor)),this.addColor$&&(t.length>0?this.addColor$.addClass("disabled"):this.addColor$.removeClass("disabled")),this.$el.find(".swatch-selected").removeClass("swatch-selected"),t.addClass("swatch-selected")},_positionFieldHandle:function(){var e,t,n=c.hslToRgb(this._currentHSL.h,this._currentHSL.s,this._currentHSL.l),i=n.r,r=n.g,o=n.b,a=Math.max(Math.max(i,r),o),s=Math.min(Math.min(i,r),o);if(a===s)s=i=0,e=[0,0,a];else{var l,d=a-s;0>(l=i===a?60*(r-o)/d:r===a?60*(2+(o-i)/d):60*(4+(i-r)/d))&&(l+=360),360<l&&(l-=360),e=[l,d/a,a]}var u=(100-(t=[e[0],e[1],100*e[2]/255])[2])/100*98-this.fieldHandle$.height()/2,h=188*t[1]-this.fieldHandle$.width()/2;this.fieldHandle$.css("left",h+"px"),this.fieldHandle$.css("top",u+"px")},_renderHueGradient:function(){var e,t,n;for(e=0;e<98;e++)n=e/98,t=c.rgbToHex(c.hslToRgb(n,1,.5)),this._contextH.fillStyle=t,this._contextH.fillRect(0,e,10,1)},_renderSLGradient:function(){var e=1;this._currentHSL&&(e=this._currentHSL.h);var t=this._contextSL.createLinearGradient(0,98,0,0);t.addColorStop(0,"#000"),t.addColorStop(1,"#FFF"),this._contextSL.fillStyle=t,this._contextSL.fillRect(0,0,188,98);var n=this._contextSLBack.createLinearGradient(188,0,0,0);n.addColorStop(0,"hsl("+Math.round(360*e)+",100%,50%)"),n.addColorStop(1,"#FFF"),this._contextSLBack.fillStyle=n,this._contextSLBack.fillRect(0,0,188,98);for(var i=this._contextSL.getImageData(0,0,188,98),r=i.data,o=this._contextSLBack.getImageData(0,0,188,98).data,a=0,s=r.length;a<s;a+=4)r[a]=o[a]*r[a]/255,r[a+1]=o[a+1]*r[a+1]/255,r[a+2]=o[a+2]*r[a+2]/255;this._contextSL.putImageData(i,0,0)},_renderColorPreview:function(e,t){var n=this._getHex();t||(this._dontSave=!1,this.saveBtn$.removeClass("invalid"),this.colorInputHex$.removeClass("invalid"),this.colorInputHex$.val(n)),e&&(this.$el.find(".hue-handle").css("top",98*this._currentHSL.h-10+"px").attr("sliderval",98*this._currentHSL.h),this._positionFieldHandle()),this.fieldHandle$.find(".dot").css("background-color",n),this.$el.find(".color-picker-color-preview").css("background-color",n),this.$el.find(".hue-handle .dot").css("background-color",c.rgbToHex(c.hslToRgb(this._currentHSL.h,1,.5))),this._recognizeCurrentColor(),this._armed=!1},_renderGradients:function(e,t){this._renderColorPreview(e,t),this._renderHueGradient(),this._renderSLGradient()},_setColorPart:function(e,t){switch(e){case"hue":this._currentHSL.h=t;break;case"saturation":this._currentHSL.s=t;break;case"brightness":this._currentHSL.l=t}},_setupCanvas:function(e,t,n,i){var r=this.$el.find(e).attr({width:t,height:n})[0].getContext("2d");return r.width=t,r.height=n,i&&(r.globalCompositeOperation="source-over"),r},_handleHexTextInput:function(e){try{var t,n=this.colorInputHex$.val();n&&(!(t=n&&0===n.toLowerCase().indexOf("rgb")?c.rgbStringToRgb(n):c.hexToRgb(n))&&this._options.allowHTMLColorNames&&(t=c.rgbFromHexOrName(n)),t?(this._dontSave=!1,this.saveBtn$.removeClass("invalid"),this._currentHSL=c.rgbToHsl(t),this._renderGradients(!0,!0),this.colorInputHex$.removeClass("invalid")):(this._dontSave=!0,this.saveBtn$.addClass("invalid"),this.colorInputHex$.addClass("invalid")))}catch(e){this._dontSave=!0,this.saveBtn$.addClass("invalid"),this.colorInputHex$.addClass("invalid")}},_clickTrack:function(t,n,i,r,o,a){var s,l,c=function(e){var t={x:0,y:0};return e.pageX?(t.x=e.pageX,t.y=e.pageY):e.clientX&&(t.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,t.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),t},d=function(e,t){t||(e.x=e.x-s.left,e.y=e.y-s.top),n.css("top",e.y+"px"),a||n.css("left",e.x+"px")},u=function(e){var t=c(e),a=t.x-s.left,u=t.y-s.top,h=n.height()/2,p=n.width()/2;t.x=Math.max(0-p,Math.min(a-l.x,i-p)),t.y=Math.max(0-h,Math.min(u-l.y,r-h)),d(t,!0),o((t.x+p)/i,(t.y+h)/r)}.bind(this),h=function(t){e(document).off("mousemove",u),e(document).off("mouseup",h)}.bind(this),p=function(i){s=t.offset();var r=c(i),o=n.offset();((l={x:r.x-o.left,y:r.y-o.top}).x<0||l.x>n.width()||l.y<0||l.y>n.height())&&(l.x=n.width()/2,l.y=n.height()/2,d(r)),e(document).on("mousemove",u),e(document).on("mouseup",h),u(i)}.bind(this);t.on("mousedown",p),n.on("mousedown",p)},_reanchor:function(){if(this.anchor$){var t=this.anchor$;this.anchor$.length&&(t=this.anchor$[0]);var n,i,r,o,a,s=t.getBoundingClientRect(),l=this.shell$.height(),c=this.shell$.width(),d=e(window).width(),u=e(window).height(),h=!1,p=!1,f=!1,g=!1;switch(d>s.right+c+50&&s.top+s.height/2+l/2<u&&s.top-s.height/2-l/2>0&&(f=!0),0<s.left-(c+50)&&s.top+s.height/2+l/2<u&&s.top-s.height/2-l/2>0&&(h=!0),0<s.top-(l+50)&&(p=!0),u>s.bottom+l+50&&(g=!0),this.shell$.removeClass("pop-top"),this.shell$.removeClass("pop-right"),this.shell$.removeClass("pop-left"),this.shell$.removeClass("pop-bottom"),this._options.anchorTop&&(g?a="pop-bottom":h?a="pop-left":f?a="pop-right":p?a="pop-top":console.warn("color picker does not fit anywhere")),this._options.anchorVert?a=g?"pop-bottom":p?"pop-top":f?"pop-right":"pop-left":f?a="pop-right":g?a="pop-bottom":p?a="pop-top":h?a="pop-left":(a="pop-right",console.warn("color picker does not fit anywhere")),this.carrot$.css("left",""),this.shell$.addClass(a),a){case"pop-left":i=s.left-c-20,r=Math.max(s.top+s.height/2-l/2-20,8);break;case"pop-right":i=s.right+7,r=s.top+s.height/2-l/2-20;break;case"pop-top":this.reference$&&this.reference$[0]?(i=(n=this.reference$[0].getBoundingClientRect()).left+(n.width-c)/2-7,o=s.left+s.width/2-i-this.carrot$.width()/2,this.carrot$.css("left",o+"px")):i=s.left+s.width/2-32,r=s.top-l-40;break;case"pop-bottom":this.reference$&&this.reference$[0]?(i=(n=this.reference$[0].getBoundingClientRect()).left+(n.width-c)/2-7,o=s.left+s.width/2-i-this.carrot$.width()/2,this.carrot$.css("left",o+"px")):i=s.left+s.width/2-32,r=s.bottom+8}this.shell$.css({left:i+"px",top:r+"px"}),this._positionFieldHandle()}},_bindBrandSwatch:function(e,t){e.on("click",function(){this._dontSave=!1,this.saveBtn$.removeClass("invalid"),this.colorInputHex$.removeClass("invalid"),this.colorInputHex$.val(t.hex()),this.acColor=t,this._handleHexTextInput()}.bind(this))},_addBrandSwatch:function(t,n){var i=e('<div class="brand-color-wrap"></div>'),r=e('<div class="color-picker-swatch"></div>');return t&&(n=t.hex()),r.addClass("color-hex-"+n.substring(1)),r.css("background-color",n),t&&this._bindBrandSwatch(r,t),i.append(r),i.insertBefore(this.addColor$),this._countSecondaryColors(),r},_addBrandColors:function(){this.authoringContext.getColors(void 0,["logo-extracted"]).then(function(n){var i=this.$el.find(".color-picker-brand-colors-list");i.empty(),this.addColor$=e('<div class="color-picker-add-color">+</div>'),this.addColor$.on("click",function(e){if(this.addColor$.hasClass("disabled"))return!1;this.addColor$.addClass("disabled");var t=this._addBrandSwatch(null,this._getHex());this._countSecondaryColors(),this.authoringContext.addColorHex(this._getHex(),[],null,["color"]).then(function(e){this._bindBrandSwatch(t,e),this._colorsByHex[e.hex()]=e,this._recognizeCurrentColor()}.bind(this)).done()}.bind(this)),i.append(this.addColor$);var r=t.find(n,(function(e){return e.isBaseColor()})),o=this.$el.find(".color-picker-alt-colors-list");this.authoringContext.getDerivedColors(r,["base-color"]).then(function(n){o.empty(),t.each(n,function(t){if(t.hex()!==r.hex()){var n=e('<div class="brand-color-wrap"></div>'),i=e('<div class="color-picker-swatch"></div>');i.css("background-color",t.hex()),i.addClass("color-hex-"+t.hex().substring(1)),i.on("click",function(){this.acColor=t,this._dontSave=!1,this.saveBtn$.removeClass("invalid"),this.colorInputHex$.removeClass("invalid"),this.colorInputHex$.val(t.hex()),this._handleHexTextInput()}.bind(this)),n.append(i),o.append(n)}}.bind(this))}.bind(this));var a=e('<div class="brand-color-wrap primary-brand-color"></div>'),s=e('<div class="color-picker-swatch"></div>'),l=e('<div class="vert-rule"></div>'),c=e('<div class="color-picker-secondary-colors"></div>'),d=0,u=!1;a.append(s),i.append(a),i.append(l),i.append(c),c.append(this.addColor$),t.each(n,function(e){this._colorsByHex[e.hex()]=e,e.isBaseColor()?(u=!0,s.css("background-color",e.hex()),s.addClass("color-hex-"+e.hex().substring(1)),s.on("click",function(){this._dontSave=!1,this.saveBtn$.removeClass("invalid"),this.colorInputHex$.removeClass("invalid"),this.colorInputHex$.val(e.hex()),this.acColor=e,this._handleHexTextInput()}.bind(this))):e.isDerived()||(this._addBrandSwatch(e),d++)}.bind(this)),u?this.shell$.removeClass("no-brand-colors"):this.shell$.addClass("no-brand-colors"),0===d?this.shell$.addClass("no-secondary-colors"):this.shell$.removeClass("no-secondary-colors"),this.authoringContext.belongsToUser()||this.addColor$.addClass("hide"),this._recognizeCurrentColor()}.bind(this))},_countSecondaryColors:function(){var e=this.$el.find(".color-picker-secondary-colors").children().length-1,t=this.$el.find(".color-picker-scrollable-section");t.removeClass("two-rows"),t.removeClass("three-rows"),e>11?t.addClass("three-rows"):e>5&&t.addClass("two-rows")},_handleBrandSetupClick:function(e){l.trackEvent("clickedOnboardingCTA",{trigger:"colorPicker"}),this.handleCloseBtn(),window.marvel.navigate("/branding/",{trigger:!0})},_addBrandLogoColors:function(){this.authoringContext.getColors("logo-extracted").then(function(t){t&&t.length&&(this.shell$.addClass("logo-colors"),this._options.short&&this.shell$.addClass("medium-format"));for(var n=this.$el.find(".color-picker-logo-colors-list"),i=0,r=t.length;i<r;i++){var o=t[i].hex(),a=e('<div class="brand-color-wrap"></div>'),s=e('<div class="color-picker-swatch"></div>');s.css("background-color",o),s.addClass("color-hex-"+o.substring(1)),a.append(s),n.append(a)}}.bind(this))},_addBasicColors:function(n,i){var r=0;i.empty(),t.each(n,function(t,n){++r>16&&this.moreColorsToggle$.addClass("active");var o=e('<div class="brand-color-wrap"></div>'),a=e('<div class="color-picker-swatch"></div>');n%7==0&&o.addClass("first-in-row"),a.addClass("color-hex-"+t.substring(1)),a.css("background-color",t),a.on("click",function(){this._dontSave=!1,this.saveBtn$.removeClass("invalid"),this.colorInputHex$.removeClass("invalid"),this.colorInputHex$.val(t),this.acColor=null,this._handleHexTextInput()}.bind(this)),o.append(a),i.append(o)}.bind(this))},showOverlay:function(){a.prototype.showOverlay.call(this),this.shell$.hasClass("no-brand-colors")&&!this._options.short&&l.trackEvent("viewedOnboarding",{trigger:"colorPicker"})},setLogoColors:function(e){this.logoColors=e||this.logoColors;var t=this.$el.find(".color-picker-logo-colors-list"),n=!1;this.logoColors&&this.logoColors.length>0?(n=!0,t.removeClass("loading").text(""),this._addBasicColors(this.logoColors,t)):this.loadingLogoColors&&(t.addClass("loading").text(r.getString("colorpicker-dialog-colorlist-loading-label")),n=!0),n?(this.shell$.addClass("logo-colors"),this._options.short&&this.shell$.addClass("medium-format")):(this.shell$.removeClass("logo-colors"),this._options.short&&this.shell$.removeClass("medium-format"))},render:function(){this.$el.html(r.mustacheRender(d)),e(window).on("resize",this._reanchor),this._colorsByHex={},this._saved=!1,this.shell$=this.$el.find(".color-picker-shell"),this.carrot$=this.shell$.find(".color-picker-carrot"),this.brandColorsLabel$=this.shell$.find(".brand-colors-label"),this.moreColorsToggle$=this.shell$.find(".color-picker-more-toggle"),this.moreColorsToggle$.removeClass("active"),this.moreColorsToggle$.on("click",function(){var e;this.moreColorsToggle$.hasClass("show-more")?(this.moreColorsToggle$.text(r.getString("colorpicker-dialog-more-toggle")),this.moreColorsToggle$.removeClass("show-more"),(e=this.shell$.find(".color-section-more")).addClass("color-section-less"),e.removeClass("color-section-more")):(this.moreColorsToggle$.text(r.getString("colorpicker-dialog-less-toggle")),this.moreColorsToggle$.addClass("show-more"),(e=this.shell$.find(".color-section-less")).addClass("color-section-more"),e.removeClass("color-section-less"))}.bind(this)),this.onEyedropper?(this.shell$.find(".eye-dropper").on("click",this.onEyedropper),this.shell$.find(".eye-dropper").removeClass("hide")):this.shell$.find(".eye-dropper").addClass("hide"),!s.hasFeature("entitle-brand-kit")&&this._options.upgradeEnabled&&this.shell$.addClass("upgrade"),this._options.buttons&&this.shell$.addClass("show-buttons"),this.setLogoColors(),this.authoringContext&&(this._addBrandColors(),this._addBrandLogoColors()),this._options.short?(this.shell$.removeClass("brand-tab"),this.shell$.addClass("more-tab")):(this.shell$.addClass("tall-format"),this._options.hideBrandkit||(this.authoringContext||console.warn("set colorPicker.authoringContext so it can surface brand colors"),this.authoringContext&&this.brandColorsLabel$.text(this.authoringContext.getName()),this.$el.find(".color-picker-tab-my-brand").on("click",function(){this.authoringContext&&this.brandColorsLabel$.text(this.authoringContext.getName()),this.shell$.addClass("brand-tab"),this.shell$.removeClass("more-tab"),this.$el.find(".color-picker-tab").removeClass("selected"),this.$el.find(".color-picker-tab-my-brand").addClass("selected"),this.lastTab="brand"}.bind(this)),this.$el.find(".color-picker-tab-more").on("click",function(){this.brandColorsLabel$.text(r.getString("colorpicker-dialog-brandcolors-heading")),this.shell$.addClass("more-tab"),this.shell$.removeClass("brand-tab"),this.$el.find(".color-picker-tab").removeClass("selected"),this.$el.find(".color-picker-tab-more").addClass("selected"),this.lastTab="more"}.bind(this)),this.authoringContext&&this._addBrandColors()),this.suggestedColors&&this.suggestedColors.length>0&&(this.shell$.addClass("suggested-colors"),this._addBasicColors(this.suggestedColors,this.$el.find(".color-picker-suggested-colors-list"))),this._options.basicColors&&(this.shell$.addClass("basic-colors"),this._addBasicColors(c.basicColors(),this.$el.find(".color-picker-basic-colors-list")))),this._options.hideBrandkit&&(this.shell$.removeClass("brand-tab"),this.shell$.addClass("more-tab"),this.shell$.addClass("hide-brandkit")),this.colorInputHex$=e(".color-picker-color-hex"),this.colorInputHex$.on("change",this._handleHexTextInput.bind(this)),this.colorInputHex$.on("keyup",this._handleHexTextInput.bind(this)),e(".color-picker-close-x").on("click",this.handleSave.bind(this)),e(".mrvl-overlay-bg").on("click",this.handleSave.bind(this)),e(".save-color-btn").on("click",this.handleSave.bind(this)),e(document).on("keyup.colordialog",this._handleKeyUp.bind(this)),this.saveBtn$=e(".save-color-btn"),this.fieldHandle$=this.$el.find(".sl-handle"),this._contextSL=this._setupCanvas(".color-picker-sl-gradient",188,98,!0),this._contextSLBack=this._setupCanvas(".color-picker-sl-back",188,98,!0),this._contextH=this._setupCanvas(".hue-gradient",10,98),this.color?(this._currentHSL=c.rgbToHsl(this.color),this._initHex=this._getHex()):this._currentHSL={h:0,s:.5,l:.5},this._lastHex=this._getHex(),this._renderGradients(!0),this._clickTrack(this.$el.find(".hue-gradient"),this.$el.find(".hue-handle"),10,98,function(e,t){this._currentHSL.h=t,0===this._currentHSL.s&&1===this._currentHSL.l?(this._currentHSL.l=.5,this._currentHSL.s=.8,this._renderColorPreview(),this._renderGradients(!0)):(this._renderColorPreview(),this._renderSLGradient())}.bind(this),!0),this._clickTrack(this.$el.find(".color-picker-sl-gradient"),this.$el.find(".sl-handle"),188,98,function(e,t){var n,i=Math.round(187*e),r=Math.round(97*t),o=this._contextSL.getImageData(i,r,1,1).data;0===e&&0===t?(o[0]=255,o[1]=255,o[2]=255):1===t&&(o[0]=0,o[1]=0,o[2]=0),n=c.rgbToHsl({r:o[0],g:o[1],b:o[2]}),this._currentHSL.s=n.s,this._currentHSL.l=n.l,this._renderColorPreview()}.bind(this),!1),this.color||(this._armed=!0),this._options.defaultToMore&&!this._options.short&&this.$el.find(".color-picker-tab-more")[0].click(),this._reanchor()},onHide:function(){this._saved||(this.onChange&&this.onChange(!1,this._initHex,null),this.onFinish&&this.onFinish(!1,this._initHex,null)),e(window).off("resize",this._reanchor),e(document).off("keyup.colordialog")},_handleKeyUp:function(e){e.preventDefault(),e.stopPropagation(),e.keyCode!==o.DOM_VK_ENTER&&e.keyCode!==o.DOM_VK_RETURN||this.handleSave()},getCurrentColorAsHex:function(){return this._getHex()}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2)],void 0===(r=function(e,t,n,i){"use strict";return i.Model.extend({valueProp:"ac#value",getRoles:function(){return this._data.getValue("ac#roles")||[]},setRoles:function(e){this._data.setValue("ac#roles",e)},hasRole:function(e){var n=this.getRoles();return t.includes(n,e)},hasAnyRole:function(e){var n=this.getRoles();return!!t.find(n,(function(n){return t.includes(e,n)}))},addRole:function(e){var n=this.getRoles();t.includes(n,e)||(n.push(e),this.setRoles(n))},removeRole:function(e){var n=this.getRoles();n=t.without(n,e),this.setRoles(n)},setAC:function(e){this._ac=e},setData:function(e){this._data=e},getData:function(){return this._data},getId:function(){return this._data.id},setValue:function(e){this._data.setValue(this.valueProp,e)},_getValue:function(){return this._data.getValue(this.valueProp)},getValue:function(){return this._getValue()},getValueProp:function(e,t){var n=this.getValue();return n&&n[e]?n[e]:t||""},setName:function(e){this._data.setValue("name",e)},getName:function(){return this._data.getValue("name")}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(38),n(402),n(64),n(4),n(516),n(520),n(521),n(529),n(531),n(12),n(533),n(535),n(537),n(539),n(541),n(542),n(543),n(547),n(298),n(270),n(299),n(269),n(548),n(100),n(7),n(415),n(70),n(37),n(549),n(397),n(8),n(56)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u,h,p,f,g,m,v,b,y,w,k,x,_,S,C,T,M,I,D,P,A,E,L,N,F){"use strict";var R=n.View.extend({collection:null,childViews:[],initialize:function(e){this._options=e||{},this._options.image_filter||(this._options.image_filter=[".jpg",".jpeg",".png","image/jpeg","image/png"]),this._options.imageFilter=new D(this._options.image_filter),this._handleDooploPick=this._handleDooploPick.bind(this),this._handleLightroomPick=this._handleLightroomPick.bind(this),this._handleLightroomImporterPick=this._handleLightroomImporterPick.bind(this),this._handleHierarchicalPick=this._handleHierarchicalPick.bind(this),this._handleAdobeStockPick=this._handleAdobeStockPick.bind(this),this.dropboxPickerDefer=i.defer(),this.googlePhotosPickerDefer=i.defer(),this.facebookPickerDefer=i.defer(),this.model=new k,this.model.on("change:label",function(e){var t=e.get("label");this.$el.find(".picker-bar .source-label").text(t)}.bind(this)),this._connectedApp=I.getProductName(),this._editorSection=window.marvel._siteSection.split(":")[1],this._pickerInstances=[],this._isBound||(this._isBound=!0,this._sparkAreaChange=this._sparkAreaChange.bind(this)),window.marvel.events.on("spark-area-change",this._sparkAreaChange)},render:function(){var e={},t=N.getLocale();e.adobeImageSearchInfoLink=F.getLocalizedURL("https://www.adobe.com/legal/permissions/image-notice.html",t),e.adobeImageSearchStockLink=F.getLocalizedURL("https://stock.adobe.com",t);var n=this.$el;n.html(N.mustacheRender(y,e)),n.find(".search-button").on("vclick",this._handleSearch.bind(this)),n.find(".dropbox-button").on("vclick",this._handleDropbox.bind(this)),n.find(".stock-search-button").on("vclick",this._handleStockSearch.bind(this)),n.find(".facebook-button").on("vclick",this._handleFacebook.bind(this)),n.find(".instagram-button").on("vclick",this._handleInstagram.bind(this)),n.find(".dropbox-logout").on("vclick",this._handleDropboxLogout.bind(this)),n.find(".instagram-logout").on("vclick",this._handleInstagramLogout.bind(this)),n.find(".facebook-logout").on("vclick",this._handleFacebookLogout.bind(this)),n.find(".google-photos-logout").on("vclick",this._handleGoogleLogout.bind(this)),n.find(".google-photos-button").on("vclick",this._handleGooglePhotos.bind(this)),n.find(".google-drive-button").on("vclick",this._handleGoogleDrive.bind(this)),this._useLightroomImporter()?n.find(".lightroom-button").on("vclick",this._handleLightroomImporter.bind(this)):n.find(".lightroom-button").on("vclick",this._handleLightroom.bind(this)),n.find(".cc-button").on("vclick",this._handleCC.bind(this)),n.find(".picker-bar .close-button").on("vclick",this.hide.bind(this)),n.find("button.filter").on("vclick",this._handleFilterButton.bind(this)),n.find("button.sort").on("vclick",this._handleSortButton.bind(this)),n.find(".picker-bar .back-button").on("vclick",this._handlePickerBack.bind(this));var i=n.find(".local-file-input");return i.attr("accept",this._options.imageFilter.getAcceptAttributeString()),i.on("change",this._handleLocalFile.bind(this)).on("click",(function(e){e.stopPropagation()})),n.find(".local-file-button").on("vclick",(function(e){var t=n.find(".local-file-input");t&&t[0].click(),e.preventDefault()})),n.addClass("v1design"),this.$(".local-file-button")[0].firstChild.textContent=N.formatMessage("imagepicker-upload-photo",{usePlural:!1}),this.home(),x.isAuthenticated()&&(n.find(".dropbox-connect").addClass("hide"),n.find(".dropbox-logout").addClass("authenticated")),_.isAuthenticated()&&n.find(".facebook-logout").addClass("authenticated"),S.isAuthenticated()&&n.find(".instagram-logout").addClass("authenticated"),C.isAuthenticated()&&(n.find(".google-photos-connect").addClass("hide"),n.find(".google-photos-logout").addClass("authenticated")),marvel.features.hasFeature("show-facebook-image-picker")||n.find(".facebook-button-wrapper").addClass("hide"),marvel.features.hasFeature("show-published-url-image-picker")&&(this._setupCopyUrl(),this._setupPickerProgress()),marvel.features.hasFeature("enable-image-picker-dnd")&&this._setupDragAndDrop(),marvel.features.hasFeature("show-instagram-image-picker")||n.find(".instagram-button-wrapper").addClass("hide"),this},jumpTo:function(e,t,n,i){i=i||{};var r,o=!0;"Dooplo"==e?r="vector"==this._options.assetType?"IconSearch":"Search":"Creative Cloud"==e?e=r="CC":"adobestock"==e.toLowerCase()?(e="AdobeStock",r="StockSearch",O(this._connectedApp)||(e="",r="",o=!1)):"Lightroom"===e&&this._useLightroomImporter()?(r="LightroomImporter",this.home()):"google drive"==e.toLowerCase()?o=!1:"googledrive"==e.toLowerCase()?(r=null,o=!1):r=e,"LightroomImporter"===r?this._setPickerToLightroomImporter():"StockSearch"===r?this._handleStockSearch(t||!1):this["_handle"+r]?this["_handle"+r](!1):(this.home(),o&&console.warn("Unknown image source! Context specifies "+r));this.model.get("picker");"Dooplo"==e?this.dooploPicker.show(t):"google drive"==e.toLowerCase()?this._handleGoogleDrive():"googledrive"==e.toLowerCase()?e=null:(t=t||"",e="GooglePhotos"===e?"googlePhotos":"googleDrive"==e?"googleDrive":"CC"===e?"creativeCloud":"AdobeStock"===e?"adobeStock":"LightroomImporter"===r?i.suppressServiceUI?null:"lightroomImporter":e.toLowerCase(),this._ensurePicker(e).then((function(e){e&&e.jumpTo&&e.jumpTo(t,n,i)})).done())},_ensurePicker:function(e){var t=e&&this[e+"Picker"],n=this[e+"PickerDefer"];return t?i(t):n?n.promise:i.reject("No picker found for "+e)},deselectAsset:function(){this.$(".results .selected").removeClass("selected")},_hideCurrentPicker:function(e){var t=this.$el.find(".sp-picker.showing");t.hasClass(e+"-picker")||(t.removeClass("showing"),t.hasClass("picker-home")&&t.addClass("leaving"))},_sparkAreaChange:function(e,t){"editor"===t.area.new?t.section.new===this._editorSection&&this._changingToMyEditor(t):"editor"===t.area.old&&t.section.old===this._editorSection&&this._changingFromMyEditor(t)},_changingToMyEditor:function(e){t.each(this._pickerInstances,(function(t){t.handleChangingToEditor(e)}))},_changingFromMyEditor:function(e){t.each(this._pickerInstances,(function(t){t.handleChangingFromEditor(e)}))},_saveNewPicker:function(e){this._pickerInstances.push(e)},setHomeLablesText:function(){var e,t=marvel.features.hasFeature("image-picker-singular-plural");e=this._options.homeLabel?this._options.homeLabel:N.formatMessage("imagepicker-add-photo",{usePlural:!t||this.model.get("multiSelect")}),this.model.set({label:e}),t&&(this.$(".local-file-button")[0].firstChild.textContent=N.formatMessage("imagepicker-upload-photo",{usePlural:this.model.get("multiSelect")}))},home:function(){if("vector"==this._options.assetType)return this._handleIconSearch(),void this.$(".back-button").remove();this.$el.find(".sp-picker.showing");this.$el.find(".picker-home").hasClass(".showing")||this._hideCurrentPicker(),this.$el.find(".picker-home").addClass("showing").removeClass("leaving"),this.$el.find(".picker-bar").addClass("home"),this.model.set(this.model.defaults),this.setHomeLablesText(),O(this._connectedApp)?this.$el.find(".stock-search-button-wrapper").removeClass("hide"):this.$el.find(".stock-search-button-wrapper").addClass("hide")},_enableGoogleDrive:function(){switch(this._editorSection){case"video":return marvel.features.hasFeature("google-drive-in-voice");case"post":return marvel.features.hasFeature("google-drive-in-theo");case"page":return marvel.features.hasFeature("google-drive-in-slate");default:return!1}},_handleSearch:function(){this._hideCurrentPicker("dooplo"),this.dooploPicker||(this.dooploPicker=new l(this.$el.find(".dooplo-picker"),this._handleDooploPick,this._options),this._saveNewPicker(this.dooploPicker)),this.model.set({picker:this.dooploPicker,label:N.getString("imagepicker-find-free-photos"),page:this.$el.find(".dooplo-picker"),source:"Dooplo"}),this.dooploPicker.show(),this.$el.find(".picker-bar").removeClass("home")},_handleIconSearch:function(){this._hideCurrentPicker("dooplo-icon"),this.dooploPicker||(this.dooploPicker=new l(this.$el.find(".dooplo-icon-picker"),this._handleDooploPick,this._options),this._saveNewPicker(this.dooploPicker)),this.model.set({picker:this.dooploPicker,label:N.getString("imagepicker-find-icon"),page:this.$el.find(".dooplo-icon-picker"),source:"Dooplo"}),this.dooploPicker.show()},_handleStockSearch:function(e){this._hideCurrentPicker("stock"),this.adobeStockPicker||(this.adobeStockPicker=new c(this.$el.find(".stock-picker"),this._handleAdobeStockPick,this._options),this._saveNewPicker(this.adobeStockPicker)),this.model.set({picker:this.adobeStockPicker,label:N.getString("imagepicker-source-adobe-stock"),page:this.$el.find(".stock-picker"),source:"AdobeStock"}),this.adobeStockPicker.show("string"==typeof e&&e||!1),this.$el.find(".picker-bar").removeClass("home")},_handleLocal:function(){this.$el.find(".sp-picker").removeClass("showing"),this.$el.find(".local-picker").addClass("showing")},_handleBeforeUnload:function(e){return!e.isAuthenticated()&&this._beforeUnload?this._beforeUnload():i.resolve()},_handleDropbox:function(e){this._handleBeforeUnload(x).then(function(){this._hideCurrentPicker("dropbox"),this.dropboxPicker||(this.dropboxPicker=new d(this.$el.find(".dropbox-picker"),this._handleHierarchicalPick,this),this._saveNewPicker(this.dropboxPicker)),this.model.set({picker:this.dropboxPicker,label:N.getString("imagepicker-source-dropbox"),page:this.$el.find(".dropbox-picker"),source:"Dropbox"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.dropboxPicker.populate(),this.$el.find(".dropbox-picker").addClass("showing"),this.dropboxPickerDefer.resolve(this.dropboxPicker)}.bind(this)).done()},_handleFacebook:function(e){this._handleBeforeUnload(_).then(function(){this._hideCurrentPicker("facebook"),this.facebookPicker||(this.facebookPicker=new d(this.$el.find(".facebook-picker"),this._handleHierarchicalPick,this),this._saveNewPicker(this.facebookPicker)),this.model.set({picker:this.facebookPicker,label:N.getString("imagepicker-source-facebook"),page:this.$el.find(".facebook-picker"),source:"Facebook"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.facebookPicker.populate(),this.$el.find(".facebook-picker").addClass("showing"),this.facebookPickerDefer.resolve(this.facebookPicker)}.bind(this)).done()},_handleInstagram:function(e){this._hideCurrentPicker("instagram"),this.instagramPicker||(this.instagramPicker=new d(this.$el.find(".instagram-picker"),this._handleHierarchicalPick,this),this._saveNewPicker(this.instagramPicker)),this.model.set({picker:this.instagramPicker,label:N.getString("imagepicker-source-instagram"),page:this.$el.find(".instagram-picker"),source:"Instagram"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.instagramPicker.populate(),this.$el.find(".instagram-picker").addClass("showing")},_handleGooglePhotos:function(e){this._handleBeforeUnload(C).then(function(){this._hideCurrentPicker("google-photos"),this.googlePhotosPicker||(this.googlePhotosPicker=new d(this.$el.find(".google-photos-picker"),this._handleHierarchicalPick,this),this._saveNewPicker(this.googlePhotosPicker)),this.model.set({picker:this.googlePhotosPicker,label:N.getString("imagepicker-source-google-photos"),page:this.$el.find(".google-photos-picker"),source:"Google Photos"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.googlePhotosPicker.populate(),this.$el.find(".google-photos-picker").addClass("showing"),this.googlePhotosPickerDefer.resolve(this.googlePhotosPicker)}.bind(this)).done()},_handleGoogleDrive:function(e){var t,n,i=C.getAccessToken();t=function(){i.then(function(e){r.set("google-drive-token",e);var t=new google.picker.DocsView(google.picker.ViewId.DOCS_IMAGES);t.setIncludeFolders(!0).setParent("root").setMimeTypes("image/png,image/jpeg,image/jpg");var i=(new google.picker.PickerBuilder).setAppId(C.getAppId()).setOAuthToken(e).addView(t).setDeveloperKey(C.getApiKey()).setLocale(N.getGoogleLocale()).setCallback(n);marvel.features.hasFeature("google-drive-multi")&&this.model.get("multiSelect")?(this.googleDrivePickerMulti||(i.enableFeature(google.picker.Feature.MULTISELECT_ENABLED),this.googleDrivePickerMulti=i.build()),this.googleDrivePicker=this.googleDrivePickerMulti):(this.googleDrivePickerSingle||(this.googleDrivePickerSingle=i.build()),this.googleDrivePicker=this.googleDrivePickerSingle),this.googleDrivePicker.setVisible(!0),this.model.set({picker:this.googleDrivePicker,page:this.$el.find(".google-drive-picker"),source:"GoogleDrive"})}.bind(this)).catch((function(e){marvel.logger.warn("[GoogleDrive] getAccessToken failed",e)}))}.bind(this),n=function(e){var t=e[google.picker.Response.ACTION];if(t==google.picker.Action.PICKED){var n=e[google.picker.Response.DOCUMENTS];this._handleGoogleDrivePick(n)}t!=google.picker.Action.PICKED&&t!=google.picker.Action.CANCEL||this.googleDrivePicker.setVisible(!1)}.bind(this),T.whenAvailable().then((function(){window.gapi.load("picker",{callback:t,onerror:function(e){marvel.logger.error("[GoogleDrive] error while loading Google API",e)},timeout:5e3,ontimeout:function(){marvel.logger.error("[GoogleDrive] timeout while loading Google API")}})}))},_handleLightroom:function(e){this._hideCurrentPicker("lightroom"),this.lightroomPicker||(this.lightroomPicker=new d(this.$el.find(".lightroom-picker"),this._handleLightroomPick,this),this._saveNewPicker(this.lightroomPicker)),this.model.set({picker:this.lightroomPicker,label:N.getString("imagepicker-source-lightroom"),page:this.$el.find(".lightroom-picker"),source:"Lightroom"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.lightroomPicker.populate(),this.$el.find(".lightroom-picker").addClass("showing")},_setPickerToLightroomImporter:function(){this.lightroomImporterPicker||(this.lightroomImporterPicker=new w(this.$el.find(".lightroom-importer-wrapper"),this._handleLightroomImporterPick,this),this._saveNewPicker(this.lightroomImporterPicker)),this.model.set({picker:this.lightroomImporterPicker,page:this.$el.find(".lightroom-importer-wrapper"),source:"Lightroom"})},_handleLightroomImporter:function(e){this._setPickerToLightroomImporter(),this.lightroomImporterPicker.show({multiSelect:this.model.get("multiSelect")})},_handleCC:function(e){this._hideCurrentPicker("creative-cloud"),this.creativeCloudPicker||(this.creativeCloudPicker=new d(this.$el.find(".creative-cloud-picker"),this._handleHierarchicalPick,this),this._saveNewPicker(this.creativeCloudPicker)),this.model.set({picker:this.creativeCloudPicker,label:N.getString("imagepicker-source-creative-cloud"),page:this.$el.find(".creative-cloud-picker"),source:"Creative Cloud"}),this.$el.find(".picker-bar").removeClass("home"),e&&this.creativeCloudPicker.populate(),this.$el.find(".creative-cloud-picker").addClass("showing")},_handleDropboxLogout:function(e){var t=this.$el.find(".dropbox-logout"),n=this.$el.find(".dropbox-connect");marvel._dialogShowing||(this.dropboxLogoutConfirmView||(this.dropboxLogoutConfirmView=new g,this.dropboxLogoutConfirmView.on("confirm",(function(){x.logout(),t.removeClass("authenticated"),n.removeClass("hide")}))),this.dropboxLogoutConfirmView.showOverlay(),e.stopPropagation())},_handleInstagramLogout:function(e){var t=this.$el.find(".instagram-logout");marvel._dialogShowing||(this.instagramLogoutConfirmView||(this.instagramLogoutConfirmView=new v,this.instagramLogoutConfirmView.on("confirm",(function(){S.logout(),t.removeClass("authenticated")}))),this.instagramLogoutConfirmView.showOverlay(),e.stopPropagation())},_handleFacebookLogout:function(e){var t=this.$el.find(".facebook-logout");marvel._dialogShowing||(this.facebookLogoutConfirmView||(this.facebookLogoutConfirmView=new f,this.facebookLogoutConfirmView.on("confirm",(function(){_.logout(),t.removeClass("authenticated")}))),this.facebookLogoutConfirmView.showOverlay(),e.stopPropagation())},_handleGoogleLogout:function(e){var t=this.$el.find(".google-photos-logout"),n=this.$el.find(".google-photos-connect");marvel._dialogShowing||(this.googleLogoutConfirmView||(this.googleLogoutConfirmView=new m,this.googleLogoutConfirmView.on("confirm",(function(){C.logout(),t.removeClass("authenticated"),n.removeClass("hide")}))),this.googleLogoutConfirmView.showOverlay(),e.stopPropagation())},_handlePickerBack:function(){var e=this.model.get("picker");e&&e.canGoBack()?e.goBack():this.home()},_handleDooploPick:function(e){var t=[{source:"Dooplo",mimeType:e.getMimeType(),original:{link:e.getOriginalURL(),height:e.links.original.height,width:e.links.original.width},preview:{link:e.getPreviewURL(),height:e.links.preview.height,width:e.links.preview.width},thumbnail:{link:e.getThumbURL(),height:e.links.thumb.height,width:e.links.thumb.width}}],n=this.dooploPicker.getSearchText(),i=e.data.source.name;e.data.searchText=n,I.trackEvent("imageChosen",{imageSource:"dooplo:"+i,searchTerm:n,contextData:["projectId"]},this._connectedApp+":editor"),this._userURLHandler&&this._userURLHandler(t,e.data)},_handleAdobeStockPick:function(e){var t=[{source:"AdobeStock",mimeType:e.getMimeType(),original:{},preview:{link:e.getPreviewURL(),height:e.links.preview.height,width:e.links.preview.width},thumbnail:{link:e.getThumbURL(),height:e.links.thumb.height,width:e.links.thumb.width},licenseInfo:e.licenseInfo}],n=t[0].licenseInfo.license.short_name;e.setOriginalLinkFields(t[0].original);var i=this.adobeStockPicker.getSearchContext();e.licenseInfo.searchText=i,I.trackEvent("imageChosen",{imageSource:"AdobeStock",licenseType:n,searchTerm:i,contextData:["projectId"]},this._connectedApp+":editor"),this._userURLHandler&&this._userURLHandler(t,e.licenseInfo)},_handleHierarchicalPick:function(e,t,n){e.aspect&&(t=e.aspect.width||t,n=e.aspect.height||n);var i=[{source:this.model.get("source"),mimeType:e.getMimeType?e.getMimeType():"image/jpeg",original:{link:encodeURI(e.getOriginalURL()),height:e.links.original.height||n,width:e.links.original.width||t},preview:{link:encodeURI(e.getPreviewURL()),height:e.links.original.height||n,width:e.links.original.width||t},thumbnail:{link:encodeURI(e.getThumbURL()),height:e.links.original.height||n,width:e.links.original.width||t},caption:e.caption}];"Dropbox"==this.model.get("source")&&I.trackEvent("imageChosen",{imageSource:"Dropbox",contextData:["projectId"]},this._connectedApp+":editor"),"Facebook"==this.model.get("source")?I.trackEvent("imageChosen",{imageSource:"Facebook",contextData:["projectId"]},this._connectedApp+":editor"):"Creative Cloud"==this.model.get("source")?I.trackEvent("imageChosen",{imageSource:"Creative Cloud",contextData:["projectId"]},this._connectedApp+":editor"):"Google Photos"==this.model.get("source")?I.trackEvent("imageChosen",{imageSource:"Google Photos",contextData:["projectId"]},this._connectedApp+":editor"):"Facebook"==this.model.get("source")?I.trackEvent("imageChosen",{imageSource:"Facebook",contextData:["projectId"]},this._connectedApp+":editor"):"Instagram"==this.model.get("source")&&I.trackEvent("imageChosen",{imageSource:"Instagram",contextData:["projectId"]},this._connectedApp+":editor");var r,o,a=this.model.get("picker"),s=e.getParentPath(),l=a.getCurrentFolderPath();l&&(s=s.replace(l.toLowerCase(),l)),"Google Photos"==this.model.get("source")?(r=a.getCurrentFolderUrl().replace(/^.*albumid\/([^\/\?\#]*).*$/,"$1"),o=l.replace(/^\//,"")):"Facebook"==this.model.get("source")?(r=a.getCurrentFolderUrl(),o=l.replace(/^\//,"")):"Instagram"==this.model.get("source")&&(r=a.getCurrentFolderUrl(),o=l.replace(/^\//,"")),this._userURLHandler&&this._userURLHandler(i,{path:s,albumId:r,albumName:o,assetID:e.data.path_lower,thumbNaturalSize:e.thumbNaturalSize})},_handleGoogleDrivePick:function(e){var n=window.location.protocol+"//"+window.location.host+"/images/google/drive-icon-mono-512.png?t="+t.now(),i=[];t.each(e,(function(e){var t={source:"Google Drive",mimeType:e.mimeType,original:{link:encodeURI("https://www.googleapis.com/drive/v2/files/"+e.id+"?alt=media")},preview:{link:encodeURI("https://"+window.location.host+"/gd_files/drive/v2/files/"+e.id+"?alt=media")},thumbnail:{link:encodeURI(n)},caption:e.description};i.push(t)})),I.trackEvent("imageChosen",{imageSource:"Google Drive",contextData:["projectId"]},this._connectedApp+":editor"),this._userURLHandler&&this._userURLHandler(i,{path:encodeURI("https://"+window.location.host+"/gd_files/drive/v2/files/"+e[0].id+"?alt=media"),albumId:"",albumName:"",assetID:e[0].id,thumbNaturalSize:{width:0,height:0}})},_handleLightroomPick:function(e){var t,n=[{source:"Lightroom",mimeType:e.getMimeType(),original:{link:encodeURI(e.getOriginalURL()),height:e.links.original.height,width:e.links.original.width},preview:{link:encodeURI(e.getPreviewURL()),height:e.links.original.height,width:e.links.original.width},thumbnail:{link:encodeURI(e.getThumbURL()),height:e.links.original.height,width:e.links.original.width},caption:e.caption}];I.trackEvent("imageChosen",{imageSource:"Lightroom",contextData:["projectId"]},this._connectedApp+":editor");var i=this.model.get("picker").getLastCrumb();this._userURLHandler&&(i&&i.label?t={albumName:i.label}:i&&i.item&&i.item.data&&(t={albumName:i.item.data.name}),t.thumbNaturalSize=e.thumbNaturalSize,this._userURLHandler(n,t))},_handleLightroomImporterPick:function(e){var t,n=[],i=[];for(t=0;t<e.length;t++){var r=e[t],o={source:"Lightroom",mimeType:r.getMimeType(),original:{link:encodeURI(r.getOriginalURL()),height:r.links.original.height,width:r.links.original.width},preview:{link:encodeURI(r.getPreviewURL()),height:r.links.original.height,width:r.links.original.width},thumbnail:{link:encodeURI(r.getThumbURL()),height:r.links.original.height,width:r.links.original.width},caption:r.caption,largeRenditionRequest:r.largeRenditionRequest};n.push(o),i.push({albumName:r.albumName})}I.trackEvent("imageChosen",{imageSource:"Lightroom",contextData:["projectId"]},this._connectedApp+":editor"),this._useLightroomImporter()&&this._userURLHandler&&this._userURLHandler(n,i)},_handleLocalFile:function(t){var n=t.target.files;I.trackEvent("imageChosen",{imageSource:"Local File",contextData:["projectId"]},this._connectedApp+":editor");var i=e(t.target).clone();e(t.target).replaceWith(i),i.val("").on("change",this._handleLocalFile.bind(this)).on("click",(function(e){e.stopPropagation()})),this._userLocalHandler&&this._userLocalHandler(n)},_setupDragAndDrop:function(){this._userLocalHandler&&(this._dropTarget$=this.$el.find(".photo-picker"),this.$el.find(".drag-and-drop-explainer-holder").removeClass("hide"),this._dropTarget$.on("drag dragstart dragend dragleave drop",(function(e){e.preventDefault(),e.stopPropagation()})),this._dropTarget$.on("dragenter dragover",function(e){"dragover"===e.originalEvent.type&&(e.originalEvent.dataTransfer.dropEffect="copy"),this._dropTarget$.addClass("dragover-target"),e.preventDefault(),e.stopPropagation()}.bind(this)),this._dropTarget$.on("dragleave dragend drop",function(e){this._dropTarget$.removeClass("dragover-target")}.bind(this)),this._dropTarget$.on("drop",this._handleDrop.bind(this)),this._applyOptionsToDnD())},_handleDrop:function(e){e.preventDefault(),e.stopPropagation();var n=[],i=this.model.get("multiSelect"),r=this._options.image_filter,o=e.originalEvent.target.files||e.originalEvent.dataTransfer.files;if(o&&o.length)if(i)n=t.filter(o,(function(e){return r.indexOf(e.type)>-1}));else{var a=t.find(o,(function(e){return r.indexOf(e.type)>-1}));a&&n.push(a)}else if(marvel.features.hasFeature("show-published-url-image-picker")){var s=e.originalEvent.dataTransfer&&(e.originalEvent.dataTransfer.getData("URL")||e.originalEvent.dataTransfer.getData("text"));if(s)return void this._handleCopyUrl(s,"dnd")}if(n.length)if(i&&n.length!==o.length){var l=N.formatMessage("imagepicker-drop-confirm-message",{validCount:n.length,totalCount:o.length,supportedType:this._fileTypesString});p.showConfirm(N.getString("imagepicker-copy-url-alert-title"),l,{okText:N.getString("imagepicker-drop-confirm-button-ok"),cancelText:N.getString("imagepicker-drop-confirm-button-cancel")}).then(function(e){e&&this._userLocalHandler(n)}.bind(this))}else this._userLocalHandler(n);else{var c=N.formatMessage("imagepicker-drop-confirm-message-invalid",{supportedType:this._fileTypesString});p.showAlert(N.getString("imagepicker-copy-url-alert-title"),c).done()}I.trackEvent("imageChosen",{imageSource:"Local File DnD",contextData:["projectId"],numFiles:n.length},this._connectedApp+":editor")},_applyOptionsToDnD:function(){var e=[];t.each(this._options.image_filter,(function(t){"."===t.charAt(0)?t=t.substring(1):0===t.indexOf("image/")&&(t=t.substring(6)),-1===e.indexOf(t)&&e.push(t)})),this._fileTypesString=e.join(", "),this.model.get("multiSelect")?this.$el.find(".drag-and-drop-explainer-holder").addClass("multiSelect"):this.$el.find(".drag-and-drop-explainer-holder").removeClass("multiSelect")},remove:function(){return this.$el.empty(),this._changingFromMyEditor(),window.marvel.events.off("spark-area-change",this._sparkAreaChange),this},show:function(e){e=e||{},this.model.set("multiSelect",e.multiSelect);var t="vector"==this._options.assetType,n=t?".dooplo-icon-picker":".picker-home";this.isShowing()||window.setTimeout(function(){if(!this.isShowing()){var i=this.$el;i.find(".photo-picker").addClass("showing"),i.find(".sp-picker").removeClass("showing"),i.find(n).addClass("showing"),i.find(".results .selected").removeClass("selected"),marvel.features.hasFeature("google-photos")&&i.find(".google-photos-button-wrapper").removeClass("hide"),this._enableGoogleDrive()&&(T.init(),i.find(".google-drive-button-wrapper").removeClass("hide"));var r=e.context;r&&-1==r.class_name.search(/OnDevice|Camera/)?(i.addClass("no-animate"),i.find(".picker-home").removeClass("showing"),setTimeout((function(){i.removeClass("no-animate")}),0),this.jumpTo(r.class_name.replace(/ImagePickerContext$/,""),r.album_id||r.path||r.search_string||r.album_name,r.album_name,e)):(this.$el.find(".picker-bar").addClass("home"),t||this.setHomeLablesText())}}.bind(this),0);var i=this.$el.find(".local-file-input");e.multiSelect?i.attr("multiple","multiple"):i.removeAttr("multiple"),marvel.features.hasFeature("enable-image-picker-dnd")&&this._dropTarget$&&this._applyOptionsToDnD();var r=[];s.ignoreDooploSourceTypes||this._options.dooploSourceTypes&&this._options.dooploSourceTypes.length>0&&(r=this._options.dooploSourceTypes);var o=a.getProfile();o&&(o.filterDooploBitmapServicesForUser(r,this._connectedApp).enabled.length?(this._dooploEnabled=!0,this.$el.find(".search-button").removeClass("hide")):(this._dooploEnabled=!1,this.$el.find(".search-button").addClass("hide")));return this},hide:function(){return this.$el.find(".photo-picker").removeClass("showing"),this._pickerProgress$&&this._hidePickerProgressForPickerClose(),this.lightroomImporterPicker&&this.lightroomImporterPicker.hide(),this.trigger("hide"),this},isShowing:function(){return this.$el.find(".photo-picker").hasClass("showing")},setCallbacks:function(e,t){this._userURLHandler=e,this._userLocalHandler=t},setBeforeUnload:function(e){this._beforeUnload=e},canReloadPage:function(){var e={okToReload:!0};return this.trigger("wantPageReload",e),e.okToReload},getImageFilter:function(){return this._options.imageFilter},requestFileSelect:function(){this.isShowing()&&this.$el.find(".local-file-input").click()},_handleFilterButton:function(){var e=this.model.get("picker").getFilter();marvel._dialogShowing||(this._filterDialogView||(this._filterDialogView=new u({filter:e}),this._filterDialogView.model.on("change:filter",this._handleSetFilter.bind(this))),this._filterDialogView.showOverlay())},_handleSortButton:function(){var e=this.model.get("picker").getSort();marvel._dialogShowing||(this._sortDialogView||(this._sortDialogView=new h({sort:e}),this._sortDialogView.model.on("change:sort",this._handleSetSort.bind(this))),this._sortDialogView.showOverlay())},_handleSetFilter:function(){var e=this.model.get("picker");e.setFilter(this._filterDialogView.model.get("filter")),e.refresh()},_handleSetSort:function(){var e=this.model.get("picker");e.setSort(this._sortDialogView.model.get("sort")),e.refresh()},_useLightroomImporter:function(){return marvel.features.hasFeature("lightroom-importer")&&this._options&&this._options.lightroomImporter},_parsePastedUrl:function(e,n){var i={},r=A.parse(e,!0);if(r.protocol&&"https:"!==r.protocol?i.errorAlertString=N.getString("imagepicker-parsed-url-error-https"):r.hostname&&(-1!=r.hostname.search(/\.adobe\.io$/)?-1!=r.pathname.search(/.*\/rendition\/.*\/format\/|\/assets\//)&&(i.renditionUrl=e):-1!=r.hostname.search(/\.adobeprojectm\.com$|\.adobe\.com$/)?r.query.asset_id&&(i.renditionUrl=e):-1!=r.hostname.search(/\.adobecc\.com$/)?"/api"===r.pathname?i.renditionUrl=e:i.errorAlertString=N.getString("imagepicker-parsed-url-error-adobecc"):"photos.google.com"===r.hostname?this._errorStrForDisallowedGoogleCopyUrl?i.errorAlertString=this._errorStrForDisallowedGoogleCopyUrl:-1==r.pathname.search(/.*\/photo\//)?i.errorAlertString=N.getString("imagepicker-parsed-url-error-google-photo-single"):i.errorAlertString="dnd"===n?N.getString("imagepicker-parsed-url-error-google-photo-dnd"):N.getString("imagepicker-parsed-url-error-google-photo"):-1!=r.hostname.search(/\.googleusercontent\.com$/)?this._errorStrForDisallowedGoogleCopyUrl?i.errorAlertString=this._errorStrForDisallowedGoogleCopyUrl:i.renditionUrl=e:-1!=r.hostname.search(/\.fbcdn\.net$/)?this._errorStrForDisallowedFacebookCopyUrl?i.errorAlertString=this._errorStrForDisallowedFacebookCopyUrl:i.renditionUrl=e:-1!=r.hostname.search(/\.facebook\.com$/)&&(this._errorStrForDisallowedFacebookCopyUrl?i.errorAlertString=this._errorStrForDisallowedFacebookCopyUrl:"/photo.php"!==r.pathname?i.errorAlertString=N.getString("imagepicker-parsed-url-error-facebook-single"):i.errorAlertString="dnd"===n?N.getString("imagepicker-parsed-url-error-facebook-dnd"):N.getString("imagepicker-parsed-url-error-facebook"))),!i.renditionUrl&&!i.errorAlertString){var o=r.pathname.split("/"),a=o.length-1,s="",l=marvel.settings.umbrellaCommunity;i.alias=t.findLast(o,(function(e){if(""!==e)return!0;a--})),i.alias&&(a&&"assets"===(s=o[a-1])&&a>1&&(s=o[a-2]),"lrgallery"===s&&(l=s),i.metaDataUrl="https://"+marvel.settings.cps+"/api/v2/"+l+"/assets/"+i.alias)}return i},_setupPickerProgress:function(){this._pickerProgress$=this.$el.find(".picker-progress"),this._pickerProgressContent$=this._pickerProgress$.find(".content")},_showPickerProgress:function(e,t){this.$el.find(".picker-wrapper").addClass("hide"),this._pickerProgress$.removeClass("hide"),this._pickerProgressContent$.text(e||""),this._pickerProgressCancelledCallback=t},_hidePickerProgress:function(){this.$el.find(".picker-wrapper").removeClass("hide"),this._pickerProgress$.addClass("hide"),delete this._pickerProgressCancelledCallback},_hidePickerProgressForPickerClose:function(){this._pickerProgressCancelledCallback&&this._pickerProgressCancelledCallback(),this._hidePickerProgress()},_handleCopyUrlButton:function(e){this._handleCopyUrl(this.copyUrlInput$.val(),"field")},_handleCopyUrl:function(t,n){var r,o=this._parsePastedUrl(t,n),a=i.defer(),s=!1;o.metaDataUrl?(this._showPickerProgress(N.formatMessage("imagepicker-copy-url-processing-uri",{projectUri:t}),(function(){s=!0})),e.ajax({url:o.metaDataUrl,type:"GET",headers:{"X-Api-Key":marvel.settings.cpkey},success:function(e,t,n){a.resolve(e)},error:function(e){r=404===e.status?N.formatMessage("imagepicker-copy-url-error-not-found",{projectUri:t}):N.formatMessage("imagepicker-copy-url-error-load",{projectUri:t}),p.showAlert(N.getString("imagepicker-copy-url-alert-title"),r).then((function(){a.reject(e)}))}})):o.renditionUrl?(this._showPickerProgress(N.formatMessage("imagepicker-copy-url-processing"),(function(){s=!0})),a.resolve(o)):o.errorAlertString?p.showAlert(N.getString("imagepicker-copy-url-alert-title"),o.errorAlertString).then((function(){a.reject(new Error("ImagePickerView::errorAlertString"))})):(r=N.formatMessage("imagepicker-copy-url-error-url",{projectUri:t}),p.showAlert(N.getString("imagepicker-copy-url-alert-title"),r).then((function(){a.reject(new Error("ImagePickerView::_handleCopyUrlButton"))}))),a.promise.then(function(e){if(this.isShowing()&&!s){var t;if(e.renditionUrl)t=e.renditionUrl;else{var n=0;e.category&&("lucas"===e.category.id?n=1440:"voices"===e.category.id?n=1280:"theos"===e.category.id&&(n=1600)),t=e._links.rendition.href.replace("{format}","jpg").replace("{dimension}","width").replace("{size}",n)}P.convertUrlToBlob(t).then(function(e){s||(this._hidePickerProgress(),this._userLocalHandler([e]))}.bind(this),function(e){s||(this._hidePickerProgress(),p.showAlert(N.getString("imagepicker-copy-url-alert-title"),N.getString("imagepicker-copy-url-processing-error")).done())}.bind(this)).done()}}.bind(this),function(e){s||this._hidePickerProgress()}.bind(this)).done()},_setupCopyUrl:function(){if(this._userLocalHandler){var t=this.$el.find(".copy-url-wrapper"),n=t.find(".copy-url-button");this.copyUrlInput$=t.find(".copy-url-input"),this.copyUrlInput$.on("keydown",function(e){13===e.keyCode&&this._handleCopyUrlButton(e)}.bind(this)),this.copyUrlProgress$=this.$el.find(".copy-url-progress"),n.on("click",function(e){this._handleCopyUrlButton(e)}.bind(this)),this.copyUrlInput$.on("click",(function(t){e(this).select()})),t.removeClass("hide"),marvel.features.hasFeature("show-published-url-image-picker-allow-facebook")||(marvel.features.hasFeature("show-facebook-image-picker")?this._errorStrForDisallowedFacebookCopyUrl=N.getString("imagepicker-copy-url-error-facebook-picker"):this._errorStrForDisallowedFacebookCopyUrl=N.getString("imagepicker-copy-url-error-facebook")),marvel.features.hasFeature("show-published-url-image-picker-allow-google")||(this._errorStrForDisallowedGoogleCopyUrl=N.getString("imagepicker-copy-url-error-google"))}}});function O(e){return a.getProfile()?a.getProfile().canShowNonDooploImageSourceForUser("stock",e):null}return R.getStockAssetDetailUrl=function(e){return M.getStockAssetDetailsUrl(e.image_id)},R.licenseStockAsset=function(e){console.log("Called licenseStockAsset for id "+e.image_id);var n=i.defer(),r={};return p.showWaitView(N.getString("imagepicker-stock-retrieving-wait"),"",{minHeight:b.getMinHeightForConfirms()}),M.getLicensesAvailable().then((function(n){return t.assign(r,{"licenses-available":n.numLicenses,purchase_url:n.purchaseUrl,referToStockSite:n.requiresCheckout,notAllowedToPurchase:n.notAllowedToPurchase,purchaseMessage:n.purchaseMessage}),M.getItemInfo(e.image_id)})).then((function(e){r.creator_name=e.creator_name,r.image_title=e.title,r.details_url=e.details_url,r.license_type=e.is_licensed,r.premium_level_id=e.premium_level_id,r.image_id=e.id,(new b).showLicensingFlow(r).then(function(t){t.info=c.licenseInfoFromData(e,t.licenseType),n.resolve(t)}.bind(this),(function(e,t){"cancel"!==e?(marvel.logger.error("showLicensingFlow failed",e),n.reject("licensing failed",t)):n.reject("licensing cancelled")}))})).fail((function(e){p.showAlert(N.getString("imagepicker-stock-retrieving-error"),N.getString("imagepicker-stock-retrieving-error-desc")),marvel.logger.error("licensing failed",e),n.reject("not licensed",e)})),n.promise},R.getStockLicenseInfo=function(e){return M.getItemInfo(e)},R.isLicenseForStock=function(e){return["royalty_free","royalty_free_standard","royalty_free_extended"].indexOf(e.type)>-1},R.updateAttributeViewForLicensing=function(e){var t=e.attributionDialog;if(t.$el.hasClass("auto-height")||(t.$el.addClass("auto-height"),R.isLicenseForStock(e.licenseInfo)||t.contentModified()),e.licenseInfo&&"unsplash"===e.licenseInfo.type){var n=t.$el.find(".license_type");if(n.length){E.licenseTypeMap.unsplash;n.text(N.getString("imagepicker-unsplash-license"))}}if(!R.isLicenseForStock(e.licenseInfo))return!1;var i=t.$el.find(".original_source"),r=t.$el.find(".license_wrapper"),o=e.licenseInfo,a={image_id:o.image_id};return t.licenseHandlerObjects||(t.licenseHandlerObjects={}),t.on("cancel",(function(){this.licenseHandlerObjects&&(this.licenseHandlerObjects.$buttonWrapper&&this.licenseHandlerObjects.$buttonWrapper.off("click"),this.licenseHandlerObjects.$originalSource.off("click"),this.licenseHandlerObjects=null)})),r.removeClass("hide"),t.$el.find(".copyright_info").addClass("hide"),"royalty_free"===o.type?(r.find(".license_photo_button").on("click",function(){var t={image_id:o.image_id,owner:o.owner,photo_name:o.photo_name,source_name:o.source_name,license_type:o.type};e.licensingCallback&&e.licensingCallback("licensing"),R.licenseStockAsset(t).then((function(t){e.licensingCallback("licensed",t)}),(function(t){e.licensingCallback("licensing-rejected",t)}))}.bind(this)).removeClass("hide"),t.licenseHandlerObjects.$buttonWrapper=r):r.find(".license_photo_button").addClass("hide"),i.addClass("disabled"),i.on("click",function(e){if(i.hasClass("disabled"))e.preventDefault();else{i.addClass("disabled");var t={image_id:o.image_id};R.getStockAssetDetailUrl(t).then((function(e){i.attr("href",e),i.removeClass("disabled")})).done()}}.bind(this)),R.getStockAssetDetailUrl(a).then((function(e){i.attr("href",e).removeClass("disabled")})).done(),t.licenseHandlerObjects.$originalSource=i,e.ignoreContentModified||t.contentModified(),!0},R.displayAttributionDialog=function(t,n){var r,o,a=n.editorEl$.find(".attribution-dialog-overlay");if(a.length?o=a.data("attribution-dialog-overlay"):(a=e('<div class="attribution-dialog-overlay hide"></div>'),n.editorEl$.append(a)),marvel._dialogShowing&&(!o||!o.isShowing()))return i.reject("other dialog already showing");var s=i.defer();if(o&&o.$el.parent().length||(o=new E({el:a}),a.data("attribution-dialog-overlay",o),a.addClass(n.appSpecificClass||"generic")),n.calcLocationFromIcon){var l=n.icon$[0].getBoundingClientRect(),c=l.top-n.editorEl$.offset().top;r={x:l.left+l.width/2,y:c+l.height/2,left:l.left,top:c,width:l.width,height:l.height}}else r=n.location;var d={location:r,updateAttributeViewForLicensing:R.updateAttributeViewForLicensing,info:t,options:n,imagePickerView:this};return o.showOverlayWithData(d,s),s.promise},R.getServiceSource=function(e){var t=e.source.toLowerCase();return"creative cloud"===t?t="cc":"adobe stock"===t&&(t="AdobeStock"),t},R}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";n.r(t);var i=n(46),r=n(61),o=n(3),a=n(5),s=n(6),l=n(4),c=n(11),d=n(406),u=(n(503),new d),h=new c({color:"rebeccapurple",name:"LMSController"}),p=l.sparkEduHost||null,f=o.defer(),g=new(function(){function e(){i(this,e)}return r(e,[{key:"init",value:function(){var e=this,t=new URLSearchParams(window.location.search),n=!(!t.get("ref")||"lms"!==t.get("ref").toLowerCase());n&&t.get("lms")&&t.get("lms").toLowerCase();s.requiresAuth().then((function(){a.allFeaturesLoaded().then((function(){e._getUserRolesFromUDS().then((function(t){var i=t.data.classroom_role;e._setUserLmsRole(i),"none"!==i&&n&&e._incrementVisitCount(),f.resolve()}))})).done()})).done()}},{key:"_reset",value:function(){f=o.defer()}},{key:"_getUserRolesFromUDS",value:function(){return window.fetch("/uds/v2/",{credentials:"include"}).then((function(e){return e.status<200||e.status>=300?(h.info("Got response from UDS, user has no classroom role."),{data:{classroom_role:"none"}}):e.json()})).catch((function(e){return h.warn("Got an error attempting to call UDS, assuming user has no classroom role.",e),{data:{classroom_role:"none"}}}))}},{key:"_setUserLmsRole",value:function(e){a.hasFeature("spark-lms-force-user-teacher")?a.setUserProperty("spark-lms-role","teacher"):a.hasFeature("spark-lms-force-user-student")?a.setUserProperty("spark-lms-role","student"):a.setUserProperty("spark-lms-role",e)}},{key:"_incrementVisitCount",value:function(){var e=a.getUserProperty("spark-lms-visit-count")+1||1;a.setUserProperty("spark-lms-visit-count",e)}},{key:"showModal",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.type,r=e.id,o=n.syncInProgress,a=void 0!==o&&o,s=null;i&&r?p?f.promise.then((function(){t.getAccountType().then((function(e){"student"===e&&(s="".concat(p,"/cc-spark-edu/modal/learner/turnin/").concat(i,"/").concat(r)),"teacher"===e&&(s="".concat(p,"/cc-spark-edu/modal/educator/attach/").concat(i,"/").concat(r),a?window.marvel.events.on("sync-stop",t.sendSaveCompleteMessage):setTimeout(t.sendSaveCompleteMessage,2e3)),u.setAndShowIframe({iframeSrc:s,role:e})})).done(),window.addEventListener("message",t._receiveMessage,!1)})).done():h.error("Error getting ccEduHost from Settings"):h.error("Must call LMSController.showModal with project data")}},{key:"sendSaveCompleteMessage",value:function(){u.getIframeEl().contentWindow.postMessage("save-success",p)}},{key:"sendSaveErrorMessage",value:function(){u.getIframeEl().contentWindow.postMessage("save-error",p)}},{key:"_receiveMessage",value:function(e){e.origin===p&&"close"===e.data&&(u.hideOverlay(),window.removeEventListener("message",this._receiveMessage))}},{key:"getAccountType",value:function(){return f.promise.then((function(){return a.getUserProperty("spark-lms-role")}))}},{key:"isLMSUser",value:function(){return f.promise.then((function(){return"none"!==a.getUserProperty("spark-lms-role")}))}},{key:"shouldShowNewBadge",value:function(){return f.promise.then((function(){return"none"!==a.getUserProperty("spark-lms-role")&&((a.getUserProperty("spark-lms-visit-count")||0)<=3||a.hasFeature("spark-lms-force-new-user"))}))}},{key:"getVisitCount",value:function(){return f.promise.then((function(){return a.getUserProperty("spark-lms-visit-count")||0}))}}]),e}());t.default=g},function(e,t){e.exports='<div class="mrvl-overlay-bg">\n</div>\n\n<div class="mrvl-overlay-shell">\n    <iframe id="lms-integration-iframe" src/>\n</div>\n'},function(e,t,n){var i=n(504);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(34)(!1)).push([e.i,"#lms-integration-iframe{height:100%;width:100%;border-radius:10px}.lms-integration-dialog-overlay.student .mrvl-overlay-shell{width:810px;height:455px}.lms-integration-dialog-overlay.teacher .mrvl-overlay-shell{width:440px;height:250px}",""])},function(e,t){e.exports='<div class="color-picker-bg mrvl-overlay-bg">\n</div>\n<div class="color-picker-shell mrvl-overlay-shell brand-tab">\n\n    <div class="color-picker-tabs">\n        <div class="color-picker-tab color-picker-tab-my-brand selected">{{colorpicker-dialog-tab-mybrand}}</div>\n        <div class="color-picker-tab color-picker-tab-more">{{colorpicker-dialog-tab-more}}</div>\n    </div>\n\n    <div class="color-picker-upgrade">\n        <h2>{{colorpicker-dialog-upgrade-heading}}</h2>\n        <button class="mrvl-btn color-picker-upgrade-button">{{colorpicker-dialog-upgrade-button}}</button>\n    </div>\n\n    <div class="color-picker-brand-onboard">\n        <p>{{colorpicker-dialog-brandsetup-label}}</p>\n        <button class="mrvl-btn color-picker-brand-setup-button">{{colorpicker-dialog-brandsetup-button}}</button>\n    </div>\n\n    <div class="color-picker-brand-colors-section">\n        <h4 class="color-picker-section brand-colors-label">{{colorpicker-dialog-brandcolors-heading}}</h4>\n        <div class="color-picker-brand-colors-list"></div>\n    </div>\n\n    <div class="color-picker-scrollable-section">\n        <div class="color-picker-other-colors-section">\n            <h4 class="color-picker-section">{{colorpicker-dialog-alternate-brandcolors-heading}}</h4>\n            <div class="color-picker-alt-colors-list color-section-less"></div>\n        </div>\n\n        <div class="color-picker-suggested-colors-section">\n            <h4 class="color-picker-section">{{colorpicker-dialog-suggested-colors-heading}}</h4>\n            <div class="color-picker-suggested-colors-list color-section-less"></div>\n        </div>\n\n        <div class="color-picker-logo-colors-section">\n            <h4 class="color-picker-section">{{colorpicker-dialog-logo-colors-heading}}</h4>\n            <div class="color-picker-logo-colors-list color-section-less loading"></div>\n        </div>\n\n        <div class="color-picker-basic-colors-section">\n            <h4 class="color-picker-section basic-colors-label">{{colorpicker-dialog-basic-colors-heading}}</h4>\n            <div class="color-picker-basic-colors-list color-section-less"></div>\n        </div>\n        <div class="color-picker-more-toggle">{{colorpicker-dialog-more-toggle}}</div>\n\n        <div class="color-picker-preview-control">\n            <div class="color-picker-color-preview"></div>\n            <div class="color-picker-hex-wrap">\n                <label>{{colorpicker-dialog-hex-or-rgb-label}}</label>\n                <input type="text" class="color-picker-color-hex">\n            </div>\n            <div class="eye-dropper">\n                <div class="eye-dropper-button" title="{{colorpicker-dialog-eyedropper-title}}"></div>\n            </div>\n        </div>\n\n        <div class="color-picker-gradient-wrap">\n            <div class="color-picker-sl-field">\n                <canvas class="color-picker-sl-gradient"></canvas>\n                <canvas class="color-picker-sl-back hide"></canvas>\n                <div class="color-field-handle sl-handle"><div class="dot"></div></div>\n            </div>\n\n            <div class="color-picker-slider">\n                <canvas class="color-picker-gradient hue-gradient"></canvas>\n                <div class="color-picker-handle hue-handle" data-part="hue"><div class="dot"></div></div>\n            </div>\n        </div>\n    </div>\n\n    <div class="color-picker-buttons">\n        <button class="cancel-color-btn cancel-btn mrvl-btn" data-auto="color-picker-cancel-btn">{{colorpicker-dialog-cancel-button}}</button>\n        <button class="save-color-btn confirm-btn mrvl-btn done-btn" data-auto="color-picker-confirm-btn">{{colorpicker-dialog-confirm-button}}</button>\n    </div>\n\n    <div class="color-picker-close-x hide"></div>\n\n    <div class="color-picker-carrot"></div>\n</div>\n'},function(e,t,n){var i=n(507);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(34)(!1)).push([e.i,".mrvl-overlay-shell.color-picker-shell{-webkit-transform:none;transform:none;width:249px;height:190px;padding:8px 0 20px;background-color:transparent;z-index:100000;border-radius:4px;background-color:#fff;box-shadow:0 2px 5px 0 rgba(0,0,0,.2);border:1px solid #dce0e3}.mrvl-overlay-shell.color-picker-shell .color-picker-carrot{width:0;height:0;border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff;position:absolute;left:24px;top:-7px;z-index:25}.mrvl-overlay-shell.color-picker-shell.pop-top .color-picker-carrot{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:auto;left:24px;bottom:-7px}.mrvl-overlay-shell.color-picker-shell.pop-left .color-picker-carrot{-webkit-transform:rotate(90deg);transform:rotate(90deg);top:50%;left:auto;right:-3px}.mrvl-overlay-shell.color-picker-shell.pop-right .color-picker-carrot{-webkit-transform:rotate(270deg);transform:rotate(270deg);top:50%;left:-10px}.mrvl-overlay-shell.color-picker-shell.pop-right .color-picker-buttons{left:11px;right:27px}.mrvl-overlay-shell.color-picker-shell .color-picker-close-x{position:absolute;right:14px;top:2px;width:12px;height:12px;background-image:url(/marvel-core/images/pickers/close.svg);background-position:50% 50%;background-size:contain;background-repeat:no-repeat;cursor:pointer;opacity:.5}.mrvl-overlay-shell.color-picker-shell .color-picker-close-x:hover{opacity:1}.mrvl-overlay-shell.color-picker-shell .color-picker-tabs{display:none;text-align:center;border-bottom:1px solid #dce0e3}.mrvl-overlay-shell.color-picker-shell .color-picker-tabs .color-picker-tab{display:inline-block;text-transform:uppercase;font-size:12px;font-weight:700;color:#9aa6af;height:25px;margin:0 10px;padding:1px 0 14px;cursor:pointer}.mrvl-overlay-shell.color-picker-shell .color-picker-tabs .color-picker-tab.selected{color:#35414c;border-bottom:2px solid #35414c}.mrvl-overlay-shell.color-picker-shell .color-picker-upgrade{display:none;text-align:center}.mrvl-overlay-shell.color-picker-shell .color-picker-upgrade h2{font-size:1.4em;font-weight:500;padding:40px 20px 20px}.mrvl-overlay-shell.color-picker-shell .color-picker-upgrade button.mrvl-btn{display:inline-block;height:40px;border-radius:20px;border:1px solid #0e78e3;background-color:#0e78e3;font-weight:500;font-size:1.1em;color:#fff}.mrvl-overlay-shell.color-picker-shell .color-picker-brand-onboard{text-align:center}.mrvl-overlay-shell.color-picker-shell .color-picker-brand-onboard p{color:#35414c;font-size:1.2em;font-weight:500;padding:87px 20px 10px}.mrvl-overlay-shell.color-picker-shell .color-picker-brand-onboard button.mrvl-btn{display:inline-block;border:1px solid #0e78e3;background-color:#0e78e3;height:40px;border-radius:20px;font-weight:500;font-size:1.3em;color:#fff}.mrvl-overlay-shell.color-picker-shell .color-picker-secondary-colors{display:inline-block;max-width:calc(100% - 39px);padding-right:18px;max-height:78px;overflow-x:hidden;overflow-y:auto}.mrvl-overlay-shell.color-picker-shell .color-picker-secondary-colors::-webkit-scrollbar{background:transparent;width:11px}.mrvl-overlay-shell.color-picker-shell .color-picker-secondary-colors::-webkit-scrollbar-thumb{background:#82919b;-webkit-border-radius:8px;border:2px solid #f2f4f5}.mrvl-overlay-shell.color-picker-shell .save-color-btn.confirm-btn.invalid{color:#82919b}.mrvl-overlay-shell.color-picker-shell .cancel-color-btn.cancel-btn{color:#000}.mrvl-overlay-shell.color-picker-shell .brand-color-wrap{display:inline-block;margin:0 3px 6px}.mrvl-overlay-shell.color-picker-shell .brand-color-wrap.first-in-row{margin-left:0}.mrvl-overlay-shell.color-picker-shell .color-picker-swatch{cursor:pointer;width:25px;height:25px;border-radius:5px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.mrvl-overlay-shell.color-picker-shell .color-picker-add-color{display:none;cursor:pointer;text-align:center;font-size:18px;line-height:16px;color:#dce0e3;font-weight:800;border:1px solid #dce0e3;border-radius:5px;width:20px;height:20px;margin:0 3px 6px}.mrvl-overlay-shell.color-picker-shell .color-picker-add-color.disabled{opacity:.9;cursor:default}.mrvl-overlay-shell.color-picker-shell .vert-rule{width:1px;height:36px;display:inline-block;margin:0 6px;background-color:#dce0e3}.mrvl-overlay-shell.color-picker-shell .color-picker-brand-onboard{display:none}.mrvl-overlay-shell.color-picker-shell .color-picker-other-colors-section{display:none;padding:0 20px}.mrvl-overlay-shell.color-picker-shell .color-picker-basic-colors-section,.mrvl-overlay-shell.color-picker-shell .color-picker-logo-colors-section,.mrvl-overlay-shell.color-picker-shell .color-picker-more-toggle,.mrvl-overlay-shell.color-picker-shell .color-picker-suggested-colors-section{display:none}.mrvl-overlay-shell.color-picker-shell .color-picker-brand-colors-section{display:none;padding:7px 0 5px 20px}.mrvl-overlay-shell.color-picker-shell .color-picker-brand-colors-section .color-picker-brand-colors-list .color-picker-swatch{width:34px;height:34px}.mrvl-overlay-shell.color-picker-shell .color-picker-scrollable-section{overflow-y:auto;overflow-x:hidden;width:100%;padding-bottom:10px;max-height:100%}.mrvl-overlay-shell.color-picker-shell .color-picker-scrollable-section::-webkit-scrollbar{background:transparent;width:11px}.mrvl-overlay-shell.color-picker-shell .color-picker-scrollable-section::-webkit-scrollbar-thumb{background:#82919b;-webkit-border-radius:8px;border:2px solid #f2f4f5}.mrvl-overlay-shell.color-picker-shell.brand-tab .color-picker-preview-control,.mrvl-overlay-shell.color-picker-shell.brand-tab .color-picker-sl-field,.mrvl-overlay-shell.color-picker-shell.brand-tab .color-picker-slider{display:none}.mrvl-overlay-shell.color-picker-shell.brand-tab h4.color-picker-section{font-size:14px;color:#35414c;font-weight:400;padding:20px 0 10px 4px}.mrvl-overlay-shell.color-picker-shell.brand-tab .color-picker-brand-colors-section{border-bottom:none}.mrvl-overlay-shell.color-picker-shell.brand-tab .color-picker-other-colors-section{display:block}.mrvl-overlay-shell.color-picker-shell.brand-tab .color-picker-secondary-colors{display:inline-block;max-width:calc(100% - 53px);padding-right:0;max-height:158px}.mrvl-overlay-shell.color-picker-shell.brand-tab.no-brand-colors .color-picker-brand-onboard{display:block}.mrvl-overlay-shell.color-picker-shell.brand-tab.no-brand-colors .color-picker-brand-colors-section,.mrvl-overlay-shell.color-picker-shell.brand-tab.no-brand-colors .color-picker-other-colors-section{display:none}.mrvl-overlay-shell.color-picker-shell.brand-tab.upgrade .color-picker-upgrade{display:block}.mrvl-overlay-shell.color-picker-shell.brand-tab.no-secondary-colors .vert-rule{visibility:hidden}.mrvl-overlay-shell.color-picker-shell.more-tab .color-section-less{height:62px;padding-right:4px;max-height:62px;overflow:hidden}.mrvl-overlay-shell.color-picker-shell.more-tab h4.color-picker-section{font-size:14px;color:#35414c;font-weight:400;padding:0 0 14px;width:calc(100% - 40px)}.mrvl-overlay-shell.color-picker-shell.more-tab h4.color-picker-section.basic-colors-label{padding-left:0}.mrvl-overlay-shell.color-picker-shell.more-tab h4.color-picker-section.brand-colors-label{font-size:8px;text-transform:uppercase;font-weight:700;color:#82919b;padding:7px 0 4px 4px}.mrvl-overlay-shell.color-picker-shell.more-tab .color-picker-more-toggle{cursor:pointer;padding:0 12px 15px 20px;color:#9aa6af;font-size:11px;font-weight:500;text-transform:uppercase;background-image:url(/marvel-core/images/common/icon-arrow-down-gray.svg);background-size:9px auto;background-position:100% 3px;background-repeat:no-repeat}.mrvl-overlay-shell.color-picker-shell.more-tab .color-picker-more-toggle.show-more{background-image:url(/marvel-core/images/common/icon-arrow-up-gray.svg)}.mrvl-overlay-shell.color-picker-shell.more-tab .color-picker-more-toggle.active,.mrvl-overlay-shell.color-picker-shell.more-tab.tall-format .color-picker-add-color{display:inline-block}.mrvl-overlay-shell.color-picker-shell.more-tab.basic-colors .color-picker-basic-colors-section{padding:20px 0 5px 20px;display:block}.mrvl-overlay-shell.color-picker-shell.more-tab.basic-colors .basic-colors-label{display:none}.mrvl-overlay-shell.color-picker-shell.more-tab.basic-colors .color-picker-alt-colors-list.color-section-less,.mrvl-overlay-shell.color-picker-shell.more-tab.basic-colors .color-picker-logo-colors-list.color-section-less,.mrvl-overlay-shell.color-picker-shell.more-tab.basic-colors .color-picker-suggested-colors-list.color-section-less{height:40px;max-height:40px}.mrvl-overlay-shell.color-picker-shell.more-tab .color-picker-brand-colors-section{padding:0 0 0 20px;box-shadow:0 1px 2px 2px rgba(0,0,0,.06)}.mrvl-overlay-shell.color-picker-shell.more-tab .color-picker-brand-colors-section .color-picker-swatch{width:20px;height:20px}.mrvl-overlay-shell.color-picker-shell.more-tab .color-picker-preview-control{padding:0 0 6px 20px;text-align:left}.mrvl-overlay-shell.color-picker-shell.more-tab.suggested-colors .color-picker-suggested-colors-section{display:block;padding:0 0 0 20px}.mrvl-overlay-shell.color-picker-shell.more-tab.suggested-colors .color-picker-suggested-colors-section .color-picker-suggested-colors-list .color-picker-swatch{width:25px;height:25px}.mrvl-overlay-shell.color-picker-shell.more-tab.logo-colors .color-picker-logo-colors-section{display:block;padding:0 0 0 20px;border-bottom:1px solid #dce0e3;margin-bottom:20px}.mrvl-overlay-shell.color-picker-shell.more-tab.logo-colors .color-picker-logo-colors-section .color-picker-logo-colors-list{height:42px}.mrvl-overlay-shell.color-picker-shell.more-tab.logo-colors .color-picker-logo-colors-section .color-picker-logo-colors-list .color-picker-swatch{width:25px;height:25px}.mrvl-overlay-shell.color-picker-shell.more-tab.logo-colors .color-picker-logo-colors-section .color-picker-logo-colors-list.loading{line-height:32px;color:#9aa6af;font-size:12px;font-weight:500}.mrvl-overlay-shell.color-picker-shell.more-tab .color-picker-swatch{width:25px;height:25px}.mrvl-overlay-shell.color-picker-shell.more-tab .vert-rule{height:20px}.mrvl-overlay-shell.color-picker-shell.more-tab.no-brand-colors .primary-brand-color,.mrvl-overlay-shell.color-picker-shell.more-tab.no-brand-colors .vert-rule{display:none}.mrvl-overlay-shell.color-picker-shell.tall-format{height:357px}.mrvl-overlay-shell.color-picker-shell.tall-format .color-picker-brand-colors-section,.mrvl-overlay-shell.color-picker-shell.tall-format .color-picker-tabs{display:block}.mrvl-overlay-shell.color-picker-shell.tall-format .color-picker-scrollable-section{max-height:calc(100% - 50px)}.mrvl-overlay-shell.color-picker-shell.tall-format .color-picker-scrollable-section.two-rows{max-height:calc(100% - 76px)}.mrvl-overlay-shell.color-picker-shell.tall-format .color-picker-scrollable-section.three-rows{max-height:calc(100% - 102px)}.mrvl-overlay-shell.color-picker-shell.tall-format:not(.basic-colors) .color-picker-scrollable-section{padding-top:30px}.mrvl-overlay-shell.color-picker-shell.tall-format.upgrade .color-picker-brand-colors-section,.mrvl-overlay-shell.color-picker-shell.tall-format.upgrade .color-picker-gradient-wrap,.mrvl-overlay-shell.color-picker-shell.tall-format.upgrade .color-picker-other-colors-section,.mrvl-overlay-shell.color-picker-shell.tall-format.upgrade .color-picker-preview-control{display:none}.mrvl-overlay-shell.color-picker-shell.tall-format.hide-brandkit:before{z-index:-1}.mrvl-overlay-shell.color-picker-shell.tall-format.hide-brandkit .basic-colors-label{padding-top:24px}.mrvl-overlay-shell.color-picker-shell.tall-format.hide-brandkit .color-picker-scrollable-section{max-height:346px;margin-top:-16px}.mrvl-overlay-shell.color-picker-shell .color-picker-buttons,.mrvl-overlay-shell.color-picker-shell.tall-format.hide-brandkit .color-picker-brand-colors-section,.mrvl-overlay-shell.color-picker-shell.tall-format.hide-brandkit .color-picker-tabs{display:none}.mrvl-overlay-shell.color-picker-shell.show-buttons{height:220px}.mrvl-overlay-shell.color-picker-shell.show-buttons.medium-format{height:300px}.mrvl-overlay-shell.color-picker-shell.show-buttons .color-picker-buttons{display:block;left:0;right:0;bottom:0;z-index:1}.mrvl-overlay-shell.color-picker-shell.show-buttons.tall-format{height:394px}.mrvl-overlay-shell.color-picker-shell.show-buttons.tall-format .color-picker-scrollable-section{max-height:calc(100% - 91px)}.mrvl-overlay-shell.color-picker-shell.show-buttons.tall-format .color-picker-scrollable-section.two-rows{max-height:calc(100% - 117px)}.mrvl-overlay-shell.color-picker-shell.show-buttons.tall-format .color-picker-scrollable-section.three-rows{max-height:calc(100% - 143px)}.mrvl-overlay-shell.color-picker-shell.show-buttons.tall-format.hide-brandkit{height:330px}.mrvl-overlay-shell.color-picker-shell.show-buttons.tall-format.hide-brandkit .color-picker-scrollable-section{margin-top:5px;max-height:calc(100% - 21px)}.mrvl-overlay-shell.color-picker-shell.show-buttons.tall-format.hide-brandkit .color-picker-scrollable-section.three-rows,.mrvl-overlay-shell.color-picker-shell.show-buttons.tall-format.hide-brandkit .color-picker-scrollable-section.two-rows{max-height:calc(100% - 21px)}.color-picker-bg{opacity:.0001;z-index:100000}.color-picker-color-preview{width:32px;height:32px;display:inline-block;border-radius:5px;margin:5px 0;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}div.color-picker-preview-control .color-picker-hex-wrap{display:inline-block;width:72px;margin:3px 0 0 5px}div.color-picker-preview-control .color-picker-hex-wrap label{font-size:8px;font-weight:700;text-transform:uppercase;color:#82919b;width:72px;display:block;padding-bottom:2px}div.color-picker-preview-control .color-picker-hex-wrap input.color-picker-color-hex{display:block;width:72px;height:25px;background-color:#fff;border:1px solid #dce0e3;border-radius:3px;font-size:12px;color:#35414c;padding:2px 0 2px 8px;text-transform:uppercase;font-weight:800}div.color-picker-preview-control .color-picker-hex-wrap input.color-picker-color-hex:focus{outline:none;color:#35414c}div.color-picker-preview-control .color-picker-hex-wrap input.color-picker-color-hex.invalid{background-color:red;color:#fff}.eye-dropper{display:inline-block;margin:4px 0 0 8px;cursor:pointer}.eye-dropper.hide{display:none}.eye-dropper .eye-dropper-button{display:inline-block;width:25px;height:30px;background-image:url(/marvel-core/images/eyedropper.svg);background-repeat:no-repeat;background-size:100% auto;background-position:50% 100%;margin-top:4px}.eye-dropper p{display:inline-block;margin:12px 0 0 3px;font-size:12px;font-weight:400;color:#35414c}.color-field-handle,.color-picker-handle{height:16px;width:16px;border-radius:8px;background-color:#fff;position:absolute;left:0;top:2px;z-index:2;cursor:pointer}.color-field-handle .dot,.color-picker-handle .dot{background-color:#333;width:12px;height:12px;border-radius:6px;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.color-picker-sl-field{position:relative;margin-left:20px}.color-picker-gradient-wrap{position:relative;padding-top:4px;text-align:left;width:100%}.color-picker-sl-gradient{border-radius:5px}.color-picker-slider{position:absolute;left:216px;top:4px;width:29px;height:98px}.color-picker-slider .color-picker-gradient{position:absolute;top:0;left:3px;bottom:0;border-radius:3px}.color-picker-buttons{position:absolute;height:40px;left:23px;right:15px;bottom:13px;text-align:center;border-top:1px solid #dce0e3}.color-picker-buttons button.mrvl-btn{display:inline-block;width:calc(50% - 2px);height:40px;border:none;border-radius:0;margin:0;font-weight:700;font-size:15px}.color-picker-buttons button.mrvl-btn.confirm-btn{color:#35414c;border-left:1px solid #dce0e3}.color-picker-buttons .cancel-btn{color:#82919b!important}",""])},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(92),n(409),n(36)],void 0===(r=function(e,t,n,i,r,o){"use strict";var a;return{fontFromLogo:function(t){return(o=t,s=n.defer(),l=new Image,l.onload=function(){var t,n=document.createElement("canvas"),r=n.getContext("2d");n.width=l.width,n.height=l.height,r.drawImage(l,0,0),a=r,t=i(n.toDataURL("image/png")),s.resolve({blob:t,width:l.width,height:l.height}),e(n).css({position:"absolute","z-index":"10000",left:"100px",top:"100px"})},o.then((function(e){l.src=e})).done(),s.promise).then((function(e){return e.blob?r.findVisualSearchRegion(e.blob).then((function(t){if(!t){t={x_min:Math.floor(.15*e.width),x_max:Math.floor(e.width-.15*e.width),y_min:Math.floor(.25*e.height),y_max:Math.floor(e.height-.25*e.height)}}return a.strokeRect(t.x_min,t.y_min,t.x_max-t.x_min,t.y_max-t.y_min),r.visualSearch(e.blob,t).then(function(e){return e.variations&&e.variations.length?{text:e.text,font:e.variations[0]}:null}.bind(this))})):null}));var o,s,l}}}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(98),n(212),n(6),n(3)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s="https://"+window.location.host,l=s+"/lr_files";function c(e){this.items=[],this.received=0,this.filter="all"}function d(e){var t,n=e.replace(/^while \(1\) \{\}/,"");try{t=JSON.parse(n)}catch(e){console.warn("LR json data parse failed")}return t}function u(e){i.prototype._init.call(this,e)}return t.extend(c.prototype,r.prototype,{getMetaData:function(e,n){var i=[],r=e.path,a=e.success,c=e.error;if(this.nextHref=n?this.nextHref:null,n&&!this.nextHref&&g)g("no more assets");else{var h=function(e){e.assets&&e.assets.length&&(i=t.map(e.assets,(function(e){return new u(e)})),this.received+=i.length)}.bind(this),p=function(){var e,t={all:"pick%3Bunflagged%3Breject",picked:"pick","picked-unflagged":"pick%3Bunflagged"},i=this.options.sort?{"capture-descending":"captured_before=9999-01-01T00:00:00","capture-ascending":"captured_after=-0001-12-31T23:59:59",custom:"order_after=-"}[this.options.sort]:"capture-ascending",a=this.options.filter?t[this.options.filter]:t.all,c="?limit="+(this.options.limit||"20");marvel.features.hasFeature("lightroom-picker-filters")&&(c=c+"&flag="+a+"&"+i),e=n?s+"/lr_files"+this.nextHref:l+r+"/assets"+c,o.ajax(e,{dataType:"text"}).done(f.bind(this)).fail(g.bind(this))}.bind(this);r&&"/"!==r||n?(this.options=e,p()):this._getAlbumsUrl().then(function(t){this.options=e,this.received=n?this.received:0;var i=this.options.limit?"?limit="+this.options.limit:"",r=s+"/lr_files"+(n?this.nextHref:t+i);o.getAccessToken().then(function(e){o.ajax(r,{dataType:"text"}).done(m.bind(this)).fail(g.bind(this))}.bind(this))}.bind(this),(function(){c("fail")}))}function f(e,t,n){var r=d(e);r?(h(r),this.options.sort&&"capture-descending"===this.options.sort?(this.nextHref=r.links&&r.links.prev?r.links.prev.href:null,i.reverse()):this.nextHref=r.links&&r.links.next?r.links.next.href:null,i.data={page:1,pages:1},a&&a(i,"success",n)):c&&c("JSON parse failed")}function g(e,t,n){console.warn("Lightroom fail ",t,e,n),i.data={page:1,pages:1},c&&c("failure")}function m(e,n,r){var o=d(e);o?(o.albums&&o.albums.length&&(i=t.map(o.albums,function(e){return new u(e)}.bind(this)),this.received+=i.length,i.data={page:1,pages:1}),a&&a(i,"success",r)):c&&c("JSON parse failed")}},getNextMetaData:function(){return this.getMetaData(this.options,!0)},haveMoreMetaData:function(){return!!this.nextHref},_getAlbumsUrl:function(){var e=a.defer(),t=this;if(this.albumsHref)e.resolve(this.albumsHref);else{var n=s+"/lr_files/v1.0/catalogs?subtype=lightroom%3BX-lightroom";o.ajax(n,{beforeSend:function(e){return e.setRequestHeader("X-api-key",o.apiKey),!0},dataType:"text"}).done((function(n,i,r){var o;n=n.replace(/^while \(1\) \{\}/,"");try{var a=JSON.parse(n);a&&a.catalogs&&a.catalogs.length?(o=t.albumsHref=a.catalogs[0].links["/rels/albums"].href||a.catalogs[0].links.self.href+"/albums",e.resolve(o)):e.reject("no catalog found")}catch(t){e.reject(t)}})).fail((function(e,t,n){console.warn("Failed to get catalog",t)}))}return e.promise},getAlbumCount:function(e){var t=a.defer(),n=l+e+"/assets/count";return o.ajax(n,{beforeSend:function(e){return e.setRequestHeader("X-api-key",o.apiKey),!0},dataType:"text"}).done((function(e,n,i){var r;e=e.replace(/^while \(1\) \{\}/,"");try{var o=JSON.parse(e);o&&o.total_count?(r=o.total_count,t.resolve({albumCount:r})):t.reject("no album count")}catch(e){t.reject(e)}})).fail((function(e,n,i){console.warn("Failed to get album count",n),t.reject(i)})),t.promise}}),t.extend(u.prototype,i.prototype,{_parseData:function(){var e,t,n=this.data;this.links.preview.href="",this.isDir=/\:album\:[^\:]+$/.test(n.id),this.isDir?(this.links.folder={},this.links.folder.path=n.links.self.href,this.links.folder.filename=n.name,this.cover=n.cover,this.has_cover=!0):(e=n.links,t=t||(e["/rels/rendition_type/2048"]?e["/rels/rendition_type/2048"].href:void 0),this.links.thumb.href=e["/rels/rendition_type/thumbnail2x"]?e["/rels/rendition_type/thumbnail2x"].href:t,this.links.thumb.href=l+this.links.thumb.href,this.links.thumb.filename=n.name,this.links.preview.href=t,this.links.preview.href=l+t,this.links.preview.filename=n.name,this.links.original.href=l+t,this.links.original.filename=n.name,this.links.original.width=n.payload.width,this.links.original.height=n.payload.height,this.aspect={width:n.payload.width,height:n.payload.height},this.caption=n.payload.caption)},getMimeType:function(){return"image/"+this.data.subtype},hasCover:function(){return this.has_cover},getCover:function(){var e,t=a.defer(),n=s+"/lr_files",i=this.data;return this.hasCover()?this.cover&&this.cover.links&&this.cover.links["/rels/rendition_type/thumbnail2x"]?t.resolve(n+this.cover.links["/rels/rendition_type/thumbnail2x"].href):(e=n+i.links["/rels/album_assets"].href+"?limit=1&subtype=jpeg;png",o.ajax(e,{dataType:"text"}).done((function(i,r,o){var a,s=d(i);s&&s.assets&&s.assets.length?(a=s.assets[0],e=n+a.links["/rels/rendition_type/thumbnail2x"].href,t.resolve(e)):t.reject("no assets")})).fail((function(){t.reject("not available")}))):t.reject("no cover available"),t.promise},canSetFilter:function(){return!0}}),c}.apply(t,i))||(e.exports=r)},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var i=n(344);function r(t,n,o){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?e.exports=r=function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o}:e.exports=r=Reflect.construct,r.apply(null,arguments)}e.exports=r},function(e,t,n){var i;i=function(e){"use strict";var t,n=(t=document.createElement("canvas").getContext("2d"),(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),i=function(e,t,i){i||(i=n);var r=document.createElement("canvas");return r.width=e*i,r.height=t*i,r.style.width=e+"px",r.style.height=t+"px",r.getContext("2d").setTransform(i,0,0,i,0,0),r},r=function(t,n){var i=e("<span>"+t.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span>").css({font:n,float:"left","white-space":"nowrap"}).css({visibility:"hidden"}).appendTo(e("body")),r=i.width();return i.remove(),r},o=function(e,t,n){var o=n.size||24,a=n.weight||"400",s=n.style||"normal",l=n.lineHeight||1.5,c=n.padding||0,d=n.color||"#35414C",u=s+" "+a+" "+o+"px "+e,h=s+" "+a+" 8px "+e,p=8*l,f=r(t,h),g=i(f,p,0),m=g.getContext("2d");g.height=p,g.width=f,m.font=h,m.fillStyle=d,m.textBaseline="middle",m.fillText(t,0,p/2),m.fillRect(0,0,10,10);for(var v=m.getImageData(0,0,f,p).data,b=0,y=0,w=v.length/2,k=!1,x=0,_=v.length;x<_;)v[x],v[x+1],v[x+2],0!=v[x+3]&&b++,(x+=4)>=w&&!k&&(k=!0,y=b,b=0);var S=y/b,C=o*l+2*c,T=r(t,u)+2*c,M=C/2;return S>1.8&&S<2?M+=.1*o:S>=2&&(M+=.18*o),m=(g=i(T,C)).getContext("2d"),g.height=C,g.width=T,m.font=u,m.fillStyle=d,m.textBaseline="middle",m.fillText(t,c,M),g.whiteSpaceRatio=S,g};return{generateCanvas:o,generateDataURL:function(){var e=o.apply(this,arguments);return e.toDataURL()}}},e.exports=i(n(1))},function(e,t,n){var i,r;i=[n(1),n(0),n(407),n(2),n(3),n(20),n(15),n(6),n(25),n(36),n(295),n(410),n(398),n(404),n(408),n(559),n(411),n(560),n(12),n(405),n(8)],void 0===(r=function(e,t,i,r,o,a,s,l,c,d,u,h,p,f,g,m,v,b,y,w,k){"use strict";var x,_,S={"is-body-font":k.getString("custom-font-manager-edit-body-font-regular"),"is-body-font-italic":k.getString("custom-font-manager-edit-body-font-italic"),"is-body-font-bold":k.getString("custom-font-manager-edit-body-font-bold"),"is-body-font-bold-italic":k.getString("custom-font-manager-edit-body-font-bold-italic")};return _=i.extend({init:function(e,t){t=t||{},this._fn=e,this._id=t.id||s.v4()},id:function(){return this._id},execute:function(){if(this._fn&&"function"==typeof this._fn)return this._fn.apply(this,arguments)}}),x=i.extend({init:function(){this._queue=[]},length:function(){return this._queue.length},add:function(e,t){var n;return n=e instanceof _?e.id():(e=new _(e,t)).id(),this._queue.push(e),n},addUniqueActionForItemView:function(e,t){var n=e.cid;return this.remove(n),this.add(t,{id:n})},remove:function(e){var n=t.findIndex(this._queue,(function(t){return t.id()==e}));-1!=n&&this._queue.splice(n,1)},each:function(e){return t.each(this._queue,e)},map:function(e){return t.map(this._queue,e)}}),c.extend({modeStrings:{addFonts:{title:k.formatMessage("font-picker-add-your-fonts-title"),description:k.formatMessage("custom-font-manager-description-text"),info:k.formatMessage("custom-font-manager-info-tip"),okBtn:k.formatMessage("custom-font-manager-continue-button")},manageFonts:{title:k.formatMessage("custom-font-manager-manage-font"),description:k.formatMessage("custom-font-manager-description-text-manage"),info:k.formatMessage("custom-font-manager-info-tip"),okBtn:k.formatMessage("custom-font-manager-save-button")},createBodyFontSet:{title:k.formatMessage("custom-font-manager-create-set-title"),description:k.formatMessage("custom-font-manager-create-set-message"),info:k.formatMessage("custom-font-manager-info-tip"),okBtn:k.formatMessage("custom-font-manager-continue-button")},completeBodyFontSet:{title:k.formatMessage("custom-font-manager-complete-set-title"),description:k.formatMessage("custom-font-manager-create-set-message"),info:k.formatMessage("custom-font-manager-info-tip"),okBtn:k.formatMessage("custom-font-manager-continue-button")},editBodyFontSet:{title:k.formatMessage("custom-font-manager-edit-set-title"),description:k.formatMessage("custom-font-manager-create-set-message"),info:k.formatMessage("custom-font-manager-info-tip"),okBtn:k.formatMessage("custom-font-manager-continue-button")},completeBodyFontSetMissingNormal:{title:k.formatMessage("custom-font-manager-complete-set-title"),description:k.formatMessage("custom-font-manager-provide-source-message"),info:k.formatMessage("custom-font-manager-info-tip"),okBtn:k.formatMessage("custom-font-manager-continue-button")}},initialize:function(e){c.prototype.initialize.call(this),this._ac=e,this._itemViews=[],this._updateUploadProgress=this._updateUploadProgress.bind(this)},onEscapePressed:function(){this._handleCancelClick(),c.prototype.onEscapePressed.call(this)},setLaunchContext:function(e){this._launchContext=e},setRegistry:function(e){this._registry=e},setFontsIn:function(e){this._fontsIn=e},setFontSubgroup:function(e){this._fontSubgroup=e},setMode:function(e){this._mode=e},render:function(){this.actionQueue=new x,void 0===this._pendingUploadsCount&&(this._pendingUploadsCount=0);var n=this._mode;if(!this.$el.hasClass("cfm-shell")){var i=e(".cfm-shell");i.length||(i=e('<div class="cfm-shell hide"></div>'),e(document.body).append(i)),this.$el=i}this.$el.html(k.mustacheRender(m)),this.$el.find(".cfm-body-font-subgroup-error-tip .text").html(k.formatMessage("custom-font-manager-body-font-subgroup-error-tip",{familyName:""})),this.$el.find(".cfm-face-exists-error-tip .text").html(k.formatMessage("custom-font-manager-face-exists-error-tip",{familyName:""})),this.$el.find(".cfm-body-font-exists-error-tip .text").html(k.formatMessage("custom-font-manager-body-font-exists-error-tip",{familyName:""}));var r=this.modeStrings[n||"addFonts"];if(this.$el.find(".cfm-title").text(r.title),this.$el.find(".cfm-description-text").text(r.description),this.$el.find(".cfm-info-tip").text(r.info),this.continueBtn$=this.$el.find(".cfm-continue"),this.continueBtn$.text(r.okBtn),this.fontList$=this.$el.find(".cfm-font-list"),this.fontListScrollView$=this.$el.find(".cfm-font-list-wrapper"),this.fontAddBtn$=this.$el.find(".cfm-add-font"),"completeBodyFontSetMissingNormal"==n&&(n=this._mode="completeBodyFontSet"),"editBodyFontSet"==n&&(n=this._mode="completeBodyFontSet"),"createBodyFontSet"==n)this.$el.find(".js-font-name-label").text("Style"),this._createBodyFontSet=!0,t.each(S,function(e,n){var i,r=-1!=n.search(/bold/i)?700:400,o=-1!=n.search(/italic/i)?"italic":"normal";i=this.createBodyItemView({role:n,fontName:e}),this.actionQueue.addUniqueActionForItemView(i,function(){var i,a;if(t.each(this._itemViews,function(e){var n=e.options.fontInfo;e.options.fontInfoPromise;if(n)return a=t.trim(n.preferredFamilyName||n.familyName),i=this._getCSSFamilyName(a),!1}.bind(this)),i&&a)return this._ac.addFauxFont(a,e,i,r,o,n)}.bind(this)),this._itemViews.push(i)}.bind(this));else if("completeBodyFontSet"==n){this.$el.find(".js-font-name-label").text("Style"),this.$el.find(".cfm-add-font").remove();var o=this._ac.getCustomFontSubgroup(this._fontSubgroup),a=this._ac.getCustomBodyFontSet(this._fontSubgroup),s=o.at(0);t.each(S,function(e,t){var n,i=a.getFontWithRole(t),r=-1!=t.search(/bold/i)?700:400,l=-1!=t.search(/italic/i)?"italic":"normal";i||o.each(function(e){if(e.fontWeight()==r&&e.fontStyle()==l)return i=e,!1}.bind(this)),i?(n=i.isFauxFont()?this.createBodyItemView({role:t,fontName:e}):this.createBodyItemView({role:t,fontName:e,acFontFace:i}),this.actionQueue.addUniqueActionForItemView(n,(function(){return i.setUniqueBodyFontRole(t),i}))):(n=this.createBodyItemView({role:t,fontName:e}),this.actionQueue.addUniqueActionForItemView(n,function(){return this._ac.addFauxFont(this._fontSubgroup,e,s.cssName(),r,l,t)}.bind(this))),this._itemViews.push(n)}.bind(this))}else"manageFonts"==n&&(this._fontsIn&&(this.fontList$.find(".cfm-font").remove(),t.each(this._fontsIn,function(e){var t=this.createItemView({acFontFace:e});this._itemViews.push(t)}.bind(this)),t.sortBy(this._itemViews,(function(e){return e.getFontName()})),t.each(this._itemViews,function(e){this.fontList$.append(e.$el)}.bind(this))),this.fontAddBtn$.text(k.formatMessage("custom-font-manager-add-more-fonts",{fontGroup:this._fontSubgroup})));this.cancelBtn$=this.$el.find(".cfm-cancel"),this.cancelBtn$.on("click",this._handleCancelClick.bind(this)),this.continueBtn$.on("click",this._handleContinueClick.bind(this)),this.continueBtn$.on("mouseover",this._handleContinueMouseover.bind(this)),this.continueBtn$.on("mouseout",this._handleContinueMouseout.bind(this)),this.filesTip$=this.$el.find(".cfm-add-font-tip"),this.bodyTip$=this.$el.find(".cfm-body-font-tip"),this.tosTip$=this.$el.find(".cfm-tos-tip"),this.replaceTip$=this.$el.find(".cfm-face-replace-tip"),this.deleteTip$=this.$el.find(".cfm-face-delete-tip"),this.tosWrapper$=this.$el.find(".cfm-tos"),this.fontTOS$=this.$el.find(".cfm-tos-checkbox"),this.fontTOS$.on("click",this._handleTOSClick.bind(this)),this.fontTOSCopy$=this.$el.find(".cfm-tos-copy"),this.fontTOSCopy$.on("click",this._handleTOSClick.bind(this)),this.missingAddChooseTip$=this.$el.find(".cfm-font-missing-tip"),this.replaceAddChooseTip$=this.$el.find(".cfm-font-replace-tip"),this.outerShell$=this.$el.parent(),this.subgroupErrorTip$=this.$el.find(".cfm-body-font-subgroup-error-tip"),this.existsErrorTip$=this.$el.find(".cfm-body-font-exists-error-tip"),this.cssNamesBySubgroup=this.cssNamesBySubgroup||{};var l=this._ac.getFontSubgroups();t.each(l,function(e,t){var n=this.cssNamesBySubgroup[t];n||(n=e.getPropFromFirst("cssName"),this.cssNamesBySubgroup[t]=n)}.bind(this)),"createBodyFontSet"==this._mode||"completeBodyFontSet"==this._mode?this.fontAddBtn$.remove():(this.fontAddBtn$.on("click",this.handleUploadFileClicked.bind(this)),this._fileDropSetup||(this._fileDropSetup=!0,w({el:this.$el},function(e,t){e&&window.marvel.logger.warn("error while dropping font files - before font picker detected any errors",e),this.autoPickLocalFiles(t)}.bind(this)))),t.each(this._itemViews,function(e){e.deleted||this.fontList$.append(e.$el)}.bind(this)),this._changeTOSIfNecessary()},scrollFontListToBottom:function(){var e=this.fontListScrollView$[0];e.scrollTop=e.scrollHeight},shouldSubgroupMatch:function(e){if(this._fontSubgroup||(this._fontSubgroup=e),e!=this._fontSubgroup)return this._fontSubgroup},_hasFontInView:function(e,n){return!!t.find(this._itemViews,(function(t){var i=t.getFontFace();return(!i||!i.isFauxFont())&&(!t.deleted&&t!==n&&e===t.getFontName())}))},_wasFontDeleted:function(e){return!!t.find(this._itemViews,(function(t){return t.deleted&&e===t.getFontName()}))},isNewSubgroupName:function(e){var n=Object.keys(this._ac.getCustomFontSubgroups()),i=!0;return t.each(this._itemViews,(function(e){var r=e.getSubgroupName();if(r&&t.includes(n,r))return i=!1,!1})),i},_isCustomFont:function(e){return!!t.find(this._ac.getCustomFonts(!0),function(t){return t.friendlyName()===e}.bind(this))},_isSparkfont:function(e){var n;return this._registry&&(n=t.find(this._registry.facesByKey,(function(t){return t.subgroup.name+" "+t.face.name===e}))),!!n},showReplaceTip:function(e,t){var n={"add-replace":k.getString("custom-font-manager-replace-tip-add"),"body-replace":k.getString("custom-font-manager-replace-tip-body"),"manage-replace":k.getString("custom-font-manager-replace-tip-manage"),"manage-replace-body":k.getString("custom-font-manager-replace-tip-manage-body"),"manage-replace-headline":k.getString("custom-font-manager-replace-tip-manage-headline"),"manage-replace-not-used":k.getString("custom-font-manager-replace-tip-manage-not-used")};this.replaceTip$.find(".text").text(n[t]||k.getString("custom-font-manager-replace-tip-default")),this.replaceTip$.addClass("show").css("top",e.$el.position().top-35+"px")},hideReplaceTip:function(){this.replaceTip$.removeClass("show")},showDeleteTip:function(e,t){var n={"add-delete":k.getString("custom-font-manager-delete-tip-add"),"body-delete":k.getString("custom-font-manager-delete-tip-body"),"manage-delete":k.getString("custom-font-manager-delete-tip-manage"),"manage-delete-body":k.getString("custom-font-manager-delete-tip-manage-body"),"manage-delete-headline":k.getString("custom-font-manager-delete-tip-manage-headline"),"manage-delete-is-used":k.getString("custom-font-manager-delete-tip-manage-is-used")};this.deleteTip$.find(".text").text(n[t]||k.getString("custom-font-manager-delete-tip-default")),this.deleteTip$.addClass("show").css("top",e.$el.position().top-35+"px")},hideDeleteTip:function(){this.deleteTip$.removeClass("show")},showFontMissingTip:function(t){this.missingAddChooseTip$.addClass("show");var n=t.$el.position().top;this.missingAddChooseTip$.css("top",n-30+"px"),this.outerShell$.off("click"),this.outerShell$.on("click",function(t){e(t.target).closest(".cfm-font-replace-tip").length||this.hideFontMissingTip()}.bind(this)),this.missingAddChooseTip$.find(".cfm-font-upload").off("click"),this.missingAddChooseTip$.find(".cfm-font-upload").on("click",(function(e){e.preventDefault(),e.stopPropagation(),t.trigger("cfm-item-missing-upload")})),this.missingAddChooseTip$.find(".cfm-font-add").off("click"),this.missingAddChooseTip$.find(".cfm-font-add").on("click",(function(e){e.preventDefault(),e.stopPropagation(),t.trigger("cfm-item-missing-add")}))},hideFontMissingTip:function(){this.missingAddChooseTip$.removeClass("show"),this.outerShell$.off("click"),this.missingAddChooseTip$.find(".cfm-font-upload").off("click"),this.missingAddChooseTip$.find(".cfm-font-add").off("click")},showFontReplaceTip:function(t){this.replaceAddChooseTip$.addClass("show");var n=t.$el.position().top;this.replaceAddChooseTip$.css("top",n-30+"px"),this.outerShell$.off("click"),this.outerShell$.on("click",function(t){e(t.target).closest(".cfm-font-replace-tip").length||this.hideFontReplaceTip()}.bind(this)),this.replaceAddChooseTip$.find(".cfm-font-upload").off("click"),this.replaceAddChooseTip$.find(".cfm-font-upload").on("click",(function(e){e.preventDefault(),e.stopPropagation(),t.trigger("cfm-item-replace-upload")})),this.replaceAddChooseTip$.find(".cfm-font-add").off("click"),this.replaceAddChooseTip$.find(".cfm-font-add").on("click",(function(e){e.preventDefault(),e.stopPropagation(),t.trigger("cfm-item-replace-add")}))},hideFontReplaceTip:function(){this.replaceAddChooseTip$.removeClass("show"),this.replaceAddChooseTip$.find(".cfm-font-upload").off("click"),this.replaceAddChooseTip$.find(".cfm-font-add").off("click")},showChooseExisting:function(t,n,i){var r=this.$el.find(".cfm-body-font-choose-existing-view");r.empty(),this.outerShell$.off("click"),this.outerShell$.on("click",function(t){e(t.target).closest(".cfm-body-font-choose-existing-view").length||this.hideTooltips()}.bind(this));var o,a=t.acFontFace;n.each(function(n){if(!a||n.getId()!=a.getId()){var i=e('<div class="cfm-body-font-choose-existing-font">'+n.friendlyName()+"</div>");n.$css(i),i.on("click",function(e){e.preventDefault(),e.stopPropagation(),this.hideChooseExisting(),t.trigger("cfm-item-add-picked",n)}.bind(this)),r.append(i)}}.bind(this)),o=i.hasClass("cfm-font-replace-tip")?100:130;var s=parseInt(i.css("left"))+o,l=t.$el.position().top-30;r.css("top",l+"px"),r.css("left",s+"px"),r.addClass("show")},hideChooseExisting:function(){this.$el.find(".cfm-body-font-choose-existing-view").removeClass("show"),this.outerShell$.off("click")},showSubgroupError:function(e,t){var n=e.$el.position().top-34;this.subgroupErrorTip$.css("top",n+"px"),this.subgroupErrorTip$.find(".text").text(k.formatMessage("custom-font-manager-body-font-subgroup-error-tip",{familyName:t})),this.subgroupErrorTip$.addClass("show"),this.outerShell$.off("click"),this.outerShell$.one("click",function(){this.subgroupErrorTip$.removeClass("show")}.bind(this))},showExistsError:function(e,t,n){var i=this.$el.find(n);-1!=n.search("face-exists")?i.find(".text").text(k.formatMessage("custom-font-manager-face-exists-error-tip",{familyName:t})):-1!=n.search("body-font-exists")&&i.find(".text").text(k.formatMessage("custom-font-manager-body-font-exists-error-tip",{familyName:t})),i.addClass("show"),this.outerShell$.off("click"),this.outerShell$.one("click",function(){i.removeClass("show")}.bind(this)),this.fontList$.find(".cfm-font").length||this.fontList$.addClass("empty")},hideTooltips:function(){this.hideChooseExisting(),this.$el.find(".cfm-tool-tip-base").removeClass("show"),this.hideFontReplaceTip(),this.hideFontMissingTip()},_disarmAlert:function(e,t,n){return this._pendingUploadsCount--,y.showAlert(t,n,{className:"custom-font-manager-confirm"}),e.setFontFile(void 0),e.setFontInfoPromise(void 0),this.actionQueue.remove(e.cid),!1},_commonFileValidation:function(e,t){return t.info&&t.info.FILE_PARSE_ERROR?this._disarmAlert(e,k.getString("custom-font-manager-unrecognized-font-upload-parse-error-title"),k.getString("custom-font-manager-unrecognized-font-upload-parse-error-text")):t.info&&t.info.FILE_TOO_BIG?this._disarmAlert(e,k.getString("custom-font-manager-unrecognized-font-upload-file-size-error-title"),k.getString("custom-font-manager-unrecognized-font-upload-file-size-error-text")):!(this._pendingUploadsCount>20)||this._disarmAlert(e,k.getString("custom-font-manager-unrecognized-font-upload-max-error-title"),k.getString("custom-font-manager-unrecognized-font-upload-max-error-text"))},createItemView:function(t){var i,r=t.acFontFace,o=!1,a=!1,s=!1;r&&(t.fontName=r.friendlyName(),this.getUsageOfAssetsMessage&&"function"==typeof this.getUsageOfAssetsMessage&&(i=this.getUsageOfAssetsMessage(r)),o=!!i,r.hasRole("headline-font")&&(a=!0),(r.hasRole("body-font")||r.hasRole("body-font-bold")||r.hasRole("body-font-italic")||r.hasRole("body-font-bold-italic"))&&(s=!0),"manageFonts"==this._mode&&(t.disableReplace=!o,a&&(t.disableDelete=!0,t.disableReplace=!0),s&&(t.disableDelete=!0,t.disableReplace=!0))),this._mode,t.themeUpdateInterface=this.themeUpdateInterface,t.parentView=this;var l=new v(t);l.on("cfm-got-font-info",function(e){if(this._commonFileValidation(l,e)){if(this._hasFontInView(e.fullName,l))this._pendingUploadsCount--,l.setFontFile(void 0),l.setFontInfoPromise(void 0),this.actionQueue.remove(l.cid),l.$el.remove(),this.showExistsError(l,e.fullName,".cfm-face-exists-error-tip");else if(this._isCustomFont(e.fullName))this._wasFontDeleted(e.fullName)||(this._pendingUploadsCount--,l.setFontFile(void 0),l.setFontInfoPromise(void 0),this.actionQueue.remove(l.cid),l.$el.remove(),this.showExistsError(l,e.fullName,".cfm-face-exists-error-tip"));else if("manageFonts"==this._mode){var t=this.shouldSubgroupMatch(e.subgroupName);t&&(this._pendingUploadsCount--,l.setFontFile(void 0),l.setFontInfoPromise(void 0),this.actionQueue.remove(l.cid),l.$el.remove(),this.showSubgroupError(l,t))}}else l.$el.remove(),this.fontList$.find(".cfm-font").length||this.fontList$.addClass("empty");this._changeTOSIfNecessary()}.bind(this));var c=function(t,i,r){Promise.resolve().then(function(o){var a=n(403),s=this.$el.find(".replacement-font-picker");s.length||(s=e('<div class="replacement-font-picker"></div>'),this.$el.append(s)),this.replacementFontPicker=this.replacementFontPicker||new a,this.replacementFontPicker.configure({mode:"face",authoringContext:this._ac,$el:s,$anchor:t,brandFonts:!0,offsetX:0,offsetY:66,hideCarrot:!0,hideAddCustomFontsButton:!0,launchContext:"CustomFontManager",assignRoleAndSave:!0,getUsageOfAssetsMessage:function(){return i},onFinish:r,onCancel:function(){}.bind(this)}),this.replacementFontPicker.showOverlay()}.bind(this).bind(null,n)).catch(n.oe)}.bind(this);return l.on("cfm-item-delete",function(n){l.getFontFile()&&(this._pendingUploadsCount--,this._changeTOSIfNecessary());var r=l.cid;"manageFonts"==this._mode&&i?(this.hideReplaceTip(),this.hideDeleteTip(),c(e(n.target),i,function(e,n){l.setToBeReplaced(),l.render(),this._usageMessage=i,this.willTriggerThemeUpdates=!0,this.actionQueue.addUniqueActionForItemView(l,function(){return{isReplacementPair:!0,deleteOld:!0,replacementPair:[t.acFontFace,e]}}.bind(this)),this._checkContinueEnablement()}.bind(this))):(t.acFontFace?this.actionQueue.addUniqueActionForItemView(l,function(){return p.deletedCustomFont({fontFullName:t.acFontFace.friendlyName(),fontSubgroup:t.acFontFace.subgroupName()},this._launchContext),this._ac.removeFont(t.acFontFace)}.bind(this)):this.actionQueue.remove(r),l.$el.remove()),this._checkContinueEnablement()}.bind(this)),l.on("cfm-item-replace",function(n){"manageFonts"==this._mode?!o||a||s||(this.hideReplaceTip(),this.hideDeleteTip(),c(e(n.target),i,function(e,n){this._usageMessage=i,this.willTriggerThemeUpdates=!0,this.actionQueue.addUniqueActionForItemView(l,function(){return{isReplacementPair:!0,replacementPair:[t.acFontFace,e]}}.bind(this)),this._checkContinueEnablement()}.bind(this))):this.handleUploadFileClicked(null,l)}.bind(this)),l.on("cfm-item-replace-mouseover",function(){"manageFonts"==this._mode?s?this.showReplaceTip(l,"manage-replace-body"):a?this.showReplaceTip(l,"manage-replace-headline"):o?this.showReplaceTip(l,"manage-replace"):this.showReplaceTip(l,"manage-replace-not-used"):this.showReplaceTip(l,"add-replace")}.bind(this)),l.on("cfm-item-replace-mouseout",function(){this.hideReplaceTip()}.bind(this)),l.on("cfm-item-delete-mouseover",function(){"manageFonts"==this._mode?s?this.showDeleteTip(l,"manage-delete-body"):a?this.showDeleteTip(l,"manage-delete-headline"):o?this.showDeleteTip(l,"manage-delete-is-used"):this.showDeleteTip(l,"manage-delete"):this.showDeleteTip(l,"add-delete")}.bind(this)),l.on("cfm-item-delete-mouseout",function(){this.hideDeleteTip()}.bind(this)),l.render(),l},createBodyItemView:function(e){e.parentView=this;var t=new b(e);return t.$el.find(".cfm-font-exclamation").on("mouseover",function(e){this.bodyTip$.addClass("show")}.bind(this)),t.$el.find(".cfm-font-exclamation").on("mouseout",function(e){this.bodyTip$.removeClass("show")}.bind(this)),t.on("cfm-item-add",function(){var e;if(this.hideTooltips(),this._fontSubgroup){var n=this._ac.getCustomFontSubgroup(this._fontSubgroup,!0);e=t.getFontFace()?n.find((function(e){return e.getId()!=t.getFontFace().getId()})):!!n&&!!n.length}e?this.showFontMissingTip(t):this.handleUploadFileClickedForBodyFontSet(t),this._checkContinueEnablement()}.bind(this)),t.on("cfm-got-font-info",function(e){if(this._commonFileValidation(t,e))if(this._hasFontInView(e.fullName,t)){this._pendingUploadsCount--,this.showExistsError(t,e.fullName,".cfm-face-exists-error-tip");t.getRole();t.setFontFile(void 0),t.setFontInfoPromise(void 0),t.setFontName(S[t.getRole()]),t.render(),this.actionQueue.remove(t.cid)}else if(this._isCustomFont(e.fullName))this._pendingUploadsCount--,this._wasFontDeleted(e.fullName)||(this.showExistsError(t,e.fullName,".cfm-face-exists-error-tip"),t.setFontFile(void 0),t.setFontInfoPromise(void 0),t.setFontName(S[t.getRole()]),t.render(),this.actionQueue.remove(t.cid));else{var n=this.shouldSubgroupMatch(e.subgroupName);n?(this.showSubgroupError(t,n),t.setFontFile(void 0),t.setFontInfoPromise(void 0),t.render()):"createBodyFontSet"!=this._mode||this.isNewSubgroupName(e.subgroupName)||(this.hide(),this._cleanup(),y.showConfirm(k.getString("custom-font-manager-manage-existing-font-set-title-text"),k.formatMessage("custom-font-manager-manage-existing-font-set-text",{subgroupName:e.subgroupName}),{okText:k.getString("custom-font-manager-manage-existing-font-set-button-cta"),cancelText:k.getString("custom-font-manager-manage-existing-font-set-cancel-text")}).then(function(t){t&&this.onFinish&&"function"==typeof this.onFinish&&(this.onFinish(null,null,e.subgroupName),this._cleanup())}.bind(this)))}else t.render();this._changeTOSIfNecessary(),this._checkContinueEnablement()}.bind(this)),t.on("cfm-item-missing-add",function(){this.hideFontMissingTip(),this.showChooseExisting(t,this._ac.getCustomFontSubgroup(this._fontSubgroup,!0),this.missingAddChooseTip$)}.bind(this)),t.on("cfm-item-missing-upload",function(){this.hideFontMissingTip(),this.handleUploadFileClickedForBodyFontSet(t)}.bind(this)),t.on("cfm-item-replace-add",function(){this.hideFontReplaceTip(),this.showChooseExisting(t,this._ac.getCustomFontSubgroup(this._fontSubgroup,!0),this.replaceAddChooseTip$)}.bind(this)),t.on("cfm-item-replace-upload",function(){this.hideFontReplaceTip(),this.handleUploadFileClickedForBodyFontSet(t)}.bind(this)),t.on("cfm-item-replace",function(){var e;if(this.hideTooltips(),this._fontSubgroup){var n=this._ac.getCustomFontSubgroup(this._fontSubgroup,!0);e=t.getFontFace()?n.find((function(e){return e.getId()!=t.getFontFace().getId()})):!!n.length}e?this.showFontReplaceTip(t):this.handleUploadFileClickedForBodyFontSet(t),this._checkContinueEnablement()}.bind(this)),t.on("cfm-item-add-picked",function(e){var n=t.getRole();this.actionQueue.addUniqueActionForItemView(t,(function(){return e.setUniqueBodyFontRole(n),e})),t.setFontFace(e),t.render(),this._checkContinueEnablement()}.bind(this)),t.on("cfm-item-delete",function(){t.getFontFile()&&(this._pendingUploadsCount--,this._changeTOSIfNecessary()),this.hideTooltips();var e=t.getFontFace(),n=t.getRole();this.actionQueue.addUniqueActionForItemView(t,function(){e.removeRole(n);n.search(/bold/i);var t=-1!=n.search(/italic/i)?"italic":"normal";return this._ac.addFauxFont(e.subgroupName(),S[n],e.cssName(),e,t,n)}.bind(this));t.setFontFile(void 0),t.setFontInfoPromise(void 0),t.setFontFace(void 0),t.setFontName(S[n]),t.render(),this._checkContinueEnablement()}.bind(this)),t.on("cfm-item-replace-mouseover",function(){this.showReplaceTip(t,"body-replace")}.bind(this)),t.on("cfm-item-replace-mouseout",function(){this.hideReplaceTip()}.bind(this)),t.on("cfm-item-delete-mouseover",function(){this.showDeleteTip(t,"body-delete")}.bind(this)),t.on("cfm-item-delete-mouseout",function(){this.hideDeleteTip()}.bind(this)),t.render(),t},hide:function(){this.hideOverlay(),this.hideWaiter(),this._createBodyFontSet=!1},_handleContinueMouseover:function(e){this.continueBtn$.hasClass("cfm-save")||("addFonts"===this._mode?this._checkHasFiles()?this.tosTip$.addClass("show"):this.filesTip$.addClass("show"):"manageFonts"===this._mode?0===this.actionQueue.length()||this.tosTip$.addClass("show"):"createBodyFontSet"!==this._mode&&"completeBodyFontSet"!==this._mode||(this._checkHasBodyNormal()?this.fontTOS$.hasClass("checked")||this.tosTip$.addClass("show"):this.bodyTip$.addClass("show")))},_handleContinueMouseout:function(e){this.tosTip$.removeClass("show"),this.filesTip$.removeClass("show"),this.bodyTip$.removeClass("show")},_handleProcessingCancel:function(){this._wasCanceled=!0,this._cleanup(),this.hide()},_updateUploadProgress:function(){if(this._isUploading){var e=Math.min(5,(100-this._uploadProgress)/4);this._uploadProgress+=e,this.$el.find(".cfm-processing-progress").css("width",this._uploadProgress+"%"),window.setTimeout(this._updateUploadProgress,2e3*Math.random())}},showWaiter:function(){this.$el.find(".cfm-actions, .cfm-font-list-wrapper, .cfm-add-font, .cfm-tos").removeClass("show"),this.$el.find(".cfm-processing-da-font").removeClass("hide")},hideWaiter:function(){this.$el.find(".cfm-processing-da-font").addClass("hide")},showThemeUpdateProgressBar:function(){this.$el.find(".cfm-processing-status").text(k.getString("custom-font-manager-theme-update-progress-bar-title-text"))},convertToDialog:function(e){var t=e.title,n=e.message,i=e.confirmBtn,r=e.cancelBtn,o=e.onConfirm,a=e.onCancel,s=this.$el.find(".cfm-title"),l=this.$el.find(".cfm-description-text"),c=this.$el.find(".cfm-info"),d=this.$el.find(".cfm-actions"),u=this.$el.find(".cfm-final-actions"),h=this.$el.find(".cfm-final-cancel"),p=this.$el.find(".cfm-final-continue"),f=this.$el.find(".cfm-font-list-wrapper, .cfm-add-font, .cfm-tos");this.$el.find(".cfm-content-shell").addClass("short"),f.removeClass("show"),c.addClass("hide"),d.removeClass("show"),u.addClass("show"),u.find(".cfm-final-continue").text(i||k.getString("custom-font-manager-continue-cta")),r?(u.find(".cfm-final-cancel").removeClass("hide"),u.find(".cfm-final-cancel").text(r)):u.find(".cfm-final-cancel").addClass("hide"),s.text(t||""),l.text(n||""),o&&p.one("click",o),a&&h.one("click",a)},_handleContinueClick:function(){var e,n;if(this.continueBtn$.hasClass("cfm-save")){var i=o.defer(),r=this.$el.find(".cfm-content-shell");if(this.willTriggerThemeUpdates&&this._pendingUploadsCount<=1){var a=this._usageMessage;!a&&this.getUsageOfAssetsMessage&&"function"==typeof this.getUsageOfAssetsMessage&&(a=this.getUsageOfAssetsMessage()),this.convertToDialog({title:"Replace font?",message:a,confirmBtn:"Replace",cancelBtn:"Cancel",onConfirm:function(e){e.preventDefault(),e.stopPropagation(),i.resolve(!0)}.bind(this),onCancel:function(e){e.preventDefault(),e.stopPropagation(),i.resolve(!1)}.bind(this)})}else i.resolve();i.promise.then(function(i){if(!1!==i){this._uploadProgress=5,this._isUploading=!0,this._updateUploadProgress(),r.addClass("short"),0===this._pendingUploadsCount&&this.showThemeUpdateProgressBar(),this.showWaiter();var a=new f([],{feel:"user-uploaded"}),s=[];o.allSettled(this.actionQueue.map(function(e){return e.execute()}.bind(this))).then(function(i){return t.each(i,function(i){if("fulfilled"==i.state){var r="partial";if(this._ac.activated()&&(r="full"),i.value&&i.value.isReplacementPair&&s.push(i.value),i.value&&i.value.friendlyName){var o={brandKitCompleteness:r,fontFullName:i.value.friendlyName(),fontSubgroup:i.value.subgroupName()},l={copyright:"contextualData1",designer:"contextualData2",designerURL:"contextualData3",license:"contextualData4",licenseURL:"contextualData5",manufacturerURL:"contextualData6",trademark:"contextualData7",licenseFlag:"contextualData9"},c=i.value._licenseInfo;if(c)for(var d in c){if(c.hasOwnProperty(d))if(!t.isUndefined(c[d]))o[l[d]]=d+":"+c[d]}p.uploadedCustomFont(o,this._launchContext),a.add(i.value),window.marvel.events.trigger("spark-custom-font-uploaded",i.value)}else console.warn("Failed to find authoringContextFontFace in result",i)}else{var u;if(e=k.getString("custom-font-manager-upload-font-error-title"),n=k.getString("custom-font-manager-upload-font-error"),i.reason)i.reason.status&&"number"==typeof i.reason.status?u=i.reason.status:"function"!=typeof i.reason.statusCode&&(u=i.reason.statusCode),i.reason.fontName?console.warn('font-upload-error: Font upload failed for "'+i.reason.fontName+'" with '+(u||"unknown status"),i.reason):console.warn("font-upload-error: Font upload failed with "+(u||"unknown status"),i.reason),u>=500||u>=400&&(413==u?(e=k.getString("custom-font-manager-font-too-large-title-text"),n=k.getString("custom-font-manager-font-too-large-text")):(e=k.getString("custom-font-manager-font-invalid-title-text"),n=k.getString("custom-font-manager-font-invalid-text"))),p.failedUploadingCustomFont({statusCode:u},this._launchContext);else console.warn("font-upload-error: Font upload failed with unknown result (see meta):",i),p.failedUploadingCustomFont({statusCode:0},this._launchContext)}}.bind(this)),this._ac.save()}.bind(this)).then(function(){this._wasCanceled,this._isUploading=!1,this.onFinish&&"function"==typeof this.onFinish&&(this.onFinish(a,i,s),n&&e?(this.hideWaiter(),this.convertToDialog({title:e,message:n,confirmBtn:k.getString("confirm-font-manager-error-button-cta"),onConfirm:function(){this.hide()}.bind(this)})):i?i&&0===this._pendingUploadsCount&&this.hide():this.hide(),this._cleanup())}.bind(this)).done()}else this._handleCancelClick()}.bind(this))}},_cleanup:function(){this._itemViews=[],this._fontsIn=[],this._pendingUploadsCount=0,this.fontTOS$.addClass("checked"),this.tosWrapper$.addClass("disabled")},_handleCancelClick:function(e){this._cleanup(),this.hide()},_checkHasFiles:function(){return!!t.find(this._itemViews,(function(e){return!(e.deleted||!e.options.fontFile)}))},_checkHasBodyNormal:function(){return!!t.find(this._itemViews,(function(e){return"is-body-font"==e.getRole()&&(e.getFontFace()&&!e.getFontFace().isFauxFont()||e.options.fontFile)}))},_checkContinueEnablement:function(){var e=!1;"addFonts"===this._mode?this._checkHasFiles()&&this.fontTOS$.hasClass("checked")&&(e=!0):"manageFonts"===this._mode?this.actionQueue.length()>0&&(this._checkHasFiles()?this.fontTOS$.hasClass("checked")&&(e=!0):e=!0):"createBodyFontSet"!==this._mode&&"completeBodyFontSet"!==this._mode||this._checkHasBodyNormal()&&(this._pendingUploadsCount?this.fontTOS$.hasClass("checked")&&(e=!0):e=!0),e?this.continueBtn$.addClass("cfm-save"):this.continueBtn$.removeClass("cfm-save")},_changeTOSIfNecessary:function(){0===this._pendingUploadsCount?(this.tosWrapper$.addClass("disabled"),this._TOSHasBeenClicked||this.fontTOS$.addClass("checked")):(this.tosWrapper$.removeClass("disabled"),this._TOSHasBeenClicked||this.fontTOS$.removeClass("checked")),this._checkContinueEnablement()},_handleTOSClick:function(e){e.target.hasAttribute("href")||(this._TOSHasBeenClicked=!0,this.fontTOS$.toggleClass("checked"),this._checkContinueEnablement())},_recordTOUA:function(e){return this._touaDefer?this._touaFonts.push(e):(this._touaDefer=o.defer(),this._touaFonts=[],this._touaFonts.push(e),t.delay(function(){var e=this._touaFonts.join(","),t=this._touaDefer;this._touaDefer=null,this._touaFonts=[],l.ajax({url:"/fonts/toua/"+window.encodeURIComponent(e),type:"GET",success:function(e){t.resolve()}.bind(this),error:function(e){window.marvel.logger.error("ERROR RECORDING TOUA: ",e),t.reject(e)}.bind(this)})}.bind(this),1e3)),this._touaDefer.promise},_getCSSFamilyName:function(e){var t=this.cssNamesBySubgroup[e];return t||(t=d.cssName(e),e&&(this.cssNamesBySubgroup[e]=t)),t},autoPickLocalFiles:function(e){t.each(e,function(e){this._handleFileSelected(e)}.bind(this))},_handleFileSelected:function(e,n){this.fontList$&&this.fontList$.removeClass("empty"),this._pendingUploadsCount++,this._changeTOSIfNecessary();var i=u.extractFontInfo(e),r=this.fileInput$;n?(n.options.fontFile=e,n.options.fontInfoPromise=i,n.render()):(n=this.createItemView({fontFile:e,fontInfoPromise:i}),this._itemViews.push(n),this.fontList$.append(n.$el)),this.$el.hasClass("hide")&&this.showOverlay();var o=function(){var n,o,a,s,l;return i.then(function(i){o=t.trim(i.preferredFamilyName||i.familyName),a=t.trim(i.preferredSubfamilyName||i.subfamilyName)||k.getString("custom-font-manager-edit-body-font-regular"),s=o+" "+a;var r=this._getCSSFamilyName(o);return this._recordTOUA(s).then(function(){return l=i._licenseInfo,delete i._licenseInfo,u.generateMetricsAsync(s,r,i).then(function(t){return t.version=this._ac.CURRENT_FONT_METRICS_VERSION,(n=this._ac.createOrUpdateCustomFont(o,a,r,{metrics:t})).createOrUpdateFontFiles([e]).then((function(){return n.loadFont()})).then((function(){return n.generateRenditions()}))}.bind(this))}.bind(this))}.bind(this)).then(function(){return this._ac.save()}.bind(this)).then(function(){return r&&r.remove(),n._licenseInfo=l,n}.bind(this)).catch((function(e){throw e.fontName=s,e}))}.bind(this);return this.actionQueue.addUniqueActionForItemView(n,o),this._checkContinueEnablement(),this.scrollFontListToBottom(),!0},handleUploadFileClicked:function(t,n){this.fontUploadInput$=e('<input type="file" class="custom-font-upload-input" accept=".otf,.ttf" style="display:none" multiple>'),this.$el.append(this.fontUploadInput$),this.fontUploadInput$.on("change",function(e){for(var t=0,i=e.target.files.length;t<i;t++){var r=e.target.files[t];this._handleFileSelected(r,n)}}.bind(this)),this.fontUploadInput$.trigger("click")},_handleFileSelectedForBodyFontSet:function(e,n){this.fontList$.removeClass("empty"),this._pendingUploadsCount++,this._changeTOSIfNecessary();var i=u.extractFontInfo(e),r=this.fileInput$;n.options.fontFile=e,n.options.fontInfoPromise=i,n.render(),this.$el.hasClass("hide")&&this.showOverlay(),this._checkContinueEnablement();var o=function(){var o,a,s,l,c;return i.then(function(n){a=t.trim(n.preferredFamilyName||n.familyName),s=t.trim(n.preferredSubfamilyName||n.subfamilyName)||k.getString("custom-font-manager-edit-body-font-regular"),l=a+" "+s;var i=this._getCSSFamilyName(a);return this._recordTOUA(l).then(function(){return c=n._licenseInfo,delete n._licenseInfo,u.generateMetricsAsync(l,i,n).then(function(t){return t.version=this._ac.CURRENT_FONT_METRICS_VERSION,(o=this._ac.createOrUpdateCustomFont(a,s,i,{metrics:t})).createOrUpdateFontFiles([e]).then((function(){return o.loadFont()})).then((function(){return o.generateRenditions()}))}.bind(this))}.bind(this))}.bind(this)).then(function(){return o.setUniqueBodyFontRole(n.getRole()),this._ac.save()}.bind(this)).then(function(){return r&&r.remove(),o._licenseInfo=c,o}.bind(this)).catch((function(e){throw e.fontName=l,e}))}.bind(this);return this.actionQueue.addUniqueActionForItemView(n,o),!0},handleUploadFileClickedForBodyFontSet:function(t){this.fontUploadInput$=e('<input type="file" class="custom-font-upload-input" accept=".otf,.ttf" style="display:none">'),this.$el.append(this.fontUploadInput$),this.fontUploadInput$.on("change",function(e){for(var n=0,i=e.target.files.length;n<i;n++){var r=e.target.files[n];this._handleFileSelectedForBodyFontSet(r,t)}}.bind(this)),this.fontUploadInput$.trigger("click")}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(499),n(99),n(399),n(36),n(515)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";var l=["headline-font","body-font","body-font-bold","body-font-italic","body-font-bold-italic"];return i.extend({type:"font",valueProp:"font#data",isDefn:function(){return!1},getHref:function(e,t){var n=this._ac._hrefForCustomFont(this.getData(),e);return t&&n&&(n=n.replace(/^https?\:\/\/[^\/]+\/image_assets\/[^\/]+\/[^\/]+\/(.*)$/,"$1")),n},getHrefAsync:function(e,t){var n=this._ac.getComponentForCustomFont(this);return this._ac._hrefForCustomFontAsync(this.getData(),e).then((function(e){if(t&&e){var i="",r=n?n.getValue("name"):null;r&&(i="&mime=application/"+r),e=/^https:\/\/cc-api-storage-creativesdk(-stage)?\.adobe\.io/.test(e)?e.replace(/^https?\:\/\/[^\/]+\/assets\/(.*)\/(.*)\/(.*)$/,"/image_assets/$1/$2/?asset_id=$3"+i):e.replace(/^https?\:\/\/[^\/]+\/image_assets\/[^\/]+\/[^\/]+\/(.*)$/,"$1")}return e}))},getFileAsBlob:function(e,t){var i=n.defer();return this.getHrefAsync(e,t).then(function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&i.resolve(this.response)},t.onerror=function(e){i.reject(e)},t.open("GET",e),t.responseType="blob",t.send()}.bind(this)).catch((function(e){i.reject(e)})).done(),i.promise},getRenditionHrefAsync:function(e,t,n){var i="face-rendition";return t?i="family-rendition":n&&(i="rendition"),this._ac._hrefForCustomFontRenditionAsync(this.getData(),i).then(function(t){return e&&t&&(t=t.replace(/^https?\:\/\/[^\/]+\/image_assets\/[^\/]+\/[^\/]+\/(.*)$/,"$1")),t}.bind(this))},friendlyName:function(e){var t;if(this.isSparkFont()){var n=s.faces[this.lookupKey()];t=n.subgroupName+" "+n.name}else t=this._data.getValue("name")||"Undefined";return e?-1!=t.search(/^clarendon/i)||-1!=t.search(/^raleway/i)||-1!=t.search(/^wanderlust/i)?t.split(" ")[0]:t.split(" ").slice(0,2).join(" "):t},setUniqueBodyFontRole:function(e){this._ac.getCustomFontSubgroup(this.subgroupName()).each((function(t){t.removeRole(e)})),this.addRole(e)},subgroupName:function(){return this.isSparkFont()?s.faces[this.lookupKey()].subgroupName:this.getValueProp("subgroupName")},faceName:function(){return this.isSparkFont()?s.faces[this.lookupKey()].name:this.getValueProp("faceName")},setFontFromDefn:function(e,t,n){n=n||this.getData(),t=t||this.getValue(),"tk-synced"==e._fontData.source?(t.source=e.source(),t.lookupKey=e.lookupKey(),t.subgroupName=e.subgroupName(),t.cssName=e.cssName(),t.weight=e.fontWeight(),t.style=e.fontStyle(),t.tkPreviewId=e.tkPreviewId(),t.tkVariation=e.tkVariation(),t.tkSubgroupKitId=e.tkSubgroupKitId(),n.setValue("name",e.friendlyName())):(t.source=e.source(),t.lookupKey=e.lookupKey())},setLookupKey:function(e){var t=this._getValue();"object"==typeof e&&"tk-synced"===e.type?this._setTypekitSyncedFont(e,t):t.lookupKey=e,this.setValue(t)},createFont:function(e,t){var n=this._ac.composite.acquireNestedMapSync("all-fonts"),i=this._ac.composite.addChildPath(void 0,void 0,n),r={};return i.setValue("type","application/vnd.adobe.element.custom-font+dcx"),i.setValue("ac#application","spark-web"),i.setValue("ac#roles",t),this.setFontFromDefn(e,r,i),this._data=i,i.setValue("font#data",r),i.setValue(this.valueProp,r),i},createFromElement:function(e,t){var n=e.getValue(this.valueProp).lookupKey,i=new r;i.setFontDataFromSparkFontDefn(t.facesByKey[n]),this._data=this.createFont(i,e.getValue("ac#roles"))},source:function(){return this.getValueProp("source")},isCustomFont:function(){return"user-uploaded"==this.source()},isSparkFont:function(){return"spark-provided"==this.source()},isFauxFont:function(){return"faux-font"==this.source()},isBodyFont:function(){return this.hasAnyRole(["body-font-italic","body-font-bold-italic","is-body-font-italic","is-body-font-bold-italic","body-font","body-font-bold","is-body-font","is-body-font-bold"])},getMetricsAsync:function(){return this.isCustomFont()?n.resolve(this.getMetrics()):this.getMetricsFromRegistry()},getMetrics:function(){return this.getValueProp("metrics")},getMetricsFromRegistry:function(){return a.getFontRegistry().then(function(e){return e.facesByKey[this.lookupKey()].face.metrics}.bind(this))},lookupKey:function(){return this.isCustomFont()&&this._data?"custom-"+this._data.path:this.getValueProp("lookupKey")},uiKey:function(){return"custom-"+this.getId()},tkPreviewId:function(){var e=this.getValueProp("tkPreviewId");if(!e&&this.isSparkFont()){var t=s.faces[this.lookupKey()];e=s.subgroups[t.subgroupName].typekitPreviewId}return e},tkVariation:function(){var e=this.getValueProp("tkVariation");!e&&this.isSparkFont()&&(e=s.faces[this.lookupKey()].typekitKey);return e},tkSubgroupKitId:function(){var e=this.getValueProp("tkSubgroupKitId");if(!e&&this.isSparkFont()){var t=s.faces[this.lookupKey()];e=s.subgroups[t.subgroupName].typekitSubgroupKitId}return e},cssName:function(){if(this.isSparkFont()){var e=s.faces[this.lookupKey()];return s.subgroups[e.subgroupName].cssName}return this.getValueProp("cssName")||'"'+this.friendlyName()+'"'},cssNameForPreview:function(){var e=this.cssName();return"tk-synced"===this.source()&&(e=this.tkPreviewId()),e},fontStyle:function(){if(this.isSparkFont()){if(!this.getValueProp("fontStyle")){return{n:"normal",i:"italic"}[this.tkVariation().split("")[0]]}}else if(this.isCustomFont()||this.isFauxFont()){if(this.hasRole("body-font-italic")||this.hasRole("body-font-bold-italic")||this.hasRole("is-body-font-italic")||this.hasRole("is-body-font-bold-italic"))return"italic";if(this.hasRole("body-font")||this.hasRole("body-font-bold")||this.hasRole("is-body-font")||this.hasRole("is-body-font-bold"))return"normal";var e=this.getMetrics();if(e&&e.style)return e.style}return this.getValueProp("fontStyle","normal")},fontWeight:function(){if(this.isSparkFont()){if(!this.getValueProp("fontWeight")){var e=this.tkVariation().split(""),t=parseInt(e[1]);return t<1&&(t=1),t>9&&(t=9),100*t}}else if(this.isCustomFont()||this.isFauxFont()){if(this.hasRole("body-font")||this.hasRole("body-font-italic")||this.hasRole("is-body-font")||this.hasRole("is-body-font-italic"))return 400;if(this.hasRole("body-font-bold")||this.hasRole("body-font-bold-italic")||this.hasRole("is-body-font-bold")||this.hasRole("is-body-font-bold-italic"))return 700;var n=this.getMetrics();if(n&&n.weight)return n.weight}return this.getValueProp("fontWeight","normal")},getCSSFontFace:function(e,t){var n=this.cssName();n||(n=this.friendlyName().toLowerCase());var i=this.getHref();if(t=t||i)return e&&(t=t.replace(/https?\:\/\/[^\/]*\/image_assets\/[^\/]*\/[^\/]*\/(.*)$/,"$1")),"@font-face { font-family: "+n+";font-weight:"+this.fontWeight()+";font-style:"+this.fontStyle()+';src: url("'+t+'"); }'},getCSSFontFaceAsync:function(e,t){var n=this.cssName();return n||(n=this.friendlyName().toLowerCase()),this.getHrefAsync().then(function(i){return(t=t||i)?(e&&(t=t.replace(/https?\:\/\/[^\/]*\/image_assets\/[^\/]*\/[^\/]*\/(.*)$/,"$1")),"@font-face { font-family: "+n+";font-weight:"+this.fontWeight()+";font-style:"+this.fontStyle()+';src: url("'+t+'"); }'):void 0}.bind(this))},loadFont:function(){var e=this.source();return"user-uploaded"==e?o.loadFont(this,this._ac):"spark-provided"==e?o.loadFont(this.lookupKey(),this._ac):n.resolve()},$loadFontCSS:function(e,n,i,r){var o=!1;n=n||18,t.delay((function(){o||e.addClass("font-loading")}),50),this.loadFont().finally(function(){o=!0;var t=a.getFontNormalized(n,this.getMetrics());e.css("font-size",t.size+"px"),i&&e.css("line-height",1.94*n+t.vshift+"px"),r&&e.css("height",1.94*n+t.vshift+"px"),this.$css(e,",adobe-clean,sans-serif"),e.removeClass("font-loading")}.bind(this)).done()},$cssRendition:function(e,t,n,i){r.prototype.$cssRendition.call(this,e,t,n,i)},$css:function(t,n){var i=this.cssName();n=n||"","tk-synced"!==this.source()&&"spark-provided"!==this.source()||(i=i||this.tkPreviewId()),(t=e(t)).css({"font-family":i+n,"font-style":this.fontStyle(),"font-weight":this.fontWeight()})},createOrUpdateFontFiles:function(e){return this._ac.createOrUpdateFontFiles(this.getData(),e)},generateRenditions:function(){return this._ac.generateFontRenditions(this)},getUniqueRole:function(){return this.getUniqueRoles()[0]},getUniqueRoles:function(){var e=this.getRoles();return t.intersection(e,l)},getTOUAName:function(){return this.subgroupName()+" "+this.faceName()},isInstallable:function(){var e=this.getMetrics().fsType,t=this.getTOUAName();try{var n=Number.parseInt(e),i=15&n;if(0===i)return window.marvel.logger.traceflow("brand-kit","verifyFonts fsType="+n+"  licenseType=0 so no upload is required"),!0;window.marvel.logger.traceflow("brand-kit","verifyFonts fsType="+i+" so font upload is required for "+t)}catch(e){window.marvel.logger.warn("BrandKitWrapper failed verifying font license",e)}return!1}})}.apply(t,i))||(e.exports=r)},function(e){e.exports=JSON.parse('{"subgroups":{"Acumin Pro Semi Condensed":{"subgroupName":"Acumin Pro Semi Condensed","cssName":"acumin-pro-semi-condensed","typekitPreviewId":"zhgz","typekitSubgroupKitId":"oed0yfm","paragraphRecommended":true,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d","weight":"300","style":"","subgroupName":"Acumin Pro Semi Condensed"},{"typekitKey":"i3","name":"Light Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b","weight":"300","style":"italic","subgroupName":"Acumin Pro Semi Condensed"},{"typekitKey":"n6","name":"Semibold","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c","weight":"600","style":"","subgroupName":"Acumin Pro Semi Condensed"},{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2","weight":"600","style":"italic","subgroupName":"Acumin Pro Semi Condensed"}]},"Adobe Caslon Pro":{"subgroupName":"Adobe Caslon Pro","cssName":"adobe-caslon-pro","typekitPreviewId":"hmqz","typekitSubgroupKitId":"qhv3iqj","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76","weight":"400","style":"","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"i4","name":"Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6690b5dceede","weight":"400","style":"italic","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"n6","name":"Semibold","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870","weight":"600","style":"","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870e97c629f857060","weight":"600","style":"italic","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"n7","name":"Bold","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4","weight":"700","style":"","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75","weight":"700","style":"italic","subgroupName":"Adobe Caslon Pro"}]},"Azo Sans":{"subgroupName":"Azo Sans","cssName":"azo-sans-web","typekitPreviewId":"lyqy","typekitSubgroupKitId":"ppn2tqp","paragraphRecommended":false,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"2594dbd0127076637d65ed0afaf7","weight":"300","style":"","subgroupName":"Azo Sans"},{"typekitKey":"i3","name":"Light Italic","lookupKey":"2594dbd0127076637d65ed0afaf75cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Azo Sans"},{"typekitKey":"n7","name":"Bold","lookupKey":"2594dbd0127076637d6beb01f6","weight":"700","style":"","subgroupName":"Azo Sans"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2594dbd0127076637d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"Azo Sans"}]},"Bellfort Script":{"subgroupName":"Bellfort Script","cssName":"spark-bellfort-script","typekitPreviewId":false,"typekitSubgroupKitId":"vpr2ezi","paragraphRecommended":false,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"268bd89c277e6a64707ae71ffbf308d69f4683bcc4","weight":"300","style":"","subgroupName":"Bellfort Script"},{"typekitKey":"n4","name":"Regular","lookupKey":"268bd89c277e6a64707ae71ffbf308d6814a83a1dce6cf","weight":"400","style":"","subgroupName":"Bellfort Script"}]},"Calluna":{"subgroupName":"Calluna","cssName":"calluna","typekitPreviewId":"vybr","typekitSubgroupKitId":"pwy8yyx","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"278fd89c347f793d024ce318fee20e","weight":"400","style":"","subgroupName":"Calluna"},{"typekitKey":"i4","name":"Italic","lookupKey":"278fd89c347f793d195de501fbe0","weight":"400","style":"italic","subgroupName":"Calluna"},{"typekitKey":"n7","name":"Bold","lookupKey":"278fd89c347f793d1246e809","weight":"700","style":"","subgroupName":"Calluna"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"278fd89c347f793d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"Calluna"}]},"Clarendon Text Pro":{"subgroupName":"Clarendon Text Pro","cssName":"clarendon-text-pro","typekitPreviewId":"kctd","typekitSubgroupKitId":"tes3lrh","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c986d5e0c86875bb","weight":"400","style":"","subgroupName":"Clarendon Text Pro"},{"typekitKey":"i4","name":"Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c99dc4e6d16d77","weight":"400","style":"italic","subgroupName":"Clarendon Text Pro"},{"typekitKey":"n7","name":"Bold","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9","weight":"700","style":"","subgroupName":"Clarendon Text Pro"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9245dbd547a978a","weight":"700","style":"italic","subgroupName":"Clarendon Text Pro"}]},"Courier Std":{"subgroupName":"Courier Std","cssName":"courier-std","typekitPreviewId":"jxcp","typekitSubgroupKitId":"oeu5sen","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2781c18228746a30035de040c0e61b8ebf4e96","weight":"400","style":"","subgroupName":"Courier Std"},{"typekitKey":"n7","name":"Bold","lookupKey":"2781c18228746a30035de040d0ec109f","weight":"700","style":"","subgroupName":"Courier Std"}]},"Didot Headline":{"subgroupName":"Didot Headline","cssName":"spark-didot-headline","typekitPreviewId":false,"typekitSubgroupKitId":"gkw8jcv","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2087d09f35315075314de804fce651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"Didot Headline"},{"typekitKey":"n6","name":"Demi","lookupKey":"2087d09f35315075314de804fce651bfb6428d","weight":"600","style":"","subgroupName":"Didot Headline"},{"typekitKey":"n7","name":"Bold","lookupKey":"2087d09f35315075314de804fce651b9bc4380","weight":"700","style":"","subgroupName":"Didot Headline"}]},"Futura PT":{"subgroupName":"Futura PT","cssName":"futura-pt","typekitPreviewId":"ftnk","typekitSubgroupKitId":"icc1sfj","paragraphRecommended":false,"faces":[{"typekitKey":"n5","name":"Medium","lookupKey":"229bc085337038400404c908f6ea0996","weight":"500","subgroupName":"Futura PT"},{"typekitKey":"n7","name":"Heavy","lookupKey":"229bc085337038400404cc08f3f505","weight":"700","style":"","subgroupName":"Futura PT"}]},"Lato":{"subgroupName":"Lato","cssName":"lato","typekitPreviewId":"jxfv","typekitSubgroupKitId":"oea2wtv","paragraphRecommended":true,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"288fc09f6c5d7177385d","weight":"300","subgroupName":"Lato"},{"typekitKey":"n4","name":"Regular","lookupKey":"288fc09f6c437d772545e51f","weight":"400","subgroupName":"Lato"},{"typekitKey":"i4","name":"Italic","lookupKey":"288fc09f6c586c713c40e7","weight":"400","style":"italic","subgroupName":"Lato"},{"typekitKey":"n7","name":"Bold","lookupKey":"288fc09f6c53777c34","weight":"700","subgroupName":"Lato"},{"typekitKey":"i9","name":"Black Italic","lookupKey":"288fc09f6c5374713342a424e6e21092b0","weight":"900","style":"italic","subgroupName":"Lato"}]},"Local Brewery":{"subgroupName":"Local Brewery","cssName":"spark-local-brewery","typekitPreviewId":false,"typekitSubgroupKitId":"vfd3hup","paragraphRecommended":false,"faces":[{"typekitKey":"n7","name":"Bold","lookupKey":"2881d7912d315a62355ee11febae3e94bf4b","weight":"700","style":"","subgroupName":"Local Brewery"}]},"Local Brewery Four":{"subgroupName":"Local Brewery Four","cssName":"spark-local-brewery-four","typekitPreviewId":false,"typekitSubgroupKitId":"txs8zsv","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2881d7912d315a62355ee11feba33a94a65dc986d5e0c86875bb","weight":"400","subgroupName":"Local Brewery Four"}]},"LTC Bodoni 175":{"subgroupName":"LTC Bodoni 175","cssName":"ltc-bodoni-175","typekitPreviewId":"mrnw","typekitSubgroupKitId":"meq2xke","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"LTC Bodoni 175"},{"typekitKey":"i4","name":"Italic","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651b2a74e88bdd3","weight":"400","style":"italic","subgroupName":"LTC Bodoni 175"}]},"Museo Sans Rounded":{"subgroupName":"Museo Sans Rounded","cssName":"museo-sans-rounded","typekitPreviewId":"dtgx","typekitSubgroupKitId":"iuk5brd","paragraphRecommended":false,"faces":[{"typekitKey":"n5","name":"500","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e180b7","weight":"500","style":"","subgroupName":"Museo Sans Rounded"},{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e380b7","weight":"700","style":"","subgroupName":"Museo Sans Rounded"}]},"Museo Slab":{"subgroupName":"Museo Slab","cssName":"museo-slab","typekitPreviewId":"llxb","typekitSubgroupKitId":"gom8xuo","paragraphRecommended":true,"faces":[{"typekitKey":"n3","name":"300","lookupKey":"299bc7952e314b7c314ba95ea2b3","weight":"300","style":"","subgroupName":"Museo Slab"},{"typekitKey":"i3","name":"300 Italic","lookupKey":"299bc7952e314b7c314ba95ea2b35cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Museo Slab"},{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b7c314ba95aa2b3","weight":"700","style":"","subgroupName":"Museo Slab"},{"typekitKey":"i7","name":"700 Italic","lookupKey":"299bc7952e314b7c314ba95aa2b35cb2a74e88bdd3","weight":"700","style":"italic","subgroupName":"Museo Slab"},{"typekitKey":"n9","name":"1000","lookupKey":"299bc7952e314b7c314ba95ca2b34c","weight":"900","style":"","subgroupName":"Museo Slab"}]},"Proxima Nova":{"subgroupName":"Proxima Nova","cssName":"proxima-nova","typekitPreviewId":"vcsm","typekitSubgroupKitId":"yfs6lii","paragraphRecommended":true,"faces":[{"typekitKey":"n1","name":"Thin","lookupKey":"349cdb88287c79301e46f20cbfd71492bd","weight":"100","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i1","name":"Thin Italic","lookupKey":"349cdb88287c79301e46f20cbfd71492bd0fada0d1ebd467","weight":"100","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n3","name":"Light","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5b","weight":"300","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i3","name":"Light Italic","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5bc49dc4e6d16d77","weight":"300","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n4","name":"Regular","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a6","weight":"400","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i4","name":"Regular Italic","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056","weight":"400","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n5","name":"Medium","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89","weight":"500","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i5","name":"Medium Italic","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89f4f9f3dc687daa","weight":"500","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n6","name":"Semibold","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4","weight":"600","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4a7f47075a55c75","weight":"600","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n7","name":"Bold","lookupKey":"349cdb88287c79301e46f20cbfc11397b7","weight":"700","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467","weight":"700","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n8","name":"Extrabold","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce3","weight":"800","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i8","name":"Extrabold Italic","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce39d4d60a8597f9d","weight":"800","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n9","name":"Black","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044","weight":"900","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i9","name":"Black Italic","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044c49dc4e6d16d77","weight":"900","style":"italic","subgroupName":"Proxima Nova"}]},"PT Sans":{"subgroupName":"PT Sans","cssName":"pt-sans","typekitPreviewId":"lllr","typekitSubgroupKitId":"sys1rxz","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b3d024ce318fee20e","weight":"400","style":"","subgroupName":"PT Sans"},{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3207f6b3d195de501fbe0","weight":"400","style":"italic","subgroupName":"PT Sans"},{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b3d1246e809","weight":"700","style":"","subgroupName":"PT Sans"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3207f6b3d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"PT Sans"}]},"PT Sans Narrow":{"subgroupName":"PT Sans Narrow","cssName":"pt-sans-narrow","typekitPreviewId":"rmcr","typekitSubgroupKitId":"xfq6xbo","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b301e48f61ffdf451a9b64891b8d1f5","weight":"400","style":"","subgroupName":"PT Sans Narrow"},{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b301e48f61ffdf451b9bc4380","weight":"700","style":"","subgroupName":"PT Sans Narrow"}]},"PT Serif":{"subgroupName":"PT Serif","cssName":"pt-serif","typekitPreviewId":"xcqq","typekitSubgroupKitId":"lyd0hdu","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3246371767d7be10ae7ef1d89","weight":"400","style":"","subgroupName":"PT Serif"},{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3246371767d60f00cfeea1f","weight":"400","style":"italic","subgroupName":"PT Serif"},{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3246371767d6beb01f6","weight":"700","style":"","subgroupName":"PT Serif"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3246371767d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"PT Serif"}]},"Voltage":{"subgroupName":"Voltage","cssName":"spark-voltage","typekitPreviewId":false,"typekitSubgroupKitId":"cjx2klj","paragraphRecommended":false,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"3281d88420767d3d1c40e305e6","weight":"300","style":"","subgroupName":"Voltage"},{"typekitKey":"n4","name":"Regular","lookupKey":"3281d88420767d3d024ce318fee20e","weight":"400","style":"","subgroupName":"Voltage"},{"typekitKey":"n7","name":"Bold","lookupKey":"3281d88420767d3d1246e809","weight":"700","style":"","subgroupName":"Voltage"}]},"Wanderlust Shine":{"subgroupName":"Wanderlust Shine","cssName":"spark-wanderlust-shine","typekitPreviewId":false,"typekitSubgroupKitId":"etu6mud","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"338fda9424637465235da43efaea129efe7d81b3c5ebdc76","weight":"400","subgroupName":"Wanderlust Shine"}]},"Raleway":{"subgroupName":"Raleway","cssName":"raleway","typekitPreviewId":"nqdy","typekitSubgroupKitId":"mce7zxv","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"368fd8953670613d024ce318fee20e","weight":"400","subgroupName":"Raleway"},{"typekitKey":"n9","name":"Heavy","lookupKey":"368fd8953670613d184ce51beb","weight":"900","subgroupName":"Raleway"}]}},"faces":{"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d":{"typekitKey":"n3","name":"Light","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d","weight":"300","style":"","subgroupName":"Acumin Pro Semi Condensed"},"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b":{"typekitKey":"i3","name":"Light Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b","weight":"300","style":"italic","subgroupName":"Acumin Pro Semi Condensed"},"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c":{"typekitKey":"n6","name":"Semibold","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c","weight":"600","style":"","subgroupName":"Acumin Pro Semi Condensed"},"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2":{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2","weight":"600","style":"italic","subgroupName":"Acumin Pro Semi Condensed"},"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76":{"typekitKey":"n4","name":"Regular","lookupKey":"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76","weight":"400","style":"","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe6690b5dceede":{"typekitKey":"i4","name":"Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6690b5dceede","weight":"400","style":"italic","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870":{"typekitKey":"n6","name":"Semibold","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870","weight":"600","style":"","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870e97c629f857060":{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870e97c629f857060","weight":"600","style":"italic","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe6d8bb8d4":{"typekitKey":"n7","name":"Bold","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4","weight":"700","style":"","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75","weight":"700","style":"italic","subgroupName":"Adobe Caslon Pro"},"2594dbd0127076637d65ed0afaf7":{"typekitKey":"n3","name":"Light","lookupKey":"2594dbd0127076637d65ed0afaf7","weight":"300","style":"","subgroupName":"Azo Sans"},"2594dbd0127076637d65ed0afaf75cb2a74e88bdd3":{"typekitKey":"i3","name":"Light Italic","lookupKey":"2594dbd0127076637d65ed0afaf75cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Azo Sans"},"2594dbd0127076637d6beb01f6":{"typekitKey":"n7","name":"Bold","lookupKey":"2594dbd0127076637d6beb01f6","weight":"700","style":"","subgroupName":"Azo Sans"},"2594dbd0127076637d6beb01f6a3358fb2438db7":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2594dbd0127076637d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"Azo Sans"},"268bd89c277e6a64707ae71ffbf308d69f4683bcc4":{"typekitKey":"n3","name":"Light","lookupKey":"268bd89c277e6a64707ae71ffbf308d69f4683bcc4","weight":"300","style":"","subgroupName":"Bellfort Script"},"268bd89c277e6a64707ae71ffbf308d6814a83a1dce6cf":{"typekitKey":"n4","name":"Regular","lookupKey":"268bd89c277e6a64707ae71ffbf308d6814a83a1dce6cf","weight":"400","style":"","subgroupName":"Bellfort Script"},"278fd89c347f793d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"278fd89c347f793d024ce318fee20e","weight":"400","style":"","subgroupName":"Calluna"},"278fd89c347f793d195de501fbe0":{"typekitKey":"i4","name":"Italic","lookupKey":"278fd89c347f793d195de501fbe0","weight":"400","style":"italic","subgroupName":"Calluna"},"278fd89c347f793d1246e809":{"typekitKey":"n7","name":"Bold","lookupKey":"278fd89c347f793d1246e809","weight":"700","style":"","subgroupName":"Calluna"},"278fd89c347f793d1246e809b2ca089abf4687":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"278fd89c347f793d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"Calluna"},"2782d582247f7c7f3e09d008eaf75caba140c986d5e0c86875bb":{"typekitKey":"n4","name":"Regular","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c986d5e0c86875bb","weight":"400","style":"","subgroupName":"Clarendon Text Pro"},"2782d582247f7c7f3e09d008eaf75caba140c99dc4e6d16d77":{"typekitKey":"i4","name":"Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c99dc4e6d16d77","weight":"400","style":"italic","subgroupName":"Clarendon Text Pro"},"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9":{"typekitKey":"n7","name":"Bold","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9","weight":"700","style":"","subgroupName":"Clarendon Text Pro"},"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9245dbd547a978a":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9245dbd547a978a","weight":"700","style":"italic","subgroupName":"Clarendon Text Pro"},"2781c18228746a30035de040c0e61b8ebf4e96":{"typekitKey":"n4","name":"Regular","lookupKey":"2781c18228746a30035de040c0e61b8ebf4e96","weight":"400","style":"","subgroupName":"Courier Std"},"2781c18228746a30035de040d0ec109f":{"typekitKey":"n7","name":"Bold","lookupKey":"2781c18228746a30035de040d0ec109f","weight":"700","style":"","subgroupName":"Courier Std"},"2087d09f35315075314de804fce651a9b64891b8d1f5":{"typekitKey":"n4","name":"Regular","lookupKey":"2087d09f35315075314de804fce651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"Didot Headline"},"2087d09f35315075314de804fce651bfb6428d":{"typekitKey":"n6","name":"Demi","lookupKey":"2087d09f35315075314de804fce651bfb6428d","weight":"600","style":"","subgroupName":"Didot Headline"},"2087d09f35315075314de804fce651b9bc4380":{"typekitKey":"n7","name":"Bold","lookupKey":"2087d09f35315075314de804fce651b9bc4380","weight":"700","style":"","subgroupName":"Didot Headline"},"229bc085337038400404c908f6ea0996":{"typekitKey":"n5","name":"Medium","lookupKey":"229bc085337038400404c908f6ea0996","weight":"500","subgroupName":"Futura PT"},"229bc085337038400404cc08f3f505":{"typekitKey":"n7","name":"Heavy","lookupKey":"229bc085337038400404cc08f3f505","weight":"700","style":"","subgroupName":"Futura PT"},"288fc09f6c5d7177385d":{"typekitKey":"n3","name":"Light","lookupKey":"288fc09f6c5d7177385d","weight":"300","subgroupName":"Lato"},"288fc09f6c437d772545e51f":{"typekitKey":"n4","name":"Regular","lookupKey":"288fc09f6c437d772545e51f","weight":"400","subgroupName":"Lato"},"288fc09f6c586c713c40e7":{"typekitKey":"i4","name":"Italic","lookupKey":"288fc09f6c586c713c40e7","weight":"400","style":"italic","subgroupName":"Lato"},"288fc09f6c53777c34":{"typekitKey":"n7","name":"Bold","lookupKey":"288fc09f6c53777c34","weight":"700","subgroupName":"Lato"},"288fc09f6c5374713342a424e6e21092b0":{"typekitKey":"i9","name":"Black Italic","lookupKey":"288fc09f6c5374713342a424e6e21092b0","weight":"900","style":"italic","subgroupName":"Lato"},"2881d7912d315a62355ee11febae3e94bf4b":{"typekitKey":"n7","name":"Bold","lookupKey":"2881d7912d315a62355ee11febae3e94bf4b","weight":"700","style":"","subgroupName":"Local Brewery"},"2881d7912d315a62355ee11feba33a94a65dc986d5e0c86875bb":{"typekitKey":"n4","name":"Regular","lookupKey":"2881d7912d315a62355ee11feba33a94a65dc986d5e0c86875bb","weight":"400","subgroupName":"Local Brewery Four"},"28baf7d0037e7c7f3e40a45ca5b651a9b64891b8d1f5":{"typekitKey":"n4","name":"Regular","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"LTC Bodoni 175"},"28baf7d0037e7c7f3e40a45ca5b651b2a74e88bdd3":{"typekitKey":"i4","name":"Italic","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651b2a74e88bdd3","weight":"400","style":"italic","subgroupName":"LTC Bodoni 175"},"299bc7952e314b713e5aa43ffdf6129fb64bc9e180b7":{"typekitKey":"n5","name":"500","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e180b7","weight":"500","style":"","subgroupName":"Museo Sans Rounded"},"299bc7952e314b713e5aa43ffdf6129fb64bc9e380b7":{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e380b7","weight":"700","style":"","subgroupName":"Museo Sans Rounded"},"299bc7952e314b7c314ba95ea2b3":{"typekitKey":"n3","name":"300","lookupKey":"299bc7952e314b7c314ba95ea2b3","weight":"300","style":"","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95ea2b35cb2a74e88bdd3":{"typekitKey":"i3","name":"300 Italic","lookupKey":"299bc7952e314b7c314ba95ea2b35cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95aa2b3":{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b7c314ba95aa2b3","weight":"700","style":"","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95aa2b35cb2a74e88bdd3":{"typekitKey":"i7","name":"700 Italic","lookupKey":"299bc7952e314b7c314ba95aa2b35cb2a74e88bdd3","weight":"700","style":"italic","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95ca2b34c":{"typekitKey":"n9","name":"1000","lookupKey":"299bc7952e314b7c314ba95ca2b34c","weight":"900","style":"","subgroupName":"Museo Slab"},"349cdb88287c79301e46f20cbfd71492bd":{"typekitKey":"n1","name":"Thin","lookupKey":"349cdb88287c79301e46f20cbfd71492bd","weight":"100","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd71492bd0fada0d1ebd467":{"typekitKey":"i1","name":"Thin Italic","lookupKey":"349cdb88287c79301e46f20cbfd71492bd0fada0d1ebd467","weight":"100","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfcf159cbb5b":{"typekitKey":"n3","name":"Light","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5b","weight":"300","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfcf159cbb5bc49dc4e6d16d77":{"typekitKey":"i3","name":"Light Italic","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5bc49dc4e6d16d77","weight":"300","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd1199ca64385a6":{"typekitKey":"n4","name":"Regular","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a6","weight":"400","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056":{"typekitKey":"i4","name":"Regular Italic","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056","weight":"400","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfce199fba5a89":{"typekitKey":"n5","name":"Medium","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89","weight":"500","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfce199fba5a89f4f9f3dc687daa":{"typekitKey":"i5","name":"Medium Italic","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89f4f9f3dc687daa","weight":"500","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4":{"typekitKey":"n6","name":"Semibold","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4","weight":"600","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4a7f47075a55c75":{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4a7f47075a55c75","weight":"600","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc11397b7":{"typekitKey":"n7","name":"Bold","lookupKey":"349cdb88287c79301e46f20cbfc11397b7","weight":"700","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467","weight":"700","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc6048fa14e86bbdce3":{"typekitKey":"n8","name":"Extrabold","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce3","weight":"800","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc6048fa14e86bbdce39d4d60a8597f9d":{"typekitKey":"i8","name":"Extrabold Italic","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce39d4d60a8597f9d","weight":"800","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc1109ab044":{"typekitKey":"n9","name":"Black","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044","weight":"900","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc1109ab044c49dc4e6d16d77":{"typekitKey":"i9","name":"Black Italic","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044c49dc4e6d16d77","weight":"900","style":"italic","subgroupName":"Proxima Nova"},"34ba94a3207f6b3d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b3d024ce318fee20e","weight":"400","style":"","subgroupName":"PT Sans"},"34ba94a3207f6b3d195de501fbe0":{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3207f6b3d195de501fbe0","weight":"400","style":"italic","subgroupName":"PT Sans"},"34ba94a3207f6b3d1246e809":{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b3d1246e809","weight":"700","style":"","subgroupName":"PT Sans"},"34ba94a3207f6b3d1246e809b2ca089abf4687":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3207f6b3d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"PT Sans"},"34ba94a3207f6b301e48f61ffdf451a9b64891b8d1f5":{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b301e48f61ffdf451a9b64891b8d1f5","weight":"400","style":"","subgroupName":"PT Sans Narrow"},"34ba94a3207f6b301e48f61ffdf451b9bc4380":{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b301e48f61ffdf451b9bc4380","weight":"700","style":"","subgroupName":"PT Sans Narrow"},"34ba94a3246371767d7be10ae7ef1d89":{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3246371767d7be10ae7ef1d89","weight":"400","style":"","subgroupName":"PT Serif"},"34ba94a3246371767d60f00cfeea1f":{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3246371767d60f00cfeea1f","weight":"400","style":"italic","subgroupName":"PT Serif"},"34ba94a3246371767d6beb01f6":{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3246371767d6beb01f6","weight":"700","style":"","subgroupName":"PT Serif"},"34ba94a3246371767d6beb01f6a3358fb2438db7":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3246371767d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"PT Serif"},"3281d88420767d3d1c40e305e6":{"typekitKey":"n3","name":"Light","lookupKey":"3281d88420767d3d1c40e305e6","weight":"300","style":"","subgroupName":"Voltage"},"3281d88420767d3d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"3281d88420767d3d024ce318fee20e","weight":"400","style":"","subgroupName":"Voltage"},"3281d88420767d3d1246e809":{"typekitKey":"n7","name":"Bold","lookupKey":"3281d88420767d3d1246e809","weight":"700","style":"","subgroupName":"Voltage"},"338fda9424637465235da43efaea129efe7d81b3c5ebdc76":{"typekitKey":"n4","name":"Regular","lookupKey":"338fda9424637465235da43efaea129efe7d81b3c5ebdc76","weight":"400","subgroupName":"Wanderlust Shine"},"368fd8953670613d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"368fd8953670613d024ce318fee20e","weight":"400","subgroupName":"Raleway"},"368fd8953670613d184ce51beb":{"typekitKey":"n9","name":"Heavy","lookupKey":"368fd8953670613d184ce51beb","weight":"900","subgroupName":"Raleway"}}}')},function(e,t,n){var i,r;i=[n(1),n(0),n(345),n(402),n(2),n(8),n(3),n(64),n(7),n(414),n(297),n(4),n(106)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u,h){"use strict";function p(e,t,n){this._init(e,t,n)}return e.extend(p.prototype,d.prototype,{_init:function(t,n,i){this._options={},this._isFlickrAllowed=!1,this._isFlickrEnabled=!1,this._isBingAllowed=!1,this._switchedIntoBing=!1,e.extend(this._options,{image_filter:i.imageFilter.extensionsWithoutDot.concat(i.imageFilter.types),imageFilter:i.imageFilter,startPage:i.startPage},i),d.prototype._init.call(this,t,n),this._isBound||(this._isBound=!0,this._handleResize=this._handleResize.bind(this),this._handleSearchTextChange=this._handleSearchTextChange.bind(this),this._handleDooploSearch=this._handleDooploSearch.bind(this),this._handleSearchTextKeyDown=this._handleSearchTextKeyDown.bind(this),this._handleScroll=this._handleScroll.bind(this),this._handleSearchTextFocus=this._handleSearchTextFocus.bind(this),this.clearFilterSettingsOnEditorLoad=this.clearFilterSettingsOnEditorLoad.bind(this)),this.results$=this.$ele.find("#results-without-bing"),this._registerEvents(),this.setupSearchDropdown()},_registerEvents:function(){if(!this._eventsRegistered){var t=this.$ele.find(".dooploSearchEntry .search-text");t.on("focus",this._handleSearchTextFocus),t.on("input",this._handleSearchTextChange),t.on("keydown",this._handleSearchTextKeyDown),this.$ele.find(".results").on("scroll",this._handleScroll),this.$ele.find(".execute-search-button").on("vclick",this._handleDooploSearch),e(window).on("resize",this._handleResize),this._eventsRegistered=!0}},_deregisterEvents:function(){if(this._eventsRegistered){var t=this.$ele.find(".dooploSearchEntry .search-text");t.off("input",this._handleSearchTextChange),t.off("keydown",this._handleSearchTextKeyDown),this.$ele.find(".results").off("scroll",this._handleScroll),this.$ele.find(".execute-search-button").off("vclick",this._handleDooploSearch),e(window).off("resize",this._handleResize),this._eventsRegistered=!1}},handleChangingToEditor:function(e){this._registerEvents(),window.marvel.features.hasFeature("dooplo-service-persistant-filters")||this.clearFilterSettingsOnEditorLoad()},handleChangingFromEditor:function(e){this._deregisterEvents()},_needsTitleWorkaround:function(e){return"Unsplash"===e.data.source.name&&"untitled image"===e.data.title},_comesFromBing:function(e){return"bing"===e.data.source.name},_handleThumbClick:function(t){var n=e(t.target).data("item");this.$ele.find(".results .selected").removeClass("selected"),e(t.target).parent().addClass("selected"),this._needsTitleWorkaround(n)?c.getAssetInfo(n.data.id).then(function(e){e.title&&(n.data.title=e.title),this._userCallback(n)}.bind(this),function(e){this._userCallback(n)}.bind(this)):(this._comesFromBing(n)&&(n.data.owner={name:"Unknown"}),this._userCallback(n))},_getComboSourcesString:function(e){var n="";if((e=t.compact(e)).length&&(n=e[0],e.length>1))if(2===e.length)n+=" & "+e[1];else{for(var i=1;i<e.length-1;i++)n+=", "+e[i];n+=", & "+e[e.length-1]}return n},_getAllowedSourcesForCurrentAssetType:function(){var e,t=[];if(u.ignoreDooploSourceTypes||this._options.dooploSourceTypes&&this._options.dooploSourceTypes.length>0&&(t=this._options.dooploSourceTypes),this._options.assetType&&"vector"===this._options.assetType)e=["The Noun Project"];else{var n=s.getProfile().filterDooploBitmapServicesForUser(t,this._connectedApp);this._isFlickrAllowed=-1!==n.show.indexOf("flickr")&&-1===n.blocked.indexOf("flickr"),this._isFlickrEnabled=-1!==n.enabled.indexOf("flickr"),this._isBingAllowed=-1!==n.show.indexOf("bing"),e=n.enabled}return e||[]},_isVectorOnly:function(){return this._options.assetType&&"vector"===this._options.assetType||!1},_useBingOnly:function(){var e=s.getProfile().getSetting("show-user-flag-image-source-dooplo-bing"),n=this._getCurrentSearchSettings().sourceFilters,i=t.filter(n,{isSelected:!0}),r=n.bing&&n.bing.isSelected&&1===i.length,o=this._isVectorOnly(),a=this.page>2||this.resultsTotal>0&&this.resultsTotal<50;return!o&&(r||a&&e&&this._isBingAllowed)},_switchToBing:function(){this._switchedIntoBing=!0,this.results$=this.$ele.find("#results-bing-only"),this._sendAnalyticsEvent("bingSearchResultsShown"),this._makeDooploRequest(this.subject,1,this.results$,["bing"])},_setHintTextForFilters:function(){var e,n=this._getAllowedSourcesForCurrentAssetType(),i=this._getCurrentSearchSettings().sourceFilters,r=[],a=0;t.each(n,(function(e){var t=i[e];if(!t||t.isSelected){var n=c.SOURCE_CREDIT_INFOS[e.toLowerCase()];r[n.creditOrderIndex]=n.sourcesName,a++}})),e=1==a||a!==n.length?o.formatMessage("imagepicker-search",{imageSources:this._getComboSourcesString(r)}):o.getString("imagepicker-allphotos-search"),this.$ele.find(".dooploSearchEntry .search-text-hint").text(e)},_handleSearchTextFocus:function(){this.$ele.parents().scrollLeft(0)},_handleSearchTextChange:function(e){var t=this.$ele.find(".dooploSearchEntry .search-text").val(),n=this.$ele.find(".dooploSearchEntry .search-text-hint");n.removeClass("showing"),t&&0!==t.length||n.addClass("showing")},_handleSearchTextKeyDown:function(e){if(13===e.keyCode)this._handleDooploSearch();else if(27===e.keyCode){var t=this.$ele.find(".dooploSearchEntry .search-text");return setTimeout(function(){t.val(""),this._handleDooploSearch(),this._handleSearchTextChange()}.bind(this),0),e.stopPropagation(),0}},searchNextSet:function(){this._switchedIntoBing||!this._useBingOnly()?this.request.searchNextSet():this._switchToBing()},updateInfoMessage:function(){var e=this.results$.find(".left"),t=this.$ele.find(".search-text").val();e.children().length||t.length?this.showInfoMessage(!1):this.showInfoMessage(!0)},showInfoMessage:function(e){var t=this.$ele.find(".search-info");e?t.removeClass("hide"):t.addClass("hide")},showImageSourcesMessage:function(e,n){var i;if((i=(n=n||this.results$).find(".search-sources")).length){var r=[];if(t.each(e,(function(e){var t,n=e.source;n&&n.sourcesName&&(t=n.link?'<a class="search-source-link" target="_blank" href="'+n.link+'">'+n.sourcesName+"</a>":n.sourcesName,r[n.creditOrderIndex]=t)})),(r=t.compact(r)).length){var a=o.formatMessage("imagepicker-search-has-results",{imageSources:this._getComboSourcesString(r)});i.removeClass("hide"),i.html(a)}else i.addClass("hide")}},getEnabledSearchSources:function(){var e=this._getAllowedSourcesForCurrentAssetType(),n=this._getCurrentSearchSettings().sourceFilters,i=t.filter(e,(function(e){var t=n[e];return!t||t.isSelected}));return i=this._useBingOnly()?["bing"]:t.pull(i,"bing")},clearFilterSettingsOnEditorLoad:function(){this.setupSearchDropdown(),this._cachedDooploSearchSettings=null},_saveCurrentSearchSettings:function(e){if(window.marvel.features.hasFeature("dooplo-service-persistant-filters")&&(window._cachedDooploSearchSettings=e,window.localStorage))try{window.localStorage.setItem("spark-dooplo-user-settings",JSON.stringify(e))}catch(e){window.marvel.logger.warn("could not save search settings",e)}this._cachedDooploSearchSettings=e},_getCurrentSearchSettings:function(){if(!this._cachedDooploSearchSettings)if(window.marvel.features.hasFeature("dooplo-service-persistant-filters")){if(!window._cachedDooploSearchSettings){var e;if(window.localStorage){var t=window.localStorage.getItem("spark-dooplo-user-settings");if(t)try{e=JSON.parse(t)}catch(e){window.marvel.logger.error("error parsing cached dooplo settings:"+e,{settingsString:t})}}window._cachedDooploSearchSettings=e||{sourceFilters:{}}}this._cachedDooploSearchSettings=window._cachedDooploSearchSettings}else this._cachedDooploSearchSettings={sourceFilters:{}};return this._cachedDooploSearchSettings},searchDropdownOnChangeCallback:function(e,n){var i=this._getCurrentSearchSettings(),r=i.sourceFilters,o=!n.length||n.length&&"all"===n[0];t.each(this.filteredSourcesFromUserSettings,function(e){var t=r[e];t||(t={},r[e]=t),t.isSelected=o||-1!==n.indexOf(e)}.bind(this)),this._saveCurrentSearchSettings(i),this._setHintTextForFilters(),""!==this.getSearchText()&&this._handleDooploSearch()},setupSearchDropdown:function(){if(this.filteredSourcesFromUserSettings=this._getAllowedSourcesForCurrentAssetType(),!(this.filteredSourcesFromUserSettings.length<2)){var e=this._getCurrentSearchSettings().sourceFilters;if(!this.searchDropdown){var n={onchangeCallback:this.searchDropdownOnChangeCallback.bind(this),multiple:!1,widthSetByStyle:!0,elemHeightSetByStyle:!0,checkmarkStyle:"use-radio",buttonDisplayControlledByCaller:!0,alignTarget$:this.$ele.find(".dooplo-search-dropdown-aligner"),analytics:{dropdownName:"dooploSearch",pageName:l.getProductName()+":editor"},dropdownShowingCallback:function(e){var t=this.$ele.find(".dooploSearchEntry .search-text-wrapper");e?(t.addClass("showing-dropdown"),t.one("click.sharetextdropdownclose",function(e){this.searchDropdown.closeAndApply()}.bind(this))):(t.removeClass("showing-dropdown"),t.off("click.sharetextdropdownclose"))}.bind(this)};this.searchDropdown=new h(this.$ele.find(".dooplo-search-dropdown"),n,this)}var i=[],r=0,o={};if(t.each(this.filteredSourcesFromUserSettings,function(t){var n=t.toLowerCase(),a=c.SOURCE_CREDIT_INFOS[n],s=(e[t],"unsplash"===n);s&&r++;var l={name:a.sourcesName,id:t,isSelected:s};i.push(l),o[n]={isSelected:s},s&&l}.bind(this)),r===this.filteredSourcesFromUserSettings.length){i[0].isSelected=!0;for(var a=1;a<i.length;a++)i[a].isSelected=!1}var s=t.sortBy(i,["name"]);this.searchDropdown.renderItems(s,"unsplash"),this._saveCurrentSearchSettings({sourceFilters:o}),this._setHintTextForFilters()}},show:function(e){this.$ele.find(".search-failure").addClass("hide"),d.prototype.show.call(this);window.setTimeout(function(){var t=this.$ele.find(".dooploSearchEntry .search-text");this.updateInfoMessage(),t.focus(),this.$ele.parents().scrollLeft(0),e&&e!=this.getSearchText()?(this.$ele.find(".dooploSearchEntry .search-text-hint").removeClass("showing"),t.val(e),this._handleDooploSearch()):this.getSearchText()?this.$ele.find(".dooploSearchEntry .search-text-hint").removeClass("showing"):this.$ele.find(".dooploSearchEntry .search-text-hint").addClass("showing"),this.searchDropdown&&this.searchDropdown.setValue(this.searchDropdown.selectedItem.id)}.bind(this),500)},_makeDooploRequest:function(e,t,i,r){i=i||this.$ele.find("#results-without-bing"),this.preloadPagesWhenLoaderEmpty=!1,this.$ele.find(".search-failure").addClass("hide"),this.$ele.find(".results .flickr-more-results").addClass("hide"),this.$ele.find(".results .pixabay-more-results").addClass("hide"),this.loader?(this.loader.stop(),this.loader.clearQueue(),this.hideMoreToCome()):(this.loader=new n({numAsyncRequestsAllowed:20,crossOrigin:!!this._options.crossOriginThumbnails&&"anonymous"}),this.loader.bind("wp-image-loader-empty",function(e){this.requestOutstanding=!1,this.preloadPagesWhenLoaderEmpty&&this._scrolledFarEnough()&&this.hasMore()&&(this.requestOutstanding=!0,this.showMoreToCome(),this.searchNextSet()),this.requestOutstanding?this._isFlickrAllowed&&!this._isFlickrEnabled?(this.$ele.find(".results .flickr-more-results").removeClass("hide"),this._sendAnalyticsEvent("dooploSearchSuggestFlickrMoreResultsShown")):1===this._currentSourceFilters.length&&"unsplash"===this._currentSourceFilters[0]&&this.$ele.find(".results .pixabay-more-results").removeClass("hide"):this.hideMoreToCome()}.bind(this))),this.preloadPagesWhenLoaderEmpty=!0;var o=this.request;o.resultsTarget$=i,this.requestOutstanding=!0,t=t||1,this.subject=e;var a={query:e,page:t,success:this._handleRequestSuccess.bind(this),error:function(e,t,n){this.hideMoreToCome(),this._sendAnalyticsEvent("dooploSearchErroredOut"),console.log("REQUEST ERROR on Search for Photos in Dooplo:",n),console.log("XHR text for Dooplo error is:",JSON.stringify(e)),this.$ele.find(".search-progress").addClass("hide"),this.$ele.find(".search-failure").removeClass("hide"),this.$ele.find(".search-failure .error-msg").text(e.responseJSON&&e.responseJSON.message?e.responseJSON.message:"unknown")}.bind(this)};this._options.assetType&&"vector"===this._options.assetType?(a.asset_type=this._options.assetType,a.image_min_width=0):(a.image_filter=this._options.image_filter,a.imageFilter=this._options.imageFilter),this._options.itemsPerPage&&(a.size=this._options.itemsPerPage),this._options.startPage&&(a.startPage=this._options.startPage);var s=r||this.getEnabledSearchSources();a.source=s,this._currentSourcesResults={},this._currentSourceFilters=s,this._currentSearchTerm=e,o.search(a)},_handleRequestSuccess:function(e,t,n){var i=this.request.resultsTarget$,r="vector"!==this._options.assetType,o=!!this._options.crossOriginThumbnails;if(i.removeClass("hide"),i.find(".privacy-sources").removeClass("hide"),i.find(".no-results").addClass("hide"),this.$ele.find(".search-progress").addClass("hide"),this.showMoreToCome(),this.page=e.data.page,this.resultsTotal=e.data.total,e.getLength()){var a,s=e.at(0);for(a=0;a<e.getLength();a++){if(s=e.at(a),this.items.push(s),s.data.title=s.data.title||"untitled image",this._currentSourcesResults){var l=s.data.source.name.toLowerCase(),d=s.data.sourceLabel=c.SOURCE_CREDIT_INFOS[l];d&&(this._currentSourcesResults[l]?this._currentSourcesResults[l].numImages++:this._currentSourcesResults[l]={source:d,numImages:1})}this._addThumbnail(s.getThumbURL(),i,s,s.getAspect(),r,o)}this.loader.start(),this.showImageSourcesMessage(this._currentSourcesResults,i),this._sendAnalyticsEvent("dooploSearchResultsShown")}else{var u=this.getSearchText(),h=!1;if(this.hideMoreToCome(),1===this._currentSourceFilters.length&&"unsplash"===this._currentSourceFilters[0]&&(h=!0),this._isBingAllowed&&!this._switchedIntoBing&&u)return 0===this.items.length&&this.$ele.find("#results-without-bing").addClass("hide"),this.request=new c,void this._switchToBing();this.request.getLength()||(this._isVectorOnly()?this.$ele.find(".no-results").removeClass("hide"):(this.$ele.find(".no-results").addClass("hide"),this.$ele.find("#results-bing-only").addClass("hide"),this.$ele.find(".privacy-sources").addClass("hide"),this._isFlickrAllowed&&!this._isFlickrEnabled?(this.$ele.find(".no-results-suggest-flickr").removeClass("hide"),this._sendAnalyticsEvent("dooploSearchSuggestAddingFlickrShown")):h?this.$ele.find(".no-results-suggest-pixabay").removeClass("hide"):this.$ele.find(".no-results-no-suggest-flickr").removeClass("hide")),this.showInfoMessage(!1),this._sendAnalyticsEvent("dooploSearchReturnedZeroResults"))}},hasMore:function(){return this.request&&!this.request.reachedEnd()},getSearchText:function(){return this.$ele.find(".search-text").val()},_sendAnalyticsEvent:function(e){var t=l.getProductName()+":editor",n={searchTerm:this._currentSearchTerm||"",filter:this._currentSourceFilters||""};l.trackEvent(e,n,t)},_handleDooploSearch:function(){var e,t=this.$ele.find(".search-text").val(),n=o.formatMessage("imagepicker-searching-for-subject",{subject:t});return this.loader&&(this.loader.stop(),this.loader.clearQueue()),this.request=new c,this._switchedIntoBing=!1,this.page=this._options.startPage||1,this.resultsTotal=0,this._clear(),this.count=0,t.length&&(this.$ele.find(".search-progress").removeClass("hide"),this.$ele.find(".search-progress .content").text(n)),this.$ele.find(".no-results").addClass("hide"),this.$ele.find("#results-bing-only").addClass("hide"),this.$ele.find("#results-without-bing").addClass("hide"),this.showImageSourcesMessage(),t?(e=this._useBingOnly()?this.$ele.find("#results-bing-only"):this._options.assetType&&"vector"===this._options.assetType?this.$ele.find(".results"):this.$ele.find("#results-without-bing"),this.showInfoMessage(!1),this._makeDooploRequest(t,this.page,e)):this.hideMoreToCome(),!1},_scrolledFarEnough:function(){var e=this.$ele.find(".results"),t=e[0].scrollTop,n=!1;return 2*e.height()+t>e[0].scrollHeight&&(n=!0),n},showMoreToCome:function(){this.request.result&&this.$rootPicker.find(".more-to-come").addClass("showing")}}),p}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(296),n(518)],void 0===(r=function(e,t,n){var i={inherit:function(t,n,i){var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t,t.prototype._super=n,i&&e.extend(t.prototype,i)},ensureArray:function(){var t=[],n=arguments.length;return n>0&&(t=n>1||!e.isArray(arguments[0])?e.map(arguments,(function(e){return e})):arguments[0]),t},scopedFind:function(t,n,i,r){var o=" "+i+" ",a=[],s=e(t).find(n),l=s.length;r=e(r)[0];for(var c=0;c<l;c++)for(var d=s[c],u=d;u;){if(u.className&&-1!==(" "+u.className+" ").indexOf(o)){u===r&&a.push(d);break}u=u.parentNode}return e(a)},getDocumentOffset:function(t){var n=0,i=0;if(t=e(t)[0]){var r=t.offsetParent;for(n=t.offsetLeft,i=t.offsetTop;t;)t===r&&(n+=t.offsetLeft,i+=t.offsetTop,r=t.offsetParent),n-=t.scrollLeft||0,i-=t.scrollTop||0,t=t.parentNode}return{left:n,top:i}},getAlignmentAdjustment:function(e,t,n){var i=0;switch(e){case"left":case"top":i=0;break;case"right":case"bottom":i=t-n;break;case"center":default:i=(t-n)/2}return i},positionElementAroundAnother:function(t,n,i){i=e.extend({position:"right",positionOffset:0,align:"center",alignOffset:0},i);var r=e(t),o=e(n),a=o.offsetParent();o.removeClass("above below left right");var s=r.offset(),l=r.outerWidth(),c=r.outerHeight(),d=a.offset(),u=o.outerWidth(),h=o.outerHeight(),p=i.positionOffset,f=i.align,g=i.alignOffset,m=s.left-d.left,v=s.top-d.top;switch(i.position){case"above":m=m+this.getAlignmentAdjustment(f,l,u)+g,v=v-h-p;break;case"below":m=m+this.getAlignmentAdjustment(f,l,u)+g,v=v+c+p;break;case"left":m=m-u-p,v=v+this.getAlignmentAdjustment(f,c,h)+g;break;case"right":default:m=m+l+p,v=v+this.getAlignmentAdjustment(f,c,h)+g}return{x:m,y:v}},positionElementInsideAnother:function(t,n,i,r){var o=e(t),a=e(n),s=a.offsetParent(),l=o.offset(),c=s.offset(),d=l.left-c.left,u=l.top-c.top;switch(i){case"left":case"center":case"right":i=d+this.getAlignmentAdjustment(i,o.outerWidth(),a.outerWidth());break;default:i=i||0}switch(r){case"top":case"center":case"bottom":r=u+this.getAlignmentAdjustment(r,o.outerHeight(),a.outerHeight());break;default:r=r||0}return{x:i,y:r}},calcTotalWidthOfObjects:function(t){var n=0;for(var i in t)n+=e(t[i]).outerWidth();return n},setElementTransform:function(t,i){e(t).css(n.vendorPrefix+"transform",i)},instantTransform:function(t,n,i){var r=e(t);r.addClass(i),this.setElementTransform(t,n),setTimeout((function(){r.removeClass(i)}),0)},parseQueryParams:function(e){var t=/([^\?#]+)?(\?([^#]*))?(#.*)?/.exec(e||""),n={};if(t&&t[3])for(var i=t[3].split("&"),r=0;r<i.length;r++){var o=(i[r]||"").split("=");n[decodeURIComponent(o[0]||"")]=decodeURIComponent(o[1]||"")}return n},serializeQueryParams:function(e){var t="";if(e)for(var n in e)t&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t},setQueryParams:function(e,t){var n=this.serializeQueryParams(t);return n=(n?"?":"")+n,e.replace(/([^\?#]+)?(\?[^#]*)?(#.*)?/,"$1"+n+"$3")},setQueryParam:function(e,t,n){if(t){var i=this.parseQueryParams(e);return i[t]=n,this.setQueryParams(e,i)}return e}};return t.Utils=i,e.extend(t,i),i}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(296)],void 0===(r=function(e){window.navigator.userAgent;e.isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,e.isFirefox="undefined"!=typeof InstallTrigger,e.isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),e.isIE=!!document.documentMode,e.isEdge=!e.isIE&&!!window.StyleMedia,e.isMSEdge=e.isEdge,e.isChrome=!!window.chrome&&!window.opera&&!e.isMSEdge,e.isBlink=(e.isChrome||e.isOpera)&&!!window.CSS,e.supportsAddEventListenerOptions=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e.supportsAddEventListenerOptions=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e.supportsAddEventListenerOptions=!1}e.supportsPassiveEventListeners=e.supportsAddEventListenerOptions,e.touchEventsEnabled="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,e.pointerEventsEnabled=window.PointerEvent||window.navigator.pointerEnabled,e.msPointerEventsEnabled=window.navigator.msPointerEnabled,e.supportsMozInputSource=e.isFirefox&&!e.touchEventsEnabled&&window.MouseEvent&&window.MouseEvent.MOZ_SOURCE_MOUSE,e.touchEnabled=e.touchEventsEnabled||e.msPointerEventsEnabled||e.pointerEventsEnabled||e.supportsMozInputSource;var n="";if(window.getComputedStyle){var i=window.getComputedStyle(document.documentElement,"");"-moz-"===(n=(Array.prototype.slice.call(i).join("").match(/(-moz-|-webkit-|-ms-)/)||""===i.OLink&&["","o"])[1])&&(n="")}return e.vendorPrefix=n||"",e}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(296)],void 0===(r=function(e,t){var n=function(){};return e.extend(n.prototype,{bind:function(t,n,i){return e(this).on(t,n,i)},unbind:function(t,n){return e(this).off(t,n)},on:function(t,n,i){return e(this).on(t,n,i)},off:function(t,n){return e(this).off(t,n)},trigger:function(t,n){var i=e.Event(t);return e(this).trigger(i,n),i}}),t.EventDispatcher=n,n}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(345),n(8),n(100),n(6),n(297),n(4)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c){"use strict";function d(e,t,n){this._init(e,t,n)}return d.licenseInfoFromData=function(e,t){var n=t||e.is_licensed||e.license;return{title:e.title,owner:{name:e.creator_name},source:{name:"Adobe Stock",url:""},license:{short_name:n?{standard:"royalty_free_standard",extended:"royalty_free_extended",royalty_free_extended:"royalty_free_extended",royalty_free_standard:"royalty_free_standard",royalty_free:"royalty_free"}[n.toLowerCase()]:"royalty_free"},image_id:e.id}},e.extend(d.prototype,l.prototype,{_init:function(t,n,i){this._options={},e.extend(this._options,{image_filter:["jpg","jpeg","png","image/jpeg","image/png"]},i),l.prototype._init.call(this,t,n);var r=this.$ele.find(".stockSearchEntry .search-text");r.on("input",this._handleSearchTextChange.bind(this)),r.on("keydown",this._handleSearchTextKeyDown.bind(this)),this.$ele.find(".results").on("scroll",this._handleScroll.bind(this)),e(window).on("resize",this._handleResize.bind(this)),this.$ele.find(".execute-search-button").on("vclick",this._handleAdobeStockSearch.bind(this)),this.$ele.find(".stockShowSearchButton").on("vclick",this._handleShowSearchButton.bind(this)),this.$ele.find(".stockShowLicenseHistoryButton").on("vclick",this._handleShowLicenseHistoryButton.bind(this))},_handleThumbClick:function(t){var n=e(t.target).data("item"),i=this,r=n.data.id;this.$ele.find(".results .selected").removeClass("selected"),e(t.target).parent().addClass("selected");var o=a.apiHost+a.itemLicensePath,l={content_id:r};n.licenseInfo=d.licenseInfoFromData(n.data,n.is_licensed),n.is_licensed&&!n.links.licensed?s.ajax({url:o,data:l,beforeSend:function(e){return e.setRequestHeader("X-api-key",s.apiKey),e.setRequestHeader("X-Product",s.apiKey),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done((function(e,t,o){var a=e.contents[r];n.links.licensed=a.purchase_details,i._userCallback(n)})).fail(function(){}.bind(this)):this._userCallback(n)},_handleSearchTextChange:function(e){var t=this.$ele.find(".stockSearchEntry .search-text").val(),n=this.$ele.find(".stockSearchEntry .search-text-hint");n.removeClass("showing"),t&&0!==t.length||n.addClass("showing")},_handleSearchTextKeyDown:function(e){if(13===e.keyCode)this._handleAdobeStockSearch(),e.stopPropagation();else if(27===e.keyCode){var t=this.$ele.find(".stockSearchEntry .search-text");return setTimeout(function(){t.val(""),this._handleAdobeStockSearch(),this._handleSearchTextChange()}.bind(this),0),e.stopPropagation(),0}},searchNextSet:function(){this.request.searchNextSet()},updateInfoMessage:function(){var e=this.$ele.find(".results").find(".left");this.$ele.find(".search-info");e.children().length?this.showInfoMessage(!1):this.showInfoMessage(!0)},showInfoMessage:function(e){var t=this.$ele.find(".search-info");e?(t.removeClass("hide"),this.$ele.find(".stockLicenses").addClass("fromNoSearch")):(t.addClass("hide"),this.$ele.find(".stockLicenses").removeClass("fromNoSearch"))},_lastRequestType:function(){return a.getRequestType(this.request)},show:function(e){var t,n=this._lastRequestType(),i=this._currentType||this._lastRequestType();if(this.$ele.find(".search-failure").addClass("hide"),l.prototype.show.call(this),e===a.licenseHistorySearchQuery?t=!0:e||"history"!==i||(t=!0),t)return this._updateLicenseCount(),this.updateInfoMessage(),void this._setShowTypeTab("history",{triggerSearch:a.licenseHistorySearchQuery});window.setTimeout(function(){this._updateLicenseCount();var t,r=this.$ele.find(".stockSearchEntry .search-text");if(this.updateInfoMessage(),r.focus(),e)t="history"===i?e:e!==this._getSearchText()&&e,this.$ele.find(".stockSearchEntry .search-text-hint").removeClass("showing"),r.val(e),this._setShowTypeTab("search",{triggerSearch:t});else{var o={};this._getSearchText()?this.$ele.find(".stockSearchEntry .search-text-hint").removeClass("showing"):this.$ele.find(".stockSearchEntry .search-text-hint").addClass("showing"),o.triggerSearch="history"===n||"search"===n&&this._lastRequestSubject!==this._getSearchText(),this._setShowTypeTab("search",o)}}.bind(this),500)},_updateLicenseCount:function(){var e=a.apiHost+a.profilePath,t=this;this.$ele.find(".stockLicenses").addClass("calculating"),s.ajax({url:e,beforeSend:function(e){return e.setRequestHeader("X-api-key",s.apiKey),e.setRequestHeader("X-Product",s.apiKey),e.setRequestHeader("X-Product-Location","search"),!0},dataType:"json",traditional:!0}).done((function(e,n,i){var r=t.$ele.find(".stockLicenses").removeClass("calculating");if(e.purchase_options.requires_checkout||"not_possible"===e.purchase_options.state)r.addClass("noAccount");else{var o=e.available_entitlement?e.available_entitlement.quota:0;r.find(".count").text(o),r.removeClass("noAccount")}})).fail(function(){}.bind(this))},_makeAdobeStockRequest:function(e,t){this.preloadPagesWhenLoaderEmpty=!1,this.$ele.find(".search-failure").addClass("hide"),this._lastRequestSubject=e,this.loader?(this.loader.stop(),this.loader.clearQueue(),this.hideMoreToCome()):(this.loader=new r({numAsyncRequestsAllowed:20,crossOrigin:!!this._options.crossOriginThumbnails&&"anonymous"}),this.loader.bind("wp-image-loader-empty",function(e){this.requestOutstanding=!1,this.preloadPagesWhenLoaderEmpty&&this._scrolledFarEnough()&&this.hasMore()&&(this.requestOutstanding=!0,this.showMoreToCome(),this.searchNextSet()),this.requestOutstanding||this.hideMoreToCome()}.bind(this))),this.preloadPagesWhenLoaderEmpty=!0;var n=this.request;this.requestOutstanding=!0,t=t||1,this.subject=e;var i={query:e,page:t,success:this._handleRequestSuccess.bind(this,n),error:function(e,t,i){this.request===n&&(this.hideMoreToCome(),console.log("REQUEST ERROR on Search for Photos in AdobeStock:",i),console.log("XHR text for AdobeStock error is:",JSON.stringify(e)),this.$ele.find(".search-progress").addClass("hide"),this.$ele.find(".search-failure").removeClass("hide"),this.$ele.find(".search-failure .error-msg").text(e.responseJSON&&e.responseJSON.message?e.responseJSON.message:"unknown"))}.bind(this)};this._options.assetType&&"vector"===this._options.assetType?(i.asset_type=this._options.assetType,i.image_min_width=0):i.image_filter=this._options.image_filter,this._options.itemsPerPage&&(i.size=this._options.itemsPerPage),i.blockUnlicensedPremium=marvel.features.hasFeature("stock-picker-block-unlicensed-premium"),n.search(i)},_handleRequestSuccess:function(e,t,n,i){if(this.request===e){var r=this.$ele.find(".results"),o="vector"!==this._options.assetType,a=!!this._options.crossOriginThumbnails;if(r.find(".no-results").addClass("hide"),this.$ele.find(".search-progress").addClass("hide"),this.showMoreToCome(),this.page=t.data.page,t.getLength()){this.showInfoMessage(!1);var s,l,c=t.at(0);for(s=0;s<t.getLength();s++)c=t.at(s),this.items.push(c),c.data.title=c.data.title||"untitled image",l=this._addThumbnail(c.getThumbURL(),r,c,c.getAspect(),o,a),c.is_licensed&&l.addClass("licensed");this.loader.start()}else this.hideMoreToCome(),this.request.getLength()||(this.$ele.find(".no-results").removeClass("hide"),this.showInfoMessage(!1))}},hasMore:function(){return this.request&&!this.request.reachedEnd()},getSearchContext:function(){return"history"===this._lastRequestType()?a.licenseHistorySearchQuery:this._getSearchText()},_getSearchText:function(){return this.$ele.find(".search-text").val()},_handleAdobeStockSearch:function(){var e=this.$ele.find(".search-text").val().trim(),t=o.formatMessage("imagepicker-searching-for-subject",{subject:e});if(this.loader&&(this.loader.stop(),this.loader.clearQueue()),this.request=new a,this._clear(),this.count=0,this.$ele.find(".no-results").addClass("hide"),e){this.$ele.find(".search-progress").removeClass("hide"),this.$ele.find(".search-progress .content").text(t),this.showInfoMessage(!1);var n=c.safeSearchQueryFilterEndpoint;if(n){var i="https://"+n+"/api/v1/moderation/profanity",r={query:e};s.ajax({type:"GET",url:i,headers:{"X-Api-Key":c.key,"Content-Type":"application/json"},data:r,dataType:"json",traditional:!0,success:function(t,n,i){t.contains_badwords?this._showEmptySearchResults(!1):this._makeAdobeStockRequest(e)}.bind(this),error:function(t,n,i){window.marvel.logger.error("stock data search failure:"+n,t),this._makeAdobeStockRequest(e)}.bind(this)})}else this._makeAdobeStockRequest(e)}else this._showEmptySearchResults(!0);return!1},_showEmptySearchResults:function(e){this.hideMoreToCome(),this.$ele.find(".search-progress").addClass("hide"),this.showInfoMessage(e),e?this.$ele.find(".no-results").addClass("hide"):this.$ele.find(".no-results").removeClass("hide")},_setShowTypeTab:function(e,t){(t=t||{}).ignoreIfSame&&e===this._currentType||(this._currentType=e,"history"===e?(this.$ele.addClass("view-type-history"),this.$ele.removeClass("view-type-search"),t.triggerSearch&&this._handleLicenseHistory(t.triggerSearch)):(this.$ele.addClass("view-type-search"),this.$ele.removeClass("view-type-history"),t.triggerSearch&&this._handleAdobeStockSearch(t.triggerSearch)))},_handleShowSearchButton:function(e){var t,n=this._getSearchText();this.updateInfoMessage(),n?this.$ele.find(".stockSearchEntry .search-text-hint").removeClass("showing"):(this.$ele.find(".stockSearchEntry .search-text-hint").addClass("showing"),this.$ele.find(".no-results").addClass("hide"),t=!0),this._setShowTypeTab("search",{triggerSearch:this._getSearchText()||"history"===this._currentType,ignoreIfSame:t})},_handleShowLicenseHistoryButton:function(e){this._setShowTypeTab("history",{triggerSearch:a.licenseHistorySearchQuery})},_handleLicenseHistory:function(){this.loader&&(this.loader.stop(),this.loader.clearQueue()),this.request=new a(a.licenseHistoryPath),this._clear(),this.count=0,this.$ele.find(".search-progress").removeClass("hide"),this.$ele.find(".search-progress .content").text(o.getString("imagepicker-stock-looking-up-license-history")),this.$ele.find(".no-results").addClass("hide"),this.showInfoMessage(!1),this._makeAdobeStockRequest(a.licenseHistorySearchQuery)}}),d}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(345),n(2),n(297),n(298),n(269),n(270),n(299),n(522),n(509),n(523),n(524),n(525),n(526),n(98),n(15),n(8)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u,h,p,f,g,m,v){"use strict";function b(e,t,n){this._init(e,t,n)}return e.extend(b.prototype,r.prototype,{_init:function(t,n,i){r.prototype._init.call(this,t,n),e(window).on("resize",this._handleResize.bind(this)),this.items=[],this.dirs=[],this.crumbs=[],this.rootCrumb=null,this._handleFolderClick=this._handleFolderClick.bind(this),this.pickerModel=i.model,this.source=i.model.get("source"),this.parentView=i,this._options=this._options||this.parentView._options,this.sort="custom",this.filter="all",this.depth=0},_handleLoadedThumbnail:function(e,t){this._options.enableDNDThumbclick&&(e.attr("draggable","true"),t.attr("draggable","true"),e.on("mousedown",this._handleThumbClick.bind(this)),e.on("mouseup",this._handleThumbClick.bind(this)),e.on("dragstart",function(e){e.preventDefault(),e.originalEvent.dataTransfer.setData("text/plain","foo"),this._handleThumbClick()}.bind(this)),e.on("dragleave dragend",function(e){e.originalEvent.dataTransfer.clearData()}.bind(this)))},_handleThumbClick:function(t){var n=e(t.target).data("item");if(this.$ele.find(".results .selected").removeClass("selected"),e(t.target).parent().addClass("selected"),this._userCallback){var i=this.crumbs[this.crumbs.length-1];n.parentFolderName=i.item.getFolderName(),n.thumbNaturalSize={width:t.target.naturalWidth,height:t.target.naturalHeight},this._userCallback(n,e(t.target).width(),e(t.target).height())}},populate:function(){this.crumbs=[],this.items=[];this.addRootCrumb(),this._makeRequest("",1)},getCurrentFolderPath:function(){for(var e="",t=this.crumbs,n=0,i=t.length;n<i;n++){e+=t[n].item.getFolderName()+"/"}return e=e.replace(/\/$/,"")},getCurrentFolderUrl:function(){var e=this.crumbs;return e[e.length-1].item.getFolderPath()},addRootCrumb:function(){var e=new g("root");e.isDir=!0,e.links.folder={},e.links.preview.href="",e.links.folder.path="/",e.links.folder.filename="",this.rootCrumb={label:this.pickerModel.get("label"),item:e},this.crumbs.push(this.rootCrumb)},_clear:function(){var e=this.$ele.find(".results").eq(this.depth),t=e.find(".folders"),n=e.find(".column");t.empty(),n.empty(),this.loader&&(this.loader.stop(),this.loader.clearQueue())},_scrolledFarEnough:function(){var t=this.$results,n=t.find(".column"),i=t[0].scrollTop,r=2*t.height()+i,o=!1;return n.each((function(){if(r>e(this).height())return o=!0,!1})),o},_makeRequest:function(i,r,o){var a=o?e(o):this.$ele.find(".results").eq(this.depth);this.$results=a,a.off("scroll",this._handleScroll.bind(this)),a.on("scroll",this._handleScroll.bind(this)),this.loader=new n({numAsyncRequestsAllowed:20}),this.requestId=m.v4(),this.updateFilterability(),this.requestOutstanding=!0,this.showMoreToCome(),this.loader.bind("wp-image-loader-empty",function(e){this.loader.stop(),this.requestOutstanding=!1,this._scrolledFarEnough()&&this.imageSource&&this.imageSource.haveMoreMetaData()&&(this.requestOutstanding=!0,this.imageSource.getNextMetaData(),this.showMoreToCome()),this.requestOutstanding||this.hideMoreToCome()}.bind(this)),1===(r=r||1)&&this._clear(),this._requestMetaData({page:r,path:i,success:function(e,n,i){if(a.find(".no-photos").addClass("hide"),e.length&&0!==e.data.pages){var r,o,s,l,c=e[0];for(this.page=e.data.page,this.pages=e.data.pages,s=t.filter(e,(function(e){return e.isDir})),o=t.filter(e,(function(e){return!e.isDir})),r=0;r<s.length;r++)l=s[r],this.dirs.push(l),this._addDir(l.getPreviewURL(),l.getFolderLabel(),a,r,l);for(r=0;r<o.length;r++)c=o[r],this.items.push(c),this._addThumbnail(c.getThumbURL(),a,c,c.aspect,!0,!1);this.loader.bind("wp-image-loader-load-error",function(e){this.hideMoreToCome(),console.warn("image loader error ",e)}.bind(this)),this.loader.start()}else(!e.data||e.data.pages<2&&1===e.data.page)&&a.find(".no-photos").removeClass("hide");this.hideMoreToCome()}.bind(this),error:function(e,t,n){a.find(".no-photos").removeClass("hide"),this.hideMoreToCome(),console.warn("REQUEST ERROR:",n)}.bind(this)})},searchNextSet:function(){this.imageSource.getNextMetaData()},_addDir:function(t,n,i,r,o){var a,s=i.find(".folders"),l=e("<div class='folder-wrapper'></div>"),c=e("<p class='label'>"+n+"</p>");l.on("click",this._handleFolderClick),l.data("index",r),l.data("item",o),o.hasCover()&&(l.addClass("withPreview"),a=e("<div class='preview'></div>"),o.getCover().then((function(e){a.css("background-image",'url("'+e+'")')})).fail((function(e){console.warn("getCover failed because ",e)})),l.append(a)),l.append(c);var d=l.wrap("<div class='folder-hover'></div>");s.append(d),window.setTimeout((function(){l.addClass("showing")}),0)},_appendResults:function(){var t=v.getString("imagepicker-no-photos-folder"),n=v.getString("imagepicker-no-photos-album"),i=e(document.createElement("div")),r='<div class="folders"></div><div class="left column"></div><div class="right column"></div><div class="picker-bumper"></div>',o='<div class="no-photos hide">'+t+"</div>",a='<div class="no-photos hide">'+n+"</div>",s=this.$ele.find(".results-carrier"),l=this.$ele.find(".results");return r+="Lightroom"===this.pickerModel.get("source")?a:o,i.addClass("results").html(r),s.append(i),i.css("left",l.length*l.width()),i},_showResults:function(e){var t=this.$ele.find(".results"),n=this.$ele.find(".results-carrier"),i="onwebkittransitionend"in window?"webkitTransitionEnd":"transitionend",r=function(o){var a;if(n[0].removeEventListener(i,r),"left"===o.propertyName)for(a=t.length-1;a>e;a--)t.eq(a).remove()};n[0].addEventListener(i,r),n.css("left",t.width()*-e+"px")},_handleFolderClick:function(t){var n=e(t.currentTarget).data("item");this._appendResults(),this.depth++,this._clear(),this._showResults(this.depth);var i=n.getFolderLabel();this.pickerModel.set("label",i),this.crumbs.push({label:i,item:n}),this._makeRequest(n.getFolderPath(),1)},canGoBack:function(){return this.crumbs.length>1},goBack:function(){this.crumbs.length>1&&this.crumbs.pop();var e=t.last(this.crumbs);if(this.depth=this.crumbs.length-1,this._showResults(this.depth),this.pickerModel.set("label",e.label),1===this.crumbs.length)this.populate();else{var n=e.item?e.item.getFolderPath():e.path;this._clear(),this._makeRequest(n,1)}},jumpTo:function(e,t){var n=this,i=n.pickerModel.get("source"),r=this.crumbs[this.crumbs.length-1];if(e=decodeURI(e),"Lightroom"==i)this.imageSource=this.imageSource||new d,this.imageSource.getMetaData({filter:this.filter,sort:this.sort,success:function(e,i,o){for(var a,s=0,l=e.length;s<l;s++){var c=e[s];c.links.folder.filename==t&&(a=c.getFolderPath())}r&&r.item&&a==r.item.getFolderPath()||(n.crumbs=[],n.addRootCrumb(),n.crumbs.push({label:t,path:a,item:g.createFolderItem(a,t)}),n._clear(),n._makeRequest(a,1)),n.pickerModel.set("label",t)}});else if(e&&"/"!=e){var o,a;if("Dropbox"==i?(o=new u,a=e):"Google Photos"==i?a=(o=new f).generateUrlForAlbumId(e):"Facebook"==i?(o=new h,a=e):"Instagram"==i?(o=new p,a=e):(o=new c,a=e),!r||!r.item||r.item.getFolderPath()!=e){var s=o.generateCrumbsForPath(e,t);n._appendResults(),n.crumbs=[],n.addRootCrumb(),n.crumbs=n.crumbs.concat(s),t=s[s.length-1].item.getFolderLabel(),n._clear(),n._makeRequest(a,1)}n.pickerModel.set("label",t||n.crumbs[n.crumbs.length-1].label)}else n.populate()},getLastCrumb:function(){return this.crumbs[this.crumbs.length-1]},_handleScroll:function(e){this.requestOutstanding||this._scrolledFarEnough()&&this.imageSource&&this.imageSource.haveMoreMetaData()&&(this.showMoreToCome(),this.requestOutstanding=!0,this.searchNextSet())},_requestMetaData:function(e){if("Dropbox"==this.pickerModel.get("source"))return this._getDropboxMetadata(e);if("Facebook"==this.pickerModel.get("source"))return this._getFacebookMetaData(e);if("Instagram"==this.pickerModel.get("source"))return this._getInstagramMetaData(e);if("Creative Cloud"==this.pickerModel.get("source"))return this._getCCMetadata(e);if("Lightroom"==this.pickerModel.get("source")){e.path,e.success,e.error;return e.filter=this.filter,e.sort=this.sort,this.imageSource=this.imageSource||new d(e),this.imageSource.getMetaData(e)}return"Google Photos"==this.pickerModel.get("source")?this._getGoogleMetadata(e):void 0},_getDropboxMetadata:function(e){e.path,e.success;var t=e.error;o.isAuthenticated()||this.parentView.canReloadPage()?(this.imageSource=this.imageSource||new u(e),this.imageSource.setImageFilter(this.parentView.getImageFilter()),this.imageSource.getMetaData(e)):t("user cancelled authentication")},_getFacebookMetaData:function(e){e.path,e.success;var t=e.error;s.isAuthenticated()||this.parentView.canReloadPage()?(this.imageSource=this.imageSource||new h(e),this.imageSource.getMetaData(e)):t("user cancelled authentication")},_getInstagramMetaData:function(e){e.path,e.success;var t=e.error;l.isAuthenticated()||this.parentView.canReloadPage()?(this.imageSource=this.imageSource||new p(e),this.imageSource.getMetaData(e)):t("user cancelled authentication")},_getGoogleMetadata:function(e){e.path,e.success;var t=e.error;a.isAuthenticated()||this.parentView.canReloadPage()?(this.imageSource=this.imageSource||new f(e),this.imageSource.setImageFilter(this.parentView.getImageFilter()),this.imageSource.getMetaData(e)):t&&t("user cancelled authentication")},_getCCMetadata:function(e){e.path,e.success,e.error;this.imageSource=this.imageSource||new c(e),this.imageSource.setImageFilter(this.parentView.getImageFilter()),this.imageSource.getMetaData(e)},getFilter:function(){return this.filter},setFilter:function(e){this.filter=e},canSetFilter:function(){return"Lightroom"===this.pickerModel.get("source")&&this.crumbs.length>1},getSort:function(){return this.sort},setSort:function(e){this.sort=e},updateFilterability:function(){this.canSetFilter()?marvel.features.hasFeature("lightroom-picker-filters")&&this.$ele.addClass("filterable"):this.$ele.removeClass("filterable")},refresh:function(){var e=this.crumbs[this.crumbs.length-1],t=e.url;e.item&&(t=e.item.getFolderPath()),this._makeRequest(t,1)}}),b}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(98),n(212),n(6),n(13)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s="https://"+window.location.host;function l(e){this.items=[],this.hostname=a.storageServer,this.received=0,this.path=null,this.start=null,this.metaDataHost="https://"+a.storageServer,this.metaDataUrl=this.metaDataHost}function c(e,t){this.parentPath=t,i.prototype._init.call(this,e)}return t.extend(l.prototype,r.prototype,{getMetaData:function(e,n){var i=[],a=(e.path&&/\/$/.test(e.path)?e.path:e.path+"/").replace(/^files\//,""),s=e.success,l=e.error,d=""===a?this.metaDataHost+"/files/":r.fusePath([this.metaDataHost,"/files/",a]),u=d+"?type=application%2Fvnd.adobe.directory%2Bjson&orderby=name";this.start=n,this.options=e,this.received=n?this.received:0;var h=function(e){var n=[];e.total_children&&(n=t.map(e.children,(function(e){return new c(e,a)})),this.received+=n.length,i=i.concat(n))}.bind(this);function p(e,t,n){h(e),e.total_children&&(this.start=e.children[e.children.length-1].modified),this.total_children=e.total_children,i.data={page:1,pages:1},s&&s(i,"success",n)}function f(e,t,n){console.warn("CC fail ",t,e,n),i.data={page:1,pages:1},l&&l("failure")}var g=function(){var e="?limit=20"+t.reduce(this._imageFilter.types,(function(e,t){return e+"&type="+encodeURIComponent(t)}),"")+"&orderby=modified&order=desc";n&&(e+="&start="+n),o.ajax(d+e,{beforeSend:function(e){return e.setRequestHeader("X-api-key",o.apiKey),!0},dataType:"json"}).done(p.bind(this)).fail(f.bind(this))}.bind(this);function m(e,t,n){h(e),g()}o.getAccessToken().then(function(e){n?g():o.ajax(u,{beforeSend:function(e){return e.setRequestHeader("X-api-key",o.apiKey),!0},dataType:"json"}).done(m.bind(this)).fail(f.bind(this))}.bind(this))},generateCrumbsForPath:function(e){var t=[],n=(e=e.replace(/https?\:\/\/[^\/]*\/files(\/.*)$/,"$1")).replace(/^\//,"").replace(/\/$/,"").split("/");"files"==n[0]&&n.splice(0,1);for(var r="",o=0,a=n.length;o<a;o++)r+="/"+n[o],t.push({label:n[o].replace(/\%20/g," "),path:this.metaDataHost+"/files"+r,item:i.createFolderItem("files"+r,r)});return t},getNextMetaData:function(){return this.getMetaData(this.options,this.start)},haveMoreMetaData:function(){return this.total_children>this.received}}),t.extend(c.prototype,i.prototype,{_parseData:function(){var e=this.data,t=r.fusePath([s,"/files/",this.parentPath]);e.path&&0===e.path.indexOf("files/")&&(e.path=null),this.links.preview.href="",this.isDir=/vnd\.adobe\.directory/.test(e.type),this.isDir?(this.links.folder={},this.links.folder.path=e.path?e.path:this.parentPath+e.name+"/",this.links.folder.filename=e.name):(this.links.thumb.href=e.path?e.path:t+e.name+"/:rendition;size=200",this.links.thumb.filename=e.name,this.links.preview.href=e.path?e.path:t+e.name+"/:rendition;size=512",this.links.preview.filename=e.name,this.links.original.href=e.path?e.path:t+e.name,this.links.original.filename=e.name,this.links.original.width=void 0,this.links.original.height=void 0,this.aspect={width:e.width,height:e.height})},getParentPath:function(){return this.parentPath.replace(/^\//,"")},getMimeType:function(){return this.data.type},getThumbHoverLabel:function(){return this.data.name}}),l}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(98),n(212),n(6),n(298)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s="https://api.dropbox.com/2/files/list_folder",l="https://"+window.location.host+"/db_files",c="https://"+window.location.host+"/db_thumbnails";function d(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entries:[]}}function u(e){return"folder"===e[".tag"]}function h(e){i.prototype._init.call(this,e)}return t.extend(d.prototype,r.prototype,{getMetaData:function(n,i){var r,o=n.path,l=n.success,c=n.error,d=a.getToken(),h=i?"https://api.dropbox.com/2/files/list_folder/continue/":s;function p(e){return new Date(e)}function f(e){return(e.media_info&&e.media_info.metadata?e.media_info.metadata.time_taken:0)||e.client_modified||e.server_modified||0}this.start=0,this.options=n,this.path=o,i||(this.pages=0),d&&(r=i?JSON.stringify({cursor:this.data.cursor}):JSON.stringify({path:o||"",include_media_info:!0}),e.ajax({method:"POST",url:h,beforeSend:function(e){return e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Authorization","Bearer "+d),!0},dataType:"json",data:r}).done(function(e,n,r){e=function(e){return e.entries&&e.entries.sort((function(e,t){if(u(e)&&!u(t))return-1;if(!u(e)&&u(t))return 1;if(u(e)&&u(t))return e.name.toLowerCase()<t.name.toLowerCase()?-1:1;var n=p(f(e)),i=p(f(t));return n>i?-1:n<i?1:0})),e}(e=function(e,n){return e.entries&&(e.entries=t.filter(e.entries,(function(e){return u(e)||function(e,t){var n=t.includesExtension(e.name.toLowerCase());return"file"===e[".tag"]&&n||e.media_info&&e.media_info.metadata&&"photo"===e.media_info.metadata[".tag"]}(e,n)}))),e}(e,this._imageFilter)),this.data=e,this._processData(e,0,o),this.page=i?++this.page:1,this.pages+=Math.ceil(e.entries.length/this.pageSize),this.items.data={page:this.page,pages:this.pages},l&&l(this.items,"success",r)}.bind(this)).fail(function(e,t,n){if(console.warn("Dropbox metadata failure",t,e,n),401===e.status&&/invalid_access_token/.test(e.statusText))return a.logout(),void a.getToken();this.items.data={page:1,pages:1},c&&c(e,t,n)}.bind(this)))},generateCrumbsForPath:function(e){for(var t=[],n=(e=e.replace(s,"")).replace(/^\//,"").replace(/\/$/,"").split("/"),r=(n[n.length-1],"/"),o=0,a=n.length;o<a;o++)r+=n[o],t.push({label:n[o].replace(/\%20/g," "),path:s+r,item:i.createFolderItem(r,r)});return t},_processData:function(e,t,n){var i,r=Math.min(this.pageSize+t,e.entries.length);if(this.items=[],e.entries){for(i=t;i<r;i++){var o=new h(e.entries[i],n);this.items.push(o)}this.received+=this.items.length,this.start=t+this.items.length}return this.items},getNextMetaData:function(){var e=[],t=this.options.success;return this.start<this.data.entries.length?(this.page++,(e=this._processData(this.data,this.start,this.path)).data={page:this.page,pages:this.pages},t&&t(e,"success"),e):this.data.has_more?this.getMetaData(this.options,!0):(console.warn("getNextMetadata called wothout data available"),e)},haveMoreMetaData:function(){return this.start<this.data.entries.length||!!this.data.has_more}}),t.extend(h.prototype,i.prototype,{_parseData:function(){var e=this.data;this.links.preview.href="",this.isDir=u(e),this.isDir?(this.links.folder={},this.links.folder.path=e.path_lower,this.links.folder.filename=e.name):(this.links.thumb.href=c+e.path_lower+"?size=m",this.links.thumb.filename=e.name,this.links.preview.href=c+e.path_lower+"?size=l",this.links.preview.filename=e.name,this.links.original.href=l+e.path_lower,this.links.original.filename=name,e.media_info&&e.media_info.metadata&&e.media_info.metadata.dimensions?(this.links.original.width=e.media_info.metadata.dimensions.width,this.links.original.height=e.media_info.metadata.dimensions.height,this.aspect={width:this.links.original.width,height:this.links.original.height}):(this.links.original.width=void 0,this.links.original.height=void 0,this.aspect=void 0))},getParentPath:function(){var e=this.links.original.href.replace(/\/[^\/]*$/,"");return-1!=e.search(s)?"/"+e.replace(s,""):-1!=e.search(l)?e.replace(l,""):e},getMimeType:function(){return this.data.mime_type},getThumbHoverLabel:function(){return this.data.name}}),d}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(3),n(1),n(0),n(2),n(98),n(212),n(270)],void 0===(r=function(e,t,n,i,r,o,a){var s=["cover_photo","name"],l=["picture","images","width","height","name","album"],c={"Mobile Uploads":1,"Timeline Photos":2,"Profile Pictures":3,"Instagram Photos":4};function d(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entry:[]}}function u(e,t){r.prototype._init.call(this,e),this.albumId="facebook_"+t}function h(e){u.prototype._init.call(this,e)}return n.extend(d.prototype,o.prototype,{getMetaData:function(e,t){var n,i=e.path,r=e.success,o=e.error,d=this;function u(e){var n,i,o;e.paging&&(n=e.paging.cursors.after,i=e.paging.cursors.before),n&&i&&n!=i&&(o=n);var a=e.data?e.data.length:0;d.resultCountSoFar+=a,d.totalCount+=a,e=function(e,t){return e.data&&e.data.sort((function(e,n){return t[e.name]&&t[n.name]?t[e.name]-t[n.name]:t[e.name]?-1:t[n.name]?1:e.name.localeCompare(n.name)})),e}(e,c),d.data=e,d._processData(e,0),d.page=t?++this.page:1,d.pages+=Math.ceil(a/d.pageSize),d.items.data={page:d.page,pages:d.pages,next:o},r&&r(d.items,"success",null)}function h(e){var n,o,a;e.paging&&(n=e.paging.cursors.after,o=e.paging.cursors.before),n&&o&&n!=o&&(a=n);var s=e.data?e.data.length:0;d.resultCountSoFar+=s,d.totalCount=e.data.length,d.data=e,d._processData(e,0,i),d.page=t?++d.page:1,d.pages+=Math.ceil(s/d.pageSize),d.items.data={page:d.page,pages:d.pages,next:a},r&&r(d.items,"success",null)}function p(e){return console.warn("Facebook Photos metadata failure",e),/invalid_access_token/.test(e)||/not_authorized/.test(e)?(a.logout(),void a.authenticate()):(d.items.data={page:1,pages:1},void(o&&o(null,e,e)))}function f(e,t,i){n.then((function(n){window.FB.getLoginStatus((function(n){n&&"connected"===n.status?window.FB.api(e,{after:d.next?d.next:""},(function(e){!e||e.error?i(e.error):t(e)})):n&&"not_authorized"===n.status?i("not_authorized"):i("invalid_access_token")}),!0)})).catch((function(e){console.warn("getAccessToken failed",e),a.logout(),a.authenticate(),o&&o()}))}n=a.getAccessToken({scopes:"user_photos,public_profile"}),this.start=0,this.options=e,this.path=i,this.next=t,t||(this.pages=0,this.totalCount=0),this.options=e,i&&"/"!==i?f(i+"/photos?fields="+l.join(","),h,p):f("/me/albums?fields="+s.join(","),u,p)},generateUrlForAlbumId:function(e){return e},generateCrumbsForPath:function(e,t){return[{label:t,path:this.generateUrlForAlbumId(e),item:u.createFolderItem(e,t)}]},_processData:function(e,t,n){var i,r=e.data?e.data:null,o=r?Math.min(this.pageSize+t,r.length):0;if(this.items=[],r){for(i=t;i<o;i++){var a=new u(r[i],n);this.items.push(a)}this.received+=this.items.length,this.start=t+this.items.length}return this.items},getNextMetaData:function(){var e=[],t=this.options.success;return this.start<this.data.data.length?(this.page++,(e=this._processData(this.data,this.start,this.path)).data={page:this.page,pages:this.pages},t&&t(e,"success"),e):this.data.paging&&this.data.paging.cursors.before!=this.data.paging.cursors.after?this.getMetaData(this.options,this.data.paging.cursors.after):(console.warn("getNextMetadata called without data available"),e)},haveMoreMetaData:function(){return this.start<this.data.data.length||!(!this.data.paging||this.data.paging.cursors.before==this.data.paging.cursors.after)}}),n.extend(u.prototype,r.prototype,{_parseData:function(){var e=this.data;this.links.preview.href="",this.isDir=!function(e){return"picture"in e}(e),this.isDir?(this.links.folder={},this.links.folder.filename=e.name,this.links.folder.path=e.id,this.links.cover={},this.has_cover=!1,e.cover_photo&&e.cover_photo.id&&(this.links.cover=e.cover_photo,this.has_cover=!0)):(this.links.preview.href=e.images[0].source,this.links.preview.filename=e.name,this.links.thumb.href=e.picture,this.links.thumb.filename=e.name,this.links.original.href=e.images[0].source,this.links.original.filename=e.name,this.links.original.width=parseInt(e.images[0].width),this.links.original.height=parseInt(e.images[0].height),this.aspect={width:this.links.original.width,height:this.links.original.height})},getParentPath:function(){return"facebook_"+this.albumId},hasCover:function(){return this.has_cover},getFolderLabel:function(){return this.getFolderName()},getMimeType:function(){},getCover:function(){var t=e.defer();if(this.links&&this.has_cover)try{window.FB.api("/"+this.links.cover.id+"?fields=picture",function(e){e&&!e.error?(this.links.cover.href=e.picture,t.resolve(e.picture)):t.reject("no cover available")}.bind(this))}catch(e){t.reject("no cover available")}else t.reject("no cover available");return t.promise},getThumbHoverLabel:function(){return this.data.name}}),u.createFolderItem=function(e,t){return new h({path:e,label:t})},n.extend(h.prototype,u.prototype,{_parseData:function(){this.isDir=!0,this.links.folder={},this.links.folder.filename=this.data.label,this.links.folder.path=this.data.path}}),d}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(3),n(1),n(0),n(2),n(98),n(212),n(299),n(401)],void 0===(r=function(e,t,n,i,r,o,a,s){function l(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entry:[]}}function c(e,t){r.prototype._init.call(this,e),this.albumId=t}function d(e){c.prototype._init.call(this,e)}return n.extend(l.prototype,o.prototype,{getMetaData:function(e,t){var i,r=e.path,o=e.success,l=e.error,c=this;i=a.getAccessToken(),this.start=0,this.options=e,this.path=r,t||(this.pages=0,this.startIndex=1,this.totalCount=0),this.options=e,r&&"/"!==r||t?function(e,t,n){i.then(function(i){var r=c.data.pagination&&c.data.pagination.next_max_id?c.data.pagination.next_max_id:"";s.fetchRecentUserMedia({max_id:r}).then((function(n,i,r){n&&n.meta&&n.meta.error_type?t(n):e(n,i,r)})).fail((function(e,t,i){n(e,t,i)}))}.bind(c)).catch((function(e){a.logout(),a.authenticate(),l&&l()}))}((function(e){e.data=function(e){return n.filter(e,(function(e){return"image"==e.type}))}(e.data);var i=e.data?e.data.length:0;c.startIndex+=i,c.resultCountSoFar+=i,c.totalCount=e.data.length,c.data=e,c._processData(e,0,r),c.page=t?++c.page:1,c.pages+=Math.ceil(i/c.pageSize),c.items.data={page:c.page,pages:c.pages},o&&o(c.items,"success",null)}),(function(e){console.warn("Instagram Photos metadata failure",e);var t=e.meta&&e.meta.error_message?e.meta.error_message:null,n=e.meta&&e.meta.error_type?e.meta.error_type:"";if(/OAuthAccessTokenException/.test(n))return a.logout(),void a.authenticate();c.items.data={page:1,pages:1},l&&l(null,t,t)}),(function(e,t,n){c.items.data={page:1,pages:1},l&&l(null,t,n)})):function(e){var n=e.data?e.data.length:0;c.startIndex+=n,c.resultCountSoFar+=n,c.totalCount=n,c.data=e,c._processData(e,0),c.page=t?++this.page:1,c.pages+=Math.ceil(n/c.pageSize),c.items.data={page:c.page,pages:c.pages},o&&o(c.items,"success",null)}({data:[{id:"1",name:"Recent Photos",type:"album"}]})},generateUrlForAlbumId:function(e){return e},generateCrumbsForPath:function(e,t){return[{label:t,path:this.generateUrlForAlbumId(e),item:c.createFolderItem(e,t)}]},_processData:function(e,t,n){var i,r=e.data?e.data:null,o=r?Math.min(this.pageSize+t,r.length):0;if(this.items=[],r){for(i=t;i<o;i++){var a=new c(r[i],n);this.items.push(a)}this.received+=this.items.length,this.start=t+this.items.length}return this.items},getNextMetaData:function(){var e=[],t=this.options.success;return this.start<this.data.data.length?(this.page++,(e=this._processData(this.data,this.start,this.path)).data={page:this.page,pages:this.pages},t&&t(e,"success"),e):this.startIndex<this.totalCount?this.getMetaData(this.options,!0):this.data.pagination&&this.data.pagination.next_max_id.length?this.getMetaData(this.options,!0):(console.warn("getNextMetadata called without data available"),e)},haveMoreMetaData:function(){return this.start<this.data.data.length||(this.startIndex<this.totalCount||!(!this.data.pagination||!this.data.pagination.next_max_id.length))}}),n.extend(c.prototype,r.prototype,{_parseData:function(){var e=this.data;this.links.preview.href="",this.isImage=function(e){return"image"==e.type}(e),this.isDir=!this.isImage,this.isImage?(this.links.preview.href=e.images.standard_resolution.url,this.links.preview.filename=e.images.standard_resolution.url,this.links.thumb.href=e.images.thumbnail.url,this.links.thumb.filename=e.images.thumbnail.url,this.links.original.href=e.images.standard_resolution.url,this.links.original.filename=e.images.standard_resolution.url,this.links.original.width=e.images.standard_resolution.width,this.links.original.height=e.images.standard_resolution.height,this.aspect=void 0):(this.links.folder={},this.links.folder.filename=e.name,this.links.folder.path=e.id,this.links.cover={},this.has_cover=!1)},getParentPath:function(){return this.albumId},hasCover:function(){return this.has_cover},getFolderLabel:function(){return this.getFolderName()},getCover:function(){var t=e.defer();return t.reject("no cover image"),t.promise},getMimeType:function(){}}),c.createFolderItem=function(e,t){return new d({path:e,label:t})},n.extend(d.prototype,c.prototype,{_parseData:function(){this.isDir=!0,this.links.folder={},this.links.folder.filename=this.data.label,this.links.folder.path=this.data.path}}),l}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(3),n(1),n(0),n(5),n(527),n(528)],void 0===(r=function(e,t,n,i,r,o){"use strict";function a(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entry:[]}}return i.hasFeature("enable-google-picasa-api")?n.extend(a.prototype,r.prototype):i.hasFeature("enable-google-photo-api")?n.extend(a.prototype,o.prototype):marvel.logger.error("[ImageSourceGoogle] need to enable at least 1 google API!!!"),a}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(3),n(1),n(0),n(2),n(98),n(212),n(269)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s="https://picasaweb.google.com/data/feed/api/user/",l=(window.location.host,window.location.host,["AUTO BACKUP"]);function c(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entry:[]}}function d(e){return e.category&&e.category.length&&/#album/.test(e.category[0].term)}function u(e,t){r.prototype._init.call(this,e),this.albumId=t}function h(e){u.prototype._init.call(this,e)}return n.extend(c.prototype,o.prototype,{getMetaData:function(e,i){var r,o=e.path,c=e.success,u=e.error,h=s,p=this;function f(e,t,r){var a=e.feed.entry?e.feed.entry.length:0;this.startIndex+=a,this.resultCountSoFar+=a,this.totalCount=a,e=function(e){if(e.feed.entry){e.feed.entry.sort((function(e,t){return new Date(e.updated.$t)>new Date(t.updated.$t)?-1:1}));var t=[];n.each(l,function(i){e.feed.entry=n.filter(e.feed.entry,function(e,n){return e.title.$t.toLowerCase()!=i.toLowerCase()||(t.push(e),!1)}.bind(p))}.bind(p)),t.length&&(e.feed.entry=t.concat(e.feed.entry))}return e}(e),this.data=e,this._processData(e,0,o),this.page=i?++this.page:1,this.pages+=Math.ceil(a/this.pageSize),this.items.data={page:this.page,pages:this.pages},c&&c(this.items,"success",r)}function g(e,t,r){var a=e.feed.entry?e.feed.entry.length:0;this.startIndex+=a,this.resultCountSoFar+=a,this.totalCount=e.feed.gphoto$numphotos.$t,e=function(e,t){return e.feed.entry&&(e.feed.entry=n.filter(e.feed.entry,(function(e){return d(e)||function(e,t){var n=e.media$group.media$content&&e.media$group.media$content.length?e.media$group.media$content[0].type.toLowerCase():null;return t.includesType(n)}(e,t)}))),e}(e,this._imageFilter),this.data=e,this._processData(e,0,o),this.page=i?++this.page:1,this.pages+=Math.ceil(a/this.pageSize),this.items.data={page:this.page,pages:this.pages},c&&c(this.items,"success",r)}function m(e,t,n){function i(){p.items.data={page:1,pages:1},u&&u(e,t,n)}console.warn("Google Photos metadata failure",t,e,n),401!==e.status&&404!==e.status?i():a.validateRefreshToken().then(function(e){i()}.bind(p)).catch((function(e){a.logout(),a.authenticate()}))}function v(e,n,i){r.then(function(r){t.ajax({url:e,data:{alt:"json-in-script",access_token:r,imgmax:"d",thumbsize:"288","max-results":100,"start-index":this.startIndex},jsonpCallback:"picasaCallback",dataType:"jsonp",beforeSend:function(e){return e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Authorization","Bearer "+r),e.setRequestHeader("GData-Version","2"),!0}}).done(n.bind(p)).fail(i.bind(p))}.bind(p)).catch((function(e){console.warn("getAccessToken failed",e),a.logout(),a.authenticate(),u&&u()}))}return r=a.getAccessToken(),this.start=0,this.options=e,this.path=o,i||(this.pages=0,this.startIndex=1,this.resultCountSoFar=0,this.totalCount=0),this.options=e,o&&"/"!==o||i?v(o,g,m):v(h+"default",f,m)},generateUrlForAlbumId:function(e){return s+a.getUserId()+"/albumid/"+e+"?alt=json-in-script"},generateCrumbsForPath:function(e,t){return[{label:t,path:this.generateUrlForAlbumId(e),item:u.createFolderItem(e,t)}]},_processData:function(e,t,n){var i,r=e.feed?e.feed.entry:null,o=r?Math.min(this.pageSize+t,r.length):0;if(this.items=[],r){for(i=t;i<o;i++){var a=new u(r[i],n);this.items.push(a)}this.received+=this.items.length,this.start=t+this.items.length}return this.items},getNextMetaData:function(){var e=[],t=this.options.success;return this.start<this.data.feed.entry.length?(this.page++,(e=this._processData(this.data,this.start,this.path)).data={page:this.page,pages:this.pages},t&&t(e,"success"),e):this.startIndex<this.totalCount?this.getMetaData(this.options,!0):(console.warn("getNextMetadata called without data available"),e)},haveMoreMetaData:function(){return this.start<this.data.feed.entry.length||this.startIndex<this.totalCount}}),n.extend(u.prototype,r.prototype,{_parseData:function(){var e,t=this.data,i=t.media$group?t.media$group.media$thumbnail:null,r=i&&i.length?i[i.length-1].url:null;this.links.preview.href="",this.isDir=d(t),this.isDir?(this.links.folder={},(e=n.find(t.link,(function(e){return/#feed/.test(e.rel)})))&&(this.links.folder.path=e.href,this.links.folder.href=e.href),this.links.folder.filename=t.title.$t,this.has_cover=!0,this.links.cover={},this.links.cover.href=r):(this.links.thumb.href=r,this.links.thumb.filename=t.name,this.links.original.href=t.media$group.media$content[0].url,this.links.original.filename=t.name,t.gphoto$width?(this.links.original.width=parseInt(t.gphoto$width.$t),this.links.original.height=parseInt(t.gphoto$height.$t),this.aspect={width:this.links.original.width,height:this.links.original.height}):(this.links.original.width=void 0,this.links.original.height=void 0,this.aspect=void 0),t.media$group.media$description&&t.media$group.media$description.$t&&(this.caption=t.media$group.media$description.$t))},getParentPath:function(){return this.albumId},hasCover:function(){return this.has_cover},getCover:function(){var t=e.defer();this.data;return this.links&&this.links.cover&&this.links.cover.href?t.resolve(this.links.cover.href):t.reject("no cover available"),t.promise},getFolderLabel:function(){var e=this.getFolderName();return e&&"AUTO BACKUP"===e.toUpperCase()?"All Photos":e},getMimeType:function(){return this.data.mime_type},getThumbHoverLabel:function(){return this.data.title.$t}}),u.createFolderItem=function(e,t){return new h({path:e,label:t})},n.extend(h.prototype,u.prototype,{_parseData:function(){this.isDir=!0,this.links.folder={},this.links.folder.filename=this.data.label,this.links.folder.path=this.data.path}}),c}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(3),n(1),n(0),n(98),n(212),n(269)],void 0===(r=function(e,t,n,i,r,o){"use strict";var a="https://photoslibrary.googleapis.com",s=(window.location.host,window.location.host,20);function l(e){this.items=[],this.received=0,this.path=e?e.path:null,this.start=0,this.pageSize=20,this.data={entry:[]}}function c(e,t){i.prototype._init.call(this,e),this.albumId=t}function d(e){c.prototype._init.call(this,e)}return n.extend(l.prototype,r.prototype,{getMetaData:function(e,n,i){var r,l=e.path,c=e.success,d=e.error,u=this;function h(e,t,i){if(void 0===e.albums)return this.options.path="/all_photos",void this.getMetaData(this.options,!0,this.data.nextPageToken);var r=e.albums,o=r?r.length:0;this.startIndex+=o,this.resultCountSoFar+=o,this.totalCount=o,this.data=e,this._processData(e,0,l),this.page=n?++this.page:1,this.pages+=Math.ceil(o/this.pageSize),this.items.data={page:this.page,pages:this.pages},c&&c(this.items,"success",i)}function p(e,t,i){var r=e.mediaItems?e.mediaItems.length:0;this.startIndex+=r,this.resultCountSoFar+=r,this.data=e,this._processData(e,0,l),this.page=n?++this.page:1,this.pages+=Math.ceil(r/this.pageSize),this.items.data={page:this.page,pages:this.pages},c&&c(this.items,"success",i)}function f(e,t,n){function i(){u.items.data={page:1,pages:1},d&&d(e,t,n)}console.warn("Google Photos metadata failure",t,e,n),401!==e.status&&404!==e.status?i():o.validateRefreshToken().then(function(e){i()}.bind(u)).catch((function(e){o.logout(),o.authenticate()}))}return r=o.getAccessToken(),this.start=0,this.options=e,this.path=l,n||(this.pages=0,this.startIndex=1,this.resultCountSoFar=0,this.totalCount=0),this.nextPageToken=i||"",this.options=e,l&&"/"!==l?(l=/all_photos$/i.test(l)?"":l,function(e,n,i,a){r.then(function(r){marvel.logger.info("[GooglePhotoApi] requesting data from URL",e),t.ajax({url:e,method:"POST",data:JSON.stringify(n),dataType:"json",contentType:"application/json",beforeSend:function(e){return e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Authorization","Bearer "+r),!0}}).done(i.bind(u)).fail(a.bind(u))}.bind(u)).catch((function(e){console.warn("getAccessToken failed",e),o.logout(),o.authenticate(),d&&d()}))}(a+"/v1/mediaItems:search",{albumId:l,pageSize:s,pageToken:u.nextPageToken},p,f)):function(e,n,i,a){r.then(function(r){marvel.logger.info("[GooglePhotoApi] requesting data from URL",e),t.ajax({url:e,data:n,dataType:"json",beforeSend:function(e){return e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Authorization","Bearer "+r),!0}}).done(i.bind(u)).fail(a.bind(u))}.bind(u)).catch((function(e){console.warn("getAccessToken failed",e),o.logout(),o.authenticate(),d&&d()}))}(a+"/v1/albums",{pageSize:s,pageToken:u.nextPageToken},h,f)},generateUrlForAlbumId:function(e){return a+"/v1/albums/"+e},generateCrumbsForPath:function(e,t){return[{label:t,path:this.generateUrlForAlbumId(e),item:c.createFolderItem(e,t)}]},_processData:function(e,t,i){var r,o,a=[],s=0;if(e.albums?(a=e.albums,0===this.nextPageToken.length&&a.unshift({id:"all_photos",coverPhotoBaseUrl:a[0]?a[0].coverPhotoBaseUrl:"/",title:"All Photos"}),s=Math.min(this.pageSize+t,a.length)):e.mediaItems&&(a=n.filter(e.mediaItems,(function(e){return!!e.mediaMetadata.photo})),s=Math.min(this.pageSize+t,e.mediaItems.length)),this.items=[],a.length){for(r=t;r<s;r++)a[r]&&(o=new c(a[r],i),this.items.push(o));this.received+=this.items.length,this.start=t+this.items.length}return this.pageToken=e.pageToken?e.pageToken:"",this.items},_stillHasItems:function(){return this.data.albums&&this.start<this.data.albums.length||this.data.mediaItems&&this.start<this.data.mediaItems.length},getNextMetaData:function(){var e=[],t=this.options.success;return this.data.nextPageToken?this.getMetaData(this.options,!0,this.data.nextPageToken):this._stillHasItems()?(this.page++,(e=this._processData(this.data,this.start,this.path)).data={page:this.page,pages:this.pages},t&&t(e,"success"),e):this.startIndex<this.totalCount?this.getMetaData(this.options,!0):(console.warn("getNextMetadata called without data available"),e)},haveMoreMetaData:function(){return!!this.data.nextPageToken||(!!this._stillHasItems()||this.startIndex<this.totalCount)}}),n.extend(c.prototype,i.prototype,{_parseData:function(){var e=this.data,t="=w256-h192";this.links.preview.href="",this.isDir=function(e){return!(!e||!e.coverPhotoBaseUrl)}(e),this.isDir?(this.links.thumb.href=e.coverPhotoBaseUrl+t,this.links.folder={},this.links.folder.path=this.data.id,this.links.folder.href=e.id,this.links.folder.filename=e.title,this.has_cover=!1,"/"!==e.coverPhotoBaseUrl&&(this.has_cover=!0,this.links.cover={},this.links.cover.href=e.coverPhotoBaseUrl+t)):(this.links.thumb.href=e.baseUrl+t,this.links.thumb.filename=e.filename,this.links.original.href=e.baseUrl+"=d",this.links.original.filename=e.filename,e.mediaMetadata?(this.links.original.width=parseInt(e.mediaMetadata.width),this.links.original.height=parseInt(e.mediaMetadata.height),this.aspect={width:this.links.original.width,height:this.links.original.height}):(this.links.original.width=void 0,this.links.original.height=void 0,this.aspect=void 0),e.mediaMetadata.description&&(this.caption=e.mediaMetadata.description))},getParentPath:function(){return this.albumId},hasCover:function(){return this.has_cover},getCover:function(){var t=e.defer();return this.links&&this.links.cover&&this.links.cover.href?t.resolve(this.links.cover.href):t.reject("no cover available"),t.promise},getFolderLabel:function(){var e=this.getFolderName();return e&&"AUTO BACKUP"===e.toUpperCase()?"All Photos":e},getMimeType:function(){return this.data.mime_type},getThumbHoverLabel:function(){return this.data.filename}}),c.createFolderItem=function(e,t){return new d({path:e,label:t})},n.extend(d.prototype,c.prototype,{_parseData:function(){this.isDir=!0,this.links.folder={},this.links.folder.filename=this.data.label,this.links.folder.path=this.data.path}}),l}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(25),n(530),n(22),n(8)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";var l=n.Model.extend({defaults:{filter:"all"}});return r.extend({el:".image-picker-filter-dialog-overlay",events:{"click .x-close-btn":"_handleCancel","click .mrvl-overlay-bg":"_handleCancel","click button.filter":"_handleFilterButton"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.model=new l,t.extend(this,n.Events),this.model.set({filter:e.filter},{silent:!0})},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===a.DOM_VK_ESCAPE&&this._handleCancel()},_handleFilterButton:function(t){var n=e(t.target),i=n.data("filter");this.$el.find("button.filter").removeClass("checked"),n.addClass("checked"),this.handleCloseBtn(),this.model.set({filter:i})},render:function(){return this.$el.html(s.mustacheRender(o)),this.$el.find("button.filter").removeClass("checked"),this.$el.find("button.filter."+this.model.get("filter")).addClass("checked"),this}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="picker-filter-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="picker-filter-dialog-shell mrvl-overlay-shell">\n\n    <h2 class="title">{{imagepicker-filter-title}}</h2>\n\n    <button class="filter all checked" data-filter="all">{{imagepicker-filter-show-all}}</button>\n    <button class="filter picked" data-filter="picked">{{imagepicker-filter-picked}}</button>\n    <button class="filter picked-unflagged" data-filter="picked-unflagged">{{imagepicker-filter-picked-and-unflagged}}</button>\n\n    <button class="x-close-btn">X</button>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(25),n(532),n(22),n(8)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";var l=n.Model.extend({defaults:{sort:"all"}});return r.extend({el:".image-picker-sort-dialog-overlay",events:{"click .x-close-btn":"_handleCancel","click .mrvl-overlay-bg":"_handleCancel","click button.sort":"_handleSortButton"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.model=new l,t.extend(this,n.Events),this.model.set({sort:e.sort},{silent:!0})},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===a.DOM_VK_ESCAPE&&this._handleCancel()},_handleSortButton:function(t){var n=e(t.target),i=n.data("sort");this.$el.find("button.sort").removeClass("checked"),n.addClass("checked"),this.handleCloseBtn(),this.model.set({sort:i})},render:function(){return this.$el.html(s.mustacheRender(o)),this.$el.find("button.sort").removeClass("checked"),this.$el.find("button.sort."+this.model.get("sort")).addClass("checked"),this}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="picker-sort-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="picker-sort-dialog-shell mrvl-overlay-shell">\n\n    <h2 class="title">{{imagepicker-sort-title}}</h2>\n\n    <button class="sort capture-ascending checked" data-sort="capture-ascending">{{imagepicker-sort-ascending}}</button>\n    <button class="sort capture-descending" data-sort="capture-descending">{{imagepicker-sort-descending}}</button>\n    <button class="sort custom" data-sort="custom">{{imagepicker-sort-custom}}</button>\n\n    <button class="x-close-btn">X</button>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(25),n(22),n(8),n(534)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return r.extend({events:{"click .fb-logout-close-btn":"_handleCancel","click .fb-logout-bg":"_handleCancel","click .cancel-btn":"_handleCancel","click .confirm-btn":"_handleConfirmButton"},el:".facebook-logout-confirm-overlay",initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,n.Events)},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===o.DOM_VK_ESCAPE&&this._handleCancel()},_handleConfirmButton:function(t){e(t.target);this.handleCloseBtn(),this.trigger("confirm","user confirmed")},render:function(){var e=a.getString("logout-confirm-product-name-facebook");return this.$el.html(a.mustacheRender(s,{productName:e})),this}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="fb-logout-bg mrvl-overlay-bg">\n</div>\n<div class="fb-logout-shell mrvl-overlay-shell">\n    <h2 class="fb-logout-dialog-title">{{logout-confirm-title-facebook}}</h2>\n    <p class="fb-logout-dialog-text">{{logout-confirm-message-facebook}}</p>\n    <div class="mrvl-dlg-btn-area">\n        <button class="cancel-btn mrvl-btn">{{logout-confirm-button-cancel}}</button>\n        <button class="confirm-btn mrvl-btn">{{logout-confirm-button-disconnect}}</button>\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(25),n(22),n(8),n(536)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return r.extend({events:{"click .db-logout-close-btn":"_handleCancel","click .db-logout-bg":"_handleCancel","click .cancel-btn":"_handleCancel","click .confirm-btn":"_handleConfirmButton"},el:".dropbox-logout-confirm-overlay",initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,n.Events)},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===o.DOM_VK_ESCAPE&&this._handleCancel()},_handleConfirmButton:function(t){e(t.target);this.handleCloseBtn(),this.trigger("confirm","user confirmed")},render:function(){var e=a.getString("logout-confirm-product-name-dropbox");return this.$el.html(a.mustacheRender(s,{productName:e})),this}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="db-logout-bg mrvl-overlay-bg">\n</div>\n<div class="db-logout-shell mrvl-overlay-shell">\n    <h2 class="db-logout-dialog-title">{{#fm}}logout-confirm-title{{/fm}}</h2>\n    <p class="db-logout-dialog-text">{{#fm}}logout-confirm-message{{/fm}}</p>\n    <div class="mrvl-dlg-btn-area">\n        <button class="cancel-btn mrvl-btn">{{logout-confirm-button-cancel}}</button>\n        <button class="confirm-btn mrvl-btn">{{logout-confirm-button-disconnect}}</button>\n    </div>\n\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(25),n(22),n(8),n(538)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return r.extend({events:{"click .db-logout-close-btn":"_handleCancel","click .db-logout-bg":"_handleCancel","click .cancel-btn":"_handleCancel","click .confirm-btn":"_handleConfirmButton"},el:".google-logout-confirm-overlay",initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,n.Events)},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===o.DOM_VK_ESCAPE&&this._handleCancel()},_handleConfirmButton:function(t){e(t.target);this.handleCloseBtn(),this.trigger("confirm","user confirmed")},render:function(){var e=a.getString("logout-confirm-product-name-google");return this.$el.html(a.mustacheRender(s,{productName:e})),this}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="gp-logout-bg mrvl-overlay-bg">\n</div>\n<div class="gp-logout-shell mrvl-overlay-shell">\n    <h2 class="gp-logout-dialog-title">{{#fm}}logout-confirm-title{{/fm}}</h2>\n    <p class="gp-logout-dialog-text">{{#fm}}logout-confirm-message{{/fm}}</p>\n    <div class="mrvl-dlg-btn-area">\n        <button class="cancel-btn mrvl-btn">{{logout-confirm-button-cancel}}</button>\n        <button class="confirm-btn mrvl-btn">{{logout-confirm-button-disconnect}}</button>\n    </div>\n\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(25),n(22),n(8),n(540)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return r.extend({events:{"click .im-logout-close-btn":"_handleCancel","click .im-logout-bg":"_handleCancel","click .cancel-btn":"_handleCancel","click .confirm-btn":"_handleConfirmButton"},el:".instagram-logout-confirm-overlay",initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,n.Events)},_handleCancel:function(){this.trigger("cancel","user cancelled"),this.handleCloseBtn()},handleKeyup:function(e){e.keyCode===o.DOM_VK_ESCAPE&&this._handleCancel()},_handleConfirmButton:function(t){e(t.target);this.handleCloseBtn(),this.trigger("confirm","user confirmed")},render:function(){var e=a.getString("logout-confirm-product-name-instagram");return this.$el.html(a.mustacheRender(s,{productName:e})),this}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="im-logout-bg mrvl-overlay-bg">\n</div>\n<div class="im-logout-shell mrvl-overlay-shell">\n    <h2 class="im-logout-dialog-title">{{#fm}}logout-confirm-title{{/fm}}</h2>\n    <p class="im-logout-dialog-text">{{#fm}}logout-confirm-message{{/fm}}</p>\n    <div class="mrvl-dlg-btn-area">\n        <button class="cancel-btn mrvl-btn">{{logout-confirm-button-cancel}}</button>\n        <button class="confirm-btn mrvl-btn">{{logout-confirm-button-disconnect}}</button>\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(8),n(12),n(100)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s=r.getString("license-stock-cancel"),l=r.getString("license-stock-default-title"),c={license:{title:r.getString("license-stock-license-title"),text:"{{#fmr}}license-stock-license-text{{/fmr}}",okText:{id:"license",text:r.getString("license-stock-button-license")}},notAllowedToPurchase:{title:r.getString("license-stock-not-allowed-to-purchase-title"),text:"{{purchaseMessage}}",isAlert:!0},cantSignUp:{title:r.getString("license-stock-cant-sign-up-title"),text:r.getString("license-stock-cant-sign-up-text"),okText:"<a class='signup-link' href='{{details_url}}' target='_blank'>"+r.getString("license-stock-take-me-to-stock")+"</a>",cancelText:r.getString("license-stock-button-close")},signUp:{title:r.getString("license-stock-signup-title"),text:r.getString("license-stock-signup-text"),okText:"<a class='signup-link' href='{{details_url}}' target='_blank'>"+r.getString("license-stock-take-me-to-stock")+"</a>",cancelText:r.getString("license-stock-button-close"),returnToStockLinkText:"<a class='signup-link' href='{{details_url}}' target='_blank'>"+r.getString("license-stock-take-me-back-to-stock")+"</a>"},noCredits:{title:r.getString("license-stock-no-credits-title"),text:"<span>{{purchaseMessage}}&nbsp;&nbsp;<a class='learn-more-link' href='{{details_url}}' target='_blank'>"+r.getString("license-stock-no-credits-text")+"</a></span>",okText:[{id:"license",text:r.getString("license-stock-button-license")}],linkEvent:{selector:".learn-more-link"}},alreadyLicensed:{title:r.getString("license-stock-already-licensed-title"),text:r.getString("license-stock-already-licensed-text"),okText:r.getString("license-stock-already-licensed-ok")},licensingFailed:{title:r.getString("license-stock-licensing-failed-title"),text:r.getString("license-stock-licensing-failed-text"),cancelText:r.getString("license-stock-button-close"),okText:"<a class='license-link' href='{{details_url}}' target='_blank'>"+r.getString("license-stock-take-me-to-stock")+"</a>"},licensingFromStockSiteSucceded:{title:r.getString("license-stock-from-site-succeded-title"),text:r.getString("license-stock-from-site-succeded-text")},licensingFromStockSignUpSucceded:{title:r.getString("license-stock-signup-succeded-title"),text:r.getString("license-stock-signup-succeded-text")},signupReturnNoLicense:{title:r.getString("license-stock-signup-return-no-license-title"),okText:[{id:"checkAgain",text:r.getString("license-stock-signup-return-no-license-check-again")},{id:"returnToStock",text:"<a class='signup-link' href='{{details_url}}' target='_blank'>"+r.getString("license-stock-take-me-back-to-stock")+"</a>"}],text:"{{^referToStockSite}}"+r.getString("license-stock-signup-return-no-license-account-no-license")+"{{/referToStockSite}}{{#referToStockSite}}"+r.getString("license-stock-signup-return-no-license-no-account")+"{{/referToStockSite}}"},licenseStatusCheck:{text:r.getString("license-stock-status-check-text"),cancelText:r.getString("license-stock-status-check-cancel")},licenseStatusCheckError:{text:r.getString("license-stock-status-check-error-text")},licenseAndSignupSuccess:{text:"{{#fmr}}license-stock-license-and-signup-success{{/fmr}}"}},d=n.Model.extend({initialize:function(){t.bindAll(this,t.functionsIn(this))},showLicensingFlow:function(t){this._updateData(t),this._flowDeferred=i.defer();var n=c[this._displayType],r=this._parseSettings(n);return this._currentStrings=n,n.linkEvent&&(r.options.afterRenderCallback=function(e){e.find(n.linkEvent.selector).on("click",this._handleLinkClick.bind(this))}.bind(this)),this._showConfirm(r).then(function(t){t?"signUp"===this._displayType?this._handleSignupButton():"cantSignUp"===this._displayType?this._handleUserCancel():"license"!==t&&"alreadyLicensed"!==this._displayType||this._licenseCurrentStockAsset("alreadyLicensed"===this._displayType).then(function(e){this._flowDeferred.resolve(e)}.bind(this),function(t,n){this._parseAndShowConfirm(c.licensingFailed).then(function(i){i?(e(window).one("focus.stockassetview",this._returnedToWindowAfterStockDetail),this._waitingToReturn=!0,this._showChecking()):this._flowDeferred.reject(t,n)}.bind(this))}.bind(this)):this._handleUserCancel()}.bind(this)),this._flowDeferred.promise},_updateData:function(e){this._data=e,e.referToStockSite?this._displayType="signUp":e.notAllowedToPurchase?this._displayType="notAllowedToPurchase":e.license_type?this._displayType="alreadyLicensed":e["licenses-available"]?this._displayType="license":this._displayType="noCredits"},_licenseStockAsset:function(e){var t=i.defer();if(e.showProgress){var n=e.alreadyLicensed?r.getString("license-stock-progress-retrieving"):r.getString("license-stock-progress-licensing");o.showWaitView(n,"",{minHeight:269})}return a.licenseItem(e.imageId).then((function(n){var i={href:n.url,width:n.width,height:n.height,mimeType:n.mimeType,thumb:n.thumb,licenseType:n.licenseType};e.showProgress&&o.hide(),t.resolve(i,"licensed")})).fail((function(n){marvel.logger.error("licensing failed in licenseStockAsset",n),e.showProgress&&o.hide(),t.reject("licensing failed",n)})),t.promise},_licenseCurrentStockAsset:function(e){return this._licenseStockAsset({imageId:this._data.image_id,showProgress:!0,alreadyLicensed:e})},_handleLinkClick:function(t){var n=e(t.target);if(n.hasClass("disabled"))return t.preventDefault(),void t.stopPropagation();n.hasClass("learn-more-link")&&(n.addClass("disabled"),a.getStockAssetDetailsUrl(this._data.image_id).then((function(e){n.attr("href",e),n.removeClass("disabled")})))},handleCloseBtn:function(){this._waitingToReturn=!1,this._currentLicenseRequestPromise=null,e(window).off("focus.stockassetview",this.returnedToWindowAfterSignupButton)},_handleUserCancel:function(){this.handleCloseBtn(),this._flowDeferred.reject("cancel")},_applyNewlyLicensedImage:function(e,n){this._licenseCurrentStockAsset(!0).then(function(e){var i;if(this.referToStockSite?i=c.licenseAndSignupSuccess:n&&(i="string"==typeof n?{text:n}:n),i){var r=!1;this._parseAndShowConfirm(i).then(function(){r=!0}.bind(this)),t.delay((function(){r||o.hide()}),5e3)}this.handleCloseBtn(),this._flowDeferred.resolve(e)}.bind(this),function(e){o.hide(),this._flowDeferred.reject(e)}.bind(this))},_returnedToWindowAfterSignupButton:function(e){this._currentLicenseRequestPromise||this._checkForLicense()},_returnedToWindowAfterStockDetail:function(e){this._currentLicenseRequestPromise||this._checkForImageLicense()},_checkForImageLicense:function(){this._currentLicenseRequestPromise=a.getItemInfo(this._data.image_id).then(function(e){e.is_licensed?this._applyNewlyLicensedImage(e,c.licensingFromStockSiteSucceded):(o.hide(),this._handleUserCancel())}.bind(this),(function(e){o.hide(),this._handleUserCancel()}))},_getParsedText:function(n,i){var o;if(t.isString(n))return"<"===(o=r.mustacheRender(n,i)).charAt(0)&&(o=e(o)),o;if(Array.isArray(n)){var a=[];return t.each(n,(function(t){"<"===(o=r.mustacheRender(t.text,i)).charAt(0)&&(o=e(o)),a.push({id:t.id,text:o})})),a}return t.isObject(n)?("<"===(o=r.mustacheRender(n.text,i)).charAt(0)&&(o=e(o)),{id:n.id,text:o}):""},_parseSettings:function(e,t){return t=t||this._data,{title:this._getParsedText(e.title,t)||l,text:this._getParsedText(e.text,t),options:{cancelText:this._getParsedText(e.cancelText,t)||s,okText:this._getParsedText(e.okText,t),minHeight:269},isAlert:e.isAlert}},_parseAndShowConfirm:function(e,t){var n=this._parseSettings(e,t);return this._showConfirm(n)},_showConfirm:function(e){return e.isAlert?o.showAlert(e.title,e.text,e.options):o.showConfirm(e.title,e.text,e.options)},_checkForLicense:function(e){(e=e||{}).showChecking&&this._showChecking(),this._currentLicenseRequestPromise=a.getLicensesAvailable().then(function(e){return this._data["licenses-available"]=e.numLicenses,this._data.purchase_url=e.purchaseUrl,this._data.referToStockSite=e.requiresCheckout,this._data.purchaseMessage=e.purchaseMessage,this._data.notAllowedToPurchase=e.notAllowedToPurchase,this._currentLicenseRequestPromise?a.getItemInfo(this._data.image_id):i.reject("cancelled")}.bind(this)).then(function(e){if(!this._currentLicenseRequestPromise)return i.reject("cancelled");e.is_licensed?this._applyNewlyLicensedImage(e,c.licensingFromStockSignUpSucceded):(o.hide(),this._data.details_url=e.details_url,this._parseAndShowConfirm(c.signupReturnNoLicense).then(function(e){e?(this._currentLicenseRequestPromise=null,"checkAgain"===e?this._checkForLicense({showChecking:!0}):this._handleSignupButton()):this._handleUserCancel()}.bind(this)))}.bind(this)).catch(function(e){"cancelled"!==e&&(marvel.logger.error("error checking stock in stock asset view",e),this._parseAndShowConfirm(c.licenseStatusCheckError).then(function(e){e?(this._currentLicenseRequestPromise=null,this._checkForLicense({showChecking:!0})):this._handleUserCancel()}.bind(this)))}.bind(this))},_userCancelledWaiter:function(){this._currentLicenseRequestPromise=null,this.handleCloseBtn()},_showChecking:function(){var e=this._parseSettings(c.licenseStatusCheck);o.showCancelableWaitView(e.title,e.text,e.options).then(function(){this._userCancelledWaiter()}.bind(this))},_handleSignupButton:function(t){e(window).one("focus.stockassetview",this._returnedToWindowAfterSignupButton),this._waitingToReturn=!0,this._showChecking()}});return d.getMinHeightForConfirms=function(){return 269},d}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='\x3c!--\n--\x3e\n<div class="photo-picker">\n    <div class="picker-bar">\n        <div class="source-label" data-auto="image-picker-source-label"></div>\n        <div class="back-button" data-auto="image-picker-back-button"></div>\n        <div class="close-button" data-auto="image-picker-close-button"></div>\n    </div>\n    <div class="picker-wrapper" data-auto="image-picker-wrapper">\n        <div class="picker-home sp-picker">\n            <button class="local-file-button" data-auto="image-picker-button-local-file">{{imagepicker-browse-files}}<input class="local-file-input" data-auto="image-picker-local-file-input" type="file" accept="image/jpeg,image/png"/></button>\n\n            <div class="copy-url-wrapper hide">\n                <input class="copy-url-input" type="text" placeholder="shared Spark link" data-auto="copy-url-input"/>\n                <button class="copy-url-button"></button>\n            </div>\n            <div class="drag-and-drop-explainer-holder hide">\n                <div class="or-delimiter-wrap">\n                    <p class="or-delimiter">{{imagepicker-or}}</p>\n                </div>\n                <div class="drag-and-drop-explainer-multi-select">{{imagepicker-drop-multi-image-here}}</div>\n                <div class="drag-and-drop-explainer">{{imagepicker-drop-single-image-here}}</div>\n            </div>\n            <div class="or-delimiter-wrap">\n                <p class="or-delimiter">{{imagepicker-or}}</p>\n            </div>\n\n          <div class="picker-button-wrapper"><button class="search-button" data-auto="image-picker-button-search">{{imagepicker-find-free-photos}}</button></div>\n\n          <div class="picker-button-wrapper stock-search-button-wrapper">\n            <button class="stock-search-button" data-auto="image-picker-button-stock-search">{{imagepicker-source-adobe-stock}}\n            </button>\n          </div>\n\n          <div class="picker-button-wrapper facebook-button-wrapper">\n                <button class="facebook-button"><span>{{imagepicker-source-facebook}}</span>\n                </button>\n                <div class="facebook-logout">\n                    <div class="facebook-logout-tooltip visible"></div>\n                </div>\n            </div>\n\n            <div class="picker-button-wrapper"><button class="cc-button" data-auto="image-picker-button-cc"><span>{{imagepicker-source-creative-cloud}}</span></button></div>\n            <div class="picker-button-wrapper"><button class="lightroom-button" data-auto="image-picker-button-lightroom"><span>{{imagepicker-source-lightroom}}</span></button></div>\n\n          <div class="picker-button-wrapper dropbox-button-wrapper">\n              <div class="dropbox-button" data-auto="image-picker-button-dropbox">\n                <span class="dropbox-connect">\n                  {{imagepicker-source-dropbox-connect}}\n                </span>\n                <div class="image-source-with-disconnect">\n                  <div class="image-source-with-disconnect-source">\n                    {{imagepicker-source-dropbox}}\n                  </div>\n                  <div class="dropbox-logout">\n                    {{imagepicker-source-dropbox-disconnect}}\n                  </div>\n                </div>\n              </div>\n          </div>\n\n            <div class="picker-button-wrapper instagram-button-wrapper">\n                <button class="instagram-button"><span>{{imagepicker-source-instagram}}</span>\n                </button>\n                <div class="instagram-logout">\n                    <div class="instagram-logout-tooltip visible"></div>\n                </div>\n            </div>\n\n          <div class="picker-button-wrapper google-photos-button-wrapper hide">\n            <div class="google-photos-button" data-auto="image-picker-button-google-photos">\n              <span class="google-photos-connect">\n                {{imagepicker-source-google-photos-connect}}\n              </span>\n              <div class="image-source-with-disconnect">\n                <div class="image-source-with-disconnect-source">\n                  {{imagepicker-source-google-photos}}\n                </div>\n                <div class="google-photos-logout">\n                  {{imagepicker-source-google-disconnect}}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="picker-button-wrapper google-drive-button-wrapper hide">\n            <div class="google-drive-button" data-auto="image-picker-button-google-drive">\n              <span class="google-photos-connect">\n                {{imagepicker-source-google-drive-connect}}\n              </span>\n              <div class="image-source-with-disconnect">\n                <div class="image-source-with-disconnect-source">\n                  {{imagepicker-source-google-drive}}\n                </div>\n                <div class="google-photos-logout">\x3c!-- logout happens for both photo & drive --\x3e\n                  {{imagepicker-source-google-disconnect}}\n                </div>\n              </div>\n              \n            </div>\n          </div>\n        </div>\n        <div class="dooplo-picker sp-picker show-image-sources">\n            <div class="dooploSearchEntry">\n                <div class="search-text-hint">{{imagepicker-search-for-photo}}...</div>\n              <div class="search-text-wrapper">\n                <input class="search-text" value="" data-auto="image-picker-dooplo-search-field"/>\n              </div>\n              <button class="execute-search-button"></button>\n              <div class="dooplo-search-dropdown">\n                <div class="dooplo-search-dropdown-aligner"></div>\n              </div>\n\n            </div>\n            <div class="results">\n              <div id="results-without-bing" class="clearfix">\n                  <div class="search-sources"></div>\n                  <div class="left column"></div>\n                  <div class="right column"></div>\n\n              </div>\n              <div id="results-bing-only" class="clearfix hide">\n                <div class="search-sources"></div>\n                <div class="privacy-sources"><a href="https://go.microsoft.com/fwlink/?LinkId=521839" target="_blank">{{imagepicker-microsoft-privacy-statement}}</a></div>\n                <div class="left column"></div>\n                <div class="right column"></div>\n              </div>\n              <div class="search-progress hide">\n                  <div class="spinner"></div>\n                  <p class="content"></p>\n                </div>\n                <div class="search-failure hide">\n                  <p class="content">{{imagepicker-oops}}</p>\n                  <p class="error-detail">{{{imagepicker-search-error-message}}}</p>\n                </div>\n                <p class="no-results no-results-suggest-pixabay hide">{{imagepicker-search-no-results}}<br/>{{imagepicker-search-no-results-pixabay}}</p>\n                <p class="no-results no-results-suggest-flickr hide">{{imagepicker-search-no-results}}<br/>{{imagepicker-search-no-results-flickr}}</p>\n                <p class="no-results no-results-no-suggest-flickr hide">{{imagepicker-search-no-results}}<br/>{{imagepicker-search-no-results-desc}}</p>\n                <p class="flickr-more-results hide">{{imagepicker-search-want-more-results}}<br/>{{imagepicker-search-want-more-results-desc}}</p>\n                <p class="pixabay-more-results hide">{{imagepicker-search-want-more-results}}<br/>{{imagepicker-search-want-more-results-pixabay}}</p>\n                <div class="picker-bumper hide"></div>\n            </div>\n          <div class="search-info hide">{{imagepicker-search-info-photo}}\n            {{{imagepicker-search-info-photo-link-text}}}\n          </div>\n          <div class="search-sources hide"></div>\n          <div class="more-to-come hide"></div>\n        </div>\n        <div class="dooplo-icon-picker sp-picker show-image-sources">\n            <div class="dooploSearchEntry">\n              <div class="search-text-hint">{{imagepicker-search-for-icon}}...</div>\n              <div class="search-text-wrapper">\n                <input class="search-text" value=""/>\n              </div>\n              <button class="execute-search-button"></button>\n            </div>\n            <div class="results">\n              <div class="left column"></div>\n              <div class="search-progress hide">\n                <div class="spinner"></div>\n                <p class="content"></p>\n              </div>\n              <p class="no-results hide">{{imagepicker-search-no-results}}<br/>{{imagepicker-search-no-results-desc}}</p>\n              <div class="picker-bumper hide"></div>\n            </div>\n          <div class="search-info hide">{{imagepicker-search-info-icon}} {{#fmr}}imagepicker-search-info-icon-link-text{{/fmr}}\n          </div>\n          <div class="search-sources hide"></div>\n          <div class="more-to-come hide"></div>\n        </div>\n      <div class="stock-picker sp-picker">\n          <div class="stockViewTypeTabs">\n              <button class="stockShowSearchButton">{{imagepicker-search-stock}}</button>\n              <button class="stockShowLicenseHistoryButton">{{imagepicker-licensed-images}}</button>\n            </div>\n          <div class="stockSearchEntry">\n              <div class="search-text-hint">{{imagepicker-search-for-photo}}...</div>\n            <div class="search-text-wrapper">\n              <input class="search-text" value="" data-auto="image-picker-stock-search-field"/>\n            </div>\n            <button class="execute-search-button"></button>\n          </div>\n        <div class="stockLicenses calculating noSearch fromNoSearch">{{imagepicker-standard-assets-remaining}} <span class="count"></span></div>\n        <div class="stockLicenses calculating search fromNoSearch">{{imagepicker-standard-assets-remaining}} <span class="count"></span></div>\n          <div class="results">\n              <div class="left column"></div>\n              <div class="right column"></div>\n            <div class="search-progress hide">\n              <div class="spinner"></div>\n              <p class="content"></p>\n            </div>\n            <div class="search-failure hide">\n              <p class="content">{{imagepicker-oops}}</p>\n              <p class="error-detail">{{{imagepicker-search-error-message}}}</p>\n            </div>\n            <p class="no-results hide"><span class="no-results-search">{{imagepicker-search-no-results}}<br/>{{imagepicker-search-no-results-desc}}</span><span class="no-results-history"><span class="no-results-history-title">{{imagepicker-no-licensed-images}}</span><br/>{{{imagepicker-search-adobe-stock}}}</span></p>\n            <div class="picker-bumper hide"></div>\n          </div>\n        <div class="search-info hide">{{imagepicker-search-info-stock}}<br/>\n          {{#fmr}}imagepicker-search-info-stock-link-text{{/fmr}}\n        </div>\n        <div class="more-to-come hide"></div>\n      </div>\n        <div class="creative-cloud-picker sp-picker">\n          <div class="results-carrier">\n            <div class="results">\n              <div class="folders"></div>\n              <div class="left column"></div>\n              <div class="right column"></div>\n              <div class="no-photos hide"><h2>{{imagepicker-no-files}}</h2>\n                <p>{{imagepicker-no-files-creative-cloud}}</p>\n                <div class="learn-more"><a href="https://helpx.adobe.com/creative-cloud/help/sync-files.html" target="_blank">{{imagepicker-learn-more}}</a></div>\n              </div>\n              <div class="picker-bumper"></div>\n            </div>\n          </div>\n        </div>\n        <div class="lightroom-picker sp-picker">\n          <div class="results-wrapper">\n            <div class="results-carrier">\n              <div class="results">\n                <div class="folders"></div>\n                <div class="left column"></div>\n                <div class="right column"></div>\n                <div class="no-photos hide"><h2>{{imagepicker-no-files-lightroom}}</h2>\n                  <p>{{imagepicker-no-files-lightroom-desc}} <a class="learn-more"href="https://lightroom.adobe.com" target="_blank">{{imagepicker-learn-more}}</a></p>\n                </div>\n                <div class="picker-bumper"></div>\n              </div>\n            </div>\n          </div>\n          <div class="buttons-wrapper">\n            <button class="filter">{{imagepicker-filter}}</button>\n            <button class="sort">{{imagepicker-sort}}</button>\n          </div>\n        </div>\n      <div class="dropbox-picker sp-picker">\n        <div class="results-carrier">\n          <div class="results">\n            <div class="folders"></div>\n            <div class="left column"></div>\n            <div class="right column"></div>\n            <div class="no-photos hide">{{imagepicker-no-photos-folder}}</div>\n            <div class="picker-bumper"></div>\n          </div>\n        </div>\n      </div>\n\n        <div class="facebook-picker sp-picker">\n            <div class="results-carrier">\n                <div class="results">\n                    <div class="folders"></div>\n                    <div class="left column"></div>\n                    <div class="right column"></div>\n                    <div class="no-photos hide">{{imagepicker-no-photos-folder}}</div>\n                    <div class="picker-bumper"></div>\n                </div>\n            </div>\n        </div>\n\n        <div class="instagram-picker sp-picker">\n            <div class="results-carrier">\n                <div class="results">\n                    <div class="folders"></div>\n                    <div class="left column"></div>\n                    <div class="right column"></div>\n                    <div class="no-photos hide">{{imagepicker-no-photos-folder}}</div>\n                    <div class="picker-bumper"></div>\n                </div>\n            </div>\n        </div>\n\n      <div class="google-photos-picker sp-picker">\n        <div class="results-carrier">\n          <div class="results">\n            <div class="folders"></div>\n            <div class="left column"></div>\n            <div class="right column"></div>\n            <div class="no-photos hide">{{imagepicker-no-photos-folder}}</div>\n            <div class="picker-bumper"></div>\n          </div>\n        </div>\n      </div>\n        <div class="more-to-come shared"></div>\n    </div>\n    <div class="picker-progress hide">\n        <div class="spinner"></div>\n        <div class="content"></div>\n    </div>\n\n</div>\n<div class="lightroom-importer-wrapper hide"></div>\n<div class="image-picker-filter-dialog-overlay hide"></div>\n<div class="image-picker-sort-dialog-overlay hide"></div>\n<div class="dropbox-logout-confirm-overlay hide"></div>\n<div class="facebook-logout-confirm-overlay hide"></div>\n<div class="google-logout-confirm-overlay hide"></div>\n<div class="instagram-logout-confirm-overlay hide"></div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(6),n(8),n(56),n(297),n(544),n(545)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c){"use strict";function d(e,t){this._init(e,t)}function u(e,t){var n,i,r,o,a=e.assetSources?e.assetSources[t.id]:null;if(a&&a.search&&a.search.predicates)for(r=a.search.predicates,n=0;r.terms&&n<r.terms.length;n++)for(o=r.terms[n],i=0;"text"===o.type&&o.fields&&i<o.fields.length;i++)if("albumName"===o.fields[i])return o.query;return null}function h(e,t){var n=e.assetSources?e.assetSources[t.id]:null,i=null;return n&&n.search&&n.search.sort&&(i=n.search.sort),i}function p(e,t){var n,i,r,o,a=e.assetSources?e.assetSources[t.id]:null,s=[];if(a&&a.search&&a.search.predicates)for(r=a.search.predicates,n=0;r.terms&&n<r.terms.length;n++)for(o=r.terms[n],i=0;"text"===o.type&&o.fields&&i<o.fields.length;i++)"review"===o.fields[i]&&s.push(o);return s}return e.extend(d.prototype,s.prototype,{show:function(t){var n,i=this.$ele,s=e("<iframe>");if(!this.$ele.children().length){this.options=this.options||{},this.options.multiSelect=t.multiSelect,n=window.marvel.settings.lightroomImporter;var l=o.getLocale(),d=a.getAppLocale("lightroom",l,"en-US"),u=function(e){if(console.log("message event  received:",e),"LRImporter ready"===e.data.message){var t=i.find("iframe")[0].contentWindow;r.getAccessToken().then(function(e){t.handlers.setImagePickerContext({view:this,imsStack:"stage",imsToken:e,environment:n,lightroomLocale:d,albumName:this.albumName,singleSelect:!this.options.multiSelect,searchFilters:this.searchFilters,searchOrder:this.searchOrder})}.bind(this)).catch(function(e){this.$ele.addClass("hide").children().remove()}.bind(this)),window.removeEventListener("message",u)}}.bind(this);window.addEventListener("message",u,!1),marvel.features.hasFeature("lightroom-importer-overlay")?(this.lightroomImporterView=new c,this.lightroomImporterView.on("cancel",function(){this.importLightroom()}.bind(this)),this.lightroomImporterView.showOverlay()):(s[0].src="/marvel-core/lightroomImporter.html",i.append(s),i.removeClass("hide"))}},getLastCrumb:function(){return null},jumpTo:function(e,t,n){this.albumName=e,this.show(n)},hide:function(){this.$ele.addClass("hide").children().remove()},importLightroom:function(e){var t,n,i,r=[];if(this.hide(),this.lightroomImporterView&&(this.lightroomImporterView.hideOverlay(),this.lightroomImporterView.off("cancel"),this.lightroomImporterView=null),e&&e.resources&&e.resources.length){for(t=this.options.multiSelect?e.resources.length:1,n=0;n<t;n++){var o=e.resources[n].asset;(i=new l(this.ozV1AssetFromOzV2Asset(e,o))).albumName=u(e,o),r.push(i),this.searchFilters=p(e,o),this.searchOrder=h(e,o)}this._userCallback&&this._userCallback(r)}},_loadLrSDK:function(){var e=i.defer(),t=document.createElement("script");t.onload=function(){e.resolve()},t.onerror=function(){e.reject(new Error("LightroomPicker::_loadLrSDK"))};var n=window.marvel.settings.lightroomImporter||"prod";return t.src="stage"===n?"https://stage.adobelr.com/sdk/lr-sdk.js":"https://lightroom.adobe.com/sdk/lr-sdk.js",document.body.appendChild(t),e.promise},_initLrSDK:function(){return r.getAccessToken().then((function(e){return window.LrSDK.initializeP({clientId:"MarvelWeb1",token:e,environment:window.marvel.settings.lightroomImporter||"prod"},"importer","catalog")}))},ensureLrSDKIsAvailable:function(){return this._LrSDKLoadedPromise||(window.LrSDK?this._LrSDKLoadedPromise=this._initLrSDK():this._LrSDKLoadedPromise=this._loadLrSDK().then(function(){return this._initLrSDK()}.bind(this))),this._LrSDKLoadedPromise},ozV1AssetFromOzV2Asset:function(e,t){var n,i=1280,r=960,o=t.payload.develop;if(o&&o.croppedWidth>0&&o.croppedHeight>0)i=o.croppedWidth,r=o.croppedHeight;else{var a=t.payload.importSource;a.originalWidth>0&&a.originalHeight>0&&(i=a.originalWidth,r=a.OriginalHeight)}var s=t.payload.xmp;s&&s.dc&&(n=s.dc.description);var l=/^https?:\/\/[a-z\-\:0-9.]+\/v2/,c="/v1.0";var d,u={id:t.id,subtype:t.subtype,payload:(d={width:i,height:r},n&&(d.caption=n),d),links:function(){var n="",i=l.exec(e.base);i&&(n=e.base.replace(i[0],c));var r={},o=t.links["/rels/rendition_type/2048"]?t.links["/rels/rendition_type/2048"].href:void 0;return o&&(r["/rels/rendition_type/2048"]={href:n+o}),(o=t.links["/rels/rendition_type/thumbnail2x"]?t.links["/rels/rendition_type/thumbnail2x"].href:void 0)&&(r["/rels/rendition_type/thumbnail2x"]={href:n+o}),r}()};if(t.largeRenditionRequestData){var h=JSON.parse(t.largeRenditionRequestData);u.largeRenditionRequest=function(){return this.ensureLrSDKIsAvailable().then((function(){return window.LrSDK.catalog.get2560RenditionRelativeUrlP(h.base,h.asset)})).then((function(e){var t=h.base.replace(l,c);return"https://"+window.location.host+"/lr_files"+t+e}))}.bind(this)}return u}}),d}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(98),n(212),n(6),n(3)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";var s="https://"+window.location.host,l=s+"/lr_files";function c(e){i.prototype._init.call(this,e)}return t.extend(c.prototype,i.prototype,{_parseData:function(){var e,t,n=this.data;this.links.preview.href="",this.isDir=/\:album\:[^\:]+$/.test(n.id),this.isDir?(this.links.folder={},this.links.folder.path=n.links.self.href,this.links.folder.filename=n.name,this.cover=n.cover,this.has_cover=!0):(e=n.links,t=t||(e["/rels/rendition_type/2048"]?e["/rels/rendition_type/2048"].href:void 0),this.links.thumb.href=e["/rels/rendition_type/thumbnail2x"]?e["/rels/rendition_type/thumbnail2x"].href:t,this.links.thumb.href=l+this.links.thumb.href,this.links.thumb.filename=n.name,this.links.preview.href=t,this.links.preview.href=l+t,this.links.preview.filename=n.name,this.links.original.href=l+t,this.links.original.filename=n.name,this.links.original.width=n.payload.width,this.links.original.height=n.payload.height,this.aspect={width:n.payload.width,height:n.payload.height},this.caption=n.payload.caption,this.largeRenditionRequest=n.largeRenditionRequest)},getMimeType:function(){return"image/"+this.data.subtype},hasCover:function(){return this.has_cover},getCover:function(){var e,t=a.defer(),n=s+"/lr_files",i=this.data;return this.hasCover()?this.cover&&this.cover.links&&this.cover.links["/rels/rendition_type/thumbnail2x"]?t.resolve(n+this.cover.links["/rels/rendition_type/thumbnail2x"].href):(e=n+i.links["/rels/album_assets"].href+"?limit=1&subtype=jpeg;png",o.ajax(e,{dataType:"text"}).done((function(i,r,o){var a,s=function(e){var t,n=e.replace(/^while \(1\) \{\}/,"");try{t=JSON.parse(n)}catch(e){console.warn("LR json data parse failed")}return t}(i);s&&s.assets&&s.assets.length?(a=s.assets[0],e=n+a.links["/rels/rendition_type/thumbnail2x"].href,t.resolve(e)):t.reject("no assets")})).fail((function(){t.reject("not available")}))):t.reject("no cover available"),t.promise},canSetFilter:function(){return!0}}),c}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(25),n(546),n(22)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";return r.extend({el:".lightroom-importer-wrapper",events:{"click .lightroom-importer-bg":"_handleCancel"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),t.extend(this,n.Events)},_handleCancel:function(){this.hideOverlay(),this.trigger("cancel","user cancelled")},handleKeyup:function(e){e.keyCode===a.DOM_VK_ESCAPE&&this._handleCancel()},render:function(){var e=window.marvel.settings.lightroomImporter;return this.$el.html(o.toString()),this.$el.find("iframe")[0].src="/marvel-core/lightroomImporter.html?env="+e,this}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="lightroom-importer-bg mrvl-overlay-bg">\n</div>\n<div class="lightroom-importer-dialog-shell mrvl-overlay-shell">\n  <iframe></iframe>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2)],void 0===(r=function(e,t,n){"use strict";return n.Model.extend({defaults:{label:"",picker:null,page:null,source:""}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(3),n(346)],void 0===(r=function(e,t){"use strict";return new(t.extend({SERVICE_NAME:"GoogleApi",SERVICE_URI:"https://apis.google.com/js/api.js",init:function(){this.deferred||(this.deferred=e.defer()),window.gapi||this.initializing||(marvel.logger.info(this.SERVICE_NAME+" Initializing"),this._loadLibrary(),this.initializing=!0)},_loadLibrary:function(){var e=document.createElement("script");e.type="text/javascript",e.src=this.SERVICE_URI,e.onload=this.onLoad.bind(this),marvel.logger.info(this.SERVICE_NAME+" Loading"),document.body.appendChild(e)},onLoad:function(){marvel.logger.info(this.SERVICE_NAME+" Successfully loaded"),this.deferred.resolve()},whenAvailable:function(){return this.deferred.promise}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(397),n(550),n(551),n(7),n(8),n(56),n(4)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d){"use strict";return r.extend({initialize:function(){r.prototype.initialize.call(this),t.bindAll(this,t.functionsIn(this)),this.zoomInOut=!0,this.on("cancel",(function(){this.close()})),this._productName=s.getProductName()},imageAttributesEvent:function(e){"close"===e.type?this.close():"move"===e.type&&this.move(e.location)},close:function(){if(this._registeredModEvent&&(marvel.events.off("image-attributes-event",this.imageAttributesEvent.bind(this)),this._registeredModEvent=!1),this.hideOverlay(),this._defer){var e=this._defer;this._defer=null,e.resolve("popup-dismissed")}},handleLicensingStage:function(e,t){"licensing"===e?(marvel.logger.debug("License Me!",this.info),this.hideOverlay()):"licensed"===e?this.options.licenseUpdatedCallback?(this.options.licenseUpdatedCallback(t,this.info),this._defer.resolve("licensed")):this._defer.resolve({newItemInfo:t,info:this.info,changeType:"licensed"}):"licensing-rejected"===e?"licensing cancelled"===t?this._defer.resolve("popup-dismissed"):this._defer.reject(t):"error"===e&&(marvel.logger("License me failed!",this.info),this._defer.reject(t))},showOverlayWithData:function(e,t){this._registeredModEvent||(marvel.events.on("image-attributes-event",this.imageAttributesEvent.bind(this)),this._registeredModEvent=!0);var n=e.info,i="GIPHY"==n.license.source_name,r=i?"attribution-copyright-info-giphy":"attribution-copyright-info",a=i?d.giphyBaseUrl+n.license.owner:"#",s=!i,u=i,h=l.getLocale(),p={owner:n.license.owner,ownerUrl:a,photoName:n.license.photo_name,sourceName:n.license.source_name,licenseType:l.formatMessage("attribution-license-types",{licenseType:n.license.type}),attributionOriginalSourceUri:n.license.source_url||"#",showLicenseField:s,showlinkToCreatorPage:u,copyrightInfoText:l.formatMessage(r,{copyrightUrl:c.getLocalizedURL("https://adobe.com/legal/permissions/image-notice.html",h)}),attributionLicenseText:l.formatMessage("attribution-license-text",{licenseUrl:c.getLocalizedURL("https://stock.adobe.com/license-terms",h)})};this.update(e),this.afterRenderCallback=this.updateAfterRender.bind(this),this.template=l.mustacheRender(o,p),this.showOverlay(this),this._defer=t},isShowing:function(){return!this.$el.hasClass("hide")},handleLicensing:function(){var e=this.info.license,t={image_id:e.image_id,owner:e.owner,photo_name:e.photo_name,source_name:e.source_name,license_type:e.type};this.handleLicensingStage("licensing"),this.imagePickerView.licenseStockAsset(t).then(function(e){this.handleLicensingStage("licensed",e),s.trackEvent("StockAssetLicensingSuccess",{contextData:["projectId"]},this._productName+":editor")}.bind(this),function(e){this.handleLicensingStage("licensing-rejected",e),"licensing cancelled"===e?s.trackEvent("StockAssetLicensingCancelled",{contextData:["projectId"]},this._productName+":editor"):s.trackEvent("StockAssetLicensingFailed",{contextData:["projectId"]},this._productName+":editor")}.bind(this))},handleShowOriginalStockSource:function(e){var t=this.$el.find(".original_source");if(t.hasClass("disabled"))e.preventDefault();else{t.addClass("disabled");var n={image_id:this.info.license.image_id};this.imagePickerView.getStockAssetDetailUrl(n).then((function(e){t.attr("href",e),t.removeClass("disabled")})).done()}},updateAfterRender:function(){var e=this.info.license;if(this.$el.hasClass("auto-height")||(this.$el.addClass("auto-height"),this.imagePickerView.isLicenseForStock(e)||this.contentModified()),!this.imagePickerView.isLicenseForStock(e))return!1;var t=this.$el.find(".original_source"),n=this.$el.find(".license_wrapper"),i={image_id:e.image_id};return this.licenseHandlerObjects||(this.licenseHandlerObjects={}),this.on("cancel",(function(){this.licenseHandlerObjects&&(this.licenseHandlerObjects.$buttonWrapper&&this.licenseHandlerObjects.$buttonWrapper.off("click"),this.licenseHandlerObjects.$originalSource.off("click"),this.licenseHandlerObjects=null)})),n.removeClass("hide"),this.$el.find(".copyright_info").addClass("hide"),"royalty_free"===e.type?(n.find(".license_photo_button").on("click",function(){s.trackEvent("LicenseBtnClickedOnAtrView",{contextData:["projectId"]},this._productName+":editor"),this.handleLicensing()}.bind(this)).removeClass("hide"),this.licenseHandlerObjects.$buttonWrapper=n):n.find(".license_photo_button").addClass("hide"),t.addClass("disabled"),t.on("click",this.handleShowOriginalStockSource.bind(this)),this.imagePickerView.getStockAssetDetailUrl(i).then((function(e){t.attr("href",e).removeClass("disabled")})).done(),this.licenseHandlerObjects.$originalSource=t,this.contentModified(),!0}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="attribution-dialog-bg mrvl-overlay-bg">\n</div>\n<div class="attribution-dialog-shell mrvl-overlay-shell">\n\n  <div class="pointer"></div>\n  <h2 class="photo_name">{{photoName}}</h2>\n\n\n\n  {{#showlinkToCreatorPage}}\n  <p><span class="by label">{{attribution-label-by}} </span>\n    <span class="owner"><a class="original_source" href="{{ownerUrl}}" target="_blank">{{owner}}</a></span>\n  </p>\n  {{/showlinkToCreatorPage}}\n  {{^showlinkToCreatorPage}}\n  <p><span class="by label">{{attribution-label-by}} </span>\n    <span class="owner">{{owner}}</span>\n  </p>\n  {{/showlinkToCreatorPage}}\n\n  <p><span class="source label">{{attribution-label-source}} </span>\n    <span class="source_name">{{sourceName}}</span>\n  </p>\n\n  {{#showLicenseField}}\n  <p><span class="license label">{{attribution-label-license}} </span>\n    <span class="license_type">{{licenseType}}</span>\n  </p>\n  {{/showLicenseField}}\n\n  <p class="original_source_wrapper"><a class="original_source" href="{{attributionOriginalSourceUri}}" target="_blank">{{attribution-original-source-link}}</a></p>\n\n  <p class="copyright_info">{{{copyrightInfoText}}}</p>\n  <div class="license_wrapper hide">\n    <p class="license_wrapper-text">{{{attributionLicenseText}}}</p>\n    <button class="license_photo_button">{{attribution-license-button}}</button>\n  </div>\n</div>\n'},function(e,t,n){var i=n(552);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(34)(!1)).push([e.i,".attribution-dialog-bg.mrvl-overlay-bg{background-color:transparent}.attribution-dialog-overlay.auto-height .mrvl-overlay-shell.attribution-dialog-shell{height:auto}.attribution-dialog-overlay.zoomInOut .mrvl-overlay-shell.attribution-dialog-shell{transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;-webkit-transform:translate(-50%) scale(1);transform:translate(-50%) scale(1)}.attribution-dialog-overlay.zoomInOut .mrvl-overlay-shell.attribution-dialog-shell.no-transition{transition:none}.attribution-dialog-overlay.zoomInOut.transitioned-out .mrvl-overlay-shell.attribution-dialog-shell{-webkit-transform:translate(-50%) scale(0);transform:translate(-50%) scale(0)}.attribution-dialog-overlay.generic .mrvl-overlay-shell.attribution-dialog-shell p .label{color:#284660;font-size:12px}.mrvl-overlay-shell.attribution-dialog-shell{height:244px;width:222px;border-radius:6px;font-family:adobe-clean,Helvetica Neue,Helvetica,Arial,sans-serif;padding:15px 15px 20px;margin:0;text-align:left;-webkit-transform:translate(-50%);transform:translate(-50%);box-sizing:border-box;border:1px solid rgba(0,0,0,.1);box-shadow:0 0 8px 0 rgba(0,0,0,.1)}.mrvl-overlay-shell.attribution-dialog-shell.auto-height{height:auto}.mrvl-overlay-shell.attribution-dialog-shell *{color:#35414c;font-size:12px;font-weight:400}.mrvl-overlay-shell.attribution-dialog-shell p{margin:0;line-height:19px;overflow:hidden;text-overflow:ellipsis}.mrvl-overlay-shell.attribution-dialog-shell p .label{font-weight:700}.mrvl-overlay-shell.attribution-dialog-shell p a{font-weight:700;text-decoration:none;display:inline-block;border-bottom:3px solid #e8ebed}.mrvl-overlay-shell.attribution-dialog-shell .copyright_info{color:#9aa6af}.mrvl-overlay-shell.attribution-dialog-shell h2{font-family:brandon-grotesque,adobe-clean,sans-serif;font-size:17px;font-weight:700;margin:0 0 4px;line-height:22px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:left}.mrvl-overlay-shell.attribution-dialog-shell .license_wrapper{text-overflow:clip;margin-top:10px}.mrvl-overlay-shell.attribution-dialog-shell .license_wrapper .license_photo_button{font-size:1.23em;font-family:adobe-clean,sans-serif;font-weight:700;height:32px;padding:6px 16px 7px;margin-top:18px;cursor:pointer;background-color:#1473e6;color:#fff;position:relative;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);transition:background-color .2s ease-in,color .2s ease-in;border-radius:24px}.mrvl-overlay-shell.attribution-dialog-shell .license_wrapper .license_photo_button:hover{background-color:#1269d0}.mrvl-overlay-shell.attribution-dialog-shell .license_wrapper .license_photo_button:active{background-color:#1056a7}.mrvl-overlay-shell.attribution-dialog-shell .original_source.disabled{font-weight:400}.mrvl-overlay-shell.attribution-dialog-shell p.copyright_info{margin-top:8px;line-height:17px}.mrvl-overlay-shell.attribution-dialog-shell .pointer{display:block;position:absolute;background-color:#fff;right:-5px;left:auto;top:200px;-webkit-transform:rotate(225deg);transform:rotate(225deg);width:10px;height:10px;border-radius:2px;border-top:1px solid rgba(0,0,0,.1);border-right:1px solid rgba(0,0,0,.1);box-shadow:4px -4px 4px 0 rgba(0,0,0,.05)}.mrvl-overlay-shell.attribution-dialog-shell .pointer.on-right{-webkit-transform:rotate(45deg);transform:rotate(45deg)}",""])},function(e,t,n){"use strict";n.r(t);var i=n(46),r=n(292),o=n(268),a=n(293),s=n(343),l=function(e){function t(e,n){var a;return i(this,t),(a=r(this,o(t).call(this,e))).userMessage=n&&n.userMessage,a}return a(t,e),t}(function(e){function t(e){var n;return i(this,t),(n=r(this,o(t).call(this,e))).name=n.constructor.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(n),n.constructor),n}return a(t,e),t}(n(416)(Error)));t.default=l},function(e,t){},function(e,t){},function(e,t,n){"use strict";(function(t){var i=n(14),r=n(584),o=new Array(16);function a(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function s(e,t){return e<<t|e>>>32-t}function l(e,t,n,i,r,o,a){return s(e+(t&n|~t&i)+r+o|0,a)+t|0}function c(e,t,n,i,r,o,a){return s(e+(t&i|n&~i)+r+o|0,a)+t|0}function d(e,t,n,i,r,o,a){return s(e+(t^n^i)+r+o|0,a)+t|0}function u(e,t,n,i,r,o,a){return s(e+(n^(t|~i))+r+o|0,a)+t|0}i(a,r),a.prototype._update=function(){for(var e=o,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,i=this._b,r=this._c,a=this._d;n=l(n,i,r,a,e[0],3614090360,7),a=l(a,n,i,r,e[1],3905402710,12),r=l(r,a,n,i,e[2],606105819,17),i=l(i,r,a,n,e[3],3250441966,22),n=l(n,i,r,a,e[4],4118548399,7),a=l(a,n,i,r,e[5],1200080426,12),r=l(r,a,n,i,e[6],2821735955,17),i=l(i,r,a,n,e[7],4249261313,22),n=l(n,i,r,a,e[8],1770035416,7),a=l(a,n,i,r,e[9],2336552879,12),r=l(r,a,n,i,e[10],4294925233,17),i=l(i,r,a,n,e[11],2304563134,22),n=l(n,i,r,a,e[12],1804603682,7),a=l(a,n,i,r,e[13],4254626195,12),r=l(r,a,n,i,e[14],2792965006,17),n=c(n,i=l(i,r,a,n,e[15],1236535329,22),r,a,e[1],4129170786,5),a=c(a,n,i,r,e[6],3225465664,9),r=c(r,a,n,i,e[11],643717713,14),i=c(i,r,a,n,e[0],3921069994,20),n=c(n,i,r,a,e[5],3593408605,5),a=c(a,n,i,r,e[10],38016083,9),r=c(r,a,n,i,e[15],3634488961,14),i=c(i,r,a,n,e[4],3889429448,20),n=c(n,i,r,a,e[9],568446438,5),a=c(a,n,i,r,e[14],3275163606,9),r=c(r,a,n,i,e[3],4107603335,14),i=c(i,r,a,n,e[8],1163531501,20),n=c(n,i,r,a,e[13],2850285829,5),a=c(a,n,i,r,e[2],4243563512,9),r=c(r,a,n,i,e[7],1735328473,14),n=d(n,i=c(i,r,a,n,e[12],2368359562,20),r,a,e[5],4294588738,4),a=d(a,n,i,r,e[8],2272392833,11),r=d(r,a,n,i,e[11],1839030562,16),i=d(i,r,a,n,e[14],4259657740,23),n=d(n,i,r,a,e[1],2763975236,4),a=d(a,n,i,r,e[4],1272893353,11),r=d(r,a,n,i,e[7],4139469664,16),i=d(i,r,a,n,e[10],3200236656,23),n=d(n,i,r,a,e[13],681279174,4),a=d(a,n,i,r,e[0],3936430074,11),r=d(r,a,n,i,e[3],3572445317,16),i=d(i,r,a,n,e[6],76029189,23),n=d(n,i,r,a,e[9],3654602809,4),a=d(a,n,i,r,e[12],3873151461,11),r=d(r,a,n,i,e[15],530742520,16),n=u(n,i=d(i,r,a,n,e[2],3299628645,23),r,a,e[0],4096336452,6),a=u(a,n,i,r,e[7],1126891415,10),r=u(r,a,n,i,e[14],2878612391,15),i=u(i,r,a,n,e[5],4237533241,21),n=u(n,i,r,a,e[12],1700485571,6),a=u(a,n,i,r,e[3],2399980690,10),r=u(r,a,n,i,e[10],4293915773,15),i=u(i,r,a,n,e[1],2240044497,21),n=u(n,i,r,a,e[8],1873313359,6),a=u(a,n,i,r,e[15],4264355552,10),r=u(r,a,n,i,e[6],2734768916,15),i=u(i,r,a,n,e[13],1309151649,21),n=u(n,i,r,a,e[4],4149444226,6),a=u(a,n,i,r,e[11],3174756917,10),r=u(r,a,n,i,e[2],718787259,15),i=u(i,r,a,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+i|0,this._c=this._c+r|0,this._d=this._d+a|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=new t(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=a}).call(this,n(16).Buffer)},function(e,t,n){(e.exports=n(34)(!1)).push([e.i,".act-as-font-picker-overlay,.font-picker-dialog.act-as-font-picker-overlay{position:absolute;top:0;left:0;right:0;bottom:0}.font-picker-shell{background-color:#fff;position:absolute;top:20px;left:300px;box-shadow:0 3px 6px 0 rgba(26,34,38,.25);border-radius:4px;z-index:100000;line-height:1;font-size:13px}.font-picker-shell.pop-top .font-picker-carrot{top:auto;left:24px;bottom:-6px}.font-picker-shell.pop-left .font-picker-carrot{top:48.5%;left:auto;right:-6px}.font-picker-shell.pop-right .font-picker-carrot{top:48.5%;left:-6px}.font-picker-shell.pop-right .font-picker-buttons{left:11px;right:27px}.font-picker-shell.card-mode .font-card-picker{display:block;padding:30px 53px}.font-picker-shell.body-mode .font-body-picker,.font-picker-shell.face-mode .font-face-picker,.font-picker-shell.headline-mode .font-headline-picker{display:block}.font-picker-shell.no-carrot .font-picker-carrot{display:none}.font-card{width:224px;height:238px;float:left;position:relative}.font-card .font-card-body-font,.font-card .font-card-headline-font{font-size:1em;font-weight:400;font-family:adobe-clean;text-transform:uppercase;color:#82919b;margin-bottom:10px}.font-card .font-card-body-render,.font-card .font-card-headline-render{color:#242c33}.font-card .font-card-headline-render{font-size:3.33em;margin-bottom:28px}.font-card .font-card-body-render{font-size:1.2em;line-height:1.3em}.font-card-picker{display:none;height:355px;width:333px}.font-card-picker .font-card{display:block}.font-card-picker .font-card.hide{display:none}.font-card-picker-stack{width:224px;height:238px}.font-card-picker-prev-btn{-webkit-transform:translateY(-50%);transform:translateY(-50%);left:20px}.font-card-picker-next-btn,.font-card-picker-prev-btn{position:absolute;width:8px;height:14px;background-color:transparent;background-repeat:no-repeat;background-size:contain;background-position:50%;background-image:url(/images/brandkit/chevron-left-gray.svg);top:50%;outline:none;cursor:pointer}.font-card-picker-next-btn{-webkit-transform:translateY(-50%) rotate(180deg);transform:translateY(-50%) rotate(180deg);right:20px}.font-card-picker-save-btn{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:23px;color:#35414c;border:2px solid #35414c;border-radius:100px;background-color:transparent;font-size:14px;font-weight:700;font-family:adobe-clean;padding:9px 15px 10px;outline:none;cursor:pointer}.font-picker-carrot{box-shadow:0 3px 6px 0 rgba(26,34,38,.25);position:absolute;top:-6px;left:24px;width:13px;height:13px;z-index:3333;background-color:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.font-picker-loading-screen{display:none;position:absolute;top:0;left:0;bottom:0;right:0;background-color:#fff;z-index:3335}.font-picker-loading-screen .font-picker-loading-screen-title{-webkit-transform:translateX(-50%);transform:translateX(-50%);position:absolute;top:50%;left:50%;margin-top:-74px;font-size:20px;font-weight:700;font-family:brandon-grotesque,adobe-clean,sans-serif;color:#29465f}.font-picker-loading-screen .font-picker-loading-screen-spinner{position:absolute;top:50%;left:50%;margin-top:-30px;margin-left:-30px;font-size:4.5px;text-indent:-9999em;border:3px solid #4275d6;border-left:3px solid #e5e5e5;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation:load8 1.1s infinite linear;animation:load8 1.1s infinite linear;will-change:transform;border-radius:50%;width:60px;height:60px}.font-picker-loading-screen .font-picker-loading-screen-spinner:after{border-radius:50%;width:10em;height:10em}.font-picker-loading-screen .font-picker-loading-screen-label{color:#35414c;position:absolute;top:50%;margin-top:48px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.font-picker-shell.loading .font-picker-loading-screen{display:block}.font-picker-content-shell{background-color:#fff;position:relative;border-radius:5px;z-index:3334;overflow:hidden}.font-picker-content-shell h3{text-transform:uppercase;color:#82919b;font-size:12px;font-weight:700;padding:0 0 4px;margin:10px 20px;position:relative}.font-picker-content-shell h3:after{content:\"\";display:block;border-radius:2px;bottom:-2px;left:0;width:100%;height:2px;background-color:#f2f4f5;position:absolute}.font-picker-content-shell .custom-font-upload{padding:20px}.font-picker-content-shell .custom-font-upload .custom-font-i-swear{padding:10px 10px 20px;font-size:13px;font-weight:400;width:450px;line-height:16px}.font-picker-content-shell .custom-font-upload label{display:inline-block;width:80px;text-align:right;margin-right:20px;margin-bottom:10px}.font-picker-content-shell .custom-font-upload .custom-font-upload-group.hide{display:none}.font-face-picker{padding:15px 0 0}.font-body-picker,.font-face-picker{display:none;height:380px;width:250px;overflow-x:hidden;overflow-y:auto}.font-body-picker{padding:10px 0}.font-body-picker .font-picker-face-v2.active{background-color:#f2f4f5}.font-body-picker .font-picker-face-v2.active:after{display:none}.font-headline-picker{display:none;height:380px;width:250px;padding:15px 0 0;overflow-x:hidden;overflow-y:auto}.font-picker-separator{font-size:16px;font-weight:700;font-family:adobe-clean;color:#000;border-bottom:1px solid #adb9c3;padding-bottom:10px;margin:10px 10px 15px}.font-picker-add-font-btn,.font-picker-create-body-font-set-btn,.font-picker-manage-synced-btn{margin:0 20px;height:32px;font-family:adobe-clean;font-size:14px;color:#35414c;font-weight:400;background-color:#f2f4f5;line-height:32px;padding-left:15px;border-radius:5px;position:relative;letter-spacing:.04em;cursor:pointer;margin-bottom:20px;transition:background-color .2s ease-in-out}.font-picker-add-font-btn:after,.font-picker-create-body-font-set-btn:after,.font-picker-manage-synced-btn:after{content:\"\";display:block;width:10px;height:10px;background-image:url(/image_templates/core/icon-plus.svg.mustache?color=35414C);background-position:50%;background-size:10px 10px;position:absolute;top:10px;right:15px}.font-picker-add-font-btn:hover,.font-picker-create-body-font-set-btn:hover,.font-picker-manage-synced-btn:hover{background-color:#e8ebed}.font-onboarding .font-picker-add-font-btn,.font-onboarding .font-picker-manage-synced-btn{border:2px solid #e8be00;line-height:28px;padding-left:13px}.font-onboarding .font-picker-add-font-btn:after{top:8px;right:13px}.font-onboarding .font-picker-manage-synced-btn:after{top:6px;right:11px}.font-picker-manage-synced-btn:after{background-image:url(/image_templates/core/icon-link-out.svg.mustache?color=35414C);width:15px;height:15px;top:8px;right:13px;background-size:contain}.font-picker-face{font-size:14px;font-weight:400;font-family:adobe-clean;color:#35414c;padding:10px 20px 15px;cursor:pointer;position:relative;background-position:20px;background-size:auto 20px;background-repeat:no-repeat}.font-picker-face.active:after{content:\"\";display:block;width:16px;height:16px;background-repeat:no-repeat;background-size:contain;background-position:50%;background-image:url(/images/brandkit/icon-check-mark-midnight.svg);position:absolute;right:20px;top:10px}.font-picker-subgroup-accordion{cursor:pointer;max-height:34px;height:34px;transition:height .2 ease-in-out;transition:background-color .2 ease-in-out;background-color:#fff}.font-picker-subgroup-accordion.active{max-height:9999px;height:auto;background-color:#f2f4f5;padding-top:11px;margin-top:-11px;margin-bottom:11px}.font-picker-subgroup-accordion.active .font-picker-subgroup-accordion-content{display:block}.font-picker-subgroup-accordion.active .font-picker-subgroup-accordion-label:after{-webkit-transform:rotate(0deg);transform:rotate(0deg)}.font-picker-subgroup-accordion .font-picker-face{padding-left:30px}.font-picker-subgroup-accordion-label{position:relative;margin:0 10px 5px 0;padding-left:20px;padding-right:20px;color:#35414c;font-weight:400;font-size:14px;min-height:16px;background-position:20px;background-size:auto 20px;background-repeat:no-repeat}.font-picker-subgroup-accordion-label:after{content:\"\";display:block;position:absolute;left:6px;top:6px;width:10px;height:4px;background-image:url(/image_templates/core/chevron-down.svg.mustache?color=34414D);background-size:contain;background-position:top;background-repeat:no-repeat;transition:-webkit-transform .2s ease-in-out;transition:transform .2s ease-in-out;transition:transform .2s ease-in-out,-webkit-transform .2s ease-in-out;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.font-picker-subgroup-accordion-content{display:none}.font-picker-labeled-separator{font-family:adobe-clean,sans-serif;font-size:12px;font-weight:700;color:#82919b;line-height:12px;padding:10px 20px;margin-top:5px;text-transform:uppercase}.cfm-shell{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(26,34,38,.4);z-index:100001}.cfm-content-shell{width:522px;min-height:392px;max-height:490px;background-color:#fff;position:absolute;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);border-radius:5px}.cfm-content-shell.short{min-height:250px;height:250px}.cfm-content-shell-upper{padding:40px 40px 0}.cfm-content-shell-lower{padding:0 40px 40px}.cfm-title{color:#242c33;font-size:18px;font-weight:700;font-family:adobe-clean,sans-serif}.cfm-title-separator{height:2px;background-color:#f4f4f4;margin:1em 0}.cfm-description-text{font-size:14px;line-height:1.4;font-weight:400;font-family:adobe-clean,sans-serif;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cfm-info{display:inline-block;position:relative;width:15px;height:15px;background-position:50% 50%;background-size:contain;background-image:url(/image_templates/core/icon-info.svg.mustache?color=82919B);background-repeat:no-repeat}.cfm-info .cfm-info-tip{display:none;position:absolute;bottom:28px;left:0;width:200px;padding:16px;color:#242c33;background-color:#fff;font-family:adobe-clean,sans-serif;font-weight:400;font-size:14px;line-height:24px;-webkit-transform:translate(-50%);transform:translate(-50%);box-shadow:0 0 10px rgba(0,0,0,.5);border-radius:5px}.cfm-info .cfm-info-tip:after{content:\" \";position:absolute;bottom:-7px;left:101px;width:13px;height:13px;z-index:3333;background-color:#fff;border-left:1px solid rgba(0,0,0,.15);border-bottom:1px solid rgba(0,0,0,.15);-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.cfm-info:hover{background-image:url(/image_templates/core/icon-info.svg.mustache?color=284660)}.cfm-info:hover .cfm-info-tip{display:block}.cfm-font-list-wrapper{position:relative;max-height:115px;display:none;margin:20px 0 12px}.cfm-font-list-wrapper.show{display:block}.cfm-font-list{overflow-x:hidden;overflow-y:auto;min-height:50px;max-height:115px;padding:6px 40px}.cfm-font-list-labels{display:-webkit-flex;display:flex;margin-bottom:8px}.cfm-font-list-label{font-size:14px;font-weight:700;font-family:adobe-clean,sans-serif;width:50%}.cfm-font-list-label:first-child{-webkit-flex:2;flex:2;padding-right:4px}.cfm-font-list-label:last-child{-webkit-flex:2.12;flex:2.12}.cfm-font,.cfm-font-placeholder{display:-webkit-flex;display:flex;margin-bottom:4px;position:relative}.cfm-font-placeholder{max-height:22px;display:none}.cfm-font-placeholder-label{color:#c7ced3}.cfm-font-placeholder-label:first-child{-webkit-flex:2;flex:2;padding-right:4px}.cfm-font-placeholder-label:last-child{-webkit-flex:2.12;flex:2.12}.cfm-font-list.empty .cfm-font-placeholder{display:-webkit-flex;display:flex}.cfm-font-exclamation{display:inline-block;width:15px;height:15px;background-repeat:no-repeat;background-size:15px;background-image:url(/image_templates/core/icon-exclamation.svg.mustache?color=82919B);margin-top:-1px;float:right;position:relative;z-index:2}.cfm-font-exclamation:hover{background-image:url(/image_templates/core/icon-exclamation.svg.mustache?color=284660)}.cfm-font-edit{display:inline-block;width:15px;height:15px;background-repeat:no-repeat;background-size:contain;background-image:url(/image_templates/core/icon-edit-pencil.svg.mustache?color=82919B);position:absolute;right:20px;top:10px;z-index:3}.cfm-font-edit:hover{background-image:url(/image_templates/core/icon-edit-pencil.svg.mustache?color=284660)}.cfm-font-name{font-size:14px;font-family:adobe-clean,sans-serif;font-weight:400;-webkit-flex:2;flex:2;max-width:50%;padding-right:4px}.cfm-font-name.font-loading{padding-right:0}.cfm-font-name.strikethrough{text-decoration:line-through;color:#c7ced3}.cfm-font-preview{height:20px;font-size:14px;line-height:20px;font-weight:400;font-family:adobe-clean,sans-serif;white-space:nowrap;overflow:hidden;-webkit-flex:1.75;flex:1.75;position:relative}.cfm-font-preview:before{display:block;content:\"\";position:absolute;right:0;top:0;bottom:0;width:28px;z-index:1;background:linear-gradient(90deg,hsla(0,0%,100%,0),#fff 80%)}.cfm-font-preview.strikethrough{text-decoration:line-through;color:#c7ced3}.cfm-font-empty .cfm-font-preview{-webkit-flex:2.12;flex:2.12}.cfm-font .cfm-font-name .cfm-font-exclamation{display:none;float:none;margin-left:.4em;margin-top:0}.cfm-font-empty-body-normal .cfm-font-name .cfm-font-exclamation{display:inline-block}.cfm-font-file-missing{color:#2680eb;font-weight:700;cursor:pointer;transition:color .2s ease-in-out}.cfm-font-file-missing:hover{color:#1473e6}.cfm-font-actions{display:none}.cfm-font-actions.show{display:inline-block;min-width:42px;text-align:right}.cfm-font-action{display:inline-block;width:15px;height:15px;background-size:15px 15px;background-position:50%;background-repeat:no-repeat}.cfm-font-replace{background-image:url(/image_templates/core/icon-edit-pencil.svg.mustache?color=82919B)}.cfm-font-replace:hover{background-image:url(/image_templates/core/icon-edit-pencil.svg.mustache?color=284660)}.cfm-font-replace.replace-disabled{opacity:.3}.cfm-font-replace.replace-disabled:hover{background-image:url(/image_templates/core/icon-edit-pencil.svg.mustache?color=82919B)}.cfm-font-delete{margin-left:.5em;background-image:url(/image_templates/core/icon-trash.svg.mustache?color=82919B)}.cfm-font-delete:hover{background-image:url(/image_templates/core/icon-trash.svg.mustache?color=284660)}.cfm-font-delete.delete-disabled{opacity:.3}.cfm-font-delete.delete-disabled:hover{background-image:url(/image_templates/core/icon-trash.svg.mustache?color=82919B)}.cfm-add-font{cursor:pointer;border-radius:5px;transition:background-color .2s ease-in-out;background-color:#f2f4f5;padding:.5em .5em .6em;font-size:15px;font-weight:400;font-family:adobe-clean,sans-serif;color:#35414c;text-align:center;position:relative;padding-right:20px;border:none;width:100%;outline:none;display:none}.cfm-add-font:after{content:\"\";display:inline-block;margin-left:12px;width:12px;height:12px;background-image:url(/image_templates/core/icon-plus.svg.mustache?color=35414C);background-size:12px 12px;background-repeat:no-repeat}.cfm-add-font:hover{background-color:#e8ebed}.cfm-add-font.show{display:block}.custom-font-upload-input{position:absolute;visiblity:hidden}.cfm-tool-tip-base{outline:none;position:absolute;top:-30px;left:-9999px;-webkit-transform:translateX(-50%);transform:translateX(-50%);z-index:2;border-radius:2px;transition:opacity .25s ease-in-out}.cfm-tool-tip-base .text{display:inline-block;position:relative;background-color:#e34850;width:auto;height:22px;padding:3px 8px;font-size:12px;font-weight:400;color:#fff;white-space:nowrap;border-radius:2px}.cfm-tool-tip-base .family-name{font-weight:400}.cfm-tool-tip-base:before{content:\" \";position:absolute;bottom:-7px;left:50%;width:13px;height:13px;background-color:#e34850;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.cfm-tool-tip-base.cfm-body-font-tip{top:-13px}.cfm-tool-tip-base.cfm-body-font-tip.show{left:52.8%}.cfm-tool-tip-base.cfm-theme-update-tip{top:164px}.cfm-tool-tip-base.cfm-theme-update-tip.show{left:423px}.cfm-tool-tip-base.cfm-theme-update-tip .text,.cfm-tool-tip-base.cfm-theme-update-tip:before{background-color:#000}.cfm-tool-tip-base.cfm-face-replace-tip{top:-16px}.cfm-tool-tip-base.cfm-face-replace-tip.show{left:475px}.cfm-tool-tip-base.cfm-face-replace-tip .text,.cfm-tool-tip-base.cfm-face-replace-tip:before{background-color:#000}.cfm-tool-tip-base.cfm-face-replace-tip.show{left:449px}.cfm-tool-tip-base.cfm-face-delete-tip{top:16px}.cfm-tool-tip-base.cfm-face-delete-tip .text,.cfm-tool-tip-base.cfm-face-delete-tip:before{background-color:#000}.cfm-tool-tip-base.cfm-face-delete-tip.show{left:475px}.cfm-add-font-tip.show,.cfm-body-font-exists-error-tip.show,.cfm-body-font-subgroup-error-tip.show,.cfm-face-exists-error-tip.show,.cfm-sparkfont-exists-error-tip.show,.cfm-tos-tip.show{left:52%}.cfm-face-exists-error-tip,.cfm-sparkfont-exists-error-tip{top:auto;bottom:0}.cfm-tos{position:relative;display:none;margin:2em 0}.cfm-tos.show{display:-webkit-flex;display:flex}.cfm-tos .cfm-tos-checkbox{cursor:pointer;min-width:14px;max-width:14px;width:14px;height:14px;border-radius:2px;border:1px solid #82919b;margin-right:1em;margin-top:18px;-webkit-flex:1;flex:1}.cfm-tos .cfm-tos-checkbox:after{content:\"\";display:none;width:12px;height:12px;background-position:50%;background-size:100%;background-repeat:no-repeat;background-image:url(/image_templates/core/icon-check.svg.mustache?color=82919B)}.cfm-tos .cfm-tos-checkbox.checked:after{display:block}.cfm-tos .cfm-tos-checkbox:hover{border-color:#284660}.cfm-tos .cfm-tos-checkbox:hover:after{background-image:url(/image_templates/core/icon-check.svg.mustache?color=284660)}.cfm-tos:hover .cfm-tos-checkbox{border-color:#284660}.cfm-tos:hover .cfm-tos-checkbox:after{background-image:url(/image_templates/core/icon-check.svg.mustache?color=284660)}.cfm-tos .cfm-tos-copy{-webkit-flex:5;flex:5;line-height:1.3;font-size:12px;font-weight:400;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cfm-tos .cfm-tos-copy a{color:inherit;font-weight:700;text-decoration:none}.cfm-tos .cfm-tos-copy a:hover{text-decoration:underline}.cfm-tos .cfm-tos-blocker{position:absolute;top:0;left:0;z-index:1}.cfm-tos.disabled .cfm-tos-checkbox{border-color:#c7ced3}.cfm-tos.disabled .cfm-tos-checkbox:after{background-image:url(/image_templates/core/icon-check.svg.mustache?color=C7CED3)}.cfm-tos.disabled .cfm-tos-copy{color:#c7ced3}.cfm-tos.disabled .cfm-tos-blocker{bottom:0;right:0}.cfm-actions,.cfm-final-actions{display:none;-webkit-justify-content:flex-end;justify-content:flex-end}.cfm-actions.show,.cfm-final-actions.show{display:-webkit-flex;display:flex}.cfm-final-actions{position:absolute;bottom:40px;right:40px}.cfm-btn{cursor:pointer;font-family:adobe-clean,sans-serif;font-size:15px;font-weight:700;border-radius:40px;color:#9aa6af;background-color:#f2f4f5;padding:.5em 1.5em .6em;border:2px solid transparent;outline:none}.cfm-btn,.cfm-cancel,.cfm-final-cancel{transition:background-color .2s ease-in-out}.cfm-cancel,.cfm-final-cancel{color:#82919b;border:2px solid #82919b;background-color:#fff;margin-right:18px}.cfm-cancel:hover,.cfm-final-cancel:hover{background-color:#82919b;color:#fff}.cfm-final-continue,.cfm-save{background-color:#1473e6;color:#fff}.cfm-final-continue:hover,.cfm-save:hover{background-color:#1269d0}.cfm-processing-da-font{position:absolute;top:0;bottom:0;left:0;right:0;background-color:#fff;border-radius:5px;z-index:100;padding:40px}.cfm-processing-da-font.failure .cfm-processing-error{display:block}.cfm-processing-da-font.failure .cfm-processing-quote,.cfm-processing-da-font.failure .cfm-processing-status{display:none}.cfm-processing-da-font.failure .cfm-processing-progress-bar .cfm-processing-progress{background-color:#e82c50}.cfm-processing-da-font.failure .cfm-processing-close{display:block}.cfm-processing-error{display:none;text-align:center;line-height:1.4;width:100%;font-size:14px;font-weight:500;color:#82919b;padding:180px 100px}.cfm-processing-progress-bar{position:absolute;top:0;left:0;right:0;height:4px;border-top-right-radius:5px;border-top-left-radius:5px;background-color:#e8ebed}.cfm-processing-progress-bar .cfm-processing-progress{border-top-left-radius:5px;background-color:#2c81e8;width:5%;height:4px}.cfm-processing-status{padding:50px;font-size:22px;font-weight:700;font-family:brandon-grotesque,adobe-clean,sans-serif;color:#35414c;text-align:center;padding:0 0 13px;border-bottom:2px solid transparent;margin:0 0 25px}.cfm-processing-quote{text-align:center;width:100%;font-size:30px;color:#2c81e8;font-weight:500;padding:100px 50px 50px;line-height:1.5em}.cfm-content-shell.short .cfm-processing-quote{padding-top:25px}.cfm-processing-close{display:none;position:absolute;top:16px;right:16px;width:20px;height:20px;cursor:pointer;background-image:url(/images/icon-close-grey.svg);background-size:contain;background-position:50% 50%;background-repeat:no-repeat}.cfm-processing-close.disabled{opacity:.2;cursor:default}.cfm-font-addchoose-tip{display:none;position:absolute;top:-11px;background-color:#000;color:#fff;border-radius:2px;white-space:pre;padding:6px;z-index:1}.cfm-font-addchoose-tip.show{left:-30px;display:block}.cfm-font-addchoose-tip:after{content:\"\";display:block;background-color:#000;width:10px;height:10px;-webkit-transform:rotate(45deg) translateX(-50%);transform:rotate(45deg) translateX(-50%);-webkit-transform-origin:center center;transform-origin:center center;position:absolute;left:50%;bottom:-6px;z-index:-1}.cfm-font-addchoose-tip .cfm-font-upload{cursor:pointer;padding-right:6px;border-right:1px solid #fff;font-weight:400}.cfm-font-addchoose-tip .cfm-font-add{cursor:pointer;padding-left:6px;font-weight:400}.cfm-font-missing-tip.show{left:196px}.cfm-font-replace-tip.show{left:362px}.cfm-body-font-choose-existing-view{display:none;background-color:#fff;position:absolute;top:0;left:0;box-shadow:0 3px 6px 0 rgba(130,145,155,.45);border-radius:4px;overflow-x:hidden;overflow-y:auto;max-height:198px;width:257px;padding:20px;z-index:10}.cfm-body-font-choose-existing-view.show{display:block}.cfm-body-font-choose-existing-font{font-size:14px;font-weight:400;font-family:adobe-clean;color:#35414c;padding:10px 0 15px;cursor:pointer}@-webkit-keyframes sp-wait-spinner-small-animation{0%{background-position:0}to{background-position:-960px}}@keyframes sp-wait-spinner-small-animation{0%{background-position:0}to{background-position:-960px}}.font-loading-spinner{display:none;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 20' width='1200' height='20'%3E%3Cstyle%3E.st0,.st1{fill-opacity:0;stroke-width:2}.st0{stroke-opacity:.1;stroke:%23000}.st1{stroke:%231473e6}%3C/style%3E%3Cpath class='st0' d='M10 3.5c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M10 3.5c3.9 0 7 3.1 7 7'/%3E%3Cpath class='st0' d='M30 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M30.2 3c3.8.1 6.8 3.2 6.8 7 0 .8-.1 1.6-.4 2.3'/%3E%3Cpath class='st0' d='M50 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M50.4 3c3.7.2 6.6 3.3 6.6 7 0 1.6-.5 3-1.4 4.2'/%3E%3Cpath class='st0' d='M70 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M70.5 3c3.6.3 6.5 3.3 6.5 7 0 2.4-1.2 4.4-2.9 5.7'/%3E%3Cpath class='st0' d='M90 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M90.7 3c3.5.4 6.3 3.3 6.3 7 0 3.1-2 5.7-4.7 6.6'/%3E%3Cpath class='st0' d='M110 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M110.9 3c3.4.5 6.1 3.4 6.1 7 0 3.7-2.9 6.8-6.6 7'/%3E%3Cpath class='st0' d='M130 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M131.1 3.1c3.3.5 5.9 3.4 5.9 6.9 0 3.9-3.1 7-7 7-.5 0-1 0-1.4-.1'/%3E%3Cpath class='st0' d='M150 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M151.3 3.1c3.3.6 5.7 3.5 5.7 6.9 0 3.9-3.1 7-7 7-1.1 0-2.2-.2-3.1-.7'/%3E%3Cpath class='st0' d='M170 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M171.4 3.1c3.2.7 5.6 3.5 5.6 6.9 0 3.9-3.1 7-7 7-1.7 0-3.2-.6-4.5-1.6'/%3E%3Cpath class='st0' d='M190 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M191.6 3.2c3.1.7 5.4 3.5 5.4 6.8 0 3.9-3.1 7-7 7-2.3 0-4.3-1.1-5.6-2.8'/%3E%3Cpath class='st0' d='M210 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M211.8 3.2c3 .8 5.2 3.5 5.2 6.8 0 3.9-3.1 7-7 7-2.8 0-5.2-1.6-6.3-4'/%3E%3Cpath class='st0' d='M230 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M232 3.3c2.9.9 5 3.5 5 6.7 0 3.9-3.1 7-7 7-3.3 0-6.1-2.3-6.8-5.4'/%3E%3Cpath class='st0' d='M250 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M252.2 3.3c2.8 1 4.8 3.6 4.8 6.7 0 3.9-3.1 7-7 7-3.8 0-6.8-2.9-7-6.7'/%3E%3Cpath class='st0' d='M270 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M272.3 3.4C275 4.4 277 7 277 10c0 3.9-3.1 7-7 7s-7-3.1-7-7V9'/%3E%3Cpath class='st0' d='M290 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M292.5 3.5c2.6 1 4.5 3.6 4.5 6.5 0 3.9-3.1 7-7 7s-7-3.1-7-7c0-.7.1-1.4.3-2.1'/%3E%3Cpath class='st0' d='M310 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M312.7 3.5c2.6 1.1 4.3 3.6 4.3 6.5 0 3.9-3.1 7-7 7s-7-3.1-7-7c0-1.2.3-2.2.8-3.2'/%3E%3Cpath class='st0' d='M330 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M332.8 3.6c2.5 1.1 4.2 3.5 4.2 6.4 0 3.9-3.1 7-7 7s-7-3.1-7-7c0-1.5.5-2.9 1.4-4.1'/%3E%3Cpath class='st0' d='M350 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M353 3.7c2.4 1.1 4 3.5 4 6.3 0 3.9-3.1 7-7 7s-7-3.1-7-7c0-1.9.8-3.6 2-4.9'/%3E%3Cpath class='st0' d='M370 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M375.5 5.6c1 1.2 1.5 2.7 1.5 4.4 0 3.9-3.1 7-7 7s-7-3.1-7-7c0-2.3 1.1-4.2 2.7-5.6'/%3E%3Cpath class='st0' d='M390 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M396.8 8.2c.1.6.2 1.2.2 1.8 0 3.9-3.1 7-7 7s-7-3.1-7-7c0-2.6 1.4-4.8 3.5-6'/%3E%3Cpath class='st0' d='M410 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M417 11c-.5 3.4-3.4 6-7 6-3.9 0-7-3.1-7-7 0-2.9 1.7-5.4 4.2-6.4'/%3E%3Cpath class='st0' d='M430 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M436.1 13.4c-1.2 2.2-3.5 3.6-6.1 3.6-3.9 0-7-3.1-7-7 0-3.2 2.1-5.8 5-6.7'/%3E%3Cpath class='st0' d='M450 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M454.6 15.2c-1.3 1.1-2.8 1.8-4.6 1.8-3.9 0-7-3.1-7-7 0-3.4 2.5-6.3 5.7-6.9'/%3E%3Cpath class='st0' d='M470 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M472.8 16.4c-.9.4-1.8.6-2.8.6-3.9 0-7-3.1-7-7 0-3.7 2.8-6.7 6.5-7'/%3E%3Cpath class='st0' d='M490 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M490.8 17h-.8c-3.9 0-7-3.1-7-7s3.1-7 7-7h.1'/%3E%3Cpath class='st0' d='M510 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M508.9 16.9c-3.3-.5-5.9-3.4-5.9-6.9 0-3.9 3.1-7 7-7h.8'/%3E%3Cpath class='st0' d='M530 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M527.2 16.4c-2.5-1.1-4.2-3.5-4.2-6.4 0-3.9 3.1-7 7-7 .5 0 .9 0 1.4.1'/%3E%3Cpath class='st0' d='M550 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M545.8 15.6c-1.7-1.3-2.8-3.3-2.8-5.6 0-3.9 3.1-7 7-7 .7 0 1.3.1 1.9.2'/%3E%3Cpath class='st0' d='M570 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M564.7 14.6c-1.1-1.2-1.7-2.8-1.7-4.6 0-3.9 3.1-7 7-7 .9 0 1.6.1 2.4.4'/%3E%3Cpath class='st0' d='M590 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M583.9 13.4c-.6-1-.9-2.2-.9-3.4 0-3.9 3.1-7 7-7 1 0 2 .2 2.9.6'/%3E%3Cpath class='st0' d='M610 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M603.4 12.3c-.2-.7-.4-1.5-.4-2.3 0-3.9 3.1-7 7-7 1.2 0 2.3.3 3.3.8'/%3E%3Cpath class='st0' d='M630 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M623.1 11.2L623 10c0-3.9 3.1-7 7-7 1.4 0 2.6.4 3.7 1.1'/%3E%3Cpath class='st0' d='M650 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M643 10c0-3.9 3.1-7 7-7 1.5 0 2.9.5 4.1 1.3'/%3E%3Cpath class='st0' d='M670 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M663 9.1c.5-3.4 3.4-6.1 7-6.1 1.6 0 3.1.6 4.3 1.5'/%3E%3Cpath class='st0' d='M690 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M683.2 8.2c.8-3 3.5-5.2 6.8-5.2 1.8 0 3.4.7 4.6 1.7'/%3E%3Cpath class='st0' d='M710 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M703.5 7.4c1.1-2.6 3.6-4.4 6.5-4.4 1.9 0 3.6.8 4.9 2'/%3E%3Cpath class='st0' d='M730 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M723.8 6.7C725 4.5 727.3 3 730 3c2 0 3.9.9 5.1 2.2'/%3E%3Cpath class='st0' d='M750 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M744.2 6.1c1.3-1.9 3.4-3.1 5.8-3.1 2.1 0 4.1 1 5.3 2.5'/%3E%3Cpath class='st0' d='M770 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M764.5 5.7C765.8 4 767.8 3 770 3s4.2 1.1 5.5 2.7'/%3E%3Cpath class='st0' d='M790 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M784.9 5.2C786.2 3.9 788 3 790 3c2.4 0 4.4 1.2 5.7 2.9'/%3E%3Cpath class='st0' d='M810 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M805.3 4.8c1.3-1.2 2.9-1.8 4.7-1.8 2.5 0 4.6 1.3 5.8 3.1'/%3E%3Cpath class='st0' d='M830 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M825.6 4.5c1.2-1 2.8-1.5 4.4-1.5 2.5 0 4.7 1.4 6 3.4'/%3E%3Cpath class='st0' d='M850 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M845.9 4.3c1.2-.8 2.6-1.3 4.1-1.3 2.6 0 4.9 1.4 6.1 3.6'/%3E%3Cpath class='st0' d='M870 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M866.3 4.1c1.1-.7 2.4-1.1 3.7-1.1 2.7 0 5.1 1.5 6.2 3.8'/%3E%3Cpath class='st0' d='M890 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M886.6 3.9c1-.5 2.2-.9 3.4-.9 2.8 0 5.2 1.6 6.3 4'/%3E%3Cpath class='st0' d='M910 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M906.9 3.7c.9-.5 2-.7 3.1-.7 2.8 0 5.4 1.7 6.4 4.2'/%3E%3Cpath class='st0' d='M930 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M927.2 3.6c.8-.4 1.8-.6 2.8-.6 2.9 0 5.5 1.8 6.5 4.4'/%3E%3Cpath class='st0' d='M950 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M947.4 3.5c.8-.3 1.7-.5 2.6-.5 3 0 5.6 1.9 6.6 4.6'/%3E%3Cpath class='st0' d='M970 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M967.6 3.4c.7-.2 1.5-.4 2.4-.4 3.1 0 5.7 2 6.7 4.8'/%3E%3Cpath class='st0' d='M990 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M987.9 3.3c.7-.2 1.4-.3 2.1-.3 3.1 0 5.8 2.1 6.7 5'/%3E%3Cpath class='st0' d='M1010 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M1008.1 3.2c.6-.2 1.3-.2 1.9-.2 3.2 0 5.9 2.2 6.8 5.2'/%3E%3Cpath class='st0' d='M1030 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M1028.3 3.2c.5-.1 1.1-.2 1.7-.2 3.3 0 6.1 2.3 6.8 5.4'/%3E%3Cpath class='st0' d='M1050 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M1048.5 3.1c.5-.1 1-.1 1.5-.1 3.4 0 6.2 2.4 6.9 5.6'/%3E%3Cpath class='st0' d='M1070 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M1068.7 3.1c.4-.1.9-.1 1.3-.1 3.4 0 6.3 2.5 6.9 5.7'/%3E%3Cpath class='st0' d='M1090 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M1088.9 3.1c.3 0 .7-.1 1.1-.1 3.5 0 6.4 2.6 6.9 5.9'/%3E%3Cpath class='st0' d='M1110 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M1109.1 3h.9c3.6 0 6.5 2.7 7 6.1'/%3E%3Cpath class='st0' d='M1130 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M1129.3 3h.7c3.6 0 6.6 2.8 7 6.3'/%3E%3Cpath class='st0' d='M1150 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M1149.5 3h.5c3.7 0 6.7 2.8 7 6.5'/%3E%3Cpath class='st0' d='M1170 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M1169.6 3h.4c3.7 0 6.8 2.9 7 6.6'/%3E%3Cpath class='st0' d='M1190 3c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7z'/%3E%3Cpath class='st1' d='M1189.8 3h.2c3.8 0 6.9 3 7 6.8'/%3E%3C/svg%3E\");background-size:contain;width:16px;height:16px;-webkit-animation-name:sp-wait-spinner-small-animation;animation-name:sp-wait-spinner-small-animation;margin:-2px 0 0;float:right;position:relative;z-index:1}.font-picker-synced-font.font-loading{font-family:adobe-clean,sans-serif!important}.font-loading.active:after{margin-right:21px}.font-loading{white-space:nowrap;color:#e7e9eb}.font-loading .font-loading-spinner{display:inline-block;background-size:auto 100%;background-repeat:no-repeat;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:steps(60);animation-timing-function:steps(60)}.font-picker-subgroup-accordion-v2{position:relative;cursor:pointer;transition:background-color .2s ease-in-out;background-color:#fff;margin-bottom:2px}.font-picker-subgroup-accordion-v2.is-transitioning .font-picker-face-v2:before{display:none}.font-picker-subgroup-accordion-v2.active{background-color:#f2f4f5;padding:0}.font-picker-subgroup-accordion-v2.active .font-picker-subgroup-accordion-v2-content{max-height:99999px;height:auto}.font-picker-subgroup-accordion-v2.active .font-picker-subgroup-accordion-v2-label:after{-webkit-transform:rotate(0deg);transform:rotate(0deg)}.font-picker-subgroup-accordion-v2.active .font-picker-face-v2:before{background:linear-gradient(90deg,rgba(242,244,245,0),#f2f4f5 20%)}.font-picker-subgroup-accordion-v2.selected{background-color:#f2f4f5}.font-picker-subgroup-accordion-v2 .font-picker-face{padding-left:30px}.font-picker-subgroup-accordion-v2-label{box-sizing:content-box;position:relative;padding:9px 20px;color:#35414c;font-weight:400;font-size:14px;min-height:14px;line-height:14px;background-position:20px 50%;background-size:auto 21px;background-repeat:no-repeat}.font-picker-subgroup-accordion-v2-label:after{content:\"\";display:block;position:absolute;left:6px;top:16px;width:10px;height:4px;background-image:url(/image_templates/core/chevron-down.svg.mustache?color=34414D);background-size:contain;background-position:top;background-repeat:no-repeat;transition:-webkit-transform .2s ease-in-out;transition:transform .2s ease-in-out;transition:transform .2s ease-in-out,-webkit-transform .2s ease-in-out;z-index:2;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.font-picker-subgroup-accordion-v2-label:hover{background-color:#f2f4f5}.font-picker-subgroup-accordion-v2-content{height:auto;max-height:0;transition:max-height .5s ease-in-out;overflow:hidden}.font-picker-face-v2{box-sizing:content-box;font-size:14px;line-height:14px;min-height:14px;font-weight:400;font-family:adobe-clean;color:#35414c;padding:9px 20px;cursor:pointer;position:relative;background-position:20px 50%;background-size:auto 21px;background-repeat:no-repeat}.font-picker-face-v2:before{display:block;content:\"\";position:absolute;right:0;top:0;bottom:0;width:48px;z-index:1;background:linear-gradient(90deg,hsla(0,0%,100%,0),#fff 20%)}.font-picker-face-v2.active,.font-picker-face-v2:hover{background-color:#f2f4f5}.font-picker-face-v2.active:before,.font-picker-face-v2:hover:before{background:linear-gradient(90deg,rgba(242,244,245,0),#f2f4f5 20%)}.font-picker-face-v2.active:after{content:\"\";display:block;width:16px;height:16px;background-repeat:no-repeat;background-size:contain;background-position:50%;background-image:url(/images/brandkit/icon-check-mark-midnight.svg);position:absolute;right:20px;top:10px;z-index:2}.font-picker-synced-fonts-list,.font-picker-uploaded-fonts{margin-bottom:8px}.cfm-processing-spinner{-webkit-animation:blue-spinner-anim 1s steps(60) infinite forwards;animation:blue-spinner-anim 1s steps(60) infinite forwards;background:50% url(/images/wait-spinner-blue.svg) no-repeat;width:68px;height:68px;margin:auto}@-webkit-keyframes blue-spinner-anim{0%{background-position:0 0}to{background-position:-4080px 0}}@keyframes blue-spinner-anim{0%{background-position:0 0}to{background-position:-4080px 0}}.font-picker-manage-synced-error{padding:5px 20px;line-height:1.3em;font-style:italic}",""])},function(e,t,n){var i,r,o;r=[n(1)],void 0===(o="function"==typeof(i=function(e){var t="\"`.:,;'",n={postScriptName:"",family:"",weight:"",category:"",label:"",filename:"",uppercaseChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\"`'",lowercaseChars:"abcdefghijklmnopqrstuvwxyz @<>-+=.:,~;!#$%^&*(){}[]?/_",capTest:"X",meanTest:"x",ascentTest:"b d l",descentTest:"p g",ascentDescentTest:"Q g b d q",tailTest:"Q",meanAccentTest:"",capAccentTest:"",spaceWidthRatio:0,xWidthRatio:0,capAccentRatio:0,capRatio:0,meanAccentRatio:0,meanRatio:0,meanWidthRatio:0,ascentRatio:0,baselineOffsetRatio:0,iosBaselineOffsetModifier:0,tailRatio:0,descentRatio:0,italicAngle:0,capAccentChars:"",capChars:"",ascentChars:"",meanAccentChars:"",meanChars:" ",baseChars:"",tailChars:"",descentChars:"",displaySample:"Ag",popularity:5,formality:5,blackness:5,drama:5,width:5,allCapsAllowed:!0,displayAllowed:!0,bodyAllowed:!1,smallCaps:!1,serif:!1,slab:!1,handdrawn:!1,calligraphic:!1,decorative:!1,modern:!1,square:!1,geometric:!1,italic:!1,style:"",deprecated:!1,isPublic:!0};function i(e,t,n,i){return e.slice(0,t)+(i||"")+e.slice(t+n)}function r(e){for(var t=e.getContext("2d"),n=t.measureText(" ").width,i=t.measureText("x").width,r=e.width,o=e.height,a=t.getImageData(0,0,r,o).data,s=!1,l=!1,c=o,d=0;!l&&c;)for(c--,d=0;d<r;d++)if(a[c*r*4+4*d+3]){l=c;break}for(;c;)for(c--,d=0;d<r;d++)if(a[c*r*4+4*d+3]){s=c;break}return{top:s,bottom:l,spaceWidth:n,xWidth:i}}function o(e,t,n,i){var r=Q.defer();if(e||((e=document.createElement("canvas")).width=t,e.height=n),document.fonts&&"function"==typeof document.fonts.load)try{document.fonts.load(i).then((function(){_.delay((function(){r.resolve(e)}),10)})).catch((function(e){console.error("document.fonts failed to load font with",e),r.reject(e)}))}catch(t){console.warn("Failed to load font with ",t),_.delay((function(){r.resolve(e)}),10)}else _.delay((function(){r.resolve(e)}),10);return r.promise}var a={};return{fontCanvas:o,generateMetrics:function(e,o,a,s){s=s||{};var l,c,d,u,h,p,f,g,m=n.uppercaseChars+n.lowercaseChars,v=_.extend({},n,s),b=100,y=250,w=200,k=400,x=800,S=0,C=0,T=0,M=0,I=0,D=0,P=0,A={},E=A.lowercaseChars||"",L=A.uppercaseChars||"",N=e(x,k),F=N.getContext("2d");function R(e,t){F.clearRect(0,0,x,k);var n=N.getContext("2d");n.fillStyle="#000000",n.textAlign="left";var i=y;return t?(n.textBaseline=t,"middle"===t&&(i=k/2)):n.textBaseline="alphabetic",n.font=(s.style||"normal")+" "+(s.weight||400)+" "+w+'px "'+a+'",serif',n.fillText(e,b,i),r(N)}for(g in E){var O=E[g],B=v.uppercaseChars.indexOf(O);B>=0&&(v.uppercaseChars=i(v.uppercaseChars,B,1),v.lowercaseChars+=O)}for(g in L){var z=L[g],U=v.lowercaseChars.indexOf(z);U>=0&&(v.lowercaseChars=i(v.lowercaseChars,U,1),v.uppercaseChars+=z)}A.uppercaseChars=v.uppercaseChars,A.lowercaseChars=v.lowercaseChars;var j=R((v=_.merge(v,A)).capTest),$=R(v.meanTest),H=R(v.ascentTest),V=R(v.descentTest),G=R(v.ascentDescentTest,"middle"),K=R(v.tailTest),q=R(v.meanAccentTest),W=R(v.capAccentTest);if(l=k/2-G.top,c=G.bottom-k/2,d=(G.bottom-G.top)/w,h=Math.round(j.spaceWidth/w*1e3)/1e3,p=Math.round($.xWidth/w*1e3)/1e3,S=($.bottom-H.top)/w,C=($.bottom-q.top)/w,T=($.bottom-W.top)/w,D=(V.bottom-$.bottom)/w,P=(K.bottom-$.bottom)/w,M=($.bottom-j.top)/w,I=($.bottom-$.top)/w,u=$.spaceWidth/w,f=(y-$.bottom)/w,_.isNumber(A.baselineOffsetRatio)){var Y=A.baselineOffsetRatio*w,Q=y-Y;S=(Q-H.top)/w,C=(Q-q.top)/w,T=(Q-W.top)/w,D=(V.bottom-Q)/w,P=(K.bottom-Q)/w,M=(Q-j.top)/w,I=(Q-$.top)/w}var X=_.isNumber(A.aboveDivider)?A.aboveDivider:l,Z=_.isNumber(A.belowDivider)?A.belowDivider:c,J=_.isNumber(A.ascentDescentRatio)?A.ascentDescentRatio:d,ee=_.isNumber(A.meanWidthRatio)?A.meanWidthRatio:u,te=_.isNumber(A.spaceWidthRatio)?A.spaceWidthRatio:h,ne=_.isNumber(A.xWidthRatio)?A.xWidthRatio:p,ie=_.isNumber(A.ascentRatio)?A.ascentRatio:S,re=_.isNumber(A.meanAccentRatio)?A.meanAccentRatio:C,oe=_.isNumber(A.capAccentRatio)?A.capAccentRatio:T,ae=_.isNumber(A.descentRatio)?A.descentRatio:D,se=_.isNumber(A.tailRatio)?A.tailRatio:P,le=_.isNumber(A.capRatio)?A.capRatio:M,ce=_.isNumber(A.meanRatio)?A.meanRatio:I,de=_.isNumber(A.baselineOffsetRatio)?A.baselineOffsetRatio:f,ue=y-de*w,he=ue-ie*w,pe=ue-re*w,fe=ue-oe*w,ge=ue+ae*w,me=ue+se*w,ve=ue-le*w,be=ue-ce*w;for(g in v.aboveDivider=X,v.belowDivider=Z,v.ascentDescentRatio=J,v.meanWidthRatio=ee,v.spaceWidthRatio=te,v.xWidthRatio=ne,v.ascentRatio=ie,v.meanAccentRatio=re,v.capAccentRatio=oe,v.descentRatio=ae,v.tailRatio=se,v.capRatio=le,v.capRatio=le,v.meanRatio=ce,v.baselineOffsetRatio=de,Math.abs(me-ue),m){var ye=m[g],we=v.uppercaseChars.indexOf(ye)>=0,ke=R(ye),xe=Math.abs(ke.top-ve),_e=Math.abs(ke.top-fe),Se=Math.abs(ke.top-pe),Ce=Math.abs(ke.top-be),Te=Math.abs(ke.top-he),Me=Math.abs(Math.max(0,ke.bottom-ue)),Ie=Math.abs(ke.bottom-me),De=Math.abs(ke.bottom-ge),Pe=we?"capChars":"meanChars",Ae="baseChars";if(!(t.indexOf(ye)>=0)){var Ee=Ce,Le=Me;Se<1.2*Ee&&(Ee=Se,Pe="meanAccentChars"),xe<1.2*Ee&&(Ee=xe,Pe="capChars"),Te<1.2*Ee&&(Ee=Te,Pe="ascentChars"),_e<1.2*Ee&&(Ee=_e,Pe="capAccentChars"),Ie<1.2*Le&&(Le=Ie,Ae="tailChars"),De<1.2*Le&&(Le=De,Ae="descentChars"),A.meanChars&&A.meanChars.indexOf(ye)>=0&&(Pe="meanChars"),A.baseChars&&A.baseChars.indexOf(ye)>=0&&(Ae="baseChars"),A.capChars&&A.capChars.indexOf(ye)>=0&&(Pe="capChars"),A.meanAccentChars&&A.meanAccentChars.indexOf(ye)>=0&&(Pe="meanAccentChars"),A.ascentChars&&A.ascentChars.indexOf(ye)>=0&&(Pe="ascentChars"),A.capAccentChars&&A.capAccentChars.indexOf(ye)>=0&&(Pe="capAccentChars"),A.tailChars&&A.tailChars.indexOf(ye)>=0&&(Ae="tailChars"),A.descentChars&&A.descentChars.indexOf(ye)>=0&&(Ae="descentChars")}v[Pe]+=ye,v[Ae]+=ye}return v.label=_.trim(o),v.postScriptName=_.trim(s.postScriptName||o),v.family=_.trim(o),delete v.capTest,delete v.meanTest,delete v.ascentTest,delete v.descentTest,delete v.tailTest,delete v.meanAccentTest,delete v.capAccentTest,v},generateMetricsAsync:function(e,s,l,c){var d=s+l.style+l.weight+c;if(a[d])return a[d];var u=Q.defer();a[d]=u.promise,l=l||{};var h,p,f,g=n.uppercaseChars+n.lowercaseChars,m=_.extend({},n,l),v=100,b=250,y=400,w=800,k=0,x=0,S=0,C=0,T=0,M=0,I=0,D=0,P=0,A=0,E=0,L=0,N=0,F=0,R={},O=R.lowercaseChars||"",B=R.uppercaseChars||"",z=(l.style||"normal")+" "+(l.weight||400)+' 200px "'+s+'",serif',U=o(null,w,y,z).then((function(e){return f=(p=e).getContext("2d")}));function j(e,t){f.clearRect(0,0,w,y);var n=p.getContext("2d");n.fillStyle="#000000",n.textAlign="left";var i=b;return t?(n.textBaseline=t,"middle"===t&&(i=y/2)):n.textBaseline="alphabetic",n.font=z,n.fillText(e,v,i),r(p)}function $(e){var t=[],n=[],i=Q.resolve();return _.each(e,(function(e,r){var o=Q.defer();n[r]=o,t[r]=o.promise,i=i.then((function(){return t=o,n=e[0],i=e[1],_.delay((function(){var e=j(n,i);t.resolve(e)}),10),t.promise;var t,n,i}))})),t}for(h in O){var H=O[h],V=m.uppercaseChars.indexOf(H);V>=0&&(m.uppercaseChars=i(m.uppercaseChars,V,1),m.lowercaseChars+=H)}for(h in B){var G=B[h],K=m.lowercaseChars.indexOf(G);K>=0&&(m.lowercaseChars=i(m.lowercaseChars,K,1),m.uppercaseChars+=G)}return R.uppercaseChars=m.uppercaseChars,R.lowercaseChars=m.lowercaseChars,m=_.merge(m,R),c?(U.then((function(){Q.spread($([[e],[m.capTest],[m.meanTest],[m.ascentDescentTest,"middle"]]),(function(t,n,i,r){m.nameHeight=t.bottom-t.top,m.ascentDescentRatio=(r.bottom-r.top)/200,m.capRatio=(i.bottom-n.top)/200,m.label=e,m.postScriptName=l.postScriptName||e,m.family=e,delete m.capTest,delete m.meanTest,delete m.ascentTest,delete m.descentTest,delete m.tailTest,delete m.meanAccentTest,delete m.capAccentTest,window._uncanvasFactory&&(window._uncanvasFactory.remove(),window._uncanvasFactory=null),u.resolve(m)})).catch((function(e){console.warn("Metrics simple calc failed",e),u.resolve(null)})).done()})),u.promise):(U.then((function(){Q.spread($([[e],[m.capTest],[m.meanTest],[m.ascentTest],[m.descentTest],[m.ascentDescentTest,"middle"],[m.tailTest],[m.meanAccentTest],[m.capAccentTest]]),(function(n,i,r,o,a,s,c,d,p){if(m.nameHeight=n.bottom-n.top,k=y/2-s.top,x=s.bottom-y/2,S=(s.bottom-s.top)/200,T=Math.round(i.spaceWidth/200*1e3)/1e3,M=Math.round(r.xWidth/200*1e3)/1e3,I=(r.bottom-o.top)/200,D=(r.bottom-d.top)/200,P=(r.bottom-p.top)/200,L=(a.bottom-r.bottom)/200,N=(c.bottom-r.bottom)/200,A=(r.bottom-i.top)/200,E=(r.bottom-r.top)/200,C=r.spaceWidth/200,F=(b-r.bottom)/200,_.isNumber(R.baselineOffsetRatio)){var f=200*R.baselineOffsetRatio,v=b-f;I=(v-o.top)/200,D=(v-d.top)/200,P=(v-p.top)/200,L=(a.bottom-v)/200,N=(c.bottom-v)/200,A=(v-i.top)/200,E=(v-r.top)/200}var w=_.isNumber(R.aboveDivider)?R.aboveDivider:k,O=_.isNumber(R.belowDivider)?R.belowDivider:x,B=_.isNumber(R.ascentDescentRatio)?R.ascentDescentRatio:S,z=_.isNumber(R.meanWidthRatio)?R.meanWidthRatio:C,U=_.isNumber(R.spaceWidthRatio)?R.spaceWidthRatio:T,$=_.isNumber(R.xWidthRatio)?R.xWidthRatio:M,H=_.isNumber(R.ascentRatio)?R.ascentRatio:I,V=_.isNumber(R.meanAccentRatio)?R.meanAccentRatio:D,G=_.isNumber(R.capAccentRatio)?R.capAccentRatio:P,K=_.isNumber(R.descentRatio)?R.descentRatio:L,q=_.isNumber(R.tailRatio)?R.tailRatio:N,W=_.isNumber(R.capRatio)?R.capRatio:A,Y=_.isNumber(R.meanRatio)?R.meanRatio:E,Q=_.isNumber(R.baselineOffsetRatio)?R.baselineOffsetRatio:F,X=b-200*Q,Z=X-200*H,J=X-200*V,ee=X-200*G,te=X+200*K,ne=X+200*q,ie=X-200*W,re=X-200*Y;for(h in m.aboveDivider=w,m.belowDivider=O,m.ascentDescentRatio=B,m.meanWidthRatio=z,m.spaceWidthRatio=U,m.xWidthRatio=$,m.ascentRatio=H,m.meanAccentRatio=V,m.capAccentRatio=G,m.descentRatio=K,m.tailRatio=q,m.capRatio=W,m.capRatio=W,m.meanRatio=Y,m.baselineOffsetRatio=Q,Math.abs(ne-X),g){var oe=g[h],ae=m.uppercaseChars.indexOf(oe)>=0,se=j(oe),le=Math.abs(se.top-ie),ce=Math.abs(se.top-ee),de=Math.abs(se.top-J),ue=Math.abs(se.top-re),he=Math.abs(se.top-Z),pe=Math.abs(Math.max(0,se.bottom-X)),fe=Math.abs(se.bottom-ne),ge=Math.abs(se.bottom-te),me=ae?"capChars":"meanChars",ve="baseChars";if(!(t.indexOf(oe)>=0)){var be=ue,ye=pe;de<1.2*be&&(be=de,me="meanAccentChars"),le<1.2*be&&(be=le,me="capChars"),he<1.2*be&&(be=he,me="ascentChars"),ce<1.2*be&&(be=ce,me="capAccentChars"),fe<1.2*ye&&(ye=fe,ve="tailChars"),ge<1.2*ye&&(ye=ge,ve="descentChars"),R.meanChars&&R.meanChars.indexOf(oe)>=0&&(me="meanChars"),R.baseChars&&R.baseChars.indexOf(oe)>=0&&(ve="baseChars"),R.capChars&&R.capChars.indexOf(oe)>=0&&(me="capChars"),R.meanAccentChars&&R.meanAccentChars.indexOf(oe)>=0&&(me="meanAccentChars"),R.ascentChars&&R.ascentChars.indexOf(oe)>=0&&(me="ascentChars"),R.capAccentChars&&R.capAccentChars.indexOf(oe)>=0&&(me="capAccentChars"),R.tailChars&&R.tailChars.indexOf(oe)>=0&&(ve="tailChars"),R.descentChars&&R.descentChars.indexOf(oe)>=0&&(ve="descentChars")}m[me]+=oe,m[ve]+=oe}m.label=e,m.postScriptName=l.postScriptName||e,m.family=e,delete m.capTest,delete m.meanTest,delete m.ascentTest,delete m.descentTest,delete m.tailTest,delete m.meanAccentTest,delete m.capAccentTest,u.resolve(m)})).catch((function(e){console.warn("Metrics calc failed",e),u.reject(e)})).done()})),u.promise)}}})?i.apply(t,r):i)||(e.exports=o)},function(e,t){e.exports='<div class="cfm-content-shell">\n    <div class="cfm-content-shell-upper">\n        <div class="cfm-title">{{ custom-font-manager-title }}</div>\n        <div class="cfm-title-separator"></div>\n        <div class="cfm-description"><span class="cfm-description-text">{{ custom-font-manager-description-text }}</span> <div class="cfm-info"><span class="cfm-info-tip">{{ custom-font-manager-info-tip }}</span></div></div>\n    </div>\n    <div class="cfm-font-list-wrapper show">\n        <div class="cfm-theme-update-tip cfm-tool-tip-base"><span class="text"></span></div>\n        <div class="cfm-body-font-tip cfm-tool-tip-base"><span class="text">{{ custom-font-manager-body-font-tip }}</span></div>\n        <div class="cfm-body-font-subgroup-error-tip cfm-tool-tip-base"><span class="text"></span></div>\n        <div class="cfm-face-exists-error-tip cfm-tool-tip-base"><span class="text"></span></div>\n        <div class="cfm-body-font-exists-error-tip cfm-tool-tip-base"><span class="text"></span></div>\n        <div class="cfm-face-replace-tip cfm-tool-tip-base"><span class="text">{{ custom-font-manager-replace-tip-default }}</span></div>\n        <div class="cfm-face-delete-tip cfm-tool-tip-base"><span class="text">{{ custom-font-manager-delete-tip }}</span></div>\n        <div class="cfm-body-font-choose-existing-view">\n            \x3c!-- <div class="cfm-body-font-choose-existing-font" style="font-weight: 400; font-style: normal">Roboto Regular</div> --\x3e\n            \x3c!-- <div class="cfm-body-font-choose-existing-font" style="font-weight: 400; font-style: italic">Roboto Italic</div> --\x3e\n            \x3c!-- <div class="cfm-body-font-choose-existing-font" style="font-weight: 700; font-style: normal">Roboto Bold</div> --\x3e\n            \x3c!-- <div class="cfm-body-font-choose-existing-font" style="font-weight: 700; font-style: italic">Roboto Bold Italic</div> --\x3e\n        </div>\n        <div class="cfm-font-addchoose-tip cfm-font-missing-tip"><span class="cfm-font-upload">Upload new</span><span class="cfm-font-add">Choose existing</span></div>\n        <div class="cfm-font-addchoose-tip cfm-font-replace-tip"><span class="cfm-font-upload">Upload new</span><span class="cfm-font-add">Choose existing</span></div>\n        <div class="cfm-font-list">\n            <div class="cfm-font-list-labels">\n                <span class="cfm-font-list-label js-font-name-label">{{ custom-font-manager-name-label }}</span>\n                <span class="cfm-font-list-label">{{ custom-font-manager-preview-label }}</span>\n            </div>\n            <div class="cfm-font-placeholder">\n                <span class="cfm-font-placeholder-label">{{ custom-font-manager-placeholder-label }}</span>\n                <span class="cfm-font-placeholder-label">{{ custom-font-manager-placeholder-label }}</span>\n            </div>\n            \x3c!-- For the body font set manager - when a face is not filled in --\x3e\n            \x3c!-- <div class="cfm-font cfm-font-empty"> --\x3e\n                \x3c!--     <span class="cfm-font-preview">Roboto Regular</span> --\x3e\n                \x3c!--     <a class="cfm-font-filename cfm-font-file-missing cfm-add-body-font-face">Add font file</a> --\x3e\n                \x3c!-- </div> --\x3e\n        </div>\n    </div>\n    <div class="cfm-content-shell-lower">\n        <button class="cfm-add-font show">\n            {{ custom-font-manager-add-more-fonts-button-label }}\n            <div class="cfm-add-font-tip cfm-tool-tip-base"><span class="text">{{ custom-font-manager-add-font-tip }}</span></div>\n        </button>\n\n        <div class="cfm-tos show">\n            <div class="cfm-tos-blocker"></div>\n            <div class="cfm-tos-checkbox"></div>\n            <div class="cfm-tos-copy">{{ custom-font-manager-tos-copy }} {{#fmr}}custom-font-manager-tos-learn-more{{/fmr}}\n                <div class="cfm-tos-tip cfm-tool-tip-base"><span class="text">{{ custom-font-manager-tos-tip }}</span></div>\n            </div>\n        </div>\n        <div class="cfm-actions show">\n            <button class="cfm-cancel cfm-btn">{{ custom-font-manager-cancel-button }}</button>\n            <button class="cfm-continue cfm-btn">{{ custom-font-manager-continue-button }}</button>\n        </div>\n        <div class="cfm-final-actions">\n            <button class="cfm-final-cancel cfm-btn">{{ custom-font-manager-final-cancel-button }}</button>\n            <button class="cfm-final-continue cfm-btn">{{ custom-font-manager-final-continue-button }}</button>\n        </div>\n    </div>\n    <div class="cfm-processing-da-font hide">\n        <h3 class="cfm-processing-status">{{ custom-font-manager-processing-status-add }}</h3>\n        <div class="cfm-processing-spinner"></div>\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(20),n(8),n(411),n(412)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return a.extend({_handleFontInfo:function(e){var n=this.options.fontFile,i=t.trim(e.preferredFamilyName||e.familyName),r=t.trim(e.preferredSubfamilyName||e.subfamilyName)||"Regular",a={};this.options.fontInfo=e,this.options.subgroupName=i,this.trigger("cfm-got-font-info",{subgroupName:i,fullName:i+" "+r,info:e}),e.info&&e.info.FILE_TOO_BIG||!this.options.fontInfoPromise||!this.options.fontFile||(a.preview=i+" "+r,a.preview_font_family=this._getCSSFamilyName(i),a.preview_font_weight=e.weight,a.preview_font_style=e.style,a.disable_actions="",a.name=this.options.fontName,this._loadFontFromLocalFile(e,n),this.$el.html(o.mustacheRender(s,a)),this._styleWithMetrics(this.$el.find(".cfm-font-preview"),e),this.bindActions())},render:function(){var e=this.options.fontFile,t=this.options.fontInfoPromise,n=this.options.fontName,i=this.options.acFontFace,r=this.options.role,a={};return e&&t?(a.name=n,a.preview=o.getString("custom-font-manager-face-loading"),a.preview_font_family="adobe-clean",a.disable_actions="disable",a.fontFile=e,this.$el.removeClass("cfm-font-empty"),this.$el.removeClass("cfm-font-empty-body-normal")):i?(this.options.subgroupName=i.subgroupName(),a.name=n,a.preview=i.friendlyName(),this.$el.removeClass("cfm-font-empty"),this.$el.removeClass("cfm-font-empty-body-normal")):(a.name=n,a.hide_actions=!0,a.add_font=!0,this.$el.addClass("cfm-font-empty"),"is-body-font"==r&&this.$el.addClass("cfm-font-empty-body-normal")),t&&t.then(this._handleFontInfo.bind(this)).done(),this.$el.addClass("cfm-font"),this.$el.attr("data-id",this.cid),this.$el.html(o.mustacheRender(s,a)),i&&i.$loadFontCSS(this.$el.find(".cfm-font-preview"),14,!1),this.bindActions(),this},bindActions:function(){this.$el.find(".cfm-font-delete").on("click",this._handleDeleteClick.bind(this)),this.$el.find(".cfm-font-delete").on("mouseover",function(e){this.trigger("cfm-item-delete-mouseover",{})}.bind(this)),this.$el.find(".cfm-font-delete").on("mouseout",function(e){this.trigger("cfm-item-delete-mouseout",{})}.bind(this)),this.$el.find(".cfm-font-replace").on("mouseover",function(e){this.trigger("cfm-item-replace-mouseover",{})}.bind(this)),this.$el.find(".cfm-font-replace").on("mouseout",function(e){this.trigger("cfm-item-replace-mouseout",{})}.bind(this)),this.options.hideReplace?this.$el.find(".cfm-font-replace").addClass("hide"):this.$el.find(".cfm-font-replace").on("click",this._handleReplaceClick.bind(this)),this.$el.find(".cfm-font-file-missing").on("click",this._handleAddClick.bind(this)),this.actionsBound=!0}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="font-picker-shell">\n    <div class="font-picker-carrot">\n    </div>\n    <div class="font-picker-content-shell">\n        <div class="font-card-picker">\n            <button class="font-card-picker-prev-btn"></button>\n            <button class="font-card-picker-next-btn"></button>\n            <div class="font-card-picker-stack">\n                \x3c!-- <div class="font-card show"> --\x3e\n                \x3c!--     <div class="font-card-headline-font">Futura PT</div> --\x3e\n                \x3c!--     <div class="font-card-headline-render">Headline</div> --\x3e\n                \x3c!--     <div class="font-card-body-font">PT Serif</div> --\x3e\n                \x3c!--     <div class="font-card-body-render">Flow, also known as the zone, is the mental state of operation in which a person performing an activity is fully immersed in a feeling of energized focus.</div> --\x3e\n                \x3c!-- </div> --\x3e\n                \x3c!-- <div class="font-card"> --\x3e\n                \x3c!--     <div class="font-card-headline-font">PT Serif</div> --\x3e\n                \x3c!--     <div class="font-card-headline-render">Headline</div> --\x3e\n                \x3c!--     <div class="font-card-body-font">Futura PT</div> --\x3e\n                \x3c!--     <div class="font-card-body-render">Flow, also known as the zone, is the mental state of operation in which a person performing an activity is fully immersed in a feeling of energized focus.</div> --\x3e\n                \x3c!-- </div> --\x3e\n            </div>\n            <button class="font-card-picker-save-btn">{{ font-picker-pick-this-pair }}</button>\n        </div>\n        <div class="font-face-picker js-sp-font-picker">\n            \x3c!-- <div class="font-picker-separator">Brand Fonts</div> --\x3e\n            \x3c!-- <div class="font-picker-face">Bodoni 72 Bold</div> --\x3e\n            \x3c!-- <div class="font-picker-face">Azo Sans Regular</div> --\x3e\n            \x3c!-- <div class="font-picker-separator">All Fonts</div> --\x3e\n            \x3c!-- <div class="font-picker-subgroup-accordion-v2"> --\x3e\n            \x3c!--     <div class="font-picker-subgroup-accordion-v2-label">Azo Sans</div> --\x3e\n            \x3c!--     <div class="font-picker-subgroup-accordion-v2-content"> --\x3e\n            \x3c!--         <div class="font-picker-face">Azo Sans Regular</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Azo Sans Italic</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Azo Sans Bold</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Azo Sans Italic Bold</div> --\x3e\n            \x3c!--     </div> --\x3e\n            \x3c!-- </div> --\x3e\n            \x3c!-- <div class="font-picker-subgroup-accordion-v2"> --\x3e\n            \x3c!--     <div class="font-picker-subgroup-accordion-v2-label">Bodoni 72</div> --\x3e\n            \x3c!--     <div class="font-picker-subgroup-accordion-v2-content"> --\x3e\n            \x3c!--         <div class="font-picker-face">Bodoni 72 Regular</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Bodoni 72 Italic</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Bodoni 72 Bold</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Bodoni 72 Italic Bold</div> --\x3e\n            \x3c!--     </div> --\x3e\n            \x3c!-- </div> --\x3e\n            \x3c!-- <div class="font-picker-subgroup-accordion-v2"> --\x3e\n            \x3c!--     <div class="font-picker-subgroup-accordion-v2-label">Calluna Sans</div> --\x3e\n            \x3c!--     <div class="font-picker-subgroup-accordion-v2-content"> --\x3e\n            \x3c!--         <div class="font-picker-face">Calluna Sans Regular</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Calluna Sans Italic</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Calluna Sans Bold</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Calluna Sans Italic Bold</div> --\x3e\n            \x3c!--     </div> --\x3e\n            \x3c!-- </div> --\x3e\n            \x3c!-- <div class="font-picker-subgroup-accordion-v2"> --\x3e\n            \x3c!--     <div class="font-picker-subgroup-accordion-v2-label">Clarendon Text Pro</div> --\x3e\n            \x3c!--     <div class="font-picker-subgroup-accordion-v2-content"> --\x3e\n            \x3c!--         <div class="font-picker-face">Clarendon Text Pro Regular</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Clarendon Text Pro Italic</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Clarendon Text Pro Bold</div> --\x3e\n            \x3c!--         <div class="font-picker-face">Clarendon Text Pro Italic Bold</div> --\x3e\n            \x3c!--     </div> --\x3e\n            \x3c!-- </div> --\x3e\n        </div>\n        <div class="font-body-picker js-sp-font-picker">\n            \x3c!-- <div class="font-picker-separator">Brand Fonts</div> --\x3e\n            \x3c!-- <div class="font-picker-face">Azo Sans</div> --\x3e\n            \x3c!-- <div class="font-picker-face">Bodoni 72</div> --\x3e\n            \x3c!-- <div class="font-picker-separator">All Fonts</div> --\x3e\n        </div>\n        <div class="font-headline-picker js-sp-font-picker">\n        </div>\n        <div class="font-picker-loading-screen">\n            <div class="font-picker-loading-screen-title">{{ font-picker-hang-tight }}</div>\n            <div class="font-picker-loading-screen-spinner"></div>\n            <div class="font-picker-loading-screen-label">{{ font-picker-loading-your-fonts }}</div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(5),n(42),n(564),n(565),n(8),n(566)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c){return i.View.extend({_transitionTime:5e3,_quoteSetMap:{upgradeToPremium:a.upgradeToPremiumQuotes,default:a.defaultQuotes},_appCssId:"slate",_quoteSetName:"default",initialize:function(e){t.bindAll(this,t.functionsIn(this)),e&&"object"==typeof e&&(e.quoteSetName&&this._quoteSetMap.hasOwnProperty(e.quoteSetName)&&(this._quoteSetName=e.quoteSetName),e.transitionTime&&(this._transitionTime=e.transitionTime),e.appCssId&&(this._appCssId=e.appCssId),e.location&&(this._location=e.location)),this._quoteIndex=0,this._quoteData=[],this._quotesLoadedDefer=n.defer(),o.runSilent("SMBQuoteLoaderExperiment",{showSMBQuotesForSMBUsers:function(e){var t=e.getMetadata();this._setQuotesFromExperimentData(t),this._quotesLoadedDefer.resolve()}.bind(this)}).done(),o.runSilent("quotesForNonSMBExperiment",{showSMBQuotesForNonSMBUsers:function(e){var t=e.getMetadata();this._setQuotesFromExperimentData(t),this._quotesLoadedDefer.resolve()}.bind(this),control:function(e){t.isEmpty(this._quoteData)&&(this._quoteData=t.shuffle(this._quoteSetMap[this._quoteSetName])),this._quotesLoadedDefer.resolve()}.bind(this)}).done()},_setQuotesFromExperimentData:function(e){var n=t.pickBy(e,function(e,t,n){return t.indexOf(this._location)>-1}.bind(this)),i=this._createQuotesDataObj(n);this._quoteData=t.shuffle(i)},_createQuotesDataObj:function(e){var n=[];return e&&t.isObject(e)&&t.each(e,function(e,t){n.push({text:e})}.bind(this)),n},_whenQuotesLoaded:function(){return this._quotesLoadedDefer||(this._quotesLoadedDefer=n.defer()),this._quotesLoadedDefer.promise},clear:function(){this._isVisible=!1,this._currentQuoteTimer&&(window.clearTimeout(this._currentQuoteTimer),this._currentQuoteTimer=null)},timeLastQuoteShown:function(){return this._shownAt},remove:function(){this.$el.empty()},setAppCssId:function(e){this._appCssId=e},showNextQuote:function(){if(this._isVisible){var e=l.getString(this._quoteData[this._quoteIndex].text),t=this._quoteData[this._quoteIndex].author;this.quote$.removeClass("visible"),t?(this.quoteAuthor$.text(t),this.quoteAuthor$.removeClass("hide")):this.quoteAuthor$.addClass("hide"),this.quoteText$.text(e),this.quote$.addClass("visible"),this._shownAt=(new Date).getTime(),this._currentQuoteTimer=window.setTimeout(this.showNextQuote,this._transitionTime),this._quoteIndex=(this._quoteIndex+1)%this._quoteData.length}},render:function(){return this._isVisible=!0,this.$el.html(s.toString()),this.quote$=this.$el.find(".quote"),this.quoteText$=this.quote$.find(".text"),this.quoteAuthor$=this.quote$.find(".author"),this.quoteText$.addClass(this._appCssId),this._whenQuotesLoaded().then(function(){o.runSilent("SMBQuoteLoaderExperiment",{showSMBQuotesForSMBUsers:function(e){e&&e.track()},control:function(e){e&&e.track()}}).done(),o.runSilent("quotesForNonSMBExperiment",{showSMBQuotesForNonSMBUsers:function(e){e&&e.track()},control:function(e){e&&e.track()}}).done(),this.showNextQuote()}.bind(this)),this}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(2),n(301)],void 0===(r=function(e,t){"use strict";return e.Collection.extend({model:t})}.apply(t,i))||(e.exports=r)},function(e){e.exports=JSON.parse('{"defaultQuotes":[{"text":"quote-loader-default-hashtag"},{"text":"quote-loader-default-social-media"},{"text":"quote-loader-default-impression"},{"text":"quote-loader-default-sleep"},{"text":"quote-loader-default-branding"},{"text":"quote-loader-default-lifestyle"},{"text":"quote-loader-default-consistency"},{"text":"quote-loader-default-audience"}],"upgradeToPremiumQuotes":[{"text":"quote-loader-upgrade-to-premium-brand"},{"text":"quote-loader-upgrade-to-premium-logo"},{"text":"quote-loader-upgrade-to-premium-themes"},{"text":"quote-loader-upgrade-to-premium-story"}]}')},function(e,t){e.exports='<div class="mrvl-quote-loader">\n    <div class="quote">\n        <q class="text"></q>\n        <cite class="author"></cite>\n    </div>\n</div>\n'},function(e,t,n){var i=n(567);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(34)(!1)).push([e.i,".mrvl-quote-loader .quote{position:absolute;top:0;left:0;width:100%;transition:opacity .5s;opacity:0;padding-right:20px;padding-left:20px}.mrvl-quote-loader .quote.visible{opacity:1}.mrvl-quote-loader .quote .text{display:block;font-size:26px;font-family:adobe-clean,sans-serif;color:#00b1ef;margin-bottom:32px;font-weight:300;line-height:38px}.mrvl-quote-loader .quote .text.video,.mrvl-quote-loader .quote .text.voice{color:#ff4931}.mrvl-quote-loader .quote .text.page,.mrvl-quote-loader .quote .text.slate{color:#00b1ef}.mrvl-quote-loader .quote .text.post,.mrvl-quote-loader .quote .text.theo{color:#10c459}.mrvl-quote-loader .quote .text.pmref,.mrvl-quote-loader .quote .text.refapp{color:#f17ddc}.mrvl-quote-loader .quote .author{display:block;font-family:adobe-clean,sans-serif;font-size:16px;font-weight:300;color:#82919b;text-transform:uppercase}.mrvl-interstitial-splash .mrvl-quote-loader .quote{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);max-width:870px}",""])},function(e,t,n){var i,r;i=[n(1),n(0)],void 0===(r=function(e,t){"use strict";var n=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=e.width,this.height=this.canvas.height=e.height,this.context.drawImage(e,0,0,this.width,this.height)};n.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},n.prototype.update=function(e){this.context.putImageData(e,0,0)},n.prototype.getPixelCount=function(){return this.width*this.height},n.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},n.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var i=function(){};return i.prototype.componentToHex=function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},i.prototype.rgbToHex=function(e,t,n){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(n)},i.prototype.rgbToHsl=function(e,t,n){e/=255,t/=255,n/=255;var i,r,o,a=Math.max(e,t,n),s=Math.min(e,t,n),l=(a+s)/2;if(a==s)i=r=0;else{switch(o=a-s,r=l>.5?o/(2-a-s):o/(a+s),a){case e:i=(t-n)/o+(t<n?6:0);break;case t:i=(n-e)/o+2;break;case n:i=(e-t)/o+4}i/=6}return new Array(360*i,100*r,100*l)},i.prototype.categorize=function(e,t,n,i){var r=t[0],o=t[1],a=t[2],s=Math.round(10*r/255),l=Math.round(4*o/100),c=Math.round(4*a/100);(i?o>50&&a>20:o>50&&a>20&&a<220)?(n["h"+s]=n["h"+s]||[],n["h"+s].push(e)):(n["s"+l]=n["s"+l]||[],n["s"+l].push(e),n["l"+l]=n["l"+c]||[],n["l"+l].push(e))},i.prototype.getPalette=function(e,i,r,o,a){for(var s,l,c,d,u,h,p=new n(e),f=p.getImageData().data,g=p.getPixelCount(),m={},v={},b=0;b<g;b+=r){if(d=f[(c=4*b)+0],u=f[c+1],h=f[c+2],f[c+3]>=125)s=this.rgbToHsl(d,u,h),!a&&s[2]>=95||(m[l=this.rgbToHex(d,u,h)]||(m[l]={rgb:[d,u,h],hsl:s,count:0,hex:l,pxIndex:b},this.categorize(m[l],s,v,a)),m[l].count++)}var y=[],w=[],k=[];return t.each(v,(function(e,n){var i=t.sortBy(e,(function(e){return-e.count}));i.length&&!t.includes(y,i[0])&&y.push(i[0])})),y=t.sortBy(y,(function(e){return-e.count})),t.each(y,(function(e,n){if(e.count>1&&w.length<i){var r=!0;t.each(w,(function(t){o.colorDistance(t.hex,e.hex)<1500&&(r=!1)})),r&&w.push(e)}})),t.each(w,(function(e){k.push(e.rgb)})),p.removeCanvas(),k},i}.apply(t,i))||(e.exports=r)},,function(e,t,n){e.exports=function(){var e=[],t=[],n={},i={},r={};function o(e){return"string"==typeof e?new RegExp("^"+e+"$","i"):e}function a(e,t){return e===t?t:e===e.toUpperCase()?t.toUpperCase():e[0]===e[0].toUpperCase()?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():t.toLowerCase()}function s(e,t){return e.replace(/\$(\d{1,2})/g,(function(e,n){return t[n]||""}))}function l(e,t){return e.replace(t[0],(function(n,i){var r=s(t[1],arguments);return a(""===n?e[i-1]:n,r)}))}function c(e,t,i){if(!e.length||n.hasOwnProperty(e))return t;for(var r=i.length;r--;){var o=i[r];if(o[0].test(t))return l(t,o)}return t}function d(e,t,n){return function(i){var r=i.toLowerCase();return t.hasOwnProperty(r)?a(i,r):e.hasOwnProperty(r)?a(i,e[r]):c(r,i,n)}}function u(e,t,n,i){return function(i){var r=i.toLowerCase();return!!t.hasOwnProperty(r)||!e.hasOwnProperty(r)&&c(r,r,n)===r}}function h(e,t,n){return(n?t+" ":"")+(1===t?h.singular(e):h.plural(e))}return h.plural=d(r,i,e),h.isPlural=u(r,i,e),h.singular=d(i,r,t),h.isSingular=u(i,r,t),h.addPluralRule=function(t,n){e.push([o(t),n])},h.addSingularRule=function(e,n){t.push([o(e),n])},h.addUncountableRule=function(e){"string"!=typeof e?(h.addPluralRule(e,"$0"),h.addSingularRule(e,"$0")):n[e.toLowerCase()]=!0},h.addIrregularRule=function(e,t){t=t.toLowerCase(),e=e.toLowerCase(),r[e]=t,i[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["whiskey","whiskies"]].forEach((function(e){return h.addIrregularRule(e[0],e[1])})),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|tlas|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/(m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach((function(e){return h.addPluralRule(e[0],e[1])})),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/(m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|(?:her|at|gr)o|ris)(?:es)?$/i,"$1"],[/(analy|ba|diagno|parenthe|progno|synop|the|empha|cri)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach((function(e){return h.addSingularRule(e[0],e[1])})),["adulthood","advice","agenda","aid","alcohol","ammo","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","flounder","fun","gallows","garbage","graffiti","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","manga","news","pike","plankton","pliers","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","species","staff","swine","tennis","traffic","transporation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h}()},function(e,t,n){"use strict";var i=n(39).Buffer,r=n(555);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t,n,r,o=i.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=o,r=s,t.copy(n,r),s+=a.data.length,a=a.next;return o},e}(),r&&r.inspect&&r.inspect.custom&&(e.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t,n){"use strict";e.exports=o;var i=n(422),r=n(23);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}r.inherits=n(14),r.inherits(o,i),o.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(352)},function(e,t,n){e.exports=n(224)},function(e,t,n){e.exports=n(351).Transform},function(e,t,n){e.exports=n(351).PassThrough},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(6),n(5),n(562),n(8),n(578),n(579)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c){"use strict";return n.View.extend({initialize:function(){t.bindAll(this,t.functionsIn(this)),this.TRANSITION_TIME=400,this._temporaryClasses=[],window.marvel.events.on("show-interstitial",this.handleShow),window.marvel.events.on("hide-interstitial",this.handleHide),window.marvel.events.on("interstitial-error",this.handleInterstitialError)},handleShow:function(e){this._quoteLoaderView||(this._quoteLoaderView=new a({location:"editor"})),e&&e.ignoreNextHideUnlessForce&&(this.ignoreNextHideUnlessForce=!0),this._isShowing?e.afterShowingDefer&&e.afterShowingDefer.resolve():(this._fnBeforeHiding=e.fnBeforeHiding,this._isShowing=!0,this.render(e.typeName,e.fauxscreen,e.showImmediately),e&&e.showImmediately?(window.marvel.events.trigger("spark-dialog-shown"),this.$el.addClass("show no-delay"),e.afterShowingDefer&&t.delay((function(){e.afterShowingDefer.resolve()}),this.TRANSITION_TIME)):t.delay(function(){window.marvel.events.trigger("spark-dialog-shown"),this.$el.addClass("show"),e.afterShowingDefer&&t.delay((function(){e.afterShowingDefer.resolve()}),this.TRANSITION_TIME)}.bind(this),1))},_doHide:function(){if(this._isShowing){var e;e=this._fnBeforeHiding?this._fnBeforeHiding():i.resolve();var n=function(){this._isShowing=!1,this._quoteLoaderView.clear(),window.marvel.events.trigger("spark-dialog-closed"),this.$el.removeClass("show"),this.$el.removeClass("no-delay"),t.each(this._temporaryClasses,function(e){this.$el.removeClass(e)}.bind(this)),this._temporaryClasses=[],t.delay(function(){this._quoteLoaderView.remove(),this.$el.remove(),window.marvel.events.trigger("editor-showing-interstitial-hidden")}.bind(this),10)}.bind(this);e.then(n,n).done()}},handleHide:function(e){if(this.ignoreNextHideUnlessForce){if(this.ignoreNextHideUnlessForce=!1,!e||!e.forceHide)return}else if(this._quoteLoaderView){var n=(new Date).getTime(),i=this._quoteLoaderView.timeLastQuoteShown();i&&n-i<10?t.delay(function(){this._doHide()}.bind(this),10-(n-i)):this._doHide()}},handleInterstitialError:function(e){(e.addClass&&(this._temporaryClasses.push(e.addClass),this.$el.addClass(e.addClass)),e.addElement$)&&this.$el.find(".error-detail").empty().append(e.addElement$)},render:function(t,n,i){this.$el=e(".mrvl-interstitial-wrapper"),this.$el&&this.$el[0]||(this.$el=e("<div></div>"),e("body").append(this.$el)),this.$el.attr("class","mrvl-interstitial-wrapper "+t),this.$el.attr("data-auto","mrvl-interstitial-wrapper"),this.$el.html(l.toString()),n?(this.$el.addClass("has-fauxholder"),this.$fauxholder=e('<div class="fauxholder"></div>'),n.class&&this.$fauxholder.addClass(n.class),this.$el.append(this.$fauxholder),this.$fauxholder.append(n.div$),n.hasOwnScrim||this.$fauxholder.append('<div class="fauxholder-scrim"></div>')):(this.$fauxholder&&this.$fauxholder.remove(),this.$fauxholder=null,this.$el.removeClass("has-fauxholder"),this.$el.find(".brand-name").text(s.getString("product-name")),this.quoteLoaderEl$=this.$el.find(".quotes"),this._quoteLoaderView.setElement(this.quoteLoaderEl$),this._quoteLoaderView.setAppCssId(t),this._quoteLoaderView.render())}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="mrvl-interstitial-splash md-modal">\n    <div class="splash-inner">\n      <div class="spinner"></div>\n      <div class="quotes"></div>\n      <div class="error-detail"></div>\n    </div>\n</div>\n'},function(e,t,n){var i=n(580);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(69);(e.exports=n(34)(!1)).push([e.i,".mrvl-interstitial-wrapper{position:fixed;top:0;left:100%;width:100%;height:100%;opacity:0;border-top:1px solid #ccc;background-color:#fff;z-index:9999}.mrvl-interstitial-wrapper.show{opacity:1;left:0;transition:all .4s}.mrvl-interstitial-wrapper.show.no-delay{transition:all none}.mrvl-interstitial-wrapper.error-state .mrvl-interstitial-splash .error-detail{display:block}.mrvl-interstitial-wrapper.error-state .mrvl-interstitial-splash .quotes,.mrvl-interstitial-wrapper.error-state .mrvl-interstitial-splash .spinner{display:none}.mrvl-interstitial-splash{position:relative;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;width:100%;height:100%;z-index:27;transition:opacity .4s}.mrvl-interstitial-splash .splash-inner{width:100%;height:155px;text-align:center}.mrvl-interstitial-splash .spinner{position:relative;margin:0 auto 45px;font-size:4.5px;text-indent:-9999em;border:1.1em solid #e2e6e7;border-left:1.1em solid #f6f7f8;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation:load8 1.1s infinite linear;animation:load8 1.1s infinite linear;will-change:transform;border-radius:50%;width:60px;height:60px}.mrvl-interstitial-splash .spinner:after{border-radius:50%;width:10em;height:10em}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.mrvl-interstitial-splash .quotes{position:relative;width:100%}.mrvl-interstitial-splash .error-detail{display:none}.mrvl-interstitial-splash .error-detail .error-detail-image{background:url("+i(n(581))+") no-repeat 50%;width:100%;height:72px;margin-bottom:40px;margin-left:11px}.mrvl-interstitial-splash .error-detail h3{font-size:32px;font-weight:800}.mrvl-interstitial-splash .error-detail p{display:inline-block;width:420px;line-height:1.5em;padding:20px 0 40px}.mrvl-interstitial-splash .error-detail button{margin:0 10px}.mrvl-interstitial-wrapper.has-fauxholder{background-color:rgba(0,0,0,.25);left:0}.mrvl-interstitial-wrapper.has-fauxholder .mrvl-interstitial-splash{display:none;width:50%;height:50%;background-color:hsla(0,0%,100%,.8);left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border:2px solid #35414c;border-radius:8px;z-index:2001}.mrvl-interstitial-wrapper.has-fauxholder .mrvl-interstitial-splash .quote q{font-size:24px}.mrvl-interstitial-wrapper.has-fauxholder .fauxholder{position:absolute;width:100%;height:100%;top:0;left:0}.mrvl-interstitial-wrapper.has-fauxholder .fauxholder-scrim{z-index:2000;background-color:rgba(0,0,0,.1);width:100%;height:100%;position:absolute}",""])},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iRWRpdF9GaWxlXy1fRmxhdCIgZGF0YS1uYW1lPSJFZGl0IEZpbGUgLSBGbGF0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MC40OSIgaGVpZ2h0PSI3My4xNTkiIHZpZXdCb3g9IjAgMCA3MC40OSA3My4xNTkiPgogIDxnIGlkPSJJY29ucyI+CiAgICA8ZyBpZD0iRWRpdC1GaWxlIj4KICAgICAgPHBhdGggaWQ9IkZpbGwtMTY1NSIgZD0iTTU2LjA4LDE3LjQ0NiwzOC42MzMsMEgwVjcyLjI3OEg1Ni4wOFYxNy40NDYiIGZpbGw9IiNlZmVjZGUiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPgogICAgICA8cGF0aCBpZD0iRmlsbC0xNjU2IiBkPSJNMTAuMjQ2LDIzLjQ5Mkg0MS40QTEuMjQ2LDEuMjQ2LDAsMSwwLDQxLjQsMjFIMTAuMjQ2YTEuMjQ2LDEuMjQ2LDAsMSwwLDAsMi40OTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjE2IDUuMTcpIiBmaWxsPSIjZDVkMGJiIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KICAgICAgPHBhdGggaWQ9IkZpbGwtMTY1NyIgZD0iTTEwLjI0NiwxNS40OTJIMjIuNzA5YTEuMjQ2LDEuMjQ2LDAsMSwwLDAtMi40OTJIMTAuMjQ2YTEuMjQ2LDEuMjQ2LDAsMSwwLDAsMi40OTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjE2IDMuMikiIGZpbGw9IiNkNWQwYmIiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPgogICAgICA8cGF0aCBpZD0iRmlsbC0xNjU4IiBkPSJNNDEuNCwyOUgxMC4yNDZhMS4yNDYsMS4yNDYsMCwxLDAsMCwyLjQ5Mkg0MS40QTEuMjQ2LDEuMjQ2LDAsMSwwLDQxLjQsMjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjE2IDcuMTM5KSIgZmlsbD0iI2Q1ZDBiYiIgZmlsbC1ydWxlPSJldmVub2RkIi8+CiAgICAgIDxwYXRoIGlkPSJGaWxsLTE2NTkiIGQ9Ik00MS40LDM3SDEwLjI0NmExLjI0NiwxLjI0NiwwLDEsMCwwLDIuNDkySDQxLjRBMS4yNDYsMS4yNDYsMCwxLDAsNDEuNCwzNyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yMTYgOS4xMDkpIiBmaWxsPSIjZDVkMGJiIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KICAgICAgPHBhdGggaWQ9IkZpbGwtMTY2MCIgZD0iTTQxLjQsNDVIMTAuMjQ2YTEuMjQ2LDEuMjQ2LDAsMSwwLDAsMi40OTJINDEuNEExLjI0NiwxLjI0NiwwLDEsMCw0MS40LDQ1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjIxNiAxMS4wNzgpIiBmaWxsPSIjZDVkMGJiIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KICAgICAgPHBhdGggaWQ9IkZpbGwtMTY2MSIgZD0iTTMxLDBWMTcuNDQ2SDQ4LjQ0N0wzMSwwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3LjYzMykiIGZpbGw9IiNkNWQwYmIiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPgogICAgICA8cGF0aCBpZD0iRmlsbC0xODQ0IiBkPSJNMzUuNjIsNDkuMjE0bC0uMDEuMDEtMi40NzgsOS4wODUsNS43OTEtNS43OTEtMy4zLTMuMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC4xNTggMTIuMTE1KSIgZmlsbD0iI2VkZGNjNyIgZmlsbC1ydWxlPSJldmVub2RkIi8+CiAgICAgIDxwYXRoIGlkPSJGaWxsLTE4NDUiIGQ9Ik01Ni4yNTksMzUuNzE2bC0xLjU1NC0xLjU1NGEyLjQ3NSwyLjQ3NSwwLDAsMC0zLjUsMGwtNC40NjMsNC40NjQsMy4zLDMuMyw2LjIxNC02LjIxMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEuNTEgOC4yMzIpIiBmaWxsPSIjZDg1YTRhIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KICAgICAgPHBhdGggaWQ9IkZpbGwtMTg0NiIgZD0iTTUyLjkwNSw0MC45bC0zLjMtMy4zTDM1LjEyOSw1Mi4wNzNsMy4zLDMuM0w1Mi45MDUsNDAuOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC42NSA5LjI1NikiIGZpbGw9IiNmMjljMjEiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPgogICAgICA8cGF0aCBpZD0iRmlsbC0xODQ3IiBkPSJNNDIuNjkzLDU1LjYyMWwuMDEtLjAxLTMuNzQ2LTMuNzQ2LTUuNzkxLDUuNzkxTDMzLDU4LjI2NGw5LjY5My0yLjY0MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC4xMjYgMTIuNzY4KSIgZmlsbD0iI2Q2YzRiMSIgZmlsbC1ydWxlPSJldmVub2RkIi8+CiAgICAgIDxwYXRoIGlkPSJGaWxsLTE4NDgiIGQ9Ik01My4xNCw0NS4yMjQsNTcuNiw0MC43NjJhMi40NzQsMi40NzQsMCwwLDAsMC0zLjVsLTItMi02LjIxNCw2LjIxMiwzLjc0NywzLjc0NiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIuMTYyIDguNjgyKSIgZmlsbD0iI2EzNDc0MCIgZmlsbC1ydWxlPSJldmVub2RkIi8+CiAgICAgIDxwYXRoIGlkPSJGaWxsLTE4NDkiIGQ9Ik0zNy43OCw1NC43MjRsMy43NDYsMy43NDZMNTYsNDRsLTMuNzQ3LTMuNzQ2TDM3Ljc4LDU0LjcyNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS4zMDMgOS45MDkpIiBmaWxsPSIjZTE4YzI1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz4KICAgICAgPHBhdGggaWQ9IkZpbGwtMTg1MCIgZD0iTTMyLjUzOSw1OS43NDNhMS4yNDYsMS4yNDYsMCwwLDEtLjg4MS0yLjEyN2wyLjc1LTIuNzVhMS4yNDYsMS4yNDYsMCwwLDEsMS43NjIsMS43NjJsLTIuNzUsMi43NWExLjIzOCwxLjIzOCwwLDAsMS0uODgxLjM2NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNy43MDUgMTMuNDE3KSIgZmlsbD0iIzVlNWU1ZSIgZmlsbC1ydWxlPSJldmVub2RkIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3)],void 0===(r=function(e,t,i,r){"use strict";return i.Model.extend({getShareView:function(){return this._getShareViewDefer||(this._getShareViewDefer=r.defer(),Promise.all([n.e("npw-visual-browse-view~search-controller~share-view"),n.e("share-view")]).then(function(e){var t=n(898);this._getShareViewDefer.resolve(new t)}.bind(this).bind(null,n)).catch(n.oe)),this._getShareViewDefer.promise}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(6),n(5),n(64),n(7),n(11),n(8)],void 0===(r=function(e,t,i,r,o,a,s,l,c,d){"use strict";var u=new c({color:"firebrick",name:"PersonalizerController"});return new(i.Model.extend({initialize:function(){t.bindAll(this,t.functionsIn(this)),this._ready=this._ready||r.defer()},setup:function(){o.isValid().then(function(){a.allFeaturesLoaded().then(function(){this._ready.resolve()}.bind(this))}.bind(this)).done()},showPersonalizer:function(e,t){return this._isReady().then(function(){return(t?r(!0):this._shouldShowPersonalizer()).then(function(t){return t?this._loadComponent().then(this._renderComponent.bind(this,e)):r("skip")}.bind(this))}.bind(this)).catch(function(){return u.error("Errored while onboarding personalization"),r("error")}.bind(this))},_trackEvent:function(e){l.trackEvent(e.eventName,e.data||{},"onboarding:personalizer")},_isReady:function(){return this._ready.promise},_componentHasLoaded:function(){this._trackEvent({eventName:"personalization:modalViewed",data:{contextualData1:"modalName:create-for"}})},_handleDialogDimiss:function(e,t){this._isReady().then((function(){a.setUserFlag("personalizer-createFor-dismissed",!0)})),this.personalizerOverlay$.addClass("hide"),this._trackEvent({eventName:"personalization:modalDismissed"}),e.resolve("dismissed")},_handleDidComplete:function(e,t){this._isReady().then(function(){this._setUserPrefs(t),a.setUserFlag("personalizer-createFor-complete",!0)}.bind(this)),this.personalizerOverlay$.addClass("hide");var n=JSON.stringify(t&&t.createFor.sort()||[]);this._trackEvent({eventName:"personalization:continuePressed",data:{contextualData1:"cardsSelected:"+n}}),e.resolve("complete")},isUserEligible:function(){return s.getIsEDUAccount().then(function(e){return e||o.isAutomatedTestUser()?r(!1):r(!0)}.bind(this))},_shouldShowPersonalizer:function(){if(a.hasFeature("force-personalizer-onboarding"))return r(!0);var e=this._hasSeenPersonalizer();return this.isUserEligible().then(function(t){return!(e||!t)}.bind(this))},_hasSeenPersonalizer:function(){return a.hasFeature("personalizer-createFor-complete")||a.hasFeature("personalizer-createFor-dismissed")},_loadComponent:function(){return this._componentLoadedDefer||(this._componentLoadedDefer=r.defer(),Promise.all([n.e("m-react-spectrum"),n.e(2),n.e(3),n.e("vendors~brandswitcher~ccx-share-sheet~missingfontsmodal~non-editor-search-react~react-personalizer"),n.e("react-personalizer")]).then(function(e){var t=n(271).default,i=n(903).default;if(!this.wrappedPersonalizerModalCls){var r=t.wrapComponentSpectrum(i,this.wrappedPersonalizerModalModel);this.wrappedPersonalizerModalCls=r.extend({cachename:"reactpersonalizer",remove:function(){r.prototype.remove.call(this)}})}this._componentLoadedDefer.resolve()}.bind(this).bind(null,n)).catch(n.oe)),this._componentLoadedDefer.promise},getUserPrefs:function(){return a.getUserProperty("personalizer")||{createFor:[],selectCount:0}},getImageURLByCardName:function(e){return"/images/personalize/pcard-"+e+".svg"},getLocalizedLabelByCardName:function(e){return d.getString("pcard-primary-"+e)},_setUserPrefs:function(e){a.setUserProperty("personalizer",e)},_renderComponent:function(t){return this._isReady().then(function(){this.personalizerOverlay$=e("body").find(".personalizer-overlay"),this.personalizerOverlay$.removeClass("hide");var n=o.getProfile().first_name||"";this.data=this.getUserPrefs();var a=r.defer();return t(this.wrappedPersonalizerModalCls,new i.Model({userDisplayName:n,didCompleteHandler:this._handleDidComplete.bind(this,a),closeClickedHandler:this._handleDialogDimiss.bind(this,a),componentLoaded:this._componentHasLoaded.bind(this),initialState:this.data}),null,this.personalizerOverlay$),a.promise}.bind(this)).catch((function(e){return u.error("Errored while rendering onboarding personalization views"),r.reject("errorInRenderComponent")}))}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";var i=n(39).Buffer,r=n(417).Transform;function o(e){r.call(this),this._block=i.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(14)(o,r),o.prototype._transform=function(e,t,n){var i=null;try{this.update(e,t)}catch(e){i=e}n(i)},o.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},o.prototype.update=function(e,t){if(function(e,t){if(!i.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");i.isBuffer(e)||(e=i.from(e,t));for(var n=this._block,r=0;this._blockOffset+e.length-r>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=e[r++];this._update(),this._blockOffset=0}for(;r<e.length;)n[this._blockOffset++]=e[r++];for(var a=0,s=8*e.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},o.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=o},function(e,t,n){"use strict";n.r(t);var i={show:function(e){var t=this;Promise.all([Promise.all([n.e("m-react-spectrum"),n.e(2),n.e(3),n.e("vendors~brandswitcher~ccx-share-sheet~missingfontsmodal~non-editor-search-react~react-personalizer"),n.e("brandswitcher")]).then(n.bind(null,885)),Promise.all([n.e("m-react-spectrum"),n.e(2),n.e(3),n.e("vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor"),n.e("react")]).then(n.bind(null,271))]).then((function(n){var i=n[0],r=n[1].default,o=document.getElementById("brand-switcher");if(!o){var a=document.body;(o=document.createElement("div")).id="brand-switcher",o.className="spectrum--light",a.appendChild(o)}var s=i.default,l=r.wrapComponent(s);t.brandSwitcherInstance=new l({modelJSON:{onSelect:function(n){e.onSelect(n),t.brandSwitcherInstance.remove()},onCreateButtonClick:function(){e.onCreateButtonClick()},onCancel:function(){e.onCancel(),t.brandSwitcherInstance.remove()},activeBrand:e.activeBrand},el:o}),t.brandSwitcherInstance.render()}))},hide:function(){this.brandSwitcherInstance.remove()}};t.default=i},function(e,t,n){var i,r;i=[n(1),n(2),n(62),n(587)],void 0===(r=function(e,t,n,i){"use strict";var r=t.View.extend({events:{"click .inapp-merch-inter-maybe-later":"handleMerchOrgTakeoverMaybeLaterClick","click .upgrade-now-inter":"handleMerchGetStartedBtn","click .inapp-inter-close-teaser-x":"handleBtnClose"},className:"mrch-interstitial-view",cachename:"merchInterstitialView",handleMerchOrgTakeoverMaybeLaterClick:function(e){this.remove(),this.model.get("done")&&this.model.get("done")(!1)},handleMerchGetStartedBtn:function(e){n.handleShowUpgrade(this.model.get("workflow")),this.model.get("done")&&this.model.get("done")(!0)},handleBtnClose:function(e){this.remove(),this.model.get("done")&&this.model.get("done")(!1)},render:function(){this.$el.html(i.toString()),this.delegateEvents()},remove:function(){this.undelegateEvents(),this.$el.empty()}});return r.pattern="modal",r}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="inapp-interstitials-merch-shell">\n    <div class="inapp-merch-inter-teaser-dialog">\n        <div class="inapp-merch-generic-image-container">\n            <img class="inapp-merch-generic-image" src="/images/customBranding.svg">\n        </div>\n        <h4 class="inapp-header-text">Take your content to the next level </h4>\n        <p class="inapp-merch-sub-text">Differentiate your business, cause, or personal brand with a unique look and feel across all of your visual stories.</p>\n        <div class="inapp-merch-cta-container">\n            <div class="upgrade-now-inter">Upgrade now</div>\n            <div class="inapp-merch-inter-maybe-later">Maybe later</div>\n            </div>\n            <div class="inapp-inter-close-teaser-x"></div>\n        </div>\n    <div class="inapp-interstitials-merch-overlay"></div>\n</div>\n\n\n'},,,function(e,t,n){n(591),e.exports=n(757)},function(e,t,n){"use strict";(function(e){n(592),n(736),n(738),n(740),n(742),n(744),n(746),n(748),n(750),n(752),n(756),e._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),e._babelPolyfill=!0}).call(this,n(10))},function(e,t,n){n(593),n(596),n(597),n(598),n(599),n(600),n(601),n(602),n(603),n(604),n(605),n(606),n(607),n(608),n(609),n(610),n(611),n(612),n(613),n(614),n(615),n(616),n(617),n(618),n(619),n(620),n(621),n(622),n(623),n(624),n(625),n(626),n(627),n(628),n(629),n(630),n(631),n(632),n(633),n(634),n(635),n(636),n(637),n(639),n(640),n(641),n(642),n(643),n(644),n(645),n(646),n(647),n(648),n(649),n(650),n(651),n(652),n(653),n(654),n(655),n(656),n(657),n(658),n(659),n(660),n(661),n(662),n(663),n(664),n(665),n(666),n(667),n(668),n(669),n(670),n(671),n(672),n(674),n(675),n(677),n(678),n(679),n(680),n(681),n(682),n(683),n(686),n(687),n(688),n(689),n(690),n(691),n(692),n(693),n(694),n(695),n(696),n(697),n(698),n(377),n(699),n(458),n(700),n(459),n(701),n(702),n(703),n(704),n(460),n(707),n(708),n(709),n(710),n(711),n(712),n(713),n(714),n(715),n(716),n(717),n(718),n(719),n(720),n(721),n(722),n(723),n(724),n(725),n(726),n(727),n(728),n(729),n(730),n(731),n(732),n(733),n(734),n(735),e.exports=n(60)},function(e,t,n){"use strict";var i=n(28),r=n(102),o=n(59),a=n(9),s=n(95),l=n(216).KEY,c=n(29),d=n(327),u=n(261),h=n(245),p=n(40),f=n(357),g=n(440),m=n(595),v=n(360),b=n(30),y=n(31),w=n(104),k=n(215),x=n(244),_=n(249),S=n(443),C=n(119),T=n(51),M=n(247),I=C.f,D=T.f,P=S.f,A=i.Symbol,E=i.JSON,L=E&&E.stringify,N=p("_hidden"),F=p("toPrimitive"),R={}.propertyIsEnumerable,O=d("symbol-registry"),B=d("symbols"),z=d("op-symbols"),U=Object.prototype,j="function"==typeof A,$=i.QObject,H=!$||!$.prototype||!$.prototype.findChild,V=o&&c((function(){return 7!=_(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=I(U,t);i&&delete U[t],D(e,t,n),i&&e!==U&&D(U,t,i)}:D,G=function(e){var t=B[e]=_(A.prototype);return t._k=e,t},K=j&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A},q=function(e,t,n){return e===U&&q(z,t,n),b(e),t=k(t,!0),b(n),r(B,t)?(n.enumerable?(r(e,N)&&e[N][t]&&(e[N][t]=!1),n=_(n,{enumerable:x(0,!1)})):(r(e,N)||D(e,N,x(1,{})),e[N][t]=!0),V(e,t,n)):D(e,t,n)},W=function(e,t){b(e);for(var n,i=m(t=w(t)),r=0,o=i.length;o>r;)q(e,n=i[r++],t[n]);return e},Y=function(e){var t=R.call(this,e=k(e,!0));return!(this===U&&r(B,e)&&!r(z,e))&&(!(t||!r(this,e)||!r(B,e)||r(this,N)&&this[N][e])||t)},Q=function(e,t){if(e=w(e),t=k(t,!0),e!==U||!r(B,t)||r(z,t)){var n=I(e,t);return!n||!r(B,t)||r(e,N)&&e[N][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=P(w(e)),i=[],o=0;n.length>o;)r(B,t=n[o++])||t==N||t==l||i.push(t);return i},Z=function(e){for(var t,n=e===U,i=P(n?z:w(e)),o=[],a=0;i.length>a;)!r(B,t=i[a++])||n&&!r(U,t)||o.push(B[t]);return o};j||(s((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===U&&t.call(z,n),r(this,N)&&r(this[N],e)&&(this[N][e]=!1),V(this,e,x(1,n))};return o&&H&&V(U,e,{configurable:!0,set:t}),G(e)}).prototype,"toString",(function(){return this._k})),C.f=Q,T.f=q,n(250).f=S.f=X,n(282).f=Y,n(329).f=Z,o&&!n(246)&&s(U,"propertyIsEnumerable",Y,!0),f.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!j,{Symbol:A});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;J.length>ee;)p(J[ee++]);for(var te=M(p.store),ne=0;te.length>ne;)g(te[ne++]);a(a.S+a.F*!j,"Symbol",{for:function(e){return r(O,e+="")?O[e]:O[e]=A(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in O)if(O[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!j,"Object",{create:function(e,t){return void 0===t?_(e):W(_(e),t)},defineProperty:q,defineProperties:W,getOwnPropertyDescriptor:Q,getOwnPropertyNames:X,getOwnPropertySymbols:Z}),E&&a(a.S+a.F*(!j||c((function(){var e=A();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(y(t)||void 0!==e)&&!K(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),i[1]=t,L.apply(E,i)}}),A.prototype[F]||n(103)(A.prototype,F,A.prototype.valueOf),u(A,"Symbol"),u(Math,"Math",!0),u(i.JSON,"JSON",!0)},function(e,t,n){e.exports=n(327)("native-function-to-string",Function.toString)},function(e,t,n){var i=n(247),r=n(329),o=n(282);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),l=o.f,c=0;s.length>c;)l.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var i=n(9);i(i.S,"Object",{create:n(249)})},function(e,t,n){var i=n(9);i(i.S+i.F*!n(59),"Object",{defineProperty:n(51).f})},function(e,t,n){var i=n(9);i(i.S+i.F*!n(59),"Object",{defineProperties:n(442)})},function(e,t,n){var i=n(104),r=n(119).f;n(120)("getOwnPropertyDescriptor",(function(){return function(e,t){return r(i(e),t)}}))},function(e,t,n){var i=n(96),r=n(251);n(120)("getPrototypeOf",(function(){return function(e){return r(i(e))}}))},function(e,t,n){var i=n(96),r=n(247);n(120)("keys",(function(){return function(e){return r(i(e))}}))},function(e,t,n){n(120)("getOwnPropertyNames",(function(){return n(443).f}))},function(e,t,n){var i=n(31),r=n(216).onFreeze;n(120)("freeze",(function(e){return function(t){return e&&i(t)?e(r(t)):t}}))},function(e,t,n){var i=n(31),r=n(216).onFreeze;n(120)("seal",(function(e){return function(t){return e&&i(t)?e(r(t)):t}}))},function(e,t,n){var i=n(31),r=n(216).onFreeze;n(120)("preventExtensions",(function(e){return function(t){return e&&i(t)?e(r(t)):t}}))},function(e,t,n){var i=n(31);n(120)("isFrozen",(function(e){return function(t){return!i(t)||!!e&&e(t)}}))},function(e,t,n){var i=n(31);n(120)("isSealed",(function(e){return function(t){return!i(t)||!!e&&e(t)}}))},function(e,t,n){var i=n(31);n(120)("isExtensible",(function(e){return function(t){return!!i(t)&&(!e||e(t))}}))},function(e,t,n){var i=n(9);i(i.S+i.F,"Object",{assign:n(444)})},function(e,t,n){var i=n(9);i(i.S,"Object",{is:n(445)})},function(e,t,n){var i=n(9);i(i.S,"Object",{setPrototypeOf:n(362).set})},function(e,t,n){"use strict";var i=n(283),r={};r[n(40)("toStringTag")]="z",r+""!="[object z]"&&n(95)(Object.prototype,"toString",(function(){return"[object "+i(this)+"]"}),!0)},function(e,t,n){var i=n(9);i(i.P,"Function",{bind:n(446)})},function(e,t,n){var i=n(51).f,r=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in r||n(59)&&i(r,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var i=n(31),r=n(251),o=n(40)("hasInstance"),a=Function.prototype;o in a||n(51).f(a,o,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var i=n(9),r=n(448);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(e,t,n){var i=n(9),r=n(449);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(e,t,n){"use strict";var i=n(28),r=n(102),o=n(204),a=n(364),s=n(215),l=n(29),c=n(250).f,d=n(119).f,u=n(51).f,h=n(330).trim,p=i.Number,f=p,g=p.prototype,m="Number"==o(n(249)(g)),v="trim"in String.prototype,b=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,i,r,o=(t=v?t.trim():h(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var a,l=t.slice(2),c=0,d=l.length;c<d;c++)if((a=l.charCodeAt(c))<48||a>r)return NaN;return parseInt(l,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(m?l((function(){g.valueOf.call(n)})):"Number"!=o(n))?a(new f(b(t)),n,p):b(t)};for(var y,w=n(59)?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;w.length>k;k++)r(f,y=w[k])&&!r(p,y)&&u(p,y,d(f,y));p.prototype=g,g.constructor=p,n(95)(i,"Number",p)}},function(e,t,n){"use strict";var i=n(9),r=n(118),o=n(450),a=n(365),s=1..toFixed,l=Math.floor,c=[0,0,0,0,0,0],d="Number.toFixed: incorrect invocation!",u=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*c[n],c[n]=i%1e7,i=l(i/1e7)},h=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=l(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},f=function(e,t,n){return 0===t?n:t%2==1?f(e,t-1,n*e):f(e*e,t/2,n)};i(i.P+i.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(29)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,n,i,s,l=o(this,d),c=r(e),g="",m="0";if(c<0||c>20)throw RangeError(d);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(g="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*f(2,69,1))-69)<0?l*f(2,-t,1):l/f(2,t,1),n*=4503599627370496,(t=52-t)>0){for(u(0,n),i=c;i>=7;)u(1e7,0),i-=7;for(u(f(10,i,1),0),i=t-1;i>=23;)h(1<<23),i-=23;h(1<<i),u(1,1),h(2),m=p()}else u(0,n),u(1<<-t,0),m=p()+a.call("0",c);return m=c>0?g+((s=m.length)<=c?"0."+a.call("0",c-s)+m:m.slice(0,s-c)+"."+m.slice(s-c)):g+m}})},function(e,t,n){"use strict";var i=n(9),r=n(29),o=n(450),a=1..toPrecision;i(i.P+i.F*(r((function(){return"1"!==a.call(1,void 0)}))||!r((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var i=n(9);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var i=n(9),r=n(28).isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}})},function(e,t,n){var i=n(9);i(i.S,"Number",{isInteger:n(451)})},function(e,t,n){var i=n(9);i(i.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var i=n(9),r=n(451),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return r(e)&&o(e)<=9007199254740991}})},function(e,t,n){var i=n(9);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var i=n(9);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var i=n(9),r=n(449);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(e,t,n){var i=n(9),r=n(448);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(e,t,n){var i=n(9),r=n(452),o=Math.sqrt,a=Math.acosh;i(i.S+i.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:r(e-1+o(e-1)*o(e+1))}})},function(e,t,n){var i=n(9),r=Math.asinh;i(i.S+i.F*!(r&&1/r(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var i=n(9),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var i=n(9),r=n(366);i(i.S,"Math",{cbrt:function(e){return r(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var i=n(9);i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var i=n(9),r=Math.exp;i(i.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},function(e,t,n){var i=n(9),r=n(367);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(e,t,n){var i=n(9);i(i.S,"Math",{fround:n(638)})},function(e,t,n){var i=n(366),r=Math.pow,o=r(2,-52),a=r(2,-23),s=r(2,127)*(2-a),l=r(2,-126);e.exports=Math.fround||function(e){var t,n,r=Math.abs(e),c=i(e);return r<l?c*(r/l/a+1/o-1/o)*l*a:(n=(t=(1+a/o)*r)-(t-r))>s||n!=n?c*(1/0):c*n}},function(e,t,n){var i=n(9),r=Math.abs;i(i.S,"Math",{hypot:function(e,t){for(var n,i,o=0,a=0,s=arguments.length,l=0;a<s;)l<(n=r(arguments[a++]))?(o=o*(i=l/n)*i+1,l=n):o+=n>0?(i=n/l)*i:n;return l===1/0?1/0:l*Math.sqrt(o)}})},function(e,t,n){var i=n(9),r=Math.imul;i(i.S+i.F*n(29)((function(){return-5!=r(4294967295,5)||2!=r.length})),"Math",{imul:function(e,t){var n=+e,i=+t,r=65535&n,o=65535&i;return 0|r*o+((65535&n>>>16)*o+r*(65535&i>>>16)<<16>>>0)}})},function(e,t,n){var i=n(9);i(i.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var i=n(9);i(i.S,"Math",{log1p:n(452)})},function(e,t,n){var i=n(9);i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var i=n(9);i(i.S,"Math",{sign:n(366)})},function(e,t,n){var i=n(9),r=n(367),o=Math.exp;i(i.S+i.F*n(29)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var i=n(9),r=n(367),o=Math.exp;i(i.S,"Math",{tanh:function(e){var t=r(e=+e),n=r(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var i=n(9);i(i.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var i=n(9),r=n(248),o=String.fromCharCode,a=String.fromCodePoint;i(i.S+i.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,a=0;i>a;){if(t=+arguments[a++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var i=n(9),r=n(104),o=n(49);i(i.S,"String",{raw:function(e){for(var t=r(e.raw),n=o(t.length),i=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<i&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(330)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var i=n(368)(!0);n(369)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var i=n(9),r=n(368)(!1);i(i.P,"String",{codePointAt:function(e){return r(this,e)}})},function(e,t,n){"use strict";var i=n(9),r=n(49),o=n(370),a="".endsWith;i(i.P+i.F*n(372)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,i=r(t.length),s=void 0===n?i:Math.min(r(n),i),l=String(e);return a?a.call(t,l,s):t.slice(s-l.length,s)===l}})},function(e,t,n){"use strict";var i=n(9),r=n(370);i(i.P+i.F*n(372)("includes"),"String",{includes:function(e){return!!~r(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(9);i(i.P,"String",{repeat:n(365)})},function(e,t,n){"use strict";var i=n(9),r=n(49),o=n(370),a="".startsWith;i(i.P+i.F*n(372)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return a?a.call(t,i,n):t.slice(n,n+i.length)===i}})},function(e,t,n){"use strict";n(97)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(97)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(97)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(97)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(97)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(97)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(97)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(97)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(97)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(97)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(97)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(97)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(97)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){var i=n(9);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var i=n(9),r=n(96),o=n(215);i(i.P+i.F*n(29)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=r(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var i=n(9),r=n(673);i(i.P+i.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},function(e,t,n){"use strict";var i=n(29),r=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=i((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))}))||!i((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=t<0?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var i=Date.prototype,r=i.toString,o=i.getTime;new Date(NaN)+""!="Invalid Date"&&n(95)(i,"toString",(function(){var e=o.call(this);return e==e?r.call(this):"Invalid Date"}))},function(e,t,n){var i=n(40)("toPrimitive"),r=Date.prototype;i in r||n(103)(r,i,n(676))},function(e,t,n){"use strict";var i=n(30),r=n(215);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return r(i(this),"number"!=e)}},function(e,t,n){var i=n(9);i(i.S,"Array",{isArray:n(360)})},function(e,t,n){"use strict";var i=n(202),r=n(9),o=n(96),a=n(454),s=n(373),l=n(49),c=n(374),d=n(375);r(r.S+r.F*!n(331)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,r,u,h=o(e),p="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,m=void 0!==g,v=0,b=d(h);if(m&&(g=i(g,f>2?arguments[2]:void 0,2)),null==b||p==Array&&s(b))for(n=new p(t=l(h.length));t>v;v++)c(n,v,m?g(h[v],v):h[v]);else for(u=b.call(h),n=new p;!(r=u.next()).done;v++)c(n,v,m?a(u,g,[r.value,v],!0):r.value);return n.length=v,n}})},function(e,t,n){"use strict";var i=n(9),r=n(374);i(i.S+i.F*n(29)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)r(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var i=n(9),r=n(104),o=[].join;i(i.P+i.F*(n(281)!=Object||!n(109)(o)),"Array",{join:function(e){return o.call(r(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var i=n(9),r=n(361),o=n(204),a=n(248),s=n(49),l=[].slice;i(i.P+i.F*n(29)((function(){r&&l.call(r)})),"Array",{slice:function(e,t){var n=s(this.length),i=o(this);if(t=void 0===t?n:t,"Array"==i)return l.call(this,e,t);for(var r=a(e,n),c=a(t,n),d=s(c-r),u=new Array(d),h=0;h<d;h++)u[h]="String"==i?this.charAt(r+h):this[r+h];return u}})},function(e,t,n){"use strict";var i=n(9),r=n(203),o=n(96),a=n(29),s=[].sort,l=[1,2,3];i(i.P+i.F*(a((function(){l.sort(void 0)}))||!a((function(){l.sort(null)}))||!n(109)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),r(e))}})},function(e,t,n){"use strict";var i=n(9),r=n(121)(0),o=n(109)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var i=n(685);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){var i=n(31),r=n(360),o=n(40)("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var i=n(9),r=n(121)(1);i(i.P+i.F*!n(109)([].map,!0),"Array",{map:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(9),r=n(121)(2);i(i.P+i.F*!n(109)([].filter,!0),"Array",{filter:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(9),r=n(121)(3);i(i.P+i.F*!n(109)([].some,!0),"Array",{some:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(9),r=n(121)(4);i(i.P+i.F*!n(109)([].every,!0),"Array",{every:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(9),r=n(455);i(i.P+i.F*!n(109)([].reduce,!0),"Array",{reduce:function(e){return r(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var i=n(9),r=n(455);i(i.P+i.F*!n(109)([].reduceRight,!0),"Array",{reduceRight:function(e){return r(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var i=n(9),r=n(328)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(a||!n(109)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(9),r=n(104),o=n(118),a=n(49),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!n(109)(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=r(this),n=a(t.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}})},function(e,t,n){var i=n(9);i(i.P,"Array",{copyWithin:n(456)}),n(263)("copyWithin")},function(e,t,n){var i=n(9);i(i.P,"Array",{fill:n(376)}),n(263)("fill")},function(e,t,n){"use strict";var i=n(9),r=n(121)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),i(i.P+i.F*o,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(263)("find")},function(e,t,n){"use strict";var i=n(9),r=n(121)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),i(i.P+i.F*a,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(263)(o)},function(e,t,n){n(264)("Array")},function(e,t,n){var i=n(28),r=n(364),o=n(51).f,a=n(250).f,s=n(371),l=n(332),c=i.RegExp,d=c,u=c.prototype,h=/a/g,p=/a/g,f=new c(h)!==h;if(n(59)&&(!f||n(29)((function(){return p[n(40)("match")]=!1,c(h)!=h||c(p)==p||"/a/i"!=c(h,"i")})))){c=function(e,t){var n=this instanceof c,i=s(e),o=void 0===t;return!n&&i&&e.constructor===c&&o?e:r(f?new d(i&&!o?e.source:e,t):d((i=e instanceof c)?e.source:e,i&&o?l.call(e):t),n?this:u,c)};for(var g=function(e){e in c||o(c,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},m=a(d),v=0;m.length>v;)g(m[v++]);u.constructor=c,c.prototype=u,n(95)(i,"RegExp",c)}n(264)("RegExp")},function(e,t,n){"use strict";n(459);var i=n(30),r=n(332),o=n(59),a=/./.toString,s=function(e){n(95)(RegExp.prototype,"toString",e,!0)};n(29)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?r.call(e):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(e,t,n){"use strict";var i=n(30),r=n(49),o=n(379),a=n(333);n(334)("match",1,(function(e,t,n,s){return[function(n){var i=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=s(n,e,this);if(t.done)return t.value;var l=i(e),c=String(this);if(!l.global)return a(l,c);var d=l.unicode;l.lastIndex=0;for(var u,h=[],p=0;null!==(u=a(l,c));){var f=String(u[0]);h[p]=f,""===f&&(l.lastIndex=o(c,r(l.lastIndex),d)),p++}return 0===p?null:h}]}))},function(e,t,n){"use strict";var i=n(30),r=n(96),o=n(49),a=n(118),s=n(379),l=n(333),c=Math.max,d=Math.min,u=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(334)("replace",2,(function(e,t,n,f){return[function(i,r){var o=e(this),a=null==i?void 0:i[t];return void 0!==a?a.call(i,o,r):n.call(String(o),i,r)},function(e,t){var r=f(n,e,this,t);if(r.done)return r.value;var u=i(e),h=String(this),p="function"==typeof t;p||(t=String(t));var m=u.global;if(m){var v=u.unicode;u.lastIndex=0}for(var b=[];;){var y=l(u,h);if(null===y)break;if(b.push(y),!m)break;""===String(y[0])&&(u.lastIndex=s(h,o(u.lastIndex),v))}for(var w,k="",x=0,_=0;_<b.length;_++){y=b[_];for(var S=String(y[0]),C=c(d(a(y.index),h.length),0),T=[],M=1;M<y.length;M++)T.push(void 0===(w=y[M])?w:String(w));var I=y.groups;if(p){var D=[S].concat(T,C,h);void 0!==I&&D.push(I);var P=String(t.apply(void 0,D))}else P=g(S,h,C,T,I,t);C>=x&&(k+=h.slice(x,C)+P,x=C+S.length)}return k+h.slice(x)}];function g(e,t,i,o,a,s){var l=i+e.length,c=o.length,d=p;return void 0!==a&&(a=r(a),d=h),n.call(s,d,(function(n,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(l);case"<":s=a[r.slice(1,-1)];break;default:var d=+r;if(0===d)return n;if(d>c){var h=u(d/10);return 0===h?n:h<=c?void 0===o[h-1]?r.charAt(1):o[h-1]+r.charAt(1):n}s=o[d-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var i=n(30),r=n(445),o=n(333);n(334)("search",1,(function(e,t,n,a){return[function(n){var i=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=i(e),l=String(this),c=s.lastIndex;r(c,0)||(s.lastIndex=0);var d=o(s,l);return r(s.lastIndex,c)||(s.lastIndex=c),null===d?-1:d.index}]}))},function(e,t,n){"use strict";var i=n(371),r=n(30),o=n(284),a=n(379),s=n(49),l=n(333),c=n(378),d=n(29),u=Math.min,h=[].push,p=!d((function(){RegExp(4294967295,"y")}));n(334)("split",2,(function(e,t,n,d){var f;return f="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return n.call(r,e,t);for(var o,a,s,l=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,p=void 0===t?4294967295:t>>>0,f=new RegExp(e.source,d+"g");(o=c.call(f,r))&&!((a=f.lastIndex)>u&&(l.push(r.slice(u,o.index)),o.length>1&&o.index<r.length&&h.apply(l,o.slice(1)),s=o[0].length,u=a,l.length>=p));)f.lastIndex===o.index&&f.lastIndex++;return u===r.length?!s&&f.test("")||l.push(""):l.push(r.slice(u)),l.length>p?l.slice(0,p):l}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,i){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r,i):f.call(String(r),n,i)},function(e,t){var i=d(f,e,this,t,f!==n);if(i.done)return i.value;var c=r(e),h=String(this),g=o(c,RegExp),m=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(p?"y":"g"),b=new g(p?c:"^(?:"+c.source+")",v),y=void 0===t?4294967295:t>>>0;if(0===y)return[];if(0===h.length)return null===l(b,h)?[h]:[];for(var w=0,k=0,x=[];k<h.length;){b.lastIndex=p?k:0;var _,S=l(b,p?h:h.slice(k));if(null===S||(_=u(s(b.lastIndex+(p?0:k)),h.length))===w)k=a(h,k,m);else{if(x.push(h.slice(w,k)),x.length===y)return x;for(var C=1;C<=S.length-1;C++)if(x.push(S[C]),x.length===y)return x;k=w=_}}return x.push(h.slice(w)),x}]}))},function(e,t,n){var i=n(28),r=n(380).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l="process"==n(204)(a);e.exports=function(){var e,t,n,c=function(){var i,r;for(l&&(i=a.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(c)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var d=s.resolve(void 0);n=function(){d.then(c)}}else n=function(){r.call(i,c)};else{var u=!0,h=document.createTextNode("");new o(c).observe(h,{characterData:!0}),n=function(){h.data=u=!u}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var i=n(463),r=n(252);e.exports=n(337)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=i.getEntry(r(this,"Map"),e);return t&&t.v},set:function(e,t){return i.def(r(this,"Map"),0===e?0:e,t)}},i,!0)},function(e,t,n){"use strict";var i=n(463),r=n(252);e.exports=n(337)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return i.def(r(this,"Set"),e=0===e?0:e,e)}},i)},function(e,t,n){"use strict";var i,r=n(28),o=n(121)(0),a=n(95),s=n(216),l=n(444),c=n(464),d=n(31),u=n(252),h=n(252),p=!r.ActiveXObject&&"ActiveXObject"in r,f=s.getWeak,g=Object.isExtensible,m=c.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(e){if(d(e)){var t=f(e);return!0===t?m(u(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(u(this,"WeakMap"),e,t)}},y=e.exports=n(337)("WeakMap",v,b,c,!0,!0);h&&p&&(l((i=c.getConstructor(v,"WeakMap")).prototype,b),s.NEED=!0,o(["delete","has","get","set"],(function(e){var t=y.prototype,n=t[e];a(t,e,(function(t,r){if(d(t)&&!g(t)){this._f||(this._f=new i);var o=this._f[e](t,r);return"set"==e?this:o}return n.call(this,t,r)}))})))},function(e,t,n){"use strict";var i=n(464),r=n(252);n(337)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return i.def(r(this,"WeakSet"),e,!0)}},i,!1,!0)},function(e,t,n){"use strict";var i=n(9),r=n(338),o=n(381),a=n(30),s=n(248),l=n(49),c=n(31),d=n(28).ArrayBuffer,u=n(284),h=o.ArrayBuffer,p=o.DataView,f=r.ABV&&d.isView,g=h.prototype.slice,m=r.VIEW;i(i.G+i.W+i.F*(d!==h),{ArrayBuffer:h}),i(i.S+i.F*!r.CONSTR,"ArrayBuffer",{isView:function(e){return f&&f(e)||c(e)&&m in e}}),i(i.P+i.U+i.F*n(29)((function(){return!new h(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==g&&void 0===t)return g.call(a(this),e);for(var n=a(this).byteLength,i=s(e,n),r=s(void 0===t?n:t,n),o=new(u(this,h))(l(r-i)),c=new p(this),d=new p(o),f=0;i<r;)d.setUint8(f++,c.getUint8(i++));return o}}),n(264)("ArrayBuffer")},function(e,t,n){var i=n(9);i(i.G+i.W+i.F*!n(338).ABV,{DataView:n(381).DataView})},function(e,t,n){n(206)("Int8",1,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(206)("Uint8",1,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(206)("Uint8",1,(function(e){return function(t,n,i){return e(this,t,n,i)}}),!0)},function(e,t,n){n(206)("Int16",2,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(206)("Uint16",2,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(206)("Int32",4,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(206)("Uint32",4,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(206)("Float32",4,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){n(206)("Float64",8,(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){var i=n(9),r=n(203),o=n(30),a=(n(28).Reflect||{}).apply,s=Function.apply;i(i.S+i.F*!n(29)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,n){var i=r(e),l=o(n);return a?a(i,t,l):s.call(i,t,l)}})},function(e,t,n){var i=n(9),r=n(249),o=n(203),a=n(30),s=n(31),l=n(29),c=n(446),d=(n(28).Reflect||{}).construct,u=l((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),h=!l((function(){d((function(){}))}));i(i.S+i.F*(u||h),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(h&&!u)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(c.apply(e,i))}var l=n.prototype,p=r(s(l)?l:Object.prototype),f=Function.apply.call(e,p,t);return s(f)?f:p}})},function(e,t,n){var i=n(51),r=n(9),o=n(30),a=n(215);r(r.S+r.F*n(29)((function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return i.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var i=n(9),r=n(119).f,o=n(30);i(i.S,"Reflect",{deleteProperty:function(e,t){var n=r(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var i=n(9),r=n(30),o=function(e){this._t=r(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(453)(o,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),i(i.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){var i=n(119),r=n(251),o=n(102),a=n(9),s=n(31),l=n(30);a(a.S,"Reflect",{get:function e(t,n){var a,c,d=arguments.length<3?t:arguments[2];return l(t)===d?t[n]:(a=i.f(t,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(d):void 0:s(c=r(t))?e(c,n,d):void 0}})},function(e,t,n){var i=n(119),r=n(9),o=n(30);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(o(e),t)}})},function(e,t,n){var i=n(9),r=n(251),o=n(30);i(i.S,"Reflect",{getPrototypeOf:function(e){return r(o(e))}})},function(e,t,n){var i=n(9);i(i.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var i=n(9),r=n(30),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return r(e),!o||o(e)}})},function(e,t,n){var i=n(9);i(i.S,"Reflect",{ownKeys:n(466)})},function(e,t,n){var i=n(9),r=n(30),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){r(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){var i=n(51),r=n(119),o=n(251),a=n(102),s=n(9),l=n(244),c=n(30),d=n(31);s(s.S,"Reflect",{set:function e(t,n,s){var u,h,p=arguments.length<4?t:arguments[3],f=r.f(c(t),n);if(!f){if(d(h=o(t)))return e(h,n,s,p);f=l(0)}if(a(f,"value")){if(!1===f.writable||!d(p))return!1;if(u=r.f(p,n)){if(u.get||u.set||!1===u.writable)return!1;u.value=s,i.f(p,n,u)}else i.f(p,n,l(0,s));return!0}return void 0!==f.set&&(f.set.call(p,s),!0)}})},function(e,t,n){var i=n(9),r=n(362);r&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){n(737),e.exports=n(60).Array.includes},function(e,t,n){"use strict";var i=n(9),r=n(328)(!0);i(i.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(263)("includes")},function(e,t,n){n(739),e.exports=n(60).String.padStart},function(e,t,n){"use strict";var i=n(9),r=n(467),o=n(336),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*a,"String",{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){n(741),e.exports=n(60).String.padEnd},function(e,t,n){"use strict";var i=n(9),r=n(467),o=n(336),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*a,"String",{padEnd:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){n(743),e.exports=n(357).f("asyncIterator")},function(e,t,n){n(440)("asyncIterator")},function(e,t,n){n(745),e.exports=n(60).Object.getOwnPropertyDescriptors},function(e,t,n){var i=n(9),r=n(466),o=n(104),a=n(119),s=n(374);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,i=o(e),l=a.f,c=r(i),d={},u=0;c.length>u;)void 0!==(n=l(i,t=c[u++]))&&s(d,t,n);return d}})},function(e,t,n){n(747),e.exports=n(60).Object.values},function(e,t,n){var i=n(9),r=n(468)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){n(749),e.exports=n(60).Object.entries},function(e,t,n){var i=n(9),r=n(468)(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},function(e,t,n){"use strict";n(460),n(751),e.exports=n(60).Promise.finally},function(e,t,n){"use strict";var i=n(9),r=n(60),o=n(28),a=n(284),s=n(462);i(i.P+i.R,"Promise",{finally:function(e){var t=a(this,r.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){n(753),n(754),n(755),e.exports=n(60)},function(e,t,n){var i=n(28),r=n(9),o=n(336),a=[].slice,s=/MSIE .\./.test(o),l=function(e){return function(t,n){var i=arguments.length>2,r=!!i&&a.call(arguments,2);return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};r(r.G+r.B+r.F*s,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(e,t,n){var i=n(9),r=n(380);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){for(var i=n(377),r=n(247),o=n(95),a=n(28),s=n(103),l=n(262),c=n(40),d=c("iterator"),u=c("toStringTag"),h=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(p),g=0;g<f.length;g++){var m,v=f[g],b=p[v],y=a[v],w=y&&y.prototype;if(w&&(w[d]||s(w,d,h),w[u]||s(w,u,v),l[v]=h,b))for(m in i)w[m]||o(w,m,i[m],!0)}},function(e,t){!function(t){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",c="object"==typeof e,d=t.regeneratorRuntime;if(d)c&&(e.exports=d);else{(d=t.regeneratorRuntime=c?e.exports:{}).wrap=w;var u="suspendedStart",h="suspendedYield",p="executing",f="completed",g={},m={};m[a]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(A([])));b&&b!==i&&r.call(b,a)&&(m=b);var y=S.prototype=x.prototype=Object.create(m);_.prototype=y.constructor=S,S.constructor=_,S[l]=_.displayName="GeneratorFunction",d.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(y),e},d.awrap=function(e){return{__await:e}},C(T.prototype),T.prototype[s]=function(){return this},d.AsyncIterator=T,d.async=function(e,t,n,i){var r=new T(w(e,t,n,i));return d.isGeneratorFunction(t)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},C(y),y[l]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},d.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},d.values=A,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(D),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,r){return s.type="throw",s.arg=e,t.next=i,r&&(t.method="next",t.arg=n),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;D(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:A(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),g}}}function w(e,t,n,i){var r=t&&t.prototype instanceof x?t:x,o=Object.create(r.prototype),a=new P(i||[]);return o._invoke=function(e,t,n){var i=u;return function(r,o){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw o;return E()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=M(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===u)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=k(e,t,n);if("normal"===l.type){if(i=n.done?f:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=f,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function k(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function x(){}function _(){}function S(){}function C(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function T(e){var t;this._invoke=function(n,i){function o(){return new Promise((function(t,o){!function t(n,i,o,a){var s=k(e[n],e,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return t("throw",e,o,a)}))}a(s.arg)}(n,i,t,o)}))}return t=t?t.then(o,o):o()}}function M(e,t){var i=e.iterator[t.method];if(i===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,M(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=k(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,g;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:E}}function E(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t,n){var i,r,o=n(115).default;performance.mark(o.loggableEntryName("beginAppLoad")),i=[n(1),n(0),n(2),n(3),n(758),n(11),n(4),n(8),n(53),n(387),n(797),n(6),n(298),n(44),n(269),n(270),n(299),n(501),n(13),n(260),n(26),n(27),n(45),n(19),n(498),n(396),n(36),n(403),n(62),n(12),n(106),n(839),n(500),n(5),n(257),n(7),n(108),n(273),n(107),n(426),n(42),n(15),n(223),n(295),n(98),n(301),n(213),n(413),n(309),n(92),n(70),n(415),n(414),n(101),n(585),n(354),n(841),n(37)],void 0===(r=function(e,t,i,r,a,s,l,c,d,u,h,p,f,g,m,v,b,y,w,k,x,_,S,C,T,M,I,D,P,A,E,L,N,F,R,O,B,z,U,j,$,H,V,G,K,q,W,Y,Q,X,Z,J,ee,te,ne,ie,re,oe){"use strict";var ae=window.marvel||{};window.marvel=ae,window.marvel.clsAppImpl=_,window.marvel.clsAppStorage=S,window.marvel.clsLogger=s,window.marvel.AuthController=p,window.marvel.AppRegistry=x,window.marvel.BrandKit=C,window.marvel.ColorPicker=T,window.marvel.ColorUtils=M,window.marvel.SparkFonts=I,window.marvel.FontPicker=D,window.marvel.UpgradeController=P,window.marvel.ConfirmView=A,window.marvel.DropdownView=E,window.marvel.PreviewOverlayView=L,window.marvel.ImagePickerView=N,window.marvel.G11N=c,window.marvel.LMSController=y.default,window.marvel.MrvlImageUtils=Z,window.marvel.SearchController=ie,window.marvel.muiStorage=w,window.marvel.MarvelApps=k,window.marvel.ExperimentEngine=$,window.marvel.BrandSwitcher=ne,window.marvel.UUID=H,window.marvel.Analytics=O,window.marvel.SparkFontsRegistry=V,window.marvel.SparkFontMetrics=G,window.marvel.MuiImageResultItem=K,window.marvel.MuiCompositeDocModel=q,window.marvel.FBAnalytics=W,window.marvel.BrandKitFontCards=Y,window.marvel.FacebookAPIController=Q,window.marvel.CanvasToBlob=X,window.marvel.NewRelic=B,window.marvel.MarvelCoreViewImageFilter=J,window.marvel.MarvelCoreViewDooploRequest=ee,window.marvel.jszip=a,window.marvel.retry=te,ae.routers=ae.routers||{},ae._isInApp=!0;var se=oe.parse(window.location.href,!0);ae._nnr=!t.isUndefined(se.query.nnr),g.isLoadedAndConsented().then((function(e){e?R.isLoaded().then((function(){R.setAdobeNavConsent(!0)})).done():window.marvel.logger.info("User consent not given. Evidon timed out/failed to load")})).done();var le=document.querySelector("html"),ce=!1,de=!1;new MutationObserver((function(e,t){for(var n=0,i=e.length;n<i;n++){var r=e[n];if("attributes"===r.type&&"class"===r.attributeName){var o,a=le.classList;a.contains("wf-loading")&&!ce&&(ce=!0),!a.contains("wf-loading")&&ce&&(de=!0),a.contains("wf-loading")&&!de?(o=document.querySelector("#wf-loading-text-vanish-styles"))||((o=document.createElement("style")).type="text/css",o.id="wf-loading-text-vanish-styles",o.innerHTML="html body * {color: transparent !important}html body a.button {visibility: hidden !important}",document.head.appendChild(o)):(o=document.querySelector("#wf-loading-text-vanish-styles"))&&o.remove()}}})).observe(le,{attributes:!0,childList:!1,subtree:!1}),u.initialize(),p.clientId=l.cid,p.apiKey=l.key,window.adobeid=p.defineAdobeId(),window.marvel.events=d;new re(e("div.spark-toast-holder.spectrum.spectrum--light")[0]);ae.features=F,ae.settings=l,O.setProductName("projectm"),!0!==window.marvel._isTestEnv&&(z.init(),z.triggerPageLoadAnalyticsEvents());var ue=r.defer();ae.appIsReady=ue.promise,ae.appIsReady.then((function(){e(".generic-loading-screen").css("display","none")})),ae.theoWebAppRegistered=r.defer(),ae.dynamicScriptsLoadedDefer=r.defer(),ae.dynamicScriptsLoaded=ae.dynamicScriptsLoadedDefer.promise,ae.logger=new s,Promise.all([n.e(5),n.e(6)]).then(function(e){n(427).init()}.bind(null,n)).catch(n.oe),$.init(),m.init(),f.init(),v.init(),b.init(),y.default.init(),n(842).registerProviders(),j.registerMessageView({MessageViewCls:n(849)}),j.registerMessageView({MessageViewCls:n(851)}),j.registerMessageView({MessageViewCls:n(586),parentSelector:".inapp-merch-overlay"}),j.registerMessageView({MessageViewCls:n(495),parentSelector:".popup-message-wrapper"}),j.registerMessageView({MessageViewCls:n(496)}),j.registerMessageView(n(12).getMessageViewAdaptor()),ae.appGlobalsAreReady=r.Promise.resolve(),e((function(){if(!p.checkUserAgentNavIfNotOk())return ue.reject(new Error("App::checkUserAgentNavIfNotOk"));window.marvel.dynamicScriptsLoaded.then((function(){w.enableStorage(l.ss),ae.routers.main=new h,ae.navigate=function(e,t){ae.routers.main.navigate(e,t)},i.history.start({pushState:!0,root:"/"+c.localePathPrefix+"sp/",hashChange:!1}),k.registerApps(x),ue.resolve(),performance.measure(o.loggableEntryName("endAppLoad"),o.loggableEntryName("beginAppLoad"))})).catch((function(e){window.marvel.logger.error(e)})).done()})),window.addEventListener("unhandledrejection",(function(e){var t={eventReason:e.reason,eventPromise:e.promise};window.marvel.logger.error("unhandledRejection event emitted.",t)}))}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new i;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}i.prototype=n(759),i.prototype.loadAsync=n(792),i.support=n(217),i.defaults=n(476),i.version="3.1.5",i.loadAsync=function(e,t){return(new i).loadAsync(e,t)},i.external=n(285),e.exports=i},function(e,t,n){"use strict";var i=n(267),r=n(41),o=n(105),a=n(475),s=n(476),l=n(384),c=n(778),d=n(779),u=n(339),h=n(791),p=function(e,t,n){var i,a=r.getTypeOf(t),d=r.extend(n||{},s);d.date=d.date||new Date,null!==d.compression&&(d.compression=d.compression.toUpperCase()),"string"==typeof d.unixPermissions&&(d.unixPermissions=parseInt(d.unixPermissions,8)),d.unixPermissions&&16384&d.unixPermissions&&(d.dir=!0),d.dosPermissions&&16&d.dosPermissions&&(d.dir=!0),d.dir&&(e=g(e)),d.createFolders&&(i=f(e))&&m.call(this,i,!0);var p="string"===a&&!1===d.binary&&!1===d.base64;n&&void 0!==n.binary||(d.binary=!p),(t instanceof l&&0===t.uncompressedSize||d.dir||!t||0===t.length)&&(d.base64=!1,d.binary=!0,t="",d.compression="STORE",a="string");var v=null;v=t instanceof l||t instanceof o?t:u.isNode&&u.isStream(t)?new h(e,t):r.prepareContent(e,t,d.binary,d.optimizedBinaryString,d.base64);var b=new c(e,v,d);this.files[e]=b},f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},m=function(e,t){return t=void 0!==t?t:s.createFolders,e=g(e),this.files[e]||p.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,i;for(t in this.files)this.files.hasOwnProperty(t)&&(i=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,i))},filter:function(e){var t=[];return this.forEach((function(n,i){e(n,i)&&t.push(i)})),t},file:function(e,t,n){if(1===arguments.length){if(v(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var r=this.files[this.root+e];return r&&!r.dir?r:null}return(e=this.root+e,p.call(this,e,t,n),this)},folder:function(e){if(!e)return this;if(v(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=m.call(this,t),i=this.clone();return i.root=n.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=r.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");r.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var s=n.comment||this.comment||"";t=d.generateWorker(this,n,s)}catch(e){(t=new o("error")).error(e)}return new a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};e.exports=b},function(e,t,n){n(761),e.exports=n(471).setImmediate},function(e,t,n){var i=n(762),r=n(770);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){var i=n(340),r=n(471),o=n(472),a=n(764),s=function(e,t,n){var l,c,d,u=e&s.F,h=e&s.G,p=e&s.S,f=e&s.P,g=e&s.B,m=e&s.W,v=h?r:r[t]||(r[t]={}),b=v.prototype,y=h?i:p?i[t]:(i[t]||{}).prototype;for(l in h&&(n=t),n)(c=!u&&y&&void 0!==y[l])&&l in v||(d=c?y[l]:n[l],v[l]=h&&"function"!=typeof y[l]?n[l]:g&&c?o(d,i):m&&y[l]==d?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):f&&"function"==typeof d?o(Function.call,d):d,f&&((v.virtual||(v.virtual={}))[l]=d,e&s.R&&b&&!b[l]&&a(b,l,d)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(765),r=n(769);e.exports=n(383)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(766),r=n(767),o=n(768),a=Object.defineProperty;t.f=n(383)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(382);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(383)&&!n(473)((function(){return 7!=Object.defineProperty(n(474)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(382);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i,r,o,a=n(472),s=n(771),l=n(772),c=n(474),d=n(340),u=d.process,h=d.setImmediate,p=d.clearImmediate,f=d.MessageChannel,g=0,m={},v=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){v.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++g]=function(){s("function"==typeof e?e:Function(e),t)},i(g),g},p=function(e){delete m[e]},"process"==n(773)(u)?i=function(e){u.nextTick(a(v,e,1))}:f?(o=(r=new f).port2,r.port1.onmessage=b,i=a(o.postMessage,o,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(i=function(e){d.postMessage(e+"","*")},d.addEventListener("message",b,!1)):i="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),e.exports={set:h,clear:p}},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){e.exports=n(340).document&&document.documentElement},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";var i=n(775);function r(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==r&&p(this,e)}function d(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(e,t,n){i((function(){var i;try{i=t(n)}catch(t){return o.reject(e,t)}i===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,i)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function i(t){n||(n=!0,o.reject(e,t))}function r(t){n||(n=!0,o.resolve(e,t))}var a=f((function(){t(r,i)}));"error"===a.status&&i(a.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}e.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(r);this.state!==l?u(n,this.state===s?e:t,this.outcome):this.queue.push(new d(n,e,t));return n},d.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},d.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},d.prototype.callRejected=function(e){o.reject(this.promise,e)},d.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=f(h,t);if("error"===n.status)return o.reject(e,n.value);var i=n.value;if(i)p(e,i);else{e.state=s,e.outcome=t;for(var r=-1,a=e.queue.length;++r<a;)e.queue[r].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},c.resolve=function(e){if(e instanceof this)return e;return o.resolve(new this(r),e)},c.reject=function(e){var t=new this(r);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);var a=new Array(n),s=0,l=-1,c=new this(r);for(;++l<n;)d(e[l],l);return c;function d(e,r){t.resolve(e).then((function(e){a[r]=e,++s!==n||i||(i=!0,o.resolve(c,a))}),(function(e){i||(i=!0,o.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);var a=-1,s=new this(r);for(;++a<n;)l=e[a],t.resolve(l).then((function(e){i||(i=!0,o.resolve(s,e))}),(function(e){i||(i=!0,o.reject(s,e))}));var l;return s}},function(e,t,n){"use strict";(function(t){var n,i,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,a=new r(d),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){d(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(d,0)};else{var l=new t.MessageChannel;l.port1.onmessage=d,n=function(){l.port2.postMessage(0)}}var c=[];function d(){var e,t;i=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}i=!1}e.exports=function(e){1!==c.push(e)||i||n()}}).call(this,n(10))},function(e,t,n){"use strict";var i=n(105),r=n(41);function o(e){i.call(this,"ConvertWorker to "+e),this.destType=e}r.inherits(o,i),o.prototype.processChunk=function(e){this.push({data:r.transformTo(this.destType,e.data),meta:e.meta})},e.exports=o},function(e,t,n){"use strict";var i=n(469).Readable;function r(e,t,n){i.call(this,t),this._helper=e;var r=this;e.on("data",(function(e,t){r.push(e)||r._helper.pause(),n&&n(t)})).on("error",(function(e){r.emit("error",e)})).on("end",(function(){r.push(null)}))}n(41).inherits(r,i),r.prototype._read=function(){this._helper.resume()},e.exports=r},function(e,t,n){"use strict";var i=n(475),r=n(477),o=n(267),a=n(384),s=n(105),l=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};l.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!r&&(t=t.pipe(new o.Utf8EncodeWorker)),!a&&r&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new s("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof s?this._data:new r(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<c.length;u++)l.prototype[c[u]]=d;e.exports=l},function(e,t,n){"use strict";var i=n(480),r=n(790);t.generateWorker=function(e,t,n){var o=new r(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var r=function(e,t){var n=e||t,r=i[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(r,s).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(e){o.error(e)}return o}},function(e,t,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=n(781),o=n(41),a=n(105),s=i?"uint8array":"array";function l(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}t.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},t.compressWorker=function(e){return new l("Deflate",e)},t.uncompressWorker=function(){return new l("Inflate",{})}},function(e,t,n){"use strict";var i={};(0,n(218).assign)(i,n(782),n(785),n(485)),e.exports=i},function(e,t,n){"use strict";var i=n(783),r=n(218),o=n(483),a=n(386),s=n(484),l=Object.prototype.toString,c=0,d=-1,u=0,h=8;function p(e){if(!(this instanceof p))return new p(e);this.options=r.assign({level:d,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(a[n]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=i.deflateSetDictionary(this.strm,f))!==c)throw new Error(a[n]);this._dict_set=!0}}function f(e,t){var n=new p(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}p.prototype.push=function(e,t){var n,a,s=this.strm,d=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new r.Buf8(d),s.next_out=0,s.avail_out=d),1!==(n=i.deflate(s,a))&&n!==c)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(s.output,s.next_out))):this.onData(r.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===a?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==a||(this.onEnd(c),s.avail_out=0,!0)},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=p,t.deflate=f,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},function(e,t,n){"use strict";var i,r=n(218),o=n(784),a=n(481),s=n(482),l=n(386),c=0,d=1,u=3,h=4,p=5,f=0,g=1,m=-2,v=-3,b=-5,y=-1,w=1,k=2,x=3,_=4,S=0,C=2,T=8,M=9,I=15,D=8,P=286,A=30,E=19,L=2*P+1,N=15,F=3,R=258,O=R+F+1,B=32,z=42,U=69,j=73,$=91,H=103,V=113,G=666,K=1,q=2,W=3,Y=4,Q=3;function X(e,t){return e.msg=l[t],t}function Z(e){return(e<<1)-(e>4?9:0)}function J(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(r.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function te(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function ie(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function re(e,t){var n,i,r=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-O?e.strstart-(e.w_size-O):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+R,p=c[o+a-1],f=c[o+a];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+a]===f&&c[n+a-1]===p&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<h);if(i=R-(h-o),o=h-R,i>a){if(e.match_start=t,a=i,i>=s)break;p=c[o+a-1],f=c[o+a]}}}while((t=u[t&d])>l&&0!=--r);return a<=e.lookahead?a:e.lookahead}function oe(e){var t,n,i,o,l,c,d,u,h,p,f=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-O)){r.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=n=e.hash_size;do{i=e.head[--t],e.head[t]=i>=f?i-f:0}while(--n);t=n=f;do{i=e.prev[--t],e.prev[t]=i>=f?i-f:0}while(--n);o+=f}if(0===e.strm.avail_in)break;if(c=e.strm,d=e.window,u=e.strstart+e.lookahead,h=o,p=void 0,(p=c.avail_in)>h&&(p=h),n=0===p?0:(c.avail_in-=p,r.arraySet(d,c.input,c.next_in,p,u),1===c.state.wrap?c.adler=a(c.adler,d,p,u):2===c.state.wrap&&(c.adler=s(c.adler,d,p,u)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=F)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+F-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<F)););}while(e.lookahead<O&&0!==e.strm.avail_in)}function ae(e,t){for(var n,i;;){if(e.lookahead<O){if(oe(e),e.lookahead<O&&t===c)return K;if(0===e.lookahead)break}if(n=0,e.lookahead>=F&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-O&&(e.match_length=re(e,n)),e.match_length>=F)if(i=o._tr_tally(e,e.strstart-e.match_start,e.match_length-F),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=F){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(te(e,!1),0===e.strm.avail_out))return K}return e.insert=e.strstart<F-1?e.strstart:F-1,t===h?(te(e,!0),0===e.strm.avail_out?W:Y):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?K:q}function se(e,t){for(var n,i,r;;){if(e.lookahead<O){if(oe(e),e.lookahead<O&&t===c)return K;if(0===e.lookahead)break}if(n=0,e.lookahead>=F&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=F-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-O&&(e.match_length=re(e,n),e.match_length<=5&&(e.strategy===w||e.match_length===F&&e.strstart-e.match_start>4096)&&(e.match_length=F-1)),e.prev_length>=F&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-F,i=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-F),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+F-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=F-1,e.strstart++,i&&(te(e,!1),0===e.strm.avail_out))return K}else if(e.match_available){if((i=o._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return K}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<F-1?e.strstart:F-1,t===h?(te(e,!0),0===e.strm.avail_out?W:Y):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?K:q}function le(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*L),this.dyn_dtree=new r.Buf16(2*(2*A+1)),this.bl_tree=new r.Buf16(2*(2*E+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(N+1),this.heap=new r.Buf16(2*P+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*P+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=C,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?z:V,e.adler=2===t.wrap?0:1,t.last_flush=c,o._tr_init(t),f):X(e,m)}function ue(e){var t,n=de(e);return n===f&&((t=e.state).window_size=2*t.w_size,J(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=F-1,t.match_available=0,t.ins_h=0),n}function he(e,t,n,i,o,a){if(!e)return m;var s=1;if(t===y&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>M||n!==T||i<8||i>15||t<0||t>9||a<0||a>_)return X(e,m);8===i&&(i=9);var l=new ce;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+F-1)/F),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,ue(e)}i=[new le(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(oe(e),0===e.lookahead&&t===c)return K;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,te(e,!1),0===e.strm.avail_out))return K;if(e.strstart-e.block_start>=e.w_size-O&&(te(e,!1),0===e.strm.avail_out))return K}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?W:Y):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),K)})),new le(4,4,8,4,ae),new le(4,5,16,8,ae),new le(4,6,32,32,ae),new le(4,4,16,16,se),new le(8,16,32,32,se),new le(8,16,128,128,se),new le(8,32,128,256,se),new le(32,128,258,1024,se),new le(32,258,258,4096,se)],t.deflateInit=function(e,t){return he(e,t,T,I,D,S)},t.deflateInit2=he,t.deflateReset=ue,t.deflateResetKeep=de,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?m:(e.state.gzhead=t,f):m},t.deflate=function(e,t){var n,r,a,l;if(!e||!e.state||t>p||t<0)return e?X(e,m):m;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===G&&t!==h)return X(e,0===e.avail_out?b:m);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===z)if(2===r.wrap)e.adler=0,ne(r,31),ne(r,139),ne(r,8),r.gzhead?(ne(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),ne(r,255&r.gzhead.time),ne(r,r.gzhead.time>>8&255),ne(r,r.gzhead.time>>16&255),ne(r,r.gzhead.time>>24&255),ne(r,9===r.level?2:r.strategy>=k||r.level<2?4:0),ne(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(ne(r,255&r.gzhead.extra.length),ne(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=s(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=U):(ne(r,0),ne(r,0),ne(r,0),ne(r,0),ne(r,0),ne(r,9===r.level?2:r.strategy>=k||r.level<2?4:0),ne(r,Q),r.status=V);else{var v=T+(r.w_bits-8<<4)<<8;v|=(r.strategy>=k||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(v|=B),v+=31-v%31,r.status=V,ie(r,v),0!==r.strstart&&(ie(r,e.adler>>>16),ie(r,65535&e.adler)),e.adler=1}if(r.status===U)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),ee(e),a=r.pending,r.pending!==r.pending_buf_size));)ne(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=j)}else r.status=j;if(r.status===j)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),ee(e),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,ne(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.gzindex=0,r.status=$)}else r.status=$;if(r.status===$)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),ee(e),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,ne(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(e.adler=s(e.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.status=H)}else r.status=H;if(r.status===H&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&ee(e),r.pending+2<=r.pending_buf_size&&(ne(r,255&e.adler),ne(r,e.adler>>8&255),e.adler=0,r.status=V)):r.status=V),0!==r.pending){if(ee(e),0===e.avail_out)return r.last_flush=-1,f}else if(0===e.avail_in&&Z(t)<=Z(n)&&t!==h)return X(e,b);if(r.status===G&&0!==e.avail_in)return X(e,b);if(0!==e.avail_in||0!==r.lookahead||t!==c&&r.status!==G){var y=r.strategy===k?function(e,t){for(var n;;){if(0===e.lookahead&&(oe(e),0===e.lookahead)){if(t===c)return K;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return K}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?W:Y):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?K:q}(r,t):r.strategy===x?function(e,t){for(var n,i,r,a,s=e.window;;){if(e.lookahead<=R){if(oe(e),e.lookahead<=R&&t===c)return K;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=F&&e.strstart>0&&(i=s[r=e.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){a=e.strstart+R;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<a);e.match_length=R-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=F?(n=o._tr_tally(e,1,e.match_length-F),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(te(e,!1),0===e.strm.avail_out))return K}return e.insert=0,t===h?(te(e,!0),0===e.strm.avail_out?W:Y):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?K:q}(r,t):i[r.level].func(r,t);if(y!==W&&y!==Y||(r.status=G),y===K||y===W)return 0===e.avail_out&&(r.last_flush=-1),f;if(y===q&&(t===d?o._tr_align(r):t!==p&&(o._tr_stored_block(r,0,0,!1),t===u&&(J(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),ee(e),0===e.avail_out))return r.last_flush=-1,f}return t!==h?f:r.wrap<=0?g:(2===r.wrap?(ne(r,255&e.adler),ne(r,e.adler>>8&255),ne(r,e.adler>>16&255),ne(r,e.adler>>24&255),ne(r,255&e.total_in),ne(r,e.total_in>>8&255),ne(r,e.total_in>>16&255),ne(r,e.total_in>>24&255)):(ie(r,e.adler>>>16),ie(r,65535&e.adler)),ee(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?f:g)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==z&&t!==U&&t!==j&&t!==$&&t!==H&&t!==V&&t!==G?X(e,m):(e.state=null,t===V?X(e,v):f):m},t.deflateSetDictionary=function(e,t){var n,i,o,s,l,c,d,u,h=t.length;if(!e||!e.state)return m;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==z||n.lookahead)return m;for(1===s&&(e.adler=a(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===s&&(J(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new r.Buf8(n.w_size),r.arraySet(u,t,h-n.w_size,n.w_size,0),t=u,h=n.w_size),l=e.avail_in,c=e.next_in,d=e.input,e.avail_in=h,e.next_in=0,e.input=t,oe(n);n.lookahead>=F;){i=n.strstart,o=n.lookahead-(F-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+F-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--o);n.strstart=i,n.lookahead=F-1,oe(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=F-1,n.match_available=0,e.next_in=c,e.input=d,e.avail_in=l,n.wrap=s,f},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var i=n(218),r=4,o=0,a=1,s=2;function l(e){for(var t=e.length;--t>=0;)e[t]=0}var c=0,d=1,u=2,h=29,p=256,f=p+1+h,g=30,m=19,v=2*f+1,b=15,y=16,w=7,k=256,x=16,_=17,S=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=new Array(2*(f+2));l(D);var P=new Array(2*g);l(P);var A=new Array(512);l(A);var E=new Array(256);l(E);var L=new Array(h);l(L);var N,F,R,O=new Array(g);function B(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function z(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function U(e){return e<256?A[e]:A[256+(e>>>7)]}function j(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function $(e,t,n){e.bi_valid>y-n?(e.bi_buf|=t<<e.bi_valid&65535,j(e,e.bi_buf),e.bi_buf=t>>y-e.bi_valid,e.bi_valid+=n-y):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function H(e,t,n){$(e,n[2*t],n[2*t+1])}function V(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function G(e,t,n){var i,r,o=new Array(b+1),a=0;for(i=1;i<=b;i++)o[i]=a=a+n[i-1]<<1;for(r=0;r<=t;r++){var s=e[2*r+1];0!==s&&(e[2*r]=V(o[s]++,s))}}function K(e){var t;for(t=0;t<f;t++)e.dyn_ltree[2*t]=0;for(t=0;t<g;t++)e.dyn_dtree[2*t]=0;for(t=0;t<m;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*k]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function q(e){e.bi_valid>8?j(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function W(e,t,n,i){var r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]}function Y(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&W(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!W(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function Q(e,t,n){var i,r,o,a,s=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],r=e.pending_buf[e.l_buf+s],s++,0===i?H(e,r,t):(H(e,(o=E[r])+p+1,t),0!==(a=C[o])&&$(e,r-=L[o],a),H(e,o=U(--i),n),0!==(a=T[o])&&$(e,i-=O[o],a))}while(s<e.last_lit);H(e,k,t)}function X(e,t){var n,i,r,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=v,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(r=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[r]=0,e.opt_len--,s&&(e.static_len-=a[2*r+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)Y(e,o,n);r=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Y(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,o[2*r]=o[2*n]+o[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,o[2*n+1]=o[2*i+1]=r,e.heap[1]=r++,Y(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,r,o,a,s,l=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,g=0;for(o=0;o<=b;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<v;n++)(o=l[2*l[2*(i=e.heap[n])+1]+1]+1)>f&&(o=f,g++),l[2*i+1]=o,i>c||(e.bl_count[o]++,a=0,i>=p&&(a=h[i-p]),s=l[2*i],e.opt_len+=s*(o+a),u&&(e.static_len+=s*(d[2*i+1]+a)));if(0!==g){do{for(o=f-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[f]--,g-=2}while(g>0);for(o=f;0!==o;o--)for(i=e.bl_count[o];0!==i;)(r=e.heap[--n])>c||(l[2*r+1]!==o&&(e.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}(e,t),G(o,c,e.bl_count)}function Z(e,t,n){var i,r,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=t[2*(i+1)+1],++s<l&&r===a||(s<c?e.bl_tree[2*r]+=s:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[2*x]++):s<=10?e.bl_tree[2*_]++:e.bl_tree[2*S]++,s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4))}function J(e,t,n){var i,r,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),i=0;i<=n;i++)if(r=a,a=t[2*(i+1)+1],!(++s<l&&r===a)){if(s<c)do{H(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==o&&(H(e,r,e.bl_tree),s--),H(e,x,e.bl_tree),$(e,s-3,2)):s<=10?(H(e,_,e.bl_tree),$(e,s-3,3)):(H(e,S,e.bl_tree),$(e,s-11,7));s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4)}}l(O);var ee=!1;function te(e,t,n,r){$(e,(c<<1)+(r?1:0),3),function(e,t,n,r){q(e),r&&(j(e,n),j(e,~n)),i.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){ee||(!function(){var e,t,n,i,r,o=new Array(b+1);for(n=0,i=0;i<h-1;i++)for(L[i]=n,e=0;e<1<<C[i];e++)E[n++]=i;for(E[n-1]=i,r=0,i=0;i<16;i++)for(O[i]=r,e=0;e<1<<T[i];e++)A[r++]=i;for(r>>=7;i<g;i++)for(O[i]=r<<7,e=0;e<1<<T[i]-7;e++)A[256+r++]=i;for(t=0;t<=b;t++)o[t]=0;for(e=0;e<=143;)D[2*e+1]=8,e++,o[8]++;for(;e<=255;)D[2*e+1]=9,e++,o[9]++;for(;e<=279;)D[2*e+1]=7,e++,o[7]++;for(;e<=287;)D[2*e+1]=8,e++,o[8]++;for(G(D,f+1,o),e=0;e<g;e++)P[2*e+1]=5,P[2*e]=V(e,5);N=new B(D,C,p+1,f,b),F=new B(P,T,0,g,b),R=new B(new Array(0),M,0,m,w)}(),ee=!0),e.l_desc=new z(e.dyn_ltree,N),e.d_desc=new z(e.dyn_dtree,F),e.bl_desc=new z(e.bl_tree,R),e.bi_buf=0,e.bi_valid=0,K(e)},t._tr_stored_block=te,t._tr_flush_block=function(e,t,n,i){var l,c,h=0;e.level>0?(e.strm.data_type===s&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return a;for(t=32;t<p;t++)if(0!==e.dyn_ltree[2*t])return a;return o}(e)),X(e,e.l_desc),X(e,e.d_desc),h=function(e){var t;for(Z(e,e.dyn_ltree,e.l_desc.max_code),Z(e,e.dyn_dtree,e.d_desc.max_code),X(e,e.bl_desc),t=m-1;t>=3&&0===e.bl_tree[2*I[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),l=e.opt_len+3+7>>>3,(c=e.static_len+3+7>>>3)<=l&&(l=c)):l=c=n+5,n+4<=l&&-1!==t?te(e,t,n,i):e.strategy===r||c===l?($(e,(d<<1)+(i?1:0),3),Q(e,D,P)):($(e,(u<<1)+(i?1:0),3),function(e,t,n,i){var r;for($(e,t-257,5),$(e,n-1,5),$(e,i-4,4),r=0;r<i;r++)$(e,e.bl_tree[2*I[r]+1],3);J(e,e.dyn_ltree,t-1),J(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,h+1),Q(e,e.dyn_ltree,e.dyn_dtree)),K(e),i&&q(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(E[n]+p+1)]++,e.dyn_dtree[2*U(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){$(e,d<<1,3),H(e,k,D),function(e){16===e.bi_valid?(j(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";var i=n(786),r=n(218),o=n(483),a=n(485),s=n(386),l=n(484),c=n(789),d=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new c,i.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new u(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}u.prototype.push=function(e,t){var n,s,l,c,u,h,p=this.strm,f=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?p.input=o.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new r.Buf8(f),p.next_out=0,p.avail_out=f),(n=i.inflate(p,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&g&&(h="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===d.call(g)?new Uint8Array(g):g,n=i.inflateSetDictionary(this.strm,h)),n===a.Z_BUF_ERROR&&!0===m&&(n=a.Z_OK,m=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==a.Z_STREAM_END&&(0!==p.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(p.output,p.next_out),c=p.next_out-l,u=o.buf2string(p.output,l),p.next_out=c,p.avail_out=f-c,c&&r.arraySet(p.output,p.output,l,c,0),this.onData(u)):this.onData(r.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((p.avail_in>0||0===p.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),p.avail_out=0,!0)},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=u,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},function(e,t,n){"use strict";var i=n(218),r=n(481),o=n(482),a=n(787),s=n(788),l=0,c=1,d=2,u=4,h=5,p=6,f=0,g=1,m=2,v=-2,b=-3,y=-4,w=-5,k=8,x=1,_=2,S=3,C=4,T=5,M=6,I=7,D=8,P=9,A=10,E=11,L=12,N=13,F=14,R=15,O=16,B=17,z=18,U=19,j=20,$=21,H=22,V=23,G=24,K=25,q=26,W=27,Y=28,Q=29,X=30,Z=31,J=32,ee=852,te=592,ne=15;function ie(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function re(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function oe(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=x,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(ee),t.distcode=t.distdyn=new i.Buf32(te),t.sane=1,t.back=-1,f):v}function ae(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,oe(e)):v}function se(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?v:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,ae(e))):v}function le(e,t){var n,i;return e?(i=new re,e.state=i,i.window=null,(n=se(e,t))!==f&&(e.state=null),n):v}var ce,de,ue=!0;function he(e){if(ue){var t;for(ce=new i.Buf32(512),de=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(c,e.lens,0,288,ce,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(d,e.lens,0,32,de,0,e.work,{bits:5}),ue=!1}e.lencode=ce,e.lenbits=9,e.distcode=de,e.distbits=5}function pe(e,t,n,r){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new i.Buf8(a.wsize)),r>=a.wsize?(i.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>r&&(o=r),i.arraySet(a.window,t,n-r,o,a.wnext),(r-=o)?(i.arraySet(a.window,t,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}t.inflateReset=ae,t.inflateReset2=se,t.inflateResetKeep=oe,t.inflateInit=function(e){return le(e,ne)},t.inflateInit2=le,t.inflate=function(e,t){var n,ee,te,ne,re,oe,ae,se,le,ce,de,ue,fe,ge,me,ve,be,ye,we,ke,xe,_e,Se,Ce,Te=0,Me=new i.Buf8(4),Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return v;(n=e.state).mode===L&&(n.mode=N),re=e.next_out,te=e.output,ae=e.avail_out,ne=e.next_in,ee=e.input,oe=e.avail_in,se=n.hold,le=n.bits,ce=oe,de=ae,_e=f;e:for(;;)switch(n.mode){case x:if(0===n.wrap){n.mode=N;break}for(;le<16;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(2&n.wrap&&35615===se){n.check=0,Me[0]=255&se,Me[1]=se>>>8&255,n.check=o(n.check,Me,2,0),se=0,le=0,n.mode=_;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&se)<<8)+(se>>8))%31){e.msg="incorrect header check",n.mode=X;break}if((15&se)!==k){e.msg="unknown compression method",n.mode=X;break}if(le-=4,xe=8+(15&(se>>>=4)),0===n.wbits)n.wbits=xe;else if(xe>n.wbits){e.msg="invalid window size",n.mode=X;break}n.dmax=1<<xe,e.adler=n.check=1,n.mode=512&se?A:L,se=0,le=0;break;case _:for(;le<16;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(n.flags=se,(255&n.flags)!==k){e.msg="unknown compression method",n.mode=X;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=X;break}n.head&&(n.head.text=se>>8&1),512&n.flags&&(Me[0]=255&se,Me[1]=se>>>8&255,n.check=o(n.check,Me,2,0)),se=0,le=0,n.mode=S;case S:for(;le<32;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.head&&(n.head.time=se),512&n.flags&&(Me[0]=255&se,Me[1]=se>>>8&255,Me[2]=se>>>16&255,Me[3]=se>>>24&255,n.check=o(n.check,Me,4,0)),se=0,le=0,n.mode=C;case C:for(;le<16;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.head&&(n.head.xflags=255&se,n.head.os=se>>8),512&n.flags&&(Me[0]=255&se,Me[1]=se>>>8&255,n.check=o(n.check,Me,2,0)),se=0,le=0,n.mode=T;case T:if(1024&n.flags){for(;le<16;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.length=se,n.head&&(n.head.extra_len=se),512&n.flags&&(Me[0]=255&se,Me[1]=se>>>8&255,n.check=o(n.check,Me,2,0)),se=0,le=0}else n.head&&(n.head.extra=null);n.mode=M;case M:if(1024&n.flags&&((ue=n.length)>oe&&(ue=oe),ue&&(n.head&&(xe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,ee,ne,ue,xe)),512&n.flags&&(n.check=o(n.check,ee,ue,ne)),oe-=ue,ne+=ue,n.length-=ue),n.length))break e;n.length=0,n.mode=I;case I:if(2048&n.flags){if(0===oe)break e;ue=0;do{xe=ee[ne+ue++],n.head&&xe&&n.length<65536&&(n.head.name+=String.fromCharCode(xe))}while(xe&&ue<oe);if(512&n.flags&&(n.check=o(n.check,ee,ue,ne)),oe-=ue,ne+=ue,xe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=D;case D:if(4096&n.flags){if(0===oe)break e;ue=0;do{xe=ee[ne+ue++],n.head&&xe&&n.length<65536&&(n.head.comment+=String.fromCharCode(xe))}while(xe&&ue<oe);if(512&n.flags&&(n.check=o(n.check,ee,ue,ne)),oe-=ue,ne+=ue,xe)break e}else n.head&&(n.head.comment=null);n.mode=P;case P:if(512&n.flags){for(;le<16;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(se!==(65535&n.check)){e.msg="header crc mismatch",n.mode=X;break}se=0,le=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=L;break;case A:for(;le<32;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}e.adler=n.check=ie(se),se=0,le=0,n.mode=E;case E:if(0===n.havedict)return e.next_out=re,e.avail_out=ae,e.next_in=ne,e.avail_in=oe,n.hold=se,n.bits=le,m;e.adler=n.check=1,n.mode=L;case L:if(t===h||t===p)break e;case N:if(n.last){se>>>=7&le,le-=7&le,n.mode=W;break}for(;le<3;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}switch(n.last=1&se,le-=1,3&(se>>>=1)){case 0:n.mode=F;break;case 1:if(he(n),n.mode=j,t===p){se>>>=2,le-=2;break e}break;case 2:n.mode=B;break;case 3:e.msg="invalid block type",n.mode=X}se>>>=2,le-=2;break;case F:for(se>>>=7&le,le-=7&le;le<32;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if((65535&se)!=(se>>>16^65535)){e.msg="invalid stored block lengths",n.mode=X;break}if(n.length=65535&se,se=0,le=0,n.mode=R,t===p)break e;case R:n.mode=O;case O:if(ue=n.length){if(ue>oe&&(ue=oe),ue>ae&&(ue=ae),0===ue)break e;i.arraySet(te,ee,ne,ue,re),oe-=ue,ne+=ue,ae-=ue,re+=ue,n.length-=ue;break}n.mode=L;break;case B:for(;le<14;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(n.nlen=257+(31&se),se>>>=5,le-=5,n.ndist=1+(31&se),se>>>=5,le-=5,n.ncode=4+(15&se),se>>>=4,le-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=X;break}n.have=0,n.mode=z;case z:for(;n.have<n.ncode;){for(;le<3;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.lens[Ie[n.have++]]=7&se,se>>>=3,le-=3}for(;n.have<19;)n.lens[Ie[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Se={bits:n.lenbits},_e=s(l,n.lens,0,19,n.lencode,0,n.work,Se),n.lenbits=Se.bits,_e){e.msg="invalid code lengths set",n.mode=X;break}n.have=0,n.mode=U;case U:for(;n.have<n.nlen+n.ndist;){for(;ve=(Te=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,be=65535&Te,!((me=Te>>>24)<=le);){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(be<16)se>>>=me,le-=me,n.lens[n.have++]=be;else{if(16===be){for(Ce=me+2;le<Ce;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(se>>>=me,le-=me,0===n.have){e.msg="invalid bit length repeat",n.mode=X;break}xe=n.lens[n.have-1],ue=3+(3&se),se>>>=2,le-=2}else if(17===be){for(Ce=me+3;le<Ce;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}le-=me,xe=0,ue=3+(7&(se>>>=me)),se>>>=3,le-=3}else{for(Ce=me+7;le<Ce;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}le-=me,xe=0,ue=11+(127&(se>>>=me)),se>>>=7,le-=7}if(n.have+ue>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=X;break}for(;ue--;)n.lens[n.have++]=xe}}if(n.mode===X)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=X;break}if(n.lenbits=9,Se={bits:n.lenbits},_e=s(c,n.lens,0,n.nlen,n.lencode,0,n.work,Se),n.lenbits=Se.bits,_e){e.msg="invalid literal/lengths set",n.mode=X;break}if(n.distbits=6,n.distcode=n.distdyn,Se={bits:n.distbits},_e=s(d,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Se),n.distbits=Se.bits,_e){e.msg="invalid distances set",n.mode=X;break}if(n.mode=j,t===p)break e;case j:n.mode=$;case $:if(oe>=6&&ae>=258){e.next_out=re,e.avail_out=ae,e.next_in=ne,e.avail_in=oe,n.hold=se,n.bits=le,a(e,de),re=e.next_out,te=e.output,ae=e.avail_out,ne=e.next_in,ee=e.input,oe=e.avail_in,se=n.hold,le=n.bits,n.mode===L&&(n.back=-1);break}for(n.back=0;ve=(Te=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,be=65535&Te,!((me=Te>>>24)<=le);){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(ve&&0==(240&ve)){for(ye=me,we=ve,ke=be;ve=(Te=n.lencode[ke+((se&(1<<ye+we)-1)>>ye)])>>>16&255,be=65535&Te,!(ye+(me=Te>>>24)<=le);){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}se>>>=ye,le-=ye,n.back+=ye}if(se>>>=me,le-=me,n.back+=me,n.length=be,0===ve){n.mode=q;break}if(32&ve){n.back=-1,n.mode=L;break}if(64&ve){e.msg="invalid literal/length code",n.mode=X;break}n.extra=15&ve,n.mode=H;case H:if(n.extra){for(Ce=n.extra;le<Ce;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.length+=se&(1<<n.extra)-1,se>>>=n.extra,le-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=V;case V:for(;ve=(Te=n.distcode[se&(1<<n.distbits)-1])>>>16&255,be=65535&Te,!((me=Te>>>24)<=le);){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(0==(240&ve)){for(ye=me,we=ve,ke=be;ve=(Te=n.distcode[ke+((se&(1<<ye+we)-1)>>ye)])>>>16&255,be=65535&Te,!(ye+(me=Te>>>24)<=le);){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}se>>>=ye,le-=ye,n.back+=ye}if(se>>>=me,le-=me,n.back+=me,64&ve){e.msg="invalid distance code",n.mode=X;break}n.offset=be,n.extra=15&ve,n.mode=G;case G:if(n.extra){for(Ce=n.extra;le<Ce;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}n.offset+=se&(1<<n.extra)-1,se>>>=n.extra,le-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=X;break}n.mode=K;case K:if(0===ae)break e;if(ue=de-ae,n.offset>ue){if((ue=n.offset-ue)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=X;break}ue>n.wnext?(ue-=n.wnext,fe=n.wsize-ue):fe=n.wnext-ue,ue>n.length&&(ue=n.length),ge=n.window}else ge=te,fe=re-n.offset,ue=n.length;ue>ae&&(ue=ae),ae-=ue,n.length-=ue;do{te[re++]=ge[fe++]}while(--ue);0===n.length&&(n.mode=$);break;case q:if(0===ae)break e;te[re++]=n.length,ae--,n.mode=$;break;case W:if(n.wrap){for(;le<32;){if(0===oe)break e;oe--,se|=ee[ne++]<<le,le+=8}if(de-=ae,e.total_out+=de,n.total+=de,de&&(e.adler=n.check=n.flags?o(n.check,te,de,re-de):r(n.check,te,de,re-de)),de=ae,(n.flags?se:ie(se))!==n.check){e.msg="incorrect data check",n.mode=X;break}se=0,le=0}n.mode=Y;case Y:if(n.wrap&&n.flags){for(;le<32;){if(0===oe)break e;oe--,se+=ee[ne++]<<le,le+=8}if(se!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=X;break}se=0,le=0}n.mode=Q;case Q:_e=g;break e;case X:_e=b;break e;case Z:return y;case J:default:return v}return e.next_out=re,e.avail_out=ae,e.next_in=ne,e.avail_in=oe,n.hold=se,n.bits=le,(n.wsize||de!==e.avail_out&&n.mode<X&&(n.mode<W||t!==u))&&pe(e,e.output,e.next_out,de-e.avail_out)?(n.mode=Z,y):(ce-=e.avail_in,de-=e.avail_out,e.total_in+=ce,e.total_out+=de,n.total+=de,n.wrap&&de&&(e.adler=n.check=n.flags?o(n.check,te,de,e.next_out-de):r(n.check,te,de,e.next_out-de)),e.data_type=n.bits+(n.last?64:0)+(n.mode===L?128:0)+(n.mode===j||n.mode===R?256:0),(0===ce&&0===de||t===u)&&_e===f&&(_e=w),_e)},t.inflateEnd=function(e){if(!e||!e.state)return v;var t=e.state;return t.window&&(t.window=null),e.state=null,f},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?v:(n.head=t,t.done=!1,f):v},t.inflateSetDictionary=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==E?v:n.mode===E&&r(1,t,i,0)!==n.check?b:pe(e,t,i,i)?(n.mode=Z,y):(n.havedict=1,f):v},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,i,r,o,a,s,l,c,d,u,h,p,f,g,m,v,b,y,w,k,x,_,S,C,T;n=e.state,i=e.next_in,C=e.input,r=i+(e.avail_in-5),o=e.next_out,T=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,c=n.wsize,d=n.whave,u=n.wnext,h=n.window,p=n.hold,f=n.bits,g=n.lencode,m=n.distcode,v=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{f<15&&(p+=C[i++]<<f,f+=8,p+=C[i++]<<f,f+=8),y=g[p&v];t:for(;;){if(p>>>=w=y>>>24,f-=w,0===(w=y>>>16&255))T[o++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=g[(65535&y)+(p&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}k=65535&y,(w&=15)&&(f<w&&(p+=C[i++]<<f,f+=8),k+=p&(1<<w)-1,p>>>=w,f-=w),f<15&&(p+=C[i++]<<f,f+=8,p+=C[i++]<<f,f+=8),y=m[p&b];n:for(;;){if(p>>>=w=y>>>24,f-=w,!(16&(w=y>>>16&255))){if(0==(64&w)){y=m[(65535&y)+(p&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&y,f<(w&=15)&&(p+=C[i++]<<f,(f+=8)<w&&(p+=C[i++]<<f,f+=8)),(x+=p&(1<<w)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=w,f-=w,x>(w=o-a)){if((w=x-w)>d&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(_=0,S=h,0===u){if(_+=c-w,w<k){k-=w;do{T[o++]=h[_++]}while(--w);_=o-x,S=T}}else if(u<w){if(_+=c+u-w,(w-=u)<k){k-=w;do{T[o++]=h[_++]}while(--w);if(_=0,u<k){k-=w=u;do{T[o++]=h[_++]}while(--w);_=o-x,S=T}}}else if(_+=u-w,w<k){k-=w;do{T[o++]=h[_++]}while(--w);_=o-x,S=T}for(;k>2;)T[o++]=S[_++],T[o++]=S[_++],T[o++]=S[_++],k-=3;k&&(T[o++]=S[_++],k>1&&(T[o++]=S[_++]))}else{_=o-x;do{T[o++]=T[_++],T[o++]=T[_++],T[o++]=T[_++],k-=3}while(k>2);k&&(T[o++]=T[_++],k>1&&(T[o++]=T[_++]))}break}}break}}while(i<r&&o<s);i-=k=f>>3,p&=(1<<(f-=k<<3))-1,e.next_in=i,e.next_out=o,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=f}},function(e,t,n){"use strict";var i=n(218),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,c,d,u,h){var p,f,g,m,v,b,y,w,k,x=h.bits,_=0,S=0,C=0,T=0,M=0,I=0,D=0,P=0,A=0,E=0,L=null,N=0,F=new i.Buf16(16),R=new i.Buf16(16),O=null,B=0;for(_=0;_<=15;_++)F[_]=0;for(S=0;S<l;S++)F[t[n+S]]++;for(M=x,T=15;T>=1&&0===F[T];T--);if(M>T&&(M=T),0===T)return c[d++]=20971520,c[d++]=20971520,h.bits=1,0;for(C=1;C<T&&0===F[C];C++);for(M<C&&(M=C),P=1,_=1;_<=15;_++)if(P<<=1,(P-=F[_])<0)return-1;if(P>0&&(0===e||1!==T))return-1;for(R[1]=0,_=1;_<15;_++)R[_+1]=R[_]+F[_];for(S=0;S<l;S++)0!==t[n+S]&&(u[R[t[n+S]]++]=S);if(0===e?(L=O=u,b=19):1===e?(L=r,N-=257,O=o,B-=257,b=256):(L=a,O=s,b=-1),E=0,S=0,_=C,v=d,I=M,D=0,g=-1,m=(A=1<<M)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){y=_-D,u[S]<b?(w=0,k=u[S]):u[S]>b?(w=O[B+u[S]],k=L[N+u[S]]):(w=96,k=0),p=1<<_-D,C=f=1<<I;do{c[v+(E>>D)+(f-=p)]=y<<24|w<<16|k|0}while(0!==f);for(p=1<<_-1;E&p;)p>>=1;if(0!==p?(E&=p-1,E+=p):E=0,S++,0==--F[_]){if(_===T)break;_=t[n+u[S]]}if(_>M&&(E&m)!==g){for(0===D&&(D=M),v+=C,P=1<<(I=_-D);I+D<T&&!((P-=F[I+D])<=0);)I++,P<<=1;if(A+=1<<I,1===e&&A>852||2===e&&A>592)return 1;c[g=E&m]=M<<24|I<<16|v-d|0}}return 0!==E&&(c[v+E]=_-D<<24|64<<16|0),h.bits=M,0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,n){"use strict";var i=n(41),r=n(105),o=n(267),a=n(385),s=n(486),l=function(e,t){var n,i="";for(n=0;n<t;n++)i+=String.fromCharCode(255&e),e>>>=8;return i},c=function(e,t,n,r,c,d){var u,h,p=e.file,f=e.compression,g=d!==o.utf8encode,m=i.transformTo("string",d(p.name)),v=i.transformTo("string",o.utf8encode(p.name)),b=p.comment,y=i.transformTo("string",d(b)),w=i.transformTo("string",o.utf8encode(b)),k=v.length!==p.name.length,x=w.length!==b.length,_="",S="",C="",T=p.dir,M=p.date,I={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(I.crc32=e.crc32,I.compressedSize=e.compressedSize,I.uncompressedSize=e.uncompressedSize);var D=0;t&&(D|=8),g||!k&&!x||(D|=2048);var P,A,E,L=0,N=0;T&&(L|=16),"UNIX"===c?(N=798,L|=(P=p.unixPermissions,A=T,E=P,P||(E=A?16893:33204),(65535&E)<<16)):(N=20,L|=63&(p.dosPermissions||0)),u=M.getUTCHours(),u<<=6,u|=M.getUTCMinutes(),u<<=5,u|=M.getUTCSeconds()/2,h=M.getUTCFullYear()-1980,h<<=4,h|=M.getUTCMonth()+1,h<<=5,h|=M.getUTCDate(),k&&(S=l(1,1)+l(a(m),4)+v,_+="up"+l(S.length,2)+S),x&&(C=l(1,1)+l(a(y),4)+w,_+="uc"+l(C.length,2)+C);var F="";return F+="\n\0",F+=l(D,2),F+=f.magic,F+=l(u,2),F+=l(h,2),F+=l(I.crc32,4),F+=l(I.compressedSize,4),F+=l(I.uncompressedSize,4),F+=l(m.length,2),F+=l(_.length,2),{fileRecord:s.LOCAL_FILE_HEADER+F+m+_,dirRecord:s.CENTRAL_FILE_HEADER+l(N,2)+F+l(y.length,2)+"\0\0\0\0"+l(L,4)+l(r,4)+m+_+y}},d=function(e){return s.DATA_DESCRIPTOR+l(e.crc32,4)+l(e.compressedSize,4)+l(e.uncompressedSize,4)};function u(e,t,n,i){r.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(u,r),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,r.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-i-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=c(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=c(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:d(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,r=function(e,t,n,r,o){var a=i.transformTo("string",o(r));return s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(e,2)+l(e,2)+l(t,4)+l(n,4)+l(a.length,2)+a}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!r.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){r.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},e.exports=u},function(e,t,n){"use strict";var i=n(41),r=n(105);function o(e,t){r.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}i.inherits(o,r),o.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},function(e,t,n){"use strict";var i=n(41),r=n(285),o=n(267),a=(i=n(41),n(793)),s=n(479),l=n(339);function c(e){return new r.Promise((function(t,n){var i=e.decompressed.getContentWorker().pipe(new s);i.on("error",(function(e){n(e)})).on("end",(function(){i.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}e.exports=function(e,t){var n=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[r.Promise.resolve(e)],i=e.files;if(t.checkCRC32)for(var o=0;o<i.length;o++)n.push(c(i[o]));return r.Promise.all(n)})).then((function(e){for(var i=e.shift(),r=i.files,o=0;o<r.length;o++){var a=r[o];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},function(e,t,n){"use strict";var i=n(487),r=n(41),o=n(486),a=n(796),s=(n(267),n(217));function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(t)+", expected "+r.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4)===t;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=r.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,i=this.zip64EndOfCentralSize-44;0<i;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=t-n;if(i>0)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){this.reader=i(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},function(e,t,n){"use strict";var i=n(489);function r(e){i.call(this,e)}n(41).inherits(r,i),r.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},r.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){"use strict";var i=n(490);function r(e){i.call(this,e)}n(41).inherits(r,i),r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=r},function(e,t,n){"use strict";var i=n(487),r=n(41),o=n(384),a=n(385),s=n(267),l=n(480),c=n(217);function d(e,t){this.options=e,this.loadOptions=t}d.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,i,r=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<r;)t=e.readInt(2),n=e.readInt(2),i=e.readData(n),this.extraFields[t]={id:t,length:n,value:i}},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=r.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var o=r.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=i(e.value);return 1!==t.readInt(1)?null:a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=i(e.value);return 1!==t.readInt(1)?null:a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},e.exports=d},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(8),n(6),n(5),n(54),n(418),n(64),n(577),n(286),n(287),n(798),n(388),n(799),n(107),n(801),n(809),n(19),n(7),n(811),n(400),n(26),n(4),n(812),n(62),n(493),n(822),n(37),n(38),n(12),n(829),n(257),n(42),n(832),n(833),n(837),n(43),n(13),n(111),n(354),n(583)],void 0===(r=function(e,t,i,r,o,a,s,l,c,d,u,h,p,f,g,m,v,b,y,w,k,x,_,S,C,T,M,I,D,P,A,E,L,N,F,R,O,B,z,U,j,$,H){"use strict";return i.Router.extend({workflows:{"facebook-holiday-ad-design":{route:"facebook-holiday-ad",flows:[{flow:"selectRemixFlow",title:"Select a template below to get started",subtitle:"Add your own text and images to bring your holiday message to life.",layout:"featured_3up",workflow:"facebook-holiday-ad-design",category:"facebook-holiday-ad"}]},"feminist-quotes-design":{route:"feminist-quotes-design",flows:[{flow:"selectRemixFlow",title:"Select a template to get started",subtitle:"Customize with your own words and images to create a meme.",layout:"featured_3up",workflow:"feminist-quotes-design",category:"feminist-quotes-design",analytics:{shownSelectRemixFlow:"shownFeministQuotesSelectRemixFlow",selectedRemixDesign:"selectedFeministQuoteRemix"}}]}},currentView:null,viewCache:{},routes:{"accept-invite/*resourceURN":"handleAcceptInvite","folders-reset":"handleResetODB","branding/*kitId/import":"handleBrandKitImport",branding:"handleBranding","branding/:kitId/themes/:themeId(/page/:pageId)":"handleBrandingThemeEdit","branding/*kitId(/:subPage)":"handleBranding","design/:assetType/*assetId(/:subPage)":"handleDesign","design-remix/:assetType/*cpAssetId":"handleDesignRemix","design-remix-replace/:assetType/:cpAssetId/:currentId":"handleDesignRemixReplace","design-new-from-theme/:assetType/:contextId/:themeId":"handleDesignNewFromTheme","design-edit-template/:assetType/:contextId/:templateId":"handleDesignEditTemplate","design-new-from-template/:assetType/:contextId/:templateId":"handleDesignNewFromTemplate","design-download/:assetType/:assetId":"handleDesignDownload","tmpl/:assetType/*assetId(/:subPage)":"handleTmpl","remix/:assetType/*assetId":"handleRemix","create-from-lr-album/:assetType":"handleLightroomEditor","remix-gallery/:assetType/*assetId(/:workflow)":"handleRemixGallery",templates:"handleTemplates",projects:"handleProjects",shared:"handleShared","folders/:folderId":"handleFolders","project-search":"handleProjectSearch",recents:"handleProjectsFlat",settings:"handleSettings","settings/entitlement":"handleSettingsEntitlement","onboarding(/*fromflow)":"handleOnboarding","login(/:attrib)":"handleLogin","login/(:attrib)":"handleLogin","browser-detect":"handleUserAgent","prefs/:action":"handleMarketingPrefs","workflow/:workflow":"handleWorkflow","creativecloud(/*code)":"handleCreativeCloud","personalize/*":"handlePersonalizer","search(/*etc)":"handleSearch","npw/search(/*etc)":"handleNPWSearch","npw(/:app)":"handleNPW","npw/:assetType/:assetId(/*etc)":"handleNPW",creativehigh:"handleCreativeHigh",sandbox:"handleSandbox","sandbox/*path":"handleSandbox","*splat":"defaultRoute"},_hashCode:function(e){var t,n="",i=String(e);for(t=0;t<i.length;t++)n+=String.fromCharCode(i.charCodeAt(t)+18);return n},_codeMatches:function(e){var t,n=Math.floor(new Date/864e5);for(t=0;t<14;t++)if(this._hashCode(n-t)===e)return!0;return!1},_promptToContinue:function(){var e;try{e=window.localStorage.getItem("lastmarvelcustomkey")}catch(e){}if(e&&this._codeMatches(e)||(e=window.prompt("Please enter the key:")),this._codeMatches(e))try{window.localStorage.setItem("lastmarvelcustomkey",e)}catch(e){}else alert("Incorrect key."),this._promptToContinue()},_getAudienceManagerUserProfile:function(){var e=A.get("sparkAudienceManager");if(e&&e.length){var t=decodeURIComponent(e);if(t&&t.length){var n=t.split(",");if(n&&n.length){k.trackEvent("audienceManager:userProfileSegments",{context:JSON.stringify(n)},"app")}}}},initialize:function(){var t;this.browserStorage=new z("sessionStorage"),this.container$=e(".mrvl-main-page"),a.isValid().then(function(){return t=!0,s.allFeaturesLoaded().then(function(){(N.installAdobeNav(),s.hasFeature("enable-in-app-bumpering")&&R.enable(),this.globalNav=new h,this.globalNav.render(),s.hasFeature("simple-nav"))||e(".glb-nav-hamburger").on("click",function(){this.showGlobalNav()}.bind(this));this._getAudienceManagerUserProfile(),s.hasFeature("prompt-to-use")&&this._promptToContinue(),this.offlineController=new f,this.pageBody$=e("body"),this.pageBody$.hasClass("pre-auth-no-header")&&this.pageBody$.removeClass("pre-auth-no-header").addClass("full-header"),this.pageBody$.hasClass("pre-auth-full-header")&&this.pageBody$.removeClass("pre-auth-full-header").addClass("full-header"),H.setup(),this._handleContentCardsInit(),window.marvel.SearchController=$}.bind(this))}.bind(this)).catch((function(e){t&&window.marvel.logger.error("appRouter init failed after isValid",e)})).done(),this.interstitialView=new u,marvel.events.on("mrvl-must-reload",this.handleMustReload.bind(this)),marvel.events.on("mrvl-show-global-nav",this.showGlobalNav.bind(this)),marvel.events.on("mrvl-hide-global-nav",this.hideGlobalNav.bind(this)),marvel.events.on("spark-bumper-on",this.handleBumperOn.bind(this)),marvel.events.on("spark-bumper-off",this.handleBumperOff.bind(this)),marvel.events.on("spark-bumper-location-settings-updated",this.handleBumperLocationSettingsUpdated.bind(this)),marvel.events.on("mrvl-show-user-login",this.handleLogin.bind(this)),marvel.events.on("delete-current-doc",this.handleDeleteCurrentDoc.bind(this)),this._initializeDetectionOfBackButtonClickWhileLoadingEditor()},_initializeDetectionOfBackButtonClickWhileLoadingEditor:function(){window.addEventListener("popstate",function(){this._backButtonClicked=!0}.bind(this)),marvel.events.on("editor-invoked",function(){this._editorIsLoading=!0}.bind(this)),marvel.events.on("hide-interstitial",function(){this._editorIsLoading=!1}.bind(this))},handleMarketingPrefs:function(e){a.requiresAuth().then(function(){this._renderMarketingPrefsIfNeeded(e,{showGlobalMarketingChoice:!1}).then(function(){window.marvel.navigate("/",{trigger:!0})}.bind(this))}.bind(this))},_renderMarketingPrefsIfNeeded:function(t,n){if(s.hasFeature("show-optin")&&!s.hasFeature("has-seen-ios-newsletter-prompt")){n=n||{};var i=v.getModelForOptinViewIfUserCanReceiveEmail(t,n);if(i)return i.set("doneDefer",r.defer()),this.renderView(m,i,null,e(".mkt-optin-overlay")),i.get("doneDefer").promise}return r(!1)},showGlobalNav:function(){this.globalNav&&this.globalNav.showMenu()},hideGlobalNav:function(){this.globalNav&&this.globalNav.hideMenu()},handleLogin:function(e){"login"!==window.marvel.events.getPageArea()&&(window.marvel.events.areaAndSectionChange("login"),e&&e.length&&F.registerAuthenticatedUserAttributes([e]),k._saveCampaign(),a.isValid().then(function(){this.navigate("/",{trigger:!0})}.bind(this),function(){k.TRACK_REFERRER=!0,k.setCampaign();var e=this._getLoginUserType(),t={referrer:document.referrer,sparkFormat:"webNoFormat",userType:e,landingPageReferrer:k.getLandingPageReferrer(),landingPageType:k.getLandingPageType(),landingPageUrl:k.getLandingPageUrl()};k.trackEvent("authentication:loginScreenDisplayed",t,"auth:landing",(function(){k.trackEvent("auth:signInPageViewed",{referrer:document.referrer},"auth:landing",(function(){var e=k.removeTrackingParams();window.history.replaceState(null,document.title,document.location.pathname+e+document.location.hash)}))})),s.unauthenticatedFeaturesLoaded().then(function(){this.renderView(y)}.bind(this)).done()}.bind(this)).done())},_getLoginUserType:function(){var e="unknown";if(window.localStorage)try{"true"===window.localStorage.getItem("hasSeenLoginScreenBefore")?e="knownNotAuth":window.localStorage.setItem("hasSeenLoginScreenBefore","true")}catch(e){marvel.logger.warn("failed to retrieve userType",e)}return e},handleSearch:function(e,t){t&&(t=P.parse("?"+t,!0).query),(t=t||{}).homeSearch=!0,this.currentView&&this.currentView.currentSubView&&this.currentView.currentSubView.$el.hasClass("mrvl-dv-wrapper")&&(this.clean(),this.currentView=null),this._handleSearch(e,t)},handleNPWSearch:function(e,t){t&&(t=P.parse("?"+t,!0).query),t=t||{},this._handleSearch(e,t)},_handleSearch:function(e,t){var n=r.defer();a.isValid().then((function(){s.allFeaturesLoaded().then(function(e){n.resolve({doingPreSusi:!1})}.bind(this)).done()}),(function(){s.unauthenticatedFeaturesLoaded().then((function(){s.hasUnauthenticatedFeature("npw-visual-browse-for-pre-susi")?n.resolve({doingPreSusi:!0}):a.requiresAuth().then(function(){s.allFeaturesLoaded().then(function(e){n.resolve({})}.bind(this)).done()}.bind(this)).done()}))})),n.promise.then(function(e){var n=t.editApp||"post",i=!("true"===t.homeSearch||!0===t.homeSearch)&&$.appSupportsEditorSearch(n);if(i){var r={assetType:n,assetId:t.assetId,operation:"new"},o=C.cpsProd;"useCaseClicked"!==t.trigger&&s.hasFeature("remix-and-search-use-stage-cp")&&(o=C.cpsStage),$.getASearchRequestsController({addDefaultCallbacks:!0,editorApp:i}).then(function(e){var a=e.getTemplateResultsForOpeningEditor(i,t),s={searchPromise:a,searchRequestsController:e};if(t.assetId)return this.navigate("/design-remix/"+n+"/"+t.assetId,{replace:!0,trigger:!1}),void this.handleDesignRemix(n,t.assetId,"npwSearchRemix",o,s);a.then(function(t){var i=e.getHeroTemplateFromResults(t,{premium:"ifEntitled"});i?(this.navigate("/design-remix/"+n+"/"+i.id,{replace:!0,trigger:!1}),this.handleDesignRemix(n,i.id,"npwSearchRemix",o,s)):(this.navigate("/design/"+n+"/new",{replace:!0,trigger:!1}),this.invokeEditor(r))}.bind(this),(function(e){window.marvel.logger.error("error getting search in handleNPWSearch",e),this.navigate("/design/"+n+"/new",{replace:!0,trigger:!1}),this.invokeEditor(r)}))}.bind(this))}else $.headerSearchInitted().then(function(e){t.backType=t.backType||"home";var n=$.setupUrlSearchFromArgs(t);e.triggerAutoSearch(n)}.bind(this))}.bind(this)).done()},handleNPW:function(e,t,n){if("newlo"===t){var r=i.history.fragment.replace("newlo","new");this.navigate(r,{replace:!0,trigger:!1})}s.unauthenticatedFeaturesLoaded().then(function(){var i=s.hasUnauthenticatedFeature("npw-visual-browse-for-pre-susi");"promo"!==e&&i?this._handleNpwAsVisualBrowse(e,t):a.requiresAuth().then(function(){s.allFeaturesLoaded().then(function(i){var r;"promo"===e&&(r={type:t,extra:n},window.marvel.navigate("/npw",{trigger:!1,replace:!0})),this._renderNPW({fromVBRoute:!0,promoInfo:r})}.bind(this)).done()}.bind(this)).done()}.bind(this)).done()},_renderMessagingModalView:function(e){Promise.resolve().then(function(t){this.messagingModalView?this.messagingModalView.model=e:this.messagingModalView=new(n(496))({model:e}),this.messagingModalView.render()}.bind(this).bind(null,n)).catch(n.oe)},handleLightroomEditor:function(t){a.requiresAuth().then(function(){var t=P.parse(i.history.fragment.toLowerCase(),!0);window.marvel._siteSection="metaeditor:page",this._renderMessagingModalView(new i.Model({name:"lightroom-onboarding",autoShowDelay:2e3,cssSubclassName:"lr-editor-modal-shell",closeBtnIsPresent:!1,partials:{contents:"lightroomEditorOnboarding"}})),n.e(9).then(function(i){this.pageBody$=this.pageBody$||e("body"),this.pageBody$.append('<div id="meta-editor-overlay" class="meta-editor-overlay hide" data-auto="meta-editor-overlay"></div>'),window.marvel.events.areaAndSectionChange("metaeditor","page");var r=n(908);this.renderView(r,{albumId:t.query.project_id})}.bind(this).bind(null,n)).catch(n.oe)}.bind(this)).done()},handlePersonalizer:function(){a.requiresAuth().then(function(){return s.allFeaturesLoaded().then(function(){return H.showPersonalizer(this.renderView.bind(this),!0).then(function(){this.navigate("/",{trigger:!0})}.bind(this)).catch((function(e){console.log("Personalizer Failed"+e)}))}.bind(this))}.bind(this)).done()},handleOnboarding:function(e){this.pageTitle="Adobe Spark | Onboarding",e=e||"",a.requiresAuth().then(function(){s.allFeaturesLoaded().then(function(){var t=P.parse(i.history.fragment,!0),n=s.hasFeature("show-onboarding")||"create"===t.query.cta;x.triggerCCPaidConfirmationTag(),-1!==e.indexOf("planspagepurchase")&&M.userReturnedViaPurchasedRoute(t)?M.requestTypeKitSyncUserEntitlement().finally(function(){if(t.query.destinationUrl||t.query.srcUrl&&0===t.query.srcUrl.indexOf(o.getLocalizedSparkPath("/sp/design/"))){t.query.touchpointName&&(window.marvel._onboarding_premium=t.query.touchpointName,window.marvel.logger.debug("TBD: how to pass this touchpoint into the format editor "+t.query.touchpointName));var e=t.query.destinationUrl||t.query.srcUrl.substring(4);this.navigate(e,{trigger:!0})}else if(t.query.srcUrl&&-1!==t.query.srcUrl.indexOf("/branding/")){var n=t.query.srcUrl.split("/branding/").pop();this.navigate("branding/"+n,{trigger:!0})}else this.navigate("branding/",{trigger:!0})}.bind(this)).done():this._visualBrowseRouteFirstUseCheck()||n?this._renderMarketingPrefsIfNeeded("new-user-flow").then(function(){return H.showPersonalizer(this.renderView.bind(this))}.bind(this)).catch((function(e){marvel.logger.warn("Errored out while attempting to line up onboading flows")})).finally(function(){F.run("sideNavVBOnboarding*").finally(function(){s.hasFeature("force-skip-npw-onboarding")?(s.setUserFlag("force-skipped-npw-onboarding",!0),this.navigate("/",{trigger:!0})):this._renderNPW({isFirstUse:!0,onboardingFlow:e,forcedOnboarding:s.hasFeature("show-onboarding")})}.bind(this)).done()}.bind(this)).done():this.navigate("/",{trigger:!0})}.bind(this))}.bind(this)).done()},_getNPWClass:function(e){return e&&e.isLoggedOut?g.getNpwClass(e).then(function(e){return e}.bind(this)):s.allFeaturesLoaded().then(function(){return e=t.assign({},{firstUse:!0,FeatureController:s},e||{}),g.getNpwClass(e).then(function(e){return e}.bind(this))}.bind(this))},_renderNPW:function(n){var i=t.assign({isFirstUse:!n.fromVBRoute||this._visualBrowseRouteFirstUseCheck()},n),o=[this._getNPWClass(i)];n.isLoggedOut||n.searchQuery?(e("body").addClass("visual-browse-preload"),o.push(r.resolve())):o.push(this._renderMarketingPrefsIfNeeded("new-user-flow")),r.allSettled(o).spread(function(e,t){s.hasFeature("home-show-visual-browse")?(i.inAppContainer=!0,this._handleProjectsRenderHelper({selectedPane:"visual-browse",npwProps:{getNPWClassResults:e.value,options:i}})):this.renderView(e.value,i),this.showSettings&&this._renderSettingsView()}.bind(this)).done()},_visualBrowseRouteFirstUseCheck:function(){return!s.hasAny("created-first-project","user-has-seen-npw-onboarding","force-skipped-npw-onboarding")},_handleNpwAsVisualBrowse:function(e,n){a.requiresAuth().then(function(){return s.allFeaturesLoaded().then(function(r){var o;if(S.getAppByType(e))if("new"===n){var a=i.history.location.search||"";if("video"===e&&a&&(!s.hasFeature("npw-visual-browse-video-arc")||!s.hasFeature("npw-visual-browse-video-arc-with-title"))){var l=[],c=a.substring(1).split("&");t.each(c,(function(e){var t=e.split("=");"storyarc"==t[0]?s.hasFeature("npw-visual-browse-video-arc")&&l.push(e):"title"==t[0]?s.hasFeature("npw-visual-browse-video-arc-with-title")&&l.push(e):l.push(e)})),l.length!==c.length&&(a="?"+l.join("&"))}window.marvel.navigate("/design/"+e+"/new"+a,{trigger:!0,replace:!0}),o=!0}else if("post"===e)this.handleRemix(e,n),o=!0;else if("page"===e&&s.hasFeature("npw-visual-browse-page-tmpls")){var d=0;s.hasFeature("npw-visual-browse-page-tmpls-image-size-clamp")&&(d=2560),this._handleTmpl({assetType:e,assetId:n,maxImageSize:d}),o=!0}o||this._renderNPW({fromVBRoute:!0})}.bind(this))}.bind(this))},handleCreativeCloud:function(){a.isValid().then(function(){var e=/samcap_id/.test(document.location.search)?document.location.search:"";this.navigate("projects"+e,{trigger:!0,replace:!0})}.bind(this),function(e){window.location.replace("/about"+window.location.search)}.bind(this))},handleCreativeHigh:function(){this.renderView(D)},handleSettings:function(){a.requiresAuth().then(function(){this.showSettings=!0,this.navigate("/",{replace:!0,trigger:!0})}.bind(this))},_renderSettingsView:function(){this.showSettings=!1,this.globalNav.getUserMenu().editUserSettings({hideLoadingSpinner:!0})},handleSettingsEntitlement:function(){a.requiresAuth().then((function(){if(a.isReAuthTokenValid())return r.all([a.asyncGetProfileFromIMS(),a.getAccessToken()]);a.reAuthenticate()})).spread(function(t,n){var i={clientProfile:a.getProfile(),userData:s.userData,userFeatures:s.features,sessionAttributes:s.getAuthenticatedUserAttributes(),serverProfile:t,clientAccessToken:n,cookieAccessToken:a.getTokenFromCookie()},r=new Blob([JSON.stringify(i,null,2)],{type:"application/octet-stream"}),o=window.URL.createObjectURL(r);if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,"spark-entitlements.txt");else{var l=e("<a>");l.css("display","none"),l.attr("href",o),l.attr("download","spark-entitlements.txt"),e("body").append(l),l[0].click(),l.remove(),window.URL.revokeObjectURL(o)}E.showConfirm("Did the download complete?","Look in your downloads folder for a file named spark-entitlements.txt. Please send the spark-entitlements.txt file to Adobe support.",{okText:"Ok!",cancelText:"Try again.",ignoreBackgroundClick:!0}).then(function(e){if(!e)return this.handleSettingsEntitlement();marvel.navigate("/",{trigger:!0})}.bind(this))}.bind(this)).done()},_handleHome:function(){j.load().then(function(e){var t=new e.SparkFolderDiscoverySpec;window.marvel.events.trigger("set-sync-mode",{mode:"sync-home",folderSpec:t,previousFolderCallback:function(e){this._handleProjectsRenderHelper({selectedPane:"home",previousFolderSpec:e})}.bind(this)})}.bind(this))},handleHome:function(){s.hasFeature("created-first-project")?this._handleHome():c.getAllMyProjects().then(function(e){if(e.length>0)s.setUserFlag("created-first-project",!0);else if(!s.hasAny("user-has-seen-npw-onboarding","force-skipped-npw-onboarding"))return void this.navigate("onboarding",{trigger:!0,replace:!0});this._handleHome()}.bind(this)).done()},handleTemplates:function(){return this.handleProjects()},_getUnprocessedSeoPage:function(){var e=this.browserStorage.get("spark-last-seo-page-visited"),n={};if(e&&-1===e.indexOf("_processed")){var r="landing:make:";0===e.indexOf(r)?(n.id=e.substring(r.length),n.type="make"):(r="landing:templates:",0===e.indexOf(r)?(n.id=e.substring(r.length),n.type="templates"):(n.id=e,n.type="unk"))}var o=P.parse(i.history.fragment,!0);if(!n.Id&&o.query.landing){var a=o.query.landing.toLowerCase(),s="landing:";0===a.indexOf("make-")?(n.id=a.split("make-")[1],n.type="make",s+="make:"):0===a.indexOf("templates-")&&(n.id=a.split("templates-")[1],n.type="templates",s+="templates:"),n.id&&(s+=n.Id,this.browserStorage.set("spark-last-seo-page-visited",s))}if(o.query.customSearch)try{var l=P.parse("?"+o.query.customSearch,!0);t.isEmpty(l.query)||(n.customSearch=l.query)}catch(e){window.marvel.logger.warn("error parsing seo customSearch:"+o.query.customSearch,e)}return n.id&&n},_internalHandleFolders:function(e,n,r,o,l){a.requiresAuth().then(function(){var a=o?"branding":"projects";s.allFeaturesLoaded().then(function(){if(l)return w.getAllActivatedVisibleBrands().then((function(e){e&&e.length||l.kitId||(l.kitId="create")}))}.bind(this)).then(function(o){if(x.triggerCCPaidConfirmationTag(),(s.hasFeature("enable-odb")||s.hasFeature("enable-spark-storage-server"))&&j.load(),window.marvel.events.trigger("set-sync-mode",{mode:"sync-group",doc:null}),window.marvel.events.trigger("hide-interstitial"),window.marvel._siteSection="organizer:projects",k.savePreProcessedSeoPagesVisited(),s.hasFeature("test-takeover-view")){var d=new i.model({image:"/images/test-takeover.png",title:"Takeover title",subtitle:"Upgrade to Spark Premium to customize themes with your brand's logo, colors, fonts and imagery.",primaryButtonTitle:"Upgrade",secondaryButtonTitle:"Maybe Later",closeBtnIsHidden:!1,action:function(e){"primary"===e?console.log("primary callback called"):console.log("secondary callback called")}}),u=new I({model:d});t.delay(u.render,2e3)}if(s.hasFeature("created-first-project")){var h={folderId:e,sharedOnly:n,selectedPane:a,useFlatApi:r,brandKitId:l?l.kitId:null,themeleteId:l?l.themeleteId:null,brandSubpage:l?l.subPage:null};this._handleProjectsRenderHelper(h)}else c.getAllMyProjects().then(function(t){if(t.length>0)s.setUserFlag("created-first-project",!0);else if(!s.hasAny("user-has-seen-npw-onboarding","force-skipped-npw-onboarding"))return void this.navigate("onboarding",{trigger:!0,replace:!0});this._handleProjectsRenderHelper({folderId:e,sharedOnly:n,selectedPane:a,useFlatApi:r,brandKitId:l?l.kitId:null})}.bind(this)).done()}.bind(this)).done()}.bind(this)).done()},handleFolders:function(e){return e=e||null,this._internalHandleFolders(e,!1)},handleProjects:function(){return this._internalHandleFolders(null,!1)},handleShared:function(){return this._internalHandleFolders(null,!0)},handleBranding:function(e,t){var n=e?e.split("/"):[],i={kitId:e=n[0],subPage:t||n[1]};return this._internalHandleFolders(null,!1,!1,!0,i)},handleBrandingThemeEdit:function(e,t){var n={kitId:e,themeleteId:t};return this._internalHandleFolders(null,!1,!1,!0,n)},handleProjectsFlat:function(){return this._internalHandleFolders(null,!1,!0)},handleProjectSearch:function(e){e&&(e=P.parse("?"+e,!0).query),e=e||{},this._handleProjectsRenderHelper({sharedOnly:!1,selectedPane:"project-search",useFlatApi:!0,projectSearchKeyword:t.trim(e.q)||""})},_getTemplatesController:function(){return this._getTemplatesControllerDefer||(this._getTemplatesControllerDefer=r.defer(),n.e("ar-templates-controller").then(function(e){var t=n(909);this._templatesController=t,this._getTemplatesControllerDefer.resolve(t)}.bind(this).bind(null,n)).catch(n.oe)),this._getTemplatesControllerDefer.promise},_organizeControllerRefreshCheck:function(e,t){return(t=t||{}).ignoreFilterCheck=!0,e.areFiltersAlreadyReady()?!!e.doProjectsNeedRefreshBeforeOrganizerLoad(this.currentView)&&(e.refreshProjectsForFiltering().then(function(){this._handleProjectsRenderHelper(t)}.bind(this)).done(),!0):(e.whenFiltersReady().then(function(){this._handleProjectsRenderHelper(t)}.bind(this)),!0)},_handleProjectsRenderHelper:function(t){if(!s.hasFeature("remove-branding-enabled")||s.hasFeature("is-paid-user")||s.hasFeature("remove-branding-seen-premium-onboarding")||(this.navigate("/branding/",{trigger:!0}),window.marvel.events.areaAndSectionChange("brandkit")),F.run("ReactCollab*").catch((function(e){window.marvel.logger.error("Error loading ReactCollab Experiment: ",e)})),!(t=t||{}).ignoreFilterCheck)if(s.hasFeature("enable-spark-templates")){var o=!1;if(-1!=i.history.fragment.toLowerCase().split("/").indexOf("templates")&&(o=!0),o){if(!this._templatesController)return void this._getTemplatesController().then(function(e){this._handleProjectsRenderHelper()}.bind(this));if(this._organizeControllerRefreshCheck(this._templatesController))return}else if(this._organizeControllerRefreshCheck(c,t))return}else if(this._organizeControllerRefreshCheck(c,t))return;var l=r.defer();d.getProfileHomeSettings().then(function(r){Promise.all([n.e("m-react-spectrum"),n.e(2),n.e(3),n.e("vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor"),n.e("react")]).then(function(o){var c=n(271).default,d=n(910).default;this.wrappedReactOrganizerModel=this.wrappedReactOrganizerModel||new i.Model;var u=s.hasFeature("entitle-brand-kit"),h=r.canSeeInAppUpgradeMarketing,p=s.hasFeature("home-show-whats-new")&&r.canSeeMarketing,f=(a.getProfile()||{}).first_name,m=f?"sidenav-home-name":"sidenav-home-no-name",v="",b=s.hasFeature("home-show-visual-browse");r.isEDUAccount&&(v="edu");var y=!v,w={eduType:v,randomizeOrder:!!v,allPremium:!1,limit:20,randomSampleSize:50};if(this.wrappedReactOrganizerModel.set({folderId:t.folderId||null,showFolders:s.hasFeature("enable-odb")&&!t.useFlatApi&&!t.sharedOnly,showRecents:!!t.useFlatApi,showCollaborated:!!t.sharedOnly,selectedPane:t.selectedPane,homeSideNavId:m,userName:f,brandKitId:t.brandKitId,themeleteId:t.themeleteId,brandSubpage:t.brandSubpage,showWhatsNew:p,showBlogNav:y,showVisualBrowse:b,npwProps:t.npwProps,projectSearchKeyword:t.projectSearchKeyword,tourShowUpgrade:h,showMarketingCarousel:h,socialAboveProjects:!v&&!u,isPremiumUser:u,eduType:v,isBrazeEnabled:s.hasFeature("enable-appboy"),handleCreateFromTemplateThumb:$.handleCreateFromHomeTemplateThumb,handleHomeCreateFromScratch:$.handleHomeCreateFromScratch,homeSearchResultsPromise:$.getInitialHomeModuleResults(w),postSizeFiltersPromise:$.getEditorSizeFilterInfo("post"),currentRouteFragment:i.history.fragment,isAutomatedTestUser:a.isAutomatedTestUser(),refAppEnabled:s.hasFeature("enable-reference-app")}),!this.wrappedReactOrganizerCls){var k=c.wrapComponentSpectrum(d,this.wrappedReactOrganizerModel);this.wrappedReactOrganizerCls=k.extend({cachename:"reactorganizer",remove:function(){k.prototype.remove.call(this)}})}this.wrappedReactOrganizer||(this.renderView(this.wrappedReactOrganizerCls),this.wrappedReactOrganizer=this.currentView,this.wrappedReactOrganizer.listenToModelChange()),e(".site-nav-link").removeClass("selected"),e(".site-nav-projects").addClass("selected"),s.hasFeature("home-show-visual-browse")&&g.preloadRequire(),l.resolve()}.bind(this).bind(null,n)).catch(n.oe),s.hasFeature("show-optin")&&v.shouldSeeNewsletterPitch().then(function(e){1===e&&this._renderMarketingPrefsIfNeeded("new-user-flow").then(function(){window.marvel.navigate("/projects",{trigger:!0})}.bind(this)).done()}.bind(this))}.bind(this)),l.promise.then(function(){this.showSettings&&this._renderSettingsView()}.bind(this)).done()},handleResetODB:function(){E.showConfirm(o.getString("reset-folders-title"),o.getString("reset-folders-description"),{okText:o.getString("reset-folders-action-ok"),cancelText:o.getString("reset-folders-action-cancel"),ignoreBackgroundClick:!0}).then(function(e){e?j.load().then(function(e){return e.ACPSparkController._resetODB()}.bind(this)).done():marvel.navigate("/",{trigger:!0})}.bind(this))},handleAcceptInvite:function(e){a.requiresAuth().then(function(){E.showWaitView(o.getString("collab-invite-waiting-single-project"),"",{});var n=U.urnToCCStoragePath(e);return s.allFeaturesLoaded().then(function(){var i=s.hasFeature("enable-spark-templates"),r="/";l.inviteeResolveInviteURN(e).then(function(n){return k.trackEvent("collab:inviteViewed",{contextualData1:"viewSource:email",contextualData12:"inviteType:project"},"collaboration"),l.inviteeAcceptInvite(n).then(function(e){var n=S.getAppByDocType(e.type);n||window.marvel.logger.error("handleAcceptInvite: Unrecognized mimeType",e.type),k.trackEvent("collab:inviteAccepted",{contextualData1:"acceptSource:email",contextualData12:"inviteType:project",sparkFormat:n.typeName},"collaboration"),E.hide(),e&&e.type&&e.type.toLowerCase().indexOf("template")>0?(E.showWaitView(o.getString("collab-accept-invite-acceptance-title"),o.getString("collab-accept-invite-acceptance-template-text"),{hideSpinner:!0}),r="/templates",i||s.setUserFlag("enable-spark-templates",!0)):(E.showWaitSuccessView(o.getString("collab-invite-summary-accept-single-project"),""),r="design/"+n.typeName+"/"+e.projectId),t.delay((function(){E.hide(),window.marvel.events.trigger("storage-sync-now")}),2e3);var a=n.getSetting("syncGroup");return U.ensureSyncGroup(a).then((function(t){return t.getComposite(e.projectId)})).then((function(e){e.setCollaboration("INCOMING"),window.marvel.navigate(r,{trigger:!0,replace:!0})}))}.bind(this)).catch(function(t){if(t&&"brand-not-found-invite-not-found"==t.code)return marvel.logger.warn("[Collab] Error finding the brand or brand invite during project invite-accept. Removing the shared composite for the project and notifying the user that the invite has to be sent again.",{urn:e}),l.inviteeRemoveSharedComposite(t.doc).then((function(){throw t}));throw t}.bind(this))}.bind(this)).catch(function(i){E.hide(),i&&"invite-for-urn-not-found"===i.code&&n.then((function(e){var t=e.split("/"),n=t.length-2,i=t.length-1,o=S.getAppBySyncGroupName(t[n]).typeName;marvel.logger.info("handleAcceptInvite for an already accepted invite"),r="design/"+o+"/"+t[i],window.marvel.navigate(r,{trigger:!0,replace:!0})})).catch(function(n){"brand-not-found-invite-not-found"==n.code?(marvel.logger.warn("[Collab] Email invite, could not find corresponding brand invite",{urn:e}),E.showWaitView(o.getString("collab-accept-invite-brand-failure-title"),o.getString("collab-accept-invite-brand-failure-text"),{hideSpinner:!0})):(marvel.logger.warn("[Collab] Email invite, could not resolve resourceURN - wrong account?",{urn:e}),E.showWaitView(o.getString("collab-accept-invite-acceptance-failure-title"),o.getString("collab-accept-invite-acceptance-failure-text"),{hideSpinner:!0})),t.delay((function(){E.hide(),window.marvel.navigate(r,{trigger:!0,replace:!0})}),7e3)}.bind(this))}.bind(this)).done()}.bind(this))}.bind(this)).done()},handleBrandKitImport:function(){if(window.sessionStorage)try{window.sessionStorage.setItem("bk-import",!0)}catch(e){window.bkImport=!0}this.handleProjects()},handleWorkflow:function(n){a.requiresAuth().then(function(){s.allFeaturesLoaded().then(function(){if(this.workflows[n]){var r=this.workflows[n];r.analytics&&k.trackEvent(r.analytics.shown,{},"workflow:select");var o=s.hasFeature(r.featureFlag);if(r.featureFlag&&!o)k.resetWorkflow(n),this.navigate("projects",{trigger:!0});else if(k.setWorkflow(n),r.navigate)this.navigate(r.navigate,{trigger:!0});else{var a=new i.Model(t.find(r.flows,{flow:"selectRemixFlow"}));this.renderView(T,a,null,e(".lg-dialog-overlay")[0])}}else this.navigate("projects",{trigger:!0})}.bind(this)).done()}.bind(this)).done()},handleMustReload:function(e){var n=e.msg||"Unknown error, must refresh";e.goto;"USER_CANCELED"!==e.code&&alert(n),window.marvel.navigate("/projects"),t.defer((function(){window.location.reload()}))},handleTmpl:function(e,t){a.requiresAuth().then(function(){s.allFeaturesLoaded().then(function(){s.hasFeature("enable-tmpl-route")?this._handleTmpl({assetType:e,assetId:t,fromRoute:!0}):this.navigate("projects",{trigger:!0})}.bind(this))}.bind(this))},_handleTmpl:function(e){_.getUtils().then(function(t){t.createDuplicateFromCp(e).then((function(){k.trackEvent("newFromTmplRoute",{exampleId:e.assetId,format:e.assetType,contextData:["projectId"]},"tmpl")}),(function(e){this.navigate("projects",{trigger:!0})}))}.bind(this))},handleDesign:function(e,t,n){var i={assetType:e,assetId:t,subPage:n,operation:"edit"};t?0===t.indexOf("new")&&(i.assetId=null,i.operation="new"):i.operation="new",this.invokeEditor(i)},handleDeleteCurrentDoc:function(e){this._deleteDoc(e.doc,e.defer)},_deleteDoc:function(e,t){j.load().then(function(n){var i=n.ACPSparkController.getLocalProjectById(e.id);c.deleteComposite(e),i.projectFolder?n.ACPSparkController.removeProjectFromParentFolder(i).then((function(){n.ACPSparkController.deleteProjectLocal(i),t&&t.resolve()})).catch((function(n){marvel.logger.warn("_deleteDoc failed for:"+e.id,n),t&&t.resolve()})):t&&t.resolve()}.bind(this)).done()},handleDesignRemixReplace:function(e,t,n,i){i=i?"?"+i:"",window.marvel.navigate("design-remix/"+e+"/"+t+i,{trigger:!1,replace:!0});var r=this.currentView&&this.currentView.getCurrentDocInfo&&this.currentView.getCurrentDocInfo();if(r&&r.doc&&r.doc.id===n){var o=function(){marvel.events.off("designview-rendersubview-doc-loaded",o),this._deleteDoc(r.doc)}.bind(this);marvel.events.on("designview-rendersubview-doc-loaded",o)}this.handleDesignRemix(e,t,"remixReplaceStart")},handleDesignRemix:function(e,t,n,i,r){var o=S.getAppByType(e),a={cpAssetId:t,contextString:"remix"};"post"===e&&k.setProductName("theo"),k.addContextData(a),k.trackEvent(n||"remixStart",{type:o.getAppTypeID(),contextData:["cpAssetId","contextString"]},"remix");var s={assetType:e,cpAssetId:t,operation:"remix",cpServiceDomain:i};r&&(s.searchOptions=r),this.invokeEditor(s)},handleDesignNewFromTheme:function(e,t,n){this.invokeEditor({assetType:e,contextId:t,themeId:n,operation:"new-from-theme"})},handleDesignEditTemplate:function(e,t,n){this.invokeEditor({assetType:e,contextId:t,templateId:n,operation:"edit-template"})},handleDesignNewFromTemplate:function(e,t,n){this.invokeEditor({assetType:e,contextId:t,templateId:n,operation:"new-from-template"})},handleDesignDownload:function(e,t){if(window.sessionStorage)try{window.sessionStorage.setItem("publishOnLoadDesignView","download")}catch(n){marvel.logger.warn("Session storage failed for design download "+n,{assetType:e,assetId:t})}window.marvel._publishOnLoadDesignView="download",window.marvel.navigate("design/"+e+"/"+t,{trigger:!0,replace:!0})},invokeEditor:function(e){window.marvel.events.trigger("editor-invoked");window.marvel._siteSection;window.marvel._siteSection="editor:"+e.assetType,a.requiresAuth().then(function(){return s.allFeaturesLoaded().then(function(){var n;"remix"!==e.operation||e.cpServiceDomain||(s.hasFeature("remix-and-search-use-stage-cp")?e.cpServiceDomain=C.cpsStage:e.cpServiceDomain=C.cpsProd),n=this._getUnprocessedSeoPage();var r=i.history.getFragment(),o=null,a=/workflow\=([^\&]+)/.exec(r),l=S.getAppByType(e.assetType),c=P.parse(i.history.fragment,!0).query;if(!l)return marvel.logger.error("Route to DesignView failed to find an app for "+e.assetType,{assetId:e.assetId,subPage:e.subPage}),void this.navigate("/",{trigger:!0});if(x.triggerCCPaidConfirmationTag(),R.showAppBumper(l))return this.renderAppBumper(l);window.marvel.events.areaAndSectionChange("editor",e.assetType),a&&a.length>1&&(o=a[1]),o&&k.addContextData({workflow:o}),k.savePreProcessedSeoPagesVisited(),F.removeAuthenticatedUserAttributes("editor-"+e.assetType+"-"+e.operation);var d=this._getProjectContextFromSession(),u=t.extend({app:l,routeFragment:r,routeQuery:c,projectContext:d,seoPage:n},e);if(o&&this.workflows[o]&&this.workflows[o].editorConfig){var h=this.workflows[o];u=t.extend(u,h.editorConfig)}"post"!==l.typeName||!$.appSupportsEditorSearch(l)||"new"!==u.operation&&"remix"!==u.operation||(u.startingMenu="templates",e.searchOptions||!(c&&c.search||n&&n.id))?this.renderView(b,null,l.getAppTypeID(),null,u):$.getASearchRequestsController({addDefaultCallbacks:!0,editorApp:l}).then(function(e){var i=$.setupUrlSearchFromRemixMetadataAndOrSeoPageOrQuery({seoPage:n,query:c&&c.search}),r={trigger:i.trigger};t.assign(r,i.searchQuery);var o={searchPromise:e.getTemplateResultsForOpeningEditor(l.typeName,r),searchRequestsController:e};u.searchOptions=o,this.renderView(b,null,l.getAppTypeID(),null,u)}.bind(this))}.bind(this))}.bind(this)).catch((function(e){window.marvel.logger.warn("DesignViewRoute exception: ",e),window.marvel.navigate("/",{trigger:!0})})).done()},handleRemix:function(e,t){this.handleDesignRemix(e,t,"remixStart",C.cps)},handleRemixGallery:function(e,t,n){this.handleDesignRemix(e,t,"remixGalleryStart",C.galleryCPService)},_getProjectContextFromSession:function(){var e;try{if(!window.sessionStorage)return null;var n=sessionStorage.getItem("project_ctx")||void 0;sessionStorage.removeItem("project_ctx"),n&&(e=JSON.parse(n),t.each(e,(function(n,i){t.isObject(n)&&(e[i]="object:"+JSON.stringify(n))})))}catch(e){}return e},remix:function(e,n,i,r,o){window.marvel.appIsReady.then(t.bind((function(){var t=S.getAppByType(e);t?a.requiresAuth().then(function(){x.triggerCCPaidConfirmationTag(),window.marvel.events.trigger("show-interstitial",{typeName:e});var a={remixableAssetId:n,contextString:"remix"};"post"===e&&k.setProductName("theo"),k.savePreProcessedSeoPagesVisited(),k.addContextData(a),k.trackEvent(i,{type:t.getAppTypeID(),contextData:["remixableAssetId","contextString"]},"remix"),_.getUtils().then(function(i){i.remixDoc(e,n,r).then(function(e){t.getStorageImpl().setSaveThumbOnLoad(),marvel.events.trigger("email-check");var i="?contextString=remix&remixableAssetId="+n;o&&(i+="&workflow="+o),marvel.navigate("design/"+t.typeName+"/"+e.get("id")+i,{trigger:!0}),e.triggerProjectCreatedAnalytics({contextData:{workflow:"remix",remixableAssetId:n}})}.bind(this)).catch((function(e){new B({popupName:"unremixableTemplate",primaryTxt:"Template missing",secondaryTxt:"Sorry, it looks like this template has gone rogue. We'll take you back.",primaryBtnTitle:"OK",primaryClickHandler:function(){marvel.navigate("projects",{trigger:!0}),this.hide()}}).show(),console.error("handleRemix error:",e)}))}.bind(this))}.bind(this)).done():console.error("remix route error app is not defined "+e)}),this)).done()},interceptDefaultRoute:function(){return window.marvel._firstLaunchSession?s.hasFeature("first-launch-create-new")?(this.navigate("design/page/new",{trigger:!0}),r.resolve(!0)):s.hasFeature("first-launch-create-from-template")?(this.navigate("tmpl/page/wShgU",{trigger:!0}),r.resolve(!0)):r.resolve(!1):r.resolve(!1)},handleSandbox:function(){window.SandboxController?window.SandboxController.handleSandbox(this):this.navigate("/",{trigger:!0})},defaultRoute:function(){a.loadIMS().then(function(){a.isValid().then(function(){s.allFeaturesLoaded().then(function(){k.savePreProcessedSeoPagesVisited(),F.handleExperimentRedirect().finally(function(){this.interceptDefaultRoute().then(function(e){e||this.handleHome()}.bind(this)).done()}.bind(this)).done()}.bind(this)).done()}.bind(this),function(e){a.requiresAuth()}.bind(this)).done()}.bind(this),(function(e){console.log("))))))))))))) duplicate loadIMS request rejected")})).done()},clean:function(){this.currentView&&(this.currentView.remove&&this.currentView.remove(),this.currentView.hide&&this.currentView.hide(),this.currentView=null,this.wrappedReactOrganizer=null),this.globalNav&&this.globalNav.isOpen()&&this.globalNav.hideMenu(),e(window).scrollTop(0)},execute:function(e,t,n){if(window.marvel._nnr&&"handleSettingsEntitlement"!==n){var o=P.parse(i.history.location.href,!0);delete o.query.nnr,a.loadIMS().then((function(){window.location.href=P.format({pathname:o.pathname,query:o.query})})).done()}this._clickedBackButtonWhileLoadingEditor()&&window.location.reload(),(this.currentView&&this.currentView.beforeUnload?this.currentView.beforeUnload():r.resolve()).then(function(n){if(n)return this.navigate(n,{trigger:!1});e&&e.apply(this,t)}.bind(this)).done()},_clickedBackButtonWhileLoadingEditor:function(){var e=this._backButtonClicked,t=this._editorIsLoading;return this._editorIsLoading=!1,this._backButtonClicked=!1,e&&t},renderSiteBumper:function(){if(R.shouldRefreshSite())window.location.reload(!0);else{var t=new i.Model({site:!0,dataPromise:R.getCurrentSettingsForSite()});this.renderView(O,t,null,e(".bumper-wrapper")),R.showingSiteBumper()}},renderAppBumper:function(n){var r=t.isObject(n)?n:S.getAppByName(n);if(!r)return window.marvel.logger.warn("unknown app in renderAppBumper:"+n),void window.marvel.navigate("/",{trigger:!0});if(R.shouldRefreshApp(r))window.location.reload(!0);else{R.showingAppBumper(r);var o=new i.Model({dataPromise:R.getCurrentSettingsForApp(r,r.getDisplayName())});this.renderView(O,o,null,e(".bumper-wrapper"))}},handleBumperOn:function(e,t,n){R.showSiteBumper()?this.renderSiteBumper():this.currentView&&this.currentView.$el.hasClass("bumper-wrapper")?this.renderAppBumper(t.location):this.currentView&&this.currentView.app&&R.showAppBumper(this.currentView.app)&&this.renderAppBumper(this.currentView.app)},handleBumperLocationSettingsUpdated:function(e,t,n){this.handleBumperOn(e,t,n)},handleBumperOff:function(e,t,n){this.currentView instanceof O&&window.location.reload(!0)},_handleContentCardsInit:function(){F.run("ContentCardsExperiment*",{"enable-content-cards":function(e){},control:function(e){}}).finally(function(){s.hasFeature("appboy-content-cards-enable")&&L.setup()}.bind(this)).done()},renderView:function(t,n,o,a,s){var l,c=!1,d=!0;if(o=o||"projectm",R.showSiteBumper()&&t!==O)return this.renderSiteBumper();try{k.setProductName(o),t.prototype.cachename?this.currentView&&this.currentView===this.viewCache[t.prototype.cachename]&&this.currentView.renderUpdate?(n&&(this.currentView.model=n),this.currentView.renderUpdate(i.history.fragment),d=!1):this.viewCache[t.prototype.cachename]?(l=this.viewCache[t.prototype.cachename])!==this.currentView&&(this.clean(),this.currentView=l):c=!0:c=!0,c&&(this.clean(),(l=Object.create(t.prototype)).el=a||this.container$[0],t.apply(l,Array.prototype.slice.call(arguments,1)),t.prototype.cachename&&(this.viewCache[t.prototype.cachename]=l),this.currentView=l),n&&d&&(l.model=n),s&&(l.app=s.app),d&&l.render(i.history.fragment,s),this._fouc||(this._fouc=!0,e(".fouc").removeClass("fouc"))}catch(e){window.marvel.logger.warn("render exception ["+e+"], View = "+t.prototype.cachename,e)}return r.resolve()}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(111),n(5),n(6),n(12)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return n.Model.extend({initialize:function(){marvel.events.on("offline",function(){this.show()}.bind(this)),this._handleOffline=this._handleOffline.bind(this),this._handleOnline=this._handleOnline.bind(this),window.addEventListener("offline",this._handleOffline),window.addEventListener("online",this._handleOnline),o.featuresLoaded().then(function(){this.hide()}.bind(this)),r.load().then(function(e){this._core=e}.bind(this))},handleButtonClick:function(){return!!navigator.onLine&&(document.location.reload(),!0)},_handleOffline:function(){this.show()},_handleOnline:function(){},show:function(e){var n;this._showingConfirm||(n="still-offline"===e?"It looks like you are still offline.":"Refresh this page when your connection has been restored.",this._showingConfirm=!0,s.showAlert("You went offline",n,{okText:"Refresh",ignoreBackgroundClick:!0,hideCloseButton:!0}).then(function(e){this._showingConfirm=!1,e&&(this.handleButtonClick()||this.show("still-offline"))}.bind(this)),"still-offline"===e&&t.delay(function(){this._showingConfirm&&(this._showingConfirm=!1,this.show())}.bind(this),3e3))},hide:function(){this._showingConfirm&&(s.hide(),this._showingConfirm=!1)}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(8),n(6),n(25),n(5),n(42),n(107),n(7),n(800),n(43)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u,h){"use strict";return a.extend({events:{"click .done-optin":"handleOptinDoneBtn"},cachename:"marketingoptin",render:function(){if(this._ignoreCloseActions=!0,!marvel._dialogShowing)return this.showOverlay();this.$el.html(r.mustacheRender(u)),d.trackEvent("shownNewsletterOptIn",{},this.model.get("mode")),o.isValid().then(function(){var e=o.getUserCountry();"US"===e&&(this.$el.find(".optin-checkbox").prop("checked",!0),this.$el.find(".newsletter-optin-checkbox").prop("checked",!0)),"DE"!==e&&"KR"!==e&&this.$el.find(".spark-newsletter-section").removeClass("hide")}.bind(this)),this.model.get("showGlobalMarketingChoice")&&this.$el.find(".global-marketing-section").removeClass("hide"),"new-user-flow"===this.model.get("mode")&&c.showedNewsletterPitch()},_handleNewsletterHoldoutExperiment:function(e){var t=i.defer();return e?l.run("newsletterHoldoutExperiment").then(function(e){if(e){e.getExperimentName();var n="newsletterHoldoutVariant"===e.getVariantName();t.resolve(n)}else t.resolve(null)}.bind(this)).catch((function(e){window.marvel.logger.error("Error loading experiment: ",e),t.resolve(null)})).done():t.resolve(!1),t.promise},handleOptinDoneBtn:function(){var e=this.$el.find(".optin-checkbox").is(":checked"),n=this.$el.find(".newsletter-optin-checkbox").is(":checked"),r={"tips-and-tricks":!0},a=i.defer(),l=i.defer(),u=(new Date).getTime(),h=c.getEmailListForReferCode();h&&(r[h]=!0),this._handleNewsletterHoldoutExperiment(n).then(function(h){n?(t.delay(function(){this.$el.find(".mrkt-opt-in-confirm").addClass("show")}.bind(this),500),d.trackEvent("newsletterOptIn",{},this.model.get("mode")),c.setNewsletterOptedIn(),r[h?"spark-newsletter-holdout":"spark-newsletter"]=n):(d.trackEvent("newsletterOptOut",{},this.model.get("mode")),c.newsletterOptedOut());this.model.get("showGlobalMarketingChoice")?o.updateMarketingChoiceForUser(e).then(function(){a.resolve()}.bind(this),function(e){marvel.logger.error("Failed to save marketing preference",e),a.resolve()}.bind(this)).done():a.resolve(),c.saveAndUpdateSettings(r).then(function(){l.resolve()}.bind(this),function(e){marvel.logger.error("Failed to save newsletter preference",e),l.reject(e)}.bind(this)).done(),i.allSettled([a.promise,l.promise]).spread(function(e,i){"fulfilled"===i.state?s.setUserFlag("show-optin",!1):c.resetNewsletterOptOut(),n?t.delay(function(){this.hideOverlay(),this.model.get("doneDefer")&&this.model.get("doneDefer").resolve()}.bind(this),Math.max(0,1500-((new Date).getTime()-u))):(this.hideOverlay(),this.model.get("doneDefer")&&this.model.get("doneDefer").resolve())}.bind(this))}.bind(this))},remove:function(){this.$el.empty()}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="login-bg mrkt-splash-bg"></div>\n<div class="mrkt-container center-panel" data-auto="mrkt-container">\n    <div class="mrkt-dialog">\n        <div class="mrkt-dialog-image"></div>\n        <div class="mrkt-dialog-inner">\n            <h1 class="optin-title">{{marketingoptin-dialog-title}}</h1>\n            <h2 class="optin-subtitle">{{marketingoptin-dialog-subtitle}}</h2>\n\n            <div class="spark-newsletter-section hide">\n                <div class="optin-section">\n                    <label><input type="checkbox" class="newsletter-optin-checkbox" name="newsletterOptinCheckbox">\n                    <span class="optin-label">{{marketingoptin-dialog-checkbox-label}}</span></label>\n                </div>\n            </div>\n            <div class="global-marketing-section hide">\n                <div class="optin-section">\n                    <label><input type="checkbox" class="optin-checkbox" name="optinCheckbox">\n                        <span class="optin-label">{{{marketingoptin-dialog-globalmkt-label}}}</span>\n                    </label>\n                </div>\n            </div>\n            <div class="optin-info">{{{marketingoptin-dialog-info-label}}}</div>\n            <button class="mrvl-btn done-optin" data-auto="splash-opt-in-btn">{{marketingoptin-dialog-continue-btn}}</button>\n\n            <div class="mrkt-opt-in-confirm">\n                <div class="optin-success-icon"></div>\n                <h1 class="optin-title">{{marketingoptin-dialog-success-title}}</h1>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(3),n(1),n(0),n(2),n(8),n(6),n(5),n(260),n(26),n(7),n(802),n(582),n(803),n(805),n(12),n(11),n(19),n(113),n(807)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u,h,p,f,g,m,v,b){"use strict";var y=["facebook","twitter","email","link","download"],w=new g({color:"darkgoldenrod",name:"DesignView"});return i.View.extend({events:{"click .share-link":"handleShareTargetLink"},initialize:function(){this._isBound||(this._isBound=!0,this.handleCurrentDoc=this.handleCurrentDoc.bind(this),this.handleCurrentDocLoaded=this.handleCurrentDocLoaded.bind(this),this.handleShareBtn=this.handleShareBtn.bind(this),this.handleHideInterstitial=this.handleHideInterstitial.bind(this),this.uploadFacebook=this.uploadFacebook.bind(this),this.downloadProject=this.downloadProject.bind(this),this.sendTheoEditorDownloadButtonExportAnalytics=this.sendTheoEditorDownloadButtonExportAnalytics.bind(this)),marvel.events.on("loaded-composite-doc",this.handleCurrentDocLoaded),marvel.events.on("saved-composite-doc",this.handleCurrentDoc),marvel.events.on("share-workflow-current-doc",this.handleShareBtn),marvel.events.on("share-workflow-current-doc-closed",this.handleShareClosed),marvel.events.on("editor-showing-interstitial-hidden",this.handleHideInterstitial),marvel.events.on("upload-to-facebook-current-doc",this.uploadFacebook),marvel.events.on("download-current-doc",this.downloadProject),marvel.events.on("send-theo-editor-download-button-export-analytics",this.sendTheoEditorDownloadButtonExportAnalytics),this.npsSurveyView=new b;try{if(window.sessionStorage){var e=window.sessionStorage.getItem("publishOnLoadDesignView")||"";"share"===e||"download"===e||0===e.indexOf("edit")||"republish"===e?marvel._publishOnLoadDesignView=e:marvel._publishOnLoadDesignView=!1;var t=window.sessionStorage.getItem("workflowOnLoadDesignView");["facebook-holiday-ad-design","facebook-cover-image-design"].indexOf(t)>=0?marvel._workflowOnLoadDesignView=t:marvel._workflowOnLoadDesignView=!1}}catch(e){}},beforeUnload:function(){if(c.removeContextData(["workflow"]),c.resetWorkflow(),this._shareOverlayViewShowing){var t=this.shareOverlayView.beforeUnload();if(t)return t}return this.currentSubView&&this.currentSubView.beforeUnload?(this.currentSubView.beforeUnload()||e.resolve()).then(function(e){return marvel.events.trigger("design-view-unloading",this.currentDoc),e||this.app.storageImpl.releaseBatonLock()}.bind(this)):e.resolve()},_getUrlFragmentQueryParams:function(){var e=i.history.getFragment().split("?")[1],t={};if(e)for(var n=e.split("&"),r=0;r<n.length;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t},getWorkflow:function(){return this._getUrlFragmentQueryParams().workflow||null},_updateRouteAfterFirstSave:function(){var e=i.history.fragment,t=e.split("/");if(-1!==t.indexOf("design")){var n=e.split("?"),r="";n.length>1&&(r="?"+n[1]);var o=t[1],a=this.currentDoc.get("id"),s="design/"+o+"/";window.marvel.navigate(s+a+r,{trigger:!1,replace:!0})}},_handleFirstProjectSave:function(){this.isNewDocument&&(a.hasFeature("created-first-project")||a.setUserFlag("created-first-project",!0),this._updateRouteAfterFirstSave(),this.isNewDocument=!1)},_interstitialError:function(e,n,i,r,o,a){var s=t('<div><div class="error-detail-image"/><h3>'+e+"</h3><p>"+n+"</p></br></div>"),l=t('<button class="sp-cta-button-primary">'+i+"</button>"),c=t('<button class="sp-cta-button-secondary">'+o+"</button>");o&&(c.on("click",a),s.append(c)),i&&(l.on("click",r),s.append(l)),window.marvel.events.trigger("interstitial-error",{addClass:"error-state",addElement$:s})},handleCurrentDocLoaded:function(e){this.isNewDocument||this.handleCurrentDoc(e)},getCurrentDocInfo:function(){var e={doc:null};return this._pendingNewDoc?(e.doc=this._pendingNewDoc,e.isPendingNew=!0):this.currentDoc&&(e.doc=this.currentDoc),e},handleCurrentDoc:function(t){t.getMyApp().getAppTypeID()===this.app.getAppTypeID()?(this._pendingNewDoc&&(t.id===this._pendingNewDoc.id?this._pendingNewDoc=null:w.warn("unexpected handleCurrentDoc for non-matching _pendingNewDoc for same app "+t.getMyApp().getAppTypeID()+":"+this._pendingNewDoc.id+"<>"+t.id)),t&&t._linkedSparkAsset&&t._linkedSparkAsset.updateFromLinkedDoc(t),this.currentDoc?this.currentDoc!==t&&w.warn("received a save composite event for a doc that is not current"):(this.currentDoc=t,this._handleFirstProjectSave(),v.setUXHandler(t,{editing:function(e){v.beginSession(t,e)}.bind(this),cleanup:function(e){v.endSession(t,e)}.bind(this),inactiveTimeout:function(e){c.trackEvent("coediting:stillWorkingDialogViewed",{sparkFormat:t.getMyApp().typeName},"coediting"),f.showConfirm(r.getString("user-inactive-title"),r.getString("user-inactive-message"),{cancelText:r.getString("user-inactive-cancel-text"),okText:r.getString("user-inactive-ok-text")}).then((function(n){if(n)return v.reviveSession(t,e).then((function(e){e||window.location.reload()}));c.trackEvent("coediting:imDonePressed",{sparkFormat:t.getMyApp().typeName},"coediting"),window.marvel.navigate("/",{trigger:!0})})).done()}.bind(this),serviceBorked:function(e){w.warn("DesignView surfacing error borked UX:",e),this._interstitialError(r.getString("interstitial-error-generic-title"),r.getString("interstitial-error-generic-message"),r.getString("interstitial-error-generic-cta"),(function(){window.location.reload()}))}.bind(this),unentitled:function(){window.marvel.events.trigger("branded-project-open-attempted",{doc:t,captive:!0})}.bind(this),batonNotAcquired:function(i){var o=t.getMyApp().cancelEditingSession(t),a=e.defer();return c.trackEvent("coediting:lockDialogViewed",{sparkFormat:t.getMyApp().typeName},"coediting"),this._interstitialError(r.formatMessage("interstitial-error-baton-title",{userName:n.escape(i),projectName:n.escape(t.getProjectName())}),r.formatMessage("interstitial-error-baton-message",{userName:n.escape(i),projectName:n.escape(t.getProjectName())}),r.getString("interstitial-error-baton-cta"),(function(){o.then((function(){a.resolve()}))})),a.promise}.bind(this),batonServiceFailed:function(i){var o=e.defer();return this._interstitialError(r.getString("interstitial-error-baton-service-title"),r.formatMessage("interstitial-error-baton-service-message",{projectName:n.escape(t.getProjectName())}),r.getString("interstitial-error-baton-service-cta"),(function(){o.resolve(!0)}),r.getString("interstitial-error-baton-service-cancel"),(function(){t.getMyApp().cancelEditingSession(t).then(function(){o.resolve(!1)}.bind(this))})),o.promise}.bind(this),missingBrand:function(){var n=t.getMyApp().cancelEditingSession(t),i=e.defer();return this._interstitialError(r.getString("interstitial-error-missing-brand-title"),r.getString("interstitial-error-missing-brand-message"),r.getString("interstitial-error-missing-brand-cta"),(function(){n.then((function(){i.resolve()}))})),i.promise}.bind(this),missingFonts:function(n){var i=e.defer();return window.marvel.events.trigger("missing-brand-fonts-ux",{doc:t,missingFonts:n,defer:i}),i.promise}.bind(this)})),window.marvel.events.trigger("folder-document-updated",t)):"authoring-context"!==t.getMyApp().getAppTypeID()&&w.warn("unexpected handleCurrentDoc for other app type "+t.getMyApp().getAppTypeID()+" <> "+this.app.getAppTypeID())},errorState:function(){this.$el.find(".mrvl-dv-error-display").removeClass("hide")},renderSubView:function(e,t,n){this.$el.find(".mrvl-dv-error-display").addClass("hide"),e.appConfig=n,e.setElement(this.$designView[0]),e.render(),this.currentSubView=e,this.$el.find(".mrvl-hamburger-menu").removeClass("hide"),this._pendingNewDoc=null,t&&t.loadDocument().then(function(e){this.isNewDocument?this._pendingNewDoc=e:this.handleCurrentDoc(e),marvel.events.trigger("designview-rendersubview-doc-loaded",e),this.npsSurveyView.showNPSQuestion(this.app)}.bind(this))},render:function(e,n){var i,r="";return t("body").addClass("design-view"),e&&(i=e.indexOf("/")+1)>=0&&(r=e.substring(i,e.indexOf("/",i+1))),this.workflow=this.getWorkflow(),window.marvel.events.trigger("show-interstitial",{typeName:r,fnBeforeHiding:this._beforeHidingInterstitial.bind(this)}),this.$el.html(d),this.$designView=this.$el.find(".mrvl-dv-wrapper"),this.$shareOverlay=this.$el.find(".mrvl-dv-share-overlay"),n&&(this.isNewDocument=!n.assetId&&"edit-template"!=n.operation,s.attachApp(this,l,n)),this},handleShareClosed:function(){this._shareOverlayViewShowing=!1},_beforeHidingInterstitial:function(){return v.interstitialReadyToHide(this.currentDoc)},handleHideInterstitial:function(){if(marvel.events.off("editor-showing-interstitial-hidden",this.handleHideInterstitial),marvel._publishOnLoadDesignView){var e=marvel._publishOnLoadDesignView;marvel._publishOnLoadDesignView=!1;try{window.sessionStorage.removeItem("publishOnLoadDesignView")}catch(e){}this.handleShareBtn(e,"organizer")}if(marvel._workflowOnLoadDesignView){c.getWorkflow()||c.setWorkflow(marvel._workflowOnLoadDesignView),marvel._workflowOnLoadDesignView=!1;try{window.sessionStorage.removeItem("workflowOnLoadDesignView")}catch(e){}this.uploadFacebook()}},handleShareBtn:function(e,n){return a.featuresLoaded().then(function(){a.hasFeature("share-targets-enabled")&&!e?o.requiresAuth().then(function(){if(this.currentDoc){var e=t(".shareMenu"),n=t(".uploadButton");n.length&&(e.hasClass("hide")?(e.css({top:n.offset().top+n.height()+"px",left:n.offset().left+"px"}),this.openedShareMenu||(this.openedShareMenu=!0,t(window).resize((function(){e.hasClass("hide")||e.addClass("hide")})),t(document).click((function(n){var i=n.target;0!==e.has(n.target).length||t(i).hasClass("uploadButton")||e.addClass("hide")}))),this.app.supportsDownload()||this.$el.find(".download-share-link-item").remove(),e.removeClass("hide")):e.addClass("hide"))}else w.debug("empty doc, can't share")}.bind(this)):this.handleShareDialog(e,"link",n)}.bind(this)).done(),!1},_loadShareView:function(){return this._shareViewLoader||(this._shareViewLoader=new u),this._shareViewLoader.getShareView()},handleShareDialog:function(e,n,i){n&&-1!==y.indexOf(n)||(n="link");var r=this.app.getAppTypeID();return i=i||"editor:"+r,marvel.features.featuresLoaded().then(function(){o.requiresAuth().then(function(){if(this.currentDoc)try{t(".shareMenu").addClass("hide"),this._loadShareView().then(function(t){this.shareOverlayView=t,this.shareOverlayView.setShareTarget(n),this.shareOverlayView.setModel(this.currentDoc),this.shareOverlayView.setElement(this.$shareOverlay),this.shareOverlayView.setWorkflow(this.workflow),c.setCurrentProjectId(this.currentDoc.get("id")),c.trackEvent("publishBegin",{contextData:["projectId"],workflow:this.workflow,contextString:i,shareTarget:n},"publish:publish"),this.shareOverlayView.showShareOverlay({allowRepublish:!0,forceShareViewMode:e||null}),this._shareOverlayViewShowing=!0}.bind(this))}catch(e){throw w.error("handleShareDialog error",e),e}else w.debug("empty doc, can't share")}.bind(this))}.bind(this)),!1},uploadFacebook:function(){if(!this.app.supportsDownload())return!1;a.featuresLoaded().then(function(){if(this.currentDoc){var e=this.app,t=e.getAppTypeID(),n=e.getPublishImpl();n.getDownloadUrl&&n.getDownloadUrl(this.currentDoc).then(function(n){n&&(this.workflow||(this.workflow=this.getWorkflow()),"facebook-cover-image-design"==this.workflow?(c.trackEvent("clickedUploadCoverToFacebook",{app:t,projectId:this.currentDoc.get("id")},t+":editor"),this.facebookCoverUploadView||(this.facebookCoverUploadView=new h({imageUrl:n,projectId:this.currentDoc.get("id"),app:t,workflow:this.workflow})),this.facebookCoverUploadView.setImageUrl(n),this.facebookCoverUploadView.setProjectId(this.currentDoc.get("id")),this.facebookCoverUploadView.setApp(e),this.facebookCoverUploadView.setElement(this.$el.find(".facebook-upload")),c.setCurrentProjectId(this.currentDoc.get("id")),c.trackEvent("publishBegin",{contextData:["projectId"],contextString:"editor:"+t},"publish:publish"),this.facebookCoverUploadView.showOverlay()):"facebook-holiday-ad-design"==this.workflow?(c.trackEvent("clickedUploadToFacebookPage",{app:t,projectId:this.currentDoc.get("id"),workflow:this.workflow},t+":editor"),this.facebookUploadDesignPageView||(this.facebookUploadDesignPageView=new p({imageUrl:n,projectId:this.currentDoc.get("id"),app:t,workflow:this.workflow})),this.facebookUploadDesignPageView.setImageUrl(n),this.facebookUploadDesignPageView.setProjectId(this.currentDoc.get("id")),this.facebookUploadDesignPageView.setApp(e),this.facebookUploadDesignPageView.setElement(this.$el.find(".facebook-upload")),c.setCurrentProjectId(this.currentDoc.get("id")),c.trackEvent("publishBegin",{contextData:["projectId"],contextString:"editor:"+t},"publish:publish"),this.facebookUploadDesignPageView.showOverlay()):w.debug("no workflow specified when trying to upload to facebook"))}.bind(this),(function(e){marvel.logger.error("could not show upload to facebook flow.",e)})).done()}else w.debug("empty doc, can't upload to facebook")}.bind(this)).done()},downloadProject:function(){marvel.features.featuresLoaded().then(function(){o.requiresAuth().then(function(){if(this.currentDoc){if(!this.app.supportsDownload())return!1;var e=this.app,i=e.getPublishImpl();if(i.getDownloadUrl){this.downloadLink$||(this.downloadLink$=this.$el.find(".shf-download-link"),this.downloadLink$.length||(this.downloadLink$=t('<a class="shf-download-link">'),this.$el.append(this.downloadLink$)));var r=i.getDownloadFileName(this.currentDoc);f.showWaitView("Generating download file"),i.getDownloadUrl(this.currentDoc).then(function(t){if(t){var i=e.getAppTypeID();n.isFunction(t)?(this.downloadLink$.removeAttr("href"),this.downloadLink$.removeAttr("download"),t()):(this.downloadLink$.attr("href",t),this.downloadLink$.attr("download",r),this.downloadLink$[0].click()),f.hide(),c.trackEvent("Sharing Action",{type:i,eventAction:"Downloaded",projectId:this.currentDoc.get("id"),workflow:this.workflow},"editor:"+i)}else marvel.logger.warn("couldn't download url",this.currentDoc)}.bind(this))}else i.downloadFile&&this.handleShareDialog("download","download")}else w.debug("current doc not loaded for download")}.bind(this))}.bind(this))},sendTheoEditorDownloadButtonExportAnalytics:function(t){var i=!1;this.currentDoc&&this.currentDoc.getDataFromRoot&&this.currentDoc.setAndSaveDataToRoot&&((i=this.currentDoc.getDataFromRoot("cp#isExported"))||this.currentDoc.setAndSaveDataToRoot("cp#isExported",!0));var r=this.getWorkflow(),o=this.currentDoc.getMyApp();e.all([this.app.hasUploadedFonts(this.currentDoc),m.getExportAnalytics(this.currentDoc,r,"download"),o.getImageMetadataForAnalytics(this.currentDoc)]).spread(function(e,r,o){if(n.extend(r,o),r.isReExport=i?"true":"false",r.includesUploadedFonts=e,r.exportedWithBranding&&c.trackEvent("exportedBrandedProject",r,"editor:theo"),t){var a=t.originalSize||"unknown",s=t.exportSize||"unknown",l=void 0===t.hasResized?"unknown":t.hasResized;r.contextualData1="size:'original:"+a+", exported:"+s+", hasResized:"+l+"'",r.contextualData2="designIngredientId:"+(t.designIngredientId||"none"),r.contextualData3="hasColor:"+(t.color||"none"),r.contextualData4="hasLayout:"+(t.layout||"none"),r.contextualData5="tagNames:"+t.tagNames,r.contextualData6="templateType:"+t.templateType,r.templateId=t.templateId||"none",r.contextualData10="includesPaidAdobeFonts:"+t.includesPaidAdobeFonts,r.contextualData13="hasAddedElement:"+t.contentCountsString,r.contextualData14="hasDesignFilter:"+(t.designFilter||"none"),r.contextualData24="hasVariationTemplate:"+(t.hasVariationTemplate||!1)}c.trackEvent("project:exportCompleted",r,"editor:theo")}.bind(this)).done()},handleShareTargetLink:function(e){return o.requiresAuth().then(function(){if(this.currentDoc)try{var n=t(e.target).data("sharetarget");"download"==n?this.downloadProject():this.handleShareDialog(null,n)}catch(e){throw w.error("handleShareTargetLink error",e),e}}.bind(this)),!1},remove:function(){return t("body").removeClass("design-view"),this.shareOverlayView&&(this.shareOverlayView.remove(),this.shareOverlayView=null),this.currentSubView&&this.currentSubView.remove(),this.currentSubView=null,this.currentDoc=null,this.facebookCoverUploadView=null,this.facebookUploadDesignPageView=null,this.facebookUploadProfile=null,this.disableCreateMoreDesignsPrompt=!1,marvel.events.off("loaded-composite-doc",this.handleCurrentDocLoaded),marvel.events.off("saved-composite-doc",this.handleCurrentDoc),marvel.events.off("share-workflow-current-doc",this.handleShareBtn),marvel.events.off("share-workflow-current-doc-closed",this.handleShareClosed),marvel.events.off("editor-showing-interstitial-hidden",this.handleHideInterstitial),marvel.events.off("upload-to-facebook-current-doc",this.uploadFacebook),marvel.events.off("download-current-doc",this.downloadProject),marvel.events.off("send-theo-editor-download-button-export-analytics",this.sendTheoEditorDownloadButtonExportAnalytics),this.undelegateEvents(),this.$el.empty(),this}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="mrvl-dv-wrapper" data-auto="mrvl-dv-wrapper">\n</div>\n<div class="mrvl-dv-error-display hide">\n    <h3>Error loading project, retrying...</h3>\n</div>\n<div class="mrvl-dv-share-overlay hide"></div>\n<ul class="shareMenu hide" data-auto="share-menu">\n    <li class="facebook-share-link-item"><a href = "#" data-sharetarget="facebook" class="share-link facebook-share-link" data-auto="facebook-share-target">Facebook</a></li>\n    <li class="twitter-share-link-item"><a href = "#" data-sharetarget="twitter" class="share-link twitter-share-link" data-auto="twitter-share-target">Twitter</a></li>\n    <li class="email-share-link-item"><a href = "#" data-sharetarget="email" class="share-link email-share-link" data-auto="email-share-target">Email</a></li>\n    <li class="link-share-link-item"><a href = "#" data-sharetarget="link" class="share-link link-share-link" data-auto="link-share-target">Link</a></li>\n    <li class="download-share-link-item"><a href = "#" data-sharetarget="download" class="share-link download-share-link" data-auto="download-share-target">Download</a></li>\n</ul>\n<div class="facebook-upload"></div>\n'},function(e,t,n){var i,r;i=[n(1),n(2),n(7),n(804),n(309),n(491),n(25)],void 0===(r=function(e,t,n,i,r,o){"use strict";return o.extend({cachename:"facebookUploadCoverImage",feature_flag:"show-facebook-onboarding-design-cover-image",workflow:"facebook-cover-image-design",analyticsEvents:{dismissWorkflow:"dismissFacebookCoverDesignUpload",clickedUpdateCoverPhoto:"clickedUploadCoverToFacebook",uploadedDesign:"uploadedCoverToFacebook",shownWorkflow:"shownFacebookUploadCoverFlow"},handlePostTo:function(t){var i=e(t.currentTarget),o=this.app.getAppTypeID();if(this.isPosting)return t.preventDefault(),t.stopImmediatePropagation(),!1;if(this.canViewPost)return n.trackLink(this.analyticsEvents.clickedUpdateCoverPhoto,{app:o,facebookPostId:this.postId,projectId:this.projectId,workflow:this.workflow},"editor:post"),setTimeout(function(){this.canViewPost=!1,i.removeClass("update-cover-image"),i.text("Post to my profile")}.bind(this),500),!0;t.preventDefault(),t.stopImmediatePropagation(),this.isPosting=!0;r.init(),i.text("Preparing to Publish ... Please wait"),r.uploadPhoto({scopes:"user_photos,publish_actions"},this.imageUrl).then(function(e){var t="http://www.facebook.com/profile.php?preview_cover="+e;i.attr("href",t),i.data("photo",e),this.isPosting=!1,this.canViewPost=!0,this.postId=e,i.text("Click to Update Cover Image"),i.addClass("update-cover-image"),n.trackEvent(this.analyticsEvents.uploadedDesign,{app:o,facebookPostId:this.postId,workflow:this.workflow,projectId:this.projectId},"editor:post"),n.setCurrentProjectId(this.projectId),n.trackEvent("Sharing Action",{contextData:["projectId"],eventAction:"Social Shares",type:"Facebook"},"publish:share")}.bind(this),function(e){this.isPosting=!1,this.canViewPost=!1,window.marvel.logger.error("could not upload file "+this.imageUrl+" to Facebook",e),alert("We could not upload the photo to your Facebook page. Make sure you authorize the app."),setTimeout(function(){i.text("Post to my profile")}.bind(this),1e3)}.bind(this)).done()},render:function(){var e=this.app.getAppTypeID();this.$el.html(i.toString()),r.setAnalyticsInfo({analyticsPageName:"editor:"+e,analyticsContext:"facebookCoverImageDesign",analyticsProjectId:this.projectId});try{window.sessionStorage&&window.sessionStorage.setItem("workflowOnLoadDesignView",this.workflow)}catch(e){}n.trackEvent(this.analyticsEvents.shownWorkflow,{app:e,projectId:this.projectId,workflow:this.workflow},"editor:"+e),this.$el.find(".fb-cover-img").css({"background-image":"url("+this.imageUrl+")"});r.getProfileImage({scopes:"public_profile",doLogin:!1}).then(function(e){this.$el.find(".fb-profile-img").append('<img src = "'+e+'" class = "facebook-profile-image" />')}.bind(this)).done()}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="confirm-overlay">\n    <div class="confirm-view-bg mrvl-overlay-overlay-bg"></div>\n    <div class="confirm-view-shell mrvl-overlay-shell wk-overlay-shell fb-upload-cover-design-shell" data-auto="fbo-upload-design">\n        <h2 class="dialog-title" data-auto="fb-upload-cover-design-dialog-title">Your cover photo looks great!</h2>\n        <div class="confirm-view-content-shell mrvl-overlay-content-shell">\n            <div class="confirm-main-content">\n                <div class="confirm-view-content mrvl-overlay-content dialog-subtitle">\n                    <p>We will need permission to post to your Facebook page.</p>\n                </div>\n\n                <div class="fb-cover-img"><div class="fb-profile-img"></div></div>\n\n                <div class="mrvl-dlg-btn-acts">\n                    <a href = "#" class="wk-post-to fb-post-to-profile confirm-btn" data-auto="fb-post-to-profile" target = "_blank">Post to my profile</a>\n                </div>\n            </div>\n        </div>\n        <button class="confirm-view-close-btn x-close-btn">X</button>\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(7),n(806),n(309),n(491)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";return a.extend({cachename:"facebookUploadDesigntoPage",analyticsEvents:{dismissWorkflow:"dismissFacebookPageUpload",shownWorkflow:"shownFacebookPageUpload",uploadedDesign:"uploadedDesignToFacebookPage",uploadedDesignProfile:"uploadedDesignToFacebookProfile",clickedPostProfile:"clickedViewDesignOnFacebookProfile",clickedViewPostPage:"clickedViewDesignOnFacebookPage",clickedHowToBoostPost:"clickedHowToBoostFacebookPostLink",downloadedDesign:"downloadedDesignFacebookPageUpload"},facebookAccounts:[],handlePostProfile:function(t){var n=e(t.currentTarget),r=this.app.getAppTypeID();if(this.isPosting)return t.preventDefault(),t.stopImmediatePropagation(),!1;if(this.canViewPost)return i.trackLink(this.analyticsEvents.clickedPostProfile,{app:r,facebookPostId:this.postId,projectId:this.projectId,workflow:this.workflow},r+":editor"),setTimeout(function(){this.canViewPost=!1,n.text("Post to Facebook"),n.attr("data-auto","fb-post-to")}.bind(this),500),!0;t.preventDefault(),t.stopImmediatePropagation(),this.isPosting=!0;o.init(),n.text("Preparing to Publish ... Please wait"),o.uploadPhoto({scopes:"publish_actions",doLogin:!0},this.imageUrl).then(function(e){this.isPosting=!1,this.canViewPost=!0,this.postId=e,i.trackEvent(this.analyticsEvents.uploadedDesignProfile,{app:r,facebookPostId:e,workflow:this.workflow,projectId:this.projectId},r+":editor"),n.attr("href","https://facebook.com/"+e),n.text("Posted! Click to view post on Facebook"),n.attr("data-auto","fb-view-profile")}.bind(this),function(e){this.isPosting=!1,marvel.logger.error("could not upload file "+this.imageUrl+" to Facebook",e),alert("We could not upload the photo to your Facebook profile. Make sure you authorize the app."),setTimeout(function(){n.text("Post to my profile")}.bind(this),1e3)}.bind(this)).done()},handlePostTo:function(t){var n=e(t.currentTarget),r=this.app.getAppTypeID();if(this.postToProfile)return this.handlePostProfile(t);var a=e(".facebook-accounts-dd-list").val();if(!a||a.length<1)return alert("Please select a Page from the drop down menu."),!1;if(this.isPosting)return t.preventDefault(),t.stopImmediatePropagation(),!1;if(this.canViewPost)return i.trackLink(this.analyticsEvents.clickedViewPostPage,{app:r,facebookPostId:this.postId,facebookPageId:a,projectId:this.projectId,workflow:this.workflow},r+":editor"),i.setCurrentProjectId(this.projectId),i.trackEvent("Sharing Action",{contextData:["projectId"],eventAction:"Social Shares",type:"Facebook"},"publish:share"),setTimeout(function(){this.canViewPost=!1,n.text("Post to Facebook Page"),n.attr("data-auto","fb-post-to")}.bind(this),500),!0;if(t.preventDefault(),t.stopImmediatePropagation(),!this.imageUrl)return alert("No image to upload."),!1;this.isPosting=!0;o.init(),n.text("Preparing to Publish ... Please wait");var s=this.$el.find(".fb-ad-caption").val();o.uploadPhotoPage({scopes:"manage_pages,publish_pages",doLogin:!0},this.imageUrl,s,a).then(function(e){n.attr("href","https://facebook.com/"+a),n.text("Posted! Click to view post"),n.attr("data-auto","fb-view-page"),i.trackEvent(this.analyticsEvents.uploadedDesign,{app:r,facebookPostId:e,facebookPageId:a,projectId:this.projectId},r+":editor"),i.setCurrentProjectId(this.projectId),i.trackEvent("Sharing Action",{contextData:["projectId"],eventAction:"Social Shares",type:"Facebook"},"publish:share"),this.postId=e,this.isPosting=!1,this.canViewPost=!0}.bind(this),function(e){this.isPosting=!1,this.canViewPost=!1,marvel.logger.error("could not upload file "+this.imageUrl+" to Facebook",e),alert("We were not able to post your design to Facebook. Please make sure you have permission to the Page to do so"),setTimeout(function(){n.text("Post to Facebook Page")}.bind(this),500)}.bind(this)).done()},handleAuthenticate:function(e){e.preventDefault(),this.showAccountsList(!0)},showAccountsList:function(e){var t=this.app.getAppTypeID(),n={scopes:"manage_pages,publish_pages,publish_actions,public_profile",doLogin:e=e||!1};o.getAccounts(n).then(function(e){this.shell$.removeClass("showing-waiter");var r=!1;e.forEach(function(e){e.can_post&&(this.facebookAccounts.push({id:e.id,name:e.name,picture:e.picture&&e.picture.data&&e.picture.data.url?e.picture.data.url:null}),r=!0,this.$el.find(".facebook-accounts-dd-list").append('<option value = "'+e.id+'">'+e.name+"</option>"))}.bind(this)),r?(e[0].picture&&e[0].picture.data&&e[0].picture.data.url&&this.profileImg$.css({"background-image":"url("+e[0].picture.data.url+")"}),this.postToProfile=!1,this.hasAccounts$.removeClass("hide"),this.noAccounts$.addClass("hide"),this.businessName$.text(e[0].name),this.notAuthenticatedBox$.addClass("hide"),this.authenticatedBox$.removeClass("hide"),this.shell$.addClass("authenticated")):(this.postToProfile=!0,o.getMe(n).then(function(e){this.businessName$.text(e.first_name)}.bind(this)).done(),o.getProfileImage(n).then(function(e){this.profileImg$.css({"background-image":"url("+e+")"})}.bind(this)).done(),this.hasAccounts$.addClass("hide"),this.noAccounts$.removeClass("hide"),this.notAuthenticatedBox$.addClass("hide"),this.authenticatedBox$.removeClass("hide"),this.shell$.addClass("authenticated")),i.trackEvent(this.analyticsEvents.shownWorkflow,{app:t,projectId:this.projectId,numAccounts:e.length,workflow:this.workflow},t+":editor")}.bind(this),function(e){this.shell$.removeClass("showing-waiter"),this.shell$.addClass("unauthenticated"),this.notAuthenticatedBox$.removeClass("hide"),this.authenticatedBox$.addClass("hide")}.bind(this))},render:function(){var t=this.app.getAppTypeID();this.$el.empty(),this.$el.html(r.toString());try{window.sessionStorage&&window.sessionStorage.setItem("workflowOnLoadDesignView",this.workflow)}catch(e){}this.notAuthenticatedBox$=this.$el.find(".not-authenticated-option"),this.authenticatedBox$=this.$el.find(".authenticated-option"),this.shell$=this.$el.find(".wk-overlay-shell"),this.businessName$=this.$el.find(".fb-page-business-name-text"),this.profileImg$=this.$el.find(".fb-ad-profile-img"),this.shell$.addClass("showing-waiter"),this.hasAccounts$=this.$el.find(".has-accounts-option"),this.noAccounts$=this.$el.find(".no-accounts-option"),this.$el.find(".wk-download-link").attr("href",this.imageUrl),this.$el.find(".wk-download-link").removeClass("hide"),this.$el.find(".upload-wk-img").css({"background-image":"url("+this.imageUrl+")"}),this.showAccountsList(),e(".facebook-accounts-dd-list").on("change",function(t){var n=e(".facebook-accounts-dd-list :selected"),i=n.val();this.businessName$.text(n.text()),this.facebookAccounts.forEach(function(e){e.id==i&&e.picture&&e.picture.length&&this.profileImg$.css({"background-image":"url("+e.picture+")"})}.bind(this)),this.postToProfile?setTimeout(function(){this.canViewPost=!1,this.isPosting=!1,this.$el.find(".fb-post-to").text("Post to Facebook"),this.$el.find(".fb-post-to").attr("data-auto","fb-post-to")}.bind(this),500):setTimeout(function(){this.canViewPost=!1,this.isPosting=!1,this.$el.find(".fb-post-to").text("Post to Facebook Page"),this.$el.find(".fb-post-to").attr("data-auto","fb-post-to")}.bind(this),500)}.bind(this)),this.$el.find(".learn-how-to-boost-post-link").on("click",function(e){i.trackLink(this.analyticsEvents.clickedHowToBoostPost,{workflow:this.workflow},t+":editor")}.bind(this))},remove:function(){this.$el.empty()}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="confirm-overlay fb-ad-upload-overlay">\n    <div class="confirm-view-bg mrvl-overlay-overlay-bg"></div>\n    <div class="confirm-view-shell mrvl-overlay-shell wk-overlay-shell fb-ad-upload-overlay-shell" data-auto="fb-ad-upload-overlay-shell">\n        <h4 class="dialog-title fb-ad-title authenticated-option hide">Your holiday design looks great! Let\'s post it to Facebook</h4>\n        <div class="confirm-view-content-shell mrvl-overlay-content-shell fb-ad-upload-overlay-content-shell">\n            <div class="confirm-main-content fb-upload-ad-main-content">\n                <div class="confirm-view-content mrvl-overlay-content fb-ad-upload-overlay-content">\n                    <div class="wait-spinner" data-auto="wait-spinner"></div>\n                    <div class="not-authenticated-option hide">\n                        <h2 class="dialog-title fb-ad-unauthenticated">To make your Facebook Page shine,<br />we need your consent to post to your Facebook page.</h2>\n\n                        <div class="upload-fb-img-box unauthenticated">\n                            <div class="upload-wk-img upload-fb-ad-img unauthenticated"></div>\n                        </div>\n\n                        <p class="fb-authenticate-text ad-flow">We\'ll never post anything without confirming with you first.</p>\n\n                        <div class="mrvl-dlg-btn-acts">\n                            <a href = "#" target="_blank" class="wk-authenticate confirm-btn facebook not-authenticated-option" data-auto="fb-authenticate">Connect with Facebook</a>\n                        </div>\n                    </div>\n\n                    <div class="authenticated-option hide">\n                        <div class="left">\n                            <div class="fb-accounts-list-box has-accounts-option">\n                                <p class="dialog-subtitle fb-select-account-text">Select a Facebook Page you want to post to:</p>\n                                <div class="select-style">\n                                    <select class="facebook-accounts-dd-list"></select>\n                                </div>\n\n                                <textarea name="caption" class="fb-ad-caption" placeholder="Write a message to go with your post."></textarea>\n                            </div>\n\n                            <p class="no-accounts-box hide no-accounts-option">You have no Facebook Pages. The design you created will be posted to your Facebook profile when you click on the link below. We will first need permission to post to your Facebook page.</p>\n\n                            <div class="mrvl-dlg-btn-acts fb-ad-upload">\n                                <a href = "#" target="_blank" class="fb-ad-upload-post-to wk-post-to confirm-btn facebook authenticated-option fb-post-to hide" data-auto="fb-post-to">Post to Facebook</a>\n                                <a href = "#" class="fb-ad-download-link wk-download-link hide has-accounts-option" data-auto="fb-download"><img src="/images/download_with_bar.svg" /></a>\n                            </div>\n                        </div>\n\n                        <div class="right">\n                            <div class="fb-ad-profile-info">\n                                <div class="fb-ad-profile-img"></div>\n                                <div class="fb-page-business-name-text" data-auto="fb-page-business-name-text"></div>\n                            </div>\n\n                            <div class="fb-ad-with-image">\n                                <div class="upload-wk-img upload-fb-ad-img" data-auto="fb-ad-img-to-upload"></div>\n                                <div class="fb-ad-footer">\n                                    <div class="fb-ad-reach-text">106 people reacted</div>\n                                    <button class="fb-ad-boost-btn">Boost Post</button>\n                                </div>\n                            </div>\n                            <a href="https://www.facebook.com/business/help/547448218658012" target="_blank" class="wk-link with-caret has-accounts-option learn-how-to-boost-post-link">Learn how to boost your posts</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <button class="confirm-view-close-btn x-close-btn">X</button>\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(5),n(7),n(6),n(808),n(4),n(11),n(38),n(8)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d,u){"use strict";var h=new c({color:"blue",name:"NPSSurveyView"});return n.View.extend({el:".nps-footer-wrapper",WAIT_BEFORE_TRIGGER:{default:12e4,debug:2e4},WAIT_BEFORE_ENABLE:{default:6048e5,debug:6e4},WAIT_BEFORE_ASK_AGAIN:{default:7776e6,debug:3e5},npsFlag:"nps-sign-up",npsDebugFlag:"nps-debug",npsSubmitted:"nps-submit",npsSessionDismissed:"nps-session-dismissed",dismissCutoff:1,softLaunchPercentage:10,events:{"click .nps-score-btn":"handleScoreClick","click .nps-close-btn":"dismissNPSQuestion","click .nps-submit":"submitNPS"},initialize:function(){this.$el.html(u.mustacheRender(s)),this.$questionPanel=this.$el.find(".nps-question-panel"),this.$commentPanel=this.$el.find(".nps-comment-panel"),this.$npsComment=this.$commentPanel.find(".nps-score")},dismissNPSQuestion:function(){o.trackEvent("NPSQuestionDismiss",{contextString:this.app.registeredName},"nps:survey"),this.interval&&clearTimeout(this.interval),this._setDismissedFlag()<=this.dismissCutoff&&r.setUserFlag(this.npsFlag,Date.now()+this._getNPSAttibute(this.WAIT_BEFORE_ASK_AGAIN)).then(function(){this._resetDismissedFlag()}.bind(this)),this.hide()},_resetDismissedFlag:function(){try{if(!window.sessionStorage)return null;sessionStorage.setItem(this.npsSessionDismissed,0),r.setUserFlag(this.npsSessionDismissed,0)}catch(e){h.error("Error:NPS - Errored while resetting dismiss flag: ",e)}},_setDismissedFlag:function(){try{if(!window.sessionStorage)return null;var e=this._getDismissedFlag();return e++,sessionStorage.setItem(this.npsSessionDismissed,e),r.setUserFlag(this.npsSessionDismissed,e),e}catch(e){h.error("Error:NPS - Errored while setting dismiss flag: ",e)}},_getDismissedFlag:function(){return sessionStorage.getItem(this.npsSessionDismissed)||r.getFeature(this.npsSessionDismissed)||0},showNPSQuestion:function(e){var t=r.getFeature("nps-soft-launch"),n=r.getFeature(this.npsDebugFlag);t&&r.featuresLoaded().then(function(){var t=a.getProfile()||void 0;this.app=e,t&&t.userId&&(!a.isAutomatedTestUser()||n)&&this.checkNPSCriteria()}.bind(this))},checkNPSCriteria:function(){var e=r.getFeature(this.npsSubmitted);if(!e){var n=r.getFeature(this.npsFlag);Date.now()-n>this._getNPSAttibute(this.WAIT_BEFORE_ENABLE)&&!this.interval&&this._getDismissedFlag()<=this.dismissCutoff&&(this.interval=t.delay(this.show.bind(this),this._getNPSAttibute(this.WAIT_BEFORE_TRIGGER)))}e&&(Date.now()-e>this._getNPSAttibute(this.WAIT_BEFORE_ASK_AGAIN)&&r.setUserFlag(this.npsSubmitted,!1).then(function(){this.interval||(this.interval=t.delay(this.show.bind(this),this._getNPSAttibute(this.WAIT_BEFORE_TRIGGER)))}.bind(this)))},handleScoreClick:function(t){this.$scoreClicked&&this.$scoreClicked.removeClass("selected"),this.$scoreClicked=e(t.target),this.$scoreClicked.addClass("selected");var n=u.getString("nps-placeholder-label");this.$npsComment.attr("placeholder",n+this.$scoreClicked.text()),this.togglePanel()},togglePanel:function(){e(this.$commentPanel).removeClass("hide")},submitNPS:function(){this.hide();var e=i.defer(),t=this.$npsComment.val()||"",n=this.$scoreClicked.text();return a.isValid().then(function(){a.ajax({type:"POST",url:"/submitNPS",data:{score:n,comment:t.trim(),context:this.context},success:function(i,a,s){this._imsprofile=i,o.trackEvent("npsScoreSubmitted",{npsScore:n,npsComment:t.trim(),contextString:this.app.registeredName},"nps:survey"),r.setUserFlag(this.npsSubmitted,Date.now()).then(function(){e.resolve(i)}.bind(this))}.bind(this),error:function(t,n,i){e.reject({returnVal:t.responseText,status:n,httpStatus:t.status})}})}.bind(this),function(t){e.reject(t)}.bind(this)).done(),e.promise},_isInEditor:function(){return window.marvel._siteSection&&0===window.marvel._siteSection.indexOf("editor:")},show:function(){this._isInEditor()&&this._getDismissedFlag()<=this.dismissCutoff&&(this.context=window.marvel._siteSection,this.showing=!0,this.$el.removeClass("hide"),o.trackEvent("ShowNPSQuestion",{contextString:this.app.registeredName},"nps:survey"))},hide:function(){this.showing=!1,this.$el.addClass("hide"),this.$commentPanel.removeClass("hide"),this.$scoreClicked&&this.$scoreClicked.removeClass("selected"),this.interval=""},_getNPSAttibute:function(e){return r.getFeature(this.npsDebugFlag)?e.debug:e.default}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="nps-banner">\n    <button class="nps-close-btn"></button>\n    <div class="nps-header"><p class="mrvl-logo-nps" data-auto="brand-logo"></p></div>\n    <div class="nps-content">\n        <div class="nps-question-panel">\n            <div class="nps-question">\n            <h3>{{nps-question}}</h3>\n            </div>\n            <div class="nps-options">\n                <span class="left-label">{{nps-label-left}}</span>\n                <ul>\n                    <li><button class="nps-score-btn">0</button></li>\n                    <li><button class="nps-score-btn">1</button></li>\n                    <li><button class="nps-score-btn">2</button></li>\n                    <li><button class="nps-score-btn">3</button></li>\n                    <li><button class="nps-score-btn">4</button></li>\n                    <li><button class="nps-score-btn">5</button></li>\n                    <li><button class="nps-score-btn">6</button></li>\n                    <li><button class="nps-score-btn">7</button></li>\n                    <li><button class="nps-score-btn">8</button></li>\n                    <li><button class="nps-score-btn">9</button></li>\n                    <li><button class="nps-score-btn">10</button></li>\n                </ul>\n                <span class="right-label">{{nps-label-right}}</span>\n            </div>\n        </div>\n        <div class="nps-comment-panel hide">\n            <textarea class="nps-score"></textarea>\n            <button class="nps-submit">{{nps-submit-label}}</button>\n        </div>\n    <div class="nps-footer">\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(6),n(7),n(8),n(4),n(5),n(492),n(810)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c){"use strict";var d={body:{add:["pre-auth-no-header","cc-signin-view"],remove:["pre-auth-full-header"]},".mrvl-main-page":{add:["center-panel"]}};return n.View.extend({el:".cc-signin-overlay",ANALYTICS_CONTEXT:"loginPage",ANALYTICS_SIGNUP_CONTEXT:null,events:{"click .signUpWithAdobe":"handleAdobeSignUpClick","click .signInWithAdobeBtn":"handleAdobeSignInClick","click .signInWithFacebookBtn":"handleFBSignInClick","click .signInWithAppleBtn":"handleAppleSignInClick","click .signInWithGoogleBtn":"handleGoogleSignInClick","click .signInWithEduBtn":"handleEduSignInClick"},handleAdobeSignUpClick:function(){return r.trackLink("clickedAdobeIDSignup",{context:this.ANALYTICS_SIGNUP_CONTEXT||this.ANALYTICS_CONTEXT},"auth:landing",function(){i.setLoginMethod("directEmail"),i.signUpWithAdobeId()}.bind(this)),!1},handleAdobeSignInClick:function(){return r.trackLink("clickedAdobeIDSignIn",{context:this.ANALYTICS_CONTEXT},"auth:landing",function(){i.setLoginMethod("adobeID"),i.forceSignIn({signInType:"adobe"})}.bind(this)),!1},handleFBSignInClick:function(){return r.trackLink("clickedFBSignIn",{context:this.ANALYTICS_CONTEXT},"auth:landing",function(){i.setLoginMethod("facebookID"),i.forceSignIn({signInType:"facebook"})}.bind(this)),!1},handleAppleSignInClick:function(){return r.trackLink("clickedAppleSignIn",{context:this.ANALYTICS_CONTEXT},"auth:landing",function(){i.setLoginMethod("appleID");i.forceSignIn({signInType:"apple"})}.bind(this)),!1},handleGoogleSignInClick:function(){return r.trackLink("clickedGoogleSignIn",{context:this.ANALYTICS_CONTEXT},"auth:landing",function(){i.setLoginMethod("googleID"),i.forceSignIn({signInType:"google"})}.bind(this)),!1},handleEduSignInClick:function(){return r.trackLink("ClickedEDUSignin",{context:this.ANALYTICS_CONTEXT},"auth:landing",function(){i.setLoginMethod("adobeID:edu"),i.signInWithEduPage()}.bind(this)),!1},render:function(){this.pageBody$=e("body"),this.cssCache=l.setupAndCacheCss(d);var n=this.bgImage||new Image;n.src="/images/login-bg.jpg",n.onload=function(){var e="linear-gradient(rgba(0,0,0,0.2),rgba(0,0,0,0.2)),url("+n.src+")";t.delay(function(){this.$el.find(".cc-signin-bg-enhanced").css("background-image",e).addClass("show")}.bind(this),0)}.bind(this),this.bgImage=n;var i={sproutHost:a.sproutHost};return s.hasUnauthenticatedFeature("allow-cta-preview-on-login-page")&&this._addLoginCtaPreview(i),this.$el.html(o.mustacheRender(c,i)),t.delay(function(){window._loginWithErrorMessage&&(this.$el.find(".cc-signin-error-message").html('There is a problem with your account, please <a href="https://adobespark.zendesk.com/hc/en-us/categories/202688167-Adobe-Spark" target="_new">contact support</a>.<br>'+window._loginWithErrorMessage).removeClass("hide"),window._loginWithErrorMessage=null),this.$el.find(".cc-signin-dialog").addClass("show")}.bind(this),0),this},_addLoginCtaPreview:function(e){var t=i.getRedirectURI(),n=t.indexOf("/sp/");if(-1!=n){var r,o,a,s,l=t.substring(n+"/sp/".length),c=l.split("/"),d=l.toLowerCase().split("/");switch(d[0]){case"visualbrowse":case"npw":case"design-remix":case"remix":case"remix-gallery":case"design":r=d[1],o=c[2],a="design"==d[0]}if(r&&o){if(-1===["page","post","video","refapp"].indexOf(r)){if("promo"!==r)return;if(s=c[2]||"other",-1===["favoriting","other"].indexOf(s))return}var u={assetType:r,isEdit:!1};s||(a?"new"!==o.toLowerCase()&&(u.isEdit=!0):("new"!==o.toLowerCase()&&("page"===r?u.assetThumbUrl="https://spark.adobe.com/page/"+o+"/embed.jpg":"post"===r&&(u.assetThumbUrl="https://spark.adobe.com/assets/"+o+"/cover?size=400")),u.assetThumbUrl&&("page"===r&&(u.showThumbFooter=!0),u.hasImage=!0))),s?(u.isPromo=!0,e.ctaPreview=u,e.promoType=s):(u.isEdit||(u.isCreate=!0),e.ctaPreview=u,e.ctaAssetType=u.assetType)}}},remove:function(){return l.restoreCss(this.cssCache),this.cssCache=null,this.$el.empty(),this}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="cc-signin-bg-container">\n    <div class="cc-signin-bg mrvl-splash-bg"></div>\n    <img src="/images/login-bg-thumb.jpg"></img>\n    <div class="cc-signin-bg-enhanced mrvl-splash-bg"></div>\n</div>\n<div class="cc-signin-container" data-auto="login-container">\n    <div class="cc-signin-dialog {{#ctaPreview}}{{#hasImage}} has-cta-preview-image{{/hasImage}}{{^hasImage}}has-cta-preview-no-image{{/hasImage}}{{/ctaPreview}}">\n        <div class="cc-signin-dialog-container">\n\n            <a href="/about"><img class="cc-signin-site-logo" src="/images/SP_color@2x.svg"></a>\n            <h1 class="cc-signin-title">{{signin-dialog-welcome}}</h1>\n            {{#ctaPreview}}\n            <div class="cc-signin-dialog-cta-preview cc-signin-dialog-content-type-{{assetType}}{{#showThumbFooter}} show-thumb-footer{{/showThumbFooter}}">\n                {{#isCreate}}\n                <h2 class="cc-signin-dialog-cta-preview-h2">{{#fm}}signin-dialog-get-ready-to-create{{/fm}}</h2>\n                {{/isCreate}}\n                {{#isEdit}}\n                <h2 class="cc-signin-dialog-cta-preview-h2">{{#fm}}signin-dialog-get-ready-to-edit{{/fm}}</h2>\n                {{/isEdit}}\n                {{#isPromo}}\n                <h2 class="cc-signin-dialog-cta-preview-h2">{{#fm}}signin-dialog-get-ready-to-promo{{/fm}}</h2>\n                {{/isPromo}}\n                {{#hasImage}}\n                <div class="cc-signin-dialog-cta-preview-image" style="background-image:url(\'{{assetThumbUrl}}\')">\n                    <div class="cc-signin-dialog-cta-preview-image-icon"></div>\n                </div>\n                {{/hasImage}}\n            </div>\n            {{/ctaPreview}}\n            <div class="cc-signin-error-message hide"></div>\n\n            <div class="cc-signin-buttons">\n                <div class="cc-signin-dialog-col">\n                    <p><button type="button" class="signInWithGoogleBtn" data-auto="signInWithGoogleBtn">{{signin-dialog-google-button}}</button></p>\n                    <p><button type="button" class="signInWithFacebookBtn" data-auto="signInWithFacebookBtn">{{signin-dialog-facebook-button}}</button></p>\n                    <p><button type="button" class="signInWithAppleBtn" data-auto="signInWithAppleBtn">{{signin-dialog-apple-button}}</button></p>\n                    <p><button type="button" class="signUpWithAdobe signUpWithAdobeBtn" data-auto="signUpWithAdobeBtn">{{signin-dialog-email-button}}</button></p>\n                    <p><button type="button" class="ctaSignInSignUpLink signInWithAdobeBtn" data-auto="signInWithAdobeBtn">{{signin-dialog-adobeid-button}}</button></p>\n                </div>\n                <div class="cc-signin-dialog-col"></div>\n                <div class="cc-signin-dialog-col">\n                    <h4>{{signin-dialog-edu-title}}</h4>\n                    <p><button type="button" class="signInWithEdu signInWithEduBtn" data-auto="signInWithEduBtn">{{signin-dialog-edu-button}}</button></p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <ul class="cc-signin-about-links-container">\n        <li><a href="/about">{{signin-dialog-what-is-spark}}</a></li>\n        <li><a href="{{sproutHost}}make">{{signin-dialog-make}}</a></li>\n        <li><a href="{{sproutHost}}templates">{{signin-dialog-templates}}</a></li>\n    </ul>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(5),n(44)],void 0===(r=function(e,t,n,i,r,o){"use strict";return new(n.Model.extend({initialize:function(){this.deferredTrigger=i.defer(),o.isLoadedAndConsented().then(function(e){e&&this.onPrivacyConsentAccepted()}.bind(this)).done()},triggerCCPaidConfirmationTag:function(){r.featuresLoaded().then(function(){if(r.hasFeature("is-paid-user")&&!r.hasFeature("cc-paid-confirmation-tag-triggered"))return r.setUserFlag("cc-paid-confirmation-tag-triggered",!0).then(function(){this.deferredTrigger.promise.then((function(){var t=1e13*(Math.random()+"");e("body").append('<iframe src="https://1295336.fls.doubleclick.net/activityi;src=1295336;type=adobe000;cat=cc_pa00;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord='+t+'?" width="1" height="1" frameborder="0" style="display:none"></iframe>')})).done()}.bind(this))}.bind(this)).done()},triggerCCPaidLandingPageTag:function(){this._ccPaidLandingPageTagTriggered||(this._ccPaidLandingPageTagTriggered=!0,this.deferredTrigger.promise.then((function(){var t=1e13*(Math.random()+"");e("body").append('<iframe src="https://1295336.fls.doubleclick.net/activityi;src=1295336;type=adobe000;cat=cc_pa0;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord='+t+'?" width="1" height="1" frameborder="0" style="display:none"></iframe>')})).done())},onPrivacyConsentAccepted:function(){this.deferredTrigger.resolve()}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(5),n(6),n(7),n(813),n(817),n(22),n(20)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c){"use strict";return n.View.extend({workflow:"facebook-holiday-ad-design",defaultAnalytics:{shownSelectRemixFlow:"shownSelectRemixWorkflow"},events:{"click .x-close-btn":"handleCancel"},initialize:function(){marvel.events.on("selected-remix-design",this.hidePage.bind(this))},handleKeyup:function(e){e.keyCode===l.DOM_VK_ESCAPE&&this.hidePage()},hidePage:function(t){this.$el.addClass("hide"),e("body").removeClass("white-bg"),e(".mrvl-main-page").removeClass("hide"),o.removeContextData("workflow"),o.resetWorkflow(),marvel.events.off("selected-remix-design",this.hidePage.bind(this))},handleCancel:function(e){e.preventDefault(),this.hidePage(),window.marvel.navigate("projects",{trigger:!0})},render:function(){var t=this.model.get("analytics"),n=this.defaultAnalytics.shownSelectRemixFlow;return t&&t.shownSelectRemixFlow&&(n=t.shownSelectRemixFlow),this.$el.empty(),e(".mrvl-main-page").addClass("hide"),this.$el.removeClass("hide"),e("body").addClass("white-bg"),r.isValid().then(function(){i.featuresLoaded().then(function(){this.$el.html(c.render(s,{title:this.model.get("title"),subtitle:this.model.get("subtitle")})),o.addContextData({workflow:this.model.get("workflow")}),o.trackEvent(n,{workflow:this.model.get("workflow")},"onboarding:"+this.model.get("workflow")),this.remixView||(this.remixView=new a({category:this.model.get("category"),workflow:this.model.get("workflow"),layout:this.model.get("layout"),analytics:this.model.get("analytics")})),this.remixView.setElement(".remix-shell"),this.remixView.render()}.bind(this)).done()}.bind(this)).done(),this},remove:function(){marvel.events.off("selected-remix-design",this.hidePage.bind(this)),this.$el.addClass("hide"),e("body").removeClass("white-bg"),e(".mrvl-main-page").removeClass("hide")}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(5),n(7),n(814),n(816),n(214)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return n.View.extend({initialize:function(e){e&&e.app&&(this.app=e.app),e&&e.category&&(this.category=e.category),e&&e.workflow&&(this.workflow=e.workflow),e&&e.layout&&(this.layout=e.layout),e&&e.analytics&&(this.analytics=e.analytics)},createOption:function(e){var t=new n.Model(e);return e.viewObj=new o({model:t,workflow:this.workflow,analytics:this.analytics}),e.viewObj.$el},render:function(){return i.featuresLoaded().then(function(){this.$el.html(a.toString()),s.getCategoryFavorites(this.category).then(function(e){this.list$=this.$el.find(".remix-list"),this.list$.addClass("layout-3-up"),"featured_3up"!=this.layout&&this.$el.find(".featured-remix-list").addClass("hide"),t.each(e,function(e,t){e.image=e.thumbMedURI,"featured_3up"==this.layout?0===t?(e.image=e.imageURI,this.$el.find(".remix-1").append(this.createOption(e)),this.$el.find(".remix-1").addClass("p_65")):t<3?(this.$el.find(".remix-"+(t+1)).append(this.createOption(e)),this.$el.find(".remix-2-3").addClass("p_35")):this.list$.append(this.createOption(e)):(this.layout,this.list$.append(this.createOption(e)))}.bind(this))}.bind(this))}.bind(this)),this}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(6),n(5),n(7),n(815)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";return n.View.extend({tagName:"article",className:"remix-option",events:{"click .remix-thumb":"handleRemix"},initialize:function(e){this.workflow=null,e&&e.workflow&&(this.workflow=e.workflow),e&&e.analytics&&(this.analytics=e.analytics),this.render()},handleRemix:function(e){e.preventDefault(),r.featuresLoaded().then(function(){window.marvel.events.trigger("selected-remix-design");var e=this.analytics&&this.analytics.selectedRemixDesign||"selectedRemixDesign";if("theo"==this.model.get("type")){var t=this.workflow?"/"+this.workflow:"";marvel.navigate("#remix-gallery/post/"+this.model.get("alias")+t,{trigger:!0})}o.addContextData({workflow:this.workflow}),o.trackEvent(e,{workflow:this.workflow,alias:this.model.get("alias"),app:this.model.get("type"),context:"share"},"onboarding:"+this.workflow)}.bind(this)).done()},render:function(){return this.$el.html(a.toString()),this.$el.addClass("thumb"),this.thumb$=this.$el.find(".remix-thumb-img"),this.label$=this.$el.find(".remix-label"),this.thumb$.html('<img src = "'+this.model.get("image")+'" class="remix-img" />'),this.label$.text(this.model.get("title")),this}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports="<div class='remix-thumb'>\n    <div class='remix-thumb-img'></div>\n    <div class='remix-thumb-hover-menu'>\n        <button class=\"sprk-btn confirm-btn\">Remix the design</button>\n    </div>\n</div>\n"},function(e,t){e.exports='<div class="remix-grid">\n    <div class="featured-remix-list">\n        <div class="box remix-1"></div>\n        <div class="box remix-2-3">\n            <div class="box remix-2"></div>\n            <div class="box remix-3"></div>\n        </div>\n    </div>\n    <div class="remix-list"></div>\n</div>\n\n'},function(e,t){e.exports='<div class="lg-dialog-container" data-auto="mrkt-container">\n    <div class="lg-dialog">\n        <div class=lg-dialog-inner">\n            <div class ="dialog-header">\n                <h1 class="dialog-title">{{title}}</h1>\n                <h2 class="dialog-subtitle">{{subtitle}}</h2>\n            </div>\n\n            <div id="remix-shell" class="remix-shell"></div>\n        </div>\n    </div>\n    <button class="lg-dialog-close-btn x-close-btn">X</button>\n</div>\n'},function(e,t){e.exports='<div class="takeover-banner">\n    {{^closeBtnIsHidden}}\n        <button class="takeover-dismiss-btn"></button>\n    {{/closeBtnIsHidden}}\n    <div class="takeover-section">\n        {{#image}}<div class="takeover-logo" style="background-image: url(\'{{image}}\')"></div>{{/image}}\n        <div class="takeover-content" style="text-align:{{#image}}left{{/image}}{{^image}}center{{/image}};{{^image}}width: 500px;{{/image}};">\n            {{#title}}<div class="takeover-primary-text" style="text-align:{{#image}}left{{/image}}{{^image}}center{{/image}};">{{title}}</div>{{/title}}\n            {{#subtitle}}<div class="takeover-secondary-text" style="text-align:{{#image}}left{{/image}}{{^image}}center{{/image}};">{{subtitle}}</div>{{/subtitle}}\n            <div class="takeover-btns" style="{{^image}}margin: 20px auto; text-align: center;{{/image}};">\n                {{#primaryButtonTitle}}<button class="takeover-primary-btn">{{primaryButtonTitle}}</button>{{/primaryButtonTitle}}\n                {{#secondaryButtonTitle}}<button class="takeover-secondary-btn">{{secondaryButtonTitle}}</button> {{/secondaryButtonTitle}}\n            </div>\n        </div>\n    </div>\n</div>\n\n'},function(e,t){e.exports='<div class="takeover-banner takeover-banner-multi-col">\n    {{^closeBtnIsHidden}}\n    <button class="takeover-dismiss-btn"></button>\n    {{/closeBtnIsHidden}}\n    <div class="takeover-section">\n        <div class="takeover-content">\n            <a href="{{link_1}}" target="_blank">\n                <div class="takeover-col-image" style="background-image: url(\'{{image_1}}\');"></div>\n            </a>\n            <p class="takeover-subtext"><a href="{{link_1}}" target="_blank">{{title_1}}</a></p>\n        </div>\n        <div class="takeover-content">\n            <a href="{{link_2}}" target="_blank">\n                <div class="takeover-col-image" style="background-image: url(\'{{image_2}}\');"></div>\n            </a>\n            <p class="takeover-subtext"><a href="{{link_2}}" target="_blank">{{title_2}}</a></p>\n        </div>\n        <div class="takeover-content">\n            <a href="{{link_3}}" target="_blank">\n                <div class="takeover-col-image" style="background-image: url(\'{{image_3}}\');"></div>\n            </a>\n            <p class="takeover-subtext"><a href="{{link_3}}" target="_blank">{{title_3}}</a></p>\n        </div>\n    </div>\n</div>\n\n'},function(e,t){e.exports='<div class="takeover-banner takeover-banner-multi-col-with-cta">\n    {{^closeBtnIsHidden}}\n        <button class="takeover-dismiss-btn"></button>\n    {{/closeBtnIsHidden}}\n    <div class="takeover-section">\n        <div class="takeover-content">\n            <a href="{{link_1}}" target="_blank">\n                <div class="takeover-col-image" style="background-image: url(\'{{image_1}}\');"></div>\n            </a>\n            <p class="takeover-subtext"><a href="{{link_1}}" target="_blank">{{title_1}}</a></p>\n        </div>\n        <div class="takeover-content">\n            <a href="{{link_2}}" target="_blank">\n                <div class="takeover-col-image" style="background-image: url(\'{{image_2}}\');"></div>\n            </a>\n            <p class="takeover-subtext"><a href="{{link_2}}" target="_blank">{{title_2}}</a></p>\n        </div>\n        <div class="takeover-content">\n            <a href="{{link_3}}" target="_blank">\n                <div class="takeover-col-image" style="background-image: url(\'{{image_3}}\');"></div>\n            </a>\n            <p class="takeover-subtext"><a href="{{link_3}}" target="_blank">{{title_3}}</a></p>\n        </div>\n\n        <div class="takeover-content takeover-cta-content">\n            {{#title}}<div class="takeover-primary-text">{{title}}</div>{{/title}}\n            {{#subtitle}}<div class="takeover-secondary-text">{{subtitle}}</div>{{/subtitle}}\n        </div>\n    </div>\n</div>\n\n'},function(e,t){e.exports='<div class="takeover-banner takeover-banner-multi-col takeover-banner-multi-col-with-explainer">\n    {{^closeBtnIsHidden}}\n        <button class="takeover-dismiss-btn"></button>\n    {{/closeBtnIsHidden}}\n    <div class="takeover-section">\n        <div class="takeover-content">\n            <p class="takeover-explainer-text">{{explainer}}</p>\n        </div>\n        <div class="takeover-content">\n            <a href="{{link_1}}" target="_blank">\n                <div class="takeover-col-image" style="background-image: url(\'{{image_1}}\');"></div>\n            </a>\n            <p class="takeover-subtext"><a href="{{link_1}}" target="_blank">{{title_1}}</a></p>\n        </div>\n        <div class="takeover-content">\n            <a href="{{link_2}}" target="_blank">\n                <div class="takeover-col-image" style="background-image: url(\'{{image_2}}\');"></div>\n            </a>\n            <p class="takeover-subtext"><a href="{{link_2}}" target="_blank">{{title_2}}</a></p>\n        </div>\n    </div>\n</div>\n\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(20),n(492),n(65),n(823),n(828),n(494)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c){"use strict";var d={body:{add:["creative-high"]}};return n.View.extend({events:{"click .max-yearbook-day-dropdown-btn":"_handleDayDropdownBtn","click .max-yearbook-day-dropdown-option":"_handleDayDropdownOption"},initialize:function(){t.bindAll(this,t.functionsIn(this)),this.model||(this.model=new n.Model),this.selectedDate=s.maxDates[0],this.model.set("dayDropdownData",s.getDropdownData())},render:function(){return this._setUpPlatform(),this.$el.html(r.to_html(l,this.model.toJSON())),this.cssCache=o.setupAndCacheCss(d),this.dayDropdownBtn$=this.$el.find(".max-yearbook-day-dropdown-btn"),this.dayDropdownContent$=this.$el.find(".max-yearbook-day-dropdown-content"),this.dayDropdownOptions$=this.$el.find(".max-yearbook-day-dropdown-option"),this.loading$=this.$el.find(".loading-section"),this.templatesView$=this.$el.find(".templates-section"),this._templatesView=s.getTemplatesView(this.templatesView$),this._renderTemplatesView(),this},remove:function(){o.restoreCss(this.cssCache),this.cssCache=null,this._templatesView.remove(),this.$el.empty()},_renderTemplatesView:function(){s.getTemplatesForDate(this.selectedDate).then(function(e){this._templatesView.model.set("assets",e),this._templatesView.render(),this.loading$.hide(),this.templatesView$.show()}.bind(this),function(e){marvel.logger.error("no assets for date"+this.selectedDate,e),this._templatesView.model.set("assets",null),this._templatesView.render(),this.loading$.hide(),this.templatesView$.show()}.bind(this))},_handleDayDropdownBtn:function(){this.dayDropdownContent$.slideToggle(200),this.dayDropdownBtn$.toggleClass("active")},_handleDayDropdownOption:function(n){var i=e(n.target),r=i.data("day"),o=i.data("date");t.delay(function(){this.dayDropdownBtn$.text("Day "+r),this.dayDropdownContent$.slideToggle(200),this.dayDropdownBtn$.toggleClass("active")}.bind(this),100),o!=this.selectedDate&&(this.selectedDate=o,this._renderTemplatesView())},_setUpPlatform:function(){var e=a.getPlatformInfo();this.model.set("platformInfo",e)}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(2),n(3),n(4),n(824),n(825)],void 0===(r=function(e,t,n,i,r,o){"use strict";return new(t.Model.extend({_templatesByDate:{},_dayDropdownData:[],initialize:function(){this.maxDates=["2018-10-15","2018-10-16","2018-10-17"],this.cpTag="actmax",this.cpSort="date_desc",e.each(this.maxDates,function(t){this._templatesByDate[t]={date:this._getDateObject(t),assets:[]};var n=e.indexOf(this.maxDates,t)+1;this._dayDropdownData.push({date:t,day:n})}.bind(this))},getDropdownData:function(){return this._dayDropdownData},getTemplatesForDate:function(t){var i=n.defer();return this._allTemplatesLoaded().then(function(){var n=this._templatesByDate[t];e.isEmpty(n.assets)?i.reject(new Error("no templates available for date "+t)):i.resolve(n.assets)}.bind(this),function(e){i.reject(e)}.bind(this)).done(),i.promise},getTemplatesView:function(e){return this._templatesView||(this._templatesView=new o({el:e}),this._fetchTemplatesByTag({tag:this.cpTag,sort:this.cpSort})),this._templatesView},_allTemplatesLoaded:function(){return this._allTemplatesLoadedDefer||(this._allTemplatesLoadedDefer=n.defer()),this._allTemplatesLoadedDefer.promise},_fetchTemplatesByTag:function(t){this._allTemplatesLoadedDefer=this._allTemplatesLoadedDefer||n.defer(),r.fetchByTag(t).then(function(n){var i,r=n.assets,o=n._links.next?n._links.next.href:null;if(!e.isEmpty(r)&&(this._saveCpAssets(r),i=e.last(r),this._shouldGetMoreTemplates(i.published)&&o))return t.next=o,void this._fetchTemplatesByTag(t);this._allTemplatesLoadedDefer.resolve()}.bind(this),function(e){this._allTemplatesLoadedDefer.reject(new Error("no template assets for CP options "+JSON.stringify(t)))}.bind(this))},_saveCpAssets:function(t){e.each(t,function(t){if(t.published=this._getPDTDateString(t.published),e.indexOf(this.maxDates,t.published)>=0){var n=this._templatesByDate[t.published];this._templatesView.prepareAssetForGrid(t),n.assets.push(t)}}.bind(this))},_getDateObject:function(e){var t=e.split("-");return 3!==t.length?null:new Date(Date.UTC(t[0],t[1]-1,t[2]))},_getPDTDateString:function(e){var t=new Date(e),n=t.getUTCHours();return t.setUTCHours(n-7),t.toJSON().split("T")[0]},_shouldGetMoreTemplates:function(t){var n=e.head(this.maxDates),i=e.last(this.maxDates),r=this._templatesByDate[n].date,o=this._templatesByDate[i].date,a=this._getDateObject(t);return a-o>0||a-r>=0}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2)],void 0===(r=function(e,t,n,i){"use strict";return new(i.Model.extend({KEY:"sparkWebNpw",_categories:[],deferLoading:null,getCategories:function(){return this.loaded().then(function(e){return e}.bind(this))},getExamplesForCategory:function(e){return this.loaded().then(function(){return this.fetchByCategory(e).then(function(e){return e}.bind(this))}.bind(this))},fetch:function(){this._categories=[];var n="/post-examples/categories/"+this.KEY;e.ajax({method:"GET",url:n,success:function(e){t.isArray(e)&&e.length&&(this._categories=e),this.deferLoading.resolve(this._categories)}.bind(this),error:function(e){window.marvel.logger.error("[post-api-controller] Failed to load categories"+e.status,e),this.deferLoading.reject(e.status)}.bind(this)})},loaded:function(){return this.deferLoading||(this.deferLoading=n.defer(),this.fetch()),this.deferLoading.promise},fetchByCategory:function(i){if(!t.isEmpty(i)&&!t.isEmpty(this._categories)&&!t.isUndefined(this._categories[i]))return n.resolve(this._categories[i]);var r=n.defer();return e.ajax({method:"GET",url:"/post-examples/examples/"+i,success:function(e){t.isArray(e)&&e.length?(this._categories[i]=e,r.resolve(e)):r.resolve([])}.bind(this),error:function(e){window.marvel.logger.error("[post-api-controller] Failed to load examples for "+i+" "+e.status,e),r.reject(e.status)}.bind(this)}),r.promise},fetchByTag:function(i){var r,o=n.defer(),a=i.tag,s=i.sort?"&sort="+i.sort:"";return r=i.next?i.next:"/api/post/experimental/templates?tag="+a+s,e.ajax({method:"GET",url:r,success:function(e){e&&t.isObject(e)&&t.isArray(e.assets)?o.resolve(e):o.resolve({})}.bind(this),error:function(e){window.marvel.logger.error("[post-api-controller] Failed to load templates by searching for tag"+a+" "+e.status,e),o.reject(e.status)}.bind(this)}),o.promise}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(20),n(65),n(826),n(494)],void 0===(r=function(e,t,n,i,r,o,a,s){"use strict";return n.View.extend({events:{"click .template-image-overlay-edit-template":"_handleEditTemplate","click .template-image-overlay-download":"_handleDownloadTemplate"},gridItemSize:294,initialize:function(e){t.bindAll(this,t.functionsIn(this)),this.model||(this.model=new n.Model),t.isArray(this.model.get("assets"))||this.model.set("assets",[]),this._platformInfo=o.getPlatformInfo()},render:function(){this.$el.html(r.to_html(a,this.model.toJSON()))},prepareAssetForGrid:function(e){var t=e.templatedImgHref;t&&(t=(t=t.replace("{format}","jpg")).replace("{dimension}","width"),e.downloadLink=t.replace("{size}",e.width),e.backgroundImage=t.replace("{size}",this.gridItemSize))},remove:function(){this.$el.empty()},_handleEditTemplate:function(t){var n,i=e(t.target).data("id");n=this._platformInfo.desktop?"https://spark.adobe.com/sp/remix/post/"+i:"https://spark.adobe.com/post/"+i,window.open(n,"_blank")},_handleDownloadTemplate:function(t){var n,i,r,o=e(t.target);n=o.data("link"),i="CreativeHighYearbookPhoto",(r=new XMLHttpRequest).open("GET",n,!0),r.responseType="blob",r.onload=function(){var e=(window.URL||window.webkitURL).createObjectURL(this.response),t=document.createElement("a");t.href=e,t.download=i,document.body.appendChild(t),t.click(),document.body.removeChild(t)},r.send()}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='{{^assets}}\n    <div class="error animateOpacity">No templates at this time. Try again later!</div>\n{{/assets}}\n{{#assets}}\n    {{#id}}\n        <div class="template-item animateOpacity">\n            <div class="template-image" style="background-image:url({{backgroundImage}})">\n                <div class="template-image-overlay">\n                    <div class="template-image-overlay-circle">\n                        <div class="template-image-overlay-download" data-link={{downloadLink}}></div>\n                    </div>\n                    <div class="template-image-overlay-edit-template" data-id={{id}}>Edit this template</div>\n                </div>\n            </div>\n        </div>\n    {{/id}}\n{{/assets}}\n'},function(e,t,n){(e.exports=n(34)(!1)).push([e.i,'body.creative-high{min-width:auto}.max-yearbook-page{background-color:#fff;background-image:url(/images/max-yearbook/background_stars@2x.png);background-size:100% auto;position:absolute;min-height:100%;width:100%}@media (max-width:1023px){.max-yearbook-page{background-size:auto}}.max-yearbook-page .max-yearbook-hero-holder{width:100%;position:relative}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-sp-image{margin:0 auto 38px;display:block;max-width:80px;padding-top:80px}@media (max-width:767px){.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-sp-image{margin-bottom:20px}}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-creative-image{width:582px;margin:0 auto;display:block;height:279.54px}@media (max-width:767px){.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-creative-image{width:90%;height:200px}}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-giveaway-description{color:#fff;font-family:adobe-clean,sans-serif;font-size:24px;line-height:32px;text-align:center;font-weight:400;margin:58px auto;padding:0 9%}@media (max-width:767px){.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-giveaway-description{font-size:20px;margin:30px auto}}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-giveaway-description .max-yearbook-giveaway-text{font-weight:inherit}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-giveaway-description .social-tag{color:#ffda00;font-weight:400}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-giveaway-description .rules-link{color:#42b9eb;font-weight:inherit;text-decoration:none}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-day-dropdown{position:relative;text-align:center;z-index:103;margin-top:30px}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-day-title{font-family:adobe-clean,sans-serif;cursor:pointer;display:inline-block;background-image:url(/images/btn_down.png);background-position:calc(100% - 20px) calc(50% + 2px);background-size:10px 6px;background-repeat:no-repeat;min-width:90px;height:44px;word-wrap:normal;padding-right:50px;margin:0;color:#fff;font-size:18px;font-weight:700;text-align:left;text-indent:20px;outline:none;border:2px solid #fff;border-radius:40px;line-height:40px;text-decoration:none;transition:background-color .5s}.max-yearbook-page .max-yearbook-hero-holder .active{background-color:#fff;color:#35414c}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-day-dropdown-content{position:absolute;z-index:400;left:50%;top:100%;-webkit-transform:translateX(-50%);transform:translateX(-50%);z-index:103;background-color:#fff;border-radius:5px;padding:5px 0;width:110px;display:block;text-align:left;margin-top:3px;display:none}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-day-dropdown-content .max-yearbook-day-dropdown-option{padding:0;cursor:pointer;width:100%;display:block;line-height:33px;background-size:20px 20px;background-position:10px;background-repeat:no-repeat;padding-left:16px;height:33px;font-size:1.15em;color:#35414c;font-weight:700;text-decoration:none}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-day-dropdown-content .max-yearbook-day-dropdown-option:hover{background-color:#f2f4f5}.max-yearbook-page .max-yearbook-hero-holder .max-yearbook-day-dropdown-content .max-yearbook-day-dropdown-option.selected{background-color:#fff;border-radius:3px;color:#35414c}.max-yearbook-page .loading-section{height:100%;margin:0 7%;max-width:1610px;-webkit-flex-wrap:wrap;flex-wrap:wrap}@media (max-width:767px){.max-yearbook-page .loading-section{margin-top:10px}}@-webkit-keyframes waveAnimate{0%{background-position:-468px 0}to{background-position:468px 0}}@keyframes waveAnimate{0%{background-position:-468px 0}to{background-position:468px 0}}.max-yearbook-page .loading-section .loading-item{display:-webkit-flex;display:flex;min-width:260px;max-width:294px;width:19%;min-height:260px;max-height:294px;-webkit-flex-direction:column;flex-direction:column;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-align-items:center;align-items:center;margin:40px 14px;font-size:15px;text-align:center;font-weight:400;border-radius:4px;background:hsla(0,0%,100%,.25)}@media (max-width:767px){.max-yearbook-page .loading-section .loading-item{min-width:170px;min-height:170px;max-height:170px;margin:5px;margin-top:10px}}.max-yearbook-page .loading-section .loading-item.animated-background{-webkit-animation-duration:1.5s;animation-duration:1.5s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:waveAnimate;animation-name:waveAnimate;-webkit-animation-timing-function:cubic-bezier(.39,.575,.565,1);animation-timing-function:cubic-bezier(.39,.575,.565,1);background:linear-gradient(90deg,hsla(0,0%,100%,.1) 10%,transparent 18%,hsla(0,0%,100%,.1) 33%);background-size:800px 104px;height:100px;position:relative}.max-yearbook-page .templates-section{height:100%;-webkit-flex-wrap:wrap;flex-wrap:wrap;margin:0 7%;max-width:1610px}@media (max-width:767px){.max-yearbook-page .templates-section{margin-top:10px}}.max-yearbook-page .templates-section .error{color:#fff;margin:7%;font-size:33px;font-weight:700}.max-yearbook-page .templates-section .template-item{display:-webkit-flex;display:flex;min-width:260px;max-width:294px;width:19%;min-height:260px;max-height:294px;-webkit-flex-direction:column;flex-direction:column;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-align-items:center;align-items:center;margin:40px 14px;font-size:15px;text-align:center;font-weight:400;border-radius:4px}@media (max-width:767px){.max-yearbook-page .templates-section .template-item{min-width:170px;min-height:170px;max-height:170px;margin:5px;margin-top:10px}}.max-yearbook-page .templates-section .template-item:before{content:"";float:left;padding-top:100%}.max-yearbook-page .templates-section .template-item .template-image{display:inline-block;width:100%;height:100%;background-repeat:no-repeat;background-size:cover}.max-yearbook-page .templates-section .template-item .template-image:before{content:"";float:left;padding-top:100%}.max-yearbook-page .templates-section .template-item .template-image-overlay{display:inline-block;margin-top:0;content:"\\A";position:relative;width:100%;height:100%;background:rgba(0,0,0,.6);opacity:0;transition:all .4s}.max-yearbook-page .templates-section .template-item .template-image-overlay:before{content:"";float:left;padding-top:100%}.max-yearbook-page .templates-section .template-item .template-image-overlay:hover{opacity:1}.max-yearbook-page .templates-section .template-item .template-image-overlay .template-image-overlay-circle{margin:28% auto 18px;cursor:pointer;border-radius:50%;background:#fff;width:57px;height:57px}@media (max-width:767px){.max-yearbook-page .templates-section .template-item .template-image-overlay .template-image-overlay-circle{margin-top:20%}}.max-yearbook-page .templates-section .template-item .template-image-overlay .template-image-overlay-download{background-image:url(/images/max-yearbook/Download_32@1x.svg);background-size:24px 24px;background-repeat:no-repeat;background-position:50%;height:100%;width:100%}.max-yearbook-page .templates-section .template-item .template-image-overlay .template-image-overlay-edit-template{font-family:adobe-clean,sans-serif;background-color:#fff;cursor:pointer;display:inline-block;min-width:150px;height:39px;word-wrap:normal;margin:0;color:#35414c;font-size:15px;font-weight:700;text-align:center;border-radius:40px;line-height:39px;text-decoration:none}.max-yearbook-page .templates-section .animateOpacity{position:relative;-webkit-animation-name:animateOpacity;animation-name:animateOpacity;-webkit-animation-duration:1s;animation-duration:1s}@-webkit-keyframes animateOpacity{0%{opacity:0}to{opacity:1}}@keyframes animateOpacity{0%{opacity:0}to{opacity:1}}@media screen and (max-width:1339px){.max-yearbook-page div.loading-item:nth-last-child(-n+2){opacity:0}}@media screen and (max-width:1872px){.max-yearbook-page div.loading-item:nth-last-child(-n+1){opacity:0}}@media screen and (min-width:1920px){.max-yearbook-page .loading-section,.max-yearbook-page .templates-section{margin:0 auto}}',""])},function(e,t){e.exports='<div class="max-yearbook-page {{platformInfo.cssString}}">\n    <div class="max-yearbook-hero-holder">\n        <img class ="max-yearbook-sp-image" src=\'/images/max-yearbook/MAX_Sp@2x.png\'/>\n        <img class="max-yearbook-creative-image" src="/images/max-yearbook/CreativeHigh.png"/>\n        <div class="max-yearbook-giveaway-description">\n            <div class="max-yearbook-giveaway-text">Share your yearbook photo on the social network of your choice for a chance to win an all-access Masterclass Pass and a Creative Cloud subscription.</div>\n            <div class="max-yearbook-giveaway-text">Tag <span class="social-tag">@adobespark</span> and include <span class="social-tag">#creativehigh #adobemaxcontest</span> in your caption to be entered to win.</div>\n            <a class="rules-link" href="/pdfs/CREATIVEHIGHSWEEPSTAKES.pdf" target="_blank">Giveaway rules</a>\n        </div>\n        <div class="max-yearbook-day-dropdown max-yearbook-day-index-dropdown">\n            <div class="max-yearbook-day-title max-yearbook-day-dropdown-btn" data-auto="max-yearbook-day-title">Day 1</div>\n            <div class="max-yearbook-day-dropdown-content">\n                {{#dayDropdownData}}\n                    <div class="max-yearbook-day-dropdown-option" data-day={{day}} data-date={{date}}>Day {{day}}</div>\n                {{/dayDropdownData}}\n            </div>\n        </div>\n    </div>\n\n    <div class="loading-section flex-horizontal">\n        <div class="loading-item animated-background"></div>\n        <div class="loading-item animated-background"></div>\n        <div class="loading-item animated-background"></div>\n        <div class="loading-item animated-background"></div>\n        <div class="loading-item animated-background"></div>\n    </div>\n    <div class="templates-section flex-horizontal"></div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(3),n(2),n(5),n(7),n(273),n(11),n(830)],void 0===(r=function(e,t,n,i,r,o,a,s,l){"use strict";var c=new s({color:"red",name:"ContentCards Controller"});return new(i.View.extend({el:".appboy-content-cards",refreshReadyDefer:n.defer(),REFRESH_CARD_FREQUENCY:{debug:"3000",default:"60000"},contentCardsDebugFlag:"appboy-content-cards-debug",events:{"click .appboy-content-cards-icon":"_handleContentCardsIconClick","click .appboy-content-cards-overlay":"_handleOverlayClick","click .ab-close-button":"_handleCloseBtnClick","click .ab-image-area":"_handleImageClick"},setup:function(){a.isReady().then(function(n){if(n){this._$header=e("body").find(".mrvl-header"),this._$contentCardsView=this.$el.find(".appboy-content-cards-view"),this._$contentCardsIcon=this.$el.find(".appboy-content-cards-icon"),this._$contentCardsOverlay=this.$el.find(".appboy-content-cards-overlay"),this._$header.addClass("content-cards-enabled");var i={cardClickHandler:this._handleCardClick.bind(this),cardDismissHandler:this._handleCloseBtnClick.bind(this)};a.subscribeToCardFeedUpdates(i);var r={defer:this.refreshReadyDefer,delayCheck:2e3};a.requestCardsRefresh(r),this.refresh=t.throttle(this._refreshCards.bind(this),this._getAttr(this.REFRESH_CARD_FREQUENCY)),this._interval||(this._interval=window.setInterval(this.refresh.bind(this),this._getAttr(this.REFRESH_CARD_FREQUENCY))),this._refreshCards(),t.defer(function(){this._$contentCardsIcon.removeClass("hide")}.bind(this))}else c.warn("[content-cards-view] appboy failed to initialize")}.bind(this),(function(e){c.warn("[content-cards-view] appboy loading failed : "+e)})).done()},_getAttr:function(e){return e?!!r.getFeature(this.contentCardsDebugFlag)?e.debug:e.default:void c.warn("[content-cards-view] attribute object is empty, pass in a valid attribute to fetch")},_handleContentCardsIconClick:function(e){"showing"===this._state?(this._state="hidden",this.$el.removeClass("content-cards-showing").addClass("content-cards-hidden"),this._$contentCardsOverlay.addClass("hide"),o.trackEvent("content-cards:feedClosed",{},"organizer:content-cards"),this._hideContentCards()):(this._state="showing",this.$el.removeClass("content-cards-hidden").addClass("content-cards-showing"),this._$contentCardsOverlay.removeClass("hide"),o.trackEvent("content-cards:feedOpened",{},"organizer:content-cards"),this._showContentCards(this._$contentCardsView))},_showContentCards:function(e){a.showContentCards(e,(function(e){return e.filter((function(e){return"whats-new"===e.extras.type||!e.extras.type}))}))},_hideContentCards:function(){a.hideContentCards(),this.refresh()},_handleOverlayClick:function(e){this._handleContentCardsIconClick(e)},_handleCloseBtnClick:function(e){var t={contextualData1:"card-id:"+(e&&e.id||"none"),contextualData2:"card-title:"+(e&&e.title||"none"),contextualData3:"card-url:"+(e&&e.url||"none")};o.trackEvent("content-cards:cardDismissed",t,"organizer:content-cards")},_handleImageClick:function(n){var i=a.getCachedContentCards().cards,r=e(n.target).closest(".ab-card").data("ab-card-id"),o=t.findIndex(i,(function(e){return e.id==r}));-1!=o&&this._handleCardClick(i[o],!0)},_handleCardClick:function(e,t){t&&(a.logCardClick(e,!0),e.url&&window.open(e.url,"_blank"));var n={contextualData1:"card-id:"+(e&&e.id||"none"),contextualData2:"card-title:"+(e&&e.title||"none"),contextualData3:"card-url:"+(e&&e.url||"none")};return o.trackEvent("content-cards:cardSelected",n,"organizer:content-cards"),!1},_filterCards:function(e){return!("whats-new"!==e.extras.type&&e.extras.type||e.viewed)},_refreshCards:function(){this.refreshReadyDefer.promise.then(function(){a.getAsyncUnviewedCardCount({filterFn:this._filterCards}).then(function(e){e&&e>0?this._$contentCardsIcon.addClass("unread").removeClass("read"):("showing"!=this._state&&a.requestCardsRefresh(),this._$contentCardsIcon.addClass("read").removeClass("unread"))}.bind(this)).catch((function(e){c.error("[content-cards-view] Errored out while attempting to get unread card count -"+e)})).done()}.bind(this)).catch((function(e){c.error("[content-cards-view] Errored out while waiting on content-cards refresh - "+e)})).done()}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i=n(831);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(34)(!1)).push([e.i,"@-webkit-keyframes pulsz{0%{-webkit-transform:scaleX(1);transform:scaleX(1)}50%{-webkit-transform:scale3d(1.2,1.2,1.2);transform:scale3d(1.2,1.2,1.2)}to{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes pulsz{0%{-webkit-transform:scaleX(1);transform:scaleX(1)}50%{-webkit-transform:scale3d(1.2,1.2,1.2);transform:scale3d(1.2,1.2,1.2)}to{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes appearNF{0%{-webkit-transform:scale(1.5);transform:scale(1.5);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:1}}@keyframes appearNF{0%{-webkit-transform:scale(1.5);transform:scale(1.5);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:1}}@-webkit-keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes appear{0%{opacity:0}to{opacity:1}}@-webkit-keyframes slideInDown{0%{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}@keyframes slideInDown{0%{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);opacity:0}to{-webkit-transform:translateZ(0);transform:translateZ(0);opacity:1}}.appboy-content-cards-icon{background-image:url(/images/content-cards-notify-all-read.svg);right:155px;top:22px;position:absolute;height:23px;width:23px;background-position:50% 50%;background-size:contain;background-repeat:no-repeat;cursor:pointer;-webkit-animation-name:appearNF;animation-name:appearNF;-webkit-animation-duration:1s;animation-duration:1s}.appboy-content-cards-icon:hover{background-image:url(/images/content-cards-notify-all-read-hover.svg)}.appboy-content-cards-icon.unread{background-image:url(/images/content-cards-notify-unread.svg);-webkit-animation-name:pulsz;animation-name:pulsz;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-iteration-count:2;animation-iteration-count:2}.appboy-content-cards-icon.unread:hover{background-image:url(/images/content-cards-notify-unread-hover.svg)}.appboy-content-cards.content-cards-showing .appboy-content-cards-overlay{position:fixed;top:0;left:0;height:100%;width:100%;z-index:200;cursor:pointer;display:none;background-color:hsla(0,0%,100%,0);display:block}.appboy-content-cards.content-cards-showing .appboy-content-cards-icon{z-index:201}.appboy-content-cards-view{right:0;position:fixed;top:66px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;max-height:calc(100vh - 66px - 32px);overflow-y:auto;overflow-x:hidden;z-index:201}.appboy-content-cards-view .ab-feed{top:66px;z-index:100;font-family:adobe-clean,sans-serif;border-radius:0;overflow-x:hidden;width:500px}.appboy-content-cards-view .ab-feed .ab-feed-buttons-wrapper{display:none}.appboy-content-cards-view .ab-feed .ab-feed-body{padding:0;border:1px solid #dce0e3}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-no-cards-message{margin-top:20px;font-weight:400;min-height:294px}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card{border:none;border-bottom:2px solid #dce0e3;border-radius:0;margin-bottom:8px;margin-left:8px;margin-right:8px;width:inherit}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card:first-child{margin-top:8px}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card .ab-card-body.ab-title a,.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card .ab-title a{font-weight:700;font-size:18px}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card.ab-classic-card{padding-top:15px;padding-bottom:15px}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card.ab-classic-card .ab-unread-indicator{position:absolute;background:url(/images/content-cards-indicator-read.svg) 10px 5px/50px no-repeat;top:0;width:100%;height:40px;margin:unset}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card.ab-classic-card .ab-unread-indicator:not(.read){background:url(/images/content-cards-indicator-unread.svg) 10px 5px/50px no-repeat}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card .ab-close-button{background:url(/images/content-cards-close-btn.svg) 50% 50%/10px no-repeat;background-size:20px;visibility:visible;opacity:1;border-radius:0;font-size:0;width:40px;height:40px;float:none;content:none;transition:none;margin:unset;top:0;right:0}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card .ab-close-button:hover{background-image:url(/images/content-cards-close-btn-hover.svg);transition:none}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card .ab-card-body.ab-description,.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card .ab-description{font-size:14px;font-weight:400}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card .ab-card-body.ab-description .ab-url-area a,.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card .ab-description .ab-url-area a{font-weight:700;font-size:15px}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card .ab-unread-indicator{position:absolute;background:url(/images/content-cards-indicator-read.svg) 10px 50%/50px no-repeat,linear-gradient(180deg,rgba(36,44,51,.2) 0,hsla(0,0%,100%,0));top:0;width:100%;height:40px;margin:unset}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card .ab-unread-indicator:not(.read){background:url(/images/content-cards-indicator-unread.svg) 10px 50%/50px no-repeat,linear-gradient(180deg,rgba(36,44,51,.2) 0,hsla(0,0%,100%,0))}.appboy-content-cards-view .ab-feed .ab-feed-body .ab-card .ab-pinned-indicator{position:absolute;background:url(/images/content-cards-indicator-pinned.svg) 61px 50%/26px no-repeat;top:0;left:0;width:100%;height:40px;z-index:1;border-style:none;margin:unset}",""])},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(8),n(3),n(53),n(5)],void 0===(r=function(e,t,n,i,r,o,a){"use strict";return new(n.Model.extend({UPDATE_FREQUENCY:6e4,DISPLAY_SETTINGS_UPDATE_FREQUENCY:6e5,SITE_BUMPER_STRING:"__SITE__",DEFAULT_PREFIX:"bumper-default",initialize:function(e){t.bindAll(this,t.functionsIn(this)),this._clearSettings()},enable:function(){this._updateLocationsFromServer(),this._intervalID=window.setInterval(this._updateLocationsFromServer,this.UPDATE_FREQUENCY)},disable:function(){this._clearSettings(),this._intervalID&&window.clearInterval(this._intervalID)},showAppBumper:function(e){var n=t.isObject(e)?e.registeredName:e;return a.hasFeature("test-app-bumper-"+n)||this._bumperedThisSession[n]},shouldRefreshApp:function(e){var n=t.isObject(e)?e.registeredName:e;return!a.hasFeature("test-app-bumper-"+n)&&this._bumperedThisSession[n]&&-1===this._settings.locations.indexOf(n)},getCurrentSettingsForApp:function(e,n){var i=t.isObject(e)?e.registeredName:e;return this._getCurrentSettingsForLocation(i,n)},getCurrentSettingsForSite:function(){return this._getCurrentSettingsForLocation(this.SITE_BUMPER_STRING,"Adobe Spark")},_getCurrentSettingsForLocation:function(e,t){var n=this._settings.displaySettings[e],i=!0;if(n)if(n.nextDisplay)i=Date.now()>=n.nextDisplay.loadTime;else if(n.updateDefer)return n.updateDefer;return i?this._updateSettingsForLocation(e,t):r(n)},showSiteBumper:function(){return this._bumperedThisSession[this.SITE_BUMPER_STRING]},shouldRefreshSite:function(){return this._bumperedThisSession[this.SITE_BUMPER_STRING]&&-1===this._settings.locations.indexOf(this.SITE_BUMPER_STRING)},_clearSettings:function(){this._settings={locations:[],displaySettings:{}},this._bumperedThisSession={}},_locationIsSite:function(e){return e===this.SITE_BUMPER_STRING},_makeStringKeysForLocationWithPrefix:function(e,t){var n=this._locationIsSite(e)?"-site":"-editor";return{title:(t=t||this.DEFAULT_PREFIX)+n+"-title",body:t+n+"-body"}},_updateSettingsDisplayNameAndLocalize:function(e,n){t.each(e,(function(t,r){e[r]=i.formatMessage(t,{name:n})}))},_doRefreshCheck:function(){if(this._showingBumperForLocation){var e=this._settings.displaySettings[this._showingBumperForLocation];e&&e.nextDisplay&&Date.now()>=e.nextDisplay.loadTime&&this._updateSettingsForLocation(this._showingBumperForLocation,e.nextDisplay.displayName).then(function(e){marvel.events.trigger("spark-bumper-location-settings-updated",{location:this._showingBumperForLocation})}.bind(this))}},_updateSettingsForLocation:function(t,n){var i,o=this._settings.displaySettings[t];if(o){if(o.updateDefer)return o.updateDefer}else o={},this._settings.displaySettings[t]=o;return o.updateDefer=r.defer(),e.ajax({url:"/ipa/bumper-settings",data:{location:t},success:function(e,n,r){var o=e&&e.settings&&e.settings.bumperTypePrefix||this.DEFAULT_PREFIX;i=this._makeStringKeysForLocationWithPrefix(t,o)}.bind(this),error:function(e,n,r){this._handleRefreshFailure(r,"settings:"+t),i=this._makeStringKeysForLocationWithPrefix(t)}.bind(this),complete:function(e,r){this._updateSettingsDisplayNameAndLocalize(i,n),i.title&&i.body||(marvel.logger.warn("Could not parse bumper settings from db, settings object: "+JSON.stringify(i)),i=this._makeStringKeysForLocationWithPrefix(t),this._updateSettingsDisplayNameAndLocalize(i,n)),this._settings.displaySettings[t]=i,i.nextDisplay={loadTime:Date.now()+this.DISPLAY_SETTINGS_UPDATE_FREQUENCY,displayName:n},o.updateDefer.resolve(i)}.bind(this)}),o.updateDefer.promise},_updateLocationsFromServer:function(){this._updatingLocationsFromServer||(this._updatingLocationsFromServer=!0,e.ajax({url:"/ipa/bumper-locations",success:function(e,n,i){t.isArray(e.locations)&&this._updateLocations(e.locations)}.bind(this),error:function(e,t,n){this._handleRefreshFailure(n,"locations")}.bind(this),complete:function(e,t){this._updatingLocationsFromServer=!1}.bind(this)}))},showingSiteBumper:function(){this._showingBumperForLocation=this.SITE_BUMPER_STRING},showingAppBumper:function(e){var n=t.isObject(e)?e.registeredName:e;this._showingBumperForLocation=n},_updateLocations:function(e){var n=t.difference(e,this._settings.locations),i=t.difference(this._settings.locations,e);this._settings.locations=e,e.forEach(function(e){this._bumperedThisSession[e]=!0}.bind(this)),n.length||i.length?(n.length&&marvel.events.trigger("spark-bumper-on",{locations:n,location:this._showingBumperForLocation}),i.length&&marvel.events.trigger("spark-bumper-off",{locations:i})):this._doRefreshCheck()},_handleRefreshFailure:function(e,t){marvel.logger.warn("Failed to refresh bumper settings:"+t,e)}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(20),n(834),n(835)],void 0===(r=function(e,t,n,i,r,o,a){return n.View.extend({cachename:"bumperview",events:{"click .bumper-return":"handleReturnClick"},initialize:function(){t.bindAll(this,t.functionsIn(this))},render:function(){var e=this.model.toJSON();this.model.get("dataPromise").then(function(t){e.loading=!1,e.bumperData=t,this.$el.html(r.render(o,e)),this.$bumper=this.$el.find(".bumper"),this.$bumper.addClass("bumper-showing"),this.delegateEvents()}.bind(this)),e.loading=!0,this.$el.html(r.render(o,e)),this.$bumper=this.$el.find(".bumper"),setTimeout(function(){this.$bumper.addClass("bumper-showing")}.bind(this),0)},handleReturnClick:function(e){e.preventDefault(),window.history.length>1?window.history.back():window.marvel.navigate("/projects",{trigger:!0})},remove:function(){this.undelegateEvents(),this.$el.empty()}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="bumper">\n    <div class="bumper-content">\n    {{^loading}}\n        {{#bumperData}}\n        <h1>{{title}}</h1>\n        <p>{{body}}</p>\n        {{/bumperData}}\n        {{#editor}}\n            <a class="bumper-return" href="/{{localizedPathPrefix}}sp/">Go back</a>\n        {{/editor}}\n    {{/loading}}\n    {{#loading}}\n    <div class="bumper-loading-spinner">Loading...</div>\n    {{/loading}}\n    </div>\n</div>\n'},function(e,t,n){var i=n(836);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(34)(!1)).push([e.i,".bumper{position:fixed;top:0;left:0;bottom:0;right:0;background-color:#35414c;color:#ffdb2a;z-index:999999;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s,-webkit-transform .5s;-webkit-transform:translateY(100%);transform:translateY(100%);text-align:center}.bumper .bumper-content{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.bumper .bumper-content h1{font-size:50px;font-weight:700;font-family:brandon-grotesque,adobe-clean,sans-serif;line-height:1.5}.bumper .bumper-content p{font-size:20px;font-family:adobe-clean,sans-serif;line-height:1.5}.bumper .bumper-content a{display:inline-block;color:#1473e6;background-color:#ffdb2a;font-size:20px;line-height:1.5;text-decoration:none;padding:.2em .7em;border-radius:1em;margin:1em}.bumper .bumper-content a:active{color:#1056a7}.bumper .bumper-content a:hover{color:#1269d0}.bumper .bumper-content .bumper-loading-spinner{display:block}.bumper-showing{-webkit-transform:translateY(0);transform:translateY(0)}",""])},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(7),n(838),n(11),n(20),n(53)],void 0===(r=function(e,t,n,i,r,o,a,s,l){"use strict";new a({color:"blue",name:"AppboypopupView"});return n.View.extend({el:".popup-wrapper",events:{"click .popup-primary-btn":"handlePrimaryClick","click .popup-secondary-btn":"handleSecondaryClick","click .popup-dismiss-btn":"handleDismissClick"},initialize:function(e){t.bindAll(this,t.functionsIn(this)),e&&(this.width=e.width||365,this.height=e.height||200,this.popupName=e.name||"unnamed-popup",this.primaryTxt=e.primaryTxt||"",this.secondaryTxt=e.secondaryTxt||"",this.closeBtnIsPresent=e.closeBtnIsPresent||void 0,this.closeClickHandler=e.closeClickHandler||void 0,this.dialogClass=e.dialogClass||void 0,this.primaryBtnTitle=e.primaryBtnTitle||"",this.secondaryBtnTitle=e.secondaryBtnTitle||"",this.primaryClickHandler=e.primaryClickHandler||void 0,this.secondaryClickHandler=e.secondaryClickHandler||void 0,this.wrapperClass=e.wrapperClass||void 0),this.$el.addClass(this.wrapperClass),this.primaryBtnTitle.length&&!this.secondaryBtnTitle.length&&(this.primaryBtnClass="yellow"),this.$el.html(s.render(o,{width:this.width,height:this.height,primaryText:this.primaryTxt,secondaryText:this.secondaryTxt,closeBtnIsPresent:this.closeBtnIsPresent,primaryBtnTitle:this.primaryBtnTitle,primaryBtnClass:this.primaryBtnClass,secondaryBtnTitle:this.secondaryBtnTitle,wrapperClass:this.wrapperClass}))},handleOptionsChange:function(e){this.$el.html(s.render(o,{width:e.width||this.width,height:e.height||this.height,primaryText:e.primaryTxt||this.primaryTxt,secondaryText:e.secondaryTxt||this.secondaryTxt,closeBtnIsPresent:e.closeBtnIsPresent||this.closeBtnIsPresent,primaryBtnTitle:e.primaryBtnTitle||this.primaryBtnTitle,primaryBtnClass:e.primaryBtnClass||this.primaryBtnClass,secondaryBtnTitle:e.secondaryBtnTitle||this.secondaryBtnTitle,wrapperClass:e.wrapperClass||this.wrapperClass}))},handlePrimaryClick:function(){r.trackEvent("popupPrimaryClicked",{contextString:""},"popup:"+this.popupName),t.isFunction(this.primaryClickHandler)&&this.primaryClickHandler()},handleSecondaryClick:function(){r.trackEvent("popupSecondaryClicked",{contextString:""},"popup:"+this.popupName),t.isFunction(this.primaryClickHandler)&&this.secondaryClickHandler()},handleDismissClick:function(){r.trackEvent("popupPrimaryClicked",{contextString:""},"popup:"+this.popupName),t.isFunction(this.closeClickHandler)&&this.closeClickHandler(),this.hide()},success:function(){this.$el.find(".popup-wrapper").addClass("success")},show:function(){l.dialogShown(this.popupName),this.showing=!0,this.$el.removeClass("hide"),r.trackEvent("showPopup",{contextString:""},"popup:"+this.popupName)},hide:function(){l.dialogClosed(this.popupName),this.showing=!1,this.$el.addClass("hide")}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='{{#width}}<div class="popup-dialog {{#wrapperClass}}{{wrapperClass}}{{/wrapperClass}}" style="width:{{width}}px;">{{/width}}\n{{^width}}<div class="popup-dialog {{#wrapperClass}}{{wrapperClass}}{{/wrapperClass}}">{{/width}}\n    {{#closeBtnIsPresent}}\n        <button class="popup-dismiss-btn"></button>\n    {{/closeBtnIsPresent}}\n    <div class="popup-section">\n        {{#logoURL}}\n            <div class="popup-logo"><img src="{{logoURL}}"/></div>{{/logoURL}}\n        <div class="popup-content">\n            {{#primaryText}}\n                <div class="popup-primary-text">{{primaryText}}</div>\n            {{/primaryText}}\n\n            {{#secondaryText}}\n                <div class="popup-secondary-text">{{secondaryText}}</div>\n            {{/secondaryText}}\n            <div class="popup-btns">\n                {{#primaryBtnTitle}}\n                    <button class="popup-primary-btn {{#primaryBtnClass}}{{primaryBtnClass}}{{/primaryBtnClass}}">{{primaryBtnTitle}}</button>\n                {{/primaryBtnTitle}}\n                {{#secondaryBtnTitle}}\n                    <button class="popup-secondary-btn">{{secondaryBtnTitle}}</button>\n                {{/secondaryBtnTitle}}\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(25),n(6),n(5),n(7),n(22),n(840),n(418)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c,d){"use strict";var u={web:"slate",graphic:"theo",video:"voice",refgraphic:"ref"};return r.extend({el:"#preview-overlay",events:{"click .preview-close-btn":"handlePreviewCloseBtn","click .done-btn":"handlePreviewCloseBtn","click .preview-overlay-bg":"handlePreviewCloseBtn","click .preview-make-one-btn":"handleMakeOneClick","click .preview-blank-one-btn":"handleBlankOneClick"},initialize:function(){t.bindAll(this,t.functionsIn(this))},render:function(){this.$el.html(c.toString()),this.iframe$=this.$el.find(".preview-iframe"),this.div$=this.$el.find(".preview-div"),a.hasFeature("create-from-enabled")&&this.$el.find(".preview-make-one-btn").removeClass("hide");var e=this.model.get("format");if("graphic"===e||"refgraphic"===e){var t=this.model.get("thumbURI");if(!t&&this.model.getImageRendition){var n=this.model.getImageRendition(1200);n&&(t=n.url,n.position&&this.div$.css("background-position",n.position))}this.div$.css("background-image","url("+t+")"),this.div$.removeClass("hide"),this.iframe$.addClass("hide")}else"video"===e?this.iframe$.attr("src","https://cc-api-cp.adobe.io/api/v2/voice/assets/"+this.model.get("alias")+"/video/embed?api_key=LucaApp1"):this.iframe$.attr("src",this.model.get("shareURL")),this.div$.addClass("hide"),this.iframe$.removeClass("hide");return this._workflowId&&this._workflowId.indexOf("editor")>-1?(this._inEditor=!0,this.$el.find(".preview-blank-one-btn").addClass("hide"),this.$el.find(".preview-make-one-btn").addClass("hide")):this._inEditor=!1,this},_openEditor:function(){var e=this.model.get("format");"video"===e?marvel.navigate("design/video/new",{trigger:!0}):"graphic"===e?marvel.navigate("design/post/new",{trigger:!0}):marvel.navigate("design/page/new",{trigger:!0})},handleMakeOneClick:function(e){var t={projectType:u[this.model.get("format")],exampleId:this.model.get("id"),contextString:"npw-example"};s.addContextData(t),s.trackEvent("projectCreationBegin",{},"organizer:projects"),this.hideOverlay(),d.createDuplicateFromCpModel(this.model)},handleBlankOneClick:function(e){var t={projectType:u[this.model.get("format")],exampleId:this.model.get("id"),contextString:"npw-example-blank"};s.addContextData(t),s.trackEvent("projectCreationBegin",{},"organizer:projects"),this.hideOverlay(),this._openEditor()},handlePreviewCloseBtn:function(e){s.trackEvent("exampleViewerClickedCloseBtn",{},"organizer:example-viewer"),this.handleCloseBtn()},onHide:function(){e("body").removeClass("no-scroll"),this.iframe$&&this.iframe$.remove()}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="preview-overlay-bg mrvl-overlay-bg">\n</div>\n<div class="preview-overlay-shell">\n    <div class="mrvl-overlay-close-header">\n        <button class="preview-close-btn outer-close-btn">Close</button>\n    </div>\n    <div class="marvel-overlay-shell-content">\n        <div class="preview-iframe-wrap">\n            <iframe class="preview-iframe" onmousewheel=""></iframe>\n        </div>\n        <div class="preview-div hide"></div>\n\n        <div class="preview-make-btns">\n            <div class="preview-blank-one-btn mrvl-btn">Create a story</div>\n            <div class="preview-make-one-btn mrvl-btn hide">Create a story like this</div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(1),n(0),n(2)],void 0===(r=function(e,t,i){"use strict";return i.Model.extend({initialize:function(e){var t,i,r,o;Promise.all([n.e("m-react-spectrum"),n.e(2),n.e(3),n.e(10)]).then(function(e){t=n(353).error,i=n(353).info,r=n(353).success,o=n(353).warning}.bind(null,n)).catch(n.oe),window.marvel.events.on("show-app-toast-message",(function(n){var a={};if("string"==typeof n?(a={timeout:5e3,variant:"info"}).message=n:"object"==typeof n&&((a=n).timeout||(a.timeout=5e3),a.variant||(a.variant="info")),e&&(a.container=e),"string"==typeof a.message)switch(a.variant.toLowerCase()){case"error":t(a.message,a);break;case"success":r(a.message,a);break;case"warning":o(a.message,a);break;default:i(a.message,a)}else window.marvel.logger.error("Expected toast message to be a string, got "+typeof a.message)}))}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(2),n(426)],void 0===(r=function(e,t,i){"use strict";var r=[n(843).default,n(844).default,n(845),n(846),n(847),n(848).default];return new(t.Model.extend({initialize:function(){e.bindAll(this,["registerProvider"])},registerProviders:function(){r.forEach(function(e){var t=Object.create(e.prototype);e.call(t),this.registerProvider(t)}.bind(this))},registerProvider:function(e){return i.registerProvider(e)}}))}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n(3),o=n(6),a=n(8),s=i.Model.extend({interestedEvents:["spark-feature-loading-failed","spark-auth-failed"],handleEvent:function(e,t,n){if("spark-feature-loading-failed"===e)return n&&n.authenticated?r({viewCachename:"messagingModal",model:new i.Model({name:"feature-loading-error",cssClassName:"error-message-modal",partials:{contents:"errorMessage"},errorMessage:"authenticated flag loading failed"})}):r();if("spark-auth-failed"===e){var s=function(){return o.attemptSignIn()};return r({view:"confirmview",params:{mode:"showAlert",arguments:[a.getString("auth-error-dialog-title"),a.getString("auth-error-dialog-details"),{okText:a.getString("auth-error-dialog-button"),ignoreBackgroundClick:!0,hideCloseButton:!0}],success:s,error:s}})}return r()}});t.default=s},function(e,t,n){"use strict";n.r(t);var i=n(2),r=(n(3),n(7)),o=i.Model.extend({interestedEvents:["missing-brand-fonts-ux"],handleEvent:function(e,t,i){return Promise.all([Promise.all([n.e(2),n.e("vendors~brandswitcher~ccx-share-sheet~missingfontsmodal~non-editor-search-react~react-personalizer"),n.e("missingfontsmodal")]).then(n.bind(null,911)),Promise.all([n.e("m-react-spectrum"),n.e(2),n.e(3),n.e("vendors~brand-kit-controller~brand-kit-editor~m-storage~react~search-controller~slate-app-ac-theme-editor"),n.e("react")]).then(n.bind(null,271))]).then((function(e){var n=e[0],i=e[1].default,o=document.getElementsByClassName("missing-fonts-overlay")[0];o||((o=document.createElement("div")).classList.add("missing-fonts-overlay"),document.body.appendChild(o));var a=n.default,s=new(i.wrapComponent(a))({modelJSON:{missingFonts:t.missingFonts,onComplete:function(e){e&&r.trackEvent("coediting:fontUploadSucceeded",{}),t.defer.resolve(e),s.remove()}},el:o});s.render(),r.trackEvent("coediting:fontDialogueViewed",{})}))}});t.default=o},function(e,t,n){var i,r;i=[n(0),n(2),n(8),n(1),n(3),n(6),n(5),n(19),n(62),n(7)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c){"use strict";return t.Model.extend({interestedEvents:["spark-area-change","spark-post-show-brandify-onboarding","spark-show-onboarding-dialog","spark-brand-kit-setup-complete"],handleEvent:function(d,u,h){return o.isValid().then(function(){return a.featuresLoaded().then(function(){if(a.hasFeature("entitle-brand-kit"))return s.getDefaultBrand().then(function(o){return(o?o.getSetupPercentDone():r.resolve(0)).then(function(s){if("spark-area-change"===d&&l.isConfettiArmed()){if(l.disarmConfetti(),"editor"===u.area&&"post"===u.section)return"premiumTemplate"===window.marvel._onboarding_premium?(window.marvel._onboarding_premium=null,{viewCachename:"upgradecongrats",model:new t.Model({title:n.getString("messaging-onboarding-editor-premium-template-purchase-title"),subtitle:"",message:n.getString("messaging-onboarding-editor-premium-template-purchase-message"),buttonText:n.getString("messaging-onboarding-editor-premium-template-purchase-buttonText"),dialogClass:"premium-template-purchase-congrats",analyticsConversionEvent:"paidWelcomeViewed",analyticsTrigger:"premiumTemplate",hideNotifyHandler:function(){window.marvel.events.trigger("onboarding-premium-template-remove")}})}):o&&o.activated()?{viewCachename:"upgradecongrats",model:new t.Model({title:n.getString("messaging-onboarding-editor-congrats-title"),subtitle:n.getString("messaging-onboarding-editor-congrats-subtitle"),message:"",buttonText:n.getString("messaging-onboarding-editor-congrats-buttonText"),dialogClass:"short-form",analyticsEvent:"viewedOnboarding",analyticsTrigger:"upgradeCongratsEditorActivatedBrand",analyticsConversionEvent:"clickedOnboardingCTA",analyticsCancelEvent:"clickedOnboardingMaybeLater"})}:{viewCachename:"upgradecongrats",model:new t.Model({title:n.getString("messaging-onboarding-editor-congrats-title"),subtitle:n.getString("messaging-onboarding-editor-congrats-subtitle"),message:"",buttonText:n.getString("messaging-onboarding-editor-congrats-buttonText"),dialogClass:"add-brand-msg",analyticsEvent:"viewedOnboarding",analyticsTrigger:"upgradeCongratsEditorUnactivatedBrand",analyticsConversionEvent:"clickedOnboardingCTA",analyticsCancelEvent:"clickedOnboardingMaybeLater"})};if("brandkit"===u.area)return o&&o.activated()?{viewCachename:"upgradecongrats",model:new t.Model({title:n.getString("messaging-onboarding-brandkit-congrats-title"),subtitle:n.getString("messaging-onboarding-brandkit-congrats-subtitle"),message:"",buttonText:n.getString("messaging-onboarding-editor-congrats-buttonText"),dialogClass:"short-form",analyticsEvent:"viewedOnboarding",analyticsTrigger:"upgradeCongratsActivatedBrand",analyticsConversionEvent:"clickedOnboardingCTA"})}:o&&1===s?{viewCachename:"upgradecongrats",model:new t.Model({title:n.getString("messaging-onboarding-brandkit-congrats-title"),subtitle:n.getString("messaging-onboarding-editor-congrats-subtitle"),message:"",brandName:o.getName()||"",buttonText:n.getString("messaging-onboarding-brandsetup-congrats-buttonTextComplete"),dialogClass:"just-add-brand-name",commitHandler:function(e,t){var n=t.$el.find(".upgrade-congrats-brand-name-input"),i=n.val();i?o.setName(i).then((function(){window.marvel.events.trigger("spark-activate-brand"),t.hideOverlay()})).done():n.addClass("error").focus()},analyticsEvent:"viewedOnboarding",analyticsTrigger:"upgradeCongratsBrandReadyBrand",analyticsConversionEvent:"clickedOnboardingCTA"})}:s>0?{viewCachename:"upgradecongrats",model:new t.Model({title:n.getString("messaging-onboarding-brandkit-congrats-title"),subtitle:n.getString("messaging-onboarding-editor-congrats-subtitle"),message:n.getString("messaging-onboarding-brandsetup-congrats-message"),buttonText:n.getString("messaging-onboarding-brandsetup-congrats-buttonText"),dialogClass:"",analyticsEvent:"viewedOnboarding",analyticsTrigger:"upgradeCongratsPartialBrand",analyticsConversionEvent:"clickedOnboardingCTA"})}:{viewCachename:"upgradecongrats",model:new t.Model({noViewJustClass:"confetti",analyticsEvent:"viewedOnboarding",analyticsTrigger:"upgradeCongratsWelcomeBrand"})}}if("spark-brand-kit-setup-complete"===d){if(o)return o.getFormatThemes("post").then(function(n){var a;return e.each(n,function(e){a||(a=o.getThemeThumbnailHrefAsync(e,500))}.bind(this)),a||(a=r.resolve()),a.then(function(e){return{viewCachename:"messagingModal",model:new t.Model({cssClassName:"onboarding-brand-setup-complete-modal-wrapper",hideOnButtonClick:!0,closeBtnIsPresent:!0,templateCoverHref:e,partials:{contents:"onboardingBrandSetupComplete"},clickHandler:function(e){i(e).hasClass("lets-go")&&c.trackEvent("clickedMsgModal:setupCompleteConfirm",{},"branding")}})}}.bind(this))}.bind(this));window.marvel.logger.warn("[Core:OnboardingMessagingProvider] spark-brand-kit-setup-complete was fired, but getDefaultBrand returned null")}if(("spark-show-onboarding-dialog"===d||"spark-post-show-brandify-onboarding"===d)&&"editor"===u.area){if("page"===u.section&&"page:settings:headerfooter"===h.touchpointName)return this.showOnboardingModal({title:n.getString("messaging-onboarding-brandcontext-editor-title"),subtitle:n.getString("messaging-onboarding-brandcontext-editor-subtitle"),analyticsTrigger:"messagingModalHeaderFooter",cssClass:"onboarding-header-footer-modal"});if("post"===u.section)return this.showOnboardingModal({title:n.getString("messaging-onboarding-brandcontext-post-title"),subtitle:n.getString("messaging-onboarding-brandcontext-post-subtitle"),analyticsTrigger:"messagingModalBrandify",cssClass:"onboarding-post-brandify-modal"})}return"spark-area-change"!==d||"brandkit"!==u.area||!a.hasFeature("remove-branding-enabled")||a.hasFeature("is-paid-user")||a.hasFeature("remove-branding-seen-premium-onboarding")?null:{viewCachename:"upgradecongrats",model:new t.Model({title:n.getString("messaging-onboarding-brandcontext-premium-title"),subtitle:" ",message:n.getString("messaging-onboarding-brandcontext-premium-message"),buttonText:n.getString("messaging-onboarding-brandcontext-premium-buttonText"),analyticsEvent:"viewedOnboarding",analyticsTrigger:"upgradeCongratsRemoveBrandingFreeMonth",analyticsConversionEvent:"clickedOnboardingCTA",hideNotifyHandler:function(e,t){a.setUserFlag("remove-branding-seen-premium-onboarding",!0)}})}}.bind(this))}.bind(this))}.bind(this))}.bind(this),function(){return null}.bind(this))},showOnboardingModal:function(e){return{viewCachename:"messagingModal",model:new t.Model({cssClassName:"onboarding-modal-wrapper",hideOnButtonClick:!0,closeBtnIsPresent:!0,partials:{contents:"onboardingBrandify"},title:e.title,subtitle:e.subtitle,cssClass:e.cssClass,clickHandler:function(t){i(t).hasClass("get-started")?(c.trackEvent("clickedOnboardingCTA",{trigger:e.analyticsTrigger}),window.marvel.navigate("/branding/",{trigger:!0})):c.trackEvent("clickedOnboardingMaybeLater",{trigger:"page:settings:headerfooter"})},analyticsEvent:"viewedOnboarding",analyticsTrigger:e.analyticsTrigger})}}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(2),n(1),n(8),n(3),n(6),n(5),n(62),n(7),n(4)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c){"use strict";return t.Model.extend({interestedEvents:["spark-area-change","brand-activation-attempted","add-custom-fonts-attempted","create-from-premium-template-attempted","remix-from-premium-template-attempted","remix-from-premium-template-attempted-in-editor-search","branded-project-open-attempted"],handleEvent:function(n,i,d){return o.isValid().then(function(){return a.featuresLoaded().then(function(){if(!a.hasFeature("entitle-brand-kit")){if("create-from-premium-template-attempted"===n){var o={name:"merch-upgrade-modal",cssClassName:"merch-upgrade-modal",cssSubclassName:"merch-premium-template-upgrade",autoShowDelay:0,closeBtnIsPresent:!0,hideOnButtonClick:!0,hideOnClickOutside:!0,eventData:d,partials:{contents:"premiumTemplateUpgrade","plan-price-display":d.partials&&d.partials["plan-price-display"]},clickHandler:function(e,t){var n=t.model.get("eventData");e.hasClass("upgrade-now")&&(l.trackEvent("template:upgradePressed",{contextualData5:"tagNames:"+n.analyticsFullTagNames,contextualData6:"templateType:paid",templateId:n.asset&&n.asset.id||"none"},n.analyticsPage),s.handleShowUpgrade({workflow:n.workflow,destinationUrl:n.destinationUrl,marketingTouchpointCTA:"upgrade"}))}.bind(this),analyticsEvent:"viewedMerchandising",analyticsTrigger:"messagingModalPremiumTemplateUpgrade"};return d.additionalFieldsForModel&&e.assign(o,d.additionalFieldsForModel),d.partials&&e.assign(o.partials,d.partials),{viewCachename:"messagingModal",model:new t.Model(o)}}if("remix-from-premium-template-attempted"===n||"remix-from-premium-template-attempted-in-editor-search"===n){var u="remix-from-premium-template-attempted"===n;return{viewCachename:"messagingModal",model:new t.Model({name:"merch-upgrade-modal",cssClassName:"merch-upgrade-modal",cssSubclassName:"merch-premium-template-upgrade",autoShowDelay:0,closeBtnIsPresent:!0,hideOnButtonClick:!0,hideOnClickOutside:!1,eventData:d,partials:{contents:"premiumTemplateRemixUpgrade","plan-price-display":d.partials&&d.partials["plan-price-display"]},closeBtnCallback:function(){u&&window.marvel.navigate("/",{trigger:!0})},clickHandler:function(e,t){var n=t.model.get("eventData");e.hasClass("upgrade-now")&&(n.preOkCallback&&n.preOkCallback()||r()).then((function(){l.trackEvent("template:upgradePressed",{contextualData5:"tagNames:"+n.analyticsFullTagNames,contextualData6:"templateType:paid",templateId:n.asset&&n.asset.id||"none"},n.analyticsPage),s.handleShowUpgrade({workflow:"premiumTemplate",destinationUrl:n.destinationUrl,marketingTouchpointCTA:"upgrade"})}))}.bind(this),analyticsEvent:"viewedMerchandising",analyticsTrigger:"messagingModalPremiumTemplateUpgrade"})}}if("brand-activation-attempted"===n){var h=d&&d.workflow||"brand-setup",p=d&&d.touchpointCTA||"upgrade";return{viewCachename:"messagingModal",model:new t.Model({name:"merch-upgrade-modal",cssClassName:"merch-upgrade-modal",autoShowDelay:0,closeBtnIsPresent:!1,hideOnButtonClick:!0,hideOnClickOutside:!0,partials:{contents:"merchUpgradeModal"},clickHandler:function(e,t){e.hasClass("merch-return-to-setup-btn")||(e.hasClass("learn-more")?s.handleShowUpgradeLearnMore({workflow:h,marketingTouchpointCTA:p}):e.hasClass("upgrade-now")&&s.handleShowUpgrade({workflow:h,marketingTouchpointCTA:p}))}.bind(this),analyticsEvent:"viewedMerchandising",analyticsTrigger:"messagingModalMerchBrandActivation"})}}if("branded-project-open-attempted"===n){var f="unknown";i&&i.doc&&(f=i.doc.getMyApp().typeName),l.trackEvent("coediting:merchandizingViewed",{sparkFormat:f},"coediting");var g=!0;i.captive&&(g=!1);return i.doNotRefresh&&!1,{viewCachename:"messagingModal",model:new t.Model({name:"merch-upgrade-modal",cssClassName:"merch-upgrade-modal",cssSubclassName:"merch-branded-project-upgrade",autoShowDelay:0,closeBtnIsPresent:!0,hideOnClickOutside:g,partials:{contents:"merchUpgradeBrandedProject"},closeBtnCallback:function(){g||window.marvel.navigate("/",{trigger:!0})},clickHandler:function(e,t){if(e.hasClass("upgrade-now")){l.trackEvent("coediting:merchandizingTrialPressed",{sparkFormat:f},"coediting");var n=c.upgradeCommercePath+"/payment/?items%5B0%5D%5Bid%5D=322DEC811DA8AF44D72ABB02846141ED&items%5B0%5D%5Bcs%5D=0&rUrl=https%3A%2F%2Fspark.adobe.com%2Fsp%2Fonboarding%2Fplanspagepurchase%3FproductId%3DASPK%26orderId%3D%7B%7BorderId%7D%7D%26touchpointName%3DBrazeTrial&cli=spark&co=US&lang=en";window.open(n,"_blank")}else e.hasClass("show-me-subscription-options")&&(l.trackEvent("coediting:merchandizingPressed",{sparkFormat:f},"coediting"),s.handleShowUpgrade({workflow:"project-open",marketingTouchpointCTA:"organizer"}))}.bind(this)})}}}}.bind(this))}.bind(this),function(){return null}.bind(this))}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(0),n(1),n(2),n(3),n(7),n(273)],void 0===(r=function(e,t,n,i,r,o){"use strict";return n.Model.extend({interestedEvents:["spark-appboy-msg-received"],handleEvent:function(i,a,s){return o.init().then((function(){o.log("in appboy messaging provider init: handleEvent"+i);var l=s.iam;if(!l)return null;if(o.shouldShowIamOnPage(l)){var c=l;o.setCanProcessQueue(!1);var d=a.area||"any";"any"!==d&&(d+=a.section?":"+a.section:"");var u=new n.Model({inAppMessage:s.iam,page:d});e.each(c.extras,(function(e,t){u.set(t,e)})),c.imageUrl&&c.imageUrl.length&&u.set("image",c.imageUrl),c.header&&c.header.length&&u.set("title",c.header),c.message&&c.message.length&&u.set("subtitle",c.message),c.extras&&c.extras.animation&&u.set("animation",c.extras.animation),c.buttons&&c.buttons.length&&(u.set("primaryButtonTitle",c.buttons[0].text),c.buttons&&c.buttons.length>1&&u.set("secondaryButtonTitle",c.buttons[1].text));var h=function(n,i,a){var s=o.getInappCampaignEventData(i);if(o.logInAppMessageButtonClick(a,i),a.uri&&a.uri.length)if(r.trackEvent(o.eventConfigs.inappMessageClickedCTA,s,n),a.uri.indexOf("https")>=0){var l="BLANK"===i.openTarget?"_blank":"_self";t('<a href="'+a.uri+'" target="'+l+'"></a>')[0].click()}else window.marvel.navigate(a.uri,{trigger:!0});else r.trackEvent(o.eventConfigs.inappMessageDismissed,s,n);e.delay((function(){window.marvel.events.trigger("spark-dialog-closed",{campaignName:s.engagementAppboyCampaignName})}),10)};return u.set("action",function(t,n,i){var a=o.getInappCampaignEventData(n);"close"===i?(r.trackEvent(o.eventConfigs.inappMessageDismissed,a,t),e.delay((function(){window.marvel.events.trigger("spark-dialog-closed")}),10)):"primary"===i?h(t,n,n.buttons[0]):"secondary"===i&&h(t,n,n.buttons[1])}.bind(null,d,c)),{viewCachename:"appboymsgview",model:u}}o.addToTopOfQueue(l)}),function(){return o.setCanProcessQueue(!0),null}.bind(this))}})}.apply(t,i))||(e.exports=r)},function(e,t,n){"use strict";n.r(t);var i=n(2),r=n(3),o=i.Model.extend({interestedEvents:["spark-home-loaded"],handleEvent:function(e,t,n){if("spark-home-loaded"===e){return r({view:"sparkhometour",params:{}})}return r()}});t.default=o},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(20),n(25),n(5),n(7),n(850),n(8)],void 0===(r=function(e,t,n,i,r,o,a,s,l){"use strict";return r.extend({el:".upgrade-congrats-overlay",events:{"click .upgrade-congrats-bg":"handleCloseBtn","click .upgrade-close-btn":"handleCloseBtn","keypress .upgrade-congrats-brand-name-input":"handleBrandName","click .ok-button":"handleOkBtn","click .upgrade-congrats-add-your-brand-link":"handleAddYourBrand","click .upgrade-congrats-return-to-setup-btn":"handleBackToSetup"},cachename:"upgradecongrats",initialize:function(){t.bindAll(this,t.functionsIn(this))},handleCloseBtn:function(){var e=this.model.get("analyticsCancelEvent"),t=this.model.get("analyticsTrigger");e&&a.trackEvent(e,{trigger:t}),r.prototype.handleCloseBtn.call(this)},handleBackToSetup:function(){this.hideOverlay()},handleBrandName:function(e){13===e.keyCode||27===e.keyCode?this.handleOkBtn(e):this.$el.find(".upgrade-congrats-brand-name-input").removeClass("error")},handleBlurBrandName:function(e){this._handleBlurBrandName()},_handleBlurBrandName:function(){var e=this.$el.find(".upgrade-congrats-brand-name-input");return e.val()?(e.removeClass("error"),!0):(e.addClass("error"),!1)},handleOkBtn:function(t){var n=this.model.get("commitHandler");n?n(e(t.currentTarget),this):this.hideOverlay();var i=this.model.get("analyticsConversionEvent"),r=this.model.get("analyticsTrigger");i&&a.trackEvent(i,{trigger:r})},handleAddYourBrand:function(e){e.preventDefault(),a.trackEvent("clickedCongratsViewAddBrandLink",{},"UpgradeCongrats"),this.hideOverlay(),window.marvel.navigate("/branding/",{trigger:!0})},hideOverlay:function(){var e=this.model.get("hideNotifyHandler");e&&e(),r.prototype.hideOverlay.call(this)},render:function(){var t=this.model.get("noViewJustClass"),n=this.model.toJSON(),i=this.model.get("analyticsEvent"),r=this.model.get("analyticsTrigger");if(i&&a.trackEvent(i,{trigger:r}),t)e("body").addClass(t);else{if(this.$el.html(l.mustacheRender(s.toString(),n)),n.brandName)this.$el.find(".upgrade-congrats-brand-name-input").val(n.brandName);window.marvel._dialogShowing||this.showOverlay()}}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="upgrade-congrats-bg mrvl-overlay-bg">\n</div>\n<div class="upgrade-congrats-dialog overlay-dialog {{dialogClass}}">\n    <div class="upgrade-congrats-modal-header">\n        <button class="upgrade-congrats-return-to-setup-btn">{{upgrade-congrats-return-to-setup-text}}</button>\n    </div>\n    <div class="upgrade-close-btn"></div>\n    <div class="upgrade-congrats-bg-image"></div>\n    <div class="upgrade-congrats-container">\n        {{#title}}<h2 class="upgrade-congrats-title">{{title}}</h2>{{/title}}\n        {{#subtitle}} <h3 class="upgrade-congrats-subhead">{{subtitle}}</h3>{{/subtitle}}\n        {{#message}}\n            <p class="upgrade-congrats-message">{{{message}}}</p>\n            <p class="upgrade-congrats-add-brand-message">\n                {{upgrade-congrats-add-brand-message}}\n            </p>\n        {{/message}}\n        <div class="upgrade-congrats-brand-name">\n            <input type="text" placeholder="{{upgrade-congrats-add-your-brand-name-placeholder-text}}" value="" class="upgrade-congrats-brand-name-input" maxlength="80">\n        </div>\n        {{#buttonText}}\n        <div class="buttonwrap">\n            <button class="sprk-btn ok-button">{{buttonText}}</button>\n        </div>\n        {{/buttonText}}\n    </div>\n</div>\n'},function(e,t,n){var i,r;i=[n(0),n(1),n(2),n(273),n(7),n(53),n(852),n(495),n(493),n(855)],void 0===(r=function(e,t,n,i,r,o,a,s,l,c){"use strict";return n.View.extend({cachename:"appboymsgview",dialogs:{modal:!0,popup:!0,takeover:!0,takeover_multi_col:!0,takeover_multi_col_with_cta:!0,takeover_multi_col_with_explainer:!0,toast:!0},render:function(){var n;i.setCanProcessQueue(!1);var d=this.model.get("inAppMessage");this.model.get("page");i.log("got message in view");var u=d.id;if(u&&u.length){o.dialogShown("appboy-"+u);var h=i.getInappCampaignEventData(d);if(d&&d.extras&&d.extras.design_type&&d.extras.design_type.length&&this.dialogs.hasOwnProperty(d.extras.design_type)&&this.dialogs[d.extras.design_type]&&e.isUndefined(this.model.get("controlMessage"))){var p,f=d.extras.design_type;"modal"===f?(p=new a({model:this.model})).setElement(t(".spark-dialog-wrapper")):"popup"===f?(p=new s({model:this.model})).setElement(t(".popup-message-wrapper")):f.indexOf("takeover")>=0?(p=new l({model:this.model})).setElement(t(".takeover-wrapper")):"toast"===f&&(p=new c({model:this.model})).setElement(t(".toast-wrapper")),n=o.dialogBeingShown(),o.dialogShowing()&&n.indexOf("appboy")<0?i.addToTopOfQueue(d):e.delay((function(){!o.dialogShowing()||n.indexOf("appboy")>=0?(i.logInAppMessageImpression(d),r.trackEvent(i.eventConfigs.inappMessageShown,h),p.render()):i.addToTopOfQueue(d)}),50)}else e.isUndefined(this.model.get("controlMessage"))?i.displayInAppMsg(d):(n=o.dialogBeingShown(),o.dialogShowing()&&n.indexOf("appboy")<0?i.addToTopOfQueue(d):e.delay((function(){!o.dialogShowing()||n.indexOf("appboy")>=0?(i.logInAppMessageImpression(d),i.log("Got a control message. Carrying on"),e.delay((function(){marvel.events.trigger("spark-dialog-closed")}),50)):i.addToTopOfQueue(d)}),50))}}})}.apply(t,i))||(e.exports=r)},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(20),n(853)],void 0===(r=function(e,t,n,i,r,o){"use strict";return n.View.extend({el:".spark-modal-dialog",events:{"click .spark-modal-primary-btn":"handlePrimaryButton","click .spark-modal-secondary-btn":"handleSecondaryButton","click .spark-modal-dismiss-btn":"handleCloseButton"},initialize:function(){this.on("close",this.handleCloseButton,this)},handlePrimaryButton:function(e){this.model.get("action")&&this.model.get("action")("primary"),this.remove()},handleCloseButton:function(){this.model.get("action")&&this.model.get("action")("close"),this.remove()},handleSecondaryButton:function(){this.model.get("action")&&this.model.get("action")("secondary"),this.remove()},render:function(){this.$el.html(r.to_html(o.toString(),this.model.toJSON()))},remove:function(){this.$el.empty()}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports='<div class="spark-modal-wrapper" style="{{#width}}width: {{width}};{{/width}}{{#height}}height: {{height}};{{/height}}">\n    <div class="spark-modal-dialog">\n        <button class="spark-modal-dismiss-btn spark-modal-close"></button>\n        <div class="spark-modal-section">\n            {{#image}}<div class="spark-modal-logo"><img src="{{image}}" /></div>{{/image}}\n            <div class="spark-modal-content">\n                {{#title}}<div class="spark-modal-primary-text">{{title}}</div>{{/title}}\n                {{#subtitle}}<div class="spark-modal-secondary-text">{{subtitle}}</div>{{/subtitle}}\n                <div class="spark-modal-btns">\n                    {{#secondaryButtonTitle}}<button class="spark-modal-secondary-btn spark-modal-close">{{secondaryButtonTitle}}</button>{{/secondaryButtonTitle}}\n                    {{#primaryButtonTitle}}<button class="spark-modal-primary-btn">{{primaryButtonTitle}}</button>{{/primaryButtonTitle}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(e,t){e.exports='<div class="popup-message-dialog{{#themeClassName}} {{themeClassName}}{{/themeClassName}}" style="{{#width}}width: {{width}};{{/width}}{{#height}}height: {{height}};{{/height}}">\n    <div class="popup-message-section">\n        {{#image}}\n            <div class="popup-message-image-container" >\n                <img class="popup-message-image" src="{{image}}" />\n            </div>\n        {{/image}}\n        {{#title}}<h4 class="popup-message-header-text">{{title}}</h4>{{/title}}\n        {{#subtitle}}<p class="popup-message-sub-text">{{subtitle}}</p>{{/subtitle}}\n        <div class="popup-message-button-container">\n            {{#secondaryButtonTitle}}<button class="popup-message-secondary-button popup-message-close">{{secondaryButtonTitle}}</button>{{/secondaryButtonTitle}}\n            {{#primaryButtonTitle}}<button class="popup-message-primary-button">{{primaryButtonTitle}}</button>{{/primaryButtonTitle}}\n        </div>\n        <div class="popup-message-close-x popup-message-close"></div>\n    </div>\n</div>'},function(e,t,n){var i,r;i=[n(1),n(0),n(2),n(3),n(856)],void 0===(r=function(e,t,n,i,r){"use strict";return n.View.extend({toasts:{success:"success",error:"success",warning:"success",neutral:"neutral",info:"info"},initialize:function(){t.bindAll(this,t.functionsIn(this)),this.on("close",this.handleCloseButton,this)},handleCloseButton:function(){this.model.get("action")&&this.model.get("action")("close"),this.remove()},handlePrimaryButton:function(){this.model.get("action")&&this.model.get("action")("primary"),this.remove()},handleSecondaryButton:function(){this.model.get("action")&&this.model.get("action")("secondary"),this.remove()},render:function(){var n;this.model.get("primaryButtonTitle")&&(n=this.handlePrimaryButton),this.model.get("secondaryButtonTitle")&&(n=this.handleSecondaryButton);var i;try{(i=JSON.parse(this.model.toJSON()))&&t.isObject(i)||(i={})}catch(e){i={}}var o="toast-"+(i=t.extend({title:"test",toast:"notice",position:"top",direction:"full-width"},i)).position+"-"+i.direction,a={title:"",subtitle:"",closeButton:!0,closeHtml:'<button type="button"></button>',closeMethod:"fadeOut",closeDuration:"0",closeEasing:"swing",positionClass:o,onclick:function(){n()}.bind(this),iconClass:"toast-"+i.toast,progressBar:!1,showDuration:"1000",hideDuration:"1000",timeOut:"0",extendedTimeout:"0",closeClass:"toast-close-button",extendedTimeOut:"0",showEasing:"swing",hideEasing:"linear",showMethod:"slideDown",hideMethod:"fadeOut"};try{i&&t.isObject(i)&&!t.isEmpty(i)&&(a=t.extend(a,i))}catch(e){}a.title="",a.subtitle="Welcome world!",a.onShown=function(){o.indexOf("top-full-width")>=0&&e(".mrvl-header, .mrvl-header-bg, .mrvl-main-page").animate({top:48},200),this.model.get("action")("onshown")&&this.model.get("action")("onshown")}.bind(this),a.onHidden=function(){o.indexOf("top-full-width")>=0&&e(".mrvl-header, .mrvl-header-bg, .mrvl-main-page").animate({top:0},a.closeDuration),this.model.get("action")("onhidden")&&this.model.get("action")("onhidden")}.bind(this),a.onclick=function(){this.model.get("action")("onclick")&&this.model.get("action")("onclick")}.bind(this),a.onCloseClick=function(){this.model.get("action")("onCloseClick")&&this.model.get("action")("onCloseClick")}.bind(this),"success"===this.toasts[i.toast]?r.success(a.subtitle,a.title,a):"error"===this.toasts[i.toast]?r.error(a.subtitle,a.title,a):r.info(a.subtitle,a.title,a)},remove:function(){this.$el.empty()}})}.apply(t,i))||(e.exports=r)},function(e,t){e.exports=dialogsToast},function(e,t){e.exports='<div class="messaging-modal-shell">\n    {{#closeBtnIsPresent}}\n    <button class="messaging-modal-shell-dismiss-button"></button>\n    {{/closeBtnIsPresent}}\n    <div class="shell-content">\n    {{> contents}}\n    </div>\n</div>\n'},function(e,t){e.exports='<div class="onboarding-modal onboarding-paid-first-visit-modal">\n    <div class="text-col">\n        <h3>Spark is now customizeable with your own brand</h3>\n        <p>Message copy specific to returning CC users. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed dapibus molestie ex.</p>\n        <ul>\n            <li>Replace the Adobe Spark logo with your own</li>\n            <li>Customize themes and templates with your choice of colors and fonts</li>\n            <li>Maintain visual consistency across all your stories</li>\n            <li>Manage all your branded content in one place</li>\n        </ul>\n        <div class="modal-ctas">\n            <button class="learn-more sp-cta-button-secondary" data-analytics="learn-more">Maybe later</button>\n            <button class="add-your-brand sp-cta-button-primary" data-analytics="add-your-brand">Add your brand</button>\n        </div>\n    </div>\n</div>\n\n'},function(e,t){e.exports='<div class="merch-upgrade-modal-contents merch-upgrade-branding">\n    <div class="merch-upgrade-modal-header">\n        <button class="merch-return-to-setup-btn">{{ messaging-merchandising-brandcontext-almost-back-btn }}</button>\n    </div>\n    <div class="modal-main">\n        <h3>{{ messaging-merchandising-brandcontext-almost-title }}</h3>\n        <p>{{ messaging-merchandising-brandcontext-almost-to-unlock }}</p>\n        <ul>\n            <li>{{ messaging-merchandising-brandcontext-almost-bullet-1 }}</li>\n            <li>{{ messaging-merchandising-brandcontext-almost-bullet-2 }}</li>\n            <li>{{ messaging-merchandising-brandcontext-almost-bullet-3 }}</li>\n        </ul>\n        <div class="modal-ctas">\n            <button class="learn-more sp-cta-button-secondary" data-analytics="learn-more">{{ messaging-merchandising-brandcontext-almost-learn-more-btn }}</button>\n            <button class="upgrade-now sp-cta-button-primary" data-analytics="upgrade-now">{{ messaging-merchandising-brandcontext-almost-upgrade-btn }}</button>\n        </div>\n    </div>\n</div>\n\n'},function(e,t){e.exports='<div class="provide-fonts-modal-contents">\n    <div class="modal-hero">\n    </div>\n    <div class="modal-main center">\n        <h3>Missing Fonts</h3>\n        <p>You\'ve opened a project that uses restricted fonts.  <strong>Please provide your own copy of these fonts.</strong></p>\n        <h4>Name</h4>\n        <div class="missing-fonts-list">\n            <div class="missing-font-item">\n                <div class="missing-font-name">Some font name</div>\n                <button class="missing-font-upload-btn hide">Upload</button>\n            </div>\n        </div>\n        <div class="modal-ctas">\n            <button class="cancel sp-cta-button-secondary">Cancel</button>\n            <button class="upload-font sp-cta-button-primary" data-analytics="fonts-uploaded">Upload Font</button>\n            <button class="continue sp-cta-button-primary hide" data-analytics="fonts-uploaded">Continue</button>\n        </div>\n        \n    </div>\n</div>\n\n'},function(e,t){e.exports='<div data-auto="merch-upgrade-modal-paywall" class="merch-upgrade-modal-contents merch-upgrade-branded-project">\n    <div class="modal-hero-bg">\n        <div class="modal-hero">\n            <img src = "/images/ezgif-recipient_paywall.gif" />\n        </div>\n    </div>\n    <div class="modal-main center">\n        <h3>{{merch-touchpoint-branded-project-primary-txt}}</h3>\n        <p>{{merch-touchpoint-branded-project-secondary-txt}}</p>\n        <div class="modal-ctas">\n            <button class="upgrade-now sp-cta-button-primary" data-analytics="upgrade-now">\n                {{merch-touchpoint-branded-project-primary-btn-title}}\n            </button>\n            <button class="show-me-subscription-options sp-cta-button-secondary-title" data-analytics="show-me-subscription-options">\n                {{merch-touchpoint-branded-project-secondary-btn-title}}\n            </button>\n        </div>\n    </div>\n</div>\n'},function(e,t){e.exports='<div class="onboarding-modal onboarding-brand-setup-complete-modal" style="background-image: url({{{templateCoverHref}}});">\n    <div class="text-col">\n        <h3>{{brand-setup-success-modal-title}}</h3>\n        <p>{{brand-setup-success-modal-description}}</p>\n        <div class="modal-ctas">\n            <button class="lets-go sp-cta-button-primary" data-analytics="setup-complete-lets-go">{{brand-setup-success-modal-button}}</button>\n        </div>\n    </div>\n</div>\n\n'},function(e,t){e.exports='<div class="onboarding-modal-common {{cssClass}}">\n    <div class="text-col">\n        <h3>{{title}}</h3>\n        <p>{{subtitle}}</p>\n        <div class="modal-ctas">\n        \t<button class="learn-more sp-cta-button-secondary" data-analytics="learn-more">Maybe later</button>\n            <button class="get-started sp-cta-button-primary" data-analytics="get-started">Get started</button>\n        </div>\n    </div>\n</div>'},function(e,t){e.exports='<div class="lr-editor-modal">\n    <div class="inner-content">\n        <div class="inner-img">\n            <img src="/images/meta-editor/lr-intro.jpg"/>\n        </div>\n        <div class="inner-text">\n            <p>\n                Adobe Spark Page helps you create a consistent, beautiful, on-brand photo journal. See stunning examples\n                of Pages made by other photographers.\n            </p>\n        </div>\n        <div class="inner-bottom">\n            <div class="modal-ctas">\n                <button class="btn-confirm sp-cta-button-primary dismiss-btn">Get started</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n'},function(e,t){e.exports='<div class="merch-upgrade-modal-contents">\n    <div class="modal-hero">\n        <div class="modal-hero-contents">\n            <h3>{{#fmr}}merch-touchpoint-premium-template-primary-txt{{/fmr}}</h3>\n        </div>\n    </div>\n    <div class="modal-main left">\n\n        <p>{{merch-touchpoint-premium-template-secondary-txt}}</p>\n        <div class="modal-ctas">\n            {{> plan-price-display}}\n            <button class="upgrade-now sp-cta-button-primary" data-analytics="upgrade-now">{{merch-touchpoint-premium-template-primary-btn-title}}</button>\n        </div>\n    </div>\n</div>\n\n'},function(e,t){e.exports='<div class="merch-upgrade-modal-contents">\n    <div class="modal-hero">\n        <div class="modal-hero-contents">\n            <h3>{{merch-touchpoint-premium-template-remix-primary-txt}}</h3>\n        </div>\n    </div>\n    <div class="modal-main center">\n\n        <p>{{merch-touchpoint-premium-template-remix-secondary-txt}}</p>\n        <div class="modal-ctas">\n            {{>plan-price-display}}\n            <button class="upgrade-now sp-cta-button-primary" data-analytics="upgrade-now">{{merch-touchpoint-premium-template-remix-primary-btn-title}}</button>\n        </div>\n    </div>\n</div>\n\n'},function(e,t){e.exports="<div class='error-message-modal-container'>\n    <h1>{{error-message-modal-sorry}}</h1>\n    <h2>{{error-message-modal-reload}}</h2>\n    <h2>{{{error-message-modal-contact}}}</h2>\n    <p>{{#fm}}error-message-modal-cause{{/fm}}</p>\n</div>\n"}]);
//# sourceMappingURL=m-web-56ed2d73.js.map